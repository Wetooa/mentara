model User {
  id                  String                    @id @unique @default(uuid())
  email               String                    @unique
  firstName           String
  middleName          String?
  lastName            String
  birthDate           DateTime?
  address             String?
  role                String                    @default("client")
  createdAt           DateTime                  @default(now())
  updatedAt           DateTime                  @updatedAt
  password            String?
  emailVerified       Boolean                   @default(false)
  emailVerifyToken    String?                   @unique
  emailVerifyTokenExp DateTime?
  resetToken          String?                   @unique
  resetTokenExpiry    DateTime?
  isActive            Boolean                   @default(true)
  failedLoginCount    Int                       @default(0)
  avatarUrl           String?
  coverImageUrl       String?
  bio                 String?
  suspendedAt         DateTime?
  suspendedBy         String?
  suspensionReason    String?
  deactivatedAt       DateTime?
  deactivatedBy       String?
  deactivationReason  String?
  lastLoginAt         DateTime?
  lockoutUntil        DateTime?
  admin               Admin?                    @relation("UserAdmin")
  client              Client?                   @relation("UserClient")
  comments            Comment[]
  commentHearts       CommentHeart[]
  conversations       ConversationParticipant[] @relation("UserConversations")
  memberships         Membership[]
  sentMessages        Message[]                 @relation("UserMessages")
  messageReactions    MessageReaction[]         @relation("UserMessageReactions")
  messageReadReceipts MessageReadReceipt[]      @relation("UserReadReceipts")
  notifications       Notification[]            @relation("UserNotifications")
  paymentMethods      PaymentMethod[]           @relation("UserPaymentMethods")
  posts               Post[]
  postHearts          PostHeart[]
  reports             Report[]                  @relation("UserReports")
  reportsAgainstMe    Report[]                  @relation("UserBeingReported")
  therapist           Therapist?                @relation("UserTherapist")
  blockedBy           UserBlock[]               @relation("UserBlocked")
  blocking            UserBlock[]               @relation("UserBlocking")
  journalEntries      JournalEntry[]            @relation("UserJournalEntries")
  subscriptions       UserSubscription[]        @relation("UserSubscriptions")

  // Group Therapy Sessions
  createdGroupSessions       GroupTherapySession[]     @relation("GroupSessionCreator")
  groupSessionParticipations GroupSessionParticipant[] @relation("GroupSessionParticipant")

  @@index([email])
  @@index([role])
  @@index([isActive])
  @@index([role, isActive])
  @@index([role, isActive, createdAt])
  @@index([email, isActive])
  @@index([createdAt])
  @@index([emailVerified])
  @@index([lastLoginAt])
}
