model Community {
    id                   String               @id @default(uuid())
    name                 String               @unique
    slug                 String               @unique
    description          String?
    imageUrl             String?
    createdAt            DateTime             @default(now())
    updatedAt            DateTime             @updatedAt
    memberships          Membership[]
    posts                Post[]
    moderatorCommunities ModeratorCommunity[]

    @@index([name])
    @@index([slug])
}

model Membership {
    id          String    @id @default(uuid())
    communityId String
    role        String    @default("member") // member, moderator, admin
    joinedAt    DateTime  @default(now())
    community   Community @relation(fields: [communityId], references: [id])
    user        User?     @relation(fields: [userId], references: [id])
    userId      String?

    @@unique([userId, communityId])
    @@index([userId])
    @@index([communityId])
}
