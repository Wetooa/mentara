enum WorksheetStatus {
    UPCOMING
    ASSIGNED  
    PAST_DUE
    COMPLETED
}

model Worksheet {
    id           String                @id @default(uuid())
    clientId     String // Use clientId for proper relation with Client model
    therapistId  String?
    title        String
    instructions String? // Added instructions field
    description  String?
    dueDate      DateTime // Added due date
    status       WorksheetStatus       @default(UPCOMING)
    isCompleted  Boolean               @default(false) // Completion status
    submittedAt  DateTime? // When the worksheet was submitted
    feedback     String? // Therapist feedback
    
    // Materials provided by therapist
    materialUrls  String[] @default([])
    materialNames String[] @default([])
    materialSizes Int[]    @default([])
    
    // Submissions from client
    submissionUrls  String[] @default([])
    submissionNames String[] @default([])
    submissionSizes Int[]    @default([])
    
    // Additional attachments (general use)
    attachmentUrls  String[] @default([])
    attachmentNames String[] @default([])
    attachmentSizes Int[]    @default([])
    
    createdAt    DateTime              @default(now())
    updatedAt    DateTime              @updatedAt
    client       Client                @relation(fields: [clientId], references: [userId], onDelete: Cascade)
    therapist    Therapist?            @relation(fields: [therapistId], references: [userId], onDelete: SetNull)

    @@index([clientId])
    @@index([therapistId])
    @@index([status])
    @@index([isCompleted])
}

// WorksheetMaterial and WorksheetSubmission tables removed
// Files are now stored inline in the Worksheet model using arrays
// This follows the same pattern as Posts and Comments modules
