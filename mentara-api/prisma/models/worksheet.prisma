model Worksheet {
  id            String               @id @default(uuid())
  clientId      String
  therapistId   String
  title         String
  instructions  String
  dueDate       DateTime
  status        WorksheetStatus      @default(ASSIGNED)
  materialUrls  String[]             @default([])
  materialNames String[]             @default([])
  createdAt     DateTime             @default(now())
  updatedAt     DateTime             @updatedAt
  client        Client               @relation(fields: [clientId], references: [userId], onDelete: Cascade)
  therapist     Therapist            @relation(fields: [therapistId], references: [userId], onDelete: Cascade)
  submission    WorksheetSubmission?

  @@index([clientId])
  @@index([therapistId])
  @@index([status])
  @@index([dueDate])
}

model WorksheetSubmission {
  id          String    @id @default(uuid())
  worksheetId String    @unique
  fileUrls    String[]
  fileNames   String[]
  fileSizes   Int[]
  submittedAt DateTime  @default(now())
  feedback    String?
  worksheet   Worksheet @relation(fields: [worksheetId], references: [id], onDelete: Cascade)

  @@index([worksheetId])
  @@index([submittedAt])
}

enum WorksheetStatus {
  ASSIGNED
  SUBMITTED
  REVIEWED
  OVERDUE
}
