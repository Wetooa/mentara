model Notification {
  id        String               @id @default(uuid())
  userId    String
  title     String
  message   String
  type      NotificationType
  priority  NotificationPriority @default(NORMAL)
  data      Json?
  actionUrl String?
  isRead    Boolean              @default(false)
  readAt    DateTime?
  createdAt DateTime             @default(now())
  updatedAt DateTime             @updatedAt
  user      User                 @relation("UserNotifications", fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([isRead])
  @@index([type])
  @@index([priority])
  @@index([createdAt])
  @@index([userId, isRead, createdAt(sort: Desc)])
}

enum NotificationType {
  APPOINTMENT_REMINDER
  APPOINTMENT_CONFIRMED
  APPOINTMENT_CANCELLED
  APPOINTMENT_RESCHEDULED
  MESSAGE_RECEIVED
  MESSAGE_REACTION
  WORKSHEET_ASSIGNED
  WORKSHEET_DUE
  WORKSHEET_FEEDBACK
  REVIEW_REQUEST
  REVIEW_RECEIVED
  THERAPIST_APPLICATION
  THERAPIST_APPROVED
  THERAPIST_REJECTED
  THERAPIST_STATUS_UPDATED
  THERAPIST_REQUEST_ACCEPTED
  THERAPIST_REQUEST_DECLINED
  ALTERNATIVE_RECOMMENDATIONS
  CLIENT_REQUEST_RECEIVED
  CLIENT_REQUEST_CANCELLED
  PROFILE_COMPLETION
  COMMUNITY_POST
  COMMUNITY_REPLY
  COMMUNITY_RECOMMENDATION
  COMMUNITY_JOINED
  COMMUNITY_WELCOME
  RECOMMENDATIONS_UPDATED
  NEW_RECOMMENDATIONS
  RELATIONSHIP_ESTABLISHED
  REQUEST_REMINDER
  SYSTEM_MAINTENANCE
  SYSTEM_UPDATE
  SECURITY_ALERT
  SCHEDULING_INFO
  PAYMENT_SUCCESS
  PAYMENT_FAILED
  SUBSCRIPTION_EXPIRING
  INCOMING_VIDEO_CALL
  VIDEO_CALL_MISSED
  VIDEO_CALL_ENDED
}

enum NotificationPriority {
  LOW
  NORMAL
  HIGH
  URGENT
}
