// Community Recommendation System
// This model tracks algorithm-generated recommendations for users to join specific communities
// based on their assessment scores and compatibility analysis

model CommunityRecommendation {
  id                    String   @id @default(uuid())
  userId                String
  communityId           String
  compatibilityScore    Float    // 0.0 to 1.0 compatibility score
  reasoning             String   @db.Text
  assessmentScores      Json     // Raw assessment scores used for matching
  isAccepted           Boolean?  // null=pending, true=joined, false=rejected
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  
  // Relations
  user                 User     @relation("UserCommunityRecommendations", fields: [userId], references: [id], onDelete: Cascade)
  community            Community @relation("CommunityRecommendations", fields: [communityId], references: [id], onDelete: Cascade)
  
  // Indexes for performance
  @@unique([userId, communityId])
  @@index([userId, compatibilityScore])
  @@index([communityId, createdAt])
  @@index([compatibilityScore, createdAt])
}