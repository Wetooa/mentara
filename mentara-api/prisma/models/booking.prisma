model Meeting {
    id           String         @id @default(uuid())
    title        String? // Optional meeting title
    description  String? // Optional meeting description
    startTime    DateTime
    duration     Int            @default(60)
    status       MeetingStatus  @default(SCHEDULED)
    meetingType  String         @default("video") // video, audio, chat
    meetingUrl   String? // Video call URL
    meetingNotes MeetingNotes[]

    // Relations
    clientId    String
    therapistId String
    client      Client    @relation("ClientMeetings", fields: [clientId], references: [userId])
    therapist   Therapist @relation("TherapistMeetings", fields: [therapistId], references: [userId])

    // Reviews for this meeting
    reviews     Review[]
    sessionLogs SessionLog[]
    payments    Payment[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    // Add checks sometime later

    @@index([clientId])
    @@index([therapistId])
    @@index([startTime])
    @@index([status])
    @@index([therapistId, startTime, status]) // For availability queries
}

model MeetingNotes {
    id        String   @id @unique
    meetingId String
    meeting   Meeting  @relation(fields: [meetingId], references: [id])
    notes     String
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@index([meetingId])
}

model TherapistAvailability {
    id          String  @id @default(uuid())
    therapistId String
    dayOfWeek   Int // 0 = Sunday, 1 = Monday, etc.
    startTime   String // Time in HH:MM format (e.g., "09:00")
    endTime     String // Time in HH:MM format (e.g., "17:00")
    isAvailable Boolean @default(true)
    notes       String? // Optional notes

    therapist Therapist @relation(fields: [therapistId], references: [userId])

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@unique([therapistId, dayOfWeek, startTime, endTime])
    @@index([therapistId])
    @@index([dayOfWeek])
}

enum MeetingStatus {
    SCHEDULED
    CONFIRMED
    IN_PROGRESS
    COMPLETED
    CANCELLED
    NO_SHOW
}
