enum TherapistApplicationStatus {
    PENDING
    APPROVED
    REJECTED
}

model Therapist {
  // User relation
  userId String @id @unique
  user   User   @relation("UserTherapist", fields: [userId], references: [id], onDelete: Cascade)

  // Contact information
  mobile   String
  province String
  timezone String   @default("UTC") // Therapist's timezone for availability calculations

  // Application status
  status         TherapistApplicationStatus @default(PENDING)
  submissionDate DateTime @default(now())
  processingDate DateTime @default(now())

  processedByAdminId String?
  processedByAdmin   Admin?  @relation(fields: [processedByAdminId], references: [userId])

  // Professional credentials
  providerType            String
  professionalLicenseType String
  isPRCLicensed           String
  prcLicenseNumber        String
  expirationDateOfLicense DateTime
  practiceStartDate       DateTime

  // License verification
  licenseVerified   Boolean   @default(false)
  licenseVerifiedAt DateTime?
  licenseVerifiedBy String? // Admin who verified

  // Additional certifications
  certifications Json? // Array of certification objects

  // Document uploads (replaces FileAttachment polymorphic system)
  certificateUrls  String[] @default([])
  certificateNames String[] @default([])
  licenseUrls      String[] @default([])
  licenseNames     String[] @default([])
  documentUrls     String[] @default([]) // For resumes, transcripts, etc.
  documentNames    String[] @default([])

  // Professional background
  yearsOfExperience     Int?
  educationBackground   String?  @db.Text
  specialCertifications String[]

  // Practice details
  practiceLocation       String?
  acceptsInsurance       Boolean  @default(false)
  acceptedInsuranceTypes String[]

  // Professional expertise
  areasOfExpertise              String[] // @db.JsonB
  assessmentTools               String[] // @db.JsonB
  therapeuticApproachesUsedList String[] // @db.JsonB
  languagesOffered              String[] // @db.JsonB

  // Online therapy preferences
  providedOnlineTherapyBefore       Boolean
  comfortableUsingVideoConferencing Boolean
  preferredSessionLength            Int[] // @db.JsonB

  // Compliance and guidelines
  privateConfidentialSpace           String?
  compliesWithDataPrivacyAct         Boolean
  professionalLiabilityInsurance     String?
  complaintsOrDisciplinaryActions    String?
  willingToAbideByPlatformGuidelines Boolean

  // Specializations and approaches
  expertise              String[] // @db.JsonB
  approaches             String[] // @db.JsonB
  languages              String[] // @db.JsonB
  illnessSpecializations String[] // @db.JsonB
  acceptTypes            String[] // @db.JsonB
  treatmentSuccessRates  Json // Record<string, number>

  // Session details
  sessionLength String // Duration description like '60 minutes'
  hourlyRate      Decimal @db.Decimal(10, 2)

  // Relations
  meetings                Meeting[]               @relation("TherapistMeetings")
  therapistAvailabilities TherapistAvailability[]
  worksheets              Worksheet[]
  assignedClients         ClientTherapist[]
  receivedRequests        ClientTherapistRequest[] // Client requests received by this therapist
  reviews                 Review[]
  paymentsAsTherapist     Payment[] // Payments received by this therapist


  // Timestamps
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([userId])
  @@index([status])
  @@index([timezone])
}

