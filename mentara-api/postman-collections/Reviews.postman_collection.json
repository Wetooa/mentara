{
  "info": {
    "name": "Mentara - Reviews",
    "description": "Reviews module endpoints for therapist reviews, ratings, feedback management, and review analytics for quality assurance.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "mentara-reviews"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set Bearer token for authenticated requests",
          "if (pm.environment.get('accessToken') && !pm.request.headers.has('Authorization')) {",
          "    pm.request.headers.add({",
          "        key: 'Authorization',",
          "        value: 'Bearer ' + pm.environment.get('accessToken')",
          "    });",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global error handling for all requests",
          "pm.test('Response time is acceptable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(3000);",
          "});",
          "",
          "// Auto-handle Zod validation errors",
          "if (pm.response.code === 400) {",
          "    try {",
          "        const responseJson = pm.response.json();",
          "        if (responseJson.issues && Array.isArray(responseJson.issues)) {",
          "            responseJson.issues.forEach(issue => {",
          "                console.error('❌ Validation Error: ' + issue.message + ' (' + issue.path.join('.') + ');',
          "            });"",
          "        }",
          "    } catch (e) {",
          "        console.error('❌ Failed to parse validation error response');",
          "    }",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3001/api",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Review Management",
      "item": [
        {
          "name": "Create Review",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Review created successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response has review ID', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('id');",
                  "    pm.environment.set('reviewId', responseJson.id);",
                  "});",
                  "",
                  "pm.test('Review has required fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('rating');",
                  "    pm.expect(responseJson).to.have.property('therapistId');",
                  "    pm.expect(responseJson).to.have.property('clientId');",
                  "    pm.expect(responseJson).to.have.property('createdAt');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"therapistId\": \"{{therapistId}}\",\n  \"sessionId\": \"{{sessionId}}\",\n  \"rating\": 5,\n  \"title\": \"Excellent therapist - highly recommend!\",\n  \"comment\": \"I've been working with Dr. Smith for three months now and I cannot express how much they've helped me. Their approach is both professional and compassionate. They really listen and provide practical strategies that have made a real difference in my daily life. The gratitude exercises and breathing techniques we've worked on have been game-changers for my anxiety. I feel more confident and equipped to handle stress than I have in years. Thank you!\",\n  \"categories\": {\n    \"communication\": 5,\n    \"professionalism\": 5,\n    \"effectiveness\": 5,\n    \"empathy\": 5,\n    \"punctuality\": 5,\n    \"expertise\": 5\n  },\n  \"wouldRecommend\": true,\n  \"isAnonymous\": false,\n  \"tags\": [\"anxiety\", \"breathing-techniques\", \"gratitude\", \"professional\", \"compassionate\"],\n  \"helpfulAspects\": [\n    \"Practical coping strategies\",\n    \"Active listening\",\n    \"Personalized approach\",\n    \"Homework assignments\",\n    \"Regular check-ins\"\n  ],\n  \"improvementSuggestions\": [],\n  \"sessionFrequency\": \"weekly\",\n  \"treatmentDuration\": \"3_months\",\n  \"primaryConcerns\": [\"anxiety\", \"stress_management\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews",
              "host": ["{{baseUrl}}"],
              "path": ["reviews"]
            },
            "description": "Create a new therapist review (client only)"
          },
          "response": []
        },
        {
          "name": "Get Reviews",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Reviews retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has reviews array', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('reviews');",
                  "    pm.expect(responseJson.reviews).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Statistics included', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('statistics');",
                  "    pm.expect(responseJson.statistics).to.have.property('averageRating');",
                  "    pm.expect(responseJson.statistics).to.have.property('totalReviews');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews?therapistId={{therapistId}}&rating=5&includeAnonymous=true&page=1&limit=10&sortBy=createdAt&sortOrder=desc",
              "host": ["{{baseUrl}}"],
              "path": ["reviews"],
              "query": [
                {
                  "key": "therapistId",
                  "value": "{{therapistId}}"
                },
                {
                  "key": "rating",
                  "value": "5"
                },
                {
                  "key": "includeAnonymous",
                  "value": "true"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "sortOrder",
                  "value": "desc"
                }
              ]
            },
            "description": "Get therapist reviews with filtering"
          },
          "response": []
        },
        {
          "name": "Get Review by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}"]
            },
            "description": "Get specific review details"
          },
          "response": []
        },
        {
          "name": "Update Review",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Review updated successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Edit timestamp updated', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('editedAt');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 5,\n  \"title\": \"Excellent therapist - highly recommend! (Updated)\",\n  \"comment\": \"I've been working with Dr. Smith for three months now and I cannot express how much they've helped me. Their approach is both professional and compassionate. They really listen and provide practical strategies that have made a real difference in my daily life. The gratitude exercises and breathing techniques we've worked on have been game-changers for my anxiety. I feel more confident and equipped to handle stress than I have in years. Thank you!\\n\\nUPDATE: After four months of sessions, I continue to see improvement. The progress has been steady and sustainable.\",\n  \"categories\": {\n    \"communication\": 5,\n    \"professionalism\": 5,\n    \"effectiveness\": 5,\n    \"empathy\": 5,\n    \"punctuality\": 5,\n    \"expertise\": 5\n  },\n  \"wouldRecommend\": true,\n  \"tags\": [\"anxiety\", \"breathing-techniques\", \"gratitude\", \"professional\", \"compassionate\", \"progress\"],\n  \"helpfulAspects\": [\n    \"Practical coping strategies\",\n    \"Active listening\",\n    \"Personalized approach\",\n    \"Homework assignments\",\n    \"Regular check-ins\",\n    \"Sustainable progress\"\n  ],\n  \"treatmentDuration\": \"4_months\",\n  \"editReason\": \"Updated after additional sessions\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}"]
            },
            "description": "Update review (client only, within edit window)"
          },
          "response": []
        },
        {
          "name": "Delete Review",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Review deleted successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Deletion confirmed', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('message');",
                  "    pm.expect(responseJson.message).to.include('deleted');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Posted by mistake\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}"]
            },
            "description": "Delete review (client/admin only)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Review Interactions",
      "item": [
        {
          "name": "Mark Review as Helpful",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Review marked as helpful', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Helpful vote recorded', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('reviewId');",
                  "    pm.expect(responseJson).to.have.property('userId');",
                  "    pm.expect(responseJson).to.have.property('helpful');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"helpful\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}/helpful",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}", "helpful"]
            },
            "description": "Mark review as helpful or not helpful"
          },
          "response": []
        },
        {
          "name": "Remove Helpful Vote",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}/helpful",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}", "helpful"]
            },
            "description": "Remove helpful vote from review"
          },
          "response": []
        },
        {
          "name": "Get Review Votes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}/votes",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}", "votes"]
            },
            "description": "Get helpful votes for a review"
          },
          "response": []
        },
        {
          "name": "Share Review",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"platform\": \"email\",\n  \"recipients\": [\"friend@example.com\"],\n  \"message\": \"I wanted to share this great review about my therapist. They've been incredibly helpful!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}/share",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}", "share"]
            },
            "description": "Share review with others"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Review Responses",
      "item": [
        {
          "name": "Create Therapist Response",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Response created successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response has ID', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('id');",
                  "    pm.environment.set('responseId', responseJson.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reviewId\": \"{{reviewId}}\",\n  \"response\": \"Thank you so much for this wonderful review! It truly means a lot to me to know that our work together has been helpful for you. I'm so glad to see your progress with anxiety management and that the breathing techniques and gratitude exercises have been effective. Your dedication to the process has been inspiring, and I'm honored to be part of your journey. Please don't hesitate to reach out if you need any additional support. Wishing you continued success and well-being!\",\n  \"isPublic\": true,\n  \"tone\": \"grateful\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}/response",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}", "response"]
            },
            "description": "Create therapist response to review (therapist only)"
          },
          "response": []
        },
        {
          "name": "Get Review Response",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}/response",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}", "response"]
            },
            "description": "Get therapist response to review"
          },
          "response": []
        },
        {
          "name": "Update Response",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"response\": \"Thank you so much for this wonderful review! It truly means a lot to me to know that our work together has been helpful for you. I'm so glad to see your progress with anxiety management and that the breathing techniques and gratitude exercises have been effective. Your dedication to the process has been inspiring, and I'm honored to be part of your journey. Please don't hesitate to reach out if you need any additional support. Wishing you continued success and well-being!\\n\\nI'm also pleased to hear about your continued progress after four months. Consistency is key, and you've shown remarkable commitment to your healing process.\",\n  \"editReason\": \"Updated to acknowledge client's extended progress\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/responses/{{responseId}}",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "responses", "{{responseId}}"]
            },
            "description": "Update therapist response (therapist only)"
          },
          "response": []
        },
        {
          "name": "Delete Response",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Posted in error\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/responses/{{responseId}}",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "responses", "{{responseId}}"]
            },
            "description": "Delete therapist response (therapist only)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Review Analytics",
      "item": [
        {
          "name": "Get Therapist Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Statistics retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Statistics have required fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('overallRating');",
                  "    pm.expect(responseJson).to.have.property('totalReviews');",
                  "    pm.expect(responseJson).to.have.property('ratingDistribution');",
                  "    pm.expect(responseJson).to.have.property('categoryAverages');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/statistics/therapist/{{therapistId}}?includeDetails=true&period=all",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "statistics", "therapist", "{{therapistId}}"],
              "query": [
                {
                  "key": "includeDetails",
                  "value": "true"
                },
                {
                  "key": "period",
                  "value": "all"
                }
              ]
            },
            "description": "Get detailed statistics for a therapist"
          },
          "response": []
        },
        {
          "name": "Get Review Trends",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/trends?therapistId={{therapistId}}&period=year&groupBy=month",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "trends"],
              "query": [
                {
                  "key": "therapistId",
                  "value": "{{therapistId}}"
                },
                {
                  "key": "period",
                  "value": "year"
                },
                {
                  "key": "groupBy",
                  "value": "month"
                }
              ]
            },
            "description": "Get review trends over time"
          },
          "response": []
        },
        {
          "name": "Get Category Analysis",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/analytics/categories?therapistId={{therapistId}}&period=quarter",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "analytics", "categories"],
              "query": [
                {
                  "key": "therapistId",
                  "value": "{{therapistId}}"
                },
                {
                  "key": "period",
                  "value": "quarter"
                }
              ]
            },
            "description": "Get detailed category analysis"
          },
          "response": []
        },
        {
          "name": "Get Sentiment Analysis",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/analytics/sentiment?therapistId={{therapistId}}&includeTrends=true",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "analytics", "sentiment"],
              "query": [
                {
                  "key": "therapistId",
                  "value": "{{therapistId}}"
                },
                {
                  "key": "includeTrends",
                  "value": "true"
                }
              ]
            },
            "description": "Get sentiment analysis of reviews"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Review Moderation",
      "item": [
        {
          "name": "Report Review",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Review reported successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Report ID returned', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('reportId');",
                  "    pm.environment.set('reportId', responseJson.reportId);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reviewId\": \"{{reviewId}}\",\n  \"reason\": \"inappropriate_content\",\n  \"description\": \"This review contains inappropriate personal information about the therapist that violates privacy guidelines.\",\n  \"category\": \"privacy_violation\",\n  \"evidence\": {\n    \"specificContent\": \"The section mentioning personal details about the therapist's family\",\n    \"context\": \"This information was shared inappropriately in the review\"\n  },\n  \"severity\": \"medium\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}/report",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}", "report"]
            },
            "description": "Report a review for violations"
          },
          "response": []
        },
        {
          "name": "Get Reported Reviews",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/reports?status=pending&severity=medium&page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "reports"],
              "query": [
                {
                  "key": "status",
                  "value": "pending"
                },
                {
                  "key": "severity",
                  "value": "medium"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Get reported reviews (admin/moderator only)"
          },
          "response": []
        },
        {
          "name": "Moderate Review",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reviewId\": \"{{reviewId}}\",\n  \"action\": \"approve_with_edit\",\n  \"reason\": \"Review approved after removing personal information\",\n  \"editedContent\": {\n    \"comment\": \"I've been working with my therapist for three months now and I cannot express how much they've helped me. Their approach is both professional and compassionate. [Personal information removed] The gratitude exercises and breathing techniques we've worked on have been game-changers for my anxiety. I feel more confident and equipped to handle stress than I have in years. Thank you!\"\n  },\n  \"moderatorNotes\": \"Removed specific personal information about therapist's family. Rest of review is appropriate and helpful.\",\n  \"notifyReviewer\": true,\n  \"notifyTherapist\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/{{reviewId}}/moderate",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{reviewId}}", "moderate"]
            },
            "description": "Moderate a review (admin/moderator only)"
          },
          "response": []
        },
        {
          "name": "Handle Report",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reportId\": \"{{reportId}}\",\n  \"action\": \"resolved\",\n  \"resolution\": \"Review was edited to remove privacy violation. Report resolved.\",\n  \"actionTaken\": \"content_edited\",\n  \"notifyReporter\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/reports/{{reportId}}",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "reports", "{{reportId}}"]
            },
            "description": "Handle review report (admin/moderator only)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Review Export & Backup",
      "item": [
        {
          "name": "Export Therapist Reviews",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/reviews/export?therapistId={{therapistId}}&format=csv&period=year&includeResponses=true",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "export"],
              "query": [
                {
                  "key": "therapistId",
                  "value": "{{therapistId}}"
                },
                {
                  "key": "format",
                  "value": "csv"
                },
                {
                  "key": "period",
                  "value": "year"
                },
                {
                  "key": "includeResponses",
                  "value": "true"
                }
              ]
            },
            "description": "Export reviews for analysis (therapist/admin only)"
          },
          "response": []
        },
        {
          "name": "Generate Review Report",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"therapistId\": \"{{therapistId}}\",\n  \"period\": \"quarter\",\n  \"includeStatistics\": true,\n  \"includeTrends\": true,\n  \"includeCategories\": true,\n  \"includeSentiment\": true,\n  \"format\": \"pdf\",\n  \"title\": \"Q4 2023 Review Summary\",\n  \"additionalNotes\": \"Quarterly review summary for performance evaluation\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/reports/generate",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "reports", "generate"]
            },
            "description": "Generate comprehensive review report (admin only)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Error Handling & Validation",
      "item": [
        {
          "name": "Create Review - Missing Required Fields",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 400 for missing required fields', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message mentions required fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.message).to.include('required');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"therapistId\": \"{{therapistId}}\",\n  \"comment\": \"Good therapist\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews",
              "host": ["{{baseUrl}}"],
              "path": ["reviews"]
            },
            "description": "Test validation for missing rating"
          },
          "response": []
        },
        {
          "name": "Create Review - Invalid Rating",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 400 for invalid rating', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message mentions rating range', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.message).to.include('rating');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"therapistId\": \"{{therapistId}}\",\n  \"rating\": 6,\n  \"comment\": \"Great therapist\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews",
              "host": ["{{baseUrl}}"],
              "path": ["reviews"]
            },
            "description": "Test validation for invalid rating range"
          },
          "response": []
        },
        {
          "name": "Update Review - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 403 for unauthorized update', function () {",
                  "    pm.response.to.have.status(403);",
                  "});",
                  "",
                  "pm.test('Error message mentions permissions', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.message).to.include('permission');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 3,\n  \"comment\": \"Trying to update someone else's review\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/{{otherUserReviewId}}",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{otherUserReviewId}}"]
            },
            "description": "Test unauthorized review update"
          },
          "response": []
        }
      ]
    }
  ]
}