# =============================================================================
# MENTARA API - EXAMPLE ENVIRONMENT VARIABLES
# =============================================================================
# 
# This file contains example values for all environment variables used by the
# Mentara API backend service. Copy this file to .env and update with your
# actual values.
#
# IMPORTANT: Never commit actual secrets to version control!
# =============================================================================

# =============================================================================
# REQUIRED ENVIRONMENT VARIABLES
# =============================================================================
# These variables are mandatory - the application will not start without them

# -----------------------------------------------------------------------------
# Database Configuration (Supabase PostgreSQL)
# -----------------------------------------------------------------------------
# For Supabase, you need TWO database URLs:

# DATABASE_URL: Connection pooling (port 6543) - for general app queries
# Uses PgBouncer for efficient connection management
DATABASE_URL="postgresql://postgres.your-ref:your-password@aws-0-region.pooler.supabase.com:6543/postgres?pgbouncer=true"

# DIRECT_URL: Direct connection (port 5432) - for migrations & schema operations
# Required by Prisma for migrations, introspection, and database management
# Bypasses connection pooling for full PostgreSQL feature support
DIRECT_URL="postgresql://postgres.your-ref:your-password@aws-0-region.pooler.supabase.com:5432/postgres"

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# Generate with: openssl rand -base64 48 (minimum 32 characters)
JWT_SECRET=your-super-secret-jwt-key-at-least-32-chars-long-cryptographically-strong

# Message encryption for chat/messaging security
# Generate with: openssl rand -base64 32 (minimum 32 characters)
MESSAGE_ENCRYPTION_KEY=your-32-character-encryption-key-here-minimum-length-required

# -----------------------------------------------------------------------------
# OAuth Configuration
# -----------------------------------------------------------------------------
# Google OAuth 2.0 (Get from Google Cloud Console)
GOOGLE_CLIENT_ID=123456789012-abcdefghijklmnopqrstuvwxyz.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-abcdefghijklmnopqrstuvwxyz

# Microsoft Azure AD (Get from Azure Portal)
MICROSOFT_CLIENT_ID=12345678-1234-1234-1234-123456789012
MICROSOFT_CLIENT_SECRET=abcdefghijklmnopqrstuvwxyz123456789012345

# -----------------------------------------------------------------------------
# External Services
# -----------------------------------------------------------------------------
# Supabase Configuration (Get from Supabase Dashboard)
SUPABASE_URL=https://abcdefghijklmnopqrst.supabase.co
SUPABASE_API_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-supabase-anon-key

# -----------------------------------------------------------------------------
# Email Service Configuration (EmailJS)
# -----------------------------------------------------------------------------
# Get from: https://www.emailjs.com/
# Note: For server-side usage, you need to enable API access in Account:Security
EMAILJS_SERVICE_ID=your_emailjs_service_id
EMAILJS_TEMPLATE_ID=your_emailjs_template_id
EMAILJS_PUBLIC_KEY=your_emailjs_public_key
EMAILJS_PRIVATE_KEY=your_emailjs_private_key

# Application Environment
NODE_ENV=development

# =============================================================================
# OPTIONAL ENVIRONMENT VARIABLES
# =============================================================================
# These variables enhance functionality but are not required for basic operation

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=8000
APP_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# External Service URLs
# -----------------------------------------------------------------------------
AI_SERVICE_URL=http://localhost:5001
AI_SERVICE_TIMEOUT_MS=30000
AI_SERVICE_MAX_RETRIES=3
AI_SERVICE_RATE_LIMIT_PER_MINUTE=60

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# OAuth Callback URLs
# -----------------------------------------------------------------------------
GOOGLE_CALLBACK_URL=http://localhost:8000/auth/google/callback
MICROSOFT_CALLBACK_URL=http://localhost:8000/auth/microsoft/callback

# -----------------------------------------------------------------------------
# Payment Processing (Stripe)
# -----------------------------------------------------------------------------
# Use test keys for development, live keys for production
STRIPE_SECRET_KEY=sk_test_51234567890abcdefghijklmnopqrstuvwxyz
STRIPE_WEBHOOK_SECRET=whsec_1234567890abcdefghijklmnopqrstuvwxyz

# -----------------------------------------------------------------------------
# Database & Cache
# -----------------------------------------------------------------------------
# Cache store (optional; API uses in-memory cache if unset). Prefer CACHE_STORE_*.
CACHE_STORE_URL=redis://localhost:6379
# Legacy alias
# REDIS_URL=redis://localhost:6379
# REDIS_HOST=localhost
# REDIS_PORT=6379

# -----------------------------------------------------------------------------
# File Storage (AWS S3 - Alternative to Supabase)
# -----------------------------------------------------------------------------
# Uncomment if using AWS S3 instead of Supabase Storage
# S3_BUCKET_NAME=mentara-dev-files
# AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
# AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
# AWS_REGION=us-east-1

# -----------------------------------------------------------------------------
# Email Configuration (SMTP)
# -----------------------------------------------------------------------------
# Gmail Example (use app-specific password for Gmail)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-dev-email@gmail.com
SMTP_PASS=your-app-specific-password

# SendGrid Example (alternative email provider)
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASS=your-sendgrid-api-key

# -----------------------------------------------------------------------------
# Development & Debug Configuration
# -----------------------------------------------------------------------------
# Set to debug for verbose logging during development
# LOG_LEVEL=debug

# =============================================================================
# PRODUCTION ENVIRONMENT EXAMPLE
# =============================================================================
# For production deployment, use values similar to these:
#
# NODE_ENV=production
# PORT=80
# DATABASE_URL=postgresql://user:pass@db-cluster:5432/mentara?connection_limit=20
# JWT_SECRET=cryptographically-strong-random-secret-32-plus-characters
# JWT_EXPIRES_IN=1h
# JWT_REFRESH_EXPIRES_IN=30d
# GOOGLE_CLIENT_ID=prod-google-client-id
# GOOGLE_CLIENT_SECRET=prod-google-client-secret
# MICROSOFT_CLIENT_ID=prod-microsoft-client-id
# MICROSOFT_CLIENT_SECRET=prod-microsoft-client-secret
# SUPABASE_URL=https://prod-project.supabase.co
# SUPABASE_API_KEY=prod-supabase-service-key
# AI_SERVICE_URL=https://ai.mentara.app
# FRONTEND_URL=https://mentara.app,https://app.mentara.com
# STRIPE_SECRET_KEY=sk_live_your_live_key
# STRIPE_WEBHOOK_SECRET=whsec_your_live_webhook_secret
# CACHE_STORE_URL=rediss://user:pass@redis-cluster:6380
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASS=your-sendgrid-api-key

# =============================================================================
# GETTING STARTED
# =============================================================================
# 
# 1. Copy this file to .env in the same directory:
#    cp .env.example .env
#
# 2. Update the values with your actual credentials:
#    - Set up a PostgreSQL database and update DATABASE_URL
#    - Generate a strong JWT_SECRET (32+ characters)
#    - Create Google OAuth app and get CLIENT_ID/SECRET
#    - Create Microsoft Azure app and get CLIENT_ID/SECRET
#    - Set up Supabase project and get URL/API_KEY
#
# 3. Optional: Configure additional services for full functionality:
#    - Stripe for payments (test keys for development)
#    - Cache store (Redis) for API caching
#    - SMTP for email notifications
#    - AWS S3 for alternative file storage
#
# 4. Run database migrations:
#    npm run db:migrate
#    npm run db:generate
#    npm run db:seed
#
# 5. Start the development server:
#    npm run start:dev
#
# =============================================================================
# SECURITY REMINDERS
# =============================================================================
# 
# ✅ DO:
# - Use strong, unique secrets for each environment
# - Enable HTTPS in production
# - Use environment-specific OAuth apps
# - Rotate secrets regularly
# - Use app-specific passwords for email providers
# - Enable 2FA on all service accounts
# - Monitor logs for suspicious activity
#
# ❌ DON'T:
# - Commit secrets to version control
# - Use development secrets in production
# - Share secrets via insecure channels
# - Use weak passwords or default values
# - Expose secrets in client-side code
# - Use production credentials in development
#
# =============================================================================