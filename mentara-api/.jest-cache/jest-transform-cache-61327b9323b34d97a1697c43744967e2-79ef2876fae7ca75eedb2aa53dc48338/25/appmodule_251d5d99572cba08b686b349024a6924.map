{"version":3,"names":["cov_tjxswbvts","actualCoverage","common_1","s","require","config_1","event_emitter_1","throttler_1","core_1","auth_module_1","app_controller_1","app_service_1","users_module_1","communities_module_1","posts_module_1","comments_module_1","therapist_module_1","worksheets_module_1","pre_assessment_module_1","booking_module_1","reviews_module_1","admin_module_1","moderator_module_1","client_module_1","messaging_module_1","meetings_module_1","notifications_module_1","billing_module_1","dashboard_module_1","search_module_1","analytics_module_1","onboarding_module_1","health_module_1","email_module_1","prisma_client_provider_1","response_interceptor_1","http_exception_filter_1","event_bus_service_1","common_module_1","jwt_auth_guard_1","security_guard_1","security_headers_middleware_1","jwt_1","AppModule","configure","consumer","f","apply","SecurityHeadersMiddleware","forRoutes","exports","__decorate","Module","imports","ConfigModule","forRoot","ThrottlerModule","name","ttl","limit","process","env","NODE_ENV","b","EventEmitterModule","wildcard","delimiter","ignoreErrors","maxListeners","verboseMemoryLeak","CommonModule","AuthModule","UsersModule","CommunitiesModule","PostsModule","CommentsModule","TherapistModule","WorksheetsModule","PreAssessmentModule","BookingModule","ReviewsModule","AdminModule","ModeratorModule","ClientModule","MessagingModule","MeetingsModule","NotificationsModule","BillingModule","DashboardModule","SearchModule","AnalyticsModule","OnboardingModule","HealthModule","EmailModule","controllers","AppController","providers","AppService","PrismaService","EventBusService","JwtService","provide","APP_INTERCEPTOR","useClass","ResponseInterceptor","APP_FILTER","HttpExceptionFilter","APP_GUARD","ThrottlerGuard","JwtAuthGuard","SecurityGuard"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/app.module.ts"],"sourcesContent":["import { Module, NestModule, MiddlewareConsumer } from '@nestjs/common';\nimport { ConfigModule } from '@nestjs/config';\nimport { EventEmitterModule } from '@nestjs/event-emitter';\nimport { ThrottlerModule, ThrottlerGuard } from '@nestjs/throttler';\nimport { APP_INTERCEPTOR, APP_FILTER, APP_GUARD } from '@nestjs/core';\nimport { AuthModule } from './auth/auth.module';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\nimport { UsersModule } from './users/users.module';\nimport { CommunitiesModule } from './communities/communities.module';\nimport { PostsModule } from './posts/posts.module';\nimport { CommentsModule } from './comments/comments.module';\nimport { TherapistModule } from './therapist/therapist.module';\nimport { WorksheetsModule } from './worksheets/worksheets.module';\nimport { PreAssessmentModule } from './pre-assessment/pre-assessment.module';\nimport { BookingModule } from './booking/booking.module';\nimport { ReviewsModule } from './reviews/reviews.module';\nimport { AdminModule } from './admin/admin.module';\nimport { ModeratorModule } from './moderator/moderator.module';\nimport { ClientModule } from './client/client.module';\nimport { MessagingModule } from './messaging/messaging.module';\nimport { MeetingsModule } from './meetings/meetings.module';\nimport { NotificationsModule } from './notifications/notifications.module';\nimport { BillingModule } from './billing/billing.module';\nimport { DashboardModule } from './dashboard/dashboard.module';\nimport { SearchModule } from './search/search.module';\nimport { AnalyticsModule } from './analytics/analytics.module';\nimport { OnboardingModule } from './onboarding/onboarding.module';\nimport { HealthModule } from './health/health.module';\nimport { EmailModule } from './email/email.module';\nimport { PrismaService } from './providers/prisma-client.provider';\nimport { ResponseInterceptor } from './common/interceptors/response.interceptor';\nimport { HttpExceptionFilter } from './common/filters/http-exception.filter';\nimport { EventBusService } from './common/events/event-bus.service';\nimport { CommonModule } from './common/common.module';\nimport { JwtAuthGuard } from './auth/guards/jwt-auth.guard';\nimport { SecurityGuard } from './common/guards/security.guard';\nimport { SecurityHeadersMiddleware } from './common/middleware/security-headers.middleware';\nimport { JwtService } from '@nestjs/jwt';\n\n@Module({\n  imports: [\n    ConfigModule.forRoot(),\n    ThrottlerModule.forRoot([\n      {\n        name: 'default',\n        ttl: 60000, // 1 minute\n        limit: process.env.NODE_ENV === 'production' ? 500 : 2000, // Increased limits for development\n      },\n      {\n        name: 'auth',\n        ttl: 300000, // 5 minutes\n        limit: process.env.NODE_ENV === 'production' ? 30 : 100, // More reasonable auth attempts\n      },\n      {\n        name: 'upload',\n        ttl: 60000, // 1 minute\n        limit: process.env.NODE_ENV === 'production' ? 20 : 50, // Increased upload limits\n      },\n      {\n        name: 'community',\n        ttl: 60000, // 1 minute\n        limit: process.env.NODE_ENV === 'production' ? 400 : 1000, // Higher community interaction limits\n      },\n    ]),\n    EventEmitterModule.forRoot({\n      // Set this to `true` to use wildcards\n      wildcard: true,\n      // The delimiter used to segment namespaces\n      delimiter: '.',\n      // Disable throwing uncaught exceptions\n      ignoreErrors: false,\n      // Max listeners per event\n      maxListeners: 10,\n      // Show event name in memory leaks message when more than maximum amount of listeners\n      verboseMemoryLeak: false,\n    }),\n    CommonModule,\n    AuthModule,\n    UsersModule,\n    CommunitiesModule,\n    PostsModule,\n    CommentsModule,\n    TherapistModule,\n    WorksheetsModule,\n    PreAssessmentModule,\n    BookingModule,\n    ReviewsModule,\n    AdminModule,\n    ModeratorModule,\n    ClientModule,\n    MessagingModule,\n    MeetingsModule,\n    NotificationsModule,\n    BillingModule,\n    DashboardModule,\n    SearchModule,\n    AnalyticsModule,\n    OnboardingModule,\n    HealthModule,\n    EmailModule,\n  ],\n  controllers: [AppController],\n  providers: [\n    AppService,\n    PrismaService,\n    EventBusService,\n    JwtService,\n    {\n      provide: APP_INTERCEPTOR,\n      useClass: ResponseInterceptor,\n    },\n    {\n      provide: APP_FILTER,\n      useClass: HttpExceptionFilter,\n    },\n    {\n      provide: APP_GUARD,\n      useClass: ThrottlerGuard,\n    },\n    {\n      provide: APP_GUARD,\n      useClass: JwtAuthGuard,\n    },\n    {\n      provide: APP_GUARD,\n      useClass: SecurityGuard,\n    },\n  ],\n})\nexport class AppModule implements NestModule {\n  configure(consumer: MiddlewareConsumer) {\n    consumer.apply(SecurityHeadersMiddleware).forRoutes('*');\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAMA;IAAAA,a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","ignoreList":[]}