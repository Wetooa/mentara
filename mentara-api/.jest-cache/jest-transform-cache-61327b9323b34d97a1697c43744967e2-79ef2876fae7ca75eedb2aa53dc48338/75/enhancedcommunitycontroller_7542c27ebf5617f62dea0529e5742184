c2f3dedfa5e23f935cf885e95bd5ff20
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.EnhancedCommunityController = void 0;
const common_1 = require("@nestjs/common");
const swagger_1 = require("@nestjs/swagger");
const jwt_auth_guard_1 = require("../../auth/guards/jwt-auth.guard");
const role_based_access_guard_1 = require("../../auth/guards/role-based-access.guard");
const roles_decorator_1 = require("../../auth/decorators/roles.decorator");
const get_user_decorator_1 = require("../../decorators/get-user.decorator");
const enhanced_community_service_1 = require("../services/enhanced-community.service");
const class_validator_1 = require("class-validator");
const class_transformer_1 = require("class-transformer");
class CommunitySearchDto {
    query;
    tags;
    minMembers;
    maxMembers;
    sortBy;
    sortOrder;
    hasDescription;
    hasImage;
    membershipRequired;
    page = 1;
    limit = 20;
}
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CommunitySearchDto.prototype, "query", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => value?.split(',') || []),
    (0, class_validator_1.IsString)({ each: true }),
    __metadata("design:type", Array)
], CommunitySearchDto.prototype, "tags", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Type)(() => Number),
    (0, class_validator_1.IsInt)(),
    (0, class_validator_1.Min)(0),
    __metadata("design:type", Number)
], CommunitySearchDto.prototype, "minMembers", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Type)(() => Number),
    (0, class_validator_1.IsInt)(),
    (0, class_validator_1.Min)(0),
    __metadata("design:type", Number)
], CommunitySearchDto.prototype, "maxMembers", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsIn)(['relevance', 'members', 'activity', 'newest', 'alphabetical']),
    __metadata("design:type", String)
], CommunitySearchDto.prototype, "sortBy", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsIn)(['asc', 'desc']),
    __metadata("design:type", String)
], CommunitySearchDto.prototype, "sortOrder", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true'),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CommunitySearchDto.prototype, "hasDescription", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true'),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CommunitySearchDto.prototype, "hasImage", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true'),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CommunitySearchDto.prototype, "membershipRequired", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Type)(() => Number),
    (0, class_validator_1.IsInt)(),
    (0, class_validator_1.Min)(1),
    __metadata("design:type", Number)
], CommunitySearchDto.prototype, "page", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Type)(() => Number),
    (0, class_validator_1.IsInt)(),
    (0, class_validator_1.Min)(1),
    (0, class_validator_1.Max)(100),
    __metadata("design:type", Number)
], CommunitySearchDto.prototype, "limit", void 0);
class TrendingCommunitiesDto {
    limit = 10;
    timeframe = 'week';
}
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Type)(() => Number),
    (0, class_validator_1.IsInt)(),
    (0, class_validator_1.Min)(1),
    (0, class_validator_1.Max)(50),
    __metadata("design:type", Number)
], TrendingCommunitiesDto.prototype, "limit", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsIn)(['week', 'month']),
    __metadata("design:type", String)
], TrendingCommunitiesDto.prototype, "timeframe", void 0);
class SimilarCommunitiesDto {
    excludeJoined = true;
    maxResults = 5;
}
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true'),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], SimilarCommunitiesDto.prototype, "excludeJoined", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Type)(() => Number),
    (0, class_validator_1.IsInt)(),
    (0, class_validator_1.Min)(1),
    (0, class_validator_1.Max)(20),
    __metadata("design:type", Number)
], SimilarCommunitiesDto.prototype, "maxResults", void 0);
let EnhancedCommunityController = class EnhancedCommunityController {
    enhancedCommunityService;
    constructor(enhancedCommunityService) {
        this.enhancedCommunityService = enhancedCommunityService;
    }
    async searchCommunities(searchDto, user) {
        try {
            const result = await this.enhancedCommunityService.searchCommunities({
                query: searchDto.query,
                tags: searchDto.tags,
                minMembers: searchDto.minMembers,
                maxMembers: searchDto.maxMembers,
                sortBy: searchDto.sortBy,
                sortOrder: searchDto.sortOrder,
                hasDescription: searchDto.hasDescription,
                hasImage: searchDto.hasImage,
                membershipRequired: searchDto.membershipRequired,
            }, user.id, searchDto.page, searchDto.limit);
            return {
                success: true,
                data: result,
                message: 'Community search completed successfully',
            };
        }
        catch (error) {
            throw error;
        }
    }
    async getCommunityDetails(communityId, user) {
        try {
            const details = await this.enhancedCommunityService.getCommunityDetails(communityId, user.id);
            return {
                success: true,
                data: details,
                message: 'Community details retrieved successfully',
            };
        }
        catch (error) {
            throw error;
        }
    }
    async getTrendingCommunities(dto) {
        try {
            const trendingCommunities = await this.enhancedCommunityService.getTrendingCommunities(dto.limit || 10, dto.timeframe || 'week');
            return {
                success: true,
                data: trendingCommunities,
                message: 'Trending communities retrieved successfully',
            };
        }
        catch (error) {
            throw error;
        }
    }
    async getSimilarCommunities(communityId, dto, user) {
        try {
            const similarCommunities = await this.enhancedCommunityService.getSimilarCommunities(communityId, {
                userId: user.id,
                excludeJoined: dto.excludeJoined ?? true,
                maxResults: dto.maxResults ?? 5,
            });
            return {
                success: true,
                data: similarCommunities,
                message: 'Similar communities retrieved successfully',
            };
        }
        catch (error) {
            throw error;
        }
    }
    async discoverCommunities(user, limit) {
        try {
            // This could integrate with the CommunityRecommendationService
            // For now, return trending communities as a discovery mechanism
            const trendingCommunities = await this.enhancedCommunityService.getTrendingCommunities(limit || 10, 'week');
            // Filter out communities the user has already joined
            const userMemberships = await this.enhancedCommunityService['prisma'].membership.findMany({
                where: { userId: user.id },
                select: { communityId: true },
            });
            const userCommunityIds = userMemberships.map((m) => m.communityId);
            const recommendations = trendingCommunities.filter((community) => !userCommunityIds.includes(community.id));
            return {
                success: true,
                data: recommendations,
                message: 'Community recommendations retrieved successfully',
            };
        }
        catch (error) {
            throw error;
        }
    }
    async getCommunityCategories() {
        try {
            // This could be expanded to use actual category data from database
            const categories = [
                {
                    id: 'depression',
                    name: 'Depression Support',
                    description: 'Communities focused on depression and mood disorders',
                    icon: 'üòî',
                    communityCount: 0,
                },
                {
                    id: 'anxiety',
                    name: 'Anxiety Support',
                    description: 'Communities for anxiety, panic, and stress management',
                    icon: 'üò∞',
                    communityCount: 0,
                },
                {
                    id: 'trauma',
                    name: 'Trauma & PTSD',
                    description: 'Support for trauma recovery and PTSD',
                    icon: 'üõ°Ô∏è',
                    communityCount: 0,
                },
                {
                    id: 'general',
                    name: 'General Support',
                    description: 'Broad mental health support communities',
                    icon: 'ü§ù',
                    communityCount: 0,
                },
                {
                    id: 'wellness',
                    name: 'Mental Wellness',
                    description: 'Focus on mental health maintenance and wellness',
                    icon: 'üå±',
                    communityCount: 0,
                },
            ];
            // Count communities for each category (simplified)
            for (const category of categories) {
                const count = await this.enhancedCommunityService['prisma'].community.count({
                    where: {
                        OR: [
                            {
                                name: {
                                    contains: category.name.split(' ')[0],
                                    mode: 'insensitive',
                                },
                            },
                            {
                                description: {
                                    contains: category.name.split(' ')[0],
                                    mode: 'insensitive',
                                },
                            },
                        ],
                    },
                });
                category.communityCount = count;
            }
            return {
                success: true,
                data: categories,
                message: 'Community categories retrieved successfully',
            };
        }
        catch (error) {
            throw error;
        }
    }
    async getPopularCommunities(user, limit) {
        try {
            const result = await this.enhancedCommunityService.searchCommunities({
                sortBy: 'members',
                sortOrder: 'desc',
            }, user.id, 1, limit || 10);
            return {
                success: true,
                data: result.communities,
                message: 'Popular communities retrieved successfully',
            };
        }
        catch (error) {
            throw error;
        }
    }
};
exports.EnhancedCommunityController = EnhancedCommunityController;
__decorate([
    (0, common_1.Get)('search'),
    (0, roles_decorator_1.Roles)('client', 'therapist', 'moderator', 'admin'),
    (0, swagger_1.ApiOperation)({
        summary: 'Advanced community search',
        description: 'Search communities with advanced filtering, sorting, and faceting capabilities',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'query',
        required: false,
        type: 'string',
        description: 'Search text',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'tags',
        required: false,
        type: 'string',
        description: 'Comma-separated tags',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'minMembers',
        required: false,
        type: 'number',
        description: 'Minimum member count',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'maxMembers',
        required: false,
        type: 'number',
        description: 'Maximum member count',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'sortBy',
        required: false,
        enum: ['relevance', 'members', 'activity', 'newest', 'alphabetical'],
    }),
    (0, swagger_1.ApiQuery)({ name: 'sortOrder', required: false, enum: ['asc', 'desc'] }),
    (0, swagger_1.ApiQuery)({ name: 'hasDescription', required: false, type: 'boolean' }),
    (0, swagger_1.ApiQuery)({ name: 'hasImage', required: false, type: 'boolean' }),
    (0, swagger_1.ApiQuery)({ name: 'membershipRequired', required: false, type: 'boolean' }),
    (0, swagger_1.ApiQuery)({ name: 'page', required: false, type: 'number', example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', required: false, type: 'number', example: 20 }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Communities search results with facets',
        schema: {
            type: 'object',
            properties: {
                success: { type: 'boolean' },
                data: {
                    type: 'object',
                    properties: {
                        communities: {
                            type: 'array',
                            items: {
                                type: 'object',
                                properties: {
                                    id: { type: 'string' },
                                    name: { type: 'string' },
                                    slug: { type: 'string' },
                                    description: { type: 'string' },
                                    memberCount: { type: 'number' },
                                    recentActivity: { type: 'object' },
                                    membershipStatus: {
                                        type: 'string',
                                        enum: ['member', 'pending', 'none'],
                                    },
                                    compatibility: { type: 'object' },
                                },
                            },
                        },
                        total: { type: 'number' },
                        page: { type: 'number' },
                        limit: { type: 'number' },
                        totalPages: { type: 'number' },
                        facets: { type: 'object' },
                    },
                },
            },
        },
    }),
    __param(0, (0, common_1.Query)()),
    __param(1, (0, get_user_decorator_1.GetUser)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [CommunitySearchDto, Object]),
    __metadata("design:returntype", Promise)
], EnhancedCommunityController.prototype, "searchCommunities", null);
__decorate([
    (0, common_1.Get)(':communityId/details'),
    (0, roles_decorator_1.Roles)('client', 'therapist', 'moderator', 'admin'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get enhanced community details',
        description: 'Retrieve comprehensive community information including stats, recent posts, and top contributors',
    }),
    (0, swagger_1.ApiParam)({
        name: 'communityId',
        type: 'string',
        format: 'uuid',
        description: 'Community ID',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Enhanced community details retrieved successfully',
        schema: {
            type: 'object',
            properties: {
                success: { type: 'boolean' },
                data: {
                    type: 'object',
                    properties: {
                        id: { type: 'string' },
                        name: { type: 'string' },
                        slug: { type: 'string' },
                        description: { type: 'string' },
                        memberCount: { type: 'number' },
                        stats: {
                            type: 'object',
                            properties: {
                                totalPosts: { type: 'number' },
                                totalComments: { type: 'number' },
                                activeMembers: { type: 'number' },
                                recentActivity: { type: 'object' },
                            },
                        },
                        recentPosts: { type: 'array' },
                        topContributors: { type: 'array' },
                        moderators: { type: 'array' },
                        membershipStatus: { type: 'string' },
                        userPermissions: { type: 'object' },
                    },
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Community not found',
    }),
    __param(0, (0, common_1.Param)('communityId', common_1.ParseUUIDPipe)),
    __param(1, (0, get_user_decorator_1.GetUser)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", Promise)
], EnhancedCommunityController.prototype, "getCommunityDetails", null);
__decorate([
    (0, common_1.Get)('trending'),
    (0, roles_decorator_1.Roles)('client', 'therapist', 'moderator', 'admin'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get trending communities',
        description: 'Retrieve communities that are trending based on growth rate and activity',
    }),
    (0, swagger_1.ApiQuery)({ name: 'limit', required: false, type: 'number', example: 10 }),
    (0, swagger_1.ApiQuery)({
        name: 'timeframe',
        required: false,
        enum: ['week', 'month'],
        example: 'week',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Trending communities retrieved successfully',
        schema: {
            type: 'object',
            properties: {
                success: { type: 'boolean' },
                data: {
                    type: 'array',
                    items: {
                        type: 'object',
                        properties: {
                            id: { type: 'string' },
                            name: { type: 'string' },
                            memberCount: { type: 'number' },
                            recentActivity: { type: 'object' },
                            trendingData: {
                                type: 'object',
                                properties: {
                                    growthRate: { type: 'number' },
                                    activityScore: { type: 'number' },
                                    engagementRate: { type: 'number' },
                                    retentionRate: { type: 'number' },
                                },
                            },
                        },
                    },
                },
            },
        },
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [TrendingCommunitiesDto]),
    __metadata("design:returntype", Promise)
], EnhancedCommunityController.prototype, "getTrendingCommunities", null);
__decorate([
    (0, common_1.Get)(':communityId/similar'),
    (0, roles_decorator_1.Roles)('client', 'therapist', 'moderator', 'admin'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get similar communities',
        description: 'Find communities similar to the specified one based on member overlap and activity patterns',
    }),
    (0, swagger_1.ApiParam)({
        name: 'communityId',
        type: 'string',
        format: 'uuid',
        description: 'Reference community ID',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'excludeJoined',
        required: false,
        type: 'boolean',
        example: true,
    }),
    (0, swagger_1.ApiQuery)({ name: 'maxResults', required: false, type: 'number', example: 5 }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Similar communities retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Reference community not found',
    }),
    __param(0, (0, common_1.Param)('communityId', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Query)()),
    __param(2, (0, get_user_decorator_1.GetUser)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, SimilarCommunitiesDto, Object]),
    __metadata("design:returntype", Promise)
], EnhancedCommunityController.prototype, "getSimilarCommunities", null);
__decorate([
    (0, common_1.Get)('discover'),
    (0, roles_decorator_1.Roles)('client', 'therapist', 'moderator', 'admin'),
    (0, swagger_1.ApiOperation)({
        summary: 'Discover communities',
        description: 'Get personalized community recommendations based on user activity and preferences',
    }),
    (0, swagger_1.ApiQuery)({ name: 'limit', required: false, type: 'number', example: 10 }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Community recommendations retrieved successfully',
    }),
    __param(0, (0, get_user_decorator_1.GetUser)()),
    __param(1, (0, common_1.Query)('limit')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, Number]),
    __metadata("design:returntype", Promise)
], EnhancedCommunityController.prototype, "discoverCommunities", null);
__decorate([
    (0, common_1.Get)('categories'),
    (0, roles_decorator_1.Roles)('client', 'therapist', 'moderator', 'admin'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get community categories',
        description: 'Retrieve available community categories for browsing',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Community categories retrieved successfully',
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], EnhancedCommunityController.prototype, "getCommunityCategories", null);
__decorate([
    (0, common_1.Get)('popular'),
    (0, roles_decorator_1.Roles)('client', 'therapist', 'moderator', 'admin'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get popular communities',
        description: 'Retrieve communities with the highest member counts and activity',
    }),
    (0, swagger_1.ApiQuery)({ name: 'limit', required: false, type: 'number', example: 10 }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Popular communities retrieved successfully',
    }),
    __param(0, (0, get_user_decorator_1.GetUser)()),
    __param(1, (0, common_1.Query)('limit')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, Number]),
    __metadata("design:returntype", Promise)
], EnhancedCommunityController.prototype, "getPopularCommunities", null);
exports.EnhancedCommunityController = EnhancedCommunityController = __decorate([
    (0, swagger_1.ApiTags)('Enhanced Communities'),
    (0, swagger_1.ApiTags)('enhanced-community'),
    (0, swagger_1.ApiBearerAuth)('JWT-auth'),
    (0, common_1.Controller)('communities/enhanced'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard, role_based_access_guard_1.RoleBasedAccessGuard),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof enhanced_community_service_1.EnhancedCommunityService !== "undefined" && enhanced_community_service_1.EnhancedCommunityService) === "function" ? _a : Object])
], EnhancedCommunityController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2NvbW11bml0aWVzL2NvbnRyb2xsZXJzL2VuaGFuY2VkLWNvbW11bml0eS5jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQ0FTd0I7QUFDeEIsNkNBT3lCO0FBQ3pCLHFFQUFnRTtBQUNoRSx1RkFBaUY7QUFDakYsMkVBQThEO0FBQzlELDRFQUE4RDtBQUM5RCx1RkFBa0Y7QUFDbEYscURBUXlCO0FBQ3pCLHlEQUFvRDtBQUVwRCxNQUFNLGtCQUFrQjtJQUd0QixLQUFLLENBQVU7SUFLZixJQUFJLENBQVk7SUFNaEIsVUFBVSxDQUFVO0lBTXBCLFVBQVUsQ0FBVTtJQUlwQixNQUFNLENBQW9FO0lBSTFFLFNBQVMsQ0FBa0I7SUFLM0IsY0FBYyxDQUFXO0lBS3pCLFFBQVEsQ0FBVztJQUtuQixrQkFBa0IsQ0FBVztJQU03QixJQUFJLEdBQVksQ0FBQyxDQUFDO0lBT2xCLEtBQUssR0FBWSxFQUFFLENBQUM7Q0FDckI7QUF0REM7SUFGQyxJQUFBLDRCQUFVLEdBQUU7SUFDWixJQUFBLDBCQUFRLEdBQUU7O2lEQUNJO0FBS2Y7SUFIQyxJQUFBLDRCQUFVLEdBQUU7SUFDWixJQUFBLDZCQUFTLEVBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNqRCxJQUFBLDBCQUFRLEVBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7O2dEQUNUO0FBTWhCO0lBSkMsSUFBQSw0QkFBVSxHQUFFO0lBQ1osSUFBQSx3QkFBSSxFQUFDLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQztJQUNsQixJQUFBLHVCQUFLLEdBQUU7SUFDUCxJQUFBLHFCQUFHLEVBQUMsQ0FBQyxDQUFDOztzREFDYTtBQU1wQjtJQUpDLElBQUEsNEJBQVUsR0FBRTtJQUNa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QUFHLEVBQUMsU0FBUyxDQUFDO0lBQ2QsSUFBQSx1QkFBSyxFQUFDLFFBQVEsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLE9BQU8sQ0FBQztJQUNsRCxJQUFBLHNCQUFZLEVBQUM7UUFDWixPQUFPLEVBQUUseUJBQXlCO1FBQ2xDLFdBQVcsRUFDVCxrRUFBa0U7S0FDckUsQ0FBQztJQUNELElBQUEsa0JBQVEsRUFBQyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUN6RSxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUNYLFdBQVcsRUFBRSw0Q0FBNEM7S0FDMUQsQ0FBQztJQUVDLFdBQUEsSUFBQSw0QkFBTyxHQUFFLENBQUE7SUFDVCxXQUFBLElBQUEsY0FBSyxFQUFDLE9BQU8sQ0FBQyxDQUFBOzs7O3dFQXFCaEI7c0NBeGRVLDJCQUEyQjtJQU52QyxJQUFBLGlCQUFPLEVBQUMsc0JBQXNCLENBQUM7SUFDL0IsSUFBQSxpQkFBTyxFQUFDLG9CQUFvQixDQUFDO0lBQzdCLElBQUEsdUJBQWEsRUFBQyxVQUFVLENBQUM7SUFDekIsSUFBQSxtQkFBVSxFQUFDLHNCQUFzQixDQUFDO0lBQ2xDLElBQUEsa0JBQVMsRUFBQyw2QkFBWSxFQUFFLDhDQUFvQixDQUFDO0lBQzdDLElBQUEsdUJBQWEsR0FBRTt5REFHK0IscURBQXdCLG9CQUF4QixxREFBd0I7R0FGMUQsMkJBQTJCLENBeWR2QyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvY29tbXVuaXRpZXMvY29udHJvbGxlcnMvZW5oYW5jZWQtY29tbXVuaXR5LmNvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29udHJvbGxlcixcbiAgR2V0LFxuICBQYXJhbSxcbiAgUXVlcnksXG4gIFVzZUd1YXJkcyxcbiAgSHR0cENvZGUsXG4gIEh0dHBTdGF0dXMsXG4gIFBhcnNlVVVJRFBpcGUsXG59IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7XG4gIEFwaVRhZ3MsXG4gIEFwaU9wZXJhdGlvbixcbiAgQXBpUmVzcG9uc2UsXG4gIEFwaVBhcmFtLFxuICBBcGlRdWVyeSxcbiAgQXBpQmVhcmVyQXV0aCxcbn0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uLy4uL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IFJvbGVCYXNlZEFjY2Vzc0d1YXJkIH0gZnJvbSAnLi4vLi4vYXV0aC9ndWFyZHMvcm9sZS1iYXNlZC1hY2Nlc3MuZ3VhcmQnO1xuaW1wb3J0IHsgUm9sZXMgfSBmcm9tICcuLi8uLi9hdXRoL2RlY29yYXRvcnMvcm9sZXMuZGVjb3JhdG9yJztcbmltcG9ydCB7IEdldFVzZXIgfSBmcm9tICcuLi8uLi9kZWNvcmF0b3JzL2dldC11c2VyLmRlY29yYXRvcic7XG5pbXBvcnQgeyBFbmhhbmNlZENvbW11bml0eVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9lbmhhbmNlZC1jb21tdW5pdHkuc2VydmljZSc7XG5pbXBvcnQge1xuICBJc1N0cmluZyxcbiAgSXNPcHRpb25hbCxcbiAgSXNJbixcbiAgSXNJbnQsXG4gIElzQm9vbGVhbixcbiAgTWluLFxuICBNYXgsXG59IGZyb20gJ2NsYXNzLXZhbGlkYXRvcic7XG5pbXBvcnQgeyBUcmFuc2Zvcm0sIFR5cGUgfSBmcm9tICdjbGFzcy10cmFuc2Zvcm1lcic7XG5cbmNsYXNzIENvbW11bml0eVNlYXJjaER0byB7XG4gIEBJc09wdGlvbmFsKClcbiAgQElzU3RyaW5nKClcbiAgcXVlcnk/OiBzdHJpbmc7XG5cbiAgQElzT3B0aW9uYWwoKVxuICBAVHJhbnNmb3JtKCh7IHZhbHVlIH0pID0+IHZhbHVlPy5zcGxpdCgnLCcpIHx8IFtdKVxuICBASXNTdHJpbmcoeyBlYWNoOiB0cnVlIH0pXG4gIHRhZ3M/OiBzdHJpbmdbXTtcblxuICBASXNPcHRpb25hbCgpXG4gIEBUeXBlKCgpID0+IE51bWJlcilcbiAgQElzSW50KClcbiAgQE1pbigwKVxuICBtaW5NZW1iZXJzPzogbnVtYmVyO1xuXG4gIEBJc09wdGlvbmFsKClcbiAgQFR5cGUoKCkgPT4gTnVtYmVyKVxuICBASXNJbnQoKVxuICBATWluKDApXG4gIG1heE1lbWJlcnM/OiBudW1iZXI7XG5cbiAgQElzT3B0aW9uYWwoKVxuICBASXNJbihbJ3JlbGV2YW5jZScsICdtZW1iZXJzJywgJ2FjdGl2aXR5JywgJ25ld2VzdCcsICdhbHBoYWJldGljYWwnXSlcbiAgc29ydEJ5PzogJ3JlbGV2YW5jZScgfCAnbWVtYmVycycgfCAnYWN0aXZpdHknIHwgJ25ld2VzdCcgfCAnYWxwaGFiZXRpY2FsJztcblxuICBASXNPcHRpb25hbCgpXG4gIEBJc0luKFsnYXNjJywgJ2Rlc2MnXSlcbiAgc29ydE9yZGVyPzogJ2FzYycgfCAnZGVzYyc7XG5cbiAgQElzT3B0aW9uYWwoKVxuICBAVHJhbnNmb3JtKCh7IHZhbHVlIH0pID0+IHZhbHVlID09PSAndHJ1ZScpXG4gIEBJc0Jvb2xlYW4oKVxuICBoYXNEZXNjcmlwdGlvbj86IGJvb2xlYW47XG5cbiAgQElzT3B0aW9uYWwoKVxuICBAVHJhbnNmb3JtKCh7IHZhbHVlIH0pID0+IHZhbHVlID09PSAndHJ1ZScpXG4gIEBJc0Jvb2xlYW4oKVxuICBoYXNJbWFnZT86IGJvb2xlYW47XG5cbiAgQElzT3B0aW9uYWwoKVxuICBAVHJhbnNmb3JtKCh7IHZhbHVlIH0pID0+IHZhbHVlID09PSAndHJ1ZScpXG4gIEBJc0Jvb2xlYW4oKVxuICBtZW1iZXJzaGlwUmVxdWlyZWQ/OiBib29sZWFuO1xuXG4gIEBJc09wdGlvbmFsKClcbiAgQFR5cGUoKCkgPT4gTnVtYmVyKVxuICBASXNJbnQoKVxuICBATWluKDEpXG4gIHBhZ2U/OiBudW1iZXIgPSAxO1xuXG4gIEBJc09wdGlvbmFsKClcbiAgQFR5cGUoKCkgPT4gTnVtYmVyKVxuICBASXNJbnQoKVxuICBATWluKDEpXG4gIEBNYXgoMTAwKVxuICBsaW1pdD86IG51bWJlciA9IDIwO1xufVxuXG5jbGFzcyBUcmVuZGluZ0NvbW11bml0aWVzRHRvIHtcbiAgQElzT3B0aW9uYWwoKVxuICBAVHlwZSgoKSA9PiBOdW1iZXIpXG4gIEBJc0ludCgpXG4gIEBNaW4oMSlcbiAgQE1heCg1MClcbiAgbGltaXQ/OiBudW1iZXIgPSAxMDtcblxuICBASXNPcHRpb25hbCgpXG4gIEBJc0luKFsnd2VlaycsICdtb250aCddKVxuICB0aW1lZnJhbWU/OiAnd2VlaycgfCAnbW9udGgnID0gJ3dlZWsnO1xufVxuXG5jbGFzcyBTaW1pbGFyQ29tbXVuaXRpZXNEdG8ge1xuICBASXNPcHRpb25hbCgpXG4gIEBUcmFuc2Zvcm0oKHsgdmFsdWUgfSkgPT4gdmFsdWUgPT09ICd0cnVlJylcbiAgQElzQm9vbGVhbigpXG4gIGV4Y2x1ZGVKb2luZWQ/OiBib29sZWFuID0gdHJ1ZTtcblxuICBASXNPcHRpb25hbCgpXG4gIEBUeXBlKCgpID0+IE51bWJlcilcbiAgQElzSW50KClcbiAgQE1pbigxKVxuICBATWF4KDIwKVxuICBtYXhSZXN1bHRzPzogbnVtYmVyID0gNTtcbn1cblxuQEFwaVRhZ3MoJ0VuaGFuY2VkIENvbW11bml0aWVzJylcbkBBcGlUYWdzKCdlbmhhbmNlZC1jb21tdW5pdHknKVxuQEFwaUJlYXJlckF1dGgoJ0pXVC1hdXRoJylcbkBDb250cm9sbGVyKCdjb21tdW5pdGllcy9lbmhhbmNlZCcpXG5AVXNlR3VhcmRzKEp3dEF1dGhHdWFyZCwgUm9sZUJhc2VkQWNjZXNzR3VhcmQpXG5AQXBpQmVhcmVyQXV0aCgpXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRDb21tdW5pdHlDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBlbmhhbmNlZENvbW11bml0eVNlcnZpY2U6IEVuaGFuY2VkQ29tbXVuaXR5U2VydmljZSxcbiAgKSB7fVxuXG4gIEBHZXQoJ3NlYXJjaCcpXG4gIEBSb2xlcygnY2xpZW50JywgJ3RoZXJhcGlzdCcsICdtb2RlcmF0b3InLCAnYWRtaW4nKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnQWR2YW5jZWQgY29tbXVuaXR5IHNlYXJjaCcsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnU2VhcmNoIGNvbW11bml0aWVzIHdpdGggYWR2YW5jZWQgZmlsdGVyaW5nLCBzb3J0aW5nLCBhbmQgZmFjZXRpbmcgY2FwYWJpbGl0aWVzJyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAncXVlcnknLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICBkZXNjcmlwdGlvbjogJ1NlYXJjaCB0ZXh0JyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAndGFncycsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgIGRlc2NyaXB0aW9uOiAnQ29tbWEtc2VwYXJhdGVkIHRhZ3MnLFxuICB9KVxuICBAQXBpUXVlcnkoe1xuICAgIG5hbWU6ICdtaW5NZW1iZXJzJyxcbiAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgdHlwZTogJ251bWJlcicsXG4gICAgZGVzY3JpcHRpb246ICdNaW5pbXVtIG1lbWJlciBjb3VudCcsXG4gIH0pXG4gIEBBcGlRdWVyeSh7XG4gICAgbmFtZTogJ21heE1lbWJlcnMnLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICBkZXNjcmlwdGlvbjogJ01heGltdW0gbWVtYmVyIGNvdW50JyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAnc29ydEJ5JyxcbiAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgZW51bTogWydyZWxldmFuY2UnLCAnbWVtYmVycycsICdhY3Rpdml0eScsICduZXdlc3QnLCAnYWxwaGFiZXRpY2FsJ10sXG4gIH0pXG4gIEBBcGlRdWVyeSh7IG5hbWU6ICdzb3J0T3JkZXInLCByZXF1aXJlZDogZmFsc2UsIGVudW06IFsnYXNjJywgJ2Rlc2MnXSB9KVxuICBAQXBpUXVlcnkoeyBuYW1lOiAnaGFzRGVzY3JpcHRpb24nLCByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdib29sZWFuJyB9KVxuICBAQXBpUXVlcnkoeyBuYW1lOiAnaGFzSW1hZ2UnLCByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdib29sZWFuJyB9KVxuICBAQXBpUXVlcnkoeyBuYW1lOiAnbWVtYmVyc2hpcFJlcXVpcmVkJywgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnYm9vbGVhbicgfSlcbiAgQEFwaVF1ZXJ5KHsgbmFtZTogJ3BhZ2UnLCByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdudW1iZXInLCBleGFtcGxlOiAxIH0pXG4gIEBBcGlRdWVyeSh7IG5hbWU6ICdsaW1pdCcsIHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ251bWJlcicsIGV4YW1wbGU6IDIwIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdDb21tdW5pdGllcyBzZWFyY2ggcmVzdWx0cyB3aXRoIGZhY2V0cycsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgc3VjY2VzczogeyB0eXBlOiAnYm9vbGVhbicgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGNvbW11bml0aWVzOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgICAgIHNsdWc6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICAgICAgICBtZW1iZXJDb3VudDogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgICAgICAgICAgcmVjZW50QWN0aXZpdHk6IHsgdHlwZTogJ29iamVjdCcgfSxcbiAgICAgICAgICAgICAgICAgIG1lbWJlcnNoaXBTdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgICAgICAgIGVudW06IFsnbWVtYmVyJywgJ3BlbmRpbmcnLCAnbm9uZSddLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGNvbXBhdGliaWxpdHk6IHsgdHlwZTogJ29iamVjdCcgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvdGFsOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgICAgICBwYWdlOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgICAgICBsaW1pdDogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgICAgdG90YWxQYWdlczogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgICAgZmFjZXRzOiB7IHR5cGU6ICdvYmplY3QnIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgYXN5bmMgc2VhcmNoQ29tbXVuaXRpZXMoXG4gICAgQFF1ZXJ5KCkgc2VhcmNoRHRvOiBDb21tdW5pdHlTZWFyY2hEdG8sXG4gICAgQEdldFVzZXIoKSB1c2VyOiBhbnksXG4gICkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmVuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5zZWFyY2hDb21tdW5pdGllcyhcbiAgICAgICAge1xuICAgICAgICAgIHF1ZXJ5OiBzZWFyY2hEdG8ucXVlcnksXG4gICAgICAgICAgdGFnczogc2VhcmNoRHRvLnRhZ3MsXG4gICAgICAgICAgbWluTWVtYmVyczogc2VhcmNoRHRvLm1pbk1lbWJlcnMsXG4gICAgICAgICAgbWF4TWVtYmVyczogc2VhcmNoRHRvLm1heE1lbWJlcnMsXG4gICAgICAgICAgc29ydEJ5OiBzZWFyY2hEdG8uc29ydEJ5LFxuICAgICAgICAgIHNvcnRPcmRlcjogc2VhcmNoRHRvLnNvcnRPcmRlcixcbiAgICAgICAgICBoYXNEZXNjcmlwdGlvbjogc2VhcmNoRHRvLmhhc0Rlc2NyaXB0aW9uLFxuICAgICAgICAgIGhhc0ltYWdlOiBzZWFyY2hEdG8uaGFzSW1hZ2UsXG4gICAgICAgICAgbWVtYmVyc2hpcFJlcXVpcmVkOiBzZWFyY2hEdG8ubWVtYmVyc2hpcFJlcXVpcmVkLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyLmlkLFxuICAgICAgICBzZWFyY2hEdG8ucGFnZSxcbiAgICAgICAgc2VhcmNoRHRvLmxpbWl0LFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBtZXNzYWdlOiAnQ29tbXVuaXR5IHNlYXJjaCBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIEBHZXQoJzpjb21tdW5pdHlJZC9kZXRhaWxzJylcbiAgQFJvbGVzKCdjbGllbnQnLCAndGhlcmFwaXN0JywgJ21vZGVyYXRvcicsICdhZG1pbicpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdHZXQgZW5oYW5jZWQgY29tbXVuaXR5IGRldGFpbHMnLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ1JldHJpZXZlIGNvbXByZWhlbnNpdmUgY29tbXVuaXR5IGluZm9ybWF0aW9uIGluY2x1ZGluZyBzdGF0cywgcmVjZW50IHBvc3RzLCBhbmQgdG9wIGNvbnRyaWJ1dG9ycycsXG4gIH0pXG4gIEBBcGlQYXJhbSh7XG4gICAgbmFtZTogJ2NvbW11bml0eUlkJyxcbiAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICBmb3JtYXQ6ICd1dWlkJyxcbiAgICBkZXNjcmlwdGlvbjogJ0NvbW11bml0eSBJRCcsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdFbmhhbmNlZCBjb21tdW5pdHkgZGV0YWlscyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBzdWNjZXNzOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIG5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIHNsdWc6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICBtZW1iZXJDb3VudDogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICB0b3RhbFBvc3RzOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgICAgICAgICAgdG90YWxDb21tZW50czogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgICAgICAgIGFjdGl2ZU1lbWJlcnM6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgICAgICAgICAgICByZWNlbnRBY3Rpdml0eTogeyB0eXBlOiAnb2JqZWN0JyB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlY2VudFBvc3RzOiB7IHR5cGU6ICdhcnJheScgfSxcbiAgICAgICAgICAgIHRvcENvbnRyaWJ1dG9yczogeyB0eXBlOiAnYXJyYXknIH0sXG4gICAgICAgICAgICBtb2RlcmF0b3JzOiB7IHR5cGU6ICdhcnJheScgfSxcbiAgICAgICAgICAgIG1lbWJlcnNoaXBTdGF0dXM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIHVzZXJQZXJtaXNzaW9uczogeyB0eXBlOiAnb2JqZWN0JyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiA0MDQsXG4gICAgZGVzY3JpcHRpb246ICdDb21tdW5pdHkgbm90IGZvdW5kJyxcbiAgfSlcbiAgYXN5bmMgZ2V0Q29tbXVuaXR5RGV0YWlscyhcbiAgICBAUGFyYW0oJ2NvbW11bml0eUlkJywgUGFyc2VVVUlEUGlwZSkgY29tbXVuaXR5SWQ6IHN0cmluZyxcbiAgICBAR2V0VXNlcigpIHVzZXI6IGFueSxcbiAgKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRldGFpbHMgPSBhd2FpdCB0aGlzLmVuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRDb21tdW5pdHlEZXRhaWxzKFxuICAgICAgICBjb21tdW5pdHlJZCxcbiAgICAgICAgdXNlci5pZCxcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IGRldGFpbHMsXG4gICAgICAgIG1lc3NhZ2U6ICdDb21tdW5pdHkgZGV0YWlscyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIEBHZXQoJ3RyZW5kaW5nJylcbiAgQFJvbGVzKCdjbGllbnQnLCAndGhlcmFwaXN0JywgJ21vZGVyYXRvcicsICdhZG1pbicpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdHZXQgdHJlbmRpbmcgY29tbXVuaXRpZXMnLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ1JldHJpZXZlIGNvbW11bml0aWVzIHRoYXQgYXJlIHRyZW5kaW5nIGJhc2VkIG9uIGdyb3d0aCByYXRlIGFuZCBhY3Rpdml0eScsXG4gIH0pXG4gIEBBcGlRdWVyeSh7IG5hbWU6ICdsaW1pdCcsIHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogJ251bWJlcicsIGV4YW1wbGU6IDEwIH0pXG4gIEBBcGlRdWVyeSh7XG4gICAgbmFtZTogJ3RpbWVmcmFtZScsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIGVudW06IFsnd2VlaycsICdtb250aCddLFxuICAgIGV4YW1wbGU6ICd3ZWVrJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ1RyZW5kaW5nIGNvbW11bml0aWVzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHN1Y2Nlc3M6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgbmFtZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICBtZW1iZXJDb3VudDogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgICAgICByZWNlbnRBY3Rpdml0eTogeyB0eXBlOiAnb2JqZWN0JyB9LFxuICAgICAgICAgICAgICB0cmVuZGluZ0RhdGE6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICBncm93dGhSYXRlOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgICAgICAgICAgICBhY3Rpdml0eVNjb3JlOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgICAgICAgICAgICBlbmdhZ2VtZW50UmF0ZTogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgICAgICAgICAgcmV0ZW50aW9uUmF0ZTogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIGFzeW5jIGdldFRyZW5kaW5nQ29tbXVuaXRpZXMoQFF1ZXJ5KCkgZHRvOiBUcmVuZGluZ0NvbW11bml0aWVzRHRvKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRyZW5kaW5nQ29tbXVuaXRpZXMgPVxuICAgICAgICBhd2FpdCB0aGlzLmVuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRUcmVuZGluZ0NvbW11bml0aWVzKFxuICAgICAgICAgIGR0by5saW1pdCB8fCAxMCxcbiAgICAgICAgICBkdG8udGltZWZyYW1lIHx8ICd3ZWVrJyxcbiAgICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogdHJlbmRpbmdDb21tdW5pdGllcyxcbiAgICAgICAgbWVzc2FnZTogJ1RyZW5kaW5nIGNvbW11bml0aWVzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgQEdldCgnOmNvbW11bml0eUlkL3NpbWlsYXInKVxuICBAUm9sZXMoJ2NsaWVudCcsICd0aGVyYXBpc3QnLCAnbW9kZXJhdG9yJywgJ2FkbWluJylcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0dldCBzaW1pbGFyIGNvbW11bml0aWVzJyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdGaW5kIGNvbW11bml0aWVzIHNpbWlsYXIgdG8gdGhlIHNwZWNpZmllZCBvbmUgYmFzZWQgb24gbWVtYmVyIG92ZXJsYXAgYW5kIGFjdGl2aXR5IHBhdHRlcm5zJyxcbiAgfSlcbiAgQEFwaVBhcmFtKHtcbiAgICBuYW1lOiAnY29tbXVuaXR5SWQnLFxuICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgIGZvcm1hdDogJ3V1aWQnLFxuICAgIGRlc2NyaXB0aW9uOiAnUmVmZXJlbmNlIGNvbW11bml0eSBJRCcsXG4gIH0pXG4gIEBBcGlRdWVyeSh7XG4gICAgbmFtZTogJ2V4Y2x1ZGVKb2luZWQnLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgZXhhbXBsZTogdHJ1ZSxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHsgbmFtZTogJ21heFJlc3VsdHMnLCByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdudW1iZXInLCBleGFtcGxlOiA1IH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdTaW1pbGFyIGNvbW11bml0aWVzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogNDA0LFxuICAgIGRlc2NyaXB0aW9uOiAnUmVmZXJlbmNlIGNvbW11bml0eSBub3QgZm91bmQnLFxuICB9KVxuICBhc3luYyBnZXRTaW1pbGFyQ29tbXVuaXRpZXMoXG4gICAgQFBhcmFtKCdjb21tdW5pdHlJZCcsIFBhcnNlVVVJRFBpcGUpIGNvbW11bml0eUlkOiBzdHJpbmcsXG4gICAgQFF1ZXJ5KCkgZHRvOiBTaW1pbGFyQ29tbXVuaXRpZXNEdG8sXG4gICAgQEdldFVzZXIoKSB1c2VyOiBhbnksXG4gICkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzaW1pbGFyQ29tbXVuaXRpZXMgPVxuICAgICAgICBhd2FpdCB0aGlzLmVuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRTaW1pbGFyQ29tbXVuaXRpZXMoY29tbXVuaXR5SWQsIHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgZXhjbHVkZUpvaW5lZDogZHRvLmV4Y2x1ZGVKb2luZWQgPz8gdHJ1ZSxcbiAgICAgICAgICBtYXhSZXN1bHRzOiBkdG8ubWF4UmVzdWx0cyA/PyA1LFxuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogc2ltaWxhckNvbW11bml0aWVzLFxuICAgICAgICBtZXNzYWdlOiAnU2ltaWxhciBjb21tdW5pdGllcyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIEBHZXQoJ2Rpc2NvdmVyJylcbiAgQFJvbGVzKCdjbGllbnQnLCAndGhlcmFwaXN0JywgJ21vZGVyYXRvcicsICdhZG1pbicpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdEaXNjb3ZlciBjb21tdW5pdGllcycsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnR2V0IHBlcnNvbmFsaXplZCBjb21tdW5pdHkgcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIHVzZXIgYWN0aXZpdHkgYW5kIHByZWZlcmVuY2VzJyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHsgbmFtZTogJ2xpbWl0JywgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiAnbnVtYmVyJywgZXhhbXBsZTogMTAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ0NvbW11bml0eSByZWNvbW1lbmRhdGlvbnMgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXG4gIH0pXG4gIGFzeW5jIGRpc2NvdmVyQ29tbXVuaXRpZXMoXG4gICAgQEdldFVzZXIoKSB1c2VyOiBhbnksXG4gICAgQFF1ZXJ5KCdsaW1pdCcpIGxpbWl0PzogbnVtYmVyLFxuICApIHtcbiAgICB0cnkge1xuICAgICAgLy8gVGhpcyBjb3VsZCBpbnRlZ3JhdGUgd2l0aCB0aGUgQ29tbXVuaXR5UmVjb21tZW5kYXRpb25TZXJ2aWNlXG4gICAgICAvLyBGb3Igbm93LCByZXR1cm4gdHJlbmRpbmcgY29tbXVuaXRpZXMgYXMgYSBkaXNjb3ZlcnkgbWVjaGFuaXNtXG4gICAgICBjb25zdCB0cmVuZGluZ0NvbW11bml0aWVzID1cbiAgICAgICAgYXdhaXQgdGhpcy5lbmhhbmNlZENvbW11bml0eVNlcnZpY2UuZ2V0VHJlbmRpbmdDb21tdW5pdGllcyhcbiAgICAgICAgICBsaW1pdCB8fCAxMCxcbiAgICAgICAgICAnd2VlaycsXG4gICAgICAgICk7XG5cbiAgICAgIC8vIEZpbHRlciBvdXQgY29tbXVuaXRpZXMgdGhlIHVzZXIgaGFzIGFscmVhZHkgam9pbmVkXG4gICAgICBjb25zdCB1c2VyTWVtYmVyc2hpcHMgPSBhd2FpdCB0aGlzLmVuaGFuY2VkQ29tbXVuaXR5U2VydmljZVtcbiAgICAgICAgJ3ByaXNtYSdcbiAgICAgIF0ubWVtYmVyc2hpcC5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IHVzZXJJZDogdXNlci5pZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgY29tbXVuaXR5SWQ6IHRydWUgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1c2VyQ29tbXVuaXR5SWRzID0gdXNlck1lbWJlcnNoaXBzLm1hcCgobSkgPT4gbS5jb21tdW5pdHlJZCk7XG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSB0cmVuZGluZ0NvbW11bml0aWVzLmZpbHRlcihcbiAgICAgICAgKGNvbW11bml0eSkgPT4gIXVzZXJDb21tdW5pdHlJZHMuaW5jbHVkZXMoY29tbXVuaXR5LmlkKSxcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHJlY29tbWVuZGF0aW9ucyxcbiAgICAgICAgbWVzc2FnZTogJ0NvbW11bml0eSByZWNvbW1lbmRhdGlvbnMgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBAR2V0KCdjYXRlZ29yaWVzJylcbiAgQFJvbGVzKCdjbGllbnQnLCAndGhlcmFwaXN0JywgJ21vZGVyYXRvcicsICdhZG1pbicpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdHZXQgY29tbXVuaXR5IGNhdGVnb3JpZXMnLFxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmUgYXZhaWxhYmxlIGNvbW11bml0eSBjYXRlZ29yaWVzIGZvciBicm93c2luZycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdDb21tdW5pdHkgY2F0ZWdvcmllcyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgfSlcbiAgYXN5bmMgZ2V0Q29tbXVuaXR5Q2F0ZWdvcmllcygpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVGhpcyBjb3VsZCBiZSBleHBhbmRlZCB0byB1c2UgYWN0dWFsIGNhdGVnb3J5IGRhdGEgZnJvbSBkYXRhYmFzZVxuICAgICAgY29uc3QgY2F0ZWdvcmllcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZGVwcmVzc2lvbicsXG4gICAgICAgICAgbmFtZTogJ0RlcHJlc3Npb24gU3VwcG9ydCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdDb21tdW5pdGllcyBmb2N1c2VkIG9uIGRlcHJlc3Npb24gYW5kIG1vb2QgZGlzb3JkZXJzJyxcbiAgICAgICAgICBpY29uOiAn8J+YlCcsXG4gICAgICAgICAgY29tbXVuaXR5Q291bnQ6IDAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2FueGlldHknLFxuICAgICAgICAgIG5hbWU6ICdBbnhpZXR5IFN1cHBvcnQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29tbXVuaXRpZXMgZm9yIGFueGlldHksIHBhbmljLCBhbmQgc3RyZXNzIG1hbmFnZW1lbnQnLFxuICAgICAgICAgIGljb246ICfwn5iwJyxcbiAgICAgICAgICBjb21tdW5pdHlDb3VudDogMCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAndHJhdW1hJyxcbiAgICAgICAgICBuYW1lOiAnVHJhdW1hICYgUFRTRCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdTdXBwb3J0IGZvciB0cmF1bWEgcmVjb3ZlcnkgYW5kIFBUU0QnLFxuICAgICAgICAgIGljb246ICfwn5uh77iPJyxcbiAgICAgICAgICBjb21tdW5pdHlDb3VudDogMCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ2VuZXJhbCcsXG4gICAgICAgICAgbmFtZTogJ0dlbmVyYWwgU3VwcG9ydCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdCcm9hZCBtZW50YWwgaGVhbHRoIHN1cHBvcnQgY29tbXVuaXRpZXMnLFxuICAgICAgICAgIGljb246ICfwn6SdJyxcbiAgICAgICAgICBjb21tdW5pdHlDb3VudDogMCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnd2VsbG5lc3MnLFxuICAgICAgICAgIG5hbWU6ICdNZW50YWwgV2VsbG5lc3MnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRm9jdXMgb24gbWVudGFsIGhlYWx0aCBtYWludGVuYW5jZSBhbmQgd2VsbG5lc3MnLFxuICAgICAgICAgIGljb246ICfwn4yxJyxcbiAgICAgICAgICBjb21tdW5pdHlDb3VudDogMCxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIC8vIENvdW50IGNvbW11bml0aWVzIGZvciBlYWNoIGNhdGVnb3J5IChzaW1wbGlmaWVkKVxuICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzKSB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgdGhpcy5lbmhhbmNlZENvbW11bml0eVNlcnZpY2VbXG4gICAgICAgICAgJ3ByaXNtYSdcbiAgICAgICAgXS5jb21tdW5pdHkuY291bnQoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBPUjogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgICAgY29udGFpbnM6IGNhdGVnb3J5Lm5hbWUuc3BsaXQoJyAnKVswXSxcbiAgICAgICAgICAgICAgICAgIG1vZGU6ICdpbnNlbnNpdGl2ZScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgICAgICAgICBjb250YWluczogY2F0ZWdvcnkubmFtZS5zcGxpdCgnICcpWzBdLFxuICAgICAgICAgICAgICAgICAgbW9kZTogJ2luc2Vuc2l0aXZlJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY2F0ZWdvcnkuY29tbXVuaXR5Q291bnQgPSBjb3VudDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogY2F0ZWdvcmllcyxcbiAgICAgICAgbWVzc2FnZTogJ0NvbW11bml0eSBjYXRlZ29yaWVzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgQEdldCgncG9wdWxhcicpXG4gIEBSb2xlcygnY2xpZW50JywgJ3RoZXJhcGlzdCcsICdtb2RlcmF0b3InLCAnYWRtaW4nKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnR2V0IHBvcHVsYXIgY29tbXVuaXRpZXMnLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ1JldHJpZXZlIGNvbW11bml0aWVzIHdpdGggdGhlIGhpZ2hlc3QgbWVtYmVyIGNvdW50cyBhbmQgYWN0aXZpdHknLFxuICB9KVxuICBAQXBpUXVlcnkoeyBuYW1lOiAnbGltaXQnLCByZXF1aXJlZDogZmFsc2UsIHR5cGU6ICdudW1iZXInLCBleGFtcGxlOiAxMCB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnUG9wdWxhciBjb21tdW5pdGllcyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgfSlcbiAgYXN5bmMgZ2V0UG9wdWxhckNvbW11bml0aWVzKFxuICAgIEBHZXRVc2VyKCkgdXNlcjogYW55LFxuICAgIEBRdWVyeSgnbGltaXQnKSBsaW1pdD86IG51bWJlcixcbiAgKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLnNlYXJjaENvbW11bml0aWVzKFxuICAgICAgICB7XG4gICAgICAgICAgc29ydEJ5OiAnbWVtYmVycycsXG4gICAgICAgICAgc29ydE9yZGVyOiAnZGVzYycsXG4gICAgICAgIH0sXG4gICAgICAgIHVzZXIuaWQsXG4gICAgICAgIDEsXG4gICAgICAgIGxpbWl0IHx8IDEwLFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogcmVzdWx0LmNvbW11bml0aWVzLFxuICAgICAgICBtZXNzYWdlOiAnUG9wdWxhciBjb21tdW5pdGllcyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuIl0sInZlcnNpb24iOjN9