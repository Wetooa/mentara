{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/search/search.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/search/search.controller.spec.ts"],"sourcesContent":["/**\n * Comprehensive Test Suite for SearchController\n * Tests search functionality across therapists, posts, communities, users, and global search\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { HttpException, HttpStatus } from '@nestjs/common';\nimport { SearchController } from './search.controller';\nimport { SearchService } from './search.service';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { SecurityGuardTestUtils, RoleBasedTestUtils } from '../test-utils/auth-testing-helpers';\nimport { MockBuilder, TestDataGenerator, TestAssertions } from '../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../test-utils/index';\n\ndescribe('SearchController', () => {\n  let controller: SearchController;\n  let searchService: SearchService;\n  let module: TestingModule;\n\n  // Mock SearchService\n  const mockSearchService = {\n    searchTherapists: jest.fn(),\n    searchPosts: jest.fn(),\n    searchCommunities: jest.fn(),\n    searchUsers: jest.fn(),\n    globalSearch: jest.fn(),\n  };\n\n  // Mock Guards\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test data\n  const mockTherapist = {\n    id: TEST_USER_IDS.THERAPIST,\n    firstName: 'Dr. Sarah',\n    lastName: 'Johnson',\n    specializations: ['Anxiety', 'Depression', 'CBT'],\n    location: 'New York, NY',\n    hourlyRate: 150,\n    rating: 4.7,\n    experienceYears: 8,\n    verified: true,\n    availability: 'available',\n    profileImage: 'https://example.com/profile.jpg',\n    bio: 'Experienced therapist specializing in anxiety and depression treatment',\n  };\n\n  const mockPost = {\n    id: 'post_123456789',\n    title: 'Managing Work Anxiety',\n    content: 'Tips for dealing with workplace stress and anxiety...',\n    authorId: TEST_USER_IDS.CLIENT,\n    communityId: 'community_123',\n    createdAt: '2024-02-14T10:00:00Z',\n    likesCount: 23,\n    commentsCount: 8,\n    tags: ['anxiety', 'work', 'stress'],\n  };\n\n  const mockCommunity = {\n    id: 'community_123456789',\n    name: 'Anxiety Support Group',\n    description: 'A supportive community for people dealing with anxiety',\n    memberCount: 1234,\n    isPrivate: false,\n    createdAt: '2024-01-15T10:00:00Z',\n    tags: ['anxiety', 'support', 'mental-health'],\n  };\n\n  const mockUser = {\n    id: TEST_USER_IDS.CLIENT,\n    firstName: 'John',\n    lastName: 'Doe',\n    email: TEST_EMAILS.CLIENT,\n    role: 'client',\n    isActive: true,\n    createdAt: '2024-01-10T10:00:00Z',\n  };\n\n  const mockTherapistSearchResults = {\n    therapists: [mockTherapist],\n    totalCount: 1,\n    filters: {\n      locations: ['New York, NY', 'Los Angeles, CA'],\n      specialties: ['Anxiety', 'Depression', 'CBT'],\n      priceRanges: ['$100-150', '$150-200'],\n    },\n  };\n\n  const mockPostSearchResults = {\n    posts: [mockPost],\n    totalCount: 1,\n  };\n\n  const mockCommunitySearchResults = {\n    communities: [mockCommunity],\n    totalCount: 1,\n  };\n\n  const mockUserSearchResults = {\n    users: [mockUser],\n    totalCount: 1,\n  };\n\n  const mockGlobalSearchResults = {\n    results: {\n      users: [mockUser],\n      therapists: [mockTherapist],\n      posts: [mockPost],\n      communities: [mockCommunity],\n    },\n    totalCount: 4,\n    query: 'anxiety',\n    searchTypes: ['users', 'therapists', 'posts', 'communities'],\n  };\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [SearchController],\n      providers: [\n        {\n          provide: SearchService,\n          useValue: mockSearchService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .compile();\n\n    controller = module.get<SearchController>(SearchController);\n    searchService = module.get<SearchService>(SearchService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have searchService injected', () => {\n      expect(searchService).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', SearchController);\n      expect(guards).toContain(JwtAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', SearchController);\n      expect(controllerMetadata).toBe('search');\n    });\n  });\n\n  describe('GET /search/therapists', () => {\n    const validQuery = {\n      query: 'anxiety specialist',\n      location: 'New York',\n      specialties: ['Anxiety', 'Depression'],\n      priceRange: { min: 100, max: 200 },\n      experienceYears: 5,\n      rating: 4.0,\n      gender: 'female',\n      languages: ['English', 'Spanish'],\n      availability: 'available',\n      verifiedOnly: true,\n    };\n\n    it('should search therapists successfully', async () => {\n      mockSearchService.searchTherapists.mockResolvedValue(mockTherapistSearchResults);\n\n      const result = await controller.searchTherapists(validQuery);\n\n      expect(result).toEqual(mockTherapistSearchResults);\n      expect(searchService.searchTherapists).toHaveBeenCalledWith('anxiety specialist', {\n        location: validQuery.location,\n        specialties: validQuery.specialties,\n        priceRange: validQuery.priceRange,\n        experienceYears: validQuery.experienceYears,\n        rating: validQuery.rating,\n        gender: validQuery.gender,\n        languages: validQuery.languages,\n        availability: validQuery.availability,\n        verifiedOnly: validQuery.verifiedOnly,\n        maxHourlyRate: validQuery.priceRange.max,\n      });\n    });\n\n    it('should handle empty query', async () => {\n      const emptyQuery = {};\n      mockSearchService.searchTherapists.mockResolvedValue({\n        therapists: [],\n        totalCount: 0,\n        filters: {},\n      });\n\n      const result = await controller.searchTherapists(emptyQuery);\n\n      expect(result.therapists).toEqual([]);\n      expect(result.totalCount).toBe(0);\n      expect(searchService.searchTherapists).toHaveBeenCalledWith('', expect.any(Object));\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Search service unavailable');\n      mockSearchService.searchTherapists.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.searchTherapists(validQuery)\n      ).rejects.toThrow(serviceError);\n    });\n\n    it('should validate therapist search results structure', async () => {\n      mockSearchService.searchTherapists.mockResolvedValue(mockTherapistSearchResults);\n\n      const result = await controller.searchTherapists(validQuery);\n\n      expect(result).toHaveProperty('therapists');\n      expect(result).toHaveProperty('totalCount');\n      expect(result).toHaveProperty('filters');\n      expect(Array.isArray(result.therapists)).toBe(true);\n      expect(typeof result.totalCount).toBe('number');\n\n      if (result.therapists.length > 0) {\n        const therapist = result.therapists[0];\n        expect(therapist).toHaveProperty('id');\n        expect(therapist).toHaveProperty('firstName');\n        expect(therapist).toHaveProperty('lastName');\n        expect(therapist).toHaveProperty('specializations');\n        expect(therapist).toHaveProperty('rating');\n        expect(Array.isArray(therapist.specializations)).toBe(true);\n        expect(typeof therapist.rating).toBe('number');\n      }\n    });\n\n    it('should handle different filter combinations', async () => {\n      const specificQuery = {\n        query: 'CBT therapist',\n        specialties: ['CBT'],\n        priceRange: { max: 150 },\n        verifiedOnly: true,\n      };\n      mockSearchService.searchTherapists.mockResolvedValue(mockTherapistSearchResults);\n\n      const result = await controller.searchTherapists(specificQuery);\n\n      expect(result).toEqual(mockTherapistSearchResults);\n      expect(searchService.searchTherapists).toHaveBeenCalledWith('CBT therapist', expect.objectContaining({\n        specialties: ['CBT'],\n        verifiedOnly: true,\n        maxHourlyRate: 150,\n      }));\n    });\n  });\n\n  describe('GET /search/posts', () => {\n    const validQuery = {\n      query: 'anxiety tips',\n      communityId: 'community_123',\n    };\n\n    it('should search posts successfully', async () => {\n      mockSearchService.searchPosts.mockResolvedValue(mockPostSearchResults);\n\n      const result = await controller.searchPosts(validQuery);\n\n      expect(result).toEqual(mockPostSearchResults);\n      expect(searchService.searchPosts).toHaveBeenCalledWith(\n        validQuery.query,\n        validQuery.communityId\n      );\n    });\n\n    it('should search posts without community filter', async () => {\n      const globalQuery = { query: 'mental health' };\n      mockSearchService.searchPosts.mockResolvedValue(mockPostSearchResults);\n\n      const result = await controller.searchPosts(globalQuery);\n\n      expect(result).toEqual(mockPostSearchResults);\n      expect(searchService.searchPosts).toHaveBeenCalledWith('mental health', undefined);\n    });\n\n    it('should handle service errors for posts', async () => {\n      const serviceError = new Error('Post search service unavailable');\n      mockSearchService.searchPosts.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.searchPosts(validQuery)\n      ).rejects.toThrow(serviceError);\n    });\n\n    it('should validate post search results structure', async () => {\n      mockSearchService.searchPosts.mockResolvedValue(mockPostSearchResults);\n\n      const result = await controller.searchPosts(validQuery);\n\n      expect(result).toHaveProperty('posts');\n      expect(result).toHaveProperty('totalCount');\n      expect(Array.isArray(result.posts)).toBe(true);\n      expect(typeof result.totalCount).toBe('number');\n\n      if (result.posts.length > 0) {\n        const post = result.posts[0];\n        expect(post).toHaveProperty('id');\n        expect(post).toHaveProperty('title');\n        expect(post).toHaveProperty('content');\n        expect(post).toHaveProperty('authorId');\n        expect(post).toHaveProperty('createdAt');\n        expect(typeof post.likesCount).toBe('number');\n        expect(typeof post.commentsCount).toBe('number');\n      }\n    });\n  });\n\n  describe('GET /search/communities', () => {\n    const validQuery = {\n      query: 'anxiety support',\n    };\n\n    it('should search communities successfully', async () => {\n      mockSearchService.searchCommunities.mockResolvedValue(mockCommunitySearchResults);\n\n      const result = await controller.searchCommunities(validQuery);\n\n      expect(result).toEqual(mockCommunitySearchResults);\n      expect(searchService.searchCommunities).toHaveBeenCalledWith(validQuery.query);\n    });\n\n    it('should handle empty communities search', async () => {\n      mockSearchService.searchCommunities.mockResolvedValue({\n        communities: [],\n        totalCount: 0,\n      });\n\n      const result = await controller.searchCommunities({ query: 'nonexistent' });\n\n      expect(result.communities).toEqual([]);\n      expect(result.totalCount).toBe(0);\n    });\n\n    it('should validate community search results structure', async () => {\n      mockSearchService.searchCommunities.mockResolvedValue(mockCommunitySearchResults);\n\n      const result = await controller.searchCommunities(validQuery);\n\n      expect(result).toHaveProperty('communities');\n      expect(result).toHaveProperty('totalCount');\n      expect(Array.isArray(result.communities)).toBe(true);\n\n      if (result.communities.length > 0) {\n        const community = result.communities[0];\n        expect(community).toHaveProperty('id');\n        expect(community).toHaveProperty('name');\n        expect(community).toHaveProperty('description');\n        expect(community).toHaveProperty('memberCount');\n        expect(community).toHaveProperty('isPrivate');\n        expect(typeof community.memberCount).toBe('number');\n        expect(typeof community.isPrivate).toBe('boolean');\n      }\n    });\n  });\n\n  describe('GET /search/users', () => {\n    const validQuery = {\n      query: 'john doe',\n      role: 'client',\n    };\n\n    it('should search users successfully', async () => {\n      mockSearchService.searchUsers.mockResolvedValue(mockUserSearchResults);\n\n      const result = await controller.searchUsers(validQuery);\n\n      expect(result).toEqual(mockUserSearchResults);\n      expect(searchService.searchUsers).toHaveBeenCalledWith(\n        validQuery.query,\n        validQuery.role\n      );\n    });\n\n    it('should search users without role filter', async () => {\n      const queryWithoutRole = { query: 'admin' };\n      mockSearchService.searchUsers.mockResolvedValue(mockUserSearchResults);\n\n      const result = await controller.searchUsers(queryWithoutRole);\n\n      expect(result).toEqual(mockUserSearchResults);\n      expect(searchService.searchUsers).toHaveBeenCalledWith('admin', undefined);\n    });\n\n    it('should handle different role filters', async () => {\n      const roles = ['client', 'therapist', 'admin', 'moderator'];\n\n      for (const role of roles) {\n        mockSearchService.searchUsers.mockResolvedValue({\n          users: [{ ...mockUser, role }],\n          totalCount: 1,\n        });\n\n        const result = await controller.searchUsers({ query: 'test', role });\n        expect(result.users[0].role).toBe(role);\n      }\n    });\n\n    it('should validate user search results structure', async () => {\n      mockSearchService.searchUsers.mockResolvedValue(mockUserSearchResults);\n\n      const result = await controller.searchUsers(validQuery);\n\n      expect(result).toHaveProperty('users');\n      expect(result).toHaveProperty('totalCount');\n      expect(Array.isArray(result.users)).toBe(true);\n\n      if (result.users.length > 0) {\n        const user = result.users[0];\n        expect(user).toHaveProperty('id');\n        expect(user).toHaveProperty('firstName');\n        expect(user).toHaveProperty('lastName');\n        expect(user).toHaveProperty('email');\n        expect(user).toHaveProperty('role');\n        expect(user).toHaveProperty('isActive');\n        expect(typeof user.isActive).toBe('boolean');\n      }\n    });\n  });\n\n  describe('GET /search/global', () => {\n    const validQuery = {\n      query: 'anxiety',\n      types: ['users', 'therapists', 'posts', 'communities'],\n    };\n\n    it('should perform global search successfully', async () => {\n      mockSearchService.globalSearch.mockResolvedValue(mockGlobalSearchResults);\n\n      const result = await controller.globalSearch(validQuery);\n\n      expect(result).toEqual(mockGlobalSearchResults);\n      expect(searchService.globalSearch).toHaveBeenCalledWith(\n        validQuery.query,\n        validQuery.types\n      );\n    });\n\n    it('should handle global search without type filters', async () => {\n      const queryWithoutTypes = { query: 'mental health' };\n      mockSearchService.globalSearch.mockResolvedValue(mockGlobalSearchResults);\n\n      const result = await controller.globalSearch(queryWithoutTypes);\n\n      expect(result).toEqual(mockGlobalSearchResults);\n      expect(searchService.globalSearch).toHaveBeenCalledWith('mental health', undefined);\n    });\n\n    it('should filter out unsupported types', async () => {\n      const queryWithUnsupportedTypes = {\n        query: 'test',\n        types: ['users', 'therapists', 'worksheets', 'unsupported'],\n      };\n      mockSearchService.globalSearch.mockResolvedValue(mockGlobalSearchResults);\n\n      const result = await controller.globalSearch(queryWithUnsupportedTypes);\n\n      expect(searchService.globalSearch).toHaveBeenCalledWith(\n        'test',\n        ['users', 'therapists'] // worksheets and unsupported should be filtered out\n      );\n    });\n\n    it('should validate global search results structure', async () => {\n      mockSearchService.globalSearch.mockResolvedValue(mockGlobalSearchResults);\n\n      const result = await controller.globalSearch(validQuery);\n\n      expect(result).toHaveProperty('results');\n      expect(result).toHaveProperty('totalCount');\n      expect(result).toHaveProperty('query');\n      expect(result).toHaveProperty('searchTypes');\n\n      expect(result.results).toHaveProperty('users');\n      expect(result.results).toHaveProperty('therapists');\n      expect(result.results).toHaveProperty('posts');\n      expect(result.results).toHaveProperty('communities');\n\n      expect(Array.isArray(result.results.users)).toBe(true);\n      expect(Array.isArray(result.results.therapists)).toBe(true);\n      expect(Array.isArray(result.results.posts)).toBe(true);\n      expect(Array.isArray(result.results.communities)).toBe(true);\n      expect(Array.isArray(result.searchTypes)).toBe(true);\n\n      expect(typeof result.totalCount).toBe('number');\n      expect(typeof result.query).toBe('string');\n    });\n\n    it('should handle empty global search results', async () => {\n      const emptyResults = {\n        results: {\n          users: [],\n          therapists: [],\n          posts: [],\n          communities: [],\n        },\n        totalCount: 0,\n        query: 'nonexistent',\n        searchTypes: ['users', 'therapists', 'posts', 'communities'],\n      };\n      mockSearchService.globalSearch.mockResolvedValue(emptyResults);\n\n      const result = await controller.globalSearch({ query: 'nonexistent' });\n\n      expect(result.totalCount).toBe(0);\n      expect(result.results.users).toHaveLength(0);\n      expect(result.results.therapists).toHaveLength(0);\n      expect(result.results.posts).toHaveLength(0);\n      expect(result.results.communities).toHaveLength(0);\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted therapist search response', async () => {\n      mockSearchService.searchTherapists.mockResolvedValue(mockTherapistSearchResults);\n\n      const result = await controller.searchTherapists({ query: 'test' });\n\n      TestAssertions.expectValidEntity(result, ['therapists', 'totalCount', 'filters']);\n      expect(Array.isArray(result.therapists)).toBe(true);\n      expect(typeof result.totalCount).toBe('number');\n    });\n\n    it('should return properly formatted post search response', async () => {\n      mockSearchService.searchPosts.mockResolvedValue(mockPostSearchResults);\n\n      const result = await controller.searchPosts({ query: 'test' });\n\n      TestAssertions.expectValidEntity(result, ['posts', 'totalCount']);\n      expect(Array.isArray(result.posts)).toBe(true);\n      expect(typeof result.totalCount).toBe('number');\n    });\n\n    it('should return properly formatted global search response', async () => {\n      mockSearchService.globalSearch.mockResolvedValue(mockGlobalSearchResults);\n\n      const result = await controller.globalSearch({ query: 'test' });\n\n      TestAssertions.expectValidEntity(result, ['results', 'totalCount', 'query', 'searchTypes']);\n      expect(typeof result.results).toBe('object');\n      expect(typeof result.totalCount).toBe('number');\n      expect(typeof result.query).toBe('string');\n      expect(Array.isArray(result.searchTypes)).toBe(true);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle search service unavailable', async () => {\n      const serviceError = new Error('Search service temporarily unavailable');\n      mockSearchService.searchTherapists.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.searchTherapists({ query: 'test' })\n      ).rejects.toThrow(serviceError);\n    });\n\n    it('should handle database connection errors', async () => {\n      const dbError = new Error('Database connection failed');\n      mockSearchService.searchCommunities.mockRejectedValue(dbError);\n\n      await expect(\n        controller.searchCommunities({ query: 'test' })\n      ).rejects.toThrow(dbError);\n    });\n\n    it('should handle search index errors', async () => {\n      const indexError = new Error('Search index unavailable');\n      mockSearchService.globalSearch.mockRejectedValue(indexError);\n\n      await expect(\n        controller.globalSearch({ query: 'test' })\n      ).rejects.toThrow(indexError);\n    });\n\n    it('should handle malformed query parameters', async () => {\n      // Service should handle malformed queries gracefully\n      mockSearchService.searchUsers.mockResolvedValue({ users: [], totalCount: 0 });\n\n      const result = await controller.searchUsers({ query: '', role: 'invalid_role' });\n      expect(result.users).toEqual([]);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete search workflow', async () => {\n      // Search therapists\n      mockSearchService.searchTherapists.mockResolvedValue(mockTherapistSearchResults);\n      const therapistResult = await controller.searchTherapists({ query: 'anxiety' });\n      expect(therapistResult.therapists).toHaveLength(1);\n\n      // Search posts\n      mockSearchService.searchPosts.mockResolvedValue(mockPostSearchResults);\n      const postResult = await controller.searchPosts({ query: 'anxiety' });\n      expect(postResult.posts).toHaveLength(1);\n\n      // Search communities\n      mockSearchService.searchCommunities.mockResolvedValue(mockCommunitySearchResults);\n      const communityResult = await controller.searchCommunities({ query: 'anxiety' });\n      expect(communityResult.communities).toHaveLength(1);\n\n      // Global search\n      mockSearchService.globalSearch.mockResolvedValue(mockGlobalSearchResults);\n      const globalResult = await controller.globalSearch({ query: 'anxiety' });\n      expect(globalResult.totalCount).toBeGreaterThan(0);\n    });\n\n    it('should handle search with filters and pagination', async () => {\n      const advancedQuery = {\n        query: 'therapy',\n        location: 'New York',\n        specialties: ['Anxiety'],\n        priceRange: { min: 100, max: 200 },\n        rating: 4.0,\n        verifiedOnly: true,\n      };\n\n      mockSearchService.searchTherapists.mockResolvedValue(mockTherapistSearchResults);\n      const result = await controller.searchTherapists(advancedQuery);\n\n      expect(result.therapists).toBeDefined();\n      expect(result.filters).toBeDefined();\n      expect(searchService.searchTherapists).toHaveBeenCalledWith(\n        'therapy',\n        expect.objectContaining({\n          location: 'New York',\n          specialties: ['Anxiety'],\n          verifiedOnly: true,\n        })\n      );\n    });\n\n    it('should validate search result consistency', async () => {\n      const query = 'mental health';\n\n      // Search across all types\n      mockSearchService.searchTherapists.mockResolvedValue(mockTherapistSearchResults);\n      mockSearchService.searchPosts.mockResolvedValue(mockPostSearchResults);\n      mockSearchService.searchCommunities.mockResolvedValue(mockCommunitySearchResults);\n      mockSearchService.searchUsers.mockResolvedValue(mockUserSearchResults);\n      mockSearchService.globalSearch.mockResolvedValue(mockGlobalSearchResults);\n\n      const [therapistResult, postResult, communityResult, userResult, globalResult] = await Promise.all([\n        controller.searchTherapists({ query }),\n        controller.searchPosts({ query }),\n        controller.searchCommunities({ query }),\n        controller.searchUsers({ query }),\n        controller.globalSearch({ query }),\n      ]);\n\n      // Validate that individual searches match global search components\n      expect(globalResult.results.therapists).toHaveLength(1);\n      expect(globalResult.results.posts).toHaveLength(1);\n      expect(globalResult.results.communities).toHaveLength(1);\n      expect(globalResult.results.users).toHaveLength(1);\n    });\n\n    it('should handle edge cases and boundary conditions', async () => {\n      // Empty query\n      mockSearchService.globalSearch.mockResolvedValue({\n        results: { users: [], therapists: [], posts: [], communities: [] },\n        totalCount: 0,\n        query: '',\n        searchTypes: [],\n      });\n      const emptyResult = await controller.globalSearch({ query: '' });\n      expect(emptyResult.totalCount).toBe(0);\n\n      // Very long query\n      const longQuery = 'a'.repeat(1000);\n      mockSearchService.searchTherapists.mockResolvedValue(mockTherapistSearchResults);\n      const longQueryResult = await controller.searchTherapists({ query: longQuery });\n      expect(longQueryResult).toBeDefined();\n\n      // Special characters in query\n      mockSearchService.searchCommunities.mockResolvedValue(mockCommunitySearchResults);\n      const specialCharResult = await controller.searchCommunities({ query: '!@#$%^&*()' });\n      expect(specialCharResult).toBeDefined();\n    });\n  });\n});"],"version":3}