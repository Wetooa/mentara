{"version":3,"names":["cov_1e7hd6o1d4","actualCoverage","common_1","s","require","prisma_client_provider_1","email_service_1","token_service_1","crypto","EmailVerificationService","prisma","emailService","tokenService","constructor","f","sendVerificationEmail","userId","user","findUnique","where","id","select","email","firstName","emailVerified","emailVerifyToken","emailVerifyTokenExp","b","NotFoundException","BadRequestException","Date","sendVerificationEmailWithToken","token","hashedToken","expiresAt","generateEmailVerificationToken","update","data","verifyEmail","createHash","digest","success","message","isVerified","resendVerificationEmail","verificationUrl","process","env","FRONTEND_URL","sendGenericEmail","to","subject","template","supportEmail","SUPPORT_EMAIL","error","console","cleanupExpiredTokens","updateMany","lt","exports","__decorate","Injectable","PrismaService","_a","Object","_b","EmailService","_c","TokenService"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/services/email-verification.service.ts"],"sourcesContent":["import {\n  Injectable,\n  BadRequestException,\n  NotFoundException,\n} from '@nestjs/common';\nimport { PrismaService } from '../../providers/prisma-client.provider';\nimport { EmailService } from '../../services/email.service';\nimport { TokenService } from './token.service';\nimport * as crypto from 'crypto';\n\n@Injectable()\nexport class EmailVerificationService {\n  constructor(\n    private readonly prisma: PrismaService,\n    private readonly emailService: EmailService,\n    private readonly tokenService: TokenService,\n  ) {}\n\n  async sendVerificationEmail(userId: string): Promise<void> {\n    const user = await this.prisma.user.findUnique({\n      where: { id: userId },\n      select: {\n        id: true,\n        email: true,\n        firstName: true,\n        emailVerified: true,\n        emailVerifyToken: true,\n        emailVerifyTokenExp: true,\n      },\n    });\n\n    if (!user) {\n      throw new NotFoundException('User not found');\n    }\n\n    if (user.emailVerified) {\n      throw new BadRequestException('Email already verified');\n    }\n\n    // Check if there's an existing valid token\n    if (\n      user.emailVerifyToken &&\n      user.emailVerifyTokenExp &&\n      user.emailVerifyTokenExp > new Date()\n    ) {\n      // Resend existing token (rate limiting would be handled at controller level)\n      await this.sendVerificationEmailWithToken(\n        user.email,\n        user.firstName,\n        user.emailVerifyToken,\n      );\n      return;\n    }\n\n    // Generate new verification token\n    const { token, hashedToken, expiresAt } =\n      await this.tokenService.generateEmailVerificationToken();\n\n    // Update user with new token\n    await this.prisma.user.update({\n      where: { id: userId },\n      data: {\n        emailVerifyToken: hashedToken,\n        emailVerifyTokenExp: expiresAt,\n      },\n    });\n\n    // Send verification email\n    await this.sendVerificationEmailWithToken(\n      user.email,\n      user.firstName,\n      token,\n    );\n  }\n\n  async verifyEmail(\n    token: string,\n  ): Promise<{ success: boolean; message: string }> {\n    if (!token) {\n      throw new BadRequestException('Verification token is required');\n    }\n\n    const hashedToken = crypto.createHash('sha256').update(token).digest('hex');\n\n    const user = await this.prisma.user.findUnique({\n      where: { emailVerifyToken: hashedToken },\n      select: {\n        id: true,\n        email: true,\n        emailVerified: true,\n        emailVerifyTokenExp: true,\n      },\n    });\n\n    if (!user) {\n      throw new BadRequestException('Invalid verification token');\n    }\n\n    if (user.emailVerified) {\n      return {\n        success: true,\n        message: 'Email already verified',\n      };\n    }\n\n    if (!user.emailVerifyTokenExp || user.emailVerifyTokenExp < new Date()) {\n      // Clean up expired token\n      await this.prisma.user.update({\n        where: { id: user.id },\n        data: {\n          emailVerifyToken: null,\n          emailVerifyTokenExp: null,\n        },\n      });\n      throw new BadRequestException('Verification token has expired');\n    }\n\n    // Verify the email\n    await this.prisma.user.update({\n      where: { id: user.id },\n      data: {\n        emailVerified: true,\n        emailVerifyToken: null,\n        emailVerifyTokenExp: null,\n        isVerified: true, // Update general verification status\n      },\n    });\n\n    return {\n      success: true,\n      message: 'Email verified successfully',\n    };\n  }\n\n  async resendVerificationEmail(email: string): Promise<void> {\n    const user = await this.prisma.user.findUnique({\n      where: { email },\n      select: {\n        id: true,\n        email: true,\n        firstName: true,\n        emailVerified: true,\n      },\n    });\n\n    if (!user) {\n      // Don't reveal if email exists for security\n      return;\n    }\n\n    if (user.emailVerified) {\n      throw new BadRequestException('Email already verified');\n    }\n\n    await this.sendVerificationEmail(user.id);\n  }\n\n  private async sendVerificationEmailWithToken(\n    email: string,\n    firstName: string,\n    token: string,\n  ): Promise<void> {\n    const verificationUrl = `${process.env.FRONTEND_URL}/verify-email?token=${token}`;\n\n    try {\n      await this.emailService.sendGenericEmail({\n        to: email,\n        subject: 'Verify Your Mentara Account',\n        template: 'email-verification',\n        data: {\n          firstName,\n          verificationUrl,\n          supportEmail: process.env.SUPPORT_EMAIL || 'support@mentara.com',\n        },\n      });\n    } catch (error) {\n      console.error('Failed to send verification email:', error);\n      throw new BadRequestException('Failed to send verification email');\n    }\n  }\n\n  async cleanupExpiredTokens(): Promise<void> {\n    await this.prisma.user.updateMany({\n      where: {\n        emailVerifyTokenExp: {\n          lt: new Date(),\n        },\n      },\n      data: {\n        emailVerifyToken: null,\n        emailVerifyTokenExp: null,\n      },\n    });\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}