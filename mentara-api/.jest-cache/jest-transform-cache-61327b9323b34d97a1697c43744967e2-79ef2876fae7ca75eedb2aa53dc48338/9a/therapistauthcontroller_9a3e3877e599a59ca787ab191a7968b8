f9425e7b041c341bf4349629daf12c65
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", { value: true });
exports.TherapistAuthController = void 0;
const common_1 = require("@nestjs/common");
const platform_express_1 = require("@nestjs/platform-express");
const throttler_1 = require("@nestjs/throttler");
const swagger_1 = require("@nestjs/swagger");
const jwt_auth_guard_1 = require("../guards/jwt-auth.guard");
const current_user_id_decorator_1 = require("../decorators/current-user-id.decorator");
const current_user_role_decorator_1 = require("../decorators/current-user-role.decorator");
const public_decorator_1 = require("../decorators/public.decorator");
const zod_validation_pipe_1 = require("../../common/pipes/zod-validation.pipe");
const mentara_commons_1 = require("mentara-commons");
const therapist_auth_service_1 = require("../services/therapist-auth.service");
const supabase_storage_service_1 = require("../../common/services/supabase-storage.service");
const express_1 = require("express");
const therapist_application_interfaces_1 = require("../../therapist/interfaces/therapist-application.interfaces");
let TherapistAuthController = class TherapistAuthController {
    therapistAuthService;
    supabaseStorageService;
    constructor(therapistAuthService, supabaseStorageService) {
        this.therapistAuthService = therapistAuthService;
        this.supabaseStorageService = supabaseStorageService;
    }
    async register(registerDto) {
        const result = await this.therapistAuthService.registerTherapist(registerDto.email, registerDto.password, registerDto.firstName, registerDto.lastName);
        return {
            user: {
                id: result.user.id,
                email: result.user.email,
                firstName: result.user.firstName,
                lastName: result.user.lastName,
                role: result.user.role,
                emailVerified: result.user.emailVerified,
            },
            accessToken: result.tokens.accessToken,
            refreshToken: result.tokens.refreshToken,
            expiresIn: result.tokens.expiresIn,
            message: result.message,
        };
    }
    async login(loginDto, req) {
        const ipAddress = req.ip;
        const userAgent = req.get('User-Agent');
        const result = await this.therapistAuthService.loginTherapist(loginDto.email, loginDto.password, ipAddress, userAgent);
        return {
            user: {
                id: result.user.id,
                email: result.user.email,
                firstName: result.user.firstName,
                lastName: result.user.lastName,
                role: result.user.role,
                emailVerified: result.user.emailVerified,
            },
            accessToken: result.tokens.accessToken,
            refreshToken: result.tokens.refreshToken,
            expiresIn: result.tokens.expiresIn,
        };
    }
    async applyWithDocuments(applicationDataJson, fileTypes, files) {
        try {
            // Parse application data from form
            let applicationData;
            try {
                if (!applicationDataJson) {
                    throw new common_1.BadRequestException('Application data is missing. Please ensure the form is submitted correctly.');
                }
                if (typeof applicationDataJson !== 'string') {
                    console.error('Expected string but received:', typeof applicationDataJson, applicationDataJson);
                    throw new common_1.BadRequestException('Application data must be a JSON string.');
                }
                applicationData = JSON.parse(applicationDataJson);
            }
            catch (error) {
                console.error('JSON parsing error:', error);
                console.error('Raw applicationDataJson:', applicationDataJson);
                throw new common_1.BadRequestException('Invalid application data format. Please check that all form fields are filled correctly.');
            }
            // For public applications, create a temporary user ID
            const tempUserId = `temp_${Date.now()}_${applicationData.email.replace('@', '_at_')}`;
            const applicationWithUserId = { ...applicationData, userId: tempUserId };
            // Parse file type mappings
            let fileTypeMap = {};
            if (fileTypes) {
                try {
                    fileTypeMap = JSON.parse(fileTypes);
                }
                catch {
                    console.warn('Invalid fileTypes JSON, proceeding without mapping');
                }
            }
            // Use consolidated service method to create application and upload documents in one transaction
            const result = await this.therapistAuthService.createApplicationWithDocuments(applicationWithUserId, files || [], fileTypeMap);
            return {
                success: true,
                message: 'Application submitted successfully with documents',
                applicationId: result.application.userId,
                uploadedFiles: result.uploadedFiles,
            };
        }
        catch (error) {
            console.error('Error submitting application with documents:', error);
            if (error instanceof common_1.BadRequestException) {
                throw error;
            }
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            // Enhanced error handling with specific error types
            const errorMessage = error instanceof Error ? error.message : String(error);
            if (errorMessage.includes('email already exists')) {
                throw new common_1.BadRequestException('An application with this email address already exists. Please check your email or contact support.');
            }
            if (errorMessage.includes('file upload')) {
                throw new common_1.BadRequestException('One or more files failed to upload. Please check file formats and sizes.');
            }
            if (errorMessage.includes('validation')) {
                throw new common_1.BadRequestException('Application data validation failed. Please check all required fields.');
            }
            throw new common_1.InternalServerErrorException('Failed to submit application with documents. Please try again or contact support.');
        }
    }
    async getProfile(userId) {
        return this.therapistAuthService.getTherapistProfile(userId);
    }
    // Admin-only endpoints for managing therapist applications
    async getAllApplications(role, status, page, limit) {
        if (role !== 'admin') {
            throw new common_1.ForbiddenException('Admin access required');
        }
        try {
            const pageNum = page ? Math.max(1, page) : 1;
            const limitNum = limit ? Math.min(Math.max(1, limit), 100) : 10;
            const result = await this.therapistAuthService.getAllApplications({
                status,
                page: pageNum,
                limit: limitNum,
            });
            return result;
        }
        catch (error) {
            console.error('Error fetching applications:', error);
            throw new common_1.InternalServerErrorException('Failed to fetch applications');
        }
    }
    async getApplicationById(role, id) {
        if (role !== 'admin') {
            throw new common_1.ForbiddenException('Admin access required');
        }
        try {
            const application = await this.therapistAuthService.getApplicationById(id);
            if (!application) {
                throw new common_1.NotFoundException('Application not found');
            }
            return application;
        }
        catch (error) {
            console.error('Error fetching application:', error);
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            throw new common_1.InternalServerErrorException('Failed to fetch application');
        }
    }
    async updateApplicationStatus(role, id, updateData) {
        if (role !== 'admin') {
            throw new common_1.ForbiddenException('Admin access required');
        }
        try {
            const result = await this.therapistAuthService.updateApplicationStatus(id, updateData);
            return result;
        }
        catch (error) {
            console.error('Error updating application status:', error);
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            throw new common_1.InternalServerErrorException('Failed to update application status');
        }
    }
    async getApplicationFiles(role, applicationId) {
        if (role !== 'admin') {
            throw new common_1.ForbiddenException('Admin access required');
        }
        try {
            const files = await this.therapistAuthService.getApplicationFiles(applicationId);
            return files;
        }
        catch (error) {
            console.error('Error fetching application files:', error);
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            throw new common_1.InternalServerErrorException('Failed to fetch application files');
        }
    }
};
exports.TherapistAuthController = TherapistAuthController;
__decorate([
    (0, public_decorator_1.Public)(),
    (0, swagger_1.ApiOperation)({
        summary: 'Register new therapist account',
        description: 'Create a new therapist account. Initial registration before application approval.',
    }),
    (0, swagger_1.ApiBody)({
        type: 'object',
        description: 'Therapist registration data',
        schema: {
            type: 'object',
            required: ['email', 'password', 'firstName', 'lastName'],
            properties: {
                email: { type: 'string', format: 'email', example: 'therapist@example.com' },
                password: { type: 'string', minLength: 8, example: 'SecurePass123!' },
                firstName: { type: 'string', example: 'Dr. Sarah' },
                lastName: { type: 'string', example: 'Johnson' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Therapist account created successfully',
        schema: {
            type: 'object',
            properties: {
                user: {
                    type: 'object',
                    properties: {
                        id: { type: 'string' },
                        email: { type: 'string' },
                        firstName: { type: 'string' },
                        lastName: { type: 'string' },
                        role: { type: 'string' },
                        emailVerified: { type: 'boolean' },
                    },
                },
                accessToken: { type: 'string' },
                refreshToken: { type: 'string' },
                expiresIn: { type: 'number' },
                message: { type: 'string' },
            },
        },
    }),
    (0, swagger_1.ApiBadRequestResponse)({ description: 'Invalid registration data or email already exists' }),
    (0, swagger_1.ApiTooManyRequestsResponse)({ description: 'Too many registration attempts' }),
    (0, throttler_1.Throttle)({ default: { limit: 3, ttl: 600000 } }) // 3 therapist registrations per 10 minutes
    ,
    (0, common_1.Post)('register'),
    (0, common_1.HttpCode)(common_1.HttpStatus.CREATED),
    __param(0, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(mentara_commons_1.RegisterTherapistDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], TherapistAuthController.prototype, "register", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, swagger_1.ApiOperation)({
        summary: 'Therapist login',
        description: 'Authenticate therapist user and return access tokens',
    }),
    (0, swagger_1.ApiBody)({
        type: 'object',
        description: 'Therapist login credentials',
        schema: {
            type: 'object',
            required: ['email', 'password'],
            properties: {
                email: { type: 'string', format: 'email', example: 'therapist@example.com' },
                password: { type: 'string', example: 'SecurePass123!' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Login successful',
        schema: {
            type: 'object',
            properties: {
                user: {
                    type: 'object',
                    properties: {
                        id: { type: 'string' },
                        email: { type: 'string' },
                        firstName: { type: 'string' },
                        lastName: { type: 'string' },
                        role: { type: 'string' },
                        emailVerified: { type: 'boolean' },
                    },
                },
                accessToken: { type: 'string' },
                refreshToken: { type: 'string' },
                expiresIn: { type: 'number' },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({ description: 'Invalid credentials' }),
    (0, swagger_1.ApiTooManyRequestsResponse)({ description: 'Too many login attempts' }),
    (0, throttler_1.Throttle)({ default: { limit: 10, ttl: 300000 } }) // 10 login attempts per 5 minutes
    ,
    (0, common_1.Post)('login'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(mentara_commons_1.LoginDtoSchema))),
    __param(1, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, typeof (_c = typeof express_1.Request !== "undefined" && express_1.Request) === "function" ? _c : Object]),
    __metadata("design:returntype", Promise)
], TherapistAuthController.prototype, "login", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, swagger_1.ApiOperation)({
        summary: 'Submit therapist application with documents',
        description: 'Submit a complete therapist application including required documents and certifications. Supports multiple file uploads.',
    }),
    (0, swagger_1.ApiConsumes)('multipart/form-data'),
    (0, swagger_1.ApiBody)({
        description: 'Therapist application with supporting documents',
        schema: {
            type: 'object',
            properties: {
                applicationDataJson: {
                    type: 'string',
                    description: 'JSON string containing application data',
                    example: JSON.stringify({
                        email: 'therapist@example.com',
                        firstName: 'Dr. Sarah',
                        lastName: 'Johnson',
                        licenseNumber: 'LIC123456',
                        specializations: ['anxiety', 'depression'],
                        education: 'PhD in Psychology',
                        experience: '5 years',
                    }),
                },
                fileTypes: {
                    type: 'string',
                    description: 'JSON string mapping file indices to types',
                    example: JSON.stringify({ '0': 'license', '1': 'diploma' }),
                },
                files: {
                    type: 'array',
                    items: {
                        type: 'string',
                        format: 'binary',
                    },
                    description: 'Supporting documents (PDF, DOC, DOCX, JPG, PNG)',
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Application submitted successfully',
        schema: {
            type: 'object',
            properties: {
                success: { type: 'boolean' },
                message: { type: 'string' },
                applicationId: { type: 'string' },
                uploadedFiles: {
                    type: 'array',
                    items: {
                        type: 'object',
                        properties: {
                            id: { type: 'string' },
                            fileName: { type: 'string' },
                            url: { type: 'string' },
                        },
                    },
                },
            },
        },
    }),
    (0, swagger_1.ApiBadRequestResponse)({ description: 'Invalid application data or file format' }),
    (0, swagger_1.ApiInternalServerErrorResponse)({ description: 'Failed to process application' }),
    (0, common_1.Post)('apply-with-documents'),
    (0, common_1.UseInterceptors)((0, platform_express_1.FilesInterceptor)('files', 10, {
        limits: { fileSize: 10 * 1024 * 1024 }, // 10MB limit per file
        fileFilter: (req, file, callback) => {
            const allowedMimeTypes = [
                'application/pdf',
                'image/jpeg',
                'image/png',
                'image/jpg',
                'application/msword',
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
            ];
            if (allowedMimeTypes.includes(file.mimetype)) {
                callback(null, true);
            }
            else {
                callback(new common_1.BadRequestException('Invalid file type'), false);
            }
        },
    })),
    __param(0, (0, common_1.Body)('applicationDataJson')),
    __param(1, (0, common_1.Body)('fileTypes')),
    __param(2, (0, common_1.UploadedFiles)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Array]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], TherapistAuthController.prototype, "applyWithDocuments", null);
__decorate([
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    (0, swagger_1.ApiOperation)({
        summary: 'Get therapist profile',
        description: 'Retrieve the authenticated therapist user profile information',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Therapist profile retrieved successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                email: { type: 'string' },
                firstName: { type: 'string' },
                lastName: { type: 'string' },
                role: { type: 'string' },
                licenseNumber: { type: 'string' },
                specializations: { type: 'array', items: { type: 'string' } },
                approvalStatus: { type: 'string' },
                profileComplete: { type: 'boolean' },
                createdAt: { type: 'string', format: 'date-time' },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({ description: 'Invalid or missing authentication token' }),
    (0, common_1.Get)('profile'),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], TherapistAuthController.prototype, "getProfile", null);
__decorate([
    (0, common_1.Get)('applications'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get all therapist applications (Admin only)',
        description: 'Retrieve all therapist applications with optional filtering and pagination. Admin access required.',
    }),
    (0, swagger_1.ApiQuery)({ name: 'status', required: false, description: 'Filter by application status' }),
    (0, swagger_1.ApiQuery)({ name: 'page', required: false, description: 'Page number for pagination' }),
    (0, swagger_1.ApiQuery)({ name: 'limit', required: false, description: 'Number of items per page' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Applications retrieved successfully',
        schema: {
            type: 'object',
            properties: {
                applications: {
                    type: 'array',
                    items: {
                        type: 'object',
                        properties: {
                            id: { type: 'string' },
                            email: { type: 'string' },
                            firstName: { type: 'string' },
                            lastName: { type: 'string' },
                            status: { type: 'string' },
                            submittedAt: { type: 'string', format: 'date-time' },
                        },
                    },
                },
                totalCount: { type: 'number' },
                page: { type: 'number' },
                totalPages: { type: 'number' },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({ description: 'Invalid or missing authentication token' }),
    (0, swagger_1.ApiForbiddenResponse)({ description: 'Admin access required' }),
    (0, swagger_1.ApiInternalServerErrorResponse)({ description: 'Failed to fetch applications' }),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, common_1.Query)('status')),
    __param(2, (0, common_1.Query)('page')),
    __param(3, (0, common_1.Query)('limit')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Number, Number]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], TherapistAuthController.prototype, "getAllApplications", null);
__decorate([
    (0, common_1.Get)('applications/:id'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get therapist application by ID (Admin only)',
        description: 'Retrieve detailed information about a specific therapist application. Admin access required.',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Application ID' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Application retrieved successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                email: { type: 'string' },
                firstName: { type: 'string' },
                lastName: { type: 'string' },
                licenseNumber: { type: 'string' },
                specializations: { type: 'array', items: { type: 'string' } },
                education: { type: 'string' },
                experience: { type: 'string' },
                status: { type: 'string' },
                submittedAt: { type: 'string', format: 'date-time' },
                reviewedAt: { type: 'string', format: 'date-time', nullable: true },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({ description: 'Invalid or missing authentication token' }),
    (0, swagger_1.ApiForbiddenResponse)({ description: 'Admin access required' }),
    (0, swagger_1.ApiNotFoundResponse)({ description: 'Application not found' }),
    (0, swagger_1.ApiInternalServerErrorResponse)({ description: 'Failed to fetch application' }),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], TherapistAuthController.prototype, "getApplicationById", null);
__decorate([
    (0, common_1.Put)('applications/:id/status'),
    (0, swagger_1.ApiOperation)({
        summary: 'Update therapist application status (Admin only)',
        description: 'Update the status of a therapist application (approve, reject, etc.). Admin access required.',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Application ID' }),
    (0, swagger_1.ApiBody)({
        description: 'Status update data',
        schema: {
            type: 'object',
            required: ['status'],
            properties: {
                status: { type: 'string', enum: ['approved', 'rejected', 'pending'], example: 'approved' },
                notes: { type: 'string', description: 'Optional notes about the decision' },
                reviewerComments: { type: 'string', description: 'Comments from the reviewing admin' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Application status updated successfully',
        schema: {
            type: 'object',
            properties: {
                success: { type: 'boolean' },
                message: { type: 'string' },
                credentials: {
                    type: 'object',
                    properties: {
                        email: { type: 'string' },
                        password: { type: 'string' },
                    },
                    description: 'Generated credentials for approved applications',
                },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({ description: 'Invalid or missing authentication token' }),
    (0, swagger_1.ApiForbiddenResponse)({ description: 'Admin access required' }),
    (0, swagger_1.ApiNotFoundResponse)({ description: 'Application not found' }),
    (0, swagger_1.ApiInternalServerErrorResponse)({ description: 'Failed to update application status' }),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, common_1.Param)('id')),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, typeof (_g = typeof therapist_application_interfaces_1.ApplicationStatusUpdateDto !== "undefined" && therapist_application_interfaces_1.ApplicationStatusUpdateDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], TherapistAuthController.prototype, "updateApplicationStatus", null);
__decorate([
    (0, common_1.Get)('applications/:id/files'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get therapist application files (Admin only)',
        description: 'Retrieve all uploaded files for a specific therapist application. Admin access required.',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Application ID' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Application files retrieved successfully',
        schema: {
            type: 'array',
            items: {
                type: 'object',
                properties: {
                    id: { type: 'string' },
                    fileName: { type: 'string' },
                    fileUrl: { type: 'string' },
                    uploadedAt: { type: 'string', format: 'date-time' },
                },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({ description: 'Invalid or missing authentication token' }),
    (0, swagger_1.ApiForbiddenResponse)({ description: 'Admin access required' }),
    (0, swagger_1.ApiNotFoundResponse)({ description: 'Application or files not found' }),
    (0, swagger_1.ApiInternalServerErrorResponse)({ description: 'Failed to fetch application files' }),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], TherapistAuthController.prototype, "getApplicationFiles", null);
exports.TherapistAuthController = TherapistAuthController = __decorate([
    (0, swagger_1.ApiTags)('therapist-auth'),
    (0, swagger_1.ApiBearerAuth)('JWT-auth'),
    (0, common_1.Controller)('auth/therapist'),
    __metadata("design:paramtypes", [typeof (_a = typeof therapist_auth_service_1.TherapistAuthService !== "undefined" && therapist_auth_service_1.TherapistAuthService) === "function" ? _a : Object, typeof (_b = typeof supabase_storage_service_1.SupabaseStorageService !== "undefined" && supabase_storage_service_1.SupabaseStorageService) === "function" ? _b : Object])
], TherapistAuthController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2F1dGgvY29udHJvbGxlcnMvdGhlcmFwaXN0LWF1dGguY29udHJvbGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsMkNBa0J3QjtBQUN4QiwrREFBNEQ7QUFDNUQsaURBQTZDO0FBQzdDLDZDQWV5QjtBQUN6Qiw2REFBd0Q7QUFDeEQsdUZBQXdFO0FBQ3hFLDJGQUE0RTtBQUM1RSxxRUFBd0Q7QUFDeEQsZ0ZBQTJFO0FBRTNFLHFEQU95QjtBQUN6QiwrRUFBMEU7QUFDMUUsNkZBQXdGO0FBQ3hGLHFDQUFrQztBQUVsQyxrSEFHcUU7QUFLOUQsSUFBTSx1QkFBdUIsR0FBN0IsTUFBTSx1QkFBdUI7SUFFZjtJQUNBO0lBRm5CLFlBQ21CLG9CQUEwQyxFQUMxQyxzQkFBOEM7UUFEOUMseUJBQW9CLEdBQXBCLG9CQUFvQixDQUFzQjtRQUMxQywyQkFBc0IsR0FBdEIsc0JBQXNCLENBQXdCO0lBQzlELENBQUM7SUFrREUsQUFBTixLQUFLLENBQUMsUUFBUSxDQUVaLFdBQWlDO1FBRWpDLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixDQUM5RCxXQUFXLENBQUMsS0FBSyxFQUNqQixXQUFXLENBQUMsUUFBUSxFQUNwQixXQUFXLENBQUMsU0FBUyxFQUNyQixXQUFXLENBQUMsUUFBUSxDQUNyQixDQUFDO1FBRUYsT0FBTztZQUNMLElBQUksRUFBRTtnQkFDSixFQUFFLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUNsQixLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLO2dCQUN4QixTQUFTLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTO2dCQUNoQyxRQUFRLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRO2dCQUM5QixJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJ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RUFBRSxDQUFDO0lBQ3BGLElBQUEsa0JBQVMsRUFBQyw2QkFBWSxDQUFDO0lBRXJCLFdBQUEsSUFBQSw2Q0FBZSxHQUFFLENBQUE7SUFDakIsV0FBQSxJQUFBLGNBQUssRUFBQyxJQUFJLENBQUMsQ0FBQTs7O3dEQUNYLE9BQU8sb0JBQVAsT0FBTztrRUF3QlQ7a0NBdm5CVSx1QkFBdUI7SUFIbkMsSUFBQSxpQkFBTyxFQUFDLGdCQUFnQixDQUFDO0lBQ3pCLElBQUEsdUJBQWEsRUFBQyxVQUFVLENBQUM7SUFDekIsSUFBQSxtQkFBVSxFQUFDLGdCQUFnQixDQUFDO3lEQUdjLDZDQUFvQixvQkFBcEIsNkNBQW9CLG9EQUNsQixpREFBc0Isb0JBQXRCLGlEQUFzQjtHQUh0RCx1QkFBdUIsQ0F3bkJuQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvYXV0aC9jb250cm9sbGVycy90aGVyYXBpc3QtYXV0aC5jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEJvZHksXG4gIENvbnRyb2xsZXIsXG4gIEdldCxcbiAgUG9zdCxcbiAgUHV0LFxuICBQYXJhbSxcbiAgUXVlcnksXG4gIFVzZUludGVyY2VwdG9ycyxcbiAgVXBsb2FkZWRGaWxlcyxcbiAgQmFkUmVxdWVzdEV4Y2VwdGlvbixcbiAgTm90Rm91bmRFeGNlcHRpb24sXG4gIEZvcmJpZGRlbkV4Y2VwdGlvbixcbiAgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbixcbiAgVXNlR3VhcmRzLFxuICBIdHRwQ29kZSxcbiAgSHR0cFN0YXR1cyxcbiAgUmVxLFxufSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBGaWxlc0ludGVyY2VwdG9yIH0gZnJvbSAnQG5lc3Rqcy9wbGF0Zm9ybS1leHByZXNzJztcbmltcG9ydCB7IFRocm90dGxlIH0gZnJvbSAnQG5lc3Rqcy90aHJvdHRsZXInO1xuaW1wb3J0IHtcbiAgQXBpVGFncyxcbiAgQXBpT3BlcmF0aW9uLFxuICBBcGlSZXNwb25zZSxcbiAgQXBpQm9keSxcbiAgQXBpQmVhcmVyQXV0aCxcbiAgQXBpVW5hdXRob3JpemVkUmVzcG9uc2UsXG4gIEFwaUZvcmJpZGRlblJlc3BvbnNlLFxuICBBcGlUb29NYW55UmVxdWVzdHNSZXNwb25zZSxcbiAgQXBpQmFkUmVxdWVzdFJlc3BvbnNlLFxuICBBcGlOb3RGb3VuZFJlc3BvbnNlLFxuICBBcGlJbnRlcm5hbFNlcnZlckVycm9yUmVzcG9uc2UsXG4gIEFwaUNvbnN1bWVzLFxuICBBcGlQYXJhbSxcbiAgQXBpUXVlcnksXG59IGZyb20gJ0BuZXN0anMvc3dhZ2dlcic7XG5pbXBvcnQgeyBKd3RBdXRoR3VhcmQgfSBmcm9tICcuLi9ndWFyZHMvand0LWF1dGguZ3VhcmQnO1xuaW1wb3J0IHsgQ3VycmVudFVzZXJJZCB9IGZyb20gJy4uL2RlY29yYXRvcnMvY3VycmVudC11c2VyLWlkLmRlY29yYXRvcic7XG5pbXBvcnQgeyBDdXJyZW50VXNlclJvbGUgfSBmcm9tICcuLi9kZWNvcmF0b3JzL2N1cnJlbnQtdXNlci1yb2xlLmRlY29yYXRvcic7XG5pbXBvcnQgeyBQdWJsaWMgfSBmcm9tICcuLi9kZWNvcmF0b3JzL3B1YmxpYy5kZWNvcmF0b3InO1xuaW1wb3J0IHsgWm9kVmFsaWRhdGlvblBpcGUgfSBmcm9tICcuLi8uLi9jb21tb24vcGlwZXMvem9kLXZhbGlkYXRpb24ucGlwZSc7XG5pbXBvcnQgeyBWYWxpZGF0ZWRCb2R5IH0gZnJvbSAnLi4vLi4vY29tbW9uL2RlY29yYXRvcnMvdmFsaWRhdGUtYm9keS5kZWNvcmF0b3InO1xuaW1wb3J0IHtcbiAgUmVnaXN0ZXJUaGVyYXBpc3REdG9TY2hlbWEsXG4gIExvZ2luRHRvU2NoZW1hLFxuICBUaGVyYXBpc3RBcHBsaWNhdGlvbkNyZWF0ZUR0b1NjaGVtYSxcbiAgdHlwZSBSZWdpc3RlclRoZXJhcGlzdER0byxcbiAgdHlwZSBMb2dpbkR0byxcbiAgdHlwZSBUaGVyYXBpc3RBcHBsaWNhdGlvbkNyZWF0ZUR0byxcbn0gZnJvbSAnbWVudGFyYS1jb21tb25zJztcbmltcG9ydCB7IFRoZXJhcGlzdEF1dGhTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvdGhlcmFwaXN0LWF1dGguc2VydmljZSc7XG5pbXBvcnQgeyBTdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3NlcnZpY2VzL3N1cGFiYXNlLXN0b3JhZ2Uuc2VydmljZSc7XG5pbXBvcnQgeyBSZXF1ZXN0IH0gZnJvbSAnZXhwcmVzcyc7XG5cbmltcG9ydCB7XG4gIFRoZXJhcGlzdEFwcGxpY2F0aW9uUmVzcG9uc2UsXG4gIEFwcGxpY2F0aW9uU3RhdHVzVXBkYXRlRHRvLFxufSBmcm9tICcuLi8uLi90aGVyYXBpc3QvaW50ZXJmYWNlcy90aGVyYXBpc3QtYXBwbGljYXRpb24uaW50ZXJmYWNlcyc7XG5cbkBBcGlUYWdzKCd0aGVyYXBpc3QtYXV0aCcpXG5AQXBpQmVhcmVyQXV0aCgnSldULWF1dGgnKVxuQENvbnRyb2xsZXIoJ2F1dGgvdGhlcmFwaXN0JylcbmV4cG9ydCBjbGFzcyBUaGVyYXBpc3RBdXRoQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgdGhlcmFwaXN0QXV0aFNlcnZpY2U6IFRoZXJhcGlzdEF1dGhTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgc3VwYWJhc2VTdG9yYWdlU2VydmljZTogU3VwYWJhc2VTdG9yYWdlU2VydmljZSxcbiAgKSB7fVxuXG4gIEBQdWJsaWMoKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnUmVnaXN0ZXIgbmV3IHRoZXJhcGlzdCBhY2NvdW50JyxcbiAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZSBhIG5ldyB0aGVyYXBpc3QgYWNjb3VudC4gSW5pdGlhbCByZWdpc3RyYXRpb24gYmVmb3JlIGFwcGxpY2F0aW9uIGFwcHJvdmFsLicsXG4gIH0pXG4gIEBBcGlCb2R5KHtcbiAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICBkZXNjcmlwdGlvbjogJ1RoZXJhcGlzdCByZWdpc3RyYXRpb24gZGF0YScsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHJlcXVpcmVkOiBbJ2VtYWlsJywgJ3Bhc3N3b3JkJywgJ2ZpcnN0TmFtZScsICdsYXN0TmFtZSddLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBlbWFpbDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZW1haWwnLCBleGFtcGxlOiAndGhlcmFwaXN0QGV4YW1wbGUuY29tJyB9LFxuICAgICAgICBwYXNzd29yZDogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiA4LCBleGFtcGxlOiAnU2VjdXJlUGFzczEyMyEnIH0sXG4gICAgICAgIGZpcnN0TmFtZTogeyB0eXBlOiAnc3RyaW5nJywgZXhhbXBsZTogJ0RyLiBTYXJhaCcgfSxcbiAgICAgICAgbGFzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycsIGV4YW1wbGU6ICdKb2huc29uJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAxLFxuICAgIGRlc2NyaXB0aW9uOiAnVGhlcmFwaXN0IGFjY291bnQgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgZW1haWw6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgbGFzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIHJvbGU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYWNjZXNzVG9rZW46IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgcmVmcmVzaFRva2VuOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGV4cGlyZXNJbjogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICBtZXNzYWdlOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlCYWRSZXF1ZXN0UmVzcG9uc2UoeyBkZXNjcmlwdGlvbjogJ0ludmFsaWQgcmVnaXN0cmF0aW9uIGRhdGEgb3IgZW1haWwgYWxyZWFkeSBleGlzdHMnIH0pXG4gIEBBcGlUb29NYW55UmVxdWVzdHNSZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnVG9vIG1hbnkgcmVnaXN0cmF0aW9uIGF0dGVtcHRzJyB9KVxuICBAVGhyb3R0bGUoeyBkZWZhdWx0OiB7IGxpbWl0OiAzLCB0dGw6IDYwMDAwMCB9IH0pIC8vIDMgdGhlcmFwaXN0IHJlZ2lzdHJhdGlvbnMgcGVyIDEwIG1pbnV0ZXNcbiAgQFBvc3QoJ3JlZ2lzdGVyJylcbiAgQEh0dHBDb2RlKEh0dHBTdGF0dXMuQ1JFQVRFRClcbiAgYXN5bmMgcmVnaXN0ZXIoXG4gICAgQEJvZHkobmV3IFpvZFZhbGlkYXRpb25QaXBlKFJlZ2lzdGVyVGhlcmFwaXN0RHRvU2NoZW1hKSlcbiAgICByZWdpc3RlckR0bzogUmVnaXN0ZXJUaGVyYXBpc3REdG8sXG4gICkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudGhlcmFwaXN0QXV0aFNlcnZpY2UucmVnaXN0ZXJUaGVyYXBpc3QoXG4gICAgICByZWdpc3RlckR0by5lbWFpbCxcbiAgICAgIHJlZ2lzdGVyRHRvLnBhc3N3b3JkLFxuICAgICAgcmVnaXN0ZXJEdG8uZmlyc3ROYW1lLFxuICAgICAgcmVnaXN0ZXJEdG8ubGFzdE5hbWUsXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiByZXN1bHQudXNlci5pZCxcbiAgICAgICAgZW1haWw6IHJlc3VsdC51c2VyLmVtYWlsLFxuICAgICAgICBmaXJzdE5hbWU6IHJlc3VsdC51c2VyLmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdE5hbWU6IHJlc3VsdC51c2VyLmxhc3ROYW1lLFxuICAgICAgICByb2xlOiByZXN1bHQudXNlci5yb2xlLFxuICAgICAgICBlbWFpbFZlcmlmaWVkOiByZXN1bHQudXNlci5lbWFpbFZlcmlmaWVkLFxuICAgICAgfSxcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQudG9rZW5zLmFjY2Vzc1Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQudG9rZW5zLnJlZnJlc2hUb2tlbixcbiAgICAgIGV4cGlyZXNJbjogcmVzdWx0LnRva2Vucy5leHBpcmVzSW4sXG4gICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZSxcbiAgICB9O1xuICB9XG5cbiAgQFB1YmxpYygpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdUaGVyYXBpc3QgbG9naW4nLFxuICAgIGRlc2NyaXB0aW9uOiAnQXV0aGVudGljYXRlIHRoZXJhcGlzdCB1c2VyIGFuZCByZXR1cm4gYWNjZXNzIHRva2VucycsXG4gIH0pXG4gIEBBcGlCb2R5KHtcbiAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICBkZXNjcmlwdGlvbjogJ1RoZXJhcGlzdCBsb2dpbiBjcmVkZW50aWFscycsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHJlcXVpcmVkOiBbJ2VtYWlsJywgJ3Bhc3N3b3JkJ10sXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGVtYWlsOiB7IHR5cGU6ICdzdHJpbmcnLCBmb3JtYXQ6ICdlbWFpbCcsIGV4YW1wbGU6ICd0aGVyYXBpc3RAZXhhbXBsZS5jb20nIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IHR5cGU6ICdzdHJpbmcnLCBleGFtcGxlOiAnU2VjdXJlUGFzczEyMyEnIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdMb2dpbiBzdWNjZXNzZnVsJyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGVtYWlsOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICByb2xlOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGFjY2Vzc1Rva2VuOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHJlZnJlc2hUb2tlbjogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBleHBpcmVzSW46IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVVuYXV0aG9yaXplZFJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyB9KVxuICBAQXBpVG9vTWFueVJlcXVlc3RzUmVzcG9uc2UoeyBkZXNjcmlwdGlvbjogJ1RvbyBtYW55IGxvZ2luIGF0dGVtcHRzJyB9KVxuICBAVGhyb3R0bGUoeyBkZWZhdWx0OiB7IGxpbWl0OiAxMCwgdHRsOiAzMDAwMDAgfSB9KSAvLyAxMCBsb2dpbiBhdHRlbXB0cyBwZXIgNSBtaW51dGVzXG4gIEBQb3N0KCdsb2dpbicpXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLk9LKVxuICBhc3luYyBsb2dpbihcbiAgICBAQm9keShuZXcgWm9kVmFsaWRhdGlvblBpcGUoTG9naW5EdG9TY2hlbWEpKSBsb2dpbkR0bzogTG9naW5EdG8sXG4gICAgQFJlcSgpIHJlcTogUmVxdWVzdCxcbiAgKSB7XG4gICAgY29uc3QgaXBBZGRyZXNzID0gcmVxLmlwO1xuICAgIGNvbnN0IHVzZXJBZ2VudCA9IHJlcS5nZXQoJ1VzZXItQWdlbnQnKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudGhlcmFwaXN0QXV0aFNlcnZpY2UubG9naW5UaGVyYXBpc3QoXG4gICAgICBsb2dpbkR0by5lbWFpbCxcbiAgICAgIGxvZ2luRHRvLnBhc3N3b3JkLFxuICAgICAgaXBBZGRyZXNzLFxuICAgICAgdXNlckFnZW50LFxuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogcmVzdWx0LnVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiByZXN1bHQudXNlci5lbWFpbCxcbiAgICAgICAgZmlyc3ROYW1lOiByZXN1bHQudXNlci5maXJzdE5hbWUsXG4gICAgICAgIGxhc3ROYW1lOiByZXN1bHQudXNlci5sYXN0TmFtZSxcbiAgICAgICAgcm9sZTogcmVzdWx0LnVzZXIucm9sZSxcbiAgICAgICAgZW1haWxWZXJpZmllZDogcmVzdWx0LnVzZXIuZW1haWxWZXJpZmllZCxcbiAgICAgIH0sXG4gICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LnRva2Vucy5hY2Nlc3NUb2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnRva2Vucy5yZWZyZXNoVG9rZW4sXG4gICAgICBleHBpcmVzSW46IHJlc3VsdC50b2tlbnMuZXhwaXJlc0luLFxuICAgIH07XG4gIH1cblxuICBAUHVibGljKClcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ1N1Ym1pdCB0aGVyYXBpc3QgYXBwbGljYXRpb24gd2l0aCBkb2N1bWVudHMnLFxuICAgIGRlc2NyaXB0aW9uOiAnU3VibWl0IGEgY29tcGxldGUgdGhlcmFwaXN0IGFwcGxpY2F0aW9uIGluY2x1ZGluZyByZXF1aXJlZCBkb2N1bWVudHMgYW5kIGNlcnRpZmljYXRpb25zLiBTdXBwb3J0cyBtdWx0aXBsZSBmaWxlIHVwbG9hZHMuJyxcbiAgfSlcbiAgQEFwaUNvbnN1bWVzKCdtdWx0aXBhcnQvZm9ybS1kYXRhJylcbiAgQEFwaUJvZHkoe1xuICAgIGRlc2NyaXB0aW9uOiAnVGhlcmFwaXN0IGFwcGxpY2F0aW9uIHdpdGggc3VwcG9ydGluZyBkb2N1bWVudHMnLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGFwcGxpY2F0aW9uRGF0YUpzb246IHtcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0pTT04gc3RyaW5nIGNvbnRhaW5pbmcgYXBwbGljYXRpb24gZGF0YScsXG4gICAgICAgICAgZXhhbXBsZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZW1haWw6ICd0aGVyYXBpc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiAnRHIuIFNhcmFoJyxcbiAgICAgICAgICAgIGxhc3ROYW1lOiAnSm9obnNvbicsXG4gICAgICAgICAgICBsaWNlbnNlTnVtYmVyOiAnTElDMTIzNDU2JyxcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uczogWydhbnhpZXR5JywgJ2RlcHJlc3Npb24nXSxcbiAgICAgICAgICAgIGVkdWNhdGlvbjogJ1BoRCBpbiBQc3ljaG9sb2d5JyxcbiAgICAgICAgICAgIGV4cGVyaWVuY2U6ICc1IHllYXJzJyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgICAgZmlsZVR5cGVzOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdKU09OIHN0cmluZyBtYXBwaW5nIGZpbGUgaW5kaWNlcyB0byB0eXBlcycsXG4gICAgICAgICAgZXhhbXBsZTogSlNPTi5zdHJpbmdpZnkoeyAnMCc6ICdsaWNlbnNlJywgJzEnOiAnZGlwbG9tYScgfSksXG4gICAgICAgIH0sXG4gICAgICAgIGZpbGVzOiB7XG4gICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBmb3JtYXQ6ICdiaW5hcnknLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdTdXBwb3J0aW5nIGRvY3VtZW50cyAoUERGLCBET0MsIERPQ1gsIEpQRywgUE5HKScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDEsXG4gICAgZGVzY3JpcHRpb246ICdBcHBsaWNhdGlvbiBzdWJtaXR0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBzdWNjZXNzOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgICAgICBtZXNzYWdlOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGFwcGxpY2F0aW9uSWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgdXBsb2FkZWRGaWxlczoge1xuICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICBmaWxlTmFtZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICB1cmw6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaUJhZFJlcXVlc3RSZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnSW52YWxpZCBhcHBsaWNhdGlvbiBkYXRhIG9yIGZpbGUgZm9ybWF0JyB9KVxuICBAQXBpSW50ZXJuYWxTZXJ2ZXJFcnJvclJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdGYWlsZWQgdG8gcHJvY2VzcyBhcHBsaWNhdGlvbicgfSlcbiAgQFBvc3QoJ2FwcGx5LXdpdGgtZG9jdW1lbnRzJylcbiAgQFVzZUludGVyY2VwdG9ycyhcbiAgICBGaWxlc0ludGVyY2VwdG9yKCdmaWxlcycsIDEwLCB7XG4gICAgICBsaW1pdHM6IHsgZmlsZVNpemU6IDEwICogMTAyNCAqIDEwMjQgfSwgLy8gMTBNQiBsaW1pdCBwZXIgZmlsZVxuICAgICAgZmlsZUZpbHRlcjogKHJlcSwgZmlsZSwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgY29uc3QgYWxsb3dlZE1pbWVUeXBlcyA9IFtcbiAgICAgICAgICAnYXBwbGljYXRpb24vcGRmJyxcbiAgICAgICAgICAnaW1hZ2UvanBlZycsXG4gICAgICAgICAgJ2ltYWdlL3BuZycsXG4gICAgICAgICAgJ2ltYWdlL2pwZycsXG4gICAgICAgICAgJ2FwcGxpY2F0aW9uL21zd29yZCcsXG4gICAgICAgICAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50JyxcbiAgICAgICAgXTtcblxuICAgICAgICBpZiAoYWxsb3dlZE1pbWVUeXBlcy5pbmNsdWRlcyhmaWxlLm1pbWV0eXBlKSkge1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdJbnZhbGlkIGZpbGUgdHlwZScpLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSksXG4gIClcbiAgYXN5bmMgYXBwbHlXaXRoRG9jdW1lbnRzKFxuICAgIEBCb2R5KCdhcHBsaWNhdGlvbkRhdGFKc29uJykgYXBwbGljYXRpb25EYXRhSnNvbjogc3RyaW5nLFxuICAgIEBCb2R5KCdmaWxlVHlwZXMnKSBmaWxlVHlwZXM6IHN0cmluZyxcbiAgICBAVXBsb2FkZWRGaWxlcygpIGZpbGVzOiBFeHByZXNzLk11bHRlci5GaWxlW10sXG4gICk6IFByb21pc2U8e1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIGFwcGxpY2F0aW9uSWQ6IHN0cmluZztcbiAgICB1cGxvYWRlZEZpbGVzOiBBcnJheTx7IGlkOiBzdHJpbmc7IGZpbGVOYW1lOiBzdHJpbmc7IHVybDogc3RyaW5nIH0+O1xuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFBhcnNlIGFwcGxpY2F0aW9uIGRhdGEgZnJvbSBmb3JtXG4gICAgICBsZXQgYXBwbGljYXRpb25EYXRhOiBUaGVyYXBpc3RBcHBsaWNhdGlvbkNyZWF0ZUR0bztcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghYXBwbGljYXRpb25EYXRhSnNvbikge1xuICAgICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKFxuICAgICAgICAgICAgJ0FwcGxpY2F0aW9uIGRhdGEgaXMgbWlzc2luZy4gUGxlYXNlIGVuc3VyZSB0aGUgZm9ybSBpcyBzdWJtaXR0ZWQgY29ycmVjdGx5LicsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgYXBwbGljYXRpb25EYXRhSnNvbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgJ0V4cGVjdGVkIHN0cmluZyBidXQgcmVjZWl2ZWQ6JyxcbiAgICAgICAgICAgIHR5cGVvZiBhcHBsaWNhdGlvbkRhdGFKc29uLFxuICAgICAgICAgICAgYXBwbGljYXRpb25EYXRhSnNvbixcbiAgICAgICAgICApO1xuICAgICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKFxuICAgICAgICAgICAgJ0FwcGxpY2F0aW9uIGRhdGEgbXVzdCBiZSBhIEpTT04gc3RyaW5nLicsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFwcGxpY2F0aW9uRGF0YSA9IEpTT04ucGFyc2UoYXBwbGljYXRpb25EYXRhSnNvbik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdKU09OIHBhcnNpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdSYXcgYXBwbGljYXRpb25EYXRhSnNvbjonLCBhcHBsaWNhdGlvbkRhdGFKc29uKTtcbiAgICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oXG4gICAgICAgICAgJ0ludmFsaWQgYXBwbGljYXRpb24gZGF0YSBmb3JtYXQuIFBsZWFzZSBjaGVjayB0aGF0IGFsbCBmb3JtIGZpZWxkcyBhcmUgZmlsbGVkIGNvcnJlY3RseS4nLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBGb3IgcHVibGljIGFwcGxpY2F0aW9ucywgY3JlYXRlIGEgdGVtcG9yYXJ5IHVzZXIgSURcbiAgICAgIGNvbnN0IHRlbXBVc2VySWQgPSBgdGVtcF8ke0RhdGUubm93KCl9XyR7YXBwbGljYXRpb25EYXRhLmVtYWlsLnJlcGxhY2UoJ0AnLCAnX2F0XycpfWA7XG4gICAgICBjb25zdCBhcHBsaWNhdGlvbldpdGhVc2VySWQgPSB7IC4uLmFwcGxpY2F0aW9uRGF0YSwgdXNlcklkOiB0ZW1wVXNlcklkIH07XG5cbiAgICAgIC8vIFBhcnNlIGZpbGUgdHlwZSBtYXBwaW5nc1xuICAgICAgbGV0IGZpbGVUeXBlTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgICBpZiAoZmlsZVR5cGVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZmlsZVR5cGVNYXAgPSBKU09OLnBhcnNlKGZpbGVUeXBlcyk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBmaWxlVHlwZXMgSlNPTiwgcHJvY2VlZGluZyB3aXRob3V0IG1hcHBpbmcnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBVc2UgY29uc29saWRhdGVkIHNlcnZpY2UgbWV0aG9kIHRvIGNyZWF0ZSBhcHBsaWNhdGlvbiBhbmQgdXBsb2FkIGRvY3VtZW50cyBpbiBvbmUgdHJhbnNhY3Rpb25cbiAgICAgIGNvbnN0IHJlc3VsdCA9XG4gICAgICAgIGF3YWl0IHRoaXMudGhlcmFwaXN0QXV0aFNlcnZpY2UuY3JlYXRlQXBwbGljYXRpb25XaXRoRG9jdW1lbnRzKFxuICAgICAgICAgIGFwcGxpY2F0aW9uV2l0aFVzZXJJZCxcbiAgICAgICAgICBmaWxlcyB8fCBbXSxcbiAgICAgICAgICBmaWxlVHlwZU1hcCxcbiAgICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ0FwcGxpY2F0aW9uIHN1Ym1pdHRlZCBzdWNjZXNzZnVsbHkgd2l0aCBkb2N1bWVudHMnLFxuICAgICAgICBhcHBsaWNhdGlvbklkOiByZXN1bHQuYXBwbGljYXRpb24udXNlcklkLFxuICAgICAgICB1cGxvYWRlZEZpbGVzOiByZXN1bHQudXBsb2FkZWRGaWxlcyxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN1Ym1pdHRpbmcgYXBwbGljYXRpb24gd2l0aCBkb2N1bWVudHM6JywgZXJyb3IpO1xuXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBCYWRSZXF1ZXN0RXhjZXB0aW9uKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cblxuICAgICAgLy8gRW5oYW5jZWQgZXJyb3IgaGFuZGxpbmcgd2l0aCBzcGVjaWZpYyBlcnJvciB0eXBlc1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuXG4gICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdlbWFpbCBhbHJlYWR5IGV4aXN0cycpKSB7XG4gICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKFxuICAgICAgICAgICdBbiBhcHBsaWNhdGlvbiB3aXRoIHRoaXMgZW1haWwgYWRkcmVzcyBhbHJlYWR5IGV4aXN0cy4gUGxlYXNlIGNoZWNrIHlvdXIgZW1haWwgb3IgY29udGFjdCBzdXBwb3J0LicsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZpbGUgdXBsb2FkJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oXG4gICAgICAgICAgJ09uZSBvciBtb3JlIGZpbGVzIGZhaWxlZCB0byB1cGxvYWQuIFBsZWFzZSBjaGVjayBmaWxlIGZvcm1hdHMgYW5kIHNpemVzLicsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ3ZhbGlkYXRpb24nKSkge1xuICAgICAgICB0aHJvdyBuZXcgQmFkUmVxdWVzdEV4Y2VwdGlvbihcbiAgICAgICAgICAnQXBwbGljYXRpb24gZGF0YSB2YWxpZGF0aW9uIGZhaWxlZC4gUGxlYXNlIGNoZWNrIGFsbCByZXF1aXJlZCBmaWVsZHMuJyxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEludGVybmFsU2VydmVyRXJyb3JFeGNlcHRpb24oXG4gICAgICAgICdGYWlsZWQgdG8gc3VibWl0IGFwcGxpY2F0aW9uIHdpdGggZG9jdW1lbnRzLiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3Qgc3VwcG9ydC4nLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBAVXNlR3VhcmRzKEp3dEF1dGhHdWFyZClcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0dldCB0aGVyYXBpc3QgcHJvZmlsZScsXG4gICAgZGVzY3JpcHRpb246ICdSZXRyaWV2ZSB0aGUgYXV0aGVudGljYXRlZCB0aGVyYXBpc3QgdXNlciBwcm9maWxlIGluZm9ybWF0aW9uJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ1RoZXJhcGlzdCBwcm9maWxlIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGlkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGVtYWlsOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGZpcnN0TmFtZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBsYXN0TmFtZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICByb2xlOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGxpY2Vuc2VOdW1iZXI6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb25zOiB7IHR5cGU6ICdhcnJheScsIGl0ZW1zOiB7IHR5cGU6ICdzdHJpbmcnIH0gfSxcbiAgICAgICAgYXBwcm92YWxTdGF0dXM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgcHJvZmlsZUNvbXBsZXRlOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgICAgICBjcmVhdGVkQXQ6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVVuYXV0aG9yaXplZFJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdJbnZhbGlkIG9yIG1pc3NpbmcgYXV0aGVudGljYXRpb24gdG9rZW4nIH0pXG4gIEBHZXQoJ3Byb2ZpbGUnKVxuICBhc3luYyBnZXRQcm9maWxlKEBDdXJyZW50VXNlcklkKCkgdXNlcklkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy50aGVyYXBpc3RBdXRoU2VydmljZS5nZXRUaGVyYXBpc3RQcm9maWxlKHVzZXJJZCk7XG4gIH1cblxuICAvLyBBZG1pbi1vbmx5IGVuZHBvaW50cyBmb3IgbWFuYWdpbmcgdGhlcmFwaXN0IGFwcGxpY2F0aW9uc1xuICBAR2V0KCdhcHBsaWNhdGlvbnMnKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnR2V0IGFsbCB0aGVyYXBpc3QgYXBwbGljYXRpb25zIChBZG1pbiBvbmx5KScsXG4gICAgZGVzY3JpcHRpb246ICdSZXRyaWV2ZSBhbGwgdGhlcmFwaXN0IGFwcGxpY2F0aW9ucyB3aXRoIG9wdGlvbmFsIGZpbHRlcmluZyBhbmQgcGFnaW5hdGlvbi4gQWRtaW4gYWNjZXNzIHJlcXVpcmVkLicsXG4gIH0pXG4gIEBBcGlRdWVyeSh7IG5hbWU6ICdzdGF0dXMnLCByZXF1aXJlZDogZmFsc2UsIGRlc2NyaXB0aW9uOiAnRmlsdGVyIGJ5IGFwcGxpY2F0aW9uIHN0YXR1cycgfSlcbiAgQEFwaVF1ZXJ5KHsgbmFtZTogJ3BhZ2UnLCByZXF1aXJlZDogZmFsc2UsIGRlc2NyaXB0aW9uOiAnUGFnZSBudW1iZXIgZm9yIHBhZ2luYXRpb24nIH0pXG4gIEBBcGlRdWVyeSh7IG5hbWU6ICdsaW1pdCcsIHJlcXVpcmVkOiBmYWxzZSwgZGVzY3JpcHRpb246ICdOdW1iZXIgb2YgaXRlbXMgcGVyIHBhZ2UnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdBcHBsaWNhdGlvbnMgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgYXBwbGljYXRpb25zOiB7XG4gICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGlkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICAgIGVtYWlsOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICAgIGZpcnN0TmFtZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICBsYXN0TmFtZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICBzdGF0dXM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgc3VibWl0dGVkQXQ6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgdG90YWxDb3VudDogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICBwYWdlOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgIHRvdGFsUGFnZXM6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVVuYXV0aG9yaXplZFJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdJbnZhbGlkIG9yIG1pc3NpbmcgYXV0aGVudGljYXRpb24gdG9rZW4nIH0pXG4gIEBBcGlGb3JiaWRkZW5SZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KVxuICBAQXBpSW50ZXJuYWxTZXJ2ZXJFcnJvclJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdGYWlsZWQgdG8gZmV0Y2ggYXBwbGljYXRpb25zJyB9KVxuICBAVXNlR3VhcmRzKEp3dEF1dGhHdWFyZClcbiAgYXN5bmMgZ2V0QWxsQXBwbGljYXRpb25zKFxuICAgIEBDdXJyZW50VXNlclJvbGUoKSByb2xlOiBzdHJpbmcsXG4gICAgQFF1ZXJ5KCdzdGF0dXMnKSBzdGF0dXM/OiBzdHJpbmcsXG4gICAgQFF1ZXJ5KCdwYWdlJykgcGFnZT86IG51bWJlcixcbiAgICBAUXVlcnkoJ2xpbWl0JykgbGltaXQ/OiBudW1iZXIsXG4gICk6IFByb21pc2U8e1xuICAgIGFwcGxpY2F0aW9uczogVGhlcmFwaXN0QXBwbGljYXRpb25SZXNwb25zZVtdO1xuICAgIHRvdGFsQ291bnQ6IG51bWJlcjtcbiAgICBwYWdlOiBudW1iZXI7XG4gICAgdG90YWxQYWdlczogbnVtYmVyO1xuICB9PiB7XG4gICAgaWYgKHJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5FeGNlcHRpb24oJ0FkbWluIGFjY2VzcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFnZU51bSA9IHBhZ2UgPyBNYXRoLm1heCgxLCBwYWdlKSA6IDE7XG4gICAgICBjb25zdCBsaW1pdE51bSA9IGxpbWl0ID8gTWF0aC5taW4oTWF0aC5tYXgoMSwgbGltaXQpLCAxMDApIDogMTA7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudGhlcmFwaXN0QXV0aFNlcnZpY2UuZ2V0QWxsQXBwbGljYXRpb25zKHtcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBwYWdlOiBwYWdlTnVtLFxuICAgICAgICBsaW1pdDogbGltaXROdW0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYXBwbGljYXRpb25zOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uKCdGYWlsZWQgdG8gZmV0Y2ggYXBwbGljYXRpb25zJyk7XG4gICAgfVxuICB9XG5cbiAgQEdldCgnYXBwbGljYXRpb25zLzppZCcpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdHZXQgdGhlcmFwaXN0IGFwcGxpY2F0aW9uIGJ5IElEIChBZG1pbiBvbmx5KScsXG4gICAgZGVzY3JpcHRpb246ICdSZXRyaWV2ZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIHRoZXJhcGlzdCBhcHBsaWNhdGlvbi4gQWRtaW4gYWNjZXNzIHJlcXVpcmVkLicsXG4gIH0pXG4gIEBBcGlQYXJhbSh7IG5hbWU6ICdpZCcsIGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gSUQnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdBcHBsaWNhdGlvbiByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBlbWFpbDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBmaXJzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgbGFzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgbGljZW5zZU51bWJlcjogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBzcGVjaWFsaXphdGlvbnM6IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHsgdHlwZTogJ3N0cmluZycgfSB9LFxuICAgICAgICBlZHVjYXRpb246IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgZXhwZXJpZW5jZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBzdGF0dXM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgc3VibWl0dGVkQXQ6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgICAgcmV2aWV3ZWRBdDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJywgbnVsbGFibGU6IHRydWUgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVVuYXV0aG9yaXplZFJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdJbnZhbGlkIG9yIG1pc3NpbmcgYXV0aGVudGljYXRpb24gdG9rZW4nIH0pXG4gIEBBcGlGb3JiaWRkZW5SZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KVxuICBAQXBpTm90Rm91bmRSZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gbm90IGZvdW5kJyB9KVxuICBAQXBpSW50ZXJuYWxTZXJ2ZXJFcnJvclJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdGYWlsZWQgdG8gZmV0Y2ggYXBwbGljYXRpb24nIH0pXG4gIEBVc2VHdWFyZHMoSnd0QXV0aEd1YXJkKVxuICBhc3luYyBnZXRBcHBsaWNhdGlvbkJ5SWQoXG4gICAgQEN1cnJlbnRVc2VyUm9sZSgpIHJvbGU6IHN0cmluZyxcbiAgICBAUGFyYW0oJ2lkJykgaWQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxUaGVyYXBpc3RBcHBsaWNhdGlvblJlc3BvbnNlPiB7XG4gICAgaWYgKHJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5FeGNlcHRpb24oJ0FkbWluIGFjY2VzcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgYXBwbGljYXRpb24gPVxuICAgICAgICBhd2FpdCB0aGlzLnRoZXJhcGlzdEF1dGhTZXJ2aWNlLmdldEFwcGxpY2F0aW9uQnlJZChpZCk7XG5cbiAgICAgIGlmICghYXBwbGljYXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCdBcHBsaWNhdGlvbiBub3QgZm91bmQnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhcHBsaWNhdGlvbjonLCBlcnJvcik7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uKCdGYWlsZWQgdG8gZmV0Y2ggYXBwbGljYXRpb24nKTtcbiAgICB9XG4gIH1cblxuICBAUHV0KCdhcHBsaWNhdGlvbnMvOmlkL3N0YXR1cycpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdVcGRhdGUgdGhlcmFwaXN0IGFwcGxpY2F0aW9uIHN0YXR1cyAoQWRtaW4gb25seSknLFxuICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlIHRoZSBzdGF0dXMgb2YgYSB0aGVyYXBpc3QgYXBwbGljYXRpb24gKGFwcHJvdmUsIHJlamVjdCwgZXRjLikuIEFkbWluIGFjY2VzcyByZXF1aXJlZC4nLFxuICB9KVxuICBAQXBpUGFyYW0oeyBuYW1lOiAnaWQnLCBkZXNjcmlwdGlvbjogJ0FwcGxpY2F0aW9uIElEJyB9KVxuICBAQXBpQm9keSh7XG4gICAgZGVzY3JpcHRpb246ICdTdGF0dXMgdXBkYXRlIGRhdGEnLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICByZXF1aXJlZDogWydzdGF0dXMnXSxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgc3RhdHVzOiB7IHR5cGU6ICdzdHJpbmcnLCBlbnVtOiBbJ2FwcHJvdmVkJywgJ3JlamVjdGVkJywgJ3BlbmRpbmcnXSwgZXhhbXBsZTogJ2FwcHJvdmVkJyB9LFxuICAgICAgICBub3RlczogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdPcHRpb25hbCBub3RlcyBhYm91dCB0aGUgZGVjaXNpb24nIH0sXG4gICAgICAgIHJldmlld2VyQ29tbWVudHM6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnQ29tbWVudHMgZnJvbSB0aGUgcmV2aWV3aW5nIGFkbWluJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gc3RhdHVzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBzdWNjZXNzOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgICAgICBtZXNzYWdlOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgZW1haWw6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0dlbmVyYXRlZCBjcmVkZW50aWFscyBmb3IgYXBwcm92ZWQgYXBwbGljYXRpb25zJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVVuYXV0aG9yaXplZFJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdJbnZhbGlkIG9yIG1pc3NpbmcgYXV0aGVudGljYXRpb24gdG9rZW4nIH0pXG4gIEBBcGlGb3JiaWRkZW5SZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KVxuICBAQXBpTm90Rm91bmRSZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gbm90IGZvdW5kJyB9KVxuICBAQXBpSW50ZXJuYWxTZXJ2ZXJFcnJvclJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdGYWlsZWQgdG8gdXBkYXRlIGFwcGxpY2F0aW9uIHN0YXR1cycgfSlcbiAgQFVzZUd1YXJkcyhKd3RBdXRoR3VhcmQpXG4gIGFzeW5jIHVwZGF0ZUFwcGxpY2F0aW9uU3RhdHVzKFxuICAgIEBDdXJyZW50VXNlclJvbGUoKSByb2xlOiBzdHJpbmcsXG4gICAgQFBhcmFtKCdpZCcpIGlkOiBzdHJpbmcsXG4gICAgQEJvZHkoKSB1cGRhdGVEYXRhOiBBcHBsaWNhdGlvblN0YXR1c1VwZGF0ZUR0byxcbiAgKTogUHJvbWlzZTx7XG4gICAgc3VjY2VzczogYm9vbGVhbjtcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgY3JlZGVudGlhbHM/OiB7IGVtYWlsOiBzdHJpbmc7IHBhc3N3b3JkOiBzdHJpbmcgfTtcbiAgfT4ge1xuICAgIGlmIChyb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXhjZXB0aW9uKCdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudGhlcmFwaXN0QXV0aFNlcnZpY2UudXBkYXRlQXBwbGljYXRpb25TdGF0dXMoXG4gICAgICAgIGlkLFxuICAgICAgICB1cGRhdGVEYXRhLFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgYXBwbGljYXRpb24gc3RhdHVzOicsIGVycm9yKTtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIE5vdEZvdW5kRXhjZXB0aW9uKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEludGVybmFsU2VydmVyRXJyb3JFeGNlcHRpb24oXG4gICAgICAgICdGYWlsZWQgdG8gdXBkYXRlIGFwcGxpY2F0aW9uIHN0YXR1cycsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIEBHZXQoJ2FwcGxpY2F0aW9ucy86aWQvZmlsZXMnKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnR2V0IHRoZXJhcGlzdCBhcHBsaWNhdGlvbiBmaWxlcyAoQWRtaW4gb25seSknLFxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmUgYWxsIHVwbG9hZGVkIGZpbGVzIGZvciBhIHNwZWNpZmljIHRoZXJhcGlzdCBhcHBsaWNhdGlvbi4gQWRtaW4gYWNjZXNzIHJlcXVpcmVkLicsXG4gIH0pXG4gIEBBcGlQYXJhbSh7IG5hbWU6ICdpZCcsIGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gSUQnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdBcHBsaWNhdGlvbiBmaWxlcyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICBpdGVtczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGlkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgZmlsZU5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICBmaWxlVXJsOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgdXBsb2FkZWRBdDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpVW5hdXRob3JpemVkUmVzcG9uc2UoeyBkZXNjcmlwdGlvbjogJ0ludmFsaWQgb3IgbWlzc2luZyBhdXRoZW50aWNhdGlvbiB0b2tlbicgfSlcbiAgQEFwaUZvcmJpZGRlblJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0pXG4gIEBBcGlOb3RGb3VuZFJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdBcHBsaWNhdGlvbiBvciBmaWxlcyBub3QgZm91bmQnIH0pXG4gIEBBcGlJbnRlcm5hbFNlcnZlckVycm9yUmVzcG9uc2UoeyBkZXNjcmlwdGlvbjogJ0ZhaWxlZCB0byBmZXRjaCBhcHBsaWNhdGlvbiBmaWxlcycgfSlcbiAgQFVzZUd1YXJkcyhKd3RBdXRoR3VhcmQpXG4gIGFzeW5jIGdldEFwcGxpY2F0aW9uRmlsZXMoXG4gICAgQEN1cnJlbnRVc2VyUm9sZSgpIHJvbGU6IHN0cmluZyxcbiAgICBAUGFyYW0oJ2lkJykgYXBwbGljYXRpb25JZDogc3RyaW5nLFxuICApOiBQcm9taXNlPFxuICAgIEFycmF5PHtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgICBmaWxlTmFtZTogc3RyaW5nO1xuICAgICAgZmlsZVVybDogc3RyaW5nO1xuICAgICAgdXBsb2FkZWRBdDogc3RyaW5nO1xuICAgIH0+XG4gID4ge1xuICAgIGlmIChyb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXhjZXB0aW9uKCdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGVzID1cbiAgICAgICAgYXdhaXQgdGhpcy50aGVyYXBpc3RBdXRoU2VydmljZS5nZXRBcHBsaWNhdGlvbkZpbGVzKGFwcGxpY2F0aW9uSWQpO1xuICAgICAgcmV0dXJuIGZpbGVzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhcHBsaWNhdGlvbiBmaWxlczonLCBlcnJvcik7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uKFxuICAgICAgICAnRmFpbGVkIHRvIGZldGNoIGFwcGxpY2F0aW9uIGZpbGVzJyxcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG4iXSwidmVyc2lvbiI6M30=