b1fa6768d1cfd5465ead668ff03a4f15
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const admin_service_1 = require("./admin.service");
const prisma_client_provider_1 = require("../providers/prisma-client.provider");
describe('AdminService - Comprehensive Testing', () => {
    let service;
    let prismaService;
    // Mock data structures
    const mockDate = new Date('2024-01-15T10:00:00Z');
    const mockProcessingDate = new Date('2024-01-16T14:30:00Z');
    const mockSuspensionDate = new Date('2024-01-14T09:00:00Z');
    const mockUser = {
        id: 'user-123',
        firstName: 'John',
        lastName: 'Doe',
        email: 'john.doe@example.com',
        role: 'client',
        isActive: true,
        isVerified: true,
        createdAt: mockDate,
        lastLoginAt: mockDate,
        suspendedAt: null,
        suspensionReason: null,
    };
    const mockAdmin = {
        id: 'admin-123',
        userId: 'admin-user-123',
        user: {
            firstName: 'Admin',
            lastName: 'User',
        },
    };
    const mockTherapist = {
        id: 'therapist-123',
        userId: 'therapist-user-123',
        status: 'pending',
        submissionDate: mockDate,
        processedByAdminId: null,
        processingDate: null,
        user: {
            id: 'therapist-user-123',
            firstName: 'Dr. Jane',
            lastName: 'Smith',
            email: 'jane.smith@example.com',
            createdAt: mockDate,
        },
        processedByAdmin: null,
    };
    const mockApprovedTherapist = {
        ...mockTherapist,
        status: 'approved',
        processedByAdminId: 'admin-123',
        processingDate: mockProcessingDate,
        processedByAdmin: mockAdmin,
    };
    const mockSuspendedUser = {
        ...mockUser,
        id: 'suspended-user-123',
        isActive: false,
        suspendedAt: mockSuspensionDate,
        suspendedBy: 'admin-123',
        suspensionReason: 'Inappropriate behavior',
    };
    const mockPost = {
        id: 'post-123',
        title: 'Sample Post',
        content: 'Post content here',
        userId: 'user-123',
        createdAt: mockDate,
        user: {
            id: 'user-123',
            firstName: 'John',
            lastName: 'Doe',
        },
        room: {
            name: 'General Discussion',
            roomGroup: {
                community: {
                    name: 'Mental Health Support',
                },
            },
        },
    };
    const mockComment = {
        id: 'comment-123',
        content: 'Comment content here',
        userId: 'user-123',
        postId: 'post-123',
        createdAt: mockDate,
        user: {
            id: 'user-123',
            firstName: 'John',
            lastName: 'Doe',
        },
        post: {
            title: 'Sample Post',
        },
    };
    const mockMatchHistory = {
        id: 'match-123',
        userId: 'user-123',
        therapistId: 'therapist-123',
        totalScore: 85.5,
        becameClient: true,
        wasViewed: true,
        wasContacted: true,
        createdAt: mockDate,
    };
    const mockMeeting = {
        id: 'meeting-123',
        title: 'Therapy Session',
        clientId: 'client-123',
        therapistId: 'therapist-123',
        createdAt: mockDate,
    };
    const mockCommunity = {
        id: 'community-123',
        name: 'Depression Support',
        createdAt: mockDate,
    };
    beforeEach(async () => {
        const mockPrismaService = {
            therapist: {
                findMany: jest.fn(),
                findUnique: jest.fn(),
                count: jest.fn(),
                update: jest.fn(),
            },
            user: {
                findMany: jest.fn(),
                findUnique: jest.fn(),
                count: jest.fn(),
                update: jest.fn(),
            },
            client: {
                count: jest.fn(),
            },
            community: {
                count: jest.fn(),
            },
            post: {
                findMany: jest.fn(),
                findUnique: jest.fn(),
                count: jest.fn(),
                delete: jest.fn(),
            },
            comment: {
                findMany: jest.fn(),
                findUnique: jest.fn(),
                delete: jest.fn(),
            },
            meeting: {
                count: jest.fn(),
            },
            matchHistory: {
                findMany: jest.fn(),
            },
            auditLog: {
                create: jest.fn(),
            },
            $transaction: jest.fn(),
        };
        const module = await testing_1.Test.createTestingModule({
            providers: [
                admin_service_1.AdminService,
                {
                    provide: prisma_client_provider_1.PrismaService,
                    useValue: mockPrismaService,
                },
            ],
        }).compile();
        service = module.get(admin_service_1.AdminService);
        prismaService = module.get(prisma_client_provider_1.PrismaService);
        // Mock Date constructor for consistent testing
        jest.useFakeTimers();
        jest.setSystemTime(mockDate);
    });
    afterEach(() => {
        jest.clearAllMocks();
        jest.useRealTimers();
    });
    it('should be defined', () => {
        expect(service).toBeDefined();
    });
    describe('Therapist Application Management', () => {
        describe('getAllTherapistApplications', () => {
            beforeEach(() => {
                prismaService.therapist.findMany.mockResolvedValue([mockTherapist]);
                prismaService.therapist.count.mockResolvedValue(1);
            });
            it('should retrieve all therapist applications with pagination', async () => {
                const params = { page: 1, limit: 10 };
                const result = await service.getAllTherapistApplications(params);
                expect(prismaService.therapist.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 0,
                    take: 10,
                    orderBy: { submissionDate: 'desc' },
                    include: {
                        user: {
                            select: {
                                id: true,
                                firstName: true,
                                lastName: true,
                                email: true,
                                createdAt: true,
                            },
                        },
                        processedByAdmin: {
                            include: {
                                user: {
                                    select: {
                                        firstName: true,
                                        lastName: true,
                                    },
                                },
                            },
                        },
                    },
                });
                expect(prismaService.therapist.count).toHaveBeenCalledWith({ where: {} });
                expect(result).toEqual({
                    applications: [mockTherapist],
                    totalCount: 1,
                    page: 1,
                    totalPages: 1,
                });
            });
            it('should filter by status when provided', async () => {
                const params = { status: 'pending', page: 1, limit: 10 };
                await service.getAllTherapistApplications(params);
                expect(prismaService.therapist.findMany).toHaveBeenCalledWith({
                    where: { status: 'pending' },
                    skip: 0,
                    take: 10,
                    orderBy: { submissionDate: 'desc' },
                    include: expect.any(Object),
                });
                expect(prismaService.therapist.count).toHaveBeenCalledWith({
                    where: { status: 'pending' },
                });
            });
            it('should handle pagination correctly', async () => {
                const params = { page: 3, limit: 5 };
                await service.getAllTherapistApplications(params);
                expect(prismaService.therapist.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 10, // (3-1) * 5
                    take: 5,
                    orderBy: { submissionDate: 'desc' },
                    include: expect.any(Object),
                });
            });
            it('should calculate total pages correctly', async () => {
                prismaService.therapist.count.mockResolvedValue(23);
                const params = { page: 1, limit: 10 };
                const result = await service.getAllTherapistApplications(params);
                expect(result.totalPages).toBe(3); // Math.ceil(23/10)
            });
            it('should handle empty results', async () => {
                prismaService.therapist.findMany.mockResolvedValue([]);
                prismaService.therapist.count.mockResolvedValue(0);
                const params = { page: 1, limit: 10 };
                const result = await service.getAllTherapistApplications(params);
                expect(result).toEqual({
                    applications: [],
                    totalCount: 0,
                    page: 1,
                    totalPages: 0,
                });
            });
            it('should handle database errors', async () => {
                const databaseError = new Error('Database connection failed');
                prismaService.therapist.findMany.mockRejectedValue(databaseError);
                const params = { page: 1, limit: 10 };
                await expect(service.getAllTherapistApplications(params)).rejects.toThrow('Database connection failed');
            });
        });
        describe('getTherapistApplication', () => {
            beforeEach(() => {
                prismaService.therapist.findUnique.mockResolvedValue(mockTherapist);
            });
            it('should retrieve specific therapist application', async () => {
                const result = await service.getTherapistApplication('therapist-user-123');
                expect(prismaService.therapist.findUnique).toHaveBeenCalledWith({
                    where: { userId: 'therapist-user-123' },
                    include: {
                        user: true,
                        processedByAdmin: {
                            include: {
                                user: {
                                    select: {
                                        firstName: true,
                                        lastName: true,
                                    },
                                },
                            },
                        },
                    },
                });
                expect(result).toEqual(mockTherapist);
            });
            it('should return null for non-existent application', async () => {
                prismaService.therapist.findUnique.mockResolvedValue(null);
                const result = await service.getTherapistApplication('non-existent');
                expect(result).toBeNull();
            });
            it('should handle database errors', async () => {
                const databaseError = new Error('Database connection failed');
                prismaService.therapist.findUnique.mockRejectedValue(databaseError);
                await expect(service.getTherapistApplication('therapist-user-123')).rejects.toThrow('Database connection failed');
            });
        });
        describe('approveTherapistApplication', () => {
            beforeEach(() => {
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        therapist: {
                            update: jest.fn().mockResolvedValue(mockApprovedTherapist),
                        },
                        user: {
                            update: jest.fn().mockResolvedValue({
                                ...mockUser,
                                role: 'therapist',
                            }),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    return callback(mockTx);
                });
            });
            it('should approve therapist application successfully', async () => {
                const result = await service.approveTherapistApplication('therapist-user-123', 'admin-123', 'Good qualifications');
                expect(prismaService.$transaction).toHaveBeenCalled();
                expect(result).toEqual({
                    success: true,
                    therapist: mockApprovedTherapist,
                });
            });
            it('should update therapist status in transaction', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        therapist: {
                            update: jest.fn().mockResolvedValue(mockApprovedTherapist),
                        },
                        user: {
                            update: jest.fn().mockResolvedValue({}),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.approveTherapistApplication('therapist-user-123', 'admin-123', 'Good qualifications');
                expect(capturedTx.therapist.update).toHaveBeenCalledWith({
                    where: { userId: 'therapist-user-123' },
                    data: {
                        status: 'approved',
                        processedByAdminId: 'admin-123',
                        processingDate: mockDate,
                    },
                });
            });
            it('should update user role to therapist', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        therapist: {
                            update: jest.fn().mockResolvedValue(mockApprovedTherapist),
                        },
                        user: {
                            update: jest.fn().mockResolvedValue({}),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.approveTherapistApplication('therapist-user-123', 'admin-123');
                expect(capturedTx.user.update).toHaveBeenCalledWith({
                    where: { id: 'therapist-user-123' },
                    data: { role: 'therapist' },
                });
            });
            it('should create audit log for approval', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        therapist: {
                            update: jest.fn().mockResolvedValue(mockApprovedTherapist),
                        },
                        user: {
                            update: jest.fn().mockResolvedValue({}),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.approveTherapistApplication('therapist-user-123', 'admin-123', 'Excellent credentials');
                expect(capturedTx.auditLog.create).toHaveBeenCalledWith({
                    data: {
                        userId: 'admin-123',
                        action: 'APPROVE_THERAPIST_APPLICATION',
                        entity: 'therapist',
                        entityId: 'therapist-user-123',
                        metadata: {
                            applicationId: 'therapist-user-123',
                            notes: 'Excellent credentials',
                            timestamp: mockDate.toISOString(),
                        },
                    },
                });
            });
            it('should handle approval without notes', async () => {
                await service.approveTherapistApplication('therapist-user-123', 'admin-123');
                expect(prismaService.$transaction).toHaveBeenCalled();
            });
            it('should handle transaction errors', async () => {
                const transactionError = new Error('Transaction failed');
                prismaService.$transaction.mockRejectedValue(transactionError);
                await expect(service.approveTherapistApplication('therapist-user-123', 'admin-123')).rejects.toThrow('Transaction failed');
            });
        });
        describe('rejectTherapistApplication', () => {
            beforeEach(() => {
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        therapist: {
                            update: jest.fn().mockResolvedValue({
                                ...mockTherapist,
                                status: 'rejected',
                                processedByAdminId: 'admin-123',
                                processingDate: mockDate,
                            }),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    return callback(mockTx);
                });
            });
            it('should reject therapist application successfully', async () => {
                const result = await service.rejectTherapistApplication('therapist-user-123', 'admin-123', 'Insufficient experience', 'Needs more clinical hours');
                expect(prismaService.$transaction).toHaveBeenCalled();
                expect(result).toEqual({
                    success: true,
                    therapist: expect.objectContaining({
                        status: 'rejected',
                        processedByAdminId: 'admin-123',
                    }),
                    reason: 'Insufficient experience',
                });
            });
            it('should update therapist status to rejected', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        therapist: {
                            update: jest.fn().mockResolvedValue({}),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.rejectTherapistApplication('therapist-user-123', 'admin-123', 'Insufficient experience');
                expect(capturedTx.therapist.update).toHaveBeenCalledWith({
                    where: { userId: 'therapist-user-123' },
                    data: {
                        status: 'rejected',
                        processedByAdminId: 'admin-123',
                        processingDate: mockDate,
                    },
                });
            });
            it('should create audit log for rejection', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        therapist: {
                            update: jest.fn().mockResolvedValue({}),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.rejectTherapistApplication('therapist-user-123', 'admin-123', 'Insufficient experience', 'Needs more training');
                expect(capturedTx.auditLog.create).toHaveBeenCalledWith({
                    data: {
                        userId: 'admin-123',
                        action: 'REJECT_THERAPIST_APPLICATION',
                        entity: 'therapist',
                        entityId: 'therapist-user-123',
                        metadata: {
                            applicationId: 'therapist-user-123',
                            reason: 'Insufficient experience',
                            notes: 'Needs more training',
                            timestamp: mockDate.toISOString(),
                        },
                    },
                });
            });
            it('should handle rejection without notes', async () => {
                await service.rejectTherapistApplication('therapist-user-123', 'admin-123', 'Insufficient experience');
                expect(prismaService.$transaction).toHaveBeenCalled();
            });
            it('should handle transaction errors', async () => {
                const transactionError = new Error('Transaction failed');
                prismaService.$transaction.mockRejectedValue(transactionError);
                await expect(service.rejectTherapistApplication('therapist-user-123', 'admin-123', 'Insufficient experience')).rejects.toThrow('Transaction failed');
            });
        });
    });
    describe('User Management', () => {
        describe('getAllUsers', () => {
            beforeEach(() => {
                prismaService.user.findMany.mockResolvedValue([mockUser]);
                prismaService.user.count.mockResolvedValue(1);
            });
            it('should retrieve all users with pagination', async () => {
                const params = { page: 1, limit: 10 };
                const result = await service.getAllUsers(params);
                expect(prismaService.user.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    select: {
                        id: true,
                        firstName: true,
                        lastName: true,
                        email: true,
                        role: true,
                        isActive: true,
                        isVerified: true,
                        createdAt: true,
                        lastLoginAt: true,
                        suspendedAt: true,
                        suspensionReason: true,
                    },
                });
                expect(result).toEqual({
                    users: [mockUser],
                    totalCount: 1,
                    page: 1,
                    totalPages: 1,
                });
            });
            it('should filter by role when provided', async () => {
                const params = { role: 'therapist', page: 1, limit: 10 };
                await service.getAllUsers(params);
                expect(prismaService.user.findMany).toHaveBeenCalledWith({
                    where: { role: 'therapist' },
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    select: expect.any(Object),
                });
            });
            it('should filter by search term', async () => {
                const params = { search: 'john', page: 1, limit: 10 };
                await service.getAllUsers(params);
                expect(prismaService.user.findMany).toHaveBeenCalledWith({
                    where: {
                        OR: [
                            { firstName: { contains: 'john', mode: 'insensitive' } },
                            { lastName: { contains: 'john', mode: 'insensitive' } },
                            { email: { contains: 'john', mode: 'insensitive' } },
                        ],
                    },
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    select: expect.any(Object),
                });
            });
            it('should filter by active status', async () => {
                const params = { status: 'active', page: 1, limit: 10 };
                await service.getAllUsers(params);
                expect(prismaService.user.findMany).toHaveBeenCalledWith({
                    where: { isActive: true },
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    select: expect.any(Object),
                });
            });
            it('should filter by inactive status', async () => {
                const params = { status: 'inactive', page: 1, limit: 10 };
                await service.getAllUsers(params);
                expect(prismaService.user.findMany).toHaveBeenCalledWith({
                    where: { isActive: false },
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    select: expect.any(Object),
                });
            });
            it('should filter by suspended status', async () => {
                const params = { status: 'suspended', page: 1, limit: 10 };
                await service.getAllUsers(params);
                expect(prismaService.user.findMany).toHaveBeenCalledWith({
                    where: { suspendedAt: { not: null } },
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    select: expect.any(Object),
                });
            });
            it('should sort by specified field and order', async () => {
                const params = {
                    page: 1,
                    limit: 10,
                    sortBy: 'firstName',
                    sortOrder: 'asc',
                };
                await service.getAllUsers(params);
                expect(prismaService.user.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 0,
                    take: 10,
                    orderBy: { firstName: 'asc' },
                    select: expect.any(Object),
                });
            });
            it('should use default sort when invalid sortBy provided', async () => {
                const params = {
                    page: 1,
                    limit: 10,
                    sortBy: 'invalidField',
                    sortOrder: 'asc',
                };
                await service.getAllUsers(params);
                expect(prismaService.user.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    select: expect.any(Object),
                });
            });
            it('should combine multiple filters', async () => {
                const params = {
                    role: 'client',
                    search: 'john',
                    status: 'active',
                    page: 1,
                    limit: 10,
                };
                await service.getAllUsers(params);
                expect(prismaService.user.findMany).toHaveBeenCalledWith({
                    where: {
                        role: 'client',
                        isActive: true,
                        OR: [
                            { firstName: { contains: 'john', mode: 'insensitive' } },
                            { lastName: { contains: 'john', mode: 'insensitive' } },
                            { email: { contains: 'john', mode: 'insensitive' } },
                        ],
                    },
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    select: expect.any(Object),
                });
            });
            it('should handle database errors', async () => {
                const databaseError = new Error('Database connection failed');
                prismaService.user.findMany.mockRejectedValue(databaseError);
                const params = { page: 1, limit: 10 };
                await expect(service.getAllUsers(params)).rejects.toThrow('Database connection failed');
            });
        });
        describe('getUser', () => {
            beforeEach(() => {
                prismaService.user.findUnique.mockResolvedValue({
                    ...mockUser,
                    client: { id: 'client-123' },
                    therapist: null,
                    admin: null,
                    moderator: null,
                });
            });
            it('should retrieve specific user with relations', async () => {
                const result = await service.getUser('user-123');
                expect(prismaService.user.findUnique).toHaveBeenCalledWith({
                    where: { id: 'user-123' },
                    include: {
                        client: true,
                        therapist: true,
                        admin: true,
                        moderator: true,
                    },
                });
                expect(result).toEqual(expect.objectContaining({
                    id: 'user-123',
                    client: { id: 'client-123' },
                }));
            });
            it('should return null for non-existent user', async () => {
                prismaService.user.findUnique.mockResolvedValue(null);
                const result = await service.getUser('non-existent');
                expect(result).toBeNull();
            });
            it('should handle database errors', async () => {
                const databaseError = new Error('Database connection failed');
                prismaService.user.findUnique.mockRejectedValue(databaseError);
                await expect(service.getUser('user-123')).rejects.toThrow('Database connection failed');
            });
        });
        describe('suspendUser', () => {
            beforeEach(() => {
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        user: {
                            update: jest.fn().mockResolvedValue(mockSuspendedUser),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    return callback(mockTx);
                });
            });
            it('should suspend user successfully', async () => {
                const result = await service.suspendUser('user-123', 'admin-123', 'Inappropriate behavior', 7);
                expect(prismaService.$transaction).toHaveBeenCalled();
                expect(result).toEqual({
                    success: true,
                    user: mockSuspendedUser,
                });
            });
            it('should suspend user with duration', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        user: {
                            update: jest.fn().mockResolvedValue(mockSuspendedUser),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.suspendUser('user-123', 'admin-123', 'Inappropriate behavior', 7);
                expect(capturedTx.user.update).toHaveBeenCalledWith({
                    where: { id: 'user-123' },
                    data: {
                        suspendedAt: mockDate,
                        suspendedBy: 'admin-123',
                        suspensionReason: 'Inappropriate behavior',
                        isActive: false,
                    },
                });
            });
            it('should suspend user without duration (permanent)', async () => {
                await service.suspendUser('user-123', 'admin-123', 'Serious violation');
                expect(prismaService.$transaction).toHaveBeenCalled();
            });
            it('should create audit log for suspension', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        user: {
                            update: jest.fn().mockResolvedValue(mockSuspendedUser),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.suspendUser('user-123', 'admin-123', 'Inappropriate behavior', 7);
                const expectedSuspensionEnd = new Date(mockDate.getTime() + 7 * 24 * 60 * 60 * 1000);
                expect(capturedTx.auditLog.create).toHaveBeenCalledWith({
                    data: {
                        userId: 'admin-123',
                        action: 'SUSPEND_USER',
                        entity: 'user',
                        entityId: 'user-123',
                        metadata: {
                            userId: 'user-123',
                            reason: 'Inappropriate behavior',
                            duration: 7,
                            suspensionEnd: expectedSuspensionEnd.toISOString(),
                            timestamp: mockDate.toISOString(),
                        },
                    },
                });
            });
            it('should handle transaction errors', async () => {
                const transactionError = new Error('Transaction failed');
                prismaService.$transaction.mockRejectedValue(transactionError);
                await expect(service.suspendUser('user-123', 'admin-123', 'reason')).rejects.toThrow('Transaction failed');
            });
        });
        describe('unsuspendUser', () => {
            beforeEach(() => {
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        user: {
                            update: jest.fn().mockResolvedValue({
                                ...mockUser,
                                suspendedAt: null,
                                suspendedBy: null,
                                suspensionReason: null,
                                isActive: true,
                            }),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    return callback(mockTx);
                });
            });
            it('should unsuspend user successfully', async () => {
                const result = await service.unsuspendUser('user-123', 'admin-123');
                expect(prismaService.$transaction).toHaveBeenCalled();
                expect(result).toEqual({
                    success: true,
                    user: expect.objectContaining({
                        suspendedAt: null,
                        suspendedBy: null,
                        suspensionReason: null,
                        isActive: true,
                    }),
                });
            });
            it('should clear suspension data', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        user: {
                            update: jest.fn().mockResolvedValue({}),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.unsuspendUser('user-123', 'admin-123');
                expect(capturedTx.user.update).toHaveBeenCalledWith({
                    where: { id: 'user-123' },
                    data: {
                        suspendedAt: null,
                        suspendedBy: null,
                        suspensionReason: null,
                        isActive: true,
                    },
                });
            });
            it('should create audit log for unsuspension', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        user: {
                            update: jest.fn().mockResolvedValue({}),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.unsuspendUser('user-123', 'admin-123');
                expect(capturedTx.auditLog.create).toHaveBeenCalledWith({
                    data: {
                        userId: 'admin-123',
                        action: 'UNSUSPEND_USER',
                        entity: 'user',
                        entityId: 'user-123',
                        metadata: {
                            userId: 'user-123',
                            timestamp: mockDate.toISOString(),
                        },
                    },
                });
            });
            it('should handle transaction errors', async () => {
                const transactionError = new Error('Transaction failed');
                prismaService.$transaction.mockRejectedValue(transactionError);
                await expect(service.unsuspendUser('user-123', 'admin-123')).rejects.toThrow('Transaction failed');
            });
        });
    });
    describe('Platform Analytics', () => {
        describe('getPlatformOverview', () => {
            beforeEach(() => {
                prismaService.user.count.mockResolvedValue(100);
                prismaService.client.count.mockResolvedValue(80);
                prismaService.therapist.count
                    .mockResolvedValueOnce(15) // approved therapists
                    .mockResolvedValueOnce(5); // pending applications
                prismaService.community.count.mockResolvedValue(12);
                prismaService.post.count.mockResolvedValue(500);
                prismaService.meeting.count.mockResolvedValue(200);
                prismaService.user.findMany.mockResolvedValue([
                    { ...mockUser, role: 'client' },
                    { ...mockUser, id: 'user-124', role: 'therapist' },
                ]);
            });
            it('should retrieve platform overview successfully', async () => {
                const result = await service.getPlatformOverview();
                expect(result).toEqual({
                    overview: {
                        totalUsers: 100,
                        totalClients: 80,
                        totalTherapists: 15,
                        pendingApplications: 5,
                        totalCommunities: 12,
                        totalPosts: 500,
                        totalSessions: 200,
                    },
                    recentActivity: [
                        { ...mockUser, role: 'client' },
                        { ...mockUser, id: 'user-124', role: 'therapist' },
                    ],
                });
            });
            it('should make correct database queries', async () => {
                await service.getPlatformOverview();
                expect(prismaService.user.count).toHaveBeenCalledWith();
                expect(prismaService.client.count).toHaveBeenCalledWith();
                expect(prismaService.therapist.count).toHaveBeenCalledWith({
                    where: { status: 'approved' },
                });
                expect(prismaService.therapist.count).toHaveBeenCalledWith({
                    where: { status: 'pending' },
                });
                expect(prismaService.community.count).toHaveBeenCalledWith();
                expect(prismaService.post.count).toHaveBeenCalledWith();
                expect(prismaService.meeting.count).toHaveBeenCalledWith();
                expect(prismaService.user.findMany).toHaveBeenCalledWith({
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    select: {
                        id: true,
                        firstName: true,
                        lastName: true,
                        role: true,
                        createdAt: true,
                    },
                });
            });
            it('should handle empty platform data', async () => {
                prismaService.user.count.mockResolvedValue(0);
                prismaService.client.count.mockResolvedValue(0);
                prismaService.therapist.count.mockResolvedValue(0);
                prismaService.community.count.mockResolvedValue(0);
                prismaService.post.count.mockResolvedValue(0);
                prismaService.meeting.count.mockResolvedValue(0);
                prismaService.user.findMany.mockResolvedValue([]);
                const result = await service.getPlatformOverview();
                expect(result.overview.totalUsers).toBe(0);
                expect(result.recentActivity).toEqual([]);
            });
            it('should handle database errors', async () => {
                const databaseError = new Error('Database connection failed');
                prismaService.user.count.mockRejectedValue(databaseError);
                await expect(service.getPlatformOverview()).rejects.toThrow('Database connection failed');
            });
        });
        describe('getMatchingPerformance', () => {
            beforeEach(() => {
                prismaService.matchHistory.findMany.mockResolvedValue([
                    mockMatchHistory,
                    {
                        ...mockMatchHistory,
                        id: 'match-124',
                        totalScore: 75.0,
                        becameClient: false,
                        wasViewed: true,
                        wasContacted: false,
                    },
                ]);
            });
            it('should retrieve matching performance with default date range', async () => {
                const result = await service.getMatchingPerformance();
                const expectedStart = new Date(mockDate.getTime() - 30 * 24 * 60 * 60 * 1000);
                const expectedEnd = mockDate;
                expect(prismaService.matchHistory.findMany).toHaveBeenCalledWith({
                    where: {
                        createdAt: {
                            gte: expectedStart,
                            lte: expectedEnd,
                        },
                    },
                });
                expect(result).toEqual({
                    period: { start: expectedStart, end: expectedEnd },
                    metrics: {
                        totalRecommendations: 2,
                        successfulMatches: 1,
                        viewedRecommendations: 2,
                        contactedTherapists: 1,
                        averageMatchScore: 80.25, // (85.5 + 75.0) / 2
                        conversionRate: 50.0, // 1/2 * 100
                        clickThroughRate: 100.0, // 2/2 * 100
                    },
                });
            });
            it('should retrieve matching performance with custom date range', async () => {
                const startDate = '2024-01-01';
                const endDate = '2024-01-31';
                await service.getMatchingPerformance(startDate, endDate);
                expect(prismaService.matchHistory.findMany).toHaveBeenCalledWith({
                    where: {
                        createdAt: {
                            gte: new Date(startDate),
                            lte: new Date(endDate),
                        },
                    },
                });
            });
            it('should handle empty matching data', async () => {
                prismaService.matchHistory.findMany.mockResolvedValue([]);
                const result = await service.getMatchingPerformance();
                expect(result.metrics).toEqual({
                    totalRecommendations: 0,
                    successfulMatches: 0,
                    viewedRecommendations: 0,
                    contactedTherapists: 0,
                    averageMatchScore: 0,
                    conversionRate: 0,
                    clickThroughRate: 0,
                });
            });
            it('should calculate metrics correctly for various scenarios', async () => {
                const testMatchData = [
                    { totalScore: 90, becameClient: true, wasViewed: true, wasContacted: true },
                    { totalScore: 80, becameClient: false, wasViewed: true, wasContacted: false },
                    { totalScore: 70, becameClient: false, wasViewed: false, wasContacted: false },
                    { totalScore: 85, becameClient: true, wasViewed: true, wasContacted: true },
                ];
                prismaService.matchHistory.findMany.mockResolvedValue(testMatchData);
                const result = await service.getMatchingPerformance();
                expect(result.metrics).toEqual({
                    totalRecommendations: 4,
                    successfulMatches: 2, // 2 became clients
                    viewedRecommendations: 3, // 3 were viewed
                    contactedTherapists: 2, // 2 were contacted
                    averageMatchScore: 81.25, // (90+80+70+85)/4
                    conversionRate: 50.0, // 2/4 * 100
                    clickThroughRate: 75.0, // 3/4 * 100
                });
            });
            it('should handle database errors', async () => {
                const databaseError = new Error('Database connection failed');
                prismaService.matchHistory.findMany.mockRejectedValue(databaseError);
                await expect(service.getMatchingPerformance()).rejects.toThrow('Database connection failed');
            });
        });
    });
    describe('Content Moderation', () => {
        describe('getFlaggedContent', () => {
            beforeEach(() => {
                prismaService.post.findMany.mockResolvedValue([mockPost]);
                prismaService.comment.findMany.mockResolvedValue([mockComment]);
            });
            it('should retrieve flagged content with pagination', async () => {
                const params = { page: 1, limit: 10 };
                const result = await service.getFlaggedContent(params);
                expect(prismaService.post.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    include: {
                        user: {
                            select: {
                                id: true,
                                firstName: true,
                                lastName: true,
                            },
                        },
                        room: {
                            select: {
                                name: true,
                                roomGroup: {
                                    select: {
                                        community: {
                                            select: {
                                                name: true,
                                            },
                                        },
                                    },
                                },
                            },
                        },
                    },
                });
                expect(prismaService.comment.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    include: {
                        user: {
                            select: {
                                id: true,
                                firstName: true,
                                lastName: true,
                            },
                        },
                        post: {
                            select: {
                                title: true,
                            },
                        },
                    },
                });
                expect(result).toEqual({
                    posts: [mockPost],
                    comments: [mockComment],
                    page: 1,
                    totalItems: 2,
                });
            });
            it('should filter by content type - posts only', async () => {
                const params = { type: 'post', page: 1, limit: 10 };
                await service.getFlaggedContent(params);
                expect(prismaService.post.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    include: expect.any(Object),
                });
                expect(prismaService.comment.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 0,
                    take: 0, // Should be 0 for posts only
                    orderBy: { createdAt: 'desc' },
                    include: expect.any(Object),
                });
            });
            it('should filter by content type - comments only', async () => {
                const params = { type: 'comment', page: 1, limit: 10 };
                await service.getFlaggedContent(params);
                expect(prismaService.post.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 0,
                    take: 0, // Should be 0 for comments only
                    orderBy: { createdAt: 'desc' },
                    include: expect.any(Object),
                });
                expect(prismaService.comment.findMany).toHaveBeenCalledWith({
                    where: {},
                    skip: 0,
                    take: 10,
                    orderBy: { createdAt: 'desc' },
                    include: expect.any(Object),
                });
            });
            it('should handle pagination correctly', async () => {
                const params = { page: 3, limit: 5 };
                await service.getFlaggedContent(params);
                expect(prismaService.post.findMany).toHaveBeenCalledWith(expect.objectContaining({
                    skip: 10, // (3-1) * 5
                    take: 5,
                }));
            });
            it('should handle empty results', async () => {
                prismaService.post.findMany.mockResolvedValue([]);
                prismaService.comment.findMany.mockResolvedValue([]);
                const params = { page: 1, limit: 10 };
                const result = await service.getFlaggedContent(params);
                expect(result).toEqual({
                    posts: [],
                    comments: [],
                    page: 1,
                    totalItems: 0,
                });
            });
            it('should handle database errors', async () => {
                const databaseError = new Error('Database connection failed');
                prismaService.post.findMany.mockRejectedValue(databaseError);
                const params = { page: 1, limit: 10 };
                await expect(service.getFlaggedContent(params)).rejects.toThrow('Database connection failed');
            });
        });
        describe('moderateContent', () => {
            beforeEach(() => {
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        post: {
                            delete: jest.fn().mockResolvedValue(mockPost),
                            findUnique: jest.fn().mockResolvedValue(mockPost),
                        },
                        comment: {
                            delete: jest.fn().mockResolvedValue(mockComment),
                            findUnique: jest.fn().mockResolvedValue(mockComment),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    return callback(mockTx);
                });
            });
            it('should remove post successfully', async () => {
                const result = await service.moderateContent('post', 'post-123', 'admin-123', 'remove', 'Inappropriate content');
                expect(prismaService.$transaction).toHaveBeenCalled();
                expect(result).toEqual({
                    success: true,
                    action: 'remove',
                    moderatedContent: mockPost,
                });
            });
            it('should approve post successfully', async () => {
                const result = await service.moderateContent('post', 'post-123', 'admin-123', 'approve', 'Content is acceptable');
                expect(result).toEqual({
                    success: true,
                    action: 'approve',
                    moderatedContent: mockPost,
                });
            });
            it('should flag post successfully', async () => {
                const result = await service.moderateContent('post', 'post-123', 'admin-123', 'flag', 'Needs review');
                expect(result).toEqual({
                    success: true,
                    action: 'flag',
                    moderatedContent: mockPost,
                });
            });
            it('should remove comment successfully', async () => {
                const result = await service.moderateContent('comment', 'comment-123', 'admin-123', 'remove', 'Spam content');
                expect(result).toEqual({
                    success: true,
                    action: 'remove',
                    moderatedContent: mockComment,
                });
            });
            it('should create audit log for post moderation', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        post: {
                            delete: jest.fn().mockResolvedValue(mockPost),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.moderateContent('post', 'post-123', 'admin-123', 'remove', 'Inappropriate content');
                expect(capturedTx.auditLog.create).toHaveBeenCalledWith({
                    data: {
                        userId: 'admin-123',
                        action: 'MODERATE_POST',
                        entity: 'post',
                        entityId: 'post-123',
                        metadata: {
                            contentId: 'post-123',
                            contentType: 'post',
                            moderationAction: 'remove',
                            reason: 'Inappropriate content',
                            timestamp: mockDate.toISOString(),
                        },
                    },
                });
            });
            it('should create audit log for comment moderation', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        comment: {
                            delete: jest.fn().mockResolvedValue(mockComment),
                        },
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                await service.moderateContent('comment', 'comment-123', 'admin-123', 'remove', 'Spam content');
                expect(capturedTx.auditLog.create).toHaveBeenCalledWith({
                    data: {
                        userId: 'admin-123',
                        action: 'MODERATE_COMMENT',
                        entity: 'comment',
                        entityId: 'comment-123',
                        metadata: {
                            contentId: 'comment-123',
                            contentType: 'comment',
                            moderationAction: 'remove',
                            reason: 'Spam content',
                            timestamp: mockDate.toISOString(),
                        },
                    },
                });
            });
            it('should handle moderation without reason', async () => {
                await service.moderateContent('post', 'post-123', 'admin-123', 'approve');
                expect(prismaService.$transaction).toHaveBeenCalled();
            });
            it('should handle transaction errors', async () => {
                const transactionError = new Error('Transaction failed');
                prismaService.$transaction.mockRejectedValue(transactionError);
                await expect(service.moderateContent('post', 'post-123', 'admin-123', 'remove', 'Inappropriate content')).rejects.toThrow('Transaction failed');
            });
            it('should handle unknown content types gracefully', async () => {
                let capturedTx;
                prismaService.$transaction.mockImplementation(async (callback) => {
                    const mockTx = {
                        auditLog: {
                            create: jest.fn().mockResolvedValue({}),
                        },
                    };
                    capturedTx = mockTx;
                    return callback(mockTx);
                });
                const result = await service.moderateContent('unknown', 'content-123', 'admin-123', 'remove', 'Unknown content type');
                expect(result).toEqual({
                    success: true,
                    action: 'remove',
                    moderatedContent: undefined,
                });
            });
        });
    });
    describe('Edge Cases and Error Handling', () => {
        it('should handle concurrent therapist application processing', async () => {
            const approvePromise = service.approveTherapistApplication('therapist-123', 'admin-123');
            const rejectPromise = service.rejectTherapistApplication('therapist-123', 'admin-124', 'Insufficient experience');
            // Mock different transaction outcomes
            prismaService.$transaction
                .mockResolvedValueOnce({ success: true, therapist: mockApprovedTherapist })
                .mockRejectedValueOnce(new Error('Record already processed'));
            const results = await Promise.allSettled([approvePromise, rejectPromise]);
            expect(results[0].status).toBe('fulfilled');
            expect(results[1].status).toBe('rejected');
        });
        it('should handle very large user datasets efficiently', async () => {
            const largeUserList = Array.from({ length: 10000 }, (_, i) => ({
                ...mockUser,
                id: `user-${i}`,
                email: `user${i}@example.com`,
            }));
            prismaService.user.findMany.mockResolvedValue(largeUserList.slice(0, 100));
            prismaService.user.count.mockResolvedValue(10000);
            const params = { page: 1, limit: 100 };
            const startTime = Date.now();
            const result = await service.getAllUsers(params);
            const endTime = Date.now();
            expect(result.users).toHaveLength(100);
            expect(result.totalCount).toBe(10000);
            expect(result.totalPages).toBe(100);
            expect(endTime - startTime).toBeLessThan(1000); // Should complete within 1 second
        });
        it('should handle special characters in search queries', async () => {
            const specialCharSearch = "John O'Connor & Co. <script>";
            const params = { search: specialCharSearch, page: 1, limit: 10 };
            await service.getAllUsers(params);
            expect(prismaService.user.findMany).toHaveBeenCalledWith({
                where: {
                    OR: [
                        { firstName: { contains: specialCharSearch, mode: 'insensitive' } },
                        { lastName: { contains: specialCharSearch, mode: 'insensitive' } },
                        { email: { contains: specialCharSearch, mode: 'insensitive' } },
                    ],
                },
                skip: 0,
                take: 10,
                orderBy: { createdAt: 'desc' },
                select: expect.any(Object),
            });
        });
        it('should handle invalid date ranges in matching performance', async () => {
            const invalidStartDate = 'invalid-date';
            const invalidEndDate = 'another-invalid-date';
            await service.getMatchingPerformance(invalidStartDate, invalidEndDate);
            // Should handle gracefully and create Date objects
            expect(prismaService.matchHistory.findMany).toHaveBeenCalledWith({
                where: {
                    createdAt: {
                        gte: new Date(invalidStartDate), // Will be Invalid Date
                        lte: new Date(invalidEndDate), // Will be Invalid Date
                    },
                },
            });
        });
        it('should handle null/undefined values in platform overview', async () => {
            prismaService.user.count.mockResolvedValue(null);
            prismaService.client.count.mockResolvedValue(undefined);
            prismaService.therapist.count.mockResolvedValue(0);
            prismaService.user.findMany.mockResolvedValue(null);
            const result = await service.getPlatformOverview();
            expect(result.overview.totalUsers).toBeNull();
            expect(result.overview.totalClients).toBeUndefined();
            expect(result.recentActivity).toBeNull();
        });
        it('should handle database timeouts gracefully', async () => {
            const timeoutError = new Error('Connection timeout');
            timeoutError.name = 'TimeoutError';
            prismaService.user.findMany.mockRejectedValue(timeoutError);
            const params = { page: 1, limit: 10 };
            await expect(service.getAllUsers(params)).rejects.toThrow('Connection timeout');
        });
        it('should handle malformed therapy application data', async () => {
            const malformedTherapist = {
                id: null,
                userId: undefined,
                status: 'invalid_status',
                submissionDate: 'invalid_date',
                user: null,
            };
            prismaService.therapist.findMany.mockResolvedValue([malformedTherapist]);
            prismaService.therapist.count.mockResolvedValue(1);
            const params = { page: 1, limit: 10 };
            const result = await service.getAllTherapistApplications(params);
            expect(result.applications).toEqual([malformedTherapist]);
        });
    });
    describe('Performance and Scalability', () => {
        it('should handle bulk user operations efficiently', async () => {
            const bulkUserIds = Array.from({ length: 100 }, (_, i) => `user-${i}`);
            // Mock parallel processing
            const promises = bulkUserIds.map((userId) => {
                prismaService.user.findUnique.mockResolvedValueOnce({
                    ...mockUser,
                    id: userId,
                });
                return service.getUser(userId);
            });
            const startTime = Date.now();
            const results = await Promise.all(promises);
            const endTime = Date.now();
            expect(results).toHaveLength(100);
            expect(endTime - startTime).toBeLessThan(2000); // Should complete within 2 seconds
        });
        it('should handle high-volume content moderation efficiently', async () => {
            const bulkModerationPromises = Array.from({ length: 50 }, (_, i) => {
                prismaService.$transaction.mockResolvedValueOnce({
                    success: true,
                    action: 'remove',
                    moderatedContent: { id: `content-${i}` },
                });
                return service.moderateContent('post', `post-${i}`, 'admin-123', 'remove', 'Bulk moderation');
            });
            const startTime = Date.now();
            const results = await Promise.all(bulkModerationPromises);
            const endTime = Date.now();
            expect(results).toHaveLength(50);
            expect(results.every(r => r.success)).toBe(true);
            expect(endTime - startTime).toBeLessThan(3000); // Should complete within 3 seconds
        });
        it('should maintain performance with complex filtering', async () => {
            const complexParams = {
                role: 'client',
                search: 'john smith depression anxiety',
                status: 'active',
                sortBy: 'lastName',
                sortOrder: 'asc',
                page: 50,
                limit: 100,
            };
            const largeFilteredResult = Array.from({ length: 100 }, (_, i) => ({
                ...mockUser,
                id: `user-${i}`,
                lastName: `Smith${i}`,
            }));
            prismaService.user.findMany.mockResolvedValue(largeFilteredResult);
            prismaService.user.count.mockResolvedValue(5000);
            const startTime = Date.now();
            const result = await service.getAllUsers(complexParams);
            const endTime = Date.now();
            expect(result.users).toHaveLength(100);
            expect(result.totalCount).toBe(5000);
            expect(endTime - startTime).toBeLessThan(1000); // Should complete within 1 second
        });
    });
    describe('Data Integrity and Audit', () => {
        it('should ensure audit logs are created for all administrative actions', async () => {
            const auditActions = [
                () => service.approveTherapistApplication('therapist-123', 'admin-123'),
                () => service.rejectTherapistApplication('therapist-123', 'admin-123', 'reason'),
                () => service.suspendUser('user-123', 'admin-123', 'reason'),
                () => service.unsuspendUser('user-123', 'admin-123'),
                () => service.moderateContent('post', 'post-123', 'admin-123', 'remove'),
            ];
            let auditLogCallCount = 0;
            prismaService.$transaction.mockImplementation(async (callback) => {
                const mockTx = {
                    therapist: { update: jest.fn().mockResolvedValue({}) },
                    user: { update: jest.fn().mockResolvedValue({}) },
                    post: { delete: jest.fn().mockResolvedValue({}) },
                    auditLog: {
                        create: jest.fn().mockImplementation(() => {
                            auditLogCallCount++;
                            return Promise.resolve({});
                        }),
                    },
                };
                return callback(mockTx);
            });
            await Promise.all(auditActions.map(action => action()));
            expect(auditLogCallCount).toBe(5); // One audit log per action
        });
        it('should ensure proper transaction rollback on failures', async () => {
            let transactionCallCount = 0;
            prismaService.$transaction.mockImplementation(async (callback) => {
                transactionCallCount++;
                const mockTx = {
                    therapist: {
                        update: jest.fn().mockRejectedValue(new Error('Update failed')),
                    },
                    user: {
                        update: jest.fn().mockResolvedValue({}),
                    },
                    auditLog: {
                        create: jest.fn().mockResolvedValue({}),
                    },
                };
                return callback(mockTx);
            });
            await expect(service.approveTherapistApplication('therapist-123', 'admin-123')).rejects.toThrow('Update failed');
            expect(transactionCallCount).toBe(1);
        });
        it('should maintain data consistency across related entities', async () => {
            let capturedTx;
            prismaService.$transaction.mockImplementation(async (callback) => {
                const mockTx = {
                    therapist: {
                        update: jest.fn().mockResolvedValue(mockApprovedTherapist),
                    },
                    user: {
                        update: jest.fn().mockResolvedValue({
                            ...mockUser,
                            role: 'therapist',
                        }),
                    },
                    auditLog: {
                        create: jest.fn().mockResolvedValue({}),
                    },
                };
                capturedTx = mockTx;
                return callback(mockTx);
            });
            await service.approveTherapistApplication('therapist-123', 'admin-123');
            // Verify both therapist and user entities are updated consistently
            expect(capturedTx.therapist.update).toHaveBeenCalledWith({
                where: { userId: 'therapist-123' },
                data: expect.objectContaining({
                    status: 'approved',
                    processedByAdminId: 'admin-123',
                }),
            });
            expect(capturedTx.user.update).toHaveBeenCalledWith({
                where: { id: 'therapist-123' },
                data: { role: 'therapist' },
            });
        });
        it('should validate admin permissions through audit trails', async () => {
            const adminActions = [
                { action: 'APPROVE_THERAPIST_APPLICATION', entity: 'therapist' },
                { action: 'REJECT_THERAPIST_APPLICATION', entity: 'therapist' },
                { action: 'SUSPEND_USER', entity: 'user' },
                { action: 'UNSUSPEND_USER', entity: 'user' },
                { action: 'MODERATE_POST', entity: 'post' },
                { action: 'MODERATE_COMMENT', entity: 'comment' },
            ];
            const capturedAuditLogs = [];
            prismaService.$transaction.mockImplementation(async (callback) => {
                const mockTx = {
                    therapist: { update: jest.fn().mockResolvedValue({}) },
                    user: { update: jest.fn().mockResolvedValue({}) },
                    post: { delete: jest.fn().mockResolvedValue({}) },
                    comment: { delete: jest.fn().mockResolvedValue({}) },
                    auditLog: {
                        create: jest.fn().mockImplementation((data) => {
                            capturedAuditLogs.push(data);
                            return Promise.resolve({});
                        }),
                    },
                };
                return callback(mockTx);
            });
            await service.approveTherapistApplication('therapist-123', 'admin-123');
            await service.rejectTherapistApplication('therapist-124', 'admin-123', 'reason');
            await service.suspendUser('user-123', 'admin-123', 'reason');
            await service.unsuspendUser('user-124', 'admin-123');
            await service.moderateContent('post', 'post-123', 'admin-123', 'remove');
            await service.moderateContent('comment', 'comment-123', 'admin-123', 'remove');
            expect(capturedAuditLogs).toHaveLength(6);
            capturedAuditLogs.forEach((log, index) => {
                expect(log.data.userId).toBe('admin-123');
                expect(log.data.action).toBe(adminActions[index].action);
                expect(log.data.entity).toBe(adminActions[index].entity);
                expect(log.data.metadata.timestamp).toBeDefined();
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2FkbWluL2FkbWluLnNlcnZpY2UuY29tcHJlaGVuc2l2ZS5zcGVjLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsNkNBQXNEO0FBQ3RELG1EQUErQztBQUMvQyxnRkFBb0U7QUFJcEUsUUFBUSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtJQUNwRCxJQUFJLE9BQXFCLENBQUM7SUFDMUIsSUFBSSxhQUF5QyxDQUFDO0lBRTlDLHVCQUF1QjtJQUN2QixNQUFNLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBQ2xELE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUM1RCxNQUFNLGtCQUFrQixHQUFHLElBQUksSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFFNUQsTUFBTSxRQUFRLEdBQUc7UUFDZixFQUFFLEVBQUUsVUFBVTtRQUNkLFNBQVMsRUFBRSxNQUFNO1FBQ2pCLFFBQVEsRUFBRSxLQUFLO1FBQ2YsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QixJQUFJLEVBQUUsUUFBUTtRQUNkLFFBQVEsRUFBRSxJQUFJO1FBQ2QsVUFBVSxFQUFFLElBQUk7UUFDaEIsU0FBUyxFQUFFLFFBQVE7UUFDbkIsV0FBVyxFQUFFLFFBQVE7UUFDckIsV0FBVyxFQUFFLElBQUk7UUFDakIsZ0JBQWdCLEVBQUUsSUFBSTtLQUN2QixDQUFDO0lBRUYsTUFBTSxTQUFTLEdBQUc7UUFDaEIsRUFBRSxFQUFFLFdBQVc7UUFDZixNQUFNLEVBQUUsZ0JBQWdCO1FBQ3hCLElBQUksRUFBRTtZQUNKLFNBQVMsRUFBRSxPQUFPO1lBQ2xCLFFBQVEsRUFBRSxNQUFNO1NBQ2pCO0tBQ0YsQ0FBQztJQUVGLE1BQU0sYUFBYSxHQUFHO1FBQ3BCLEVBQUUsRUFBRSxlQUFlO1FBQ25CLE1BQU0sRUFBRSxvQkFBb0I7UUFDNUIsTUFBTSxFQUFF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Q0FBQyxDQUFDO2dCQUN6RCxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDcEQsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2FkbWluL2FkbWluLnNlcnZpY2UuY29tcHJlaGVuc2l2ZS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgQWRtaW5TZXJ2aWNlIH0gZnJvbSAnLi9hZG1pbi5zZXJ2aWNlJztcbmltcG9ydCB7IFByaXNtYVNlcnZpY2UgfSBmcm9tICcuLi9wcm92aWRlcnMvcHJpc21hLWNsaWVudC5wcm92aWRlcic7XG5pbXBvcnQgeyBOb3RGb3VuZEV4Y2VwdGlvbiB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuZGVzY3JpYmUoJ0FkbWluU2VydmljZSAtIENvbXByZWhlbnNpdmUgVGVzdGluZycsICgpID0+IHtcbiAgbGV0IHNlcnZpY2U6IEFkbWluU2VydmljZTtcbiAgbGV0IHByaXNtYVNlcnZpY2U6IGplc3QuTW9ja2VkPFByaXNtYVNlcnZpY2U+O1xuXG4gIC8vIE1vY2sgZGF0YSBzdHJ1Y3R1cmVzXG4gIGNvbnN0IG1vY2tEYXRlID0gbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyk7XG4gIGNvbnN0IG1vY2tQcm9jZXNzaW5nRGF0ZSA9IG5ldyBEYXRlKCcyMDI0LTAxLTE2VDE0OjMwOjAwWicpO1xuICBjb25zdCBtb2NrU3VzcGVuc2lvbkRhdGUgPSBuZXcgRGF0ZSgnMjAyNC0wMS0xNFQwOTowMDowMFonKTtcblxuICBjb25zdCBtb2NrVXNlciA9IHtcbiAgICBpZDogJ3VzZXItMTIzJyxcbiAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgZW1haWw6ICdqb2huLmRvZUBleGFtcGxlLmNvbScsXG4gICAgcm9sZTogJ2NsaWVudCcsXG4gICAgaXNBY3RpdmU6IHRydWUsXG4gICAgaXNWZXJpZmllZDogdHJ1ZSxcbiAgICBjcmVhdGVkQXQ6IG1vY2tEYXRlLFxuICAgIGxhc3RMb2dpbkF0OiBtb2NrRGF0ZSxcbiAgICBzdXNwZW5kZWRBdDogbnVsbCxcbiAgICBzdXNwZW5zaW9uUmVhc29uOiBudWxsLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tBZG1pbiA9IHtcbiAgICBpZDogJ2FkbWluLTEyMycsXG4gICAgdXNlcklkOiAnYWRtaW4tdXNlci0xMjMnLFxuICAgIHVzZXI6IHtcbiAgICAgIGZpcnN0TmFtZTogJ0FkbWluJyxcbiAgICAgIGxhc3ROYW1lOiAnVXNlcicsXG4gICAgfSxcbiAgfTtcblxuICBjb25zdCBtb2NrVGhlcmFwaXN0ID0ge1xuICAgIGlkOiAndGhlcmFwaXN0LTEyMycsXG4gICAgdXNlcklkOiAndGhlcmFwaXN0LXVzZXItMTIzJyxcbiAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICBzdWJtaXNzaW9uRGF0ZTogbW9ja0RhdGUsXG4gICAgcHJvY2Vzc2VkQnlBZG1pbklkOiBudWxsLFxuICAgIHByb2Nlc3NpbmdEYXRlOiBudWxsLFxuICAgIHVzZXI6IHtcbiAgICAgIGlkOiAndGhlcmFwaXN0LXVzZXItMTIzJyxcbiAgICAgIGZpcnN0TmFtZTogJ0RyLiBKYW5lJyxcbiAgICAgIGxhc3ROYW1lOiAnU21pdGgnLFxuICAgICAgZW1haWw6ICdqYW5lLnNtaXRoQGV4YW1wbGUuY29tJyxcbiAgICAgIGNyZWF0ZWRBdDogbW9ja0RhdGUsXG4gICAgfSxcbiAgICBwcm9jZXNzZWRCeUFkbWluOiBudWxsLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tBcHByb3ZlZFRoZXJhcGlzdCA9IHtcbiAgICAuLi5tb2NrVGhlcmFwaXN0LFxuICAgIHN0YXR1czogJ2FwcHJvdmVkJyxcbiAgICBwcm9jZXNzZWRCeUFkbWluSWQ6ICdhZG1pbi0xMjMnLFxuICAgIHByb2Nlc3NpbmdEYXRlOiBtb2NrUHJvY2Vzc2luZ0RhdGUsXG4gICAgcHJvY2Vzc2VkQnlBZG1pbjogbW9ja0FkbWluLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tTdXNwZW5kZWRVc2VyID0ge1xuICAgIC4uLm1vY2tVc2VyLFxuICAgIGlkOiAnc3VzcGVuZGVkLXVzZXItMTIzJyxcbiAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgc3VzcGVuZGVkQXQ6IG1vY2tTdXNwZW5zaW9uRGF0ZSxcbiAgICBzdXNwZW5kZWRCeTogJ2FkbWluLTEyMycsXG4gICAgc3VzcGVuc2lvblJlYXNvbjogJ0luYXBwcm9wcmlhdGUgYmVoYXZpb3InLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tQb3N0ID0ge1xuICAgIGlkOiAncG9zdC0xMjMnLFxuICAgIHRpdGxlOiAnU2FtcGxlIFBvc3QnLFxuICAgIGNvbnRlbnQ6ICdQb3N0IGNvbnRlbnQgaGVyZScsXG4gICAgdXNlcklkOiAndXNlci0xMjMnLFxuICAgIGNyZWF0ZWRBdDogbW9ja0RhdGUsXG4gICAgdXNlcjoge1xuICAgICAgaWQ6ICd1c2VyLTEyMycsXG4gICAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgIGxhc3ROYW1lOiAnRG9lJyxcbiAgICB9LFxuICAgIHJvb206IHtcbiAgICAgIG5hbWU6ICdHZW5lcmFsIERpc2N1c3Npb24nLFxuICAgICAgcm9vbUdyb3VwOiB7XG4gICAgICAgIGNvbW11bml0eToge1xuICAgICAgICAgIG5hbWU6ICdNZW50YWwgSGVhbHRoIFN1cHBvcnQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0IG1vY2tDb21tZW50ID0ge1xuICAgIGlkOiAnY29tbWVudC0xMjMnLFxuICAgIGNvbnRlbnQ6ICdDb21tZW50IGNvbnRlbnQgaGVyZScsXG4gICAgdXNlcklkOiAndXNlci0xMjMnLFxuICAgIHBvc3RJZDogJ3Bvc3QtMTIzJyxcbiAgICBjcmVhdGVkQXQ6IG1vY2tEYXRlLFxuICAgIHVzZXI6IHtcbiAgICAgIGlkOiAndXNlci0xMjMnLFxuICAgICAgZmlyc3ROYW1lOiAnSm9obicsXG4gICAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgfSxcbiAgICBwb3N0OiB7XG4gICAgICB0aXRsZTogJ1NhbXBsZSBQb3N0JyxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0IG1vY2tNYXRjaEhpc3RvcnkgPSB7XG4gICAgaWQ6ICdtYXRjaC0xMjMnLFxuICAgIHVzZXJJZDogJ3VzZXItMTIzJyxcbiAgICB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC0xMjMnLFxuICAgIHRvdGFsU2NvcmU6IDg1LjUsXG4gICAgYmVjYW1lQ2xpZW50OiB0cnVlLFxuICAgIHdhc1ZpZXdlZDogdHJ1ZSxcbiAgICB3YXNDb250YWN0ZWQ6IHRydWUsXG4gICAgY3JlYXRlZEF0OiBtb2NrRGF0ZSxcbiAgfTtcblxuICBjb25zdCBtb2NrTWVldGluZyA9IHtcbiAgICBpZDogJ21lZXRpbmctMTIzJyxcbiAgICB0aXRsZTogJ1RoZXJhcHkgU2Vzc2lvbicsXG4gICAgY2xpZW50SWQ6ICdjbGllbnQtMTIzJyxcbiAgICB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC0xMjMnLFxuICAgIGNyZWF0ZWRBdDogbW9ja0RhdGUsXG4gIH07XG5cbiAgY29uc3QgbW9ja0NvbW11bml0eSA9IHtcbiAgICBpZDogJ2NvbW11bml0eS0xMjMnLFxuICAgIG5hbWU6ICdEZXByZXNzaW9uIFN1cHBvcnQnLFxuICAgIGNyZWF0ZWRBdDogbW9ja0RhdGUsXG4gIH07XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1ByaXNtYVNlcnZpY2UgPSB7XG4gICAgICB0aGVyYXBpc3Q6IHtcbiAgICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcbiAgICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxuICAgICAgICBjb3VudDogamVzdC5mbigpLFxuICAgICAgICB1cGRhdGU6IGplc3QuZm4oKSxcbiAgICAgIH0sXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGZpbmRNYW55OiBqZXN0LmZuKCksXG4gICAgICAgIGZpbmRVbmlxdWU6IGplc3QuZm4oKSxcbiAgICAgICAgY291bnQ6IGplc3QuZm4oKSxcbiAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgICAgY2xpZW50OiB7XG4gICAgICAgIGNvdW50OiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgICAgY29tbXVuaXR5OiB7XG4gICAgICAgIGNvdW50OiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgICAgcG9zdDoge1xuICAgICAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgICAgICBmaW5kVW5pcXVlOiBqZXN0LmZuKCksXG4gICAgICAgIGNvdW50OiBqZXN0LmZuKCksXG4gICAgICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICAgICAgfSxcbiAgICAgIGNvbW1lbnQ6IHtcbiAgICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcbiAgICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxuICAgICAgICBkZWxldGU6IGplc3QuZm4oKSxcbiAgICAgIH0sXG4gICAgICBtZWV0aW5nOiB7XG4gICAgICAgIGNvdW50OiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgICAgbWF0Y2hIaXN0b3J5OiB7XG4gICAgICAgIGZpbmRNYW55OiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgICAgYXVkaXRMb2c6IHtcbiAgICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgICAgJHRyYW5zYWN0aW9uOiBqZXN0LmZuKCksXG4gICAgfTtcblxuICAgIGNvbnN0IG1vZHVsZTogVGVzdGluZ01vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgQWRtaW5TZXJ2aWNlLFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogUHJpc21hU2VydmljZSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1ByaXNtYVNlcnZpY2UsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pLmNvbXBpbGUoKTtcblxuICAgIHNlcnZpY2UgPSBtb2R1bGUuZ2V0PEFkbWluU2VydmljZT4oQWRtaW5TZXJ2aWNlKTtcbiAgICBwcmlzbWFTZXJ2aWNlID0gbW9kdWxlLmdldChQcmlzbWFTZXJ2aWNlKTtcblxuICAgIC8vIE1vY2sgRGF0ZSBjb25zdHJ1Y3RvciBmb3IgY29uc2lzdGVudCB0ZXN0aW5nXG4gICAgamVzdC51c2VGYWtlVGltZXJzKCk7XG4gICAgamVzdC5zZXRTeXN0ZW1UaW1lKG1vY2tEYXRlKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBqZXN0LnVzZVJlYWxUaW1lcnMoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBiZSBkZWZpbmVkJywgKCkgPT4ge1xuICAgIGV4cGVjdChzZXJ2aWNlKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnVGhlcmFwaXN0IEFwcGxpY2F0aW9uIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ2dldEFsbFRoZXJhcGlzdEFwcGxpY2F0aW9ucycsICgpID0+IHtcbiAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLnRoZXJhcGlzdC5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbbW9ja1RoZXJhcGlzdF0pO1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLnRoZXJhcGlzdC5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgxKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJldHJpZXZlIGFsbCB0aGVyYXBpc3QgYXBwbGljYXRpb25zIHdpdGggcGFnaW5hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBwYWdlOiAxLCBsaW1pdDogMTAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRBbGxUaGVyYXBpc3RBcHBsaWNhdGlvbnMocGFyYW1zKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS50aGVyYXBpc3QuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZToge30sXG4gICAgICAgICAgc2tpcDogMCxcbiAgICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgICBvcmRlckJ5OiB7IHN1Ym1pc3Npb25EYXRlOiAnZGVzYycgfSxcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvY2Vzc2VkQnlBZG1pbjoge1xuICAgICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnRoZXJhcGlzdC5jb3VudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyB3aGVyZToge30gfSk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgICAgYXBwbGljYXRpb25zOiBbbW9ja1RoZXJhcGlzdF0sXG4gICAgICAgICAgdG90YWxDb3VudDogMSxcbiAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgIHRvdGFsUGFnZXM6IDEsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IHN0YXR1cyB3aGVuIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7IHN0YXR1czogJ3BlbmRpbmcnLCBwYWdlOiAxLCBsaW1pdDogMTAgfTtcbiAgICAgICAgYXdhaXQgc2VydmljZS5nZXRBbGxUaGVyYXBpc3RBcHBsaWNhdGlvbnMocGFyYW1zKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS50aGVyYXBpc3QuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZTogeyBzdGF0dXM6ICdwZW5kaW5nJyB9LFxuICAgICAgICAgIHNraXA6IDAsXG4gICAgICAgICAgdGFrZTogMTAsXG4gICAgICAgICAgb3JkZXJCeTogeyBzdWJtaXNzaW9uRGF0ZTogJ2Rlc2MnIH0sXG4gICAgICAgICAgaW5jbHVkZTogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS50aGVyYXBpc3QuY291bnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZTogeyBzdGF0dXM6ICdwZW5kaW5nJyB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBwYWdpbmF0aW9uIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBwYWdlOiAzLCBsaW1pdDogNSB9O1xuICAgICAgICBhd2FpdCBzZXJ2aWNlLmdldEFsbFRoZXJhcGlzdEFwcGxpY2F0aW9ucyhwYXJhbXMpO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnRoZXJhcGlzdC5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHdoZXJlOiB7fSxcbiAgICAgICAgICBza2lwOiAxMCwgLy8gKDMtMSkgKiA1XG4gICAgICAgICAgdGFrZTogNSxcbiAgICAgICAgICBvcmRlckJ5OiB7IHN1Ym1pc3Npb25EYXRlOiAnZGVzYycgfSxcbiAgICAgICAgICBpbmNsdWRlOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHRvdGFsIHBhZ2VzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgcHJpc21hU2VydmljZS50aGVyYXBpc3QuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMjMpO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7IHBhZ2U6IDEsIGxpbWl0OiAxMCB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdldEFsbFRoZXJhcGlzdEFwcGxpY2F0aW9ucyhwYXJhbXMpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQudG90YWxQYWdlcykudG9CZSgzKTsgLy8gTWF0aC5jZWlsKDIzLzEwKVxuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHJlc3VsdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIHByaXNtYVNlcnZpY2UudGhlcmFwaXN0LmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcbiAgICAgICAgcHJpc21hU2VydmljZS50aGVyYXBpc3QuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMCk7XG5cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBwYWdlOiAxLCBsaW1pdDogMTAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRBbGxUaGVyYXBpc3RBcHBsaWNhdGlvbnMocGFyYW1zKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgICBhcHBsaWNhdGlvbnM6IFtdLFxuICAgICAgICAgIHRvdGFsQ291bnQ6IDAsXG4gICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICB0b3RhbFBhZ2VzOiAwLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGFiYXNlRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UudGhlcmFwaXN0LmZpbmRNYW55Lm1vY2tSZWplY3RlZFZhbHVlKGRhdGFiYXNlRXJyb3IpO1xuXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgcGFnZTogMSwgbGltaXQ6IDEwIH07XG4gICAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmdldEFsbFRoZXJhcGlzdEFwcGxpY2F0aW9ucyhwYXJhbXMpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICAgJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJ1xuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZ2V0VGhlcmFwaXN0QXBwbGljYXRpb24nLCAoKSA9PiB7XG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgcHJpc21hU2VydmljZS50aGVyYXBpc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGhlcmFwaXN0KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJldHJpZXZlIHNwZWNpZmljIHRoZXJhcGlzdCBhcHBsaWNhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRUaGVyYXBpc3RBcHBsaWNhdGlvbigndGhlcmFwaXN0LXVzZXItMTIzJyk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UudGhlcmFwaXN0LmZpbmRVbmlxdWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZTogeyB1c2VySWQ6ICd0aGVyYXBpc3QtdXNlci0xMjMnIH0sXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgdXNlcjogdHJ1ZSxcbiAgICAgICAgICAgIHByb2Nlc3NlZEJ5QWRtaW46IHtcbiAgICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tUaGVyYXBpc3QpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIG51bGwgZm9yIG5vbi1leGlzdGVudCBhcHBsaWNhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgcHJpc21hU2VydmljZS50aGVyYXBpc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdldFRoZXJhcGlzdEFwcGxpY2F0aW9uKCdub24tZXhpc3RlbnQnKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YWJhc2VFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgcHJpc21hU2VydmljZS50aGVyYXBpc3QuZmluZFVuaXF1ZS5tb2NrUmVqZWN0ZWRWYWx1ZShkYXRhYmFzZUVycm9yKTtcblxuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgc2VydmljZS5nZXRUaGVyYXBpc3RBcHBsaWNhdGlvbigndGhlcmFwaXN0LXVzZXItMTIzJylcbiAgICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdhcHByb3ZlVGhlcmFwaXN0QXBwbGljYXRpb24nLCAoKSA9PiB7XG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgcHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24ubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICAgIHRoZXJhcGlzdDoge1xuICAgICAgICAgICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQXBwcm92ZWRUaGVyYXBpc3QpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgIC4uLm1vY2tVc2VyLFxuICAgICAgICAgICAgICAgIHJvbGU6ICd0aGVyYXBpc3QnLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdWRpdExvZzoge1xuICAgICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG1vY2tUeCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYXBwcm92ZSB0aGVyYXBpc3QgYXBwbGljYXRpb24gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmFwcHJvdmVUaGVyYXBpc3RBcHBsaWNhdGlvbihcbiAgICAgICAgICAndGhlcmFwaXN0LXVzZXItMTIzJyxcbiAgICAgICAgICAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAnR29vZCBxdWFsaWZpY2F0aW9ucydcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICB0aGVyYXBpc3Q6IG1vY2tBcHByb3ZlZFRoZXJhcGlzdCxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgdGhlcmFwaXN0IHN0YXR1cyBpbiB0cmFuc2FjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGNhcHR1cmVkVHg6IGFueTtcbiAgICAgICAgcHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24ubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICAgIHRoZXJhcGlzdDoge1xuICAgICAgICAgICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQXBwcm92ZWRUaGVyYXBpc3QpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1ZGl0TG9nOiB7XG4gICAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjYXB0dXJlZFR4ID0gbW9ja1R4O1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhtb2NrVHgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBzZXJ2aWNlLmFwcHJvdmVUaGVyYXBpc3RBcHBsaWNhdGlvbihcbiAgICAgICAgICAndGhlcmFwaXN0LXVzZXItMTIzJyxcbiAgICAgICAgICAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAnR29vZCBxdWFsaWZpY2F0aW9ucydcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QoY2FwdHVyZWRUeC50aGVyYXBpc3QudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHsgdXNlcklkOiAndGhlcmFwaXN0LXVzZXItMTIzJyB9LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHN0YXR1czogJ2FwcHJvdmVkJyxcbiAgICAgICAgICAgIHByb2Nlc3NlZEJ5QWRtaW5JZDogJ2FkbWluLTEyMycsXG4gICAgICAgICAgICBwcm9jZXNzaW5nRGF0ZTogbW9ja0RhdGUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgdXNlciByb2xlIHRvIHRoZXJhcGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGNhcHR1cmVkVHg6IGFueTtcbiAgICAgICAgcHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24ubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICAgIHRoZXJhcGlzdDoge1xuICAgICAgICAgICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQXBwcm92ZWRUaGVyYXBpc3QpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1ZGl0TG9nOiB7XG4gICAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjYXB0dXJlZFR4ID0gbW9ja1R4O1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhtb2NrVHgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBzZXJ2aWNlLmFwcHJvdmVUaGVyYXBpc3RBcHBsaWNhdGlvbihcbiAgICAgICAgICAndGhlcmFwaXN0LXVzZXItMTIzJyxcbiAgICAgICAgICAnYWRtaW4tMTIzJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChjYXB0dXJlZFR4LnVzZXIudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6ICd0aGVyYXBpc3QtdXNlci0xMjMnIH0sXG4gICAgICAgICAgZGF0YTogeyByb2xlOiAndGhlcmFwaXN0JyB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhdWRpdCBsb2cgZm9yIGFwcHJvdmFsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgY2FwdHVyZWRUeDogYW55O1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLiR0cmFuc2FjdGlvbi5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgY29uc3QgbW9ja1R4ID0ge1xuICAgICAgICAgICAgdGhlcmFwaXN0OiB7XG4gICAgICAgICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tBcHByb3ZlZFRoZXJhcGlzdCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXVkaXRMb2c6IHtcbiAgICAgICAgICAgICAgY3JlYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNhcHR1cmVkVHggPSBtb2NrVHg7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG1vY2tUeCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IHNlcnZpY2UuYXBwcm92ZVRoZXJhcGlzdEFwcGxpY2F0aW9uKFxuICAgICAgICAgICd0aGVyYXBpc3QtdXNlci0xMjMnLFxuICAgICAgICAgICdhZG1pbi0xMjMnLFxuICAgICAgICAgICdFeGNlbGxlbnQgY3JlZGVudGlhbHMnXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KGNhcHR1cmVkVHguYXVkaXRMb2cuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXNlcklkOiAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAgIGFjdGlvbjogJ0FQUFJPVkVfVEhFUkFQSVNUX0FQUExJQ0FUSU9OJyxcbiAgICAgICAgICAgIGVudGl0eTogJ3RoZXJhcGlzdCcsXG4gICAgICAgICAgICBlbnRpdHlJZDogJ3RoZXJhcGlzdC11c2VyLTEyMycsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICBhcHBsaWNhdGlvbklkOiAndGhlcmFwaXN0LXVzZXItMTIzJyxcbiAgICAgICAgICAgICAgbm90ZXM6ICdFeGNlbGxlbnQgY3JlZGVudGlhbHMnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG1vY2tEYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGFwcHJvdmFsIHdpdGhvdXQgbm90ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHNlcnZpY2UuYXBwcm92ZVRoZXJhcGlzdEFwcGxpY2F0aW9uKFxuICAgICAgICAgICd0aGVyYXBpc3QtdXNlci0xMjMnLFxuICAgICAgICAgICdhZG1pbi0xMjMnXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgdHJhbnNhY3Rpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbkVycm9yID0gbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgcHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24ubW9ja1JlamVjdGVkVmFsdWUodHJhbnNhY3Rpb25FcnJvcik7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIHNlcnZpY2UuYXBwcm92ZVRoZXJhcGlzdEFwcGxpY2F0aW9uKFxuICAgICAgICAgICAgJ3RoZXJhcGlzdC11c2VyLTEyMycsXG4gICAgICAgICAgICAnYWRtaW4tMTIzJ1xuICAgICAgICAgIClcbiAgICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1RyYW5zYWN0aW9uIGZhaWxlZCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncmVqZWN0VGhlcmFwaXN0QXBwbGljYXRpb24nLCAoKSA9PiB7XG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgcHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24ubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICAgIHRoZXJhcGlzdDoge1xuICAgICAgICAgICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgLi4ubW9ja1RoZXJhcGlzdCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdyZWplY3RlZCcsXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkQnlBZG1pbklkOiAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAgICAgICBwcm9jZXNzaW5nRGF0ZTogbW9ja0RhdGUsXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1ZGl0TG9nOiB7XG4gICAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobW9ja1R4KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZWplY3QgdGhlcmFwaXN0IGFwcGxpY2F0aW9uIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5yZWplY3RUaGVyYXBpc3RBcHBsaWNhdGlvbihcbiAgICAgICAgICAndGhlcmFwaXN0LXVzZXItMTIzJyxcbiAgICAgICAgICAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAnSW5zdWZmaWNpZW50IGV4cGVyaWVuY2UnLFxuICAgICAgICAgICdOZWVkcyBtb3JlIGNsaW5pY2FsIGhvdXJzJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLiR0cmFuc2FjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHRoZXJhcGlzdDogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgc3RhdHVzOiAncmVqZWN0ZWQnLFxuICAgICAgICAgICAgcHJvY2Vzc2VkQnlBZG1pbklkOiAnYWRtaW4tMTIzJyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICByZWFzb246ICdJbnN1ZmZpY2llbnQgZXhwZXJpZW5jZScsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdXBkYXRlIHRoZXJhcGlzdCBzdGF0dXMgdG8gcmVqZWN0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBjYXB0dXJlZFR4OiBhbnk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICBjb25zdCBtb2NrVHggPSB7XG4gICAgICAgICAgICB0aGVyYXBpc3Q6IHtcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1ZGl0TG9nOiB7XG4gICAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjYXB0dXJlZFR4ID0gbW9ja1R4O1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhtb2NrVHgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBzZXJ2aWNlLnJlamVjdFRoZXJhcGlzdEFwcGxpY2F0aW9uKFxuICAgICAgICAgICd0aGVyYXBpc3QtdXNlci0xMjMnLFxuICAgICAgICAgICdhZG1pbi0xMjMnLFxuICAgICAgICAgICdJbnN1ZmZpY2llbnQgZXhwZXJpZW5jZSdcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QoY2FwdHVyZWRUeC50aGVyYXBpc3QudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHsgdXNlcklkOiAndGhlcmFwaXN0LXVzZXItMTIzJyB9LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHN0YXR1czogJ3JlamVjdGVkJyxcbiAgICAgICAgICAgIHByb2Nlc3NlZEJ5QWRtaW5JZDogJ2FkbWluLTEyMycsXG4gICAgICAgICAgICBwcm9jZXNzaW5nRGF0ZTogbW9ja0RhdGUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgYXVkaXQgbG9nIGZvciByZWplY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBjYXB0dXJlZFR4OiBhbnk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICBjb25zdCBtb2NrVHggPSB7XG4gICAgICAgICAgICB0aGVyYXBpc3Q6IHtcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1ZGl0TG9nOiB7XG4gICAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjYXB0dXJlZFR4ID0gbW9ja1R4O1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhtb2NrVHgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBzZXJ2aWNlLnJlamVjdFRoZXJhcGlzdEFwcGxpY2F0aW9uKFxuICAgICAgICAgICd0aGVyYXBpc3QtdXNlci0xMjMnLFxuICAgICAgICAgICdhZG1pbi0xMjMnLFxuICAgICAgICAgICdJbnN1ZmZpY2llbnQgZXhwZXJpZW5jZScsXG4gICAgICAgICAgJ05lZWRzIG1vcmUgdHJhaW5pbmcnXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KGNhcHR1cmVkVHguYXVkaXRMb2cuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXNlcklkOiAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAgIGFjdGlvbjogJ1JFSkVDVF9USEVSQVBJU1RfQVBQTElDQVRJT04nLFxuICAgICAgICAgICAgZW50aXR5OiAndGhlcmFwaXN0JyxcbiAgICAgICAgICAgIGVudGl0eUlkOiAndGhlcmFwaXN0LXVzZXItMTIzJyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIGFwcGxpY2F0aW9uSWQ6ICd0aGVyYXBpc3QtdXNlci0xMjMnLFxuICAgICAgICAgICAgICByZWFzb246ICdJbnN1ZmZpY2llbnQgZXhwZXJpZW5jZScsXG4gICAgICAgICAgICAgIG5vdGVzOiAnTmVlZHMgbW9yZSB0cmFpbmluZycsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogbW9ja0RhdGUudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmVqZWN0aW9uIHdpdGhvdXQgbm90ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHNlcnZpY2UucmVqZWN0VGhlcmFwaXN0QXBwbGljYXRpb24oXG4gICAgICAgICAgJ3RoZXJhcGlzdC11c2VyLTEyMycsXG4gICAgICAgICAgJ2FkbWluLTEyMycsXG4gICAgICAgICAgJ0luc3VmZmljaWVudCBleHBlcmllbmNlJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLiR0cmFuc2FjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIHRyYW5zYWN0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25FcnJvciA9IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gZmFpbGVkJyk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tSZWplY3RlZFZhbHVlKHRyYW5zYWN0aW9uRXJyb3IpO1xuXG4gICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICBzZXJ2aWNlLnJlamVjdFRoZXJhcGlzdEFwcGxpY2F0aW9uKFxuICAgICAgICAgICAgJ3RoZXJhcGlzdC11c2VyLTEyMycsXG4gICAgICAgICAgICAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAgICdJbnN1ZmZpY2llbnQgZXhwZXJpZW5jZSdcbiAgICAgICAgICApXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KCdUcmFuc2FjdGlvbiBmYWlsZWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVXNlciBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdnZXRBbGxVc2VycycsICgpID0+IHtcbiAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW21vY2tVc2VyXSk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UudXNlci5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgxKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJldHJpZXZlIGFsbCB1c2VycyB3aXRoIHBhZ2luYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgcGFnZTogMSwgbGltaXQ6IDEwIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0QWxsVXNlcnMocGFyYW1zKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS51c2VyLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHt9LFxuICAgICAgICAgIHNraXA6IDAsXG4gICAgICAgICAgdGFrZTogMTAsXG4gICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgICAgcm9sZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgaXNWZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICAgICAgICAgIGxhc3RMb2dpbkF0OiB0cnVlLFxuICAgICAgICAgICAgc3VzcGVuZGVkQXQ6IHRydWUsXG4gICAgICAgICAgICBzdXNwZW5zaW9uUmVhc29uOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgIHVzZXJzOiBbbW9ja1VzZXJdLFxuICAgICAgICAgIHRvdGFsQ291bnQ6IDEsXG4gICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICB0b3RhbFBhZ2VzOiAxLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGZpbHRlciBieSByb2xlIHdoZW4gcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgcm9sZTogJ3RoZXJhcGlzdCcsIHBhZ2U6IDEsIGxpbWl0OiAxMCB9O1xuICAgICAgICBhd2FpdCBzZXJ2aWNlLmdldEFsbFVzZXJzKHBhcmFtcyk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UudXNlci5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHdoZXJlOiB7IHJvbGU6ICd0aGVyYXBpc3QnIH0sXG4gICAgICAgICAgc2tpcDogMCxcbiAgICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgc2VsZWN0OiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IHNlYXJjaCB0ZXJtJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7IHNlYXJjaDogJ2pvaG4nLCBwYWdlOiAxLCBsaW1pdDogMTAgfTtcbiAgICAgICAgYXdhaXQgc2VydmljZS5nZXRBbGxVc2VycyhwYXJhbXMpO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgeyBmaXJzdE5hbWU6IHsgY29udGFpbnM6ICdqb2huJywgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgICAgICAgIHsgbGFzdE5hbWU6IHsgY29udGFpbnM6ICdqb2huJywgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgICAgICAgIHsgZW1haWw6IHsgY29udGFpbnM6ICdqb2huJywgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2tpcDogMCxcbiAgICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgc2VsZWN0OiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IGFjdGl2ZSBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgc3RhdHVzOiAnYWN0aXZlJywgcGFnZTogMSwgbGltaXQ6IDEwIH07XG4gICAgICAgIGF3YWl0IHNlcnZpY2UuZ2V0QWxsVXNlcnMocGFyYW1zKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS51c2VyLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgICAgICBza2lwOiAwLFxuICAgICAgICAgIHRha2U6IDEwLFxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICBzZWxlY3Q6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBmaWx0ZXIgYnkgaW5hY3RpdmUgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7IHN0YXR1czogJ2luYWN0aXZlJywgcGFnZTogMSwgbGltaXQ6IDEwIH07XG4gICAgICAgIGF3YWl0IHNlcnZpY2UuZ2V0QWxsVXNlcnMocGFyYW1zKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS51c2VyLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHsgaXNBY3RpdmU6IGZhbHNlIH0sXG4gICAgICAgICAgc2tpcDogMCxcbiAgICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgc2VsZWN0OiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IHN1c3BlbmRlZCBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgc3RhdHVzOiAnc3VzcGVuZGVkJywgcGFnZTogMSwgbGltaXQ6IDEwIH07XG4gICAgICAgIGF3YWl0IHNlcnZpY2UuZ2V0QWxsVXNlcnMocGFyYW1zKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS51c2VyLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHsgc3VzcGVuZGVkQXQ6IHsgbm90OiBudWxsIH0gfSxcbiAgICAgICAgICBza2lwOiAwLFxuICAgICAgICAgIHRha2U6IDEwLFxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICBzZWxlY3Q6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzb3J0IGJ5IHNwZWNpZmllZCBmaWVsZCBhbmQgb3JkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgIGxpbWl0OiAxMCxcbiAgICAgICAgICBzb3J0Qnk6ICdmaXJzdE5hbWUnLFxuICAgICAgICAgIHNvcnRPcmRlcjogJ2FzYycsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHNlcnZpY2UuZ2V0QWxsVXNlcnMocGFyYW1zKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS51c2VyLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHt9LFxuICAgICAgICAgIHNraXA6IDAsXG4gICAgICAgICAgdGFrZTogMTAsXG4gICAgICAgICAgb3JkZXJCeTogeyBmaXJzdE5hbWU6ICdhc2MnIH0sXG4gICAgICAgICAgc2VsZWN0OiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdXNlIGRlZmF1bHQgc29ydCB3aGVuIGludmFsaWQgc29ydEJ5IHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgICAgc29ydEJ5OiAnaW52YWxpZEZpZWxkJyxcbiAgICAgICAgICBzb3J0T3JkZXI6ICdhc2MnLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCBzZXJ2aWNlLmdldEFsbFVzZXJzKHBhcmFtcyk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UudXNlci5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHdoZXJlOiB7fSxcbiAgICAgICAgICBza2lwOiAwLFxuICAgICAgICAgIHRha2U6IDEwLFxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICBzZWxlY3Q6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb21iaW5lIG11bHRpcGxlIGZpbHRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICByb2xlOiAnY2xpZW50JyxcbiAgICAgICAgICBzZWFyY2g6ICdqb2huJyxcbiAgICAgICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCBzZXJ2aWNlLmdldEFsbFVzZXJzKHBhcmFtcyk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UudXNlci5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICByb2xlOiAnY2xpZW50JyxcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgeyBmaXJzdE5hbWU6IHsgY29udGFpbnM6ICdqb2huJywgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgICAgICAgIHsgbGFzdE5hbWU6IHsgY29udGFpbnM6ICdqb2huJywgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgICAgICAgIHsgZW1haWw6IHsgY29udGFpbnM6ICdqb2huJywgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2tpcDogMCxcbiAgICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgc2VsZWN0OiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YWJhc2VFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgcHJpc21hU2VydmljZS51c2VyLmZpbmRNYW55Lm1vY2tSZWplY3RlZFZhbHVlKGRhdGFiYXNlRXJyb3IpO1xuXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgcGFnZTogMSwgbGltaXQ6IDEwIH07XG4gICAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmdldEFsbFVzZXJzKHBhcmFtcykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgICAnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdnZXRVc2VyJywgKCkgPT4ge1xuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIHByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAuLi5tb2NrVXNlcixcbiAgICAgICAgICBjbGllbnQ6IHsgaWQ6ICdjbGllbnQtMTIzJyB9LFxuICAgICAgICAgIHRoZXJhcGlzdDogbnVsbCxcbiAgICAgICAgICBhZG1pbjogbnVsbCxcbiAgICAgICAgICBtb2RlcmF0b3I6IG51bGwsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmV0cmlldmUgc3BlY2lmaWMgdXNlciB3aXRoIHJlbGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRVc2VyKCd1c2VyLTEyMycpO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiAndXNlci0xMjMnIH0sXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgY2xpZW50OiB0cnVlLFxuICAgICAgICAgICAgdGhlcmFwaXN0OiB0cnVlLFxuICAgICAgICAgICAgYWRtaW46IHRydWUsXG4gICAgICAgICAgICBtb2RlcmF0b3I6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBpZDogJ3VzZXItMTIzJyxcbiAgICAgICAgICAgIGNsaWVudDogeyBpZDogJ2NsaWVudC0xMjMnIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGZvciBub24tZXhpc3RlbnQgdXNlcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgcHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRVc2VyKCdub24tZXhpc3RlbnQnKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YWJhc2VFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgcHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUubW9ja1JlamVjdGVkVmFsdWUoZGF0YWJhc2VFcnJvcik7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZ2V0VXNlcigndXNlci0xMjMnKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAgICdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCdcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3N1c3BlbmRVc2VyJywgKCkgPT4ge1xuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICBjb25zdCBtb2NrVHggPSB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tTdXNwZW5kZWRVc2VyKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdWRpdExvZzoge1xuICAgICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG1vY2tUeCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc3VzcGVuZCB1c2VyIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5zdXNwZW5kVXNlcihcbiAgICAgICAgICAndXNlci0xMjMnLFxuICAgICAgICAgICdhZG1pbi0xMjMnLFxuICAgICAgICAgICdJbmFwcHJvcHJpYXRlIGJlaGF2aW9yJyxcbiAgICAgICAgICA3XG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdXNlcjogbW9ja1N1c3BlbmRlZFVzZXIsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc3VzcGVuZCB1c2VyIHdpdGggZHVyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBjYXB0dXJlZFR4OiBhbnk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICBjb25zdCBtb2NrVHggPSB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tTdXNwZW5kZWRVc2VyKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdWRpdExvZzoge1xuICAgICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgICAgY2FwdHVyZWRUeCA9IG1vY2tUeDtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobW9ja1R4KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgc2VydmljZS5zdXNwZW5kVXNlcihcbiAgICAgICAgICAndXNlci0xMjMnLFxuICAgICAgICAgICdhZG1pbi0xMjMnLFxuICAgICAgICAgICdJbmFwcHJvcHJpYXRlIGJlaGF2aW9yJyxcbiAgICAgICAgICA3XG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KGNhcHR1cmVkVHgudXNlci51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogJ3VzZXItMTIzJyB9LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHN1c3BlbmRlZEF0OiBtb2NrRGF0ZSxcbiAgICAgICAgICAgIHN1c3BlbmRlZEJ5OiAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAgIHN1c3BlbnNpb25SZWFzb246ICdJbmFwcHJvcHJpYXRlIGJlaGF2aW9yJyxcbiAgICAgICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHN1c3BlbmQgdXNlciB3aXRob3V0IGR1cmF0aW9uIChwZXJtYW5lbnQpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBzZXJ2aWNlLnN1c3BlbmRVc2VyKFxuICAgICAgICAgICd1c2VyLTEyMycsXG4gICAgICAgICAgJ2FkbWluLTEyMycsXG4gICAgICAgICAgJ1NlcmlvdXMgdmlvbGF0aW9uJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLiR0cmFuc2FjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGF1ZGl0IGxvZyBmb3Igc3VzcGVuc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGNhcHR1cmVkVHg6IGFueTtcbiAgICAgICAgcHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24ubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja1N1c3BlbmRlZFVzZXIpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1ZGl0TG9nOiB7XG4gICAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjYXB0dXJlZFR4ID0gbW9ja1R4O1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhtb2NrVHgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBzZXJ2aWNlLnN1c3BlbmRVc2VyKFxuICAgICAgICAgICd1c2VyLTEyMycsXG4gICAgICAgICAgJ2FkbWluLTEyMycsXG4gICAgICAgICAgJ0luYXBwcm9wcmlhdGUgYmVoYXZpb3InLFxuICAgICAgICAgIDdcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBleHBlY3RlZFN1c3BlbnNpb25FbmQgPSBuZXcgRGF0ZShcbiAgICAgICAgICBtb2NrRGF0ZS5nZXRUaW1lKCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMFxuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChjYXB0dXJlZFR4LmF1ZGl0TG9nLmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHVzZXJJZDogJ2FkbWluLTEyMycsXG4gICAgICAgICAgICBhY3Rpb246ICdTVVNQRU5EX1VTRVInLFxuICAgICAgICAgICAgZW50aXR5OiAndXNlcicsXG4gICAgICAgICAgICBlbnRpdHlJZDogJ3VzZXItMTIzJyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIHVzZXJJZDogJ3VzZXItMTIzJyxcbiAgICAgICAgICAgICAgcmVhc29uOiAnSW5hcHByb3ByaWF0ZSBiZWhhdmlvcicsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiA3LFxuICAgICAgICAgICAgICBzdXNwZW5zaW9uRW5kOiBleHBlY3RlZFN1c3BlbnNpb25FbmQudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBtb2NrRGF0ZS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSB0cmFuc2FjdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uRXJyb3IgPSBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGZhaWxlZCcpO1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLiR0cmFuc2FjdGlvbi5tb2NrUmVqZWN0ZWRWYWx1ZSh0cmFuc2FjdGlvbkVycm9yKTtcblxuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgc2VydmljZS5zdXNwZW5kVXNlcigndXNlci0xMjMnLCAnYWRtaW4tMTIzJywgJ3JlYXNvbicpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KCdUcmFuc2FjdGlvbiBmYWlsZWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3Vuc3VzcGVuZFVzZXInLCAoKSA9PiB7XG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgcHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24ubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgIC4uLm1vY2tVc2VyLFxuICAgICAgICAgICAgICAgIHN1c3BlbmRlZEF0OiBudWxsLFxuICAgICAgICAgICAgICAgIHN1c3BlbmRlZEJ5OiBudWxsLFxuICAgICAgICAgICAgICAgIHN1c3BlbnNpb25SZWFzb246IG51bGwsXG4gICAgICAgICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1ZGl0TG9nOiB7XG4gICAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobW9ja1R4KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB1bnN1c3BlbmQgdXNlciBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UudW5zdXNwZW5kVXNlcigndXNlci0xMjMnLCAnYWRtaW4tMTIzJyk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdXNlcjogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgc3VzcGVuZGVkQXQ6IG51bGwsXG4gICAgICAgICAgICBzdXNwZW5kZWRCeTogbnVsbCxcbiAgICAgICAgICAgIHN1c3BlbnNpb25SZWFzb246IG51bGwsXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjbGVhciBzdXNwZW5zaW9uIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBjYXB0dXJlZFR4OiBhbnk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICBjb25zdCBtb2NrVHggPSB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdWRpdExvZzoge1xuICAgICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgICAgY2FwdHVyZWRUeCA9IG1vY2tUeDtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobW9ja1R4KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgc2VydmljZS51bnN1c3BlbmRVc2VyKCd1c2VyLTEyMycsICdhZG1pbi0xMjMnKTtcblxuICAgICAgICBleHBlY3QoY2FwdHVyZWRUeC51c2VyLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiAndXNlci0xMjMnIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgc3VzcGVuZGVkQXQ6IG51bGwsXG4gICAgICAgICAgICBzdXNwZW5kZWRCeTogbnVsbCxcbiAgICAgICAgICAgIHN1c3BlbnNpb25SZWFzb246IG51bGwsXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhdWRpdCBsb2cgZm9yIHVuc3VzcGVuc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGNhcHR1cmVkVHg6IGFueTtcbiAgICAgICAgcHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24ubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1ZGl0TG9nOiB7XG4gICAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjYXB0dXJlZFR4ID0gbW9ja1R4O1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhtb2NrVHgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBzZXJ2aWNlLnVuc3VzcGVuZFVzZXIoJ3VzZXItMTIzJywgJ2FkbWluLTEyMycpO1xuXG4gICAgICAgIGV4cGVjdChjYXB0dXJlZFR4LmF1ZGl0TG9nLmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHVzZXJJZDogJ2FkbWluLTEyMycsXG4gICAgICAgICAgICBhY3Rpb246ICdVTlNVU1BFTkRfVVNFUicsXG4gICAgICAgICAgICBlbnRpdHk6ICd1c2VyJyxcbiAgICAgICAgICAgIGVudGl0eUlkOiAndXNlci0xMjMnLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgdXNlcklkOiAndXNlci0xMjMnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG1vY2tEYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIHRyYW5zYWN0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25FcnJvciA9IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gZmFpbGVkJyk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tSZWplY3RlZFZhbHVlKHRyYW5zYWN0aW9uRXJyb3IpO1xuXG4gICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICBzZXJ2aWNlLnVuc3VzcGVuZFVzZXIoJ3VzZXItMTIzJywgJ2FkbWluLTEyMycpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KCdUcmFuc2FjdGlvbiBmYWlsZWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGxhdGZvcm0gQW5hbHl0aWNzJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdnZXRQbGF0Zm9ybU92ZXJ2aWV3JywgKCkgPT4ge1xuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIHByaXNtYVNlcnZpY2UudXNlci5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgxMDApO1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLmNsaWVudC5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSg4MCk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UudGhlcmFwaXN0LmNvdW50XG4gICAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSgxNSkgLy8gYXBwcm92ZWQgdGhlcmFwaXN0c1xuICAgICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoNSk7IC8vIHBlbmRpbmcgYXBwbGljYXRpb25zXG4gICAgICAgIHByaXNtYVNlcnZpY2UuY29tbXVuaXR5LmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlKDEyKTtcbiAgICAgICAgcHJpc21hU2VydmljZS5wb3N0LmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlKDUwMCk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UubWVldGluZy5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgyMDApO1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW1xuICAgICAgICAgIHsgLi4ubW9ja1VzZXIsIHJvbGU6ICdjbGllbnQnIH0sXG4gICAgICAgICAgeyAuLi5tb2NrVXNlciwgaWQ6ICd1c2VyLTEyNCcsIHJvbGU6ICd0aGVyYXBpc3QnIH0sXG4gICAgICAgIF0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmV0cmlldmUgcGxhdGZvcm0gb3ZlcnZpZXcgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdldFBsYXRmb3JtT3ZlcnZpZXcoKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgICBvdmVydmlldzoge1xuICAgICAgICAgICAgdG90YWxVc2VyczogMTAwLFxuICAgICAgICAgICAgdG90YWxDbGllbnRzOiA4MCxcbiAgICAgICAgICAgIHRvdGFsVGhlcmFwaXN0czogMTUsXG4gICAgICAgICAgICBwZW5kaW5nQXBwbGljYXRpb25zOiA1LFxuICAgICAgICAgICAgdG90YWxDb21tdW5pdGllczogMTIsXG4gICAgICAgICAgICB0b3RhbFBvc3RzOiA1MDAsXG4gICAgICAgICAgICB0b3RhbFNlc3Npb25zOiAyMDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZWNlbnRBY3Rpdml0eTogW1xuICAgICAgICAgICAgeyAuLi5tb2NrVXNlciwgcm9sZTogJ2NsaWVudCcgfSxcbiAgICAgICAgICAgIHsgLi4ubW9ja1VzZXIsIGlkOiAndXNlci0xMjQnLCByb2xlOiAndGhlcmFwaXN0JyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbWFrZSBjb3JyZWN0IGRhdGFiYXNlIHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHNlcnZpY2UuZ2V0UGxhdGZvcm1PdmVydmlldygpO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnVzZXIuY291bnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCk7XG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLmNsaWVudC5jb3VudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoKTtcbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UudGhlcmFwaXN0LmNvdW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHsgc3RhdHVzOiAnYXBwcm92ZWQnIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS50aGVyYXBpc3QuY291bnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZTogeyBzdGF0dXM6ICdwZW5kaW5nJyB9LFxuICAgICAgICB9KTtcbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UuY29tbXVuaXR5LmNvdW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgpO1xuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0LmNvdW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgpO1xuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS5tZWV0aW5nLmNvdW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgpO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgcm9sZTogdHJ1ZSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBwbGF0Zm9ybSBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLnVzZXIuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMCk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuY2xpZW50LmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlKDApO1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLnRoZXJhcGlzdC5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgwKTtcbiAgICAgICAgcHJpc21hU2VydmljZS5jb21tdW5pdHkuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMCk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgwKTtcbiAgICAgICAgcHJpc21hU2VydmljZS5tZWV0aW5nLmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlKDApO1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0UGxhdGZvcm1PdmVydmlldygpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQub3ZlcnZpZXcudG90YWxVc2VycykudG9CZSgwKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5yZWNlbnRBY3Rpdml0eSkudG9FcXVhbChbXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhYmFzZUVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLnVzZXIuY291bnQubW9ja1JlamVjdGVkVmFsdWUoZGF0YWJhc2VFcnJvcik7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZ2V0UGxhdGZvcm1PdmVydmlldygpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICAgJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJ1xuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZ2V0TWF0Y2hpbmdQZXJmb3JtYW5jZScsICgpID0+IHtcbiAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLm1hdGNoSGlzdG9yeS5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbXG4gICAgICAgICAgbW9ja01hdGNoSGlzdG9yeSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi5tb2NrTWF0Y2hIaXN0b3J5LFxuICAgICAgICAgICAgaWQ6ICdtYXRjaC0xMjQnLFxuICAgICAgICAgICAgdG90YWxTY29yZTogNzUuMCxcbiAgICAgICAgICAgIGJlY2FtZUNsaWVudDogZmFsc2UsXG4gICAgICAgICAgICB3YXNWaWV3ZWQ6IHRydWUsXG4gICAgICAgICAgICB3YXNDb250YWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmV0cmlldmUgbWF0Y2hpbmcgcGVyZm9ybWFuY2Ugd2l0aCBkZWZhdWx0IGRhdGUgcmFuZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0TWF0Y2hpbmdQZXJmb3JtYW5jZSgpO1xuXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkU3RhcnQgPSBuZXcgRGF0ZShtb2NrRGF0ZS5nZXRUaW1lKCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgICAgICBjb25zdCBleHBlY3RlZEVuZCA9IG1vY2tEYXRlO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLm1hdGNoSGlzdG9yeS5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgICAgZ3RlOiBleHBlY3RlZFN0YXJ0LFxuICAgICAgICAgICAgICBsdGU6IGV4cGVjdGVkRW5kLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgICBwZXJpb2Q6IHsgc3RhcnQ6IGV4cGVjdGVkU3RhcnQsIGVuZDogZXhwZWN0ZWRFbmQgfSxcbiAgICAgICAgICBtZXRyaWNzOiB7XG4gICAgICAgICAgICB0b3RhbFJlY29tbWVuZGF0aW9uczogMixcbiAgICAgICAgICAgIHN1Y2Nlc3NmdWxNYXRjaGVzOiAxLFxuICAgICAgICAgICAgdmlld2VkUmVjb21tZW5kYXRpb25zOiAyLFxuICAgICAgICAgICAgY29udGFjdGVkVGhlcmFwaXN0czogMSxcbiAgICAgICAgICAgIGF2ZXJhZ2VNYXRjaFNjb3JlOiA4MC4yNSwgLy8gKDg1LjUgKyA3NS4wKSAvIDJcbiAgICAgICAgICAgIGNvbnZlcnNpb25SYXRlOiA1MC4wLCAvLyAxLzIgKiAxMDBcbiAgICAgICAgICAgIGNsaWNrVGhyb3VnaFJhdGU6IDEwMC4wLCAvLyAyLzIgKiAxMDBcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJldHJpZXZlIG1hdGNoaW5nIHBlcmZvcm1hbmNlIHdpdGggY3VzdG9tIGRhdGUgcmFuZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9ICcyMDI0LTAxLTAxJztcbiAgICAgICAgY29uc3QgZW5kRGF0ZSA9ICcyMDI0LTAxLTMxJztcblxuICAgICAgICBhd2FpdCBzZXJ2aWNlLmdldE1hdGNoaW5nUGVyZm9ybWFuY2Uoc3RhcnREYXRlLCBlbmREYXRlKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS5tYXRjaEhpc3RvcnkuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICAgIGd0ZTogbmV3IERhdGUoc3RhcnREYXRlKSxcbiAgICAgICAgICAgICAgbHRlOiBuZXcgRGF0ZShlbmREYXRlKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgbWF0Y2hpbmcgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgcHJpc21hU2VydmljZS5tYXRjaEhpc3RvcnkuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0TWF0Y2hpbmdQZXJmb3JtYW5jZSgpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQubWV0cmljcykudG9FcXVhbCh7XG4gICAgICAgICAgdG90YWxSZWNvbW1lbmRhdGlvbnM6IDAsXG4gICAgICAgICAgc3VjY2Vzc2Z1bE1hdGNoZXM6IDAsXG4gICAgICAgICAgdmlld2VkUmVjb21tZW5kYXRpb25zOiAwLFxuICAgICAgICAgIGNvbnRhY3RlZFRoZXJhcGlzdHM6IDAsXG4gICAgICAgICAgYXZlcmFnZU1hdGNoU2NvcmU6IDAsXG4gICAgICAgICAgY29udmVyc2lvblJhdGU6IDAsXG4gICAgICAgICAgY2xpY2tUaHJvdWdoUmF0ZTogMCxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgbWV0cmljcyBjb3JyZWN0bHkgZm9yIHZhcmlvdXMgc2NlbmFyaW9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0ZXN0TWF0Y2hEYXRhID0gW1xuICAgICAgICAgIHsgdG90YWxTY29yZTogOTAsIGJlY2FtZUNsaWVudDogdHJ1ZSwgd2FzVmlld2VkOiB0cnVlLCB3YXNDb250YWN0ZWQ6IHRydWUgfSxcbiAgICAgICAgICB7IHRvdGFsU2NvcmU6IDgwLCBiZWNhbWVDbGllbnQ6IGZhbHNlLCB3YXNWaWV3ZWQ6IHRydWUsIHdhc0NvbnRhY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICB7IHRvdGFsU2NvcmU6IDcwLCBiZWNhbWVDbGllbnQ6IGZhbHNlLCB3YXNWaWV3ZWQ6IGZhbHNlLCB3YXNDb250YWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgeyB0b3RhbFNjb3JlOiA4NSwgYmVjYW1lQ2xpZW50OiB0cnVlLCB3YXNWaWV3ZWQ6IHRydWUsIHdhc0NvbnRhY3RlZDogdHJ1ZSB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIHByaXNtYVNlcnZpY2UubWF0Y2hIaXN0b3J5LmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKHRlc3RNYXRjaERhdGEpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0TWF0Y2hpbmdQZXJmb3JtYW5jZSgpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQubWV0cmljcykudG9FcXVhbCh7XG4gICAgICAgICAgdG90YWxSZWNvbW1lbmRhdGlvbnM6IDQsXG4gICAgICAgICAgc3VjY2Vzc2Z1bE1hdGNoZXM6IDIsIC8vIDIgYmVjYW1lIGNsaWVudHNcbiAgICAgICAgICB2aWV3ZWRSZWNvbW1lbmRhdGlvbnM6IDMsIC8vIDMgd2VyZSB2aWV3ZWRcbiAgICAgICAgICBjb250YWN0ZWRUaGVyYXBpc3RzOiAyLCAvLyAyIHdlcmUgY29udGFjdGVkXG4gICAgICAgICAgYXZlcmFnZU1hdGNoU2NvcmU6IDgxLjI1LCAvLyAoOTArODArNzArODUpLzRcbiAgICAgICAgICBjb252ZXJzaW9uUmF0ZTogNTAuMCwgLy8gMi80ICogMTAwXG4gICAgICAgICAgY2xpY2tUaHJvdWdoUmF0ZTogNzUuMCwgLy8gMy80ICogMTAwXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YWJhc2VFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgcHJpc21hU2VydmljZS5tYXRjaEhpc3RvcnkuZmluZE1hbnkubW9ja1JlamVjdGVkVmFsdWUoZGF0YWJhc2VFcnJvcik7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZ2V0TWF0Y2hpbmdQZXJmb3JtYW5jZSgpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICAgJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJ1xuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb250ZW50IE1vZGVyYXRpb24nLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ2dldEZsYWdnZWRDb250ZW50JywgKCkgPT4ge1xuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbbW9ja1Bvc3RdKTtcbiAgICAgICAgcHJpc21hU2VydmljZS5jb21tZW50LmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFttb2NrQ29tbWVudF0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmV0cmlldmUgZmxhZ2dlZCBjb250ZW50IHdpdGggcGFnaW5hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBwYWdlOiAxLCBsaW1pdDogMTAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRGbGFnZ2VkQ29udGVudChwYXJhbXMpO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZToge30sXG4gICAgICAgICAgc2tpcDogMCxcbiAgICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcm9vbToge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJvb21Hcm91cDoge1xuICAgICAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW11bml0eToge1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS5jb21tZW50LmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHt9LFxuICAgICAgICAgIHNraXA6IDAsXG4gICAgICAgICAgdGFrZTogMTAsXG4gICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvc3Q6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgIHBvc3RzOiBbbW9ja1Bvc3RdLFxuICAgICAgICAgIGNvbW1lbnRzOiBbbW9ja0NvbW1lbnRdLFxuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgdG90YWxJdGVtczogMixcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBmaWx0ZXIgYnkgY29udGVudCB0eXBlIC0gcG9zdHMgb25seScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0geyB0eXBlOiAncG9zdCcsIHBhZ2U6IDEsIGxpbWl0OiAxMCB9O1xuICAgICAgICBhd2FpdCBzZXJ2aWNlLmdldEZsYWdnZWRDb250ZW50KHBhcmFtcyk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucG9zdC5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHdoZXJlOiB7fSxcbiAgICAgICAgICBza2lwOiAwLFxuICAgICAgICAgIHRha2U6IDEwLFxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICBpbmNsdWRlOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLmNvbW1lbnQuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZToge30sXG4gICAgICAgICAgc2tpcDogMCxcbiAgICAgICAgICB0YWtlOiAwLCAvLyBTaG91bGQgYmUgMCBmb3IgcG9zdHMgb25seVxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICBpbmNsdWRlOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IGNvbnRlbnQgdHlwZSAtIGNvbW1lbnRzIG9ubHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgdHlwZTogJ2NvbW1lbnQnLCBwYWdlOiAxLCBsaW1pdDogMTAgfTtcbiAgICAgICAgYXdhaXQgc2VydmljZS5nZXRGbGFnZ2VkQ29udGVudChwYXJhbXMpO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZToge30sXG4gICAgICAgICAgc2tpcDogMCxcbiAgICAgICAgICB0YWtlOiAwLCAvLyBTaG91bGQgYmUgMCBmb3IgY29tbWVudHMgb25seVxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICBpbmNsdWRlOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLmNvbW1lbnQuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZToge30sXG4gICAgICAgICAgc2tpcDogMCxcbiAgICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgaW5jbHVkZTogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBwYWdpbmF0aW9uIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBwYWdlOiAzLCBsaW1pdDogNSB9O1xuICAgICAgICBhd2FpdCBzZXJ2aWNlLmdldEZsYWdnZWRDb250ZW50KHBhcmFtcyk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucG9zdC5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgc2tpcDogMTAsIC8vICgzLTEpICogNVxuICAgICAgICAgICAgdGFrZTogNSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHJlc3VsdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuY29tbWVudC5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBwYWdlOiAxLCBsaW1pdDogMTAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRGbGFnZ2VkQ29udGVudChwYXJhbXMpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgIHBvc3RzOiBbXSxcbiAgICAgICAgICBjb21tZW50czogW10sXG4gICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICB0b3RhbEl0ZW1zOiAwLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGFiYXNlRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kTWFueS5tb2NrUmVqZWN0ZWRWYWx1ZShkYXRhYmFzZUVycm9yKTtcblxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7IHBhZ2U6IDEsIGxpbWl0OiAxMCB9O1xuICAgICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5nZXRGbGFnZ2VkQ29udGVudChwYXJhbXMpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICAgJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJ1xuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnbW9kZXJhdGVDb250ZW50JywgKCkgPT4ge1xuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICBjb25zdCBtb2NrVHggPSB7XG4gICAgICAgICAgICBwb3N0OiB7XG4gICAgICAgICAgICAgIGRlbGV0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQb3N0KSxcbiAgICAgICAgICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQb3N0KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21tZW50OiB7XG4gICAgICAgICAgICAgIGRlbGV0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb21tZW50KSxcbiAgICAgICAgICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb21tZW50KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdWRpdExvZzoge1xuICAgICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG1vY2tUeCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVtb3ZlIHBvc3Qgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLm1vZGVyYXRlQ29udGVudChcbiAgICAgICAgICAncG9zdCcsXG4gICAgICAgICAgJ3Bvc3QtMTIzJyxcbiAgICAgICAgICAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAncmVtb3ZlJyxcbiAgICAgICAgICAnSW5hcHByb3ByaWF0ZSBjb250ZW50J1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLiR0cmFuc2FjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGFjdGlvbjogJ3JlbW92ZScsXG4gICAgICAgICAgbW9kZXJhdGVkQ29udGVudDogbW9ja1Bvc3QsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYXBwcm92ZSBwb3N0IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5tb2RlcmF0ZUNvbnRlbnQoXG4gICAgICAgICAgJ3Bvc3QnLFxuICAgICAgICAgICdwb3N0LTEyMycsXG4gICAgICAgICAgJ2FkbWluLTEyMycsXG4gICAgICAgICAgJ2FwcHJvdmUnLFxuICAgICAgICAgICdDb250ZW50IGlzIGFjY2VwdGFibGUnXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBhY3Rpb246ICdhcHByb3ZlJyxcbiAgICAgICAgICBtb2RlcmF0ZWRDb250ZW50OiBtb2NrUG9zdCxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBmbGFnIHBvc3Qgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLm1vZGVyYXRlQ29udGVudChcbiAgICAgICAgICAncG9zdCcsXG4gICAgICAgICAgJ3Bvc3QtMTIzJyxcbiAgICAgICAgICAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAnZmxhZycsXG4gICAgICAgICAgJ05lZWRzIHJldmlldydcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGFjdGlvbjogJ2ZsYWcnLFxuICAgICAgICAgIG1vZGVyYXRlZENvbnRlbnQ6IG1vY2tQb3N0LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJlbW92ZSBjb21tZW50IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5tb2RlcmF0ZUNvbnRlbnQoXG4gICAgICAgICAgJ2NvbW1lbnQnLFxuICAgICAgICAgICdjb21tZW50LTEyMycsXG4gICAgICAgICAgJ2FkbWluLTEyMycsXG4gICAgICAgICAgJ3JlbW92ZScsXG4gICAgICAgICAgJ1NwYW0gY29udGVudCdcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGFjdGlvbjogJ3JlbW92ZScsXG4gICAgICAgICAgbW9kZXJhdGVkQ29udGVudDogbW9ja0NvbW1lbnQsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGF1ZGl0IGxvZyBmb3IgcG9zdCBtb2RlcmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgY2FwdHVyZWRUeDogYW55O1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLiR0cmFuc2FjdGlvbi5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgY29uc3QgbW9ja1R4ID0ge1xuICAgICAgICAgICAgcG9zdDoge1xuICAgICAgICAgICAgICBkZWxldGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUG9zdCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXVkaXRMb2c6IHtcbiAgICAgICAgICAgICAgY3JlYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNhcHR1cmVkVHggPSBtb2NrVHg7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG1vY2tUeCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IHNlcnZpY2UubW9kZXJhdGVDb250ZW50KFxuICAgICAgICAgICdwb3N0JyxcbiAgICAgICAgICAncG9zdC0xMjMnLFxuICAgICAgICAgICdhZG1pbi0xMjMnLFxuICAgICAgICAgICdyZW1vdmUnLFxuICAgICAgICAgICdJbmFwcHJvcHJpYXRlIGNvbnRlbnQnXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KGNhcHR1cmVkVHguYXVkaXRMb2cuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXNlcklkOiAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAgIGFjdGlvbjogJ01PREVSQVRFX1BPU1QnLFxuICAgICAgICAgICAgZW50aXR5OiAncG9zdCcsXG4gICAgICAgICAgICBlbnRpdHlJZDogJ3Bvc3QtMTIzJyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIGNvbnRlbnRJZDogJ3Bvc3QtMTIzJyxcbiAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdwb3N0JyxcbiAgICAgICAgICAgICAgbW9kZXJhdGlvbkFjdGlvbjogJ3JlbW92ZScsXG4gICAgICAgICAgICAgIHJlYXNvbjogJ0luYXBwcm9wcmlhdGUgY29udGVudCcsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogbW9ja0RhdGUudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgYXVkaXQgbG9nIGZvciBjb21tZW50IG1vZGVyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBjYXB0dXJlZFR4OiBhbnk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICBjb25zdCBtb2NrVHggPSB7XG4gICAgICAgICAgICBjb21tZW50OiB7XG4gICAgICAgICAgICAgIGRlbGV0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb21tZW50KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdWRpdExvZzoge1xuICAgICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgICAgY2FwdHVyZWRUeCA9IG1vY2tUeDtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobW9ja1R4KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgc2VydmljZS5tb2RlcmF0ZUNvbnRlbnQoXG4gICAgICAgICAgJ2NvbW1lbnQnLFxuICAgICAgICAgICdjb21tZW50LTEyMycsXG4gICAgICAgICAgJ2FkbWluLTEyMycsXG4gICAgICAgICAgJ3JlbW92ZScsXG4gICAgICAgICAgJ1NwYW0gY29udGVudCdcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QoY2FwdHVyZWRUeC5hdWRpdExvZy5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB1c2VySWQ6ICdhZG1pbi0xMjMnLFxuICAgICAgICAgICAgYWN0aW9uOiAnTU9ERVJBVEVfQ09NTUVOVCcsXG4gICAgICAgICAgICBlbnRpdHk6ICdjb21tZW50JyxcbiAgICAgICAgICAgIGVudGl0eUlkOiAnY29tbWVudC0xMjMnLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgY29udGVudElkOiAnY29tbWVudC0xMjMnLFxuICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2NvbW1lbnQnLFxuICAgICAgICAgICAgICBtb2RlcmF0aW9uQWN0aW9uOiAncmVtb3ZlJyxcbiAgICAgICAgICAgICAgcmVhc29uOiAnU3BhbSBjb250ZW50JyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBtb2NrRGF0ZS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBtb2RlcmF0aW9uIHdpdGhvdXQgcmVhc29uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBzZXJ2aWNlLm1vZGVyYXRlQ29udGVudChcbiAgICAgICAgICAncG9zdCcsXG4gICAgICAgICAgJ3Bvc3QtMTIzJyxcbiAgICAgICAgICAnYWRtaW4tMTIzJyxcbiAgICAgICAgICAnYXBwcm92ZSdcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSB0cmFuc2FjdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uRXJyb3IgPSBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGZhaWxlZCcpO1xuICAgICAgICBwcmlzbWFTZXJ2aWNlLiR0cmFuc2FjdGlvbi5tb2NrUmVqZWN0ZWRWYWx1ZSh0cmFuc2FjdGlvbkVycm9yKTtcblxuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgc2VydmljZS5tb2RlcmF0ZUNvbnRlbnQoXG4gICAgICAgICAgICAncG9zdCcsXG4gICAgICAgICAgICAncG9zdC0xMjMnLFxuICAgICAgICAgICAgJ2FkbWluLTEyMycsXG4gICAgICAgICAgICAncmVtb3ZlJyxcbiAgICAgICAgICAgICdJbmFwcHJvcHJpYXRlIGNvbnRlbnQnXG4gICAgICAgICAgKVxuICAgICAgICApLnJlamVjdHMudG9UaHJvdygnVHJhbnNhY3Rpb24gZmFpbGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5rbm93biBjb250ZW50IHR5cGVzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBjYXB0dXJlZFR4OiBhbnk7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICBjb25zdCBtb2NrVHggPSB7XG4gICAgICAgICAgICBhdWRpdExvZzoge1xuICAgICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgICAgY2FwdHVyZWRUeCA9IG1vY2tUeDtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobW9ja1R4KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5tb2RlcmF0ZUNvbnRlbnQoXG4gICAgICAgICAgJ3Vua25vd24nLFxuICAgICAgICAgICdjb250ZW50LTEyMycsXG4gICAgICAgICAgJ2FkbWluLTEyMycsXG4gICAgICAgICAgJ3JlbW92ZScsXG4gICAgICAgICAgJ1Vua25vd24gY29udGVudCB0eXBlJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgYWN0aW9uOiAncmVtb3ZlJyxcbiAgICAgICAgICBtb2RlcmF0ZWRDb250ZW50OiB1bmRlZmluZWQsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFZGdlIENhc2VzIGFuZCBFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IHRoZXJhcGlzdCBhcHBsaWNhdGlvbiBwcm9jZXNzaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBwcm92ZVByb21pc2UgPSBzZXJ2aWNlLmFwcHJvdmVUaGVyYXBpc3RBcHBsaWNhdGlvbihcbiAgICAgICAgJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAnYWRtaW4tMTIzJ1xuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlamVjdFByb21pc2UgPSBzZXJ2aWNlLnJlamVjdFRoZXJhcGlzdEFwcGxpY2F0aW9uKFxuICAgICAgICAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICdhZG1pbi0xMjQnLFxuICAgICAgICAnSW5zdWZmaWNpZW50IGV4cGVyaWVuY2UnXG4gICAgICApO1xuXG4gICAgICAvLyBNb2NrIGRpZmZlcmVudCB0cmFuc2FjdGlvbiBvdXRjb21lc1xuICAgICAgcHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb25cbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHN1Y2Nlc3M6IHRydWUsIHRoZXJhcGlzdDogbW9ja0FwcHJvdmVkVGhlcmFwaXN0IH0pXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdSZWNvcmQgYWxyZWFkeSBwcm9jZXNzZWQnKSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoW2FwcHJvdmVQcm9taXNlLCByZWplY3RQcm9taXNlXSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHRzWzBdLnN0YXR1cykudG9CZSgnZnVsZmlsbGVkJyk7XG4gICAgICBleHBlY3QocmVzdWx0c1sxXS5zdGF0dXMpLnRvQmUoJ3JlamVjdGVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB2ZXJ5IGxhcmdlIHVzZXIgZGF0YXNldHMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZVVzZXJMaXN0ID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwMDAgfSwgKF8sIGkpID0+ICh7XG4gICAgICAgIC4uLm1vY2tVc2VyLFxuICAgICAgICBpZDogYHVzZXItJHtpfWAsXG4gICAgICAgIGVtYWlsOiBgdXNlciR7aX1AZXhhbXBsZS5jb21gLFxuICAgICAgfSkpO1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUobGFyZ2VVc2VyTGlzdC5zbGljZSgwLCAxMDApKTtcbiAgICAgIHByaXNtYVNlcnZpY2UudXNlci5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgxMDAwMCk7XG5cbiAgICAgIGNvbnN0IHBhcmFtcyA9IHsgcGFnZTogMSwgbGltaXQ6IDEwMCB9O1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0QWxsVXNlcnMocGFyYW1zKTtcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnVzZXJzKS50b0hhdmVMZW5ndGgoMTAwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWxDb3VudCkudG9CZSgxMDAwMCk7XG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsUGFnZXMpLnRvQmUoMTAwKTtcbiAgICAgIGV4cGVjdChlbmRUaW1lIC0gc3RhcnRUaW1lKS50b0JlTGVzc1RoYW4oMTAwMCk7IC8vIFNob3VsZCBjb21wbGV0ZSB3aXRoaW4gMSBzZWNvbmRcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNwZWNpYWwgY2hhcmFjdGVycyBpbiBzZWFyY2ggcXVlcmllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNwZWNpYWxDaGFyU2VhcmNoID0gXCJKb2huIE8nQ29ubm9yICYgQ28uIDxzY3JpcHQ+XCI7XG4gICAgICBjb25zdCBwYXJhbXMgPSB7IHNlYXJjaDogc3BlY2lhbENoYXJTZWFyY2gsIHBhZ2U6IDEsIGxpbWl0OiAxMCB9O1xuXG4gICAgICBhd2FpdCBzZXJ2aWNlLmdldEFsbFVzZXJzKHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBPUjogW1xuICAgICAgICAgICAgeyBmaXJzdE5hbWU6IHsgY29udGFpbnM6IHNwZWNpYWxDaGFyU2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICAgIHsgbGFzdE5hbWU6IHsgY29udGFpbnM6IHNwZWNpYWxDaGFyU2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICAgIHsgZW1haWw6IHsgY29udGFpbnM6IHNwZWNpYWxDaGFyU2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBza2lwOiAwLFxuICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICBzZWxlY3Q6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBkYXRlIHJhbmdlcyBpbiBtYXRjaGluZyBwZXJmb3JtYW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRTdGFydERhdGUgPSAnaW52YWxpZC1kYXRlJztcbiAgICAgIGNvbnN0IGludmFsaWRFbmREYXRlID0gJ2Fub3RoZXItaW52YWxpZC1kYXRlJztcblxuICAgICAgYXdhaXQgc2VydmljZS5nZXRNYXRjaGluZ1BlcmZvcm1hbmNlKGludmFsaWRTdGFydERhdGUsIGludmFsaWRFbmREYXRlKTtcblxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBncmFjZWZ1bGx5IGFuZCBjcmVhdGUgRGF0ZSBvYmplY3RzXG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5tYXRjaEhpc3RvcnkuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgIGd0ZTogbmV3IERhdGUoaW52YWxpZFN0YXJ0RGF0ZSksIC8vIFdpbGwgYmUgSW52YWxpZCBEYXRlXG4gICAgICAgICAgICBsdGU6IG5ldyBEYXRlKGludmFsaWRFbmREYXRlKSwgLy8gV2lsbCBiZSBJbnZhbGlkIERhdGVcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBudWxsL3VuZGVmaW5lZCB2YWx1ZXMgaW4gcGxhdGZvcm0gb3ZlcnZpZXcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnVzZXIuY291bnQubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLmNsaWVudC5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgcHJpc21hU2VydmljZS50aGVyYXBpc3QuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0UGxhdGZvcm1PdmVydmlldygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lm92ZXJ2aWV3LnRvdGFsVXNlcnMpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QocmVzdWx0Lm92ZXJ2aWV3LnRvdGFsQ2xpZW50cykudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZWNlbnRBY3Rpdml0eSkudG9CZU51bGwoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIHRpbWVvdXRzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0aW1lb3V0RXJyb3IgPSBuZXcgRXJyb3IoJ0Nvbm5lY3Rpb24gdGltZW91dCcpO1xuICAgICAgdGltZW91dEVycm9yLm5hbWUgPSAnVGltZW91dEVycm9yJztcblxuICAgICAgcHJpc21hU2VydmljZS51c2VyLmZpbmRNYW55Lm1vY2tSZWplY3RlZFZhbHVlKHRpbWVvdXRFcnJvcik7XG5cbiAgICAgIGNvbnN0IHBhcmFtcyA9IHsgcGFnZTogMSwgbGltaXQ6IDEwIH07XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5nZXRBbGxVc2VycyhwYXJhbXMpKS5yZWplY3RzLnRvVGhyb3coJ0Nvbm5lY3Rpb24gdGltZW91dCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIHRoZXJhcHkgYXBwbGljYXRpb24gZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGZvcm1lZFRoZXJhcGlzdCA9IHtcbiAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgIHVzZXJJZDogdW5kZWZpbmVkLFxuICAgICAgICBzdGF0dXM6ICdpbnZhbGlkX3N0YXR1cycsXG4gICAgICAgIHN1Ym1pc3Npb25EYXRlOiAnaW52YWxpZF9kYXRlJyxcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgIH07XG5cbiAgICAgIHByaXNtYVNlcnZpY2UudGhlcmFwaXN0LmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFttYWxmb3JtZWRUaGVyYXBpc3RdKTtcbiAgICAgIHByaXNtYVNlcnZpY2UudGhlcmFwaXN0LmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlKDEpO1xuXG4gICAgICBjb25zdCBwYXJhbXMgPSB7IHBhZ2U6IDEsIGxpbWl0OiAxMCB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRBbGxUaGVyYXBpc3RBcHBsaWNhdGlvbnMocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5hcHBsaWNhdGlvbnMpLnRvRXF1YWwoW21hbGZvcm1lZFRoZXJhcGlzdF0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgYW5kIFNjYWxhYmlsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGJ1bGsgdXNlciBvcGVyYXRpb25zIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYnVsa1VzZXJJZHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAgfSwgKF8sIGkpID0+IGB1c2VyLSR7aX1gKTtcbiAgICAgIFxuICAgICAgLy8gTW9jayBwYXJhbGxlbCBwcm9jZXNzaW5nXG4gICAgICBjb25zdCBwcm9taXNlcyA9IGJ1bGtVc2VySWRzLm1hcCgodXNlcklkKSA9PiB7XG4gICAgICAgIHByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgLi4ubW9ja1VzZXIsXG4gICAgICAgICAgaWQ6IHVzZXJJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlLmdldFVzZXIodXNlcklkKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKDEwMCk7XG4gICAgICBleHBlY3QoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9CZUxlc3NUaGFuKDIwMDApOyAvLyBTaG91bGQgY29tcGxldGUgd2l0aGluIDIgc2Vjb25kc1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaGlnaC12b2x1bWUgY29udGVudCBtb2RlcmF0aW9uIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYnVsa01vZGVyYXRpb25Qcm9taXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDUwIH0sIChfLCBpKSA9PiB7XG4gICAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBhY3Rpb246ICdyZW1vdmUnLFxuICAgICAgICAgIG1vZGVyYXRlZENvbnRlbnQ6IHsgaWQ6IGBjb250ZW50LSR7aX1gIH0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2VydmljZS5tb2RlcmF0ZUNvbnRlbnQoXG4gICAgICAgICAgJ3Bvc3QnLFxuICAgICAgICAgIGBwb3N0LSR7aX1gLFxuICAgICAgICAgICdhZG1pbi0xMjMnLFxuICAgICAgICAgICdyZW1vdmUnLFxuICAgICAgICAgICdCdWxrIG1vZGVyYXRpb24nXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChidWxrTW9kZXJhdGlvblByb21pc2VzKTtcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKDUwKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLmV2ZXJ5KHIgPT4gci5zdWNjZXNzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChlbmRUaW1lIC0gc3RhcnRUaW1lKS50b0JlTGVzc1RoYW4oMzAwMCk7IC8vIFNob3VsZCBjb21wbGV0ZSB3aXRoaW4gMyBzZWNvbmRzXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1haW50YWluIHBlcmZvcm1hbmNlIHdpdGggY29tcGxleCBmaWx0ZXJpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wbGV4UGFyYW1zID0ge1xuICAgICAgICByb2xlOiAnY2xpZW50JyxcbiAgICAgICAgc2VhcmNoOiAnam9obiBzbWl0aCBkZXByZXNzaW9uIGFueGlldHknLFxuICAgICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgICBzb3J0Qnk6ICdsYXN0TmFtZScsXG4gICAgICAgIHNvcnRPcmRlcjogJ2FzYycsXG4gICAgICAgIHBhZ2U6IDUwLFxuICAgICAgICBsaW1pdDogMTAwLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbGFyZ2VGaWx0ZXJlZFJlc3VsdCA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMCB9LCAoXywgaSkgPT4gKHtcbiAgICAgICAgLi4ubW9ja1VzZXIsXG4gICAgICAgIGlkOiBgdXNlci0ke2l9YCxcbiAgICAgICAgbGFzdE5hbWU6IGBTbWl0aCR7aX1gLFxuICAgICAgfSkpO1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUobGFyZ2VGaWx0ZXJlZFJlc3VsdCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnVzZXIuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoNTAwMCk7XG5cbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdldEFsbFVzZXJzKGNvbXBsZXhQYXJhbXMpO1xuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQudXNlcnMpLnRvSGF2ZUxlbmd0aCgxMDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC50b3RhbENvdW50KS50b0JlKDUwMDApO1xuICAgICAgZXhwZWN0KGVuZFRpbWUgLSBzdGFydFRpbWUpLnRvQmVMZXNzVGhhbigxMDAwKTsgLy8gU2hvdWxkIGNvbXBsZXRlIHdpdGhpbiAxIHNlY29uZFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRGF0YSBJbnRlZ3JpdHkgYW5kIEF1ZGl0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZW5zdXJlIGF1ZGl0IGxvZ3MgYXJlIGNyZWF0ZWQgZm9yIGFsbCBhZG1pbmlzdHJhdGl2ZSBhY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXVkaXRBY3Rpb25zID0gW1xuICAgICAgICAoKSA9PiBzZXJ2aWNlLmFwcHJvdmVUaGVyYXBpc3RBcHBsaWNhdGlvbigndGhlcmFwaXN0LTEyMycsICdhZG1pbi0xMjMnKSxcbiAgICAgICAgKCkgPT4gc2VydmljZS5yZWplY3RUaGVyYXBpc3RBcHBsaWNhdGlvbigndGhlcmFwaXN0LTEyMycsICdhZG1pbi0xMjMnLCAncmVhc29uJyksXG4gICAgICAgICgpID0+IHNlcnZpY2Uuc3VzcGVuZFVzZXIoJ3VzZXItMTIzJywgJ2FkbWluLTEyMycsICdyZWFzb24nKSxcbiAgICAgICAgKCkgPT4gc2VydmljZS51bnN1c3BlbmRVc2VyKCd1c2VyLTEyMycsICdhZG1pbi0xMjMnKSxcbiAgICAgICAgKCkgPT4gc2VydmljZS5tb2RlcmF0ZUNvbnRlbnQoJ3Bvc3QnLCAncG9zdC0xMjMnLCAnYWRtaW4tMTIzJywgJ3JlbW92ZScpLFxuICAgICAgXTtcblxuICAgICAgbGV0IGF1ZGl0TG9nQ2FsbENvdW50ID0gMDtcbiAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgY29uc3QgbW9ja1R4ID0ge1xuICAgICAgICAgIHRoZXJhcGlzdDogeyB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSkgfSxcbiAgICAgICAgICB1c2VyOiB7IHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSB9LFxuICAgICAgICAgIHBvc3Q6IHsgZGVsZXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pIH0sXG4gICAgICAgICAgYXVkaXRMb2c6IHtcbiAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgICAgICAgIGF1ZGl0TG9nQ2FsbENvdW50Kys7XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe30pO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG1vY2tUeCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXVkaXRBY3Rpb25zLm1hcChhY3Rpb24gPT4gYWN0aW9uKCkpKTtcblxuICAgICAgZXhwZWN0KGF1ZGl0TG9nQ2FsbENvdW50KS50b0JlKDUpOyAvLyBPbmUgYXVkaXQgbG9nIHBlciBhY3Rpb25cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW5zdXJlIHByb3BlciB0cmFuc2FjdGlvbiByb2xsYmFjayBvbiBmYWlsdXJlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCB0cmFuc2FjdGlvbkNhbGxDb3VudCA9IDA7XG4gICAgICBwcmlzbWFTZXJ2aWNlLiR0cmFuc2FjdGlvbi5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHRyYW5zYWN0aW9uQ2FsbENvdW50Kys7XG4gICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICB0aGVyYXBpc3Q6IHtcbiAgICAgICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignVXBkYXRlIGZhaWxlZCcpKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGF1ZGl0TG9nOiB7XG4gICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG1vY2tUeCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZXJ2aWNlLmFwcHJvdmVUaGVyYXBpc3RBcHBsaWNhdGlvbigndGhlcmFwaXN0LTEyMycsICdhZG1pbi0xMjMnKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1VwZGF0ZSBmYWlsZWQnKTtcblxuICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uQ2FsbENvdW50KS50b0JlKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBkYXRhIGNvbnNpc3RlbmN5IGFjcm9zcyByZWxhdGVkIGVudGl0aWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGNhcHR1cmVkVHg6IGFueTtcbiAgICAgIHByaXNtYVNlcnZpY2UuJHRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgY29uc3QgbW9ja1R4ID0ge1xuICAgICAgICAgIHRoZXJhcGlzdDoge1xuICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0FwcHJvdmVkVGhlcmFwaXN0KSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgLi4ubW9ja1VzZXIsXG4gICAgICAgICAgICAgIHJvbGU6ICd0aGVyYXBpc3QnLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhdWRpdExvZzoge1xuICAgICAgICAgICAgY3JlYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNhcHR1cmVkVHggPSBtb2NrVHg7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhtb2NrVHgpO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHNlcnZpY2UuYXBwcm92ZVRoZXJhcGlzdEFwcGxpY2F0aW9uKCd0aGVyYXBpc3QtMTIzJywgJ2FkbWluLTEyMycpO1xuXG4gICAgICAvLyBWZXJpZnkgYm90aCB0aGVyYXBpc3QgYW5kIHVzZXIgZW50aXRpZXMgYXJlIHVwZGF0ZWQgY29uc2lzdGVudGx5XG4gICAgICBleHBlY3QoY2FwdHVyZWRUeC50aGVyYXBpc3QudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IHVzZXJJZDogJ3RoZXJhcGlzdC0xMjMnIH0sXG4gICAgICAgIGRhdGE6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBzdGF0dXM6ICdhcHByb3ZlZCcsXG4gICAgICAgICAgcHJvY2Vzc2VkQnlBZG1pbklkOiAnYWRtaW4tMTIzJyxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNhcHR1cmVkVHgudXNlci51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6ICd0aGVyYXBpc3QtMTIzJyB9LFxuICAgICAgICBkYXRhOiB7IHJvbGU6ICd0aGVyYXBpc3QnIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgYWRtaW4gcGVybWlzc2lvbnMgdGhyb3VnaCBhdWRpdCB0cmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhZG1pbkFjdGlvbnMgPSBbXG4gICAgICAgIHsgYWN0aW9uOiAnQVBQUk9WRV9USEVSQVBJU1RfQVBQTElDQVRJT04nLCBlbnRpdHk6ICd0aGVyYXBpc3QnIH0sXG4gICAgICAgIHsgYWN0aW9uOiAnUkVKRUNUX1RIRVJBUElTVF9BUFBMSUNBVElPTicsIGVudGl0eTogJ3RoZXJhcGlzdCcgfSxcbiAgICAgICAgeyBhY3Rpb246ICdTVVNQRU5EX1VTRVInLCBlbnRpdHk6ICd1c2VyJyB9LFxuICAgICAgICB7IGFjdGlvbjogJ1VOU1VTUEVORF9VU0VSJywgZW50aXR5OiAndXNlcicgfSxcbiAgICAgICAgeyBhY3Rpb246ICdNT0RFUkFURV9QT1NUJywgZW50aXR5OiAncG9zdCcgfSxcbiAgICAgICAgeyBhY3Rpb246ICdNT0RFUkFURV9DT01NRU5UJywgZW50aXR5OiAnY29tbWVudCcgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGNhcHR1cmVkQXVkaXRMb2dzOiBhbnlbXSA9IFtdO1xuICAgICAgcHJpc21hU2VydmljZS4kdHJhbnNhY3Rpb24ubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChjYWxsYmFjaykgPT4ge1xuICAgICAgICBjb25zdCBtb2NrVHggPSB7XG4gICAgICAgICAgdGhlcmFwaXN0OiB7IHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSB9LFxuICAgICAgICAgIHVzZXI6IHsgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pIH0sXG4gICAgICAgICAgcG9zdDogeyBkZWxldGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSkgfSxcbiAgICAgICAgICBjb21tZW50OiB7IGRlbGV0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSB9LFxuICAgICAgICAgIGF1ZGl0TG9nOiB7XG4gICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgY2FwdHVyZWRBdWRpdExvZ3MucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7fSk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobW9ja1R4KTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBzZXJ2aWNlLmFwcHJvdmVUaGVyYXBpc3RBcHBsaWNhdGlvbigndGhlcmFwaXN0LTEyMycsICdhZG1pbi0xMjMnKTtcbiAgICAgIGF3YWl0IHNlcnZpY2UucmVqZWN0VGhlcmFwaXN0QXBwbGljYXRpb24oJ3RoZXJhcGlzdC0xMjQnLCAnYWRtaW4tMTIzJywgJ3JlYXNvbicpO1xuICAgICAgYXdhaXQgc2VydmljZS5zdXNwZW5kVXNlcigndXNlci0xMjMnLCAnYWRtaW4tMTIzJywgJ3JlYXNvbicpO1xuICAgICAgYXdhaXQgc2VydmljZS51bnN1c3BlbmRVc2VyKCd1c2VyLTEyNCcsICdhZG1pbi0xMjMnKTtcbiAgICAgIGF3YWl0IHNlcnZpY2UubW9kZXJhdGVDb250ZW50KCdwb3N0JywgJ3Bvc3QtMTIzJywgJ2FkbWluLTEyMycsICdyZW1vdmUnKTtcbiAgICAgIGF3YWl0IHNlcnZpY2UubW9kZXJhdGVDb250ZW50KCdjb21tZW50JywgJ2NvbW1lbnQtMTIzJywgJ2FkbWluLTEyMycsICdyZW1vdmUnKTtcblxuICAgICAgZXhwZWN0KGNhcHR1cmVkQXVkaXRMb2dzKS50b0hhdmVMZW5ndGgoNik7XG4gICAgICBcbiAgICAgIGNhcHR1cmVkQXVkaXRMb2dzLmZvckVhY2goKGxvZywgaW5kZXgpID0+IHtcbiAgICAgICAgZXhwZWN0KGxvZy5kYXRhLnVzZXJJZCkudG9CZSgnYWRtaW4tMTIzJyk7XG4gICAgICAgIGV4cGVjdChsb2cuZGF0YS5hY3Rpb24pLnRvQmUoYWRtaW5BY3Rpb25zW2luZGV4XS5hY3Rpb24pO1xuICAgICAgICBleHBlY3QobG9nLmRhdGEuZW50aXR5KS50b0JlKGFkbWluQWN0aW9uc1tpbmRleF0uZW50aXR5KTtcbiAgICAgICAgZXhwZWN0KGxvZy5kYXRhLm1ldGFkYXRhLnRpbWVzdGFtcCkudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==