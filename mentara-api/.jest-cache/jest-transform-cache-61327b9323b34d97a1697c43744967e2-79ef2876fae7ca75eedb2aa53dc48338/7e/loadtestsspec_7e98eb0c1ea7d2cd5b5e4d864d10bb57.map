{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/test-utils/performance/load-tests.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/test-utils/performance/load-tests.spec.ts"],"sourcesContent":["/**\n * Load Testing Specification\n *\n * Integration tests for API performance under various load conditions\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { INestApplication } from '@nestjs/common';\nimport { AppModule } from '../../app.module';\nimport { PrismaService } from '../../database/prisma.service';\nimport { LoadTestingSuite } from './load-testing.suite';\nimport { createMockClerkClient, createMockAuthGuard } from '../index';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\ndescribe('API Load Testing', () => {\n  let app: INestApplication;\n  let prisma: PrismaService;\n  let loadTestSuite: LoadTestingSuite;\n\n  beforeAll(async () => {\n    const moduleFixture: TestingModule = await Test.createTestingModule({\n      imports: [AppModule],\n    })\n      .overrideProvider('ClerkClient')\n      .useValue(createMockClerkClient())\n      .overrideGuard('AuthGuard')\n      .useValue(createMockAuthGuard())\n      .compile();\n\n    app = moduleFixture.createNestApplication();\n    prisma = app.get<PrismaService>(PrismaService);\n\n    await app.init();\n\n    loadTestSuite = new LoadTestingSuite(app);\n  });\n\n  afterAll(async () => {\n    await prisma.$disconnect();\n    await app.close();\n  });\n\n  beforeEach(async () => {\n    // Clean database before each test\n    await prisma.$transaction([\n      prisma.preAssessment.deleteMany(),\n      prisma.client.deleteMany(),\n      prisma.therapist.deleteMany(),\n      prisma.user.deleteMany(),\n    ]);\n  });\n\n  describe('Critical Endpoint Performance', () => {\n    it('should handle light load (10 concurrent users)', async () => {\n      const config = {\n        concurrentUsers: 10,\n        requestsPerUser: 10,\n        rampUpTime: 5,\n        testDuration: 30,\n      };\n\n      console.log('ðŸ”¥ Starting light load test...');\n      const results = await loadTestSuite.runFullLoadTestSuite();\n\n      // Assertions for light load\n      results.forEach((result) => {\n        expect(result.successfulRequests).toBeGreaterThan(0);\n        expect(result.errorRate).toBeLessThan(10); // Allow up to 10% error rate for light load\n        expect(result.averageResponseTime).toBeLessThan(5000); // 5 seconds max\n      });\n\n      // Generate and save report\n      const report = loadTestSuite.generatePerformanceReport();\n      await saveTestReport('light-load-test-report.json', report);\n    }, 120000); // 2 minute timeout\n\n    it('should handle medium load (25 concurrent users)', async () => {\n      const config = {\n        concurrentUsers: 25,\n        requestsPerUser: 15,\n        rampUpTime: 10,\n        testDuration: 60,\n      };\n\n      console.log('ðŸ”¥ Starting medium load test...');\n      const results = await loadTestSuite.runFullLoadTestSuite();\n\n      // Assertions for medium load\n      results.forEach((result) => {\n        expect(result.successfulRequests).toBeGreaterThan(0);\n        expect(result.errorRate).toBeLessThan(15); // Allow up to 15% error rate for medium load\n        expect(result.averageResponseTime).toBeLessThan(10000); // 10 seconds max\n      });\n\n      const report = loadTestSuite.generatePerformanceReport();\n      await saveTestReport('medium-load-test-report.json', report);\n    }, 180000); // 3 minute timeout\n\n    it('should maintain basic functionality under heavy load (50 concurrent users)', async () => {\n      const config = {\n        concurrentUsers: 50,\n        requestsPerUser: 20,\n        rampUpTime: 15,\n        testDuration: 120,\n      };\n\n      console.log('ðŸ”¥ Starting heavy load test...');\n      const results = await loadTestSuite.runFullLoadTestSuite();\n\n      // More lenient assertions for heavy load\n      results.forEach((result) => {\n        // At minimum, some requests should succeed\n        expect(result.successfulRequests).toBeGreaterThan(\n          result.totalRequests * 0.5,\n        ); // At least 50% success\n        expect(result.errorRate).toBeLessThan(50); // Allow up to 50% error rate for heavy load\n        expect(result.averageResponseTime).toBeLessThan(30000); // 30 seconds max\n      });\n\n      const report = loadTestSuite.generatePerformanceReport();\n      await saveTestReport('heavy-load-test-report.json', report);\n    }, 300000); // 5 minute timeout\n  });\n\n  describe('Endpoint-Specific Load Tests', () => {\n    it('should test authentication endpoints under load', async () => {\n      // Focused test on auth endpoints which are critical\n      const authEndpoints = [\n        { path: '/auth/me', method: 'GET', requiresAuth: true },\n        { path: '/auth/register/client', method: 'POST', requiresAuth: false },\n      ];\n\n      console.log('ðŸ” Testing authentication endpoints...');\n\n      // Test each endpoint individually with higher load\n      for (const endpoint of authEndpoints) {\n        console.log(`Testing ${endpoint.method} ${endpoint.path}...`);\n\n        // Custom load test for this specific endpoint\n        const result = await loadTestSuite['testEndpointLoad'](endpoint, {\n          concurrentUsers: 30,\n          requestsPerUser: 25,\n          rampUpTime: 10,\n          testDuration: 60,\n        });\n\n        // Auth endpoints should be highly reliable\n        expect(result.errorRate).toBeLessThan(5);\n        expect(result.averageResponseTime).toBeLessThan(2000);\n        expect(result.requestsPerSecond).toBeGreaterThan(10);\n      }\n    }, 180000);\n\n    it('should test real-time messaging endpoints', async () => {\n      const messagingEndpoints = [\n        { path: '/messaging/conversations', method: 'GET', requiresAuth: true },\n        {\n          path: '/messaging/conversations',\n          method: 'POST',\n          requiresAuth: true,\n        },\n      ];\n\n      console.log('ðŸ’¬ Testing messaging endpoints...');\n\n      for (const endpoint of messagingEndpoints) {\n        const result = await loadTestSuite['testEndpointLoad'](endpoint, {\n          concurrentUsers: 40,\n          requestsPerUser: 30,\n          rampUpTime: 12,\n          testDuration: 90,\n        });\n\n        // Messaging should be responsive for real-time feel\n        expect(result.averageResponseTime).toBeLessThan(1500);\n        expect(result.errorRate).toBeLessThan(8);\n      }\n    }, 200000);\n\n    it('should test booking system under peak load', async () => {\n      const bookingEndpoints = [\n        { path: '/booking/meetings', method: 'GET', requiresAuth: true },\n        { path: '/booking/availability', method: 'GET', requiresAuth: true },\n      ];\n\n      console.log('ðŸ“… Testing booking endpoints...');\n\n      for (const endpoint of bookingEndpoints) {\n        const result = await loadTestSuite['testEndpointLoad'](endpoint, {\n          concurrentUsers: 35,\n          requestsPerUser: 20,\n          rampUpTime: 8,\n          testDuration: 60,\n        });\n\n        // Booking system is business critical\n        expect(result.errorRate).toBeLessThan(3);\n        expect(result.averageResponseTime).toBeLessThan(3000);\n        expect(result.memoryGrowth).toBeLessThan(30); // MB\n      }\n    }, 150000);\n  });\n\n  describe('Memory and Resource Management', () => {\n    it('should not have significant memory leaks under sustained load', async () => {\n      console.log('ðŸ§  Testing memory management...');\n\n      const initialMemory = process.memoryUsage().heapUsed / 1024 / 1024;\n\n      // Run multiple cycles of load tests\n      for (let cycle = 0; cycle < 3; cycle++) {\n        console.log(`Memory test cycle ${cycle + 1}/3...`);\n\n        await loadTestSuite['testEndpointLoad'](\n          { path: '/dashboard/user', method: 'GET', requiresAuth: true },\n          {\n            concurrentUsers: 20,\n            requestsPerUser: 15,\n            rampUpTime: 5,\n            testDuration: 30,\n          },\n        );\n\n        // Force garbage collection if available\n        if (global.gc) {\n          global.gc();\n        }\n\n        await new Promise((resolve) => setTimeout(resolve, 1000)); // Brief pause\n      }\n\n      const finalMemory = process.memoryUsage().heapUsed / 1024 / 1024;\n      const memoryGrowth = finalMemory - initialMemory;\n\n      console.log(`Memory growth: ${memoryGrowth.toFixed(2)}MB`);\n\n      // Memory should not grow excessively\n      expect(memoryGrowth).toBeLessThan(100); // Less than 100MB growth\n    }, 180000);\n\n    it('should handle concurrent database operations efficiently', async () => {\n      console.log('ðŸ—„ï¸ Testing database performance...');\n\n      // Test endpoints that involve complex database operations\n      const dbIntensiveEndpoints = [\n        { path: '/search/therapists', method: 'GET', requiresAuth: true },\n        { path: '/communities', method: 'GET', requiresAuth: true },\n        { path: '/posts', method: 'GET', requiresAuth: true },\n      ];\n\n      for (const endpoint of dbIntensiveEndpoints) {\n        const result = await loadTestSuite['testEndpointLoad'](endpoint, {\n          concurrentUsers: 25,\n          requestsPerUser: 10,\n          rampUpTime: 8,\n          testDuration: 45,\n        });\n\n        // Database operations should be reasonably fast\n        expect(result.averageResponseTime).toBeLessThan(5000);\n        expect(result.errorRate).toBeLessThan(10);\n\n        console.log(\n          `${endpoint.path}: ${result.averageResponseTime.toFixed(2)}ms avg, ${result.errorRate.toFixed(2)}% errors`,\n        );\n      }\n    }, 200000);\n  });\n\n  describe('Edge Cases and Stress Testing', () => {\n    it('should gracefully handle request spikes', async () => {\n      console.log('âš¡ Testing request spike handling...');\n\n      // Simulate sudden traffic spike\n      const spikeResult = await loadTestSuite['testEndpointLoad'](\n        { path: '/auth/me', method: 'GET', requiresAuth: true },\n        {\n          concurrentUsers: 100, // Sudden spike\n          requestsPerUser: 5,\n          rampUpTime: 2, // Very fast ramp up\n          testDuration: 15,\n        },\n      );\n\n      // System should handle spikes without complete failure\n      expect(spikeResult.successfulRequests).toBeGreaterThan(0);\n      expect(spikeResult.errorRate).toBeLessThan(80); // Allow high error rate but not complete failure\n\n      console.log(\n        `Spike test: ${spikeResult.successfulRequests}/${spikeResult.totalRequests} successful`,\n      );\n    }, 120000);\n\n    it('should handle mixed endpoint load patterns', async () => {\n      console.log('ðŸ”€ Testing mixed load patterns...');\n\n      // Test multiple endpoints simultaneously (more realistic scenario)\n      const mixedEndpoints = [\n        { path: '/auth/me', method: 'GET', requiresAuth: true },\n        { path: '/dashboard/user', method: 'GET', requiresAuth: true },\n        {\n          path: '/notifications/unread-count',\n          method: 'GET',\n          requiresAuth: true,\n        },\n        { path: '/messaging/conversations', method: 'GET', requiresAuth: true },\n      ];\n\n      const promises = mixedEndpoints.map((endpoint) =>\n        loadTestSuite['testEndpointLoad'](endpoint, {\n          concurrentUsers: 15,\n          requestsPerUser: 12,\n          rampUpTime: 6,\n          testDuration: 40,\n        }),\n      );\n\n      const results = await Promise.all(promises);\n\n      // All endpoints should maintain reasonable performance\n      results.forEach((result, index) => {\n        expect(result.errorRate).toBeLessThan(15);\n        expect(result.averageResponseTime).toBeLessThan(8000);\n\n        console.log(\n          `${mixedEndpoints[index].path}: ${result.averageResponseTime.toFixed(2)}ms avg`,\n        );\n      });\n    }, 180000);\n  });\n});\n\n// Helper function to save test reports\nasync function saveTestReport(filename: string, report: string): Promise<void> {\n  const reportsDir = path.join(__dirname, '../../../test-reports/performance');\n\n  // Create directory if it doesn't exist\n  await fs.promises.mkdir(reportsDir, { recursive: true });\n\n  const filePath = path.join(reportsDir, filename);\n  await fs.promises.writeFile(filePath, report, 'utf8');\n\n  console.log(`ðŸ“Š Performance report saved to: ${filePath}`);\n}\n"],"version":3}