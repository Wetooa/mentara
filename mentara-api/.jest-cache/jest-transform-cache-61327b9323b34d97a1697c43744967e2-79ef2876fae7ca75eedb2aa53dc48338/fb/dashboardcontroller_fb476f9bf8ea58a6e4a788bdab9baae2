8ac61a6c5da358a098536193ecdc5624
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.DashboardController = void 0;
const common_1 = require("@nestjs/common");
const dashboard_service_1 = require("./dashboard.service");
const jwt_auth_guard_1 = require("../auth/guards/jwt-auth.guard");
const role_based_access_guard_1 = require("../auth/guards/role-based-access.guard");
const current_user_id_decorator_1 = require("../auth/decorators/current-user-id.decorator");
const roles_decorator_1 = require("../auth/decorators/roles.decorator");
let DashboardController = class DashboardController {
    dashboardService;
    constructor(dashboardService) {
        this.dashboardService = dashboardService;
    }
    getClientDashboard(userId) {
        return this.dashboardService.getClientDashboardData(userId);
    }
    getTherapistDashboard(userId) {
        return this.dashboardService.getTherapistDashboardData(userId);
    }
    getAdminDashboard() {
        return this.dashboardService.getAdminDashboardData();
    }
    getModeratorDashboard(userId) {
        return this.dashboardService.getModeratorDashboardData(userId);
    }
};
exports.DashboardController = DashboardController;
__decorate([
    (0, common_1.Get)('client'),
    (0, roles_decorator_1.ClientOnly)(),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", void 0)
], DashboardController.prototype, "getClientDashboard", null);
__decorate([
    (0, common_1.Get)('therapist'),
    (0, roles_decorator_1.TherapistOnly)(),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", void 0)
], DashboardController.prototype, "getTherapistDashboard", null);
__decorate([
    (0, common_1.Get)('admin'),
    (0, roles_decorator_1.AdminOnly)(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], DashboardController.prototype, "getAdminDashboard", null);
__decorate([
    (0, common_1.Get)('moderator'),
    (0, roles_decorator_1.ModeratorOnly)(),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", void 0)
], DashboardController.prototype, "getModeratorDashboard", null);
exports.DashboardController = DashboardController = __decorate([
    (0, common_1.Controller)('dashboard'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard, role_based_access_guard_1.RoleBasedAccessGuard),
    __metadata("design:paramtypes", [typeof (_a = typeof dashboard_service_1.DashboardService !== "undefined" && dashboard_service_1.DashboardService) === "function" ? _a : Object])
], DashboardController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29udHJvbGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsMkNBQTREO0FBQzVELDJEQUF1RDtBQUN2RCxrRUFBNkQ7QUFDN0Qsb0ZBQThFO0FBQzlFLDRGQUE2RTtBQUM3RSx3RUFLNEM7QUFJckMsSUFBTSxtQkFBbUIsR0FBekIsTUFBTSxtQkFBbUI7SUFDRDtJQUE3QixZQUE2QixnQkFBa0M7UUFBbEMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtJQUFHLENBQUM7SUFJbkUsa0JBQWtCLENBQWtCLE1BQWM7UUFDaEQsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsc0JBQXNCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDOUQsQ0FBQztJQUlELHFCQUFxQixDQUFrQixNQUFjO1FBQ25ELE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLHlCQUF5QixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFJRCxpQkFBaUI7UUFDZixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO0lBQ3ZELENBQUM7SUFJRCxxQkFBcUIsQ0FBa0IsTUFBYztRQUNuRCxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyx5QkFBeUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNqRSxDQUFDO0NBQ0YsQ0FBQTtBQTFCWSxrREFBbUI7QUFLOUI7SUFGQyxJQUFBLFlBQUcsRUFBQyxRQUFRLENBQUM7SUFDYixJQUFBLDRCQUFVLEdBQUU7SUFDTyxXQUFBLElBQUEseUNBQWEsR0FBRSxDQUFBOzs7OzZEQUVsQztBQUlEO0lBRkMsSUFBQSxZQUFHLEVBQUMsV0FBVyxDQUFDO0lBQ2hCLElBQUEsK0JBQWEsR0FBRTtJQUNPLFdBQUEsSUFBQSx5Q0FBYSxHQUFFLENBQUE7Ozs7Z0VBRXJDO0FBSUQ7SUFGQyxJQUFBLFlBQUcsRUFBQyxPQUFPLENBQUM7SUFDWixJQUFBLDJCQUFTLEdBQUU7Ozs7NERBR1g7QUFJRDtJQUZDLElBQUEsWUFBRyxFQUFDLFdBQVcsQ0FBQztJQUNoQixJQUFBLCtCQUFhLEdBQUU7SUFDTyxXQUFBLElBQUEseUNBQWEsR0FBRSxDQUFBOzs7O2dFQUVyQzs4QkF6QlUsbUJBQW1CO0lBRi9CLElBQUEsbUJBQVUsRUFBQyxXQUFXLENBQUM7SUFDdkIsSUFBQSxrQkFBUyxFQUFDLDZCQUFZLEVBQUUsOENBQW9CLENBQUM7eURBRUcsb0NBQWdCLG9CQUFoQixvQ0FBZ0I7R0FEcEQsbUJBQW1CLENBMEIvQiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvZGFzaGJvYXJkL2Rhc2hib2FyZC5jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRyb2xsZXIsIEdldCwgVXNlR3VhcmRzIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgRGFzaGJvYXJkU2VydmljZSB9IGZyb20gJy4vZGFzaGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgSnd0QXV0aEd1YXJkIH0gZnJvbSAnLi4vYXV0aC9ndWFyZHMvand0LWF1dGguZ3VhcmQnO1xuaW1wb3J0IHsgUm9sZUJhc2VkQWNjZXNzR3VhcmQgfSBmcm9tICcuLi9hdXRoL2d1YXJkcy9yb2xlLWJhc2VkLWFjY2Vzcy5ndWFyZCc7XG5pbXBvcnQgeyBDdXJyZW50VXNlcklkIH0gZnJvbSAnLi4vYXV0aC9kZWNvcmF0b3JzL2N1cnJlbnQtdXNlci1pZC5kZWNvcmF0b3InO1xuaW1wb3J0IHtcbiAgQ2xpZW50T25seSxcbiAgVGhlcmFwaXN0T25seSxcbiAgQWRtaW5Pbmx5LFxuICBNb2RlcmF0b3JPbmx5LFxufSBmcm9tICcuLi9hdXRoL2RlY29yYXRvcnMvcm9sZXMuZGVjb3JhdG9yJztcblxuQENvbnRyb2xsZXIoJ2Rhc2hib2FyZCcpXG5AVXNlR3VhcmRzKEp3dEF1dGhHdWFyZCwgUm9sZUJhc2VkQWNjZXNzR3VhcmQpXG5leHBvcnQgY2xhc3MgRGFzaGJvYXJkQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgZGFzaGJvYXJkU2VydmljZTogRGFzaGJvYXJkU2VydmljZSkge31cblxuICBAR2V0KCdjbGllbnQnKVxuICBAQ2xpZW50T25seSgpXG4gIGdldENsaWVudERhc2hib2FyZChAQ3VycmVudFVzZXJJZCgpIHVzZXJJZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZGFzaGJvYXJkU2VydmljZS5nZXRDbGllbnREYXNoYm9hcmREYXRhKHVzZXJJZCk7XG4gIH1cblxuICBAR2V0KCd0aGVyYXBpc3QnKVxuICBAVGhlcmFwaXN0T25seSgpXG4gIGdldFRoZXJhcGlzdERhc2hib2FyZChAQ3VycmVudFVzZXJJZCgpIHVzZXJJZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZGFzaGJvYXJkU2VydmljZS5nZXRUaGVyYXBpc3REYXNoYm9hcmREYXRhKHVzZXJJZCk7XG4gIH1cblxuICBAR2V0KCdhZG1pbicpXG4gIEBBZG1pbk9ubHkoKVxuICBnZXRBZG1pbkRhc2hib2FyZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXNoYm9hcmRTZXJ2aWNlLmdldEFkbWluRGFzaGJvYXJkRGF0YSgpO1xuICB9XG5cbiAgQEdldCgnbW9kZXJhdG9yJylcbiAgQE1vZGVyYXRvck9ubHkoKVxuICBnZXRNb2RlcmF0b3JEYXNoYm9hcmQoQEN1cnJlbnRVc2VySWQoKSB1c2VySWQ6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmRhc2hib2FyZFNlcnZpY2UuZ2V0TW9kZXJhdG9yRGFzaGJvYXJkRGF0YSh1c2VySWQpO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=