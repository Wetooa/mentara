37456e8986d52b363f1344c10d217f69
"use strict";

/* istanbul ignore next */
function cov_1303dtehex() {
  var path = "/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/services/community-recommendation.service.ts";
  var hash = "aee8a45cbea68762bdac998cac618e4701d8ad90";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/services/community-recommendation.service.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 17
        },
        end: {
          line: 7,
          column: 1
        }
      },
      "1": {
        start: {
          line: 3,
          column: 12
        },
        end: {
          line: 3,
          column: 28
        }
      },
      "2": {
        start: {
          line: 3,
          column: 34
        },
        end: {
          line: 3,
          column: 125
        }
      },
      "3": {
        start: {
          line: 4,
          column: 4
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "4": {
        start: {
          line: 4,
          column: 79
        },
        end: {
          line: 4,
          column: 131
        }
      },
      "5": {
        start: {
          line: 5,
          column: 9
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "6": {
        start: {
          line: 5,
          column: 22
        },
        end: {
          line: 5,
          column: 43
        }
      },
      "7": {
        start: {
          line: 5,
          column: 58
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "8": {
        start: {
          line: 5,
          column: 81
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "9": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 6,
          column: 66
        }
      },
      "10": {
        start: {
          line: 8,
          column: 17
        },
        end: {
          line: 10,
          column: 1
        }
      },
      "11": {
        start: {
          line: 9,
          column: 4
        },
        end: {
          line: 9,
          column: 109
        }
      },
      "12": {
        start: {
          line: 9,
          column: 79
        },
        end: {
          line: 9,
          column: 109
        }
      },
      "13": {
        start: {
          line: 13,
          column: 0
        },
        end: {
          line: 13,
          column: 62
        }
      },
      "14": {
        start: {
          line: 14,
          column: 0
        },
        end: {
          line: 14,
          column: 48
        }
      },
      "15": {
        start: {
          line: 15,
          column: 17
        },
        end: {
          line: 15,
          column: 42
        }
      },
      "16": {
        start: {
          line: 16,
          column: 33
        },
        end: {
          line: 16,
          column: 82
        }
      },
      "17": {
        start: {
          line: 17,
          column: 37
        },
        end: {
          line: 17,
          column: 76
        }
      },
      "18": {
        start: {
          line: 18,
          column: 28
        },
        end: {
          line: 18,
          column: 69
        }
      },
      "19": {
        start: {
          line: 19,
          column: 28
        },
        end: {
          line: 19,
          column: 86
        }
      },
      "20": {
        start: {
          line: 20,
          column: 37
        },
        end: {
          line: 333,
          column: 1
        }
      },
      "21": {
        start: {
          line: 24,
          column: 13
        },
        end: {
          line: 24,
          column: 71
        }
      },
      "22": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 26,
          column: 29
        }
      },
      "23": {
        start: {
          line: 27,
          column: 8
        },
        end: {
          line: 27,
          column: 51
        }
      },
      "24": {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 28,
          column: 47
        }
      },
      "25": {
        start: {
          line: 34,
          column: 8
        },
        end: {
          line: 128,
          column: 9
        }
      },
      "26": {
        start: {
          line: 36,
          column: 25
        },
        end: {
          line: 48,
          column: 14
        }
      },
      "27": {
        start: {
          line: 49,
          column: 12
        },
        end: {
          line: 51,
          column: 13
        }
      },
      "28": {
        start: {
          line: 50,
          column: 16
        },
        end: {
          line: 50,
          column: 97
        }
      },
      "29": {
        start: {
          line: 53,
          column: 12
        },
        end: {
          line: 56,
          column: 13
        }
      },
      "30": {
        start: {
          line: 54,
          column: 16
        },
        end: {
          line: 54,
          column: 78
        }
      },
      "31": {
        start: {
          line: 55,
          column: 16
        },
        end: {
          line: 55,
          column: 63
        }
      },
      "32": {
        start: {
          line: 58,
          column: 38
        },
        end: {
          line: 58,
          column: 40
        }
      },
      "33": {
        start: {
          line: 59,
          column: 12
        },
        end: {
          line: 74,
          column: 13
        }
      },
      "34": {
        start: {
          line: 60,
          column: 42
        },
        end: {
          line: 60,
          column: 75
        }
      },
      "35": {
        start: {
          line: 61,
          column: 16
        },
        end: {
          line: 69,
          column: 17
        }
      },
      "36": {
        start: {
          line: 62,
          column: 37
        },
        end: {
          line: 62,
          column: 105
        }
      },
      "37": {
        start: {
          line: 63,
          column: 20
        },
        end: {
          line: 63,
          column: 69
        }
      },
      "38": {
        start: {
          line: 64,
          column: 20
        },
        end: {
          line: 64,
          column: 166
        }
      },
      "39": {
        start: {
          line: 64,
          column: 128
        },
        end: {
          line: 64,
          column: 150
        }
      },
      "40": {
        start: {
          line: 67,
          column: 20
        },
        end: {
          line: 67,
          column: 93
        }
      },
      "41": {
        start: {
          line: 68,
          column: 20
        },
        end: {
          line: 68,
          column: 67
        }
      },
      "42": {
        start: {
          line: 72,
          column: 16
        },
        end: {
          line: 72,
          column: 93
        }
      },
      "43": {
        start: {
          line: 73,
          column: 16
        },
        end: {
          line: 73,
          column: 63
        }
      },
      "44": {
        start: {
          line: 76,
          column: 40
        },
        end: {
          line: 76,
          column: 82
        }
      },
      "45": {
        start: {
          line: 76,
          column: 68
        },
        end: {
          line: 76,
          column: 81
        }
      },
      "46": {
        start: {
          line: 78,
          column: 38
        },
        end: {
          line: 78,
          column: 121
        }
      },
      "47": {
        start: {
          line: 79,
          column: 12
        },
        end: {
          line: 82,
          column: 13
        }
      },
      "48": {
        start: {
          line: 80,
          column: 16
        },
        end: {
          line: 80,
          column: 98
        }
      },
      "49": {
        start: {
          line: 81,
          column: 16
        },
        end: {
          line: 81,
          column: 63
        }
      },
      "50": {
        start: {
          line: 84,
          column: 37
        },
        end: {
          line: 84,
          column: 75
        }
      },
      "51": {
        start: {
          line: 84,
          column: 66
        },
        end: {
          line: 84,
          column: 74
        }
      },
      "52": {
        start: {
          line: 85,
          column: 32
        },
        end: {
          line: 95,
          column: 14
        }
      },
      "53": {
        start: {
          line: 97,
          column: 36
        },
        end: {
          line: 97,
          column: 38
        }
      },
      "54": {
        start: {
          line: 98,
          column: 24
        },
        end: {
          line: 98,
          column: 34
        }
      },
      "55": {
        start: {
          line: 99,
          column: 12
        },
        end: {
          line: 117,
          column: 13
        }
      },
      "56": {
        start: {
          line: 100,
          column: 30
        },
        end: {
          line: 100,
          column: 88
        }
      },
      "57": {
        start: {
          line: 100,
          column: 60
        },
        end: {
          line: 100,
          column: 87
        }
      },
      "58": {
        start: {
          line: 101,
          column: 16
        },
        end: {
          line: 116,
          column: 17
        }
      },
      "59": {
        start: {
          line: 102,
          column: 20
        },
        end: {
          line: 115,
          column: 23
        }
      },
      "60": {
        start: {
          line: 119,
          column: 42
        },
        end: {
          line: 121,
          column: 28
        }
      },
      "61": {
        start: {
          line: 120,
          column: 32
        },
        end: {
          line: 120,
          column: 75
        }
      },
      "62": {
        start: {
          line: 122,
          column: 12
        },
        end: {
          line: 122,
          column: 127
        }
      },
      "63": {
        start: {
          line: 123,
          column: 12
        },
        end: {
          line: 123,
          column: 41
        }
      },
      "64": {
        start: {
          line: 126,
          column: 12
        },
        end: {
          line: 126,
          column: 90
        }
      },
      "65": {
        start: {
          line: 127,
          column: 12
        },
        end: {
          line: 127,
          column: 59
        }
      },
      "66": {
        start: {
          line: 133,
          column: 26
        },
        end: {
          line: 133,
          column: 51
        }
      },
      "67": {
        start: {
          line: 135,
          column: 26
        },
        end: {
          line: 135,
          column: 69
        }
      },
      "68": {
        start: {
          line: 136,
          column: 8
        },
        end: {
          line: 136,
          column: 52
        }
      },
      "69": {
        start: {
          line: 139,
          column: 8
        },
        end: {
          line: 140,
          column: 72
        }
      },
      "70": {
        start: {
          line: 140,
          column: 12
        },
        end: {
          line: 140,
          column: 72
        }
      },
      "71": {
        start: {
          line: 141,
          column: 8
        },
        end: {
          line: 142,
          column: 60
        }
      },
      "72": {
        start: {
          line: 142,
          column: 12
        },
        end: {
          line: 142,
          column: 60
        }
      },
      "73": {
        start: {
          line: 143,
          column: 8
        },
        end: {
          line: 144,
          column: 55
        }
      },
      "74": {
        start: {
          line: 144,
          column: 12
        },
        end: {
          line: 144,
          column: 55
        }
      },
      "75": {
        start: {
          line: 145,
          column: 8
        },
        end: {
          line: 145,
          column: 40
        }
      },
      "76": {
        start: {
          line: 151,
          column: 32
        },
        end: {
          line: 151,
          column: 114
        }
      },
      "77": {
        start: {
          line: 151,
          column: 84
        },
        end: {
          line: 151,
          column: 113
        }
      },
      "78": {
        start: {
          line: 152,
          column: 26
        },
        end: {
          line: 152,
          column: 84
        }
      },
      "79": {
        start: {
          line: 153,
          column: 8
        },
        end: {
          line: 155,
          column: 9
        }
      },
      "80": {
        start: {
          line: 154,
          column: 12
        },
        end: {
          line: 154,
          column: 68
        }
      },
      "81": {
        start: {
          line: 157,
          column: 30
        },
        end: {
          line: 177,
          column: 9
        }
      },
      "82": {
        start: {
          line: 178,
          column: 34
        },
        end: {
          line: 180,
          column: 53
        }
      },
      "83": {
        start: {
          line: 179,
          column: 32
        },
        end: {
          line: 179,
          column: 55
        }
      },
      "84": {
        start: {
          line: 180,
          column: 29
        },
        end: {
          line: 180,
          column: 52
        }
      },
      "85": {
        start: {
          line: 181,
          column: 8
        },
        end: {
          line: 186,
          column: 9
        }
      },
      "86": {
        start: {
          line: 182,
          column: 33
        },
        end: {
          line: 184,
          column: 119
        }
      },
      "87": {
        start: {
          line: 185,
          column: 12
        },
        end: {
          line: 185,
          column: 82
        }
      },
      "88": {
        start: {
          line: 187,
          column: 8
        },
        end: {
          line: 187,
          column: 68
        }
      },
      "89": {
        start: {
          line: 193,
          column: 8
        },
        end: {
          line: 240,
          column: 9
        }
      },
      "90": {
        start: {
          line: 195,
          column: 25
        },
        end: {
          line: 202,
          column: 14
        }
      },
      "91": {
        start: {
          line: 203,
          column: 40
        },
        end: {
          line: 203,
          column: 89
        }
      },
      "92": {
        start: {
          line: 203,
          column: 69
        },
        end: {
          line: 203,
          column: 82
        }
      },
      "93": {
        start: {
          line: 205,
          column: 32
        },
        end: {
          line: 220,
          column: 14
        }
      },
      "94": {
        start: {
          line: 221,
          column: 24
        },
        end: {
          line: 221,
          column: 34
        }
      },
      "95": {
        start: {
          line: 222,
          column: 12
        },
        end: {
          line: 235,
          column: 16
        }
      },
      "96": {
        start: {
          line: 222,
          column: 58
        },
        end: {
          line: 235,
          column: 13
        }
      },
      "97": {
        start: {
          line: 238,
          column: 12
        },
        end: {
          line: 238,
          column: 99
        }
      },
      "98": {
        start: {
          line: 239,
          column: 12
        },
        end: {
          line: 239,
          column: 22
        }
      },
      "99": {
        start: {
          line: 247,
          column: 8
        },
        end: {
          line: 247,
          column: 95
        }
      },
      "100": {
        start: {
          line: 255,
          column: 8
        },
        end: {
          line: 255,
          column: 20
        }
      },
      "101": {
        start: {
          line: 262,
          column: 8
        },
        end: {
          line: 262,
          column: 104
        }
      },
      "102": {
        start: {
          line: 268,
          column: 8
        },
        end: {
          line: 275,
          column: 10
        }
      },
      "103": {
        start: {
          line: 281,
          column: 32
        },
        end: {
          line: 281,
          column: 34
        }
      },
      "104": {
        start: {
          line: 282,
          column: 28
        },
        end: {
          line: 282,
          column: 30
        }
      },
      "105": {
        start: {
          line: 283,
          column: 8
        },
        end: {
          line: 329,
          column: 9
        }
      },
      "106": {
        start: {
          line: 284,
          column: 12
        },
        end: {
          line: 328,
          column: 13
        }
      },
      "107": {
        start: {
          line: 286,
          column: 34
        },
        end: {
          line: 289,
          column: 18
        }
      },
      "108": {
        start: {
          line: 290,
          column: 16
        },
        end: {
          line: 293,
          column: 17
        }
      },
      "109": {
        start: {
          line: 291,
          column: 20
        },
        end: {
          line: 291,
          column: 78
        }
      },
      "110": {
        start: {
          line: 292,
          column: 20
        },
        end: {
          line: 292,
          column: 29
        }
      },
      "111": {
        start: {
          line: 295,
          column: 43
        },
        end: {
          line: 302,
          column: 18
        }
      },
      "112": {
        start: {
          line: 303,
          column: 16
        },
        end: {
          line: 306,
          column: 17
        }
      },
      "113": {
        start: {
          line: 304,
          column: 20
        },
        end: {
          line: 304,
          column: 75
        }
      },
      "114": {
        start: {
          line: 305,
          column: 20
        },
        end: {
          line: 305,
          column: 29
        }
      },
      "115": {
        start: {
          line: 308,
          column: 16
        },
        end: {
          line: 314,
          column: 19
        }
      },
      "116": {
        start: {
          line: 315,
          column: 16
        },
        end: {
          line: 319,
          column: 19
        }
      },
      "117": {
        start: {
          line: 320,
          column: 16
        },
        end: {
          line: 320,
          column: 108
        }
      },
      "118": {
        start: {
          line: 323,
          column: 16
        },
        end: {
          line: 323,
          column: 96
        }
      },
      "119": {
        start: {
          line: 324,
          column: 16
        },
        end: {
          line: 327,
          column: 19
        }
      },
      "120": {
        start: {
          line: 330,
          column: 8
        },
        end: {
          line: 330,
          column: 137
        }
      },
      "121": {
        start: {
          line: 331,
          column: 8
        },
        end: {
          line: 331,
          column: 48
        }
      },
      "122": {
        start: {
          line: 334,
          column: 0
        },
        end: {
          line: 334,
          column: 72
        }
      },
      "123": {
        start: {
          line: 335,
          column: 0
        },
        end: {
          line: 338,
          column: 35
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 2,
            column: 46
          },
          end: {
            line: 2,
            column: 47
          }
        },
        loc: {
          start: {
            line: 2,
            column: 87
          },
          end: {
            line: 7,
            column: 1
          }
        },
        line: 2
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 8,
            column: 46
          },
          end: {
            line: 8,
            column: 47
          }
        },
        loc: {
          start: {
            line: 8,
            column: 62
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 8
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 25,
            column: 4
          },
          end: {
            line: 25,
            column: 5
          }
        },
        loc: {
          start: {
            line: 25,
            column: 60
          },
          end: {
            line: 29,
            column: 5
          }
        },
        line: 25
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 33,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        },
        loc: {
          start: {
            line: 33,
            column: 41
          },
          end: {
            line: 129,
            column: 5
          }
        },
        line: 33
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 64,
            column: 123
          },
          end: {
            line: 64,
            column: 124
          }
        },
        loc: {
          start: {
            line: 64,
            column: 128
          },
          end: {
            line: 64,
            column: 150
          }
        },
        line: 64
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 76,
            column: 61
          },
          end: {
            line: 76,
            column: 62
          }
        },
        loc: {
          start: {
            line: 76,
            column: 68
          },
          end: {
            line: 76,
            column: 81
          }
        },
        line: 76
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 84,
            column: 59
          },
          end: {
            line: 84,
            column: 60
          }
        },
        loc: {
          start: {
            line: 84,
            column: 66
          },
          end: {
            line: 84,
            column: 74
          }
        },
        line: 84
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 100,
            column: 53
          },
          end: {
            line: 100,
            column: 54
          }
        },
        loc: {
          start: {
            line: 100,
            column: 60
          },
          end: {
            line: 100,
            column: 87
          }
        },
        line: 100
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 120,
            column: 22
          },
          end: {
            line: 120,
            column: 23
          }
        },
        loc: {
          start: {
            line: 120,
            column: 32
          },
          end: {
            line: 120,
            column: 75
          }
        },
        line: 120
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 130,
            column: 4
          },
          end: {
            line: 130,
            column: 5
          }
        },
        loc: {
          start: {
            line: 130,
            column: 70
          },
          end: {
            line: 137,
            column: 5
          }
        },
        line: 130
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 138,
            column: 4
          },
          end: {
            line: 138,
            column: 5
          }
        },
        loc: {
          start: {
            line: 138,
            column: 40
          },
          end: {
            line: 146,
            column: 5
          }
        },
        line: 138
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 150,
            column: 4
          },
          end: {
            line: 150,
            column: 5
          }
        },
        loc: {
          start: {
            line: 150,
            column: 62
          },
          end: {
            line: 188,
            column: 5
          }
        },
        line: 150
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 151,
            column: 72
          },
          end: {
            line: 151,
            column: 73
          }
        },
        loc: {
          start: {
            line: 151,
            column: 84
          },
          end: {
            line: 151,
            column: 113
          }
        },
        line: 151
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 179,
            column: 20
          },
          end: {
            line: 179,
            column: 21
          }
        },
        loc: {
          start: {
            line: 179,
            column: 32
          },
          end: {
            line: 179,
            column: 55
          }
        },
        line: 179
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 180,
            column: 17
          },
          end: {
            line: 180,
            column: 18
          }
        },
        loc: {
          start: {
            line: 180,
            column: 29
          },
          end: {
            line: 180,
            column: 52
          }
        },
        line: 180
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 192,
            column: 4
          },
          end: {
            line: 192,
            column: 5
          }
        },
        loc: {
          start: {
            line: 192,
            column: 45
          },
          end: {
            line: 241,
            column: 5
          }
        },
        line: 192
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 203,
            column: 62
          },
          end: {
            line: 203,
            column: 63
          }
        },
        loc: {
          start: {
            line: 203,
            column: 69
          },
          end: {
            line: 203,
            column: 82
          }
        },
        line: 203
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 222,
            column: 35
          },
          end: {
            line: 222,
            column: 36
          }
        },
        loc: {
          start: {
            line: 222,
            column: 58
          },
          end: {
            line: 235,
            column: 13
          }
        },
        line: 222
      },
      "18": {
        name: "(anonymous_18)",
        decl: {
          start: {
            line: 245,
            column: 4
          },
          end: {
            line: 245,
            column: 5
          }
        },
        loc: {
          start: {
            line: 245,
            column: 64
          },
          end: {
            line: 248,
            column: 5
          }
        },
        line: 245
      },
      "19": {
        name: "(anonymous_19)",
        decl: {
          start: {
            line: 252,
            column: 4
          },
          end: {
            line: 252,
            column: 5
          }
        },
        loc: {
          start: {
            line: 252,
            column: 50
          },
          end: {
            line: 256,
            column: 5
          }
        },
        line: 252
      },
      "20": {
        name: "(anonymous_20)",
        decl: {
          start: {
            line: 260,
            column: 4
          },
          end: {
            line: 260,
            column: 5
          }
        },
        loc: {
          start: {
            line: 260,
            column: 48
          },
          end: {
            line: 263,
            column: 5
          }
        },
        line: 260
      },
      "21": {
        name: "(anonymous_21)",
        decl: {
          start: {
            line: 267,
            column: 4
          },
          end: {
            line: 267,
            column: 5
          }
        },
        loc: {
          start: {
            line: 267,
            column: 35
          },
          end: {
            line: 276,
            column: 5
          }
        },
        line: 267
      },
      "22": {
        name: "(anonymous_22)",
        decl: {
          start: {
            line: 280,
            column: 4
          },
          end: {
            line: 280,
            column: 5
          }
        },
        loc: {
          start: {
            line: 280,
            column: 61
          },
          end: {
            line: 332,
            column: 5
          }
        },
        line: 280
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 2,
            column: 17
          },
          end: {
            line: 7,
            column: 1
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 2,
            column: 18
          },
          end: {
            line: 2,
            column: 22
          }
        }, {
          start: {
            line: 2,
            column: 26
          },
          end: {
            line: 2,
            column: 41
          }
        }, {
          start: {
            line: 2,
            column: 46
          },
          end: {
            line: 7,
            column: 1
          }
        }],
        line: 2
      },
      "1": {
        loc: {
          start: {
            line: 3,
            column: 34
          },
          end: {
            line: 3,
            column: 125
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 3,
            column: 42
          },
          end: {
            line: 3,
            column: 48
          }
        }, {
          start: {
            line: 3,
            column: 51
          },
          end: {
            line: 3,
            column: 125
          }
        }],
        line: 3
      },
      "2": {
        loc: {
          start: {
            line: 3,
            column: 51
          },
          end: {
            line: 3,
            column: 125
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 3,
            column: 67
          },
          end: {
            line: 3,
            column: 118
          }
        }, {
          start: {
            line: 3,
            column: 121
          },
          end: {
            line: 3,
            column: 125
          }
        }],
        line: 3
      },
      "3": {
        loc: {
          start: {
            line: 4,
            column: 4
          },
          end: {
            line: 5,
            column: 150
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 4,
            column: 4
          },
          end: {
            line: 5,
            column: 150
          }
        }, {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 150
          }
        }],
        line: 4
      },
      "4": {
        loc: {
          start: {
            line: 4,
            column: 8
          },
          end: {
            line: 4,
            column: 77
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 4,
            column: 8
          },
          end: {
            line: 4,
            column: 35
          }
        }, {
          start: {
            line: 4,
            column: 39
          },
          end: {
            line: 4,
            column: 77
          }
        }],
        line: 4
      },
      "5": {
        loc: {
          start: {
            line: 5,
            column: 58
          },
          end: {
            line: 5,
            column: 150
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 5,
            column: 58
          },
          end: {
            line: 5,
            column: 150
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 5
      },
      "6": {
        loc: {
          start: {
            line: 5,
            column: 85
          },
          end: {
            line: 5,
            column: 149
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 5,
            column: 86
          },
          end: {
            line: 5,
            column: 143
          }
        }, {
          start: {
            line: 5,
            column: 148
          },
          end: {
            line: 5,
            column: 149
          }
        }],
        line: 5
      },
      "7": {
        loc: {
          start: {
            line: 5,
            column: 86
          },
          end: {
            line: 5,
            column: 143
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 5,
            column: 94
          },
          end: {
            line: 5,
            column: 98
          }
        }, {
          start: {
            line: 5,
            column: 101
          },
          end: {
            line: 5,
            column: 143
          }
        }],
        line: 5
      },
      "8": {
        loc: {
          start: {
            line: 5,
            column: 101
          },
          end: {
            line: 5,
            column: 143
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 5,
            column: 109
          },
          end: {
            line: 5,
            column: 126
          }
        }, {
          start: {
            line: 5,
            column: 129
          },
          end: {
            line: 5,
            column: 143
          }
        }],
        line: 5
      },
      "9": {
        loc: {
          start: {
            line: 6,
            column: 11
          },
          end: {
            line: 6,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 6,
            column: 11
          },
          end: {
            line: 6,
            column: 16
          }
        }, {
          start: {
            line: 6,
            column: 20
          },
          end: {
            line: 6,
            column: 21
          }
        }, {
          start: {
            line: 6,
            column: 25
          },
          end: {
            line: 6,
            column: 62
          }
        }],
        line: 6
      },
      "10": {
        loc: {
          start: {
            line: 8,
            column: 17
          },
          end: {
            line: 10,
            column: 1
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 8,
            column: 18
          },
          end: {
            line: 8,
            column: 22
          }
        }, {
          start: {
            line: 8,
            column: 26
          },
          end: {
            line: 8,
            column: 41
          }
        }, {
          start: {
            line: 8,
            column: 46
          },
          end: {
            line: 10,
            column: 1
          }
        }],
        line: 8
      },
      "11": {
        loc: {
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 9,
            column: 109
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 9,
            column: 109
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 9
      },
      "12": {
        loc: {
          start: {
            line: 9,
            column: 8
          },
          end: {
            line: 9,
            column: 77
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 9,
            column: 8
          },
          end: {
            line: 9,
            column: 35
          }
        }, {
          start: {
            line: 9,
            column: 39
          },
          end: {
            line: 9,
            column: 77
          }
        }],
        line: 9
      },
      "13": {
        loc: {
          start: {
            line: 49,
            column: 12
          },
          end: {
            line: 51,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 49,
            column: 12
          },
          end: {
            line: 51,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 49
      },
      "14": {
        loc: {
          start: {
            line: 49,
            column: 16
          },
          end: {
            line: 49,
            column: 37
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 49,
            column: 16
          },
          end: {
            line: 49,
            column: 21
          }
        }, {
          start: {
            line: 49,
            column: 25
          },
          end: {
            line: 49,
            column: 37
          }
        }],
        line: 49
      },
      "15": {
        loc: {
          start: {
            line: 53,
            column: 12
          },
          end: {
            line: 56,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 53,
            column: 12
          },
          end: {
            line: 56,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 53
      },
      "16": {
        loc: {
          start: {
            line: 61,
            column: 16
          },
          end: {
            line: 69,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 61,
            column: 16
          },
          end: {
            line: 69,
            column: 17
          }
        }, {
          start: {
            line: 66,
            column: 21
          },
          end: {
            line: 69,
            column: 17
          }
        }],
        line: 61
      },
      "17": {
        loc: {
          start: {
            line: 61,
            column: 20
          },
          end: {
            line: 61,
            column: 104
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 61,
            column: 20
          },
          end: {
            line: 61,
            column: 53
          }
        }, {
          start: {
            line: 61,
            column: 57
          },
          end: {
            line: 61,
            column: 104
          }
        }],
        line: 61
      },
      "18": {
        loc: {
          start: {
            line: 63,
            column: 42
          },
          end: {
            line: 63,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 63,
            column: 42
          },
          end: {
            line: 63,
            column: 62
          }
        }, {
          start: {
            line: 63,
            column: 66
          },
          end: {
            line: 63,
            column: 68
          }
        }],
        line: 63
      },
      "19": {
        loc: {
          start: {
            line: 79,
            column: 12
          },
          end: {
            line: 82,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 79,
            column: 12
          },
          end: {
            line: 82,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 79
      },
      "20": {
        loc: {
          start: {
            line: 101,
            column: 16
          },
          end: {
            line: 116,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 101,
            column: 16
          },
          end: {
            line: 116,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 101
      },
      "21": {
        loc: {
          start: {
            line: 107,
            column: 34
          },
          end: {
            line: 107,
            column: 89
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 107,
            column: 34
          },
          end: {
            line: 107,
            column: 52
          }
        }, {
          start: {
            line: 107,
            column: 56
          },
          end: {
            line: 107,
            column: 89
          }
        }],
        line: 107
      },
      "22": {
        loc: {
          start: {
            line: 135,
            column: 26
          },
          end: {
            line: 135,
            column: 69
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 135,
            column: 62
          },
          end: {
            line: 135,
            column: 65
          }
        }, {
          start: {
            line: 135,
            column: 68
          },
          end: {
            line: 135,
            column: 69
          }
        }],
        line: 135
      },
      "23": {
        loc: {
          start: {
            line: 139,
            column: 8
          },
          end: {
            line: 140,
            column: 72
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 139,
            column: 8
          },
          end: {
            line: 140,
            column: 72
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 139
      },
      "24": {
        loc: {
          start: {
            line: 141,
            column: 8
          },
          end: {
            line: 142,
            column: 60
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 141,
            column: 8
          },
          end: {
            line: 142,
            column: 60
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 141
      },
      "25": {
        loc: {
          start: {
            line: 143,
            column: 8
          },
          end: {
            line: 144,
            column: 55
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 143,
            column: 8
          },
          end: {
            line: 144,
            column: 55
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 143
      },
      "26": {
        loc: {
          start: {
            line: 153,
            column: 8
          },
          end: {
            line: 155,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 153,
            column: 8
          },
          end: {
            line: 155,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 153
      },
      "27": {
        loc: {
          start: {
            line: 181,
            column: 8
          },
          end: {
            line: 186,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 181,
            column: 8
          },
          end: {
            line: 186,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 181
      },
      "28": {
        loc: {
          start: {
            line: 182,
            column: 33
          },
          end: {
            line: 184,
            column: 119
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 183,
            column: 18
          },
          end: {
            line: 183,
            column: 38
          }
        }, {
          start: {
            line: 184,
            column: 18
          },
          end: {
            line: 184,
            column: 119
          }
        }],
        line: 182
      },
      "29": {
        loc: {
          start: {
            line: 203,
            column: 40
          },
          end: {
            line: 203,
            column: 89
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 203,
            column: 40
          },
          end: {
            line: 203,
            column: 83
          }
        }, {
          start: {
            line: 203,
            column: 87
          },
          end: {
            line: 203,
            column: 89
          }
        }],
        line: 203
      },
      "30": {
        loc: {
          start: {
            line: 227,
            column: 26
          },
          end: {
            line: 227,
            column: 81
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 227,
            column: 26
          },
          end: {
            line: 227,
            column: 44
          }
        }, {
          start: {
            line: 227,
            column: 48
          },
          end: {
            line: 227,
            column: 81
          }
        }],
        line: 227
      },
      "31": {
        loc: {
          start: {
            line: 245,
            column: 49
          },
          end: {
            line: 245,
            column: 62
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 245,
            column: 57
          },
          end: {
            line: 245,
            column: 62
          }
        }],
        line: 245
      },
      "32": {
        loc: {
          start: {
            line: 290,
            column: 16
          },
          end: {
            line: 293,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 290,
            column: 16
          },
          end: {
            line: 293,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 290
      },
      "33": {
        loc: {
          start: {
            line: 303,
            column: 16
          },
          end: {
            line: 306,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 303,
            column: 16
          },
          end: {
            line: 306,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 303
      },
      "34": {
        loc: {
          start: {
            line: 326,
            column: 28
          },
          end: {
            line: 326,
            column: 84
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 326,
            column: 53
          },
          end: {
            line: 326,
            column: 66
          }
        }, {
          start: {
            line: 326,
            column: 69
          },
          end: {
            line: 326,
            column: 84
          }
        }],
        line: 326
      },
      "35": {
        loc: {
          start: {
            line: 337,
            column: 37
          },
          end: {
            line: 337,
            column: 183
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 337,
            column: 172
          },
          end: {
            line: 337,
            column: 174
          }
        }, {
          start: {
            line: 337,
            column: 177
          },
          end: {
            line: 337,
            column: 183
          }
        }],
        line: 337
      },
      "36": {
        loc: {
          start: {
            line: 337,
            column: 50
          },
          end: {
            line: 337,
            column: 153
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 337,
            column: 50
          },
          end: {
            line: 337,
            column: 111
          }
        }, {
          start: {
            line: 337,
            column: 115
          },
          end: {
            line: 337,
            column: 153
          }
        }],
        line: 337
      },
      "37": {
        loc: {
          start: {
            line: 337,
            column: 185
          },
          end: {
            line: 337,
            column: 361
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 337,
            column: 350
          },
          end: {
            line: 337,
            column: 352
          }
        }, {
          start: {
            line: 337,
            column: 355
          },
          end: {
            line: 337,
            column: 361
          }
        }],
        line: 337
      },
      "38": {
        loc: {
          start: {
            line: 337,
            column: 198
          },
          end: {
            line: 337,
            column: 331
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 337,
            column: 198
          },
          end: {
            line: 337,
            column: 274
          }
        }, {
          start: {
            line: 337,
            column: 278
          },
          end: {
            line: 337,
            column: 331
          }
        }],
        line: 337
      },
      "39": {
        loc: {
          start: {
            line: 337,
            column: 363
          },
          end: {
            line: 337,
            column: 503
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 337,
            column: 492
          },
          end: {
            line: 337,
            column: 494
          }
        }, {
          start: {
            line: 337,
            column: 497
          },
          end: {
            line: 337,
            column: 503
          }
        }],
        line: 337
      },
      "40": {
        loc: {
          start: {
            line: 337,
            column: 376
          },
          end: {
            line: 337,
            column: 473
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 337,
            column: 376
          },
          end: {
            line: 337,
            column: 434
          }
        }, {
          start: {
            line: 337,
            column: 438
          },
          end: {
            line: 337,
            column: 473
          }
        }],
        line: 337
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0,
      "99": 0,
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0,
      "105": 0,
      "106": 0,
      "107": 0,
      "108": 0,
      "109": 0,
      "110": 0,
      "111": 0,
      "112": 0,
      "113": 0,
      "114": 0,
      "115": 0,
      "116": 0,
      "117": 0,
      "118": 0,
      "119": 0,
      "120": 0,
      "121": 0,
      "122": 0,
      "123": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0
    },
    b: {
      "0": [0, 0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0, 0],
      "10": [0, 0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0, 0],
      "29": [0, 0],
      "30": [0, 0],
      "31": [0],
      "32": [0, 0],
      "33": [0, 0],
      "34": [0, 0],
      "35": [0, 0],
      "36": [0, 0],
      "37": [0, 0],
      "38": [0, 0],
      "39": [0, 0],
      "40": [0, 0]
    },
    inputSourceMap: {
      file: "/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/services/community-recommendation.service.ts",
      mappings: "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",
      names: [],
      sources: ["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/services/community-recommendation.service.ts"],
      sourcesContent: ["import { Injectable, Logger, NotFoundException } from '@nestjs/common';\nimport { PrismaService } from '../../providers/prisma-client.provider';\nimport { CommunityMatchingService } from './community-matching.service';\nimport { \n  getCommunityRecommendationsWithScores,\n  getCommunityBySlug,\n  ILLNESS_COMMUNITIES \n} from '../../config/community-configs';\nimport { AiServiceClient } from '../../pre-assessment/services/ai-service.client';\n\nexport interface CommunityRecommendation {\n  id: string;\n  name: string;\n  slug: string;\n  description: string;\n  imageUrl: string;\n  memberCount: number;\n  compatibilityScore: number;\n  score: number; // alias for compatibility\n  reason: string;\n  status: string; // calculated on-demand\n  createdAt: Date; // dummy values for compatibility\n  updatedAt: Date; // dummy values for compatibility\n}\n\n@Injectable()\nexport class CommunityRecommendationService {\n  private readonly logger = new Logger(CommunityRecommendationService.name);\n\n  constructor(\n    private readonly prisma: PrismaService,\n    private readonly communityMatching: CommunityMatchingService,\n    private readonly aiServiceClient: AiServiceClient,\n  ) {}\n\n  /**\n   * Calculate community recommendations based on AI disorder predictions from user's assessment\n   */\n  async getUserRecommendations(\n    userId: string,\n  ): Promise<CommunityRecommendation[]> {\n    try {\n      // Get user's data including preassessment and current memberships\n      const user = await this.prisma.user.findUnique({\n        where: { id: userId },\n        include: {\n          client: {\n            include: {\n              preAssessment: true,\n            },\n          },\n          memberships: {\n            select: { communityId: true },\n          },\n        },\n      });\n\n      if (!user || !user.client) {\n        throw new NotFoundException(`User ${userId} not found or not a client`);\n      }\n\n      // Check if user has completed preassessment\n      if (!user.client.preAssessment) {\n        this.logger.warn(`No preassessment found for user ${userId}`);\n        return this.getFallbackRecommendations(userId);\n      }\n\n      // Get AI disorder predictions from preassessment data\n      let disorderPredictions: Record<string, boolean> = {};\n      try {\n        const assessmentAnswers = user.client.preAssessment.answers as any;\n        if (assessmentAnswers?.questionnaires && Array.isArray(assessmentAnswers.questionnaires)) {\n          const aiResult = await this.aiServiceClient.predict(assessmentAnswers.questionnaires);\n          disorderPredictions = aiResult.predictions || {};\n          this.logger.log(`AI predictions obtained for user ${userId}: ${Object.keys(disorderPredictions).filter(k => disorderPredictions[k]).join(', ')}`);\n        } else {\n          this.logger.warn(`Invalid preassessment data format for user ${userId}`);\n          return this.getFallbackRecommendations(userId);\n        }\n      } catch (error) {\n        this.logger.error(`Failed to get AI predictions for user ${userId}:`, error);\n        return this.getFallbackRecommendations(userId);\n      }\n\n      // Get user's current communities to exclude from recommendations\n      const currentCommunityIds = user.memberships.map((m) => m.communityId);\n\n      // Get community recommendations based on AI predictions\n      const aiRecommendations = getCommunityRecommendationsWithScores(disorderPredictions);\n      \n      if (aiRecommendations.length === 0) {\n        this.logger.log(`No AI-based recommendations for user ${userId}, using fallback`);\n        return this.getFallbackRecommendations(userId);\n      }\n\n      // Get database communities that match recommendations\n      const recommendedSlugs = aiRecommendations.map(rec => rec.slug);\n      const communities = await this.prisma.community.findMany({\n        where: {\n          slug: { in: recommendedSlugs },\n          id: { notIn: currentCommunityIds },\n        },\n        include: {\n          _count: {\n            select: { memberships: true },\n          },\n        },\n      });\n\n      // Create final recommendations with real data\n      const recommendations: CommunityRecommendation[] = [];\n      const now = new Date();\n\n      for (const community of communities) {\n        const aiRec = aiRecommendations.find(rec => rec.slug === community.slug);\n        if (aiRec) {\n          recommendations.push({\n            id: community.id,\n            name: community.name,\n            slug: community.slug,\n            description: community.description,\n            imageUrl: community.imageUrl || '/images/communities/default.jpg',\n            memberCount: community._count.memberships,\n            compatibilityScore: aiRec.score,\n            score: aiRec.score,\n            reason: this.generateAIBasedReason(disorderPredictions, aiRec.slug),\n            status: 'pending',\n            createdAt: now,\n            updatedAt: now,\n          });\n        }\n      }\n\n      // Sort by AI compatibility score and return\n      const sortedRecommendations = recommendations\n        .sort((a, b) => b.compatibilityScore - a.compatibilityScore)\n        .slice(0, 8); // Limit to top 8 recommendations\n\n      this.logger.log(`Generated ${sortedRecommendations.length} AI-based community recommendations for user ${userId}`);\n      return sortedRecommendations;\n\n    } catch (error) {\n      this.logger.error(\n        `Error getting recommendations for user ${userId}:`,\n        error,\n      );\n      return this.getFallbackRecommendations(userId);\n    }\n  }\n\n  private async calculateCompatibilityScore(\n    assessmentResponses: any[],\n    community: any,\n  ): Promise<number> {\n    // Simplified compatibility calculation\n    // In a real system, this would use the assessment responses to match with community characteristics\n    const baseScore = Math.random() * 0.8 + 0.2; // 0.2-1.0 for demo\n\n    // Factor in community size (smaller communities might be better matches)\n    const sizeBonus = community._count.memberships < 50 ? 0.1 : 0;\n\n    return Math.min(baseScore + sizeBonus, 1.0);\n  }\n\n  private generateRecommendationReason(score: number): string {\n    if (score > 0.8)\n      return 'Excellent match based on your assessment responses';\n    if (score > 0.6) return 'Good compatibility with your interests';\n    if (score > 0.4) return 'Potential good fit for your needs';\n    return 'Moderate compatibility';\n  }\n\n  /**\n   * Generate AI-based recommendation reason\n   */\n  private generateAIBasedReason(disorderPredictions: Record<string, boolean>, communitySlug: string): string {\n    const activeDisorders = Object.keys(disorderPredictions).filter(disorder => disorderPredictions[disorder]);\n    const community = getCommunityBySlug(communitySlug);\n    \n    if (!community) {\n      return 'Recommended based on your assessment responses';\n    }\n\n    // Map common disorders to user-friendly terms\n    const disorderNames: Record<string, string> = {\n      Has_Depression: 'depression',\n      Has_Anxiety: 'anxiety',\n      Has_Social_Anxiety: 'social anxiety',\n      Has_PTSD: 'PTSD',\n      Has_Panic_Disorder: 'panic disorder',\n      Has_Bipolar: 'bipolar disorder',\n      Has_OCD: 'OCD',\n      Has_Insomnia: 'sleep issues',\n      Has_High_Stress: 'stress',\n      Has_Burnout: 'burnout',\n      Has_Binge_Eating: 'eating concerns',\n      Has_ADHD: 'ADHD',\n      Has_Alcohol_Problem: 'alcohol concerns',\n      Has_Drug_Problem: 'substance concerns',\n      Has_Phobia: 'phobias',\n      Has_Agoraphobia: 'agoraphobia',\n      Has_BloodPhobia: 'blood phobia',\n      Has_SocialPhobia: 'social phobia',\n      Has_Hoarding: 'hoarding tendencies',\n    };\n\n    const relevantDisorders = activeDisorders\n      .filter(disorder => disorderNames[disorder])\n      .map(disorder => disorderNames[disorder]);\n\n    if (relevantDisorders.length > 0) {\n      const disorderList = relevantDisorders.length === 1 \n        ? relevantDisorders[0]\n        : relevantDisorders.slice(0, -1).join(', ') + ' and ' + relevantDisorders[relevantDisorders.length - 1];\n      \n      return `Recommended based on your ${disorderList} assessment results`;\n    }\n\n    return 'Recommended based on your mental health assessment';\n  }\n\n  /**\n   * Get fallback community recommendations when AI predictions are not available\n   */\n  private async getFallbackRecommendations(userId: string): Promise<CommunityRecommendation[]> {\n    try {\n      // Get user's current communities to exclude\n      const user = await this.prisma.user.findUnique({\n        where: { id: userId },\n        include: {\n          memberships: {\n            select: { communityId: true },\n          },\n        },\n      });\n\n      const currentCommunityIds = user?.memberships.map((m) => m.communityId) || [];\n\n      // Get popular communities (by member count) as fallback\n      const communities = await this.prisma.community.findMany({\n        where: {\n          id: { notIn: currentCommunityIds },\n        },\n        include: {\n          _count: {\n            select: { memberships: true },\n          },\n        },\n        orderBy: {\n          memberships: {\n            _count: 'desc',\n          },\n        },\n        take: 6,\n      });\n\n      const now = new Date();\n      return communities.map((community, index) => ({\n        id: community.id,\n        name: community.name,\n        slug: community.slug,\n        description: community.description,\n        imageUrl: community.imageUrl || '/images/communities/default.jpg',\n        memberCount: community._count.memberships,\n        compatibilityScore: 0.6 - (index * 0.05), // Decreasing score based on popularity\n        score: 0.6 - (index * 0.05),\n        reason: 'Popular community that might interest you',\n        status: 'pending',\n        createdAt: now,\n        updatedAt: now,\n      }));\n\n    } catch (error) {\n      this.logger.error(`Error getting fallback recommendations for user ${userId}:`, error);\n      return [];\n    }\n  }\n\n  /**\n   * Generate recommendations for a user (just returns the calculated ones)\n   */\n  async generateRecommendationsForUser(\n    userId: string,\n    force = false,\n  ): Promise<void> {\n    // No-op since we calculate on-demand\n    this.logger.log(\n      `Generated recommendations for user ${userId} (calculated on-demand)`,\n    );\n  }\n\n  /**\n   * Get a specific recommendation by ID (simplified)\n   */\n  async getRecommendationById(\n    recommendationId: string,\n  ): Promise<CommunityRecommendation | null> {\n    // Since we don't store recommendations, we can't fetch by ID\n    // In a real scenario, you'd need to recalculate or return null\n    return null;\n  }\n\n  /**\n   * Handle recommendation interaction (simplified)\n   */\n  async handleRecommendationInteraction(data: {\n    recommendationId: string;\n    action: string;\n    userId: string;\n  }): Promise<void> {\n    // No-op since we don't store interactions\n    this.logger.log(\n      `User ${data.userId} ${data.action}ed recommendation ${data.recommendationId}`,\n    );\n  }\n\n  /**\n   * Stub method for stats - simplified since no table to query\n   */\n  async getRecommendationStats(): Promise<any> {\n    return {\n      totalRecommendations: 0,\n      acceptedRecommendations: 0,\n      rejectedRecommendations: 0,\n      pendingRecommendations: 0,\n      averageCompatibilityScore: 0,\n      topCommunities: [],\n    };\n  }\n\n  /**\n   * Join multiple recommended communities immediately\n   */\n  async joinRecommendedCommunities(\n    userId: string,\n    communitySlugs: string[]\n  ): Promise<{\n    successfulJoins: Array<{ communityId: string; communityName: string; slug: string }>;\n    failedJoins: Array<{ slug: string; reason: string }>;\n  }> {\n    const successfulJoins: Array<{ communityId: string; communityName: string; slug: string }> = [];\n    const failedJoins: Array<{ slug: string; reason: string }> = [];\n\n    for (const slug of communitySlugs) {\n      try {\n        // Find the community by slug\n        const community = await this.prisma.community.findUnique({\n          where: { slug },\n          select: { id: true, name: true, slug: true }\n        });\n\n        if (!community) {\n          failedJoins.push({ slug, reason: 'Community not found' });\n          continue;\n        }\n\n        // Check if user is already a member\n        const existingMembership = await this.prisma.membership.findUnique({\n          where: {\n            userId_communityId: {\n              userId,\n              communityId: community.id\n            }\n          }\n        });\n\n        if (existingMembership) {\n          failedJoins.push({ slug, reason: 'Already a member' });\n          continue;\n        }\n\n        // Create membership\n        await this.prisma.membership.create({\n          data: {\n            userId,\n            communityId: community.id,\n            joinedAt: new Date()\n          }\n        });\n\n        successfulJoins.push({\n          communityId: community.id,\n          communityName: community.name,\n          slug: community.slug\n        });\n\n        this.logger.log(`User ${userId} successfully joined community ${community.name} (${slug})`);\n\n      } catch (error) {\n        this.logger.error(`Error joining community ${slug} for user ${userId}:`, error);\n        failedJoins.push({ \n          slug, \n          reason: error instanceof Error ? error.message : 'Unknown error' \n        });\n      }\n    }\n\n    this.logger.log(\n      `Community join results for user ${userId}: ${successfulJoins.length} successful, ${failedJoins.length} failed`\n    );\n\n    return { successfulJoins, failedJoins };\n  }\n}\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "aee8a45cbea68762bdac998cac618e4701d8ad90"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1303dtehex = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1303dtehex();
var __decorate =
/* istanbul ignore next */
(cov_1303dtehex().s[0]++,
/* istanbul ignore next */
(cov_1303dtehex().b[0][0]++, this) &&
/* istanbul ignore next */
(cov_1303dtehex().b[0][1]++, this.__decorate) ||
/* istanbul ignore next */
(cov_1303dtehex().b[0][2]++, function (decorators, target, key, desc) {
  /* istanbul ignore next */
  cov_1303dtehex().f[0]++;
  var c =
    /* istanbul ignore next */
    (cov_1303dtehex().s[1]++, arguments.length),
    r =
    /* istanbul ignore next */
    (cov_1303dtehex().s[2]++, c < 3 ?
    /* istanbul ignore next */
    (cov_1303dtehex().b[1][0]++, target) :
    /* istanbul ignore next */
    (cov_1303dtehex().b[1][1]++, desc === null ?
    /* istanbul ignore next */
    (cov_1303dtehex().b[2][0]++, desc = Object.getOwnPropertyDescriptor(target, key)) :
    /* istanbul ignore next */
    (cov_1303dtehex().b[2][1]++, desc))),
    d;
  /* istanbul ignore next */
  cov_1303dtehex().s[3]++;
  if (
  /* istanbul ignore next */
  (cov_1303dtehex().b[4][0]++, typeof Reflect === "object") &&
  /* istanbul ignore next */
  (cov_1303dtehex().b[4][1]++, typeof Reflect.decorate === "function")) {
    /* istanbul ignore next */
    cov_1303dtehex().b[3][0]++;
    cov_1303dtehex().s[4]++;
    r = Reflect.decorate(decorators, target, key, desc);
  } else {
    /* istanbul ignore next */
    cov_1303dtehex().b[3][1]++;
    cov_1303dtehex().s[5]++;
    for (var i =
    /* istanbul ignore next */
    (cov_1303dtehex().s[6]++, decorators.length - 1); i >= 0; i--) {
      /* istanbul ignore next */
      cov_1303dtehex().s[7]++;
      if (d = decorators[i]) {
        /* istanbul ignore next */
        cov_1303dtehex().b[5][0]++;
        cov_1303dtehex().s[8]++;
        r =
        /* istanbul ignore next */
        (cov_1303dtehex().b[6][0]++, c < 3 ?
        /* istanbul ignore next */
        (cov_1303dtehex().b[7][0]++, d(r)) :
        /* istanbul ignore next */
        (cov_1303dtehex().b[7][1]++, c > 3 ?
        /* istanbul ignore next */
        (cov_1303dtehex().b[8][0]++, d(target, key, r)) :
        /* istanbul ignore next */
        (cov_1303dtehex().b[8][1]++, d(target, key)))) ||
        /* istanbul ignore next */
        (cov_1303dtehex().b[6][1]++, r);
      } else
      /* istanbul ignore next */
      {
        cov_1303dtehex().b[5][1]++;
      }
    }
  }
  /* istanbul ignore next */
  cov_1303dtehex().s[9]++;
  return /* istanbul ignore next */(cov_1303dtehex().b[9][0]++, c > 3) &&
  /* istanbul ignore next */
  (cov_1303dtehex().b[9][1]++, r) &&
  /* istanbul ignore next */
  (cov_1303dtehex().b[9][2]++, Object.defineProperty(target, key, r)), r;
}));
var __metadata =
/* istanbul ignore next */
(cov_1303dtehex().s[10]++,
/* istanbul ignore next */
(cov_1303dtehex().b[10][0]++, this) &&
/* istanbul ignore next */
(cov_1303dtehex().b[10][1]++, this.__metadata) ||
/* istanbul ignore next */
(cov_1303dtehex().b[10][2]++, function (k, v) {
  /* istanbul ignore next */
  cov_1303dtehex().f[1]++;
  cov_1303dtehex().s[11]++;
  if (
  /* istanbul ignore next */
  (cov_1303dtehex().b[12][0]++, typeof Reflect === "object") &&
  /* istanbul ignore next */
  (cov_1303dtehex().b[12][1]++, typeof Reflect.metadata === "function")) {
    /* istanbul ignore next */
    cov_1303dtehex().b[11][0]++;
    cov_1303dtehex().s[12]++;
    return Reflect.metadata(k, v);
  } else
  /* istanbul ignore next */
  {
    cov_1303dtehex().b[11][1]++;
  }
}));
var CommunityRecommendationService_1;
var _a, _b, _c;
/* istanbul ignore next */
cov_1303dtehex().s[13]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_1303dtehex().s[14]++;
exports.CommunityRecommendationService = void 0;
const common_1 =
/* istanbul ignore next */
(cov_1303dtehex().s[15]++, require("@nestjs/common"));
const prisma_client_provider_1 =
/* istanbul ignore next */
(cov_1303dtehex().s[16]++, require("../../providers/prisma-client.provider"));
const community_matching_service_1 =
/* istanbul ignore next */
(cov_1303dtehex().s[17]++, require("./community-matching.service"));
const community_configs_1 =
/* istanbul ignore next */
(cov_1303dtehex().s[18]++, require("../../config/community-configs"));
const ai_service_client_1 =
/* istanbul ignore next */
(cov_1303dtehex().s[19]++, require("../../pre-assessment/services/ai-service.client"));
let CommunityRecommendationService =
/* istanbul ignore next */
(cov_1303dtehex().s[20]++, CommunityRecommendationService_1 = class CommunityRecommendationService {
  prisma;
  communityMatching;
  aiServiceClient;
  logger =
  /* istanbul ignore next */
  (cov_1303dtehex().s[21]++, new common_1.Logger(CommunityRecommendationService_1.name));
  constructor(prisma, communityMatching, aiServiceClient) {
    /* istanbul ignore next */
    cov_1303dtehex().f[2]++;
    cov_1303dtehex().s[22]++;
    this.prisma = prisma;
    /* istanbul ignore next */
    cov_1303dtehex().s[23]++;
    this.communityMatching = communityMatching;
    /* istanbul ignore next */
    cov_1303dtehex().s[24]++;
    this.aiServiceClient = aiServiceClient;
  }
  /**
   * Calculate community recommendations based on AI disorder predictions from user's assessment
   */
  async getUserRecommendations(userId) {
    /* istanbul ignore next */
    cov_1303dtehex().f[3]++;
    cov_1303dtehex().s[25]++;
    try {
      // Get user's data including preassessment and current memberships
      const user =
      /* istanbul ignore next */
      (cov_1303dtehex().s[26]++, await this.prisma.user.findUnique({
        where: {
          id: userId
        },
        include: {
          client: {
            include: {
              preAssessment: true
            }
          },
          memberships: {
            select: {
              communityId: true
            }
          }
        }
      }));
      /* istanbul ignore next */
      cov_1303dtehex().s[27]++;
      if (
      /* istanbul ignore next */
      (cov_1303dtehex().b[14][0]++, !user) ||
      /* istanbul ignore next */
      (cov_1303dtehex().b[14][1]++, !user.client)) {
        /* istanbul ignore next */
        cov_1303dtehex().b[13][0]++;
        cov_1303dtehex().s[28]++;
        throw new common_1.NotFoundException(`User ${userId} not found or not a client`);
      } else
      /* istanbul ignore next */
      {
        cov_1303dtehex().b[13][1]++;
      }
      // Check if user has completed preassessment
      cov_1303dtehex().s[29]++;
      if (!user.client.preAssessment) {
        /* istanbul ignore next */
        cov_1303dtehex().b[15][0]++;
        cov_1303dtehex().s[30]++;
        this.logger.warn(`No preassessment found for user ${userId}`);
        /* istanbul ignore next */
        cov_1303dtehex().s[31]++;
        return this.getFallbackRecommendations(userId);
      } else
      /* istanbul ignore next */
      {
        cov_1303dtehex().b[15][1]++;
      }
      // Get AI disorder predictions from preassessment data
      let disorderPredictions =
      /* istanbul ignore next */
      (cov_1303dtehex().s[32]++, {});
      /* istanbul ignore next */
      cov_1303dtehex().s[33]++;
      try {
        const assessmentAnswers =
        /* istanbul ignore next */
        (cov_1303dtehex().s[34]++, user.client.preAssessment.answers);
        /* istanbul ignore next */
        cov_1303dtehex().s[35]++;
        if (
        /* istanbul ignore next */
        (cov_1303dtehex().b[17][0]++, assessmentAnswers?.questionnaires) &&
        /* istanbul ignore next */
        (cov_1303dtehex().b[17][1]++, Array.isArray(assessmentAnswers.questionnaires))) {
          /* istanbul ignore next */
          cov_1303dtehex().b[16][0]++;
          const aiResult =
          /* istanbul ignore next */
          (cov_1303dtehex().s[36]++, await this.aiServiceClient.predict(assessmentAnswers.questionnaires));
          /* istanbul ignore next */
          cov_1303dtehex().s[37]++;
          disorderPredictions =
          /* istanbul ignore next */
          (cov_1303dtehex().b[18][0]++, aiResult.predictions) ||
          /* istanbul ignore next */
          (cov_1303dtehex().b[18][1]++, {});
          /* istanbul ignore next */
          cov_1303dtehex().s[38]++;
          this.logger.log(`AI predictions obtained for user ${userId}: ${Object.keys(disorderPredictions).filter(k => {
            /* istanbul ignore next */
            cov_1303dtehex().f[4]++;
            cov_1303dtehex().s[39]++;
            return disorderPredictions[k];
          }).join(', ')}`);
        } else {
          /* istanbul ignore next */
          cov_1303dtehex().b[16][1]++;
          cov_1303dtehex().s[40]++;
          this.logger.warn(`Invalid preassessment data format for user ${userId}`);
          /* istanbul ignore next */
          cov_1303dtehex().s[41]++;
          return this.getFallbackRecommendations(userId);
        }
      } catch (error) {
        /* istanbul ignore next */
        cov_1303dtehex().s[42]++;
        this.logger.error(`Failed to get AI predictions for user ${userId}:`, error);
        /* istanbul ignore next */
        cov_1303dtehex().s[43]++;
        return this.getFallbackRecommendations(userId);
      }
      // Get user's current communities to exclude from recommendations
      const currentCommunityIds =
      /* istanbul ignore next */
      (cov_1303dtehex().s[44]++, user.memberships.map(m => {
        /* istanbul ignore next */
        cov_1303dtehex().f[5]++;
        cov_1303dtehex().s[45]++;
        return m.communityId;
      }));
      // Get community recommendations based on AI predictions
      const aiRecommendations =
      /* istanbul ignore next */
      (cov_1303dtehex().s[46]++, (0, community_configs_1.getCommunityRecommendationsWithScores)(disorderPredictions));
      /* istanbul ignore next */
      cov_1303dtehex().s[47]++;
      if (aiRecommendations.length === 0) {
        /* istanbul ignore next */
        cov_1303dtehex().b[19][0]++;
        cov_1303dtehex().s[48]++;
        this.logger.log(`No AI-based recommendations for user ${userId}, using fallback`);
        /* istanbul ignore next */
        cov_1303dtehex().s[49]++;
        return this.getFallbackRecommendations(userId);
      } else
      /* istanbul ignore next */
      {
        cov_1303dtehex().b[19][1]++;
      }
      // Get database communities that match recommendations
      const recommendedSlugs =
      /* istanbul ignore next */
      (cov_1303dtehex().s[50]++, aiRecommendations.map(rec => {
        /* istanbul ignore next */
        cov_1303dtehex().f[6]++;
        cov_1303dtehex().s[51]++;
        return rec.slug;
      }));
      const communities =
      /* istanbul ignore next */
      (cov_1303dtehex().s[52]++, await this.prisma.community.findMany({
        where: {
          slug: {
            in: recommendedSlugs
          },
          id: {
            notIn: currentCommunityIds
          }
        },
        include: {
          _count: {
            select: {
              memberships: true
            }
          }
        }
      }));
      // Create final recommendations with real data
      const recommendations =
      /* istanbul ignore next */
      (cov_1303dtehex().s[53]++, []);
      const now =
      /* istanbul ignore next */
      (cov_1303dtehex().s[54]++, new Date());
      /* istanbul ignore next */
      cov_1303dtehex().s[55]++;
      for (const community of communities) {
        const aiRec =
        /* istanbul ignore next */
        (cov_1303dtehex().s[56]++, aiRecommendations.find(rec => {
          /* istanbul ignore next */
          cov_1303dtehex().f[7]++;
          cov_1303dtehex().s[57]++;
          return rec.slug === community.slug;
        }));
        /* istanbul ignore next */
        cov_1303dtehex().s[58]++;
        if (aiRec) {
          /* istanbul ignore next */
          cov_1303dtehex().b[20][0]++;
          cov_1303dtehex().s[59]++;
          recommendations.push({
            id: community.id,
            name: community.name,
            slug: community.slug,
            description: community.description,
            imageUrl:
            /* istanbul ignore next */
            (cov_1303dtehex().b[21][0]++, community.imageUrl) ||
            /* istanbul ignore next */
            (cov_1303dtehex().b[21][1]++, '/images/communities/default.jpg'),
            memberCount: community._count.memberships,
            compatibilityScore: aiRec.score,
            score: aiRec.score,
            reason: this.generateAIBasedReason(disorderPredictions, aiRec.slug),
            status: 'pending',
            createdAt: now,
            updatedAt: now
          });
        } else
        /* istanbul ignore next */
        {
          cov_1303dtehex().b[20][1]++;
        }
      }
      // Sort by AI compatibility score and return
      const sortedRecommendations =
      /* istanbul ignore next */
      (cov_1303dtehex().s[60]++, recommendations.sort((a, b) => {
        /* istanbul ignore next */
        cov_1303dtehex().f[8]++;
        cov_1303dtehex().s[61]++;
        return b.compatibilityScore - a.compatibilityScore;
      }).slice(0, 8)); // Limit to top 8 recommendations
      /* istanbul ignore next */
      cov_1303dtehex().s[62]++;
      this.logger.log(`Generated ${sortedRecommendations.length} AI-based community recommendations for user ${userId}`);
      /* istanbul ignore next */
      cov_1303dtehex().s[63]++;
      return sortedRecommendations;
    } catch (error) {
      /* istanbul ignore next */
      cov_1303dtehex().s[64]++;
      this.logger.error(`Error getting recommendations for user ${userId}:`, error);
      /* istanbul ignore next */
      cov_1303dtehex().s[65]++;
      return this.getFallbackRecommendations(userId);
    }
  }
  async calculateCompatibilityScore(assessmentResponses, community) {
    /* istanbul ignore next */
    cov_1303dtehex().f[9]++;
    // Simplified compatibility calculation
    // In a real system, this would use the assessment responses to match with community characteristics
    const baseScore =
    /* istanbul ignore next */
    (cov_1303dtehex().s[66]++, Math.random() * 0.8 + 0.2); // 0.2-1.0 for demo
    // Factor in community size (smaller communities might be better matches)
    const sizeBonus =
    /* istanbul ignore next */
    (cov_1303dtehex().s[67]++, community._count.memberships < 50 ?
    /* istanbul ignore next */
    (cov_1303dtehex().b[22][0]++, 0.1) :
    /* istanbul ignore next */
    (cov_1303dtehex().b[22][1]++, 0));
    /* istanbul ignore next */
    cov_1303dtehex().s[68]++;
    return Math.min(baseScore + sizeBonus, 1.0);
  }
  generateRecommendationReason(score) {
    /* istanbul ignore next */
    cov_1303dtehex().f[10]++;
    cov_1303dtehex().s[69]++;
    if (score > 0.8) {
      /* istanbul ignore next */
      cov_1303dtehex().b[23][0]++;
      cov_1303dtehex().s[70]++;
      return 'Excellent match based on your assessment responses';
    } else
    /* istanbul ignore next */
    {
      cov_1303dtehex().b[23][1]++;
    }
    cov_1303dtehex().s[71]++;
    if (score > 0.6) {
      /* istanbul ignore next */
      cov_1303dtehex().b[24][0]++;
      cov_1303dtehex().s[72]++;
      return 'Good compatibility with your interests';
    } else
    /* istanbul ignore next */
    {
      cov_1303dtehex().b[24][1]++;
    }
    cov_1303dtehex().s[73]++;
    if (score > 0.4) {
      /* istanbul ignore next */
      cov_1303dtehex().b[25][0]++;
      cov_1303dtehex().s[74]++;
      return 'Potential good fit for your needs';
    } else
    /* istanbul ignore next */
    {
      cov_1303dtehex().b[25][1]++;
    }
    cov_1303dtehex().s[75]++;
    return 'Moderate compatibility';
  }
  /**
   * Generate AI-based recommendation reason
   */
  generateAIBasedReason(disorderPredictions, communitySlug) {
    /* istanbul ignore next */
    cov_1303dtehex().f[11]++;
    const activeDisorders =
    /* istanbul ignore next */
    (cov_1303dtehex().s[76]++, Object.keys(disorderPredictions).filter(disorder => {
      /* istanbul ignore next */
      cov_1303dtehex().f[12]++;
      cov_1303dtehex().s[77]++;
      return disorderPredictions[disorder];
    }));
    const community =
    /* istanbul ignore next */
    (cov_1303dtehex().s[78]++, (0, community_configs_1.getCommunityBySlug)(communitySlug));
    /* istanbul ignore next */
    cov_1303dtehex().s[79]++;
    if (!community) {
      /* istanbul ignore next */
      cov_1303dtehex().b[26][0]++;
      cov_1303dtehex().s[80]++;
      return 'Recommended based on your assessment responses';
    } else
    /* istanbul ignore next */
    {
      cov_1303dtehex().b[26][1]++;
    }
    // Map common disorders to user-friendly terms
    const disorderNames =
    /* istanbul ignore next */
    (cov_1303dtehex().s[81]++, {
      Has_Depression: 'depression',
      Has_Anxiety: 'anxiety',
      Has_Social_Anxiety: 'social anxiety',
      Has_PTSD: 'PTSD',
      Has_Panic_Disorder: 'panic disorder',
      Has_Bipolar: 'bipolar disorder',
      Has_OCD: 'OCD',
      Has_Insomnia: 'sleep issues',
      Has_High_Stress: 'stress',
      Has_Burnout: 'burnout',
      Has_Binge_Eating: 'eating concerns',
      Has_ADHD: 'ADHD',
      Has_Alcohol_Problem: 'alcohol concerns',
      Has_Drug_Problem: 'substance concerns',
      Has_Phobia: 'phobias',
      Has_Agoraphobia: 'agoraphobia',
      Has_BloodPhobia: 'blood phobia',
      Has_SocialPhobia: 'social phobia',
      Has_Hoarding: 'hoarding tendencies'
    });
    const relevantDisorders =
    /* istanbul ignore next */
    (cov_1303dtehex().s[82]++, activeDisorders.filter(disorder => {
      /* istanbul ignore next */
      cov_1303dtehex().f[13]++;
      cov_1303dtehex().s[83]++;
      return disorderNames[disorder];
    }).map(disorder => {
      /* istanbul ignore next */
      cov_1303dtehex().f[14]++;
      cov_1303dtehex().s[84]++;
      return disorderNames[disorder];
    }));
    /* istanbul ignore next */
    cov_1303dtehex().s[85]++;
    if (relevantDisorders.length > 0) {
      /* istanbul ignore next */
      cov_1303dtehex().b[27][0]++;
      const disorderList =
      /* istanbul ignore next */
      (cov_1303dtehex().s[86]++, relevantDisorders.length === 1 ?
      /* istanbul ignore next */
      (cov_1303dtehex().b[28][0]++, relevantDisorders[0]) :
      /* istanbul ignore next */
      (cov_1303dtehex().b[28][1]++, relevantDisorders.slice(0, -1).join(', ') + ' and ' + relevantDisorders[relevantDisorders.length - 1]));
      /* istanbul ignore next */
      cov_1303dtehex().s[87]++;
      return `Recommended based on your ${disorderList} assessment results`;
    } else
    /* istanbul ignore next */
    {
      cov_1303dtehex().b[27][1]++;
    }
    cov_1303dtehex().s[88]++;
    return 'Recommended based on your mental health assessment';
  }
  /**
   * Get fallback community recommendations when AI predictions are not available
   */
  async getFallbackRecommendations(userId) {
    /* istanbul ignore next */
    cov_1303dtehex().f[15]++;
    cov_1303dtehex().s[89]++;
    try {
      // Get user's current communities to exclude
      const user =
      /* istanbul ignore next */
      (cov_1303dtehex().s[90]++, await this.prisma.user.findUnique({
        where: {
          id: userId
        },
        include: {
          memberships: {
            select: {
              communityId: true
            }
          }
        }
      }));
      const currentCommunityIds =
      /* istanbul ignore next */
      (cov_1303dtehex().s[91]++,
      /* istanbul ignore next */
      (cov_1303dtehex().b[29][0]++, user?.memberships.map(m => {
        /* istanbul ignore next */
        cov_1303dtehex().f[16]++;
        cov_1303dtehex().s[92]++;
        return m.communityId;
      })) ||
      /* istanbul ignore next */
      (cov_1303dtehex().b[29][1]++, []));
      // Get popular communities (by member count) as fallback
      const communities =
      /* istanbul ignore next */
      (cov_1303dtehex().s[93]++, await this.prisma.community.findMany({
        where: {
          id: {
            notIn: currentCommunityIds
          }
        },
        include: {
          _count: {
            select: {
              memberships: true
            }
          }
        },
        orderBy: {
          memberships: {
            _count: 'desc'
          }
        },
        take: 6
      }));
      const now =
      /* istanbul ignore next */
      (cov_1303dtehex().s[94]++, new Date());
      /* istanbul ignore next */
      cov_1303dtehex().s[95]++;
      return communities.map((community, index) => {
        /* istanbul ignore next */
        cov_1303dtehex().f[17]++;
        cov_1303dtehex().s[96]++;
        return {
          id: community.id,
          name: community.name,
          slug: community.slug,
          description: community.description,
          imageUrl:
          /* istanbul ignore next */
          (cov_1303dtehex().b[30][0]++, community.imageUrl) ||
          /* istanbul ignore next */
          (cov_1303dtehex().b[30][1]++, '/images/communities/default.jpg'),
          memberCount: community._count.memberships,
          compatibilityScore: 0.6 - index * 0.05,
          // Decreasing score based on popularity
          score: 0.6 - index * 0.05,
          reason: 'Popular community that might interest you',
          status: 'pending',
          createdAt: now,
          updatedAt: now
        };
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_1303dtehex().s[97]++;
      this.logger.error(`Error getting fallback recommendations for user ${userId}:`, error);
      /* istanbul ignore next */
      cov_1303dtehex().s[98]++;
      return [];
    }
  }
  /**
   * Generate recommendations for a user (just returns the calculated ones)
   */
  async generateRecommendationsForUser(userId, force =
  /* istanbul ignore next */
  (cov_1303dtehex().b[31][0]++, false)) {
    /* istanbul ignore next */
    cov_1303dtehex().f[18]++;
    cov_1303dtehex().s[99]++;
    // No-op since we calculate on-demand
    this.logger.log(`Generated recommendations for user ${userId} (calculated on-demand)`);
  }
  /**
   * Get a specific recommendation by ID (simplified)
   */
  async getRecommendationById(recommendationId) {
    /* istanbul ignore next */
    cov_1303dtehex().f[19]++;
    cov_1303dtehex().s[100]++;
    // Since we don't store recommendations, we can't fetch by ID
    // In a real scenario, you'd need to recalculate or return null
    return null;
  }
  /**
   * Handle recommendation interaction (simplified)
   */
  async handleRecommendationInteraction(data) {
    /* istanbul ignore next */
    cov_1303dtehex().f[20]++;
    cov_1303dtehex().s[101]++;
    // No-op since we don't store interactions
    this.logger.log(`User ${data.userId} ${data.action}ed recommendation ${data.recommendationId}`);
  }
  /**
   * Stub method for stats - simplified since no table to query
   */
  async getRecommendationStats() {
    /* istanbul ignore next */
    cov_1303dtehex().f[21]++;
    cov_1303dtehex().s[102]++;
    return {
      totalRecommendations: 0,
      acceptedRecommendations: 0,
      rejectedRecommendations: 0,
      pendingRecommendations: 0,
      averageCompatibilityScore: 0,
      topCommunities: []
    };
  }
  /**
   * Join multiple recommended communities immediately
   */
  async joinRecommendedCommunities(userId, communitySlugs) {
    /* istanbul ignore next */
    cov_1303dtehex().f[22]++;
    const successfulJoins =
    /* istanbul ignore next */
    (cov_1303dtehex().s[103]++, []);
    const failedJoins =
    /* istanbul ignore next */
    (cov_1303dtehex().s[104]++, []);
    /* istanbul ignore next */
    cov_1303dtehex().s[105]++;
    for (const slug of communitySlugs) {
      /* istanbul ignore next */
      cov_1303dtehex().s[106]++;
      try {
        // Find the community by slug
        const community =
        /* istanbul ignore next */
        (cov_1303dtehex().s[107]++, await this.prisma.community.findUnique({
          where: {
            slug
          },
          select: {
            id: true,
            name: true,
            slug: true
          }
        }));
        /* istanbul ignore next */
        cov_1303dtehex().s[108]++;
        if (!community) {
          /* istanbul ignore next */
          cov_1303dtehex().b[32][0]++;
          cov_1303dtehex().s[109]++;
          failedJoins.push({
            slug,
            reason: 'Community not found'
          });
          /* istanbul ignore next */
          cov_1303dtehex().s[110]++;
          continue;
        } else
        /* istanbul ignore next */
        {
          cov_1303dtehex().b[32][1]++;
        }
        // Check if user is already a member
        const existingMembership =
        /* istanbul ignore next */
        (cov_1303dtehex().s[111]++, await this.prisma.membership.findUnique({
          where: {
            userId_communityId: {
              userId,
              communityId: community.id
            }
          }
        }));
        /* istanbul ignore next */
        cov_1303dtehex().s[112]++;
        if (existingMembership) {
          /* istanbul ignore next */
          cov_1303dtehex().b[33][0]++;
          cov_1303dtehex().s[113]++;
          failedJoins.push({
            slug,
            reason: 'Already a member'
          });
          /* istanbul ignore next */
          cov_1303dtehex().s[114]++;
          continue;
        } else
        /* istanbul ignore next */
        {
          cov_1303dtehex().b[33][1]++;
        }
        // Create membership
        cov_1303dtehex().s[115]++;
        await this.prisma.membership.create({
          data: {
            userId,
            communityId: community.id,
            joinedAt: new Date()
          }
        });
        /* istanbul ignore next */
        cov_1303dtehex().s[116]++;
        successfulJoins.push({
          communityId: community.id,
          communityName: community.name,
          slug: community.slug
        });
        /* istanbul ignore next */
        cov_1303dtehex().s[117]++;
        this.logger.log(`User ${userId} successfully joined community ${community.name} (${slug})`);
      } catch (error) {
        /* istanbul ignore next */
        cov_1303dtehex().s[118]++;
        this.logger.error(`Error joining community ${slug} for user ${userId}:`, error);
        /* istanbul ignore next */
        cov_1303dtehex().s[119]++;
        failedJoins.push({
          slug,
          reason: error instanceof Error ?
          /* istanbul ignore next */
          (cov_1303dtehex().b[34][0]++, error.message) :
          /* istanbul ignore next */
          (cov_1303dtehex().b[34][1]++, 'Unknown error')
        });
      }
    }
    /* istanbul ignore next */
    cov_1303dtehex().s[120]++;
    this.logger.log(`Community join results for user ${userId}: ${successfulJoins.length} successful, ${failedJoins.length} failed`);
    /* istanbul ignore next */
    cov_1303dtehex().s[121]++;
    return {
      successfulJoins,
      failedJoins
    };
  }
});
/* istanbul ignore next */
cov_1303dtehex().s[122]++;
exports.CommunityRecommendationService = CommunityRecommendationService;
/* istanbul ignore next */
cov_1303dtehex().s[123]++;
exports.CommunityRecommendationService = CommunityRecommendationService = CommunityRecommendationService_1 = __decorate([(0, common_1.Injectable)(), __metadata("design:paramtypes", [typeof (_a =
/* istanbul ignore next */
(cov_1303dtehex().b[36][0]++, typeof prisma_client_provider_1.PrismaService !== "undefined") &&
/* istanbul ignore next */
(cov_1303dtehex().b[36][1]++, prisma_client_provider_1.PrismaService)) === "function" ?
/* istanbul ignore next */
(cov_1303dtehex().b[35][0]++, _a) :
/* istanbul ignore next */
(cov_1303dtehex().b[35][1]++, Object), typeof (_b =
/* istanbul ignore next */
(cov_1303dtehex().b[38][0]++, typeof community_matching_service_1.CommunityMatchingService !== "undefined") &&
/* istanbul ignore next */
(cov_1303dtehex().b[38][1]++, community_matching_service_1.CommunityMatchingService)) === "function" ?
/* istanbul ignore next */
(cov_1303dtehex().b[37][0]++, _b) :
/* istanbul ignore next */
(cov_1303dtehex().b[37][1]++, Object), typeof (_c =
/* istanbul ignore next */
(cov_1303dtehex().b[40][0]++, typeof ai_service_client_1.AiServiceClient !== "undefined") &&
/* istanbul ignore next */
(cov_1303dtehex().b[40][1]++, ai_service_client_1.AiServiceClient)) === "function" ?
/* istanbul ignore next */
(cov_1303dtehex().b[39][0]++, _c) :
/* istanbul ignore next */
(cov_1303dtehex().b[39][1]++, Object)])], CommunityRecommendationService);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTMwM2R0ZWhleCIsImFjdHVhbENvdmVyYWdlIiwiY29tbW9uXzEiLCJzIiwicmVxdWlyZSIsInByaXNtYV9jbGllbnRfcHJvdmlkZXJfMSIsImNvbW11bml0eV9tYXRjaGluZ19zZXJ2aWNlXzEiLCJjb21tdW5pdHlfY29uZmlnc18xIiwiYWlfc2VydmljZV9jbGllbnRfMSIsIkNvbW11bml0eVJlY29tbWVuZGF0aW9uU2VydmljZSIsIkNvbW11bml0eVJlY29tbWVuZGF0aW9uU2VydmljZV8xIiwicHJpc21hIiwiY29tbXVuaXR5TWF0Y2hpbmciLCJhaVNlcnZpY2VDbGllbnQiLCJsb2dnZXIiLCJMb2dnZXIiLCJuYW1lIiwiY29uc3RydWN0b3IiLCJmIiwiZ2V0VXNlclJlY29tbWVuZGF0aW9ucyIsInVzZXJJZCIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsImluY2x1ZGUiLCJjbGllbnQiLCJwcmVBc3Nlc3NtZW50IiwibWVtYmVyc2hpcHMiLCJzZWxlY3QiLCJjb21tdW5pdHlJZCIsImIiLCJOb3RGb3VuZEV4Y2VwdGlvbiIsIndhcm4iLCJnZXRGYWxsYmFja1JlY29tbWVuZGF0aW9ucyIsImRpc29yZGVyUHJlZGljdGlvbnMiLCJhc3Nlc3NtZW50QW5zd2VycyIsImFuc3dlcnMiLCJxdWVzdGlvbm5haXJlcyIsIkFycmF5IiwiaXNBcnJheSIsImFpUmVzdWx0IiwicHJlZGljdCIsInByZWRpY3Rpb25zIiwibG9nIiwiT2JqZWN0Iiwia2V5cyIsImZpbHRlciIsImsiLCJqb2luIiwiZXJyb3IiLCJjdXJyZW50Q29tbXVuaXR5SWRzIiwibWFwIiwibSIsImFpUmVjb21tZW5kYXRpb25zIiwiZ2V0Q29tbXVuaXR5UmVjb21tZW5kYXRpb25zV2l0aFNjb3JlcyIsImxlbmd0aCIsInJlY29tbWVuZGVkU2x1Z3MiLCJyZWMiLCJzbHVnIiwiY29tbXVuaXRpZXMiLCJjb21tdW5pdHkiLCJmaW5kTWFueSIsImluIiwibm90SW4iLCJfY291bnQiLCJyZWNvbW1lbmRhdGlvbnMiLCJub3ciLCJEYXRlIiwiYWlSZWMiLCJmaW5kIiwicHVzaCIsImRlc2NyaXB0aW9uIiwiaW1hZ2VVcmwiLCJtZW1iZXJDb3VudCIsImNvbXBhdGliaWxpdHlTY29yZSIsInNjb3JlIiwicmVhc29uIiwiZ2VuZXJhdGVBSUJhc2VkUmVhc29uIiwic3RhdHVzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwic29ydGVkUmVjb21tZW5kYXRpb25zIiwic29ydCIsImEiLCJzbGljZSIsImNhbGN1bGF0ZUNvbXBhdGliaWxpdHlTY29yZSIsImFzc2Vzc21lbnRSZXNwb25zZXMiLCJiYXNlU2NvcmUiLCJNYXRoIiwicmFuZG9tIiwic2l6ZUJvbnVzIiwibWluIiwiZ2VuZXJhdGVSZWNvbW1lbmRhdGlvblJlYXNvbiIsImNvbW11bml0eVNsdWciLCJhY3RpdmVEaXNvcmRlcnMiLCJkaXNvcmRlciIsImdldENvbW11bml0eUJ5U2x1ZyIsImRpc29yZGVyTmFtZXMiLCJIYXNfRGVwcmVzc2lvbiIsIkhhc19BbnhpZXR5IiwiSGFzX1NvY2lhbF9BbnhpZXR5IiwiSGFzX1BUU0QiLCJIYXNfUGFuaWNfRGlzb3JkZXIiLCJIYXNfQmlwb2xhciIsIkhhc19PQ0QiLCJIYXNfSW5zb21uaWEiLCJIYXNfSGlnaF9TdHJlc3MiLCJIYXNfQnVybm91dCIsIkhhc19CaW5nZV9FYXRpbmciLCJIYXNfQURIRCIsIkhhc19BbGNvaG9sX1Byb2JsZW0iLCJIYXNfRHJ1Z19Qcm9ibGVtIiwiSGFzX1Bob2JpYSIsIkhhc19BZ29yYXBob2JpYSIsIkhhc19CbG9vZFBob2JpYSIsIkhhc19Tb2NpYWxQaG9iaWEiLCJIYXNfSG9hcmRpbmciLCJyZWxldmFudERpc29yZGVycyIsImRpc29yZGVyTGlzdCIsIm9yZGVyQnkiLCJ0YWtlIiwiaW5kZXgiLCJnZW5lcmF0ZVJlY29tbWVuZGF0aW9uc0ZvclVzZXIiLCJmb3JjZSIsImdldFJlY29tbWVuZGF0aW9uQnlJZCIsInJlY29tbWVuZGF0aW9uSWQiLCJoYW5kbGVSZWNvbW1lbmRhdGlvbkludGVyYWN0aW9uIiwiZGF0YSIsImFjdGlvbiIsImdldFJlY29tbWVuZGF0aW9uU3RhdHMiLCJ0b3RhbFJlY29tbWVuZGF0aW9ucyIsImFjY2VwdGVkUmVjb21tZW5kYXRpb25zIiwicmVqZWN0ZWRSZWNvbW1lbmRhdGlvbnMiLCJwZW5kaW5nUmVjb21tZW5kYXRpb25zIiwiYXZlcmFnZUNvbXBhdGliaWxpdHlTY29yZSIsInRvcENvbW11bml0aWVzIiwiam9pblJlY29tbWVuZGVkQ29tbXVuaXRpZXMiLCJjb21tdW5pdHlTbHVncyIsInN1Y2Nlc3NmdWxKb2lucyIsImZhaWxlZEpvaW5zIiwiZXhpc3RpbmdNZW1iZXJzaGlwIiwibWVtYmVyc2hpcCIsInVzZXJJZF9jb21tdW5pdHlJZCIsImNyZWF0ZSIsImpvaW5lZEF0IiwiY29tbXVuaXR5TmFtZSIsIkVycm9yIiwibWVzc2FnZSIsImV4cG9ydHMiLCJfX2RlY29yYXRlIiwiSW5qZWN0YWJsZSIsIlByaXNtYVNlcnZpY2UiLCJfYSIsIl9iIiwiQ29tbXVuaXR5TWF0Y2hpbmdTZXJ2aWNlIiwiX2MiLCJBaVNlcnZpY2VDbGllbnQiXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvY29tbXVuaXRpZXMvc2VydmljZXMvY29tbXVuaXR5LXJlY29tbWVuZGF0aW9uLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgTG9nZ2VyLCBOb3RGb3VuZEV4Y2VwdGlvbiB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IFByaXNtYVNlcnZpY2UgfSBmcm9tICcuLi8uLi9wcm92aWRlcnMvcHJpc21hLWNsaWVudC5wcm92aWRlcic7XG5pbXBvcnQgeyBDb21tdW5pdHlNYXRjaGluZ1NlcnZpY2UgfSBmcm9tICcuL2NvbW11bml0eS1tYXRjaGluZy5zZXJ2aWNlJztcbmltcG9ydCB7IFxuICBnZXRDb21tdW5pdHlSZWNvbW1lbmRhdGlvbnNXaXRoU2NvcmVzLFxuICBnZXRDb21tdW5pdHlCeVNsdWcsXG4gIElMTE5FU1NfQ09NTVVOSVRJRVMgXG59IGZyb20gJy4uLy4uL2NvbmZpZy9jb21tdW5pdHktY29uZmlncyc7XG5pbXBvcnQgeyBBaVNlcnZpY2VDbGllbnQgfSBmcm9tICcuLi8uLi9wcmUtYXNzZXNzbWVudC9zZXJ2aWNlcy9haS1zZXJ2aWNlLmNsaWVudCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbXVuaXR5UmVjb21tZW5kYXRpb24ge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHNsdWc6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgaW1hZ2VVcmw6IHN0cmluZztcbiAgbWVtYmVyQ291bnQ6IG51bWJlcjtcbiAgY29tcGF0aWJpbGl0eVNjb3JlOiBudW1iZXI7XG4gIHNjb3JlOiBudW1iZXI7IC8vIGFsaWFzIGZvciBjb21wYXRpYmlsaXR5XG4gIHJlYXNvbjogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZzsgLy8gY2FsY3VsYXRlZCBvbi1kZW1hbmRcbiAgY3JlYXRlZEF0OiBEYXRlOyAvLyBkdW1teSB2YWx1ZXMgZm9yIGNvbXBhdGliaWxpdHlcbiAgdXBkYXRlZEF0OiBEYXRlOyAvLyBkdW1teSB2YWx1ZXMgZm9yIGNvbXBhdGliaWxpdHlcbn1cblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIENvbW11bml0eVJlY29tbWVuZGF0aW9uU2VydmljZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyID0gbmV3IExvZ2dlcihDb21tdW5pdHlSZWNvbW1lbmRhdGlvblNlcnZpY2UubmFtZSk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBwcmlzbWE6IFByaXNtYVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBjb21tdW5pdHlNYXRjaGluZzogQ29tbXVuaXR5TWF0Y2hpbmdTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgYWlTZXJ2aWNlQ2xpZW50OiBBaVNlcnZpY2VDbGllbnQsXG4gICkge31cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGNvbW11bml0eSByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gQUkgZGlzb3JkZXIgcHJlZGljdGlvbnMgZnJvbSB1c2VyJ3MgYXNzZXNzbWVudFxuICAgKi9cbiAgYXN5bmMgZ2V0VXNlclJlY29tbWVuZGF0aW9ucyhcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxDb21tdW5pdHlSZWNvbW1lbmRhdGlvbltdPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB1c2VyJ3MgZGF0YSBpbmNsdWRpbmcgcHJlYXNzZXNzbWVudCBhbmQgY3VycmVudCBtZW1iZXJzaGlwc1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMucHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGNsaWVudDoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBwcmVBc3Nlc3NtZW50OiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1lbWJlcnNoaXBzOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHsgY29tbXVuaXR5SWQ6IHRydWUgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlciB8fCAhdXNlci5jbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKGBVc2VyICR7dXNlcklkfSBub3QgZm91bmQgb3Igbm90IGEgY2xpZW50YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIHVzZXIgaGFzIGNvbXBsZXRlZCBwcmVhc3Nlc3NtZW50XG4gICAgICBpZiAoIXVzZXIuY2xpZW50LnByZUFzc2Vzc21lbnQpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgTm8gcHJlYXNzZXNzbWVudCBmb3VuZCBmb3IgdXNlciAke3VzZXJJZH1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmFsbGJhY2tSZWNvbW1lbmRhdGlvbnModXNlcklkKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IEFJIGRpc29yZGVyIHByZWRpY3Rpb25zIGZyb20gcHJlYXNzZXNzbWVudCBkYXRhXG4gICAgICBsZXQgZGlzb3JkZXJQcmVkaWN0aW9uczogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFzc2Vzc21lbnRBbnN3ZXJzID0gdXNlci5jbGllbnQucHJlQXNzZXNzbWVudC5hbnN3ZXJzIGFzIGFueTtcbiAgICAgICAgaWYgKGFzc2Vzc21lbnRBbnN3ZXJzPy5xdWVzdGlvbm5haXJlcyAmJiBBcnJheS5pc0FycmF5KGFzc2Vzc21lbnRBbnN3ZXJzLnF1ZXN0aW9ubmFpcmVzKSkge1xuICAgICAgICAgIGNvbnN0IGFpUmVzdWx0ID0gYXdhaXQgdGhpcy5haVNlcnZpY2VDbGllbnQucHJlZGljdChhc3Nlc3NtZW50QW5zd2Vycy5xdWVzdGlvbm5haXJlcyk7XG4gICAgICAgICAgZGlzb3JkZXJQcmVkaWN0aW9ucyA9IGFpUmVzdWx0LnByZWRpY3Rpb25zIHx8IHt9O1xuICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgQUkgcHJlZGljdGlvbnMgb2J0YWluZWQgZm9yIHVzZXIgJHt1c2VySWR9OiAke09iamVjdC5rZXlzKGRpc29yZGVyUHJlZGljdGlvbnMpLmZpbHRlcihrID0+IGRpc29yZGVyUHJlZGljdGlvbnNba10pLmpvaW4oJywgJyl9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIud2FybihgSW52YWxpZCBwcmVhc3Nlc3NtZW50IGRhdGEgZm9ybWF0IGZvciB1c2VyICR7dXNlcklkfWApO1xuICAgICAgICAgIHJldHVybiB0aGlzLmdldEZhbGxiYWNrUmVjb21tZW5kYXRpb25zKHVzZXJJZCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gZ2V0IEFJIHByZWRpY3Rpb25zIGZvciB1c2VyICR7dXNlcklkfTpgLCBlcnJvcik7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZhbGxiYWNrUmVjb21tZW5kYXRpb25zKHVzZXJJZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB1c2VyJ3MgY3VycmVudCBjb21tdW5pdGllcyB0byBleGNsdWRlIGZyb20gcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCBjdXJyZW50Q29tbXVuaXR5SWRzID0gdXNlci5tZW1iZXJzaGlwcy5tYXAoKG0pID0+IG0uY29tbXVuaXR5SWQpO1xuXG4gICAgICAvLyBHZXQgY29tbXVuaXR5IHJlY29tbWVuZGF0aW9ucyBiYXNlZCBvbiBBSSBwcmVkaWN0aW9uc1xuICAgICAgY29uc3QgYWlSZWNvbW1lbmRhdGlvbnMgPSBnZXRDb21tdW5pdHlSZWNvbW1lbmRhdGlvbnNXaXRoU2NvcmVzKGRpc29yZGVyUHJlZGljdGlvbnMpO1xuICAgICAgXG4gICAgICBpZiAoYWlSZWNvbW1lbmRhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgTm8gQUktYmFzZWQgcmVjb21tZW5kYXRpb25zIGZvciB1c2VyICR7dXNlcklkfSwgdXNpbmcgZmFsbGJhY2tgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmFsbGJhY2tSZWNvbW1lbmRhdGlvbnModXNlcklkKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGRhdGFiYXNlIGNvbW11bml0aWVzIHRoYXQgbWF0Y2ggcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCByZWNvbW1lbmRlZFNsdWdzID0gYWlSZWNvbW1lbmRhdGlvbnMubWFwKHJlYyA9PiByZWMuc2x1Zyk7XG4gICAgICBjb25zdCBjb21tdW5pdGllcyA9IGF3YWl0IHRoaXMucHJpc21hLmNvbW11bml0eS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgc2x1ZzogeyBpbjogcmVjb21tZW5kZWRTbHVncyB9LFxuICAgICAgICAgIGlkOiB7IG5vdEluOiBjdXJyZW50Q29tbXVuaXR5SWRzIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgIHNlbGVjdDogeyBtZW1iZXJzaGlwczogdHJ1ZSB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQ3JlYXRlIGZpbmFsIHJlY29tbWVuZGF0aW9ucyB3aXRoIHJlYWwgZGF0YVxuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBDb21tdW5pdHlSZWNvbW1lbmRhdGlvbltdID0gW107XG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICBmb3IgKGNvbnN0IGNvbW11bml0eSBvZiBjb21tdW5pdGllcykge1xuICAgICAgICBjb25zdCBhaVJlYyA9IGFpUmVjb21tZW5kYXRpb25zLmZpbmQocmVjID0+IHJlYy5zbHVnID09PSBjb21tdW5pdHkuc2x1Zyk7XG4gICAgICAgIGlmIChhaVJlYykge1xuICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIGlkOiBjb21tdW5pdHkuaWQsXG4gICAgICAgICAgICBuYW1lOiBjb21tdW5pdHkubmFtZSxcbiAgICAgICAgICAgIHNsdWc6IGNvbW11bml0eS5zbHVnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGNvbW11bml0eS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGltYWdlVXJsOiBjb21tdW5pdHkuaW1hZ2VVcmwgfHwgJy9pbWFnZXMvY29tbXVuaXRpZXMvZGVmYXVsdC5qcGcnLFxuICAgICAgICAgICAgbWVtYmVyQ291bnQ6IGNvbW11bml0eS5fY291bnQubWVtYmVyc2hpcHMsXG4gICAgICAgICAgICBjb21wYXRpYmlsaXR5U2NvcmU6IGFpUmVjLnNjb3JlLFxuICAgICAgICAgICAgc2NvcmU6IGFpUmVjLnNjb3JlLFxuICAgICAgICAgICAgcmVhc29uOiB0aGlzLmdlbmVyYXRlQUlCYXNlZFJlYXNvbihkaXNvcmRlclByZWRpY3Rpb25zLCBhaVJlYy5zbHVnKSxcbiAgICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTb3J0IGJ5IEFJIGNvbXBhdGliaWxpdHkgc2NvcmUgYW5kIHJldHVyblxuICAgICAgY29uc3Qgc29ydGVkUmVjb21tZW5kYXRpb25zID0gcmVjb21tZW5kYXRpb25zXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvbXBhdGliaWxpdHlTY29yZSAtIGEuY29tcGF0aWJpbGl0eVNjb3JlKVxuICAgICAgICAuc2xpY2UoMCwgOCk7IC8vIExpbWl0IHRvIHRvcCA4IHJlY29tbWVuZGF0aW9uc1xuXG4gICAgICB0aGlzLmxvZ2dlci5sb2coYEdlbmVyYXRlZCAke3NvcnRlZFJlY29tbWVuZGF0aW9ucy5sZW5ndGh9IEFJLWJhc2VkIGNvbW11bml0eSByZWNvbW1lbmRhdGlvbnMgZm9yIHVzZXIgJHt1c2VySWR9YCk7XG4gICAgICByZXR1cm4gc29ydGVkUmVjb21tZW5kYXRpb25zO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICBgRXJyb3IgZ2V0dGluZyByZWNvbW1lbmRhdGlvbnMgZm9yIHVzZXIgJHt1c2VySWR9OmAsXG4gICAgICAgIGVycm9yLFxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzLmdldEZhbGxiYWNrUmVjb21tZW5kYXRpb25zKHVzZXJJZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjYWxjdWxhdGVDb21wYXRpYmlsaXR5U2NvcmUoXG4gICAgYXNzZXNzbWVudFJlc3BvbnNlczogYW55W10sXG4gICAgY29tbXVuaXR5OiBhbnksXG4gICk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgLy8gU2ltcGxpZmllZCBjb21wYXRpYmlsaXR5IGNhbGN1bGF0aW9uXG4gICAgLy8gSW4gYSByZWFsIHN5c3RlbSwgdGhpcyB3b3VsZCB1c2UgdGhlIGFzc2Vzc21lbnQgcmVzcG9uc2VzIHRvIG1hdGNoIHdpdGggY29tbXVuaXR5IGNoYXJhY3RlcmlzdGljc1xuICAgIGNvbnN0IGJhc2VTY29yZSA9IE1hdGgucmFuZG9tKCkgKiAwLjggKyAwLjI7IC8vIDAuMi0xLjAgZm9yIGRlbW9cblxuICAgIC8vIEZhY3RvciBpbiBjb21tdW5pdHkgc2l6ZSAoc21hbGxlciBjb21tdW5pdGllcyBtaWdodCBiZSBiZXR0ZXIgbWF0Y2hlcylcbiAgICBjb25zdCBzaXplQm9udXMgPSBjb21tdW5pdHkuX2NvdW50Lm1lbWJlcnNoaXBzIDwgNTAgPyAwLjEgOiAwO1xuXG4gICAgcmV0dXJuIE1hdGgubWluKGJhc2VTY29yZSArIHNpemVCb251cywgMS4wKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvblJlYXNvbihzY29yZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoc2NvcmUgPiAwLjgpXG4gICAgICByZXR1cm4gJ0V4Y2VsbGVudCBtYXRjaCBiYXNlZCBvbiB5b3VyIGFzc2Vzc21lbnQgcmVzcG9uc2VzJztcbiAgICBpZiAoc2NvcmUgPiAwLjYpIHJldHVybiAnR29vZCBjb21wYXRpYmlsaXR5IHdpdGggeW91ciBpbnRlcmVzdHMnO1xuICAgIGlmIChzY29yZSA+IDAuNCkgcmV0dXJuICdQb3RlbnRpYWwgZ29vZCBmaXQgZm9yIHlvdXIgbmVlZHMnO1xuICAgIHJldHVybiAnTW9kZXJhdGUgY29tcGF0aWJpbGl0eSc7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgQUktYmFzZWQgcmVjb21tZW5kYXRpb24gcmVhc29uXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQUlCYXNlZFJlYXNvbihkaXNvcmRlclByZWRpY3Rpb25zOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiwgY29tbXVuaXR5U2x1Zzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBhY3RpdmVEaXNvcmRlcnMgPSBPYmplY3Qua2V5cyhkaXNvcmRlclByZWRpY3Rpb25zKS5maWx0ZXIoZGlzb3JkZXIgPT4gZGlzb3JkZXJQcmVkaWN0aW9uc1tkaXNvcmRlcl0pO1xuICAgIGNvbnN0IGNvbW11bml0eSA9IGdldENvbW11bml0eUJ5U2x1Zyhjb21tdW5pdHlTbHVnKTtcbiAgICBcbiAgICBpZiAoIWNvbW11bml0eSkge1xuICAgICAgcmV0dXJuICdSZWNvbW1lbmRlZCBiYXNlZCBvbiB5b3VyIGFzc2Vzc21lbnQgcmVzcG9uc2VzJztcbiAgICB9XG5cbiAgICAvLyBNYXAgY29tbW9uIGRpc29yZGVycyB0byB1c2VyLWZyaWVuZGx5IHRlcm1zXG4gICAgY29uc3QgZGlzb3JkZXJOYW1lczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgIEhhc19EZXByZXNzaW9uOiAnZGVwcmVzc2lvbicsXG4gICAgICBIYXNfQW54aWV0eTogJ2FueGlldHknLFxuICAgICAgSGFzX1NvY2lhbF9BbnhpZXR5OiAnc29jaWFsIGFueGlldHknLFxuICAgICAgSGFzX1BUU0Q6ICdQVFNEJyxcbiAgICAgIEhhc19QYW5pY19EaXNvcmRlcjogJ3BhbmljIGRpc29yZGVyJyxcbiAgICAgIEhhc19CaXBvbGFyOiAnYmlwb2xhciBkaXNvcmRlcicsXG4gICAgICBIYXNfT0NEOiAnT0NEJyxcbiAgICAgIEhhc19JbnNvbW5pYTogJ3NsZWVwIGlzc3VlcycsXG4gICAgICBIYXNfSGlnaF9TdHJlc3M6ICdzdHJlc3MnLFxuICAgICAgSGFzX0J1cm5vdXQ6ICdidXJub3V0JyxcbiAgICAgIEhhc19CaW5nZV9FYXRpbmc6ICdlYXRpbmcgY29uY2VybnMnLFxuICAgICAgSGFzX0FESEQ6ICdBREhEJyxcbiAgICAgIEhhc19BbGNvaG9sX1Byb2JsZW06ICdhbGNvaG9sIGNvbmNlcm5zJyxcbiAgICAgIEhhc19EcnVnX1Byb2JsZW06ICdzdWJzdGFuY2UgY29uY2VybnMnLFxuICAgICAgSGFzX1Bob2JpYTogJ3Bob2JpYXMnLFxuICAgICAgSGFzX0Fnb3JhcGhvYmlhOiAnYWdvcmFwaG9iaWEnLFxuICAgICAgSGFzX0Jsb29kUGhvYmlhOiAnYmxvb2QgcGhvYmlhJyxcbiAgICAgIEhhc19Tb2NpYWxQaG9iaWE6ICdzb2NpYWwgcGhvYmlhJyxcbiAgICAgIEhhc19Ib2FyZGluZzogJ2hvYXJkaW5nIHRlbmRlbmNpZXMnLFxuICAgIH07XG5cbiAgICBjb25zdCByZWxldmFudERpc29yZGVycyA9IGFjdGl2ZURpc29yZGVyc1xuICAgICAgLmZpbHRlcihkaXNvcmRlciA9PiBkaXNvcmRlck5hbWVzW2Rpc29yZGVyXSlcbiAgICAgIC5tYXAoZGlzb3JkZXIgPT4gZGlzb3JkZXJOYW1lc1tkaXNvcmRlcl0pO1xuXG4gICAgaWYgKHJlbGV2YW50RGlzb3JkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGRpc29yZGVyTGlzdCA9IHJlbGV2YW50RGlzb3JkZXJzLmxlbmd0aCA9PT0gMSBcbiAgICAgICAgPyByZWxldmFudERpc29yZGVyc1swXVxuICAgICAgICA6IHJlbGV2YW50RGlzb3JkZXJzLnNsaWNlKDAsIC0xKS5qb2luKCcsICcpICsgJyBhbmQgJyArIHJlbGV2YW50RGlzb3JkZXJzW3JlbGV2YW50RGlzb3JkZXJzLmxlbmd0aCAtIDFdO1xuICAgICAgXG4gICAgICByZXR1cm4gYFJlY29tbWVuZGVkIGJhc2VkIG9uIHlvdXIgJHtkaXNvcmRlckxpc3R9IGFzc2Vzc21lbnQgcmVzdWx0c2A7XG4gICAgfVxuXG4gICAgcmV0dXJuICdSZWNvbW1lbmRlZCBiYXNlZCBvbiB5b3VyIG1lbnRhbCBoZWFsdGggYXNzZXNzbWVudCc7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZhbGxiYWNrIGNvbW11bml0eSByZWNvbW1lbmRhdGlvbnMgd2hlbiBBSSBwcmVkaWN0aW9ucyBhcmUgbm90IGF2YWlsYWJsZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZXRGYWxsYmFja1JlY29tbWVuZGF0aW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8Q29tbXVuaXR5UmVjb21tZW5kYXRpb25bXT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdXNlcidzIGN1cnJlbnQgY29tbXVuaXRpZXMgdG8gZXhjbHVkZVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMucHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIG1lbWJlcnNoaXBzOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHsgY29tbXVuaXR5SWQ6IHRydWUgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRDb21tdW5pdHlJZHMgPSB1c2VyPy5tZW1iZXJzaGlwcy5tYXAoKG0pID0+IG0uY29tbXVuaXR5SWQpIHx8IFtdO1xuXG4gICAgICAvLyBHZXQgcG9wdWxhciBjb21tdW5pdGllcyAoYnkgbWVtYmVyIGNvdW50KSBhcyBmYWxsYmFja1xuICAgICAgY29uc3QgY29tbXVuaXRpZXMgPSBhd2FpdCB0aGlzLnByaXNtYS5jb21tdW5pdHkuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGlkOiB7IG5vdEluOiBjdXJyZW50Q29tbXVuaXR5SWRzIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgIHNlbGVjdDogeyBtZW1iZXJzaGlwczogdHJ1ZSB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBtZW1iZXJzaGlwczoge1xuICAgICAgICAgICAgX2NvdW50OiAnZGVzYycsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgdGFrZTogNixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgcmV0dXJuIGNvbW11bml0aWVzLm1hcCgoY29tbXVuaXR5LCBpbmRleCkgPT4gKHtcbiAgICAgICAgaWQ6IGNvbW11bml0eS5pZCxcbiAgICAgICAgbmFtZTogY29tbXVuaXR5Lm5hbWUsXG4gICAgICAgIHNsdWc6IGNvbW11bml0eS5zbHVnLFxuICAgICAgICBkZXNjcmlwdGlvbjogY29tbXVuaXR5LmRlc2NyaXB0aW9uLFxuICAgICAgICBpbWFnZVVybDogY29tbXVuaXR5LmltYWdlVXJsIHx8ICcvaW1hZ2VzL2NvbW11bml0aWVzL2RlZmF1bHQuanBnJyxcbiAgICAgICAgbWVtYmVyQ291bnQ6IGNvbW11bml0eS5fY291bnQubWVtYmVyc2hpcHMsXG4gICAgICAgIGNvbXBhdGliaWxpdHlTY29yZTogMC42IC0gKGluZGV4ICogMC4wNSksIC8vIERlY3JlYXNpbmcgc2NvcmUgYmFzZWQgb24gcG9wdWxhcml0eVxuICAgICAgICBzY29yZTogMC42IC0gKGluZGV4ICogMC4wNSksXG4gICAgICAgIHJlYXNvbjogJ1BvcHVsYXIgY29tbXVuaXR5IHRoYXQgbWlnaHQgaW50ZXJlc3QgeW91JyxcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgIGNyZWF0ZWRBdDogbm93LFxuICAgICAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICAgIH0pKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihgRXJyb3IgZ2V0dGluZyBmYWxsYmFjayByZWNvbW1lbmRhdGlvbnMgZm9yIHVzZXIgJHt1c2VySWR9OmAsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgcmVjb21tZW5kYXRpb25zIGZvciBhIHVzZXIgKGp1c3QgcmV0dXJucyB0aGUgY2FsY3VsYXRlZCBvbmVzKVxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnNGb3JVc2VyKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIGZvcmNlID0gZmFsc2UsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIE5vLW9wIHNpbmNlIHdlIGNhbGN1bGF0ZSBvbi1kZW1hbmRcbiAgICB0aGlzLmxvZ2dlci5sb2coXG4gICAgICBgR2VuZXJhdGVkIHJlY29tbWVuZGF0aW9ucyBmb3IgdXNlciAke3VzZXJJZH0gKGNhbGN1bGF0ZWQgb24tZGVtYW5kKWAsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBzcGVjaWZpYyByZWNvbW1lbmRhdGlvbiBieSBJRCAoc2ltcGxpZmllZClcbiAgICovXG4gIGFzeW5jIGdldFJlY29tbWVuZGF0aW9uQnlJZChcbiAgICByZWNvbW1lbmRhdGlvbklkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8Q29tbXVuaXR5UmVjb21tZW5kYXRpb24gfCBudWxsPiB7XG4gICAgLy8gU2luY2Ugd2UgZG9uJ3Qgc3RvcmUgcmVjb21tZW5kYXRpb25zLCB3ZSBjYW4ndCBmZXRjaCBieSBJRFxuICAgIC8vIEluIGEgcmVhbCBzY2VuYXJpbywgeW91J2QgbmVlZCB0byByZWNhbGN1bGF0ZSBvciByZXR1cm4gbnVsbFxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByZWNvbW1lbmRhdGlvbiBpbnRlcmFjdGlvbiAoc2ltcGxpZmllZClcbiAgICovXG4gIGFzeW5jIGhhbmRsZVJlY29tbWVuZGF0aW9uSW50ZXJhY3Rpb24oZGF0YToge1xuICAgIHJlY29tbWVuZGF0aW9uSWQ6IHN0cmluZztcbiAgICBhY3Rpb246IHN0cmluZztcbiAgICB1c2VySWQ6IHN0cmluZztcbiAgfSk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIE5vLW9wIHNpbmNlIHdlIGRvbid0IHN0b3JlIGludGVyYWN0aW9uc1xuICAgIHRoaXMubG9nZ2VyLmxvZyhcbiAgICAgIGBVc2VyICR7ZGF0YS51c2VySWR9ICR7ZGF0YS5hY3Rpb259ZWQgcmVjb21tZW5kYXRpb24gJHtkYXRhLnJlY29tbWVuZGF0aW9uSWR9YCxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0dWIgbWV0aG9kIGZvciBzdGF0cyAtIHNpbXBsaWZpZWQgc2luY2Ugbm8gdGFibGUgdG8gcXVlcnlcbiAgICovXG4gIGFzeW5jIGdldFJlY29tbWVuZGF0aW9uU3RhdHMoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxSZWNvbW1lbmRhdGlvbnM6IDAsXG4gICAgICBhY2NlcHRlZFJlY29tbWVuZGF0aW9uczogMCxcbiAgICAgIHJlamVjdGVkUmVjb21tZW5kYXRpb25zOiAwLFxuICAgICAgcGVuZGluZ1JlY29tbWVuZGF0aW9uczogMCxcbiAgICAgIGF2ZXJhZ2VDb21wYXRpYmlsaXR5U2NvcmU6IDAsXG4gICAgICB0b3BDb21tdW5pdGllczogW10sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBKb2luIG11bHRpcGxlIHJlY29tbWVuZGVkIGNvbW11bml0aWVzIGltbWVkaWF0ZWx5XG4gICAqL1xuICBhc3luYyBqb2luUmVjb21tZW5kZWRDb21tdW5pdGllcyhcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBjb21tdW5pdHlTbHVnczogc3RyaW5nW11cbiAgKTogUHJvbWlzZTx7XG4gICAgc3VjY2Vzc2Z1bEpvaW5zOiBBcnJheTx7IGNvbW11bml0eUlkOiBzdHJpbmc7IGNvbW11bml0eU5hbWU6IHN0cmluZzsgc2x1Zzogc3RyaW5nIH0+O1xuICAgIGZhaWxlZEpvaW5zOiBBcnJheTx7IHNsdWc6IHN0cmluZzsgcmVhc29uOiBzdHJpbmcgfT47XG4gIH0+IHtcbiAgICBjb25zdCBzdWNjZXNzZnVsSm9pbnM6IEFycmF5PHsgY29tbXVuaXR5SWQ6IHN0cmluZzsgY29tbXVuaXR5TmFtZTogc3RyaW5nOyBzbHVnOiBzdHJpbmcgfT4gPSBbXTtcbiAgICBjb25zdCBmYWlsZWRKb2luczogQXJyYXk8eyBzbHVnOiBzdHJpbmc7IHJlYXNvbjogc3RyaW5nIH0+ID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHNsdWcgb2YgY29tbXVuaXR5U2x1Z3MpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIGNvbW11bml0eSBieSBzbHVnXG4gICAgICAgIGNvbnN0IGNvbW11bml0eSA9IGF3YWl0IHRoaXMucHJpc21hLmNvbW11bml0eS5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZTogeyBzbHVnIH0sXG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBzbHVnOiB0cnVlIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFjb21tdW5pdHkpIHtcbiAgICAgICAgICBmYWlsZWRKb2lucy5wdXNoKHsgc2x1ZywgcmVhc29uOiAnQ29tbXVuaXR5IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGFscmVhZHkgYSBtZW1iZXJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdNZW1iZXJzaGlwID0gYXdhaXQgdGhpcy5wcmlzbWEubWVtYmVyc2hpcC5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgdXNlcklkX2NvbW11bml0eUlkOiB7XG4gICAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgICAgY29tbXVuaXR5SWQ6IGNvbW11bml0eS5pZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGV4aXN0aW5nTWVtYmVyc2hpcCkge1xuICAgICAgICAgIGZhaWxlZEpvaW5zLnB1c2goeyBzbHVnLCByZWFzb246ICdBbHJlYWR5IGEgbWVtYmVyJyB9KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBtZW1iZXJzaGlwXG4gICAgICAgIGF3YWl0IHRoaXMucHJpc21hLm1lbWJlcnNoaXAuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICBjb21tdW5pdHlJZDogY29tbXVuaXR5LmlkLFxuICAgICAgICAgICAgam9pbmVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN1Y2Nlc3NmdWxKb2lucy5wdXNoKHtcbiAgICAgICAgICBjb21tdW5pdHlJZDogY29tbXVuaXR5LmlkLFxuICAgICAgICAgIGNvbW11bml0eU5hbWU6IGNvbW11bml0eS5uYW1lLFxuICAgICAgICAgIHNsdWc6IGNvbW11bml0eS5zbHVnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhgVXNlciAke3VzZXJJZH0gc3VjY2Vzc2Z1bGx5IGpvaW5lZCBjb21tdW5pdHkgJHtjb21tdW5pdHkubmFtZX0gKCR7c2x1Z30pYCk7XG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBFcnJvciBqb2luaW5nIGNvbW11bml0eSAke3NsdWd9IGZvciB1c2VyICR7dXNlcklkfTpgLCBlcnJvcik7XG4gICAgICAgIGZhaWxlZEpvaW5zLnB1c2goeyBcbiAgICAgICAgICBzbHVnLCBcbiAgICAgICAgICByZWFzb246IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InIFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmxvZ2dlci5sb2coXG4gICAgICBgQ29tbXVuaXR5IGpvaW4gcmVzdWx0cyBmb3IgdXNlciAke3VzZXJJZH06ICR7c3VjY2Vzc2Z1bEpvaW5zLmxlbmd0aH0gc3VjY2Vzc2Z1bCwgJHtmYWlsZWRKb2lucy5sZW5ndGh9IGZhaWxlZGBcbiAgICApO1xuXG4gICAgcmV0dXJuIHsgc3VjY2Vzc2Z1bEpvaW5zLCBmYWlsZWRKb2lucyB9O1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUNBO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFB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