{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/controllers/enhanced-community.controller.ts","mappings":";;;;;;;;;;;;;;;;AAAA,2CAWwB;AACxB,6CAOyB;AACzB,qEAAgE;AAChE,uFAAiF;AACjF,2EAA8D;AAC9D,4EAA8D;AAC9D,uFAAkF;AAClF,qDAQyB;AACzB,yDAAoD;AAEpD,MAAM,kBAAkB;IAGtB,KAAK,CAAU;IAKf,IAAI,CAAY;IAMhB,UAAU,CAAU;IAMpB,UAAU,CAAU;IAIpB,MAAM,CAAoE;IAI1E,SAAS,CAAkB;IAK3B,cAAc,CAAW;IAKzB,QAAQ,CAAW;IAKnB,kBAAkB,CAAW;IAM7B,IAAI,GAAY,CAAC,CAAC;IAOlB,KAAK,GAAY,EAAE,CAAC;CACrB;AAtDC;IAFC,IAAA,4BAAU,GAAE;IACZ,IAAA,0BAAQ,GAAE;;iDACI;AAKf;IAHC,IAAA,4BAAU,GAAE;IACZ,IAAA,6BAAS,EAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IACjD,IAAA,0BAAQ,EAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;;gDACT;AAMhB;IAJC,IAAA,4BAAU,GAAE;IACZ,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,MAAM,CAAC;IAClB,IAAA,uBAAK,GAAE;IACP,IAAA,qBAAG,EAAC,CAAC,CAAC;;sDACa;AAMpB;IAJC,IAAA,4BAAU,GAAE;IACZ,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,MAAM,CAAC;IAClB,IAAA,uBAAK,GAAE;IACP,IAAA,qBAAG,EAAC,CAAC,CAAC;;sDACa;AAIpB;IAFC,IAAA,4BAAU,GAAE;IACZ,IAAA,sBAAI,EAAC,CAAC,WAAW,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE,cAAc,CAAC,CAAC;;kDACK;AAI1E;IAFC,IAAA,4BAAU,GAAE;IACZ,IAAA,sBAAI,EAAC,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;;qDACK;AAK3B;IAHC,IAAA,4BAAU,GAAE;IACZ,IAAA,6BAAS,EAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,KAAK,KAAK,MAAM,CAAC;IAC1C,IAAA,2BAAS,GAAE;;0DACa;AAKzB;IAHC,IAAA,4BAAU,GAAE;IACZ,IAAA,6BAAS,EAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,KAAK,KAAK,MAAM,CAAC;IAC1C,IAAA,2BAAS,GAAE;;oDACO;AAKnB;IAHC,IAAA,4BAAU,GAAE;IACZ,IAAA,6BAAS,EAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,KAAK,KAAK,MAAM,CAAC;IAC1C,IAAA,2BAAS,GAAE;;8DACiB;AAM7B;IAJC,IAAA,4BAAU,GAAE;IACZ,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,MAAM,CAAC;IAClB,IAAA,uBAAK,GAAE;IACP,IAAA,qBAAG,EAAC,CAAC,CAAC;;gDACW;AAOlB;IALC,IAAA,4BAAU,GAAE;IACZ,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,MAAM,CAAC;IAClB,IAAA,uBAAK,GAAE;IACP,IAAA,qBAAG,EAAC,CAAC,CAAC;IACN,IAAA,qBAAG,EAAC,GAAG,CAAC;;iDACW;AAGtB,MAAM,sBAAsB;IAM1B,KAAK,GAAY,EAAE,CAAC;IAIpB,SAAS,GAAsB,MAAM,CAAC;CACvC;AALC;IALC,IAAA,4BAAU,GAAE;IACZ,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,MAAM,CAAC;IAClB,IAAA,uBAAK,GAAE;IACP,IAAA,qBAAG,EAAC,CAAC,CAAC;IACN,IAAA,qBAAG,EAAC,EAAE,CAAC;;qDACY;AAIpB;IAFC,IAAA,4BAAU,GAAE;IACZ,IAAA,sBAAI,EAAC,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;;yDACc;AAGxC,MAAM,qBAAqB;IAIzB,aAAa,GAAa,IAAI,CAAC;IAO/B,UAAU,GAAY,CAAC,CAAC;CACzB;AARC;IAHC,IAAA,4BAAU,GAAE;IACZ,IAAA,6BAAS,EAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,KAAK,KAAK,MAAM,CAAC;IAC1C,IAAA,2BAAS,GAAE;;4DACmB;AAO/B;IALC,IAAA,4BAAU,GAAE;IACZ,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,MAAM,CAAC;IAClB,IAAA,uBAAK,GAAE;IACP,IAAA,qBAAG,EAAC,CAAC,CAAC;IACN,IAAA,qBAAG,EAAC,EAAE,CAAC;;yDACgB;AAUnB,IAAM,2BAA2B,GAAjC,MAAM,2BAA2B;IAEnB;IADnB,YACmB,wBAAkD;QAAlD,6BAAwB,GAAxB,wBAAwB,CAA0B;IAClE,CAAC;IAmFE,AAAN,KAAK,CAAC,iBAAiB,CACZ,SAA6B,EAC3B,IAAS;QAEpB,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,wBAAwB,CAAC,iBAAiB,CAClE;gBACE,KAAK,EAAE,SAAS,CAAC,KAAK;gBACtB,IAAI,EAAE,SAAS,CAAC,IAAI;gBACpB,UAAU,EAAE,SAAS,CAAC,UAAU;gBAChC,UAAU,EAAE,SAAS,CAAC,UAAU;gBAChC,MAAM,EAAE,SAAS,CAAC,MAAM;gBACxB,SAAS,EAAE,SAAS,CAAC,SAAS;gBAC9B,cAAc,EAAE,SAAS,CAAC,cAAc;gBACxC,QAAQ,EAAE,SAAS,CAAC,QAAQ;gBAC5B,kBAAkB,EAAE,SAAS,CAAC,kBAAkB;aACjD,EACD,IAAI,CAAC,EAAE,EACP,SAAS,CAAC,IAAI,EACd,SAAS,CAAC,KAAK,CAChB,CAAC;YAEF,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,MAAM;gBACZ,OAAO,EAAE,yCAAyC;aACnD,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;IAqDK,AAAN,KAAK,CAAC,mBAAmB,CACc,WAAmB,EAC7C,IAAS;QAEpB,IAAI,CAAC;YACH,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,wBAAwB,CAAC,mBAAmB,CACrE,WAAW,EACX,IAAI,CAAC,EAAE,CACR,CAAC;YAEF,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,OAAO;gBACb,OAAO,EAAE,0CAA0C;aACpD,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;IA+CK,AAAN,KAAK,CAAC,sBAAsB,CAAU,GAA2B;QAC/D,IAAI,CAAC;YACH,MAAM,mBAAmB,GACvB,MAAM,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,CACxD,GAAG,CAAC,KAAK,EACT,GAAG,CAAC,SAAS,CACd,CAAC;YAEJ,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,mBAAmB;gBACzB,OAAO,EAAE,6CAA6C;aACvD,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;IA8BK,AAAN,KAAK,CAAC,qBAAqB,CACY,WAAmB,EAC/C,GAA0B,EACxB,IAAS;QAEpB,IAAI,CAAC;YACH,MAAM,kBAAkB,GACtB,MAAM,IAAI,CAAC,wBAAwB,CAAC,qBAAqB,CAAC,WAAW,EAAE;gBACrE,MAAM,EAAE,IAAI,CAAC,EAAE;gBACf,aAAa,EAAE,GAAG,CAAC,aAAa;gBAChC,UAAU,EAAE,GAAG,CAAC,UAAU;aAC3B,CAAC,CAAC;YAEL,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,kBAAkB;gBACxB,OAAO,EAAE,4CAA4C;aACtD,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;IAcK,AAAN,KAAK,CAAC,mBAAmB,CACZ,IAAS,EACJ,KAAc;QAE9B,IAAI,CAAC;YACH,+DAA+D;YAC/D,gEAAgE;YAChE,MAAM,mBAAmB,GACvB,MAAM,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,CACxD,KAAK,IAAI,EAAE,EACX,MAAM,CACP,CAAC;YAEJ,qDAAqD;YACrD,MAAM,eAAe,GAAG,MAAM,IAAI,CAAC,wBAAwB,CACzD,QAAQ,CACT,CAAC,UAAU,CAAC,QAAQ,CAAC;gBACpB,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;gBAC1B,MAAM,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE;aAC9B,CAAC,CAAC;YAEH,MAAM,gBAAgB,GAAG,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;YACnE,MAAM,eAAe,GAAG,mBAAmB,CAAC,MAAM,CAChD,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,gBAAgB,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC,CACxD,CAAC;YAEF,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,eAAe;gBACrB,OAAO,EAAE,kDAAkD;aAC5D,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;IAYK,AAAN,KAAK,CAAC,sBAAsB;QAC1B,IAAI,CAAC;YACH,mEAAmE;YACnE,MAAM,UAAU,GAAG;gBACjB;oBACE,EAAE,EAAE,YAAY;oBAChB,IAAI,EAAE,oBAAoB;oBAC1B,WAAW,EAAE,sDAAsD;oBACnE,IAAI,EAAE,IAAI;oBACV,cAAc,EAAE,CAAC;iBAClB;gBACD;oBACE,EAAE,EAAE,SAAS;oBACb,IAAI,EAAE,iBAAiB;oBACvB,WAAW,EAAE,uDAAuD;oBACpE,IAAI,EAAE,IAAI;oBACV,cAAc,EAAE,CAAC;iBAClB;gBACD;oBACE,EAAE,EAAE,QAAQ;oBACZ,IAAI,EAAE,eAAe;oBACrB,WAAW,EAAE,sCAAsC;oBACnD,IAAI,EAAE,KAAK;oBACX,cAAc,EAAE,CAAC;iBAClB;gBACD;oBACE,EAAE,EAAE,SAAS;oBACb,IAAI,EAAE,iBAAiB;oBACvB,WAAW,EAAE,yCAAyC;oBACtD,IAAI,EAAE,IAAI;oBACV,cAAc,EAAE,CAAC;iBAClB;gBACD;oBACE,EAAE,EAAE,UAAU;oBACd,IAAI,EAAE,iBAAiB;oBACvB,WAAW,EAAE,iDAAiD;oBAC9D,IAAI,EAAE,IAAI;oBACV,cAAc,EAAE,CAAC;iBAClB;aACF,CAAC;YAEF,mDAAmD;YACnD,KAAK,MAAM,QAAQ,IAAI,UAAU,EAAE,CAAC;gBAClC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,wBAAwB,CAC/C,QAAQ,CACT,CAAC,SAAS,CAAC,KAAK,CAAC;oBAChB,KAAK,EAAE;wBACL,EAAE,EAAE;4BACF;gCACE,IAAI,EAAE;oCACJ,QAAQ,EAAE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oCACrC,IAAI,EAAE,aAAa;iCACpB;6BACF;4BACD;gCACE,WAAW,EAAE;oCACX,QAAQ,EAAE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oCACrC,IAAI,EAAE,aAAa;iCACpB;6BACF;yBACF;qBACF;iBACF,CAAC,CAAC;gBACH,QAAQ,CAAC,cAAc,GAAG,KAAK,CAAC;YAClC,CAAC;YAED,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,UAAU;gBAChB,OAAO,EAAE,6CAA6C;aACvD,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;IAcK,AAAN,KAAK,CAAC,qBAAqB,CACd,IAAS,EACJ,KAAc;QAE9B,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,wBAAwB,CAAC,iBAAiB,CAClE;gBACE,MAAM,EAAE,SAAS;gBACjB,SAAS,EAAE,MAAM;aAClB,EACD,IAAI,CAAC,EAAE,EACP,CAAC,EACD,KAAK,IAAI,EAAE,CACZ,CAAC;YAEF,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,MAAM,CAAC,WAAW;gBACxB,OAAO,EAAE,4CAA4C;aACtD,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;CACF,CAAA;AAzdY,kEAA2B;AAsFhC;IAjFL,IAAA,YAAG,EAAC,QAAQ,CAAC;IACb,IAAA,uBAAK,EAAC,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,CAAC;IAClD,IAAA,sBAAY,EAAC;QACZ,OAAO,EAAE,2BAA2B;QACpC,WAAW,EACT,gFAAgF;KACnF,CAAC;IACD,IAAA,kBAAQ,EAAC;QACR,IAAI,EAAE,OAAO;QACb,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,QAAQ;QACd,WAAW,EAAE,aAAa;KAC3B,CAAC;IACD,IAAA,kBAAQ,EAAC;QACR,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,QAAQ;QACd,WAAW,EAAE,sBAAsB;KACpC,CAAC;IACD,IAAA,kBAAQ,EAAC;QACR,IAAI,EAAE,YAAY;QAClB,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,QAAQ;QACd,WAAW,EAAE,sBAAsB;KACpC,CAAC;IACD,IAAA,kBAAQ,EAAC;QACR,IAAI,EAAE,YAAY;QAClB,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,QAAQ;QACd,WAAW,EAAE,sBAAsB;KACpC,CAAC;IACD,IAAA,kBAAQ,EAAC;QACR,IAAI,EAAE,QAAQ;QACd,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,CAAC,WAAW,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE,cAAc,CAAC;KACrE,CAAC;IACD,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC;IACvE,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,gBAAgB,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;IACtE,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;IAChE,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,oBAAoB,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;IAC1E,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;IACvE,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;IACzE,IAAA,qBAAW,EAAC;QACX,MAAM,EAAE,GAAG;QACX,WAAW,EAAE,wCAAwC;QACrD,MAAM,EAAE;YACN,IAAI,EAAE,QAAQ;YACd,UAAU,EAAE;gBACV,OAAO,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE;gBAC5B,IAAI,EAAE;oBACJ,IAAI,EAAE,QAAQ;oBACd,UAAU,EAAE;wBACV,WAAW,EAAE;4BACX,IAAI,EAAE,OAAO;4BACb,KAAK,EAAE;gCACL,IAAI,EAAE,QAAQ;gCACd,UAAU,EAAE;oCACV,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;oCACtB,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;oCACxB,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;oCACxB,WAAW,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;oCAC/B,WAAW,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;oCAC/B,cAAc,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;oCAClC,gBAAgB,EAAE;wCAChB,IAAI,EAAE,QAAQ;wCACd,IAAI,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,MAAM,CAAC;qCACpC;oCACD,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;iCAClC;6BACF;yBACF;wBACD,KAAK,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;wBACzB,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;wBACxB,KAAK,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;wBACzB,UAAU,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;wBAC9B,MAAM,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;qBAC3B;iBACF;aACF;SACF;KACF,CAAC;IAEC,WAAA,IAAA,cAAK,GAAE,CAAA;IACP,WAAA,IAAA,4BAAO,GAAE,CAAA;;qCADU,kBAAkB;;oEA6BvC;AAqDK;IAnDL,IAAA,YAAG,EAAC,sBAAsB,CAAC;IAC3B,IAAA,uBAAK,EAAC,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,CAAC;IAClD,IAAA,sBAAY,EAAC;QACZ,OAAO,EAAE,gCAAgC;QACzC,WAAW,EACT,kGAAkG;KACrG,CAAC;IACD,IAAA,kBAAQ,EAAC;QACR,IAAI,EAAE,aAAa;QACnB,IAAI,EAAE,QAAQ;QACd,MAAM,EAAE,MAAM;QACd,WAAW,EAAE,cAAc;KAC5B,CAAC;IACD,IAAA,qBAAW,EAAC;QACX,MAAM,EAAE,GAAG;QACX,WAAW,EAAE,mDAAmD;QAChE,MAAM,EAAE;YACN,IAAI,EAAE,QAAQ;YACd,UAAU,EAAE;gBACV,OAAO,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE;gBAC5B,IAAI,EAAE;oBACJ,IAAI,EAAE,QAAQ;oBACd,UAAU,EAAE;wBACV,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;wBACtB,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;wBACxB,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;wBACxB,WAAW,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;wBAC/B,WAAW,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;wBAC/B,KAAK,EAAE;4BACL,IAAI,EAAE,QAAQ;4BACd,UAAU,EAAE;gCACV,UAAU,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;gCAC9B,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;gCACjC,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;gCACjC,cAAc,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;6BACnC;yBACF;wBACD,WAAW,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE;wBAC9B,eAAe,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE;wBAClC,UAAU,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE;wBAC7B,gBAAgB,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;wBACpC,eAAe,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;qBACpC;iBACF;aACF;SACF;KACF,CAAC;IACD,IAAA,qBAAW,EAAC;QACX,MAAM,EAAE,GAAG;QACX,WAAW,EAAE,qBAAqB;KACnC,CAAC;IAEC,WAAA,IAAA,cAAK,EAAC,aAAa,EAAE,sBAAa,CAAC,CAAA;IACnC,WAAA,IAAA,4BAAO,GAAE,CAAA;;;;sEAgBX;AA+CK;IA7CL,IAAA,YAAG,EAAC,UAAU,CAAC;IACf,IAAA,uBAAK,EAAC,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,CAAC;IAClD,IAAA,sBAAY,EAAC;QACZ,OAAO,EAAE,0BAA0B;QACnC,WAAW,EACT,0EAA0E;KAC7E,CAAC;IACD,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;IACzE,IAAA,kBAAQ,EAAC;QACR,IAAI,EAAE,WAAW;QACjB,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,CAAC,MAAM,EAAE,OAAO,CAAC;QACvB,OAAO,EAAE,MAAM;KAChB,CAAC;IACD,IAAA,qBAAW,EAAC;QACX,MAAM,EAAE,GAAG;QACX,WAAW,EAAE,6CAA6C;QAC1D,MAAM,EAAE;YACN,IAAI,EAAE,QAAQ;YACd,UAAU,EAAE;gBACV,OAAO,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE;gBAC5B,IAAI,EAAE;oBACJ,IAAI,EAAE,OAAO;oBACb,KAAK,EAAE;wBACL,IAAI,EAAE,QAAQ;wBACd,UAAU,EAAE;4BACV,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;4BACtB,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;4BACxB,WAAW,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;4BAC/B,cAAc,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;4BAClC,YAAY,EAAE;gCACZ,IAAI,EAAE,QAAQ;gCACd,UAAU,EAAE;oCACV,UAAU,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;oCAC9B,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;oCACjC,cAAc,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;oCAClC,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;iCAClC;6BACF;yBACF;qBACF;iBACF;aACF;SACF;KACF,CAAC;IAC4B,WAAA,IAAA,cAAK,GAAE,CAAA;;qCAAM,sBAAsB;;yEAgBhE;AA8BK;IA5BL,IAAA,YAAG,EAAC,sBAAsB,CAAC;IAC3B,IAAA,uBAAK,EAAC,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,CAAC;IAClD,IAAA,sBAAY,EAAC;QACZ,OAAO,EAAE,yBAAyB;QAClC,WAAW,EACT,6FAA6F;KAChG,CAAC;IACD,IAAA,kBAAQ,EAAC;QACR,IAAI,EAAE,aAAa;QACnB,IAAI,EAAE,QAAQ;QACd,MAAM,EAAE,MAAM;QACd,WAAW,EAAE,wBAAwB;KACtC,CAAC;IACD,IAAA,kBAAQ,EAAC;QACR,IAAI,EAAE,eAAe;QACrB,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,SAAS;QACf,OAAO,EAAE,IAAI;KACd,CAAC;IACD,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;IAC7E,IAAA,qBAAW,EAAC;QACX,MAAM,EAAE,GAAG;QACX,WAAW,EAAE,4CAA4C;KAC1D,CAAC;IACD,IAAA,qBAAW,EAAC;QACX,MAAM,EAAE,GAAG;QACX,WAAW,EAAE,+BAA+B;KAC7C,CAAC;IAEC,WAAA,IAAA,cAAK,EAAC,aAAa,EAAE,sBAAa,CAAC,CAAA;IACnC,WAAA,IAAA,cAAK,GAAE,CAAA;IACP,WAAA,IAAA,4BAAO,GAAE,CAAA;;6CADI,qBAAqB;;wEAmBpC;AAcK;IAZL,IAAA,YAAG,EAAC,UAAU,CAAC;IACf,IAAA,uBAAK,EAAC,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,CAAC;IAClD,IAAA,sBAAY,EAAC;QACZ,OAAO,EAAE,sBAAsB;QAC/B,WAAW,EACT,mFAAmF;KACtF,CAAC;IACD,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;IACzE,IAAA,qBAAW,EAAC;QACX,MAAM,EAAE,GAAG;QACX,WAAW,EAAE,kDAAkD;KAChE,CAAC;IAEC,WAAA,IAAA,4BAAO,GAAE,CAAA;IACT,WAAA,IAAA,cAAK,EAAC,OAAO,CAAC,CAAA;;;;sEAgChB;AAYK;IAVL,IAAA,YAAG,EAAC,YAAY,CAAC;IACjB,IAAA,uBAAK,EAAC,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,CAAC;IAClD,IAAA,sBAAY,EAAC;QACZ,OAAO,EAAE,0BAA0B;QACnC,WAAW,EAAE,sDAAsD;KACpE,CAAC;IACD,IAAA,qBAAW,EAAC;QACX,MAAM,EAAE,GAAG;QACX,WAAW,EAAE,6CAA6C;KAC3D,CAAC;;;;yEA2ED;AAcK;IAZL,IAAA,YAAG,EAAC,SAAS,CAAC;IACd,IAAA,uBAAK,EAAC,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,CAAC;IAClD,IAAA,sBAAY,EAAC;QACZ,OAAO,EAAE,yBAAyB;QAClC,WAAW,EACT,kEAAkE;KACrE,CAAC;IACD,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;IACzE,IAAA,qBAAW,EAAC;QACX,MAAM,EAAE,GAAG;QACX,WAAW,EAAE,4CAA4C;KAC1D,CAAC;IAEC,WAAA,IAAA,4BAAO,GAAE,CAAA;IACT,WAAA,IAAA,cAAK,EAAC,OAAO,CAAC,CAAA;;;;wEAqBhB;sCAxdU,2BAA2B;IAPvC,IAAA,iBAAO,EAAC,sBAAsB,CAAC;IAC/B,IAAA,iBAAO,EAAC,oBAAoB,CAAC;IAC7B,IAAA,uBAAa,EAAC,UAAU,CAAC;IACzB,IAAA,mBAAU,EAAC,sBAAsB,CAAC;IAClC,IAAA,kBAAS,EAAC,6BAAY,EAAE,8CAAoB,CAAC;IAC7C,IAAA,uBAAa,GAAE;IACf,IAAA,iBAAQ,EAAC,IAAI,uBAAc,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;yDAGH,qDAAwB,oBAAxB,qDAAwB;GAF1D,2BAA2B,CAydvC","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/controllers/enhanced-community.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Param,\n  Query,\n  UseGuards,\n  HttpCode,\n  HttpStatus,\n  ParseUUIDPipe,\n  ValidationPipe,\n  UsePipes,\n} from '@nestjs/common';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiParam,\n  ApiQuery,\n  ApiBearerAuth,\n} from '@nestjs/swagger';\nimport { JwtAuthGuard } from '../../auth/guards/jwt-auth.guard';\nimport { RoleBasedAccessGuard } from '../../auth/guards/role-based-access.guard';\nimport { Roles } from '../../auth/decorators/roles.decorator';\nimport { GetUser } from '../../decorators/get-user.decorator';\nimport { EnhancedCommunityService } from '../services/enhanced-community.service';\nimport {\n  IsString,\n  IsOptional,\n  IsIn,\n  IsInt,\n  IsBoolean,\n  Min,\n  Max,\n} from 'class-validator';\nimport { Transform, Type } from 'class-transformer';\n\nclass CommunitySearchDto {\n  @IsOptional()\n  @IsString()\n  query?: string;\n\n  @IsOptional()\n  @Transform(({ value }) => value?.split(',') || [])\n  @IsString({ each: true })\n  tags?: string[];\n\n  @IsOptional()\n  @Type(() => Number)\n  @IsInt()\n  @Min(0)\n  minMembers?: number;\n\n  @IsOptional()\n  @Type(() => Number)\n  @IsInt()\n  @Min(0)\n  maxMembers?: number;\n\n  @IsOptional()\n  @IsIn(['relevance', 'members', 'activity', 'newest', 'alphabetical'])\n  sortBy?: 'relevance' | 'members' | 'activity' | 'newest' | 'alphabetical';\n\n  @IsOptional()\n  @IsIn(['asc', 'desc'])\n  sortOrder?: 'asc' | 'desc';\n\n  @IsOptional()\n  @Transform(({ value }) => value === 'true')\n  @IsBoolean()\n  hasDescription?: boolean;\n\n  @IsOptional()\n  @Transform(({ value }) => value === 'true')\n  @IsBoolean()\n  hasImage?: boolean;\n\n  @IsOptional()\n  @Transform(({ value }) => value === 'true')\n  @IsBoolean()\n  membershipRequired?: boolean;\n\n  @IsOptional()\n  @Type(() => Number)\n  @IsInt()\n  @Min(1)\n  page?: number = 1;\n\n  @IsOptional()\n  @Type(() => Number)\n  @IsInt()\n  @Min(1)\n  @Max(100)\n  limit?: number = 20;\n}\n\nclass TrendingCommunitiesDto {\n  @IsOptional()\n  @Type(() => Number)\n  @IsInt()\n  @Min(1)\n  @Max(50)\n  limit?: number = 10;\n\n  @IsOptional()\n  @IsIn(['week', 'month'])\n  timeframe?: 'week' | 'month' = 'week';\n}\n\nclass SimilarCommunitiesDto {\n  @IsOptional()\n  @Transform(({ value }) => value === 'true')\n  @IsBoolean()\n  excludeJoined?: boolean = true;\n\n  @IsOptional()\n  @Type(() => Number)\n  @IsInt()\n  @Min(1)\n  @Max(20)\n  maxResults?: number = 5;\n}\n\n@ApiTags('Enhanced Communities')\n@ApiTags('enhanced-community')\n@ApiBearerAuth('JWT-auth')\n@Controller('communities/enhanced')\n@UseGuards(JwtAuthGuard, RoleBasedAccessGuard)\n@ApiBearerAuth()\n@UsePipes(new ValidationPipe({ transform: true }))\nexport class EnhancedCommunityController {\n  constructor(\n    private readonly enhancedCommunityService: EnhancedCommunityService,\n  ) {}\n\n  @Get('search')\n  @Roles('client', 'therapist', 'moderator', 'admin')\n  @ApiOperation({\n    summary: 'Advanced community search',\n    description:\n      'Search communities with advanced filtering, sorting, and faceting capabilities',\n  })\n  @ApiQuery({\n    name: 'query',\n    required: false,\n    type: 'string',\n    description: 'Search text',\n  })\n  @ApiQuery({\n    name: 'tags',\n    required: false,\n    type: 'string',\n    description: 'Comma-separated tags',\n  })\n  @ApiQuery({\n    name: 'minMembers',\n    required: false,\n    type: 'number',\n    description: 'Minimum member count',\n  })\n  @ApiQuery({\n    name: 'maxMembers',\n    required: false,\n    type: 'number',\n    description: 'Maximum member count',\n  })\n  @ApiQuery({\n    name: 'sortBy',\n    required: false,\n    enum: ['relevance', 'members', 'activity', 'newest', 'alphabetical'],\n  })\n  @ApiQuery({ name: 'sortOrder', required: false, enum: ['asc', 'desc'] })\n  @ApiQuery({ name: 'hasDescription', required: false, type: 'boolean' })\n  @ApiQuery({ name: 'hasImage', required: false, type: 'boolean' })\n  @ApiQuery({ name: 'membershipRequired', required: false, type: 'boolean' })\n  @ApiQuery({ name: 'page', required: false, type: 'number', example: 1 })\n  @ApiQuery({ name: 'limit', required: false, type: 'number', example: 20 })\n  @ApiResponse({\n    status: 200,\n    description: 'Communities search results with facets',\n    schema: {\n      type: 'object',\n      properties: {\n        success: { type: 'boolean' },\n        data: {\n          type: 'object',\n          properties: {\n            communities: {\n              type: 'array',\n              items: {\n                type: 'object',\n                properties: {\n                  id: { type: 'string' },\n                  name: { type: 'string' },\n                  slug: { type: 'string' },\n                  description: { type: 'string' },\n                  memberCount: { type: 'number' },\n                  recentActivity: { type: 'object' },\n                  membershipStatus: {\n                    type: 'string',\n                    enum: ['member', 'pending', 'none'],\n                  },\n                  compatibility: { type: 'object' },\n                },\n              },\n            },\n            total: { type: 'number' },\n            page: { type: 'number' },\n            limit: { type: 'number' },\n            totalPages: { type: 'number' },\n            facets: { type: 'object' },\n          },\n        },\n      },\n    },\n  })\n  async searchCommunities(\n    @Query() searchDto: CommunitySearchDto,\n    @GetUser() user: any,\n  ) {\n    try {\n      const result = await this.enhancedCommunityService.searchCommunities(\n        {\n          query: searchDto.query,\n          tags: searchDto.tags,\n          minMembers: searchDto.minMembers,\n          maxMembers: searchDto.maxMembers,\n          sortBy: searchDto.sortBy,\n          sortOrder: searchDto.sortOrder,\n          hasDescription: searchDto.hasDescription,\n          hasImage: searchDto.hasImage,\n          membershipRequired: searchDto.membershipRequired,\n        },\n        user.id,\n        searchDto.page,\n        searchDto.limit,\n      );\n\n      return {\n        success: true,\n        data: result,\n        message: 'Community search completed successfully',\n      };\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  @Get(':communityId/details')\n  @Roles('client', 'therapist', 'moderator', 'admin')\n  @ApiOperation({\n    summary: 'Get enhanced community details',\n    description:\n      'Retrieve comprehensive community information including stats, recent posts, and top contributors',\n  })\n  @ApiParam({\n    name: 'communityId',\n    type: 'string',\n    format: 'uuid',\n    description: 'Community ID',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Enhanced community details retrieved successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        success: { type: 'boolean' },\n        data: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            name: { type: 'string' },\n            slug: { type: 'string' },\n            description: { type: 'string' },\n            memberCount: { type: 'number' },\n            stats: {\n              type: 'object',\n              properties: {\n                totalPosts: { type: 'number' },\n                totalComments: { type: 'number' },\n                activeMembers: { type: 'number' },\n                recentActivity: { type: 'object' },\n              },\n            },\n            recentPosts: { type: 'array' },\n            topContributors: { type: 'array' },\n            moderators: { type: 'array' },\n            membershipStatus: { type: 'string' },\n            userPermissions: { type: 'object' },\n          },\n        },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 404,\n    description: 'Community not found',\n  })\n  async getCommunityDetails(\n    @Param('communityId', ParseUUIDPipe) communityId: string,\n    @GetUser() user: any,\n  ) {\n    try {\n      const details = await this.enhancedCommunityService.getCommunityDetails(\n        communityId,\n        user.id,\n      );\n\n      return {\n        success: true,\n        data: details,\n        message: 'Community details retrieved successfully',\n      };\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  @Get('trending')\n  @Roles('client', 'therapist', 'moderator', 'admin')\n  @ApiOperation({\n    summary: 'Get trending communities',\n    description:\n      'Retrieve communities that are trending based on growth rate and activity',\n  })\n  @ApiQuery({ name: 'limit', required: false, type: 'number', example: 10 })\n  @ApiQuery({\n    name: 'timeframe',\n    required: false,\n    enum: ['week', 'month'],\n    example: 'week',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Trending communities retrieved successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        success: { type: 'boolean' },\n        data: {\n          type: 'array',\n          items: {\n            type: 'object',\n            properties: {\n              id: { type: 'string' },\n              name: { type: 'string' },\n              memberCount: { type: 'number' },\n              recentActivity: { type: 'object' },\n              trendingData: {\n                type: 'object',\n                properties: {\n                  growthRate: { type: 'number' },\n                  activityScore: { type: 'number' },\n                  engagementRate: { type: 'number' },\n                  retentionRate: { type: 'number' },\n                },\n              },\n            },\n          },\n        },\n      },\n    },\n  })\n  async getTrendingCommunities(@Query() dto: TrendingCommunitiesDto) {\n    try {\n      const trendingCommunities =\n        await this.enhancedCommunityService.getTrendingCommunities(\n          dto.limit,\n          dto.timeframe,\n        );\n\n      return {\n        success: true,\n        data: trendingCommunities,\n        message: 'Trending communities retrieved successfully',\n      };\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  @Get(':communityId/similar')\n  @Roles('client', 'therapist', 'moderator', 'admin')\n  @ApiOperation({\n    summary: 'Get similar communities',\n    description:\n      'Find communities similar to the specified one based on member overlap and activity patterns',\n  })\n  @ApiParam({\n    name: 'communityId',\n    type: 'string',\n    format: 'uuid',\n    description: 'Reference community ID',\n  })\n  @ApiQuery({\n    name: 'excludeJoined',\n    required: false,\n    type: 'boolean',\n    example: true,\n  })\n  @ApiQuery({ name: 'maxResults', required: false, type: 'number', example: 5 })\n  @ApiResponse({\n    status: 200,\n    description: 'Similar communities retrieved successfully',\n  })\n  @ApiResponse({\n    status: 404,\n    description: 'Reference community not found',\n  })\n  async getSimilarCommunities(\n    @Param('communityId', ParseUUIDPipe) communityId: string,\n    @Query() dto: SimilarCommunitiesDto,\n    @GetUser() user: any,\n  ) {\n    try {\n      const similarCommunities =\n        await this.enhancedCommunityService.getSimilarCommunities(communityId, {\n          userId: user.id,\n          excludeJoined: dto.excludeJoined,\n          maxResults: dto.maxResults,\n        });\n\n      return {\n        success: true,\n        data: similarCommunities,\n        message: 'Similar communities retrieved successfully',\n      };\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  @Get('discover')\n  @Roles('client', 'therapist', 'moderator', 'admin')\n  @ApiOperation({\n    summary: 'Discover communities',\n    description:\n      'Get personalized community recommendations based on user activity and preferences',\n  })\n  @ApiQuery({ name: 'limit', required: false, type: 'number', example: 10 })\n  @ApiResponse({\n    status: 200,\n    description: 'Community recommendations retrieved successfully',\n  })\n  async discoverCommunities(\n    @GetUser() user: any,\n    @Query('limit') limit?: number,\n  ) {\n    try {\n      // This could integrate with the CommunityRecommendationService\n      // For now, return trending communities as a discovery mechanism\n      const trendingCommunities =\n        await this.enhancedCommunityService.getTrendingCommunities(\n          limit || 10,\n          'week',\n        );\n\n      // Filter out communities the user has already joined\n      const userMemberships = await this.enhancedCommunityService[\n        'prisma'\n      ].membership.findMany({\n        where: { userId: user.id },\n        select: { communityId: true },\n      });\n\n      const userCommunityIds = userMemberships.map((m) => m.communityId);\n      const recommendations = trendingCommunities.filter(\n        (community) => !userCommunityIds.includes(community.id),\n      );\n\n      return {\n        success: true,\n        data: recommendations,\n        message: 'Community recommendations retrieved successfully',\n      };\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  @Get('categories')\n  @Roles('client', 'therapist', 'moderator', 'admin')\n  @ApiOperation({\n    summary: 'Get community categories',\n    description: 'Retrieve available community categories for browsing',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Community categories retrieved successfully',\n  })\n  async getCommunityCategories() {\n    try {\n      // This could be expanded to use actual category data from database\n      const categories = [\n        {\n          id: 'depression',\n          name: 'Depression Support',\n          description: 'Communities focused on depression and mood disorders',\n          icon: 'üòî',\n          communityCount: 0,\n        },\n        {\n          id: 'anxiety',\n          name: 'Anxiety Support',\n          description: 'Communities for anxiety, panic, and stress management',\n          icon: 'üò∞',\n          communityCount: 0,\n        },\n        {\n          id: 'trauma',\n          name: 'Trauma & PTSD',\n          description: 'Support for trauma recovery and PTSD',\n          icon: 'üõ°Ô∏è',\n          communityCount: 0,\n        },\n        {\n          id: 'general',\n          name: 'General Support',\n          description: 'Broad mental health support communities',\n          icon: 'ü§ù',\n          communityCount: 0,\n        },\n        {\n          id: 'wellness',\n          name: 'Mental Wellness',\n          description: 'Focus on mental health maintenance and wellness',\n          icon: 'üå±',\n          communityCount: 0,\n        },\n      ];\n\n      // Count communities for each category (simplified)\n      for (const category of categories) {\n        const count = await this.enhancedCommunityService[\n          'prisma'\n        ].community.count({\n          where: {\n            OR: [\n              {\n                name: {\n                  contains: category.name.split(' ')[0],\n                  mode: 'insensitive',\n                },\n              },\n              {\n                description: {\n                  contains: category.name.split(' ')[0],\n                  mode: 'insensitive',\n                },\n              },\n            ],\n          },\n        });\n        category.communityCount = count;\n      }\n\n      return {\n        success: true,\n        data: categories,\n        message: 'Community categories retrieved successfully',\n      };\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  @Get('popular')\n  @Roles('client', 'therapist', 'moderator', 'admin')\n  @ApiOperation({\n    summary: 'Get popular communities',\n    description:\n      'Retrieve communities with the highest member counts and activity',\n  })\n  @ApiQuery({ name: 'limit', required: false, type: 'number', example: 10 })\n  @ApiResponse({\n    status: 200,\n    description: 'Popular communities retrieved successfully',\n  })\n  async getPopularCommunities(\n    @GetUser() user: any,\n    @Query('limit') limit?: number,\n  ) {\n    try {\n      const result = await this.enhancedCommunityService.searchCommunities(\n        {\n          sortBy: 'members',\n          sortOrder: 'desc',\n        },\n        user.id,\n        1,\n        limit || 10,\n      );\n\n      return {\n        success: true,\n        data: result.communities,\n        message: 'Popular communities retrieved successfully',\n      };\n    } catch (error) {\n      throw error;\n    }\n  }\n}\n"],"version":3}