{"version":3,"names":["cov_9zw1lrl39","actualCoverage","s","domain_event_interface_1","require","MessageSentEvent","BaseDomainEvent","constructor","data","metadata","f","messageId","exports","ConversationCreatedEvent","conversationId","ConversationArchivedEvent","TypingIndicatorEvent","MessageReadEvent","MessageDeliveredEvent","ParticipantJoinedEvent","ParticipantLeftEvent"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/events/messaging-events.ts"],"sourcesContent":["import {\n  BaseDomainEvent,\n  EventMetadata,\n} from './interfaces/domain-event.interface';\n\n// Messaging & Communication Events\n\nexport interface MessageSentData {\n  messageId: string;\n  conversationId: string;\n  senderId: string;\n  content: string;\n  messageType: 'text' | 'image' | 'file' | 'audio' | 'video' | 'system';\n  fileAttachments?: string[]; // file IDs\n  replyToMessageId?: string;\n  recipientIds: string[];\n  sentAt: Date;\n  isEncrypted?: boolean; // For security tracking and compliance\n}\n\nexport class MessageSentEvent extends BaseDomainEvent<MessageSentData> {\n  constructor(data: MessageSentData, metadata?: EventMetadata) {\n    super(data.messageId, 'Message', data, metadata);\n  }\n}\n\nexport interface ConversationCreatedData {\n  conversationId: string;\n  createdBy: string;\n  participantIds: string[];\n  conversationType: 'direct' | 'group' | 'support' | 'therapy';\n  title?: string;\n  description?: string;\n  isPrivate: boolean;\n}\n\nexport class ConversationCreatedEvent extends BaseDomainEvent<ConversationCreatedData> {\n  constructor(data: ConversationCreatedData, metadata?: EventMetadata) {\n    super(data.conversationId, 'Conversation', data, metadata);\n  }\n}\n\nexport interface ConversationArchivedData {\n  conversationId: string;\n  archivedBy: string;\n  participantIds: string[];\n  archivedAt: Date;\n  archiveReason: 'completed' | 'inactive' | 'manual' | 'policy_violation';\n  messageCount: number;\n  conversationDuration: number; // in days\n}\n\nexport class ConversationArchivedEvent extends BaseDomainEvent<ConversationArchivedData> {\n  constructor(data: ConversationArchivedData, metadata?: EventMetadata) {\n    super(data.conversationId, 'Conversation', data, metadata);\n  }\n}\n\nexport interface TypingIndicatorData {\n  conversationId: string;\n  userId: string;\n  isTyping: boolean;\n  timestamp: Date;\n}\n\nexport class TypingIndicatorEvent extends BaseDomainEvent<TypingIndicatorData> {\n  constructor(data: TypingIndicatorData, metadata?: EventMetadata) {\n    super(data.conversationId, 'Conversation', data, metadata);\n  }\n}\n\nexport interface MessageReadData {\n  messageId: string;\n  conversationId: string;\n  readBy: string;\n  readAt: Date;\n  messagesSinceLastRead: number;\n}\n\nexport class MessageReadEvent extends BaseDomainEvent<MessageReadData> {\n  constructor(data: MessageReadData, metadata?: EventMetadata) {\n    super(data.messageId, 'Message', data, metadata);\n  }\n}\n\nexport interface MessageDeliveredData {\n  messageId: string;\n  conversationId: string;\n  deliveredTo: string;\n  deliveredAt: Date;\n  deliveryMethod: 'websocket' | 'push' | 'email' | 'sms';\n  deliveryStatus: 'delivered' | 'failed' | 'pending';\n}\n\nexport class MessageDeliveredEvent extends BaseDomainEvent<MessageDeliveredData> {\n  constructor(data: MessageDeliveredData, metadata?: EventMetadata) {\n    super(data.messageId, 'Message', data, metadata);\n  }\n}\n\nexport interface ParticipantJoinedData {\n  conversationId: string;\n  participantId: string;\n  addedBy: string;\n  joinedAt: Date;\n  role: 'member' | 'admin' | 'moderator';\n}\n\nexport class ParticipantJoinedEvent extends BaseDomainEvent<ParticipantJoinedData> {\n  constructor(data: ParticipantJoinedData, metadata?: EventMetadata) {\n    super(data.conversationId, 'Conversation', data, metadata);\n  }\n}\n\nexport interface ParticipantLeftData {\n  conversationId: string;\n  participantId: string;\n  leftAt: Date;\n  leftReason: 'manual' | 'removed' | 'archived' | 'blocked';\n  removedBy?: string;\n}\n\nexport class ParticipantLeftEvent extends BaseDomainEvent<ParticipantLeftData> {\n  constructor(data: ParticipantLeftData, metadata?: EventMetadata) {\n    super(data.conversationId, 'Conversation', data, metadata);\n  }\n}\n"],"mappings":"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","ignoreList":[]}