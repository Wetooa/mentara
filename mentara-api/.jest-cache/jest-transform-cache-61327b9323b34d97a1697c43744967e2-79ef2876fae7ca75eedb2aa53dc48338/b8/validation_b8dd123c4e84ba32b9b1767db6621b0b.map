{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-commons/dist/utils/validation.js","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-commons/dist/utils/validation.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchema = validateSchema;\nexports.validateWithCustomErrors = validateWithCustomErrors;\nexports.validateSchemaAsync = validateSchemaAsync;\nexports.validatePartial = validatePartial;\nexports.validateArray = validateArray;\nexports.validateAndTransform = validateAndTransform;\nexports.formatValidationErrors = formatValidationErrors;\nexports.hasValidationErrors = hasValidationErrors;\nexports.getFirstValidationError = getFirstValidationError;\nexports.createValidationMiddleware = createValidationMiddleware;\nexports.validateWithCoercion = validateWithCoercion;\nexports.validateForEnvironment = validateForEnvironment;\nconst zod_1 = require(\"zod\");\n// Generic validation function\nfunction validateSchema(schema, data) {\n    const result = schema.safeParse(data);\n    if (result.success) {\n        return {\n            success: true,\n            data: result.data\n        };\n    }\n    return {\n        success: false,\n        errors: result.error.errors.map(error => ({\n            path: error.path,\n            message: error.message,\n            code: error.code\n        }))\n    };\n}\n// Validation with custom error formatting\nfunction validateWithCustomErrors(schema, data, customErrors) {\n    const result = validateSchema(schema, data);\n    if (!result.success && customErrors && result.errors) {\n        result.errors = result.errors.map(error => ({\n            ...error,\n            message: customErrors[error.path.join('.')] || error.message\n        }));\n    }\n    return result;\n}\n// Async validation function\nasync function validateSchemaAsync(schema, data) {\n    const result = await schema.safeParseAsync(data);\n    if (result.success) {\n        return {\n            success: true,\n            data: result.data\n        };\n    }\n    return {\n        success: false,\n        errors: result.error.errors.map(error => ({\n            path: error.path,\n            message: error.message,\n            code: error.code\n        }))\n    };\n}\n// Partial validation - only validate provided fields\nfunction validatePartial(schema, data) {\n    const partialSchema = schema.partial();\n    return validateSchema(partialSchema, data);\n}\n// Array validation with detailed error reporting\nfunction validateArray(itemSchema, data) {\n    const arraySchema = zod_1.z.array(itemSchema);\n    return validateSchema(arraySchema, data);\n}\n// Validation with transformation\nfunction validateAndTransform(schema, data, transform) {\n    const result = validateSchema(schema, data);\n    if (result.success && result.data) {\n        return {\n            success: true,\n            data: transform(result.data)\n        };\n    }\n    return {\n        success: false,\n        errors: result.errors || []\n    };\n}\n// Validation error formatter for API responses\nfunction formatValidationErrors(errors) {\n    if (!errors || errors.length === 0) {\n        return 'Unknown validation error';\n    }\n    return errors\n        .map(error => `${error.path.join('.')}: ${error.message}`)\n        .join('; ');\n}\n// Check if validation result has errors\nfunction hasValidationErrors(result) {\n    return !result.success && Array.isArray(result.errors) && result.errors.length > 0;\n}\n// Extract first validation error\nfunction getFirstValidationError(result) {\n    if (hasValidationErrors(result)) {\n        return result.errors[0]?.message || null;\n    }\n    return null;\n}\n// Create validation middleware for express-like frameworks\nfunction createValidationMiddleware(schema) {\n    return (data) => {\n        const result = validateSchema(schema, data);\n        if (!result.success) {\n            const errorMessage = formatValidationErrors(result.errors);\n            throw new Error(`Validation failed: ${errorMessage}`);\n        }\n        return result.data;\n    };\n}\n// Validation with coercion for string inputs (useful for query parameters)\nfunction validateWithCoercion(schema, data) {\n    // Create a coerced version of the schema for common types\n    const coercedData = {};\n    Object.entries(data).forEach(([key, value]) => {\n        // Try to coerce string values to appropriate types\n        if (value === 'true') {\n            coercedData[key] = true;\n        }\n        else if (value === 'false') {\n            coercedData[key] = false;\n        }\n        else if (value === 'null') {\n            coercedData[key] = null;\n        }\n        else if (value === 'undefined') {\n            coercedData[key] = undefined;\n        }\n        else if (!isNaN(Number(value)) && value !== '') {\n            coercedData[key] = Number(value);\n        }\n        else {\n            coercedData[key] = value;\n        }\n    });\n    return validateSchema(schema, coercedData);\n}\n// Validation with environment-specific rules\nfunction validateForEnvironment(schema, data, environment) {\n    // In development, we might want more lenient validation\n    if (environment === 'development') {\n        // Could implement more permissive validation here\n        return validateSchema(schema, data);\n    }\n    // Production validation is strict\n    return validateSchema(schema, data);\n}\n//# sourceMappingURL=validation.js.map"],"version":3}