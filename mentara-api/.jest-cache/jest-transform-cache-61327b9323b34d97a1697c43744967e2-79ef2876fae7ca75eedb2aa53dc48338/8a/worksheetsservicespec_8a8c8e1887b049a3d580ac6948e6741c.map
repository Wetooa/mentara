{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/worksheets/worksheets.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/worksheets/worksheets.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { NotFoundException } from '@nestjs/common';\nimport { WorksheetsService } from './worksheets.service';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport type {\n  WorksheetCreateInputDto,\n  WorksheetSubmissionCreateInputDto,\n  WorksheetUpdateInputDto,\n} from './types';\n\ndescribe('WorksheetsService', () => {\n  let service: WorksheetsService;\n  let prismaService: jest.Mocked<PrismaService>;\n\n  // Mock data structures\n  const mockDate = new Date('2024-01-15T10:00:00Z');\n  const mockDueDate = new Date('2024-01-22T10:00:00Z');\n\n  const mockUser = {\n    id: 'user-123',\n    firstName: 'John',\n    lastName: 'Doe',\n    avatarUrl: 'https://example.com/avatar.jpg',\n  };\n\n  const mockClient = {\n    id: 'client-123',\n    userId: 'user-123',\n    user: mockUser,\n    createdAt: mockDate,\n    updatedAt: mockDate,\n  };\n\n  const mockTherapist = {\n    id: 'therapist-456',\n    userId: 'therapist-user-456',\n    user: {\n      id: 'therapist-user-456',\n      firstName: 'Dr. Jane',\n      lastName: 'Smith',\n      avatarUrl: 'https://example.com/therapist-avatar.jpg',\n    },\n    createdAt: mockDate,\n    updatedAt: mockDate,\n  };\n\n  const mockWorksheet = {\n    id: 'worksheet-789',\n    title: 'Anxiety Management Worksheet',\n    instructions: 'Complete the exercises in order',\n    description: 'This worksheet helps manage anxiety symptoms',\n    dueDate: mockDueDate,\n    status: 'assigned',\n    isCompleted: false,\n    clientId: 'client-123',\n    therapistId: 'therapist-456',\n    materialUrls: ['https://example.com/material1.pdf', 'https://example.com/material2.pdf'],\n    materialNames: ['Exercise Instructions', 'Reference Material'],\n    materialSizes: [1024, 2048],\n    submissionUrls: [],\n    submissionNames: [],\n    submissionSizes: [],\n    feedback: null,\n    submittedAt: null,\n    createdAt: mockDate,\n    updatedAt: mockDate,\n    client: mockClient,\n    therapist: mockTherapist,\n  };\n\n  const mockCompletedWorksheet = {\n    ...mockWorksheet,\n    id: 'worksheet-completed',\n    status: 'completed',\n    isCompleted: true,\n    submissionUrls: ['https://example.com/submission.pdf'],\n    submissionNames: ['My Completed Worksheet'],\n    submissionSizes: [3072],\n    feedback: 'Great progress on anxiety management!',\n    submittedAt: new Date('2024-01-20T14:30:00Z'),\n  };\n\n  const mockWorksheetList = [\n    mockWorksheet,\n    mockCompletedWorksheet,\n    {\n      ...mockWorksheet,\n      id: 'worksheet-another',\n      title: 'Depression Assessment',\n      clientId: 'client-456',\n    },\n  ];\n\n  beforeEach(async () => {\n    const mockPrismaService = {\n      worksheet: {\n        findMany: jest.fn(),\n        findUnique: jest.fn(),\n        create: jest.fn(),\n        update: jest.fn(),\n        delete: jest.fn(),\n      },\n    };\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        WorksheetsService,\n        {\n          provide: PrismaService,\n          useValue: mockPrismaService,\n        },\n      ],\n    }).compile();\n\n    service = module.get<WorksheetsService>(WorksheetsService);\n    prismaService = module.get(PrismaService);\n\n    // Mock Date constructor for consistent testing\n    jest.useFakeTimers();\n    jest.setSystemTime(mockDate);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n    jest.useRealTimers();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('findAll', () => {\n    beforeEach(() => {\n      prismaService.worksheet.findMany.mockResolvedValue(mockWorksheetList);\n    });\n\n    it('should return all worksheets when no filters provided', async () => {\n      const result = await service.findAll();\n\n      expect(prismaService.worksheet.findMany).toHaveBeenCalledWith({\n        where: {},\n        include: {\n          client: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n          therapist: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n        },\n        orderBy: {\n          createdAt: 'desc',\n        },\n      });\n\n      expect(result).toEqual(mockWorksheetList);\n      expect(result).toHaveLength(3);\n    });\n\n    it('should filter by userId (clientId)', async () => {\n      await service.findAll('user-123');\n\n      expect(prismaService.worksheet.findMany).toHaveBeenCalledWith({\n        where: { clientId: 'user-123' },\n        include: expect.any(Object),\n        orderBy: { createdAt: 'desc' },\n      });\n    });\n\n    it('should filter by therapistId', async () => {\n      await service.findAll(undefined, 'therapist-456');\n\n      expect(prismaService.worksheet.findMany).toHaveBeenCalledWith({\n        where: { therapistId: 'therapist-456' },\n        include: expect.any(Object),\n        orderBy: { createdAt: 'desc' },\n      });\n    });\n\n    it('should filter by status', async () => {\n      await service.findAll(undefined, undefined, 'completed');\n\n      expect(prismaService.worksheet.findMany).toHaveBeenCalledWith({\n        where: { status: 'completed' },\n        include: expect.any(Object),\n        orderBy: { createdAt: 'desc' },\n      });\n    });\n\n    it('should apply multiple filters', async () => {\n      await service.findAll('user-123', 'therapist-456', 'assigned');\n\n      expect(prismaService.worksheet.findMany).toHaveBeenCalledWith({\n        where: {\n          clientId: 'user-123',\n          therapistId: 'therapist-456',\n          status: 'assigned',\n        },\n        include: expect.any(Object),\n        orderBy: { createdAt: 'desc' },\n      });\n    });\n\n    it('should handle empty result set', async () => {\n      prismaService.worksheet.findMany.mockResolvedValue([]);\n\n      const result = await service.findAll();\n\n      expect(result).toEqual([]);\n      expect(result).toHaveLength(0);\n    });\n\n    it('should handle database errors', async () => {\n      const databaseError = new Error('Database connection failed');\n      prismaService.worksheet.findMany.mockRejectedValue(databaseError);\n\n      await expect(service.findAll()).rejects.toThrow('Database connection failed');\n    });\n\n    it('should include correct related data structure', async () => {\n      await service.findAll();\n\n      const expectedInclude = {\n        client: {\n          include: {\n            user: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n                avatarUrl: true,\n              },\n            },\n          },\n        },\n        therapist: {\n          include: {\n            user: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n                avatarUrl: true,\n              },\n            },\n          },\n        },\n      };\n\n      expect(prismaService.worksheet.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          include: expectedInclude,\n        })\n      );\n    });\n  });\n\n  describe('findById', () => {\n    beforeEach(() => {\n      prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);\n    });\n\n    it('should return worksheet with transformed materials and submissions', async () => {\n      const result = await service.findById('worksheet-789');\n\n      expect(prismaService.worksheet.findUnique).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        include: {\n          client: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n          therapist: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n        },\n      });\n\n      expect(result).toEqual({\n        ...mockWorksheet,\n        materials: [\n          {\n            id: 'material-0',\n            filename: 'Exercise Instructions',\n            url: 'https://example.com/material1.pdf',\n            fileType: 'application/octet-stream',\n            fileSize: 1024,\n          },\n          {\n            id: 'material-1',\n            filename: 'Reference Material',\n            url: 'https://example.com/material2.pdf',\n            fileType: 'application/octet-stream',\n            fileSize: 2048,\n          },\n        ],\n        submissions: [],\n      });\n    });\n\n    it('should transform submissions when present', async () => {\n      prismaService.worksheet.findUnique.mockResolvedValue(mockCompletedWorksheet);\n\n      const result = await service.findById('worksheet-completed');\n\n      expect(result.submissions).toEqual([\n        {\n          id: 'submission-0',\n          filename: 'My Completed Worksheet',\n          url: 'https://example.com/submission.pdf',\n          fileType: 'application/octet-stream',\n          fileSize: 3072,\n          submittedAt: new Date('2024-01-20T14:30:00Z'),\n        },\n      ]);\n    });\n\n    it('should handle materials with missing names gracefully', async () => {\n      const worksheetWithMissingNames = {\n        ...mockWorksheet,\n        materialNames: ['Exercise Instructions'], // Only one name for two URLs\n      };\n      prismaService.worksheet.findUnique.mockResolvedValue(worksheetWithMissingNames);\n\n      const result = await service.findById('worksheet-789');\n\n      expect(result.materials).toEqual([\n        {\n          id: 'material-0',\n          filename: 'Exercise Instructions',\n          url: 'https://example.com/material1.pdf',\n          fileType: 'application/octet-stream',\n          fileSize: 1024,\n        },\n        {\n          id: 'material-1',\n          filename: 'Unknown',\n          url: 'https://example.com/material2.pdf',\n          fileType: 'application/octet-stream',\n          fileSize: 2048,\n        },\n      ]);\n    });\n\n    it('should handle materials with missing sizes gracefully', async () => {\n      const worksheetWithMissingSizes = {\n        ...mockWorksheet,\n        materialSizes: [1024], // Only one size for two URLs\n      };\n      prismaService.worksheet.findUnique.mockResolvedValue(worksheetWithMissingSizes);\n\n      const result = await service.findById('worksheet-789');\n\n      expect(result.materials[1].fileSize).toBe(0);\n    });\n\n    it('should throw NotFoundException when worksheet not found', async () => {\n      prismaService.worksheet.findUnique.mockResolvedValue(null);\n\n      await expect(service.findById('non-existent')).rejects.toThrow(\n        new NotFoundException('Worksheet with ID non-existent not found')\n      );\n    });\n\n    it('should handle empty materials and submissions arrays', async () => {\n      const emptyWorksheet = {\n        ...mockWorksheet,\n        materialUrls: [],\n        materialNames: [],\n        materialSizes: [],\n        submissionUrls: [],\n        submissionNames: [],\n        submissionSizes: [],\n      };\n      prismaService.worksheet.findUnique.mockResolvedValue(emptyWorksheet);\n\n      const result = await service.findById('worksheet-789');\n\n      expect(result.materials).toEqual([]);\n      expect(result.submissions).toEqual([]);\n    });\n\n    it('should handle database errors', async () => {\n      const databaseError = new Error('Database connection failed');\n      prismaService.worksheet.findUnique.mockRejectedValue(databaseError);\n\n      await expect(service.findById('worksheet-789')).rejects.toThrow('Database connection failed');\n    });\n  });\n\n  describe('create', () => {\n    const mockCreateData: WorksheetCreateInputDto = {\n      title: 'New Worksheet',\n      instructions: 'Follow these steps',\n      description: 'A helpful worksheet',\n      dueDate: mockDueDate,\n    };\n\n    const mockCreatedWorksheet = {\n      id: 'new-worksheet-123',\n      ...mockCreateData,\n      status: 'assigned',\n      isCompleted: false,\n      clientId: 'client-123',\n      therapistId: 'therapist-456',\n      materialUrls: [],\n      materialNames: [],\n      materialSizes: [],\n      submissionUrls: [],\n      submissionNames: [],\n      submissionSizes: [],\n      createdAt: mockDate,\n      updatedAt: mockDate,\n    };\n\n    beforeEach(() => {\n      prismaService.worksheet.create.mockResolvedValue(mockCreatedWorksheet);\n      // Mock findById call that happens after creation\n      jest.spyOn(service, 'findById').mockResolvedValue({\n        ...mockCreatedWorksheet,\n        client: mockClient,\n        therapist: mockTherapist,\n        materials: [],\n        submissions: [],\n      } as any);\n    });\n\n    it('should create worksheet with provided data', async () => {\n      const result = await service.create(\n        mockCreateData,\n        'client-123',\n        'therapist-456'\n      );\n\n      expect(prismaService.worksheet.create).toHaveBeenCalledWith({\n        data: {\n          title: 'New Worksheet',\n          instructions: 'Follow these steps',\n          description: 'A helpful worksheet',\n          dueDate: mockDueDate,\n          status: 'assigned',\n          isCompleted: false,\n          clientId: 'client-123',\n          therapistId: 'therapist-456',\n          materialUrls: [],\n          materialNames: [],\n          materialSizes: [],\n          submissionUrls: [],\n          submissionNames: [],\n          submissionSizes: [],\n        },\n      });\n\n      expect(service.findById).toHaveBeenCalledWith('new-worksheet-123');\n      expect(result).toEqual(expect.objectContaining({\n        id: 'new-worksheet-123',\n        title: 'New Worksheet',\n        clientId: 'client-123',\n        therapistId: 'therapist-456',\n      }));\n    });\n\n    it('should use default due date when not provided', async () => {\n      const dataWithoutDueDate = {\n        title: 'New Worksheet',\n        instructions: 'Follow these steps',\n        description: 'A helpful worksheet',\n      };\n\n      await service.create(dataWithoutDueDate, 'client-123', 'therapist-456');\n\n      expect(prismaService.worksheet.create).toHaveBeenCalledWith({\n        data: expect.objectContaining({\n          dueDate: mockDate, // Should use current date\n        }),\n      });\n    });\n\n    it('should handle custom status in data', async () => {\n      const dataWithStatus = {\n        ...mockCreateData,\n        status: 'draft',\n      } as any;\n\n      await service.create(dataWithStatus, 'client-123', 'therapist-456');\n\n      expect(prismaService.worksheet.create).toHaveBeenCalledWith({\n        data: expect.objectContaining({\n          status: 'draft',\n        }),\n      });\n    });\n\n    it('should handle custom isCompleted in data', async () => {\n      const dataWithCompletion = {\n        ...mockCreateData,\n        isCompleted: true,\n      } as any;\n\n      await service.create(dataWithCompletion, 'client-123', 'therapist-456');\n\n      expect(prismaService.worksheet.create).toHaveBeenCalledWith({\n        data: expect.objectContaining({\n          isCompleted: true,\n        }),\n      });\n    });\n\n    it('should ignore files parameter (legacy support)', async () => {\n      const mockFiles = [\n        { filename: 'test.pdf', size: 1024 } as Express.Multer.File,\n      ];\n\n      await service.create(mockCreateData, 'client-123', 'therapist-456', mockFiles);\n\n      // Should still create with empty file arrays\n      expect(prismaService.worksheet.create).toHaveBeenCalledWith({\n        data: expect.objectContaining({\n          materialUrls: [],\n          materialNames: [],\n          materialSizes: [],\n        }),\n      });\n    });\n\n    it('should handle database errors during creation', async () => {\n      const databaseError = new Error('Database constraint violation');\n      prismaService.worksheet.create.mockRejectedValue(databaseError);\n\n      await expect(\n        service.create(mockCreateData, 'client-123', 'therapist-456')\n      ).rejects.toThrow('Database constraint violation');\n    });\n\n    it('should handle missing required fields gracefully', async () => {\n      const incompleteData = {\n        title: 'Incomplete Worksheet',\n        // Missing instructions and description\n      } as WorksheetCreateInputDto;\n\n      await service.create(incompleteData, 'client-123', 'therapist-456');\n\n      expect(prismaService.worksheet.create).toHaveBeenCalledWith({\n        data: expect.objectContaining({\n          title: 'Incomplete Worksheet',\n          instructions: undefined,\n          description: undefined,\n        }),\n      });\n    });\n  });\n\n  describe('update', () => {\n    const mockUpdateData: WorksheetUpdateInputDto = {\n      title: 'Updated Worksheet Title',\n      instructions: 'Updated instructions',\n      status: 'in_progress',\n    };\n\n    beforeEach(() => {\n      prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);\n      prismaService.worksheet.update.mockResolvedValue({\n        ...mockWorksheet,\n        ...mockUpdateData,\n      });\n      // Mock findById call that happens after update\n      jest.spyOn(service, 'findById').mockResolvedValue({\n        ...mockWorksheet,\n        ...mockUpdateData,\n        client: mockClient,\n        therapist: mockTherapist,\n        materials: [],\n        submissions: [],\n      } as any);\n    });\n\n    it('should update worksheet successfully', async () => {\n      const result = await service.update('worksheet-789', mockUpdateData);\n\n      expect(prismaService.worksheet.findUnique).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n      });\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        data: mockUpdateData,\n      });\n\n      expect(service.findById).toHaveBeenCalledWith('worksheet-789');\n      expect(result).toEqual(expect.objectContaining({\n        title: 'Updated Worksheet Title',\n        instructions: 'Updated instructions',\n        status: 'in_progress',\n      }));\n    });\n\n    it('should throw NotFoundException when worksheet does not exist', async () => {\n      prismaService.worksheet.findUnique.mockResolvedValue(null);\n\n      await expect(\n        service.update('non-existent', mockUpdateData)\n      ).rejects.toThrow(\n        new NotFoundException('Worksheet with ID non-existent not found')\n      );\n\n      expect(prismaService.worksheet.update).not.toHaveBeenCalled();\n    });\n\n    it('should handle partial updates', async () => {\n      const partialUpdate = { title: 'Only Title Updated' };\n\n      await service.update('worksheet-789', partialUpdate);\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        data: partialUpdate,\n      });\n    });\n\n    it('should handle empty update data', async () => {\n      const emptyUpdate = {};\n\n      await service.update('worksheet-789', emptyUpdate);\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        data: emptyUpdate,\n      });\n    });\n\n    it('should handle database errors during update', async () => {\n      const databaseError = new Error('Database constraint violation');\n      prismaService.worksheet.update.mockRejectedValue(databaseError);\n\n      await expect(\n        service.update('worksheet-789', mockUpdateData)\n      ).rejects.toThrow('Database constraint violation');\n    });\n\n    it('should handle database errors during existence check', async () => {\n      const databaseError = new Error('Database connection failed');\n      prismaService.worksheet.findUnique.mockRejectedValue(databaseError);\n\n      await expect(\n        service.update('worksheet-789', mockUpdateData)\n      ).rejects.toThrow('Database connection failed');\n    });\n  });\n\n  describe('delete', () => {\n    beforeEach(() => {\n      prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);\n      prismaService.worksheet.delete.mockResolvedValue(mockWorksheet);\n    });\n\n    it('should delete worksheet successfully', async () => {\n      const result = await service.delete('worksheet-789');\n\n      expect(prismaService.worksheet.findUnique).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n      });\n\n      expect(prismaService.worksheet.delete).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n      });\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Worksheet deleted successfully',\n      });\n    });\n\n    it('should throw NotFoundException when worksheet does not exist', async () => {\n      prismaService.worksheet.findUnique.mockResolvedValue(null);\n\n      await expect(service.delete('non-existent')).rejects.toThrow(\n        new NotFoundException('Worksheet with ID non-existent not found')\n      );\n\n      expect(prismaService.worksheet.delete).not.toHaveBeenCalled();\n    });\n\n    it('should handle database errors during deletion', async () => {\n      const databaseError = new Error('Foreign key constraint violation');\n      prismaService.worksheet.delete.mockRejectedValue(databaseError);\n\n      await expect(service.delete('worksheet-789')).rejects.toThrow(\n        'Foreign key constraint violation'\n      );\n    });\n\n    it('should handle database errors during existence check', async () => {\n      const databaseError = new Error('Database connection failed');\n      prismaService.worksheet.findUnique.mockRejectedValue(databaseError);\n\n      await expect(service.delete('worksheet-789')).rejects.toThrow(\n        'Database connection failed'\n      );\n    });\n  });\n\n  describe('addSubmission', () => {\n    const mockSubmissionData: WorksheetSubmissionCreateInputDto = {\n      worksheetId: 'worksheet-789',\n      isCompleted: false,\n      notes: 'Some progress made',\n    } as any;\n\n    const mockWorksheetWithClient = {\n      ...mockWorksheet,\n      client: mockClient,\n    };\n\n    beforeEach(() => {\n      prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheetWithClient);\n      prismaService.worksheet.update.mockResolvedValue({\n        ...mockWorksheet,\n        feedback: 'Some progress made',\n        status: 'assigned',\n        isCompleted: false,\n      });\n    });\n\n    it('should add submission without completing worksheet', async () => {\n      const result = await service.addSubmission(mockSubmissionData, 'client-123');\n\n      expect(prismaService.worksheet.findUnique).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        include: { client: true },\n      });\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        data: {\n          feedback: 'Some progress made',\n          isCompleted: false,\n          status: 'assigned',\n          submittedAt: null,\n        },\n      });\n\n      expect(result).toEqual({\n        id: 'worksheet-789',\n        worksheetId: 'worksheet-789',\n        clientId: 'client-123',\n        status: 'assigned',\n        submittedAt: null,\n      });\n    });\n\n    it('should complete worksheet when isCompleted is true', async () => {\n      const completedSubmissionData = {\n        ...mockSubmissionData,\n        isCompleted: true,\n      };\n\n      prismaService.worksheet.update.mockResolvedValue({\n        ...mockWorksheet,\n        feedback: 'Some progress made',\n        status: 'completed',\n        isCompleted: true,\n        submittedAt: mockDate,\n      });\n\n      const result = await service.addSubmission(completedSubmissionData, 'client-123');\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        data: {\n          feedback: 'Some progress made',\n          isCompleted: true,\n          status: 'completed',\n          submittedAt: mockDate,\n        },\n      });\n\n      expect(result).toEqual({\n        id: 'worksheet-789',\n        worksheetId: 'worksheet-789',\n        clientId: 'client-123',\n        status: 'completed',\n        submittedAt: mockDate,\n      });\n    });\n\n    it('should handle submission without notes', async () => {\n      const submissionWithoutNotes = {\n        worksheetId: 'worksheet-789',\n        isCompleted: false,\n      } as any;\n\n      await service.addSubmission(submissionWithoutNotes, 'client-123');\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        data: {\n          feedback: null,\n          isCompleted: false,\n          status: 'assigned',\n          submittedAt: null,\n        },\n      });\n    });\n\n    it('should throw NotFoundException when worksheet does not exist', async () => {\n      prismaService.worksheet.findUnique.mockResolvedValue(null);\n\n      await expect(\n        service.addSubmission(mockSubmissionData, 'client-123')\n      ).rejects.toThrow(\n        new NotFoundException('Worksheet with ID worksheet-789 not found')\n      );\n\n      expect(prismaService.worksheet.update).not.toHaveBeenCalled();\n    });\n\n    it('should handle database errors during update', async () => {\n      const databaseError = new Error('Database constraint violation');\n      prismaService.worksheet.update.mockRejectedValue(databaseError);\n\n      await expect(\n        service.addSubmission(mockSubmissionData, 'client-123')\n      ).rejects.toThrow('Database constraint violation');\n    });\n\n    it('should set correct timestamp when completing', async () => {\n      const completedSubmissionData = {\n        ...mockSubmissionData,\n        isCompleted: true,\n      };\n\n      await service.addSubmission(completedSubmissionData, 'client-123');\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        data: expect.objectContaining({\n          submittedAt: mockDate,\n        }),\n      });\n    });\n  });\n\n  describe('submitWorksheet', () => {\n    const mockSubmissionData: WorksheetSubmissionCreateInputDto = {\n      worksheetId: 'worksheet-789',\n      notes: 'Completed all exercises',\n    } as any;\n\n    beforeEach(() => {\n      prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);\n      prismaService.worksheet.update.mockResolvedValue({\n        ...mockWorksheet,\n        feedback: 'Completed all exercises',\n        status: 'completed',\n        isCompleted: true,\n        submittedAt: mockDate,\n      });\n    });\n\n    it('should submit worksheet and mark as completed', async () => {\n      const result = await service.submitWorksheet('worksheet-789', mockSubmissionData, 'client-123');\n\n      expect(prismaService.worksheet.findUnique).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n      });\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        data: {\n          feedback: 'Completed all exercises',\n          isCompleted: true,\n          status: 'completed',\n          submittedAt: mockDate,\n        },\n      });\n\n      expect(result).toEqual({\n        worksheetId: 'worksheet-789',\n        submissionId: 'worksheet-789',\n        status: 'completed',\n        submittedAt: mockDate,\n        message: 'Worksheet submitted successfully',\n      });\n    });\n\n    it('should handle submission without notes', async () => {\n      const submissionWithoutNotes = {\n        worksheetId: 'worksheet-789',\n      } as any;\n\n      await service.submitWorksheet('worksheet-789', submissionWithoutNotes, 'client-123');\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        data: {\n          feedback: null,\n          isCompleted: true,\n          status: 'completed',\n          submittedAt: mockDate,\n        },\n      });\n    });\n\n    it('should throw NotFoundException when worksheet does not exist', async () => {\n      prismaService.worksheet.findUnique.mockResolvedValue(null);\n\n      await expect(\n        service.submitWorksheet('non-existent', mockSubmissionData, 'client-123')\n      ).rejects.toThrow(\n        new NotFoundException('Worksheet with ID non-existent not found')\n      );\n\n      expect(prismaService.worksheet.update).not.toHaveBeenCalled();\n    });\n\n    it('should handle database errors during submission', async () => {\n      const databaseError = new Error('Database constraint violation');\n      prismaService.worksheet.update.mockRejectedValue(databaseError);\n\n      await expect(\n        service.submitWorksheet('worksheet-789', mockSubmissionData, 'client-123')\n      ).rejects.toThrow('Database constraint violation');\n    });\n\n    it('should always use current timestamp for submission', async () => {\n      const laterDate = new Date('2024-01-16T15:30:00Z');\n      jest.setSystemTime(laterDate);\n\n      await service.submitWorksheet('worksheet-789', mockSubmissionData, 'client-123');\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-789' },\n        data: expect.objectContaining({\n          submittedAt: laterDate,\n        }),\n      });\n    });\n\n    it('should use worksheet ID as submission ID', async () => {\n      const result = await service.submitWorksheet('worksheet-789', mockSubmissionData, 'client-123');\n\n      expect(result.worksheetId).toBe('worksheet-789');\n      expect(result.submissionId).toBe('worksheet-789');\n    });\n  });\n\n  describe('deleteSubmission', () => {\n    beforeEach(() => {\n      prismaService.worksheet.findUnique.mockResolvedValue(mockCompletedWorksheet);\n      prismaService.worksheet.update.mockResolvedValue({\n        ...mockWorksheet,\n        isCompleted: false,\n        status: 'assigned',\n        submittedAt: null,\n        feedback: null,\n        submissionUrls: [],\n        submissionNames: [],\n        submissionSizes: [],\n      });\n    });\n\n    it('should reset worksheet submission status', async () => {\n      const result = await service.deleteSubmission('worksheet-completed');\n\n      expect(prismaService.worksheet.findUnique).toHaveBeenCalledWith({\n        where: { id: 'worksheet-completed' },\n      });\n\n      expect(prismaService.worksheet.update).toHaveBeenCalledWith({\n        where: { id: 'worksheet-completed' },\n        data: {\n          isCompleted: false,\n          status: 'assigned',\n          submittedAt: null,\n          feedback: null,\n          submissionUrls: [],\n          submissionNames: [],\n          submissionSizes: [],\n        },\n      });\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Submission reset successfully',\n      });\n    });\n\n    it('should throw NotFoundException when worksheet does not exist', async () => {\n      prismaService.worksheet.findUnique.mockResolvedValue(null);\n\n      await expect(service.deleteSubmission('non-existent')).rejects.toThrow(\n        new NotFoundException('Worksheet with ID non-existent not found')\n      );\n\n      expect(prismaService.worksheet.update).not.toHaveBeenCalled();\n    });\n\n    it('should handle database errors during reset', async () => {\n      const databaseError = new Error('Database constraint violation');\n      prismaService.worksheet.update.mockRejectedValue(databaseError);\n\n      await expect(service.deleteSubmission('worksheet-completed')).rejects.toThrow(\n        'Database constraint violation'\n      );\n    });\n\n    it('should clear submission data but preserve materials', async () => {\n      await service.deleteSubmission('worksheet-completed');\n\n      const updateCall = prismaService.worksheet.update.mock.calls[0][0];\n      expect(updateCall.data).toEqual({\n        isCompleted: false,\n        status: 'assigned',\n        submittedAt: null,\n        feedback: null,\n        submissionUrls: [],\n        submissionNames: [],\n        submissionSizes: [],\n      });\n\n      // Should not modify material arrays\n      expect(updateCall.data).not.toHaveProperty('materialUrls');\n      expect(updateCall.data).not.toHaveProperty('materialNames');\n      expect(updateCall.data).not.toHaveProperty('materialSizes');\n    });\n\n    it('should handle worksheet that was never submitted', async () => {\n      prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);\n\n      const result = await service.deleteSubmission('worksheet-789');\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Submission reset successfully',\n      });\n    });\n  });\n\n  describe('edge cases and error handling', () => {\n    it('should handle findAll with null filter values', async () => {\n      prismaService.worksheet.findMany.mockResolvedValue([]);\n\n      await service.findAll(null as any, null as any, null as any);\n\n      expect(prismaService.worksheet.findMany).toHaveBeenCalledWith({\n        where: {},\n        include: expect.any(Object),\n        orderBy: { createdAt: 'desc' },\n      });\n    });\n\n    it('should handle findById with empty string ID', async () => {\n      await expect(service.findById('')).rejects.toThrow(NotFoundException);\n\n      expect(prismaService.worksheet.findUnique).toHaveBeenCalledWith({\n        where: { id: '' },\n        include: expect.any(Object),\n      });\n    });\n\n    it('should handle create with very long strings', async () => {\n      const longString = 'x'.repeat(10000);\n      const dataWithLongStrings = {\n        title: longString,\n        instructions: longString,\n        description: longString,\n      };\n\n      prismaService.worksheet.create.mockResolvedValue({\n        id: 'new-worksheet',\n        ...dataWithLongStrings,\n        status: 'assigned',\n        isCompleted: false,\n      } as any);\n\n      jest.spyOn(service, 'findById').mockResolvedValue({} as any);\n\n      await service.create(dataWithLongStrings, 'client-123', 'therapist-456');\n\n      expect(prismaService.worksheet.create).toHaveBeenCalledWith({\n        data: expect.objectContaining({\n          title: longString,\n          instructions: longString,\n          description: longString,\n        }),\n      });\n    });\n\n    it('should handle materials transformation with mismatched array lengths', async () => {\n      const mismatchedWorksheet = {\n        ...mockWorksheet,\n        materialUrls: ['url1', 'url2', 'url3'],\n        materialNames: ['name1'],\n        materialSizes: [1024, 2048],\n      };\n      prismaService.worksheet.findUnique.mockResolvedValue(mismatchedWorksheet);\n\n      const result = await service.findById('worksheet-789');\n\n      expect(result.materials).toEqual([\n        {\n          id: 'material-0',\n          filename: 'name1',\n          url: 'url1',\n          fileType: 'application/octet-stream',\n          fileSize: 1024,\n        },\n        {\n          id: 'material-1',\n          filename: 'Unknown',\n          url: 'url2',\n          fileType: 'application/octet-stream',\n          fileSize: 2048,\n        },\n        {\n          id: 'material-2',\n          filename: 'Unknown',\n          url: 'url3',\n          fileType: 'application/octet-stream',\n          fileSize: 0,\n        },\n      ]);\n    });\n\n    it('should handle concurrent operations gracefully', async () => {\n      prismaService.worksheet.findMany.mockResolvedValue(mockWorksheetList);\n      prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);\n\n      const promises = [\n        service.findAll(),\n        service.findById('worksheet-789'),\n        service.findAll('user-123'),\n        service.findById('worksheet-789'),\n      ];\n\n      const results = await Promise.all(promises);\n\n      expect(results).toHaveLength(4);\n      expect(results[0]).toEqual(mockWorksheetList);\n      expect(results[2]).toEqual(mockWorksheetList);\n    });\n\n    it('should handle database connection issues', async () => {\n      const connectionError = new Error('ECONNREFUSED');\n      prismaService.worksheet.findMany.mockRejectedValue(connectionError);\n\n      await expect(service.findAll()).rejects.toThrow('ECONNREFUSED');\n    });\n\n    it('should handle invalid date objects in due dates', async () => {\n      const invalidDateData = {\n        title: 'Test Worksheet',\n        instructions: 'Test instructions',\n        description: 'Test description',\n        dueDate: new Date('invalid-date'),\n      };\n\n      prismaService.worksheet.create.mockResolvedValue({\n        id: 'new-worksheet',\n        ...invalidDateData,\n      } as any);\n\n      jest.spyOn(service, 'findById').mockResolvedValue({} as any);\n\n      await service.create(invalidDateData, 'client-123', 'therapist-456');\n\n      // Should pass through the invalid date to Prisma\n      expect(prismaService.worksheet.create).toHaveBeenCalledWith({\n        data: expect.objectContaining({\n          dueDate: expect.any(Date),\n        }),\n      });\n    });\n\n    it('should handle null/undefined submissions in findById', async () => {\n      const worksheetWithNullSubmissions = {\n        ...mockWorksheet,\n        submissionUrls: null,\n        submissionNames: null,\n        submissionSizes: null,\n      };\n      prismaService.worksheet.findUnique.mockResolvedValue(worksheetWithNullSubmissions as any);\n\n      const result = await service.findById('worksheet-789');\n\n      expect(result.submissions).toEqual([]);\n    });\n\n    it('should handle extremely large file sizes', async () => {\n      const largeFileWorksheet = {\n        ...mockWorksheet,\n        materialSizes: [Number.MAX_SAFE_INTEGER, 0, -1],\n      };\n      prismaService.worksheet.findUnique.mockResolvedValue(largeFileWorksheet);\n\n      const result = await service.findById('worksheet-789');\n\n      expect(result.materials[0].fileSize).toBe(Number.MAX_SAFE_INTEGER);\n      expect(result.materials[1].fileSize).toBe(0);\n      expect(result.materials[2].fileSize).toBe(-1);\n    });\n\n    it('should handle special characters in worksheet data', async () => {\n      const specialCharData = {\n        title: ' Special Worksheet  with mojis & nicde',\n        instructions: 'Instructions with <html> tags & \"quotes\" and \\n newlines',\n        description: 'Description with SQL\\'; DROP TABLE worksheets; --',\n      };\n\n      prismaService.worksheet.create.mockResolvedValue({\n        id: 'special-worksheet',\n        ...specialCharData,\n      } as any);\n\n      jest.spyOn(service, 'findById').mockResolvedValue({} as any);\n\n      await service.create(specialCharData, 'client-123', 'therapist-456');\n\n      expect(prismaService.worksheet.create).toHaveBeenCalledWith({\n        data: expect.objectContaining(specialCharData),\n      });\n    });\n  });\n\n  describe('performance and scalability', () => {\n    it('should handle large number of worksheets efficiently', async () => {\n      const largeWorksheetList = Array.from({ length: 1000 }, (_, i) => ({\n        ...mockWorksheet,\n        id: `worksheet-${i}`,\n        title: `Worksheet ${i}`,\n      }));\n\n      prismaService.worksheet.findMany.mockResolvedValue(largeWorksheetList);\n\n      const startTime = Date.now();\n      const result = await service.findAll();\n      const endTime = Date.now();\n\n      expect(result).toHaveLength(1000);\n      expect(endTime - startTime).toBeLessThan(1000); // Should complete within 1 second\n    });\n\n    it('should handle worksheets with many materials efficiently', async () => {\n      const manyMaterialsWorksheet = {\n        ...mockWorksheet,\n        materialUrls: Array.from({ length: 100 }, (_, i) => `https://example.com/material${i}.pdf`),\n        materialNames: Array.from({ length: 100 }, (_, i) => `Material ${i}`),\n        materialSizes: Array.from({ length: 100 }, (_, i) => i * 1024),\n      };\n\n      prismaService.worksheet.findUnique.mockResolvedValue(manyMaterialsWorksheet);\n\n      const startTime = Date.now();\n      const result = await service.findById('worksheet-many-materials');\n      const endTime = Date.now();\n\n      expect(result.materials).toHaveLength(100);\n      expect(endTime - startTime).toBeLessThan(500); // Should complete within 500ms\n    });\n\n    it('should handle concurrent read operations', async () => {\n      prismaService.worksheet.findMany.mockResolvedValue(mockWorksheetList);\n      prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);\n\n      const concurrentReads = Array.from({ length: 50 }, (_, i) => \n        i % 2 === 0 ? service.findAll() : service.findById(`worksheet-${i}`)\n      );\n\n      const startTime = Date.now();\n      const results = await Promise.all(concurrentReads);\n      const endTime = Date.now();\n\n      expect(results).toHaveLength(50);\n      expect(endTime - startTime).toBeLessThan(2000); // Should complete within 2 seconds\n    });\n\n    it('should handle memory usage efficiently with large datasets', async () => {\n      const largeBinaryData = Array.from({ length: 1000 }, () => 'x'.repeat(1000)).join('');\n      const largeWorksheet = {\n        ...mockWorksheet,\n        description: largeBinaryData,\n        instructions: largeBinaryData,\n      };\n\n      prismaService.worksheet.findUnique.mockResolvedValue(largeWorksheet);\n\n      // Should not cause memory issues\n      const result = await service.findById('large-worksheet');\n      \n      expect(result.description).toHaveLength(1000000);\n      expect(result.instructions).toHaveLength(1000000);\n    });\n  });\n\n  describe('data validation and integrity', () => {\n    it('should maintain data consistency in transformations', async () => {\n      const worksheetWithData = {\n        ...mockWorksheet,\n        materialUrls: ['url1', 'url2'],\n        materialNames: ['name1', 'name2'],\n        materialSizes: [1024, 2048],\n        submissionUrls: ['sub1'],\n        submissionNames: ['subname1'],\n        submissionSizes: [512],\n        submittedAt: mockDate,\n      };\n\n      prismaService.worksheet.findUnique.mockResolvedValue(worksheetWithData);\n\n      const result = await service.findById('worksheet-789');\n\n      // Verify materials transformation integrity\n      expect(result.materials).toHaveLength(2);\n      result.materials.forEach((material, index) => {\n        expect(material.id).toBe(`material-${index}`);\n        expect(material.url).toBe(worksheetWithData.materialUrls[index]);\n        expect(material.filename).toBe(worksheetWithData.materialNames[index]);\n        expect(material.fileSize).toBe(worksheetWithData.materialSizes[index]);\n      });\n\n      // Verify submissions transformation integrity\n      expect(result.submissions).toHaveLength(1);\n      expect(result.submissions[0].id).toBe('submission-0');\n      expect(result.submissions[0].url).toBe('sub1');\n      expect(result.submissions[0].filename).toBe('subname1');\n      expect(result.submissions[0].fileSize).toBe(512);\n      expect(result.submissions[0].submittedAt).toEqual(mockDate);\n    });\n\n    it('should preserve original worksheet properties', async () => {\n      prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);\n\n      const result = await service.findById('worksheet-789');\n\n      // Check that original properties are preserved\n      expect(result.id).toBe(mockWorksheet.id);\n      expect(result.title).toBe(mockWorksheet.title);\n      expect(result.instructions).toBe(mockWorksheet.instructions);\n      expect(result.description).toBe(mockWorksheet.description);\n      expect(result.dueDate).toBe(mockWorksheet.dueDate);\n      expect(result.status).toBe(mockWorksheet.status);\n      expect(result.isCompleted).toBe(mockWorksheet.isCompleted);\n      expect(result.clientId).toBe(mockWorksheet.clientId);\n      expect(result.therapistId).toBe(mockWorksheet.therapistId);\n      expect(result.createdAt).toBe(mockWorksheet.createdAt);\n      expect(result.updatedAt).toBe(mockWorksheet.updatedAt);\n    });\n\n    it('should validate submission data consistency', async () => {\n      const submissionData = {\n        worksheetId: 'worksheet-789',\n        isCompleted: true,\n        notes: 'Test feedback',\n      } as any;\n\n      prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);\n      prismaService.worksheet.update.mockResolvedValue({\n        ...mockWorksheet,\n        feedback: 'Test feedback',\n        isCompleted: true,\n        status: 'completed',\n        submittedAt: mockDate,\n      });\n\n      const result = await service.addSubmission(submissionData, 'client-123');\n\n      expect(result.worksheetId).toBe(submissionData.worksheetId);\n      expect(result.clientId).toBe('client-123');\n      expect(result.status).toBe('completed');\n      expect(result.submittedAt).toEqual(mockDate);\n    });\n\n    it('should ensure proper status transitions', async () => {\n      // Test various status transitions\n      const testCases = [\n        { isCompleted: false, expectedStatus: 'assigned' },\n        { isCompleted: true, expectedStatus: 'completed' },\n      ];\n\n      for (const testCase of testCases) {\n        prismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);\n        prismaService.worksheet.update.mockResolvedValue({\n          ...mockWorksheet,\n          isCompleted: testCase.isCompleted,\n          status: testCase.expectedStatus,\n        });\n\n        const submissionData = {\n          worksheetId: 'worksheet-789',\n          isCompleted: testCase.isCompleted,\n        } as any;\n\n        const result = await service.addSubmission(submissionData, 'client-123');\n\n        expect(result.status).toBe(testCase.expectedStatus);\n      }\n    });\n  });\n});"],"version":3}