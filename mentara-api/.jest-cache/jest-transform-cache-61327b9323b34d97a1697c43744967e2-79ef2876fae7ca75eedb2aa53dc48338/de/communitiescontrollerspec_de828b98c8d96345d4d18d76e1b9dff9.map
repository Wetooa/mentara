{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/communities.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/communities.controller.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport {\n  InternalServerErrorException,\n  NotFoundException,\n  BadRequestException,\n  ConflictException,\n} from '@nestjs/common';\nimport { CommunitiesController } from './communities.controller';\nimport { CommunitiesService } from './communities.service';\nimport { CommunityAssignmentService } from './community-assignment.service';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { Roles } from '../auth/decorators/roles.decorator';\nimport {\n  MockBuilder,\n  TestDataGenerator,\n  TestAssertions,\n  SecurityGuardTestUtils,\n  RoleBasedTestUtils,\n  TEST_USER_IDS,\n  TEST_COMMUNITY_IDS,\n} from '../test-utils/auth-testing-helpers';\nimport { createMockPrismaService } from '../test-utils';\n\ndescribe('CommunitiesController', () => {\n  let controller: CommunitiesController;\n  let communitiesService: CommunitiesService;\n  let communityAssignmentService: CommunityAssignmentService;\n  let prismaService: PrismaService;\n  let mockJwtAuthGuard: jest.Mocked<JwtAuthGuard>;\n\n  // Mock data\n  const mockCommunity = {\n    id: TEST_COMMUNITY_IDS.ANXIETY_SUPPORT,\n    name: 'Anxiety Support',\n    description: 'A supportive community for anxiety management',\n    slug: 'anxiety-support',\n    imageUrl: 'https://example.com/anxiety-support.jpg',\n    isPrivate: false,\n    memberCount: 150,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  const mockCommunities = [mockCommunity];\n\n  const mockCommunityWithMembers = {\n    ...mockCommunity,\n    members: [\n      {\n        id: TEST_USER_IDS.CLIENT,\n        firstName: 'John',\n        lastName: 'Doe',\n        role: 'member',\n        joinedAt: new Date(),\n      },\n      {\n        id: TEST_USER_IDS.THERAPIST,\n        firstName: 'Dr. Jane',\n        lastName: 'Smith',\n        role: 'moderator',\n        joinedAt: new Date(),\n      },\n    ],\n  };\n\n  const mockCommunityWithRoomGroups = {\n    ...mockCommunity,\n    roomGroups: [\n      {\n        id: 'room-group-1',\n        name: 'General',\n        order: 1,\n        communityId: TEST_COMMUNITY_IDS.ANXIETY_SUPPORT,\n        rooms: [\n          {\n            id: 'room-1',\n            name: 'General Chat',\n            order: 1,\n            postingRole: 'member',\n            roomGroupId: 'room-group-1',\n          },\n          {\n            id: 'room-2',\n            name: 'Resources',\n            order: 2,\n            postingRole: 'moderator',\n            roomGroupId: 'room-group-1',\n          },\n        ],\n      },\n    ],\n  };\n\n  const mockCommunityStats = {\n    memberCount: 150,\n    postCount: 500,\n    activeMembers: 75,\n    totalMembers: 1000,\n    totalPosts: 5000,\n    activeCommunities: 10,\n    illnessCommunities: [\n      { name: 'Anxiety Support', memberCount: 150 },\n      { name: 'Depression Help', memberCount: 120 },\n    ],\n  };\n\n  const mockCreateCommunityDto = {\n    name: 'New Community',\n    description: 'A new community for testing',\n    slug: 'new-community',\n    imageUrl: 'https://example.com/new-community.jpg',\n    isPrivate: false,\n  };\n\n  const mockUpdateCommunityDto = {\n    name: 'Updated Community',\n    description: 'An updated community description',\n  };\n\n  beforeEach(async () => {\n    // Create mock services\n    const mockCommunitiesService = {\n      findAll: jest.fn(),\n      getStats: jest.fn(),\n      findBySlug: jest.fn(),\n      findOne: jest.fn(),\n      getMembers: jest.fn(),\n      createCommunity: jest.fn(),\n      update: jest.fn(),\n      remove: jest.fn(),\n      joinCommunity: jest.fn(),\n      leaveCommunity: jest.fn(),\n      findByUserId: jest.fn(),\n      findAllWithStructure: jest.fn(),\n      findOneWithStructure: jest.fn(),\n      createRoomGroup: jest.fn(),\n      createRoom: jest.fn(),\n      findRoomsByGroup: jest.fn(),\n    };\n\n    const mockCommunityAssignmentService = {\n      assignCommunitiesToUser: jest.fn(),\n      getRecommendedCommunities: jest.fn(),\n      bulkAssignCommunities: jest.fn(),\n    };\n\n    mockJwtAuthGuard = {\n      canActivate: jest.fn().mockReturnValue(true),\n    } as any;\n\n    const module: TestingModule = await Test.createTestingModule({\n      controllers: [CommunitiesController],\n      providers: [\n        {\n          provide: CommunitiesService,\n          useValue: mockCommunitiesService,\n        },\n        {\n          provide: CommunityAssignmentService,\n          useValue: mockCommunityAssignmentService,\n        },\n        {\n          provide: PrismaService,\n          useValue: createMockPrismaService(),\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .compile();\n\n    controller = module.get<CommunitiesController>(CommunitiesController);\n    communitiesService = module.get<CommunitiesService>(CommunitiesService);\n    communityAssignmentService = module.get<CommunityAssignmentService>(CommunityAssignmentService);\n    prismaService = module.get<PrismaService>(PrismaService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('findAll', () => {\n    it('should return all communities', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'findAll').mockResolvedValue(mockCommunities);\n\n      // Act\n      const result = await controller.findAll();\n\n      // Assert\n      expect(communitiesService.findAll).toHaveBeenCalled();\n      expect(result).toEqual(mockCommunities);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(communitiesService, 'findAll').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.findAll()).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('getStats', () => {\n    it('should return community statistics', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'getStats').mockResolvedValue(mockCommunityStats);\n\n      // Act\n      const result = await controller.getStats();\n\n      // Assert\n      expect(communitiesService.getStats).toHaveBeenCalled();\n      expect(result).toEqual(mockCommunityStats);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(communitiesService, 'getStats').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.getStats()).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('findBySlug', () => {\n    it('should return community by slug', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'findBySlug').mockResolvedValue(mockCommunity);\n\n      // Act\n      const result = await controller.findBySlug('anxiety-support');\n\n      // Assert\n      expect(communitiesService.findBySlug).toHaveBeenCalledWith('anxiety-support');\n      expect(result).toEqual(mockCommunity);\n    });\n\n    it('should throw NotFoundException when community not found', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'findBySlug').mockResolvedValue(null);\n\n      // Act & Assert\n      await expect(controller.findBySlug('non-existent')).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(communitiesService, 'findBySlug').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.findBySlug('anxiety-support')).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('findOne', () => {\n    it('should return community by ID', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'findOne').mockResolvedValue(mockCommunity);\n\n      // Act\n      const result = await controller.findOne(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT);\n\n      // Assert\n      expect(communitiesService.findOne).toHaveBeenCalledWith(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT);\n      expect(result).toEqual(mockCommunity);\n    });\n\n    it('should throw NotFoundException when community not found', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'findOne').mockResolvedValue(null);\n\n      // Act & Assert\n      await expect(controller.findOne('non-existent')).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(communitiesService, 'findOne').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.findOne(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT)).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('getMembers', () => {\n    it('should return community members with default pagination', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'getMembers').mockResolvedValue(mockCommunityWithMembers);\n\n      // Act\n      const result = await controller.getMembers(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT);\n\n      // Assert\n      expect(communitiesService.getMembers).toHaveBeenCalledWith(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, 50, 0);\n      expect(result).toEqual(mockCommunityWithMembers);\n    });\n\n    it('should return community members with custom pagination', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'getMembers').mockResolvedValue(mockCommunityWithMembers);\n\n      // Act\n      const result = await controller.getMembers(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, '20', '10');\n\n      // Assert\n      expect(communitiesService.getMembers).toHaveBeenCalledWith(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, 20, 10);\n      expect(result).toEqual(mockCommunityWithMembers);\n    });\n\n    it('should handle invalid pagination parameters', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'getMembers').mockResolvedValue(mockCommunityWithMembers);\n\n      // Act & Assert\n      await expect(controller.getMembers(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, 'invalid', 'invalid')).rejects.toThrow(\n        InternalServerErrorException,\n      );\n    });\n\n    it('should clamp pagination values within bounds', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'getMembers').mockResolvedValue(mockCommunityWithMembers);\n\n      // Act\n      await controller.getMembers(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, '200', '-10');\n\n      // Assert\n      expect(communitiesService.getMembers).toHaveBeenCalledWith(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, 100, 0);\n    });\n  });\n\n  describe('create', () => {\n    it('should create community successfully', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'createCommunity').mockResolvedValue(mockCommunity);\n\n      // Act\n      const result = await controller.create(mockCreateCommunityDto);\n\n      // Assert\n      expect(communitiesService.createCommunity).toHaveBeenCalledWith(mockCreateCommunityDto);\n      expect(result).toEqual(mockCommunity);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Community creation failed');\n      jest.spyOn(communitiesService, 'createCommunity').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.create(mockCreateCommunityDto)).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('update', () => {\n    it('should update community successfully', async () => {\n      // Arrange\n      const updatedCommunity = { ...mockCommunity, ...mockUpdateCommunityDto };\n      jest.spyOn(communitiesService, 'update').mockResolvedValue(updatedCommunity);\n\n      // Act\n      const result = await controller.update(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, mockUpdateCommunityDto);\n\n      // Assert\n      expect(communitiesService.update).toHaveBeenCalledWith(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, mockUpdateCommunityDto);\n      expect(result).toEqual(updatedCommunity);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Community update failed');\n      jest.spyOn(communitiesService, 'update').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.update(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, mockUpdateCommunityDto)).rejects.toThrow(\n        InternalServerErrorException,\n      );\n    });\n  });\n\n  describe('remove', () => {\n    it('should remove community successfully', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'remove').mockResolvedValue(mockCommunity);\n\n      // Act\n      const result = await controller.remove(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT);\n\n      // Assert\n      expect(communitiesService.remove).toHaveBeenCalledWith(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT);\n      expect(result).toEqual(mockCommunity);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Community removal failed');\n      jest.spyOn(communitiesService, 'remove').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.remove(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT)).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('joinCommunity', () => {\n    it('should join community successfully', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'joinCommunity').mockResolvedValue(undefined);\n\n      // Act\n      const result = await controller.joinCommunity(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_USER_IDS.CLIENT);\n\n      // Assert\n      expect(communitiesService.joinCommunity).toHaveBeenCalledWith(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_USER_IDS.CLIENT);\n      expect(result).toEqual({ joined: true });\n    });\n\n    it('should handle known exceptions properly', async () => {\n      // Arrange\n      const conflictError = new ConflictException('User already member');\n      jest.spyOn(communitiesService, 'joinCommunity').mockRejectedValue(conflictError);\n\n      // Act & Assert\n      await expect(controller.joinCommunity(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_USER_IDS.CLIENT)).rejects.toThrow(\n        ConflictException,\n      );\n    });\n\n    it('should wrap unknown errors in InternalServerErrorException', async () => {\n      // Arrange\n      const unknownError = new Error('Unknown error');\n      jest.spyOn(communitiesService, 'joinCommunity').mockRejectedValue(unknownError);\n\n      // Act & Assert\n      await expect(controller.joinCommunity(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_USER_IDS.CLIENT)).rejects.toThrow(\n        InternalServerErrorException,\n      );\n    });\n  });\n\n  describe('leaveCommunity', () => {\n    it('should leave community successfully', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'leaveCommunity').mockResolvedValue(undefined);\n\n      // Act\n      const result = await controller.leaveCommunity(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_USER_IDS.CLIENT);\n\n      // Assert\n      expect(communitiesService.leaveCommunity).toHaveBeenCalledWith(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_USER_IDS.CLIENT);\n      expect(result).toEqual({ left: true });\n    });\n\n    it('should handle known exceptions properly', async () => {\n      // Arrange\n      const notFoundError = new NotFoundException('User not a member');\n      jest.spyOn(communitiesService, 'leaveCommunity').mockRejectedValue(notFoundError);\n\n      // Act & Assert\n      await expect(controller.leaveCommunity(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_USER_IDS.CLIENT)).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n\n    it('should wrap unknown errors in InternalServerErrorException', async () => {\n      // Arrange\n      const unknownError = new Error('Unknown error');\n      jest.spyOn(communitiesService, 'leaveCommunity').mockRejectedValue(unknownError);\n\n      // Act & Assert\n      await expect(controller.leaveCommunity(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_USER_IDS.CLIENT)).rejects.toThrow(\n        InternalServerErrorException,\n      );\n    });\n  });\n\n  describe('findByUserId', () => {\n    it('should return communities for user', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'findByUserId').mockResolvedValue(mockCommunities);\n\n      // Act\n      const result = await controller.findByUserId(TEST_USER_IDS.CLIENT);\n\n      // Assert\n      expect(communitiesService.findByUserId).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(result).toEqual(mockCommunities);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(communitiesService, 'findByUserId').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.findByUserId(TEST_USER_IDS.CLIENT)).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('getAllWithStructure', () => {\n    it('should return all communities with structure', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'findAllWithStructure').mockResolvedValue([mockCommunityWithRoomGroups]);\n\n      // Act\n      const result = await controller.getAllWithStructure();\n\n      // Assert\n      expect(communitiesService.findAllWithStructure).toHaveBeenCalled();\n      expect(result).toEqual([mockCommunityWithRoomGroups]);\n    });\n  });\n\n  describe('getOneWithStructure', () => {\n    it('should return community with structure', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'findOneWithStructure').mockResolvedValue(mockCommunityWithRoomGroups);\n\n      // Act\n      const result = await controller.getOneWithStructure(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT);\n\n      // Assert\n      expect(communitiesService.findOneWithStructure).toHaveBeenCalledWith(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT);\n      expect(result).toEqual(mockCommunityWithRoomGroups);\n    });\n  });\n\n  describe('createRoomGroup', () => {\n    const roomGroupDto = { name: 'New Room Group', order: 1 };\n    const mockRoomGroup = { id: 'room-group-2', ...roomGroupDto, communityId: TEST_COMMUNITY_IDS.ANXIETY_SUPPORT };\n\n    it('should create room group successfully', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'createRoomGroup').mockResolvedValue(mockRoomGroup);\n\n      // Act\n      const result = await controller.createRoomGroup(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, roomGroupDto);\n\n      // Assert\n      expect(communitiesService.createRoomGroup).toHaveBeenCalledWith(\n        TEST_COMMUNITY_IDS.ANXIETY_SUPPORT,\n        roomGroupDto.name,\n        roomGroupDto.order,\n      );\n      expect(result).toEqual(mockRoomGroup);\n    });\n  });\n\n  describe('createRoom', () => {\n    const roomDto = { name: 'New Room', order: 1 };\n    const mockRoom = { id: 'room-3', ...roomDto, roomGroupId: 'room-group-1' };\n\n    it('should create room successfully', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'createRoom').mockResolvedValue(mockRoom);\n\n      // Act\n      const result = await controller.createRoom('room-group-1', roomDto);\n\n      // Assert\n      expect(communitiesService.createRoom).toHaveBeenCalledWith('room-group-1', roomDto.name, roomDto.order);\n      expect(result).toEqual(mockRoom);\n    });\n  });\n\n  describe('getRoomsByGroup', () => {\n    const mockRooms = [\n      { id: 'room-1', name: 'Room 1', order: 1, roomGroupId: 'room-group-1' },\n      { id: 'room-2', name: 'Room 2', order: 2, roomGroupId: 'room-group-1' },\n    ];\n\n    it('should return rooms by group', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'findRoomsByGroup').mockResolvedValue(mockRooms);\n\n      // Act\n      const result = await controller.getRoomsByGroup('room-group-1');\n\n      // Assert\n      expect(communitiesService.findRoomsByGroup).toHaveBeenCalledWith('room-group-1');\n      expect(result).toEqual(mockRooms);\n    });\n  });\n\n  describe('Community Assignment Features', () => {\n    describe('assignCommunitiesToMe', () => {\n      it('should assign communities to current user', async () => {\n        // Arrange\n        const assignedCommunities = [TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_COMMUNITY_IDS.DEPRESSION_HELP];\n        jest.spyOn(communityAssignmentService, 'assignCommunitiesToUser').mockResolvedValue(assignedCommunities);\n\n        // Act\n        const result = await controller.assignCommunitiesToMe(TEST_USER_IDS.CLIENT);\n\n        // Assert\n        expect(communityAssignmentService.assignCommunitiesToUser).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n        expect(result).toEqual({ assignedCommunities });\n      });\n\n      it('should handle service errors', async () => {\n        // Arrange\n        const error = new Error('Assignment failed');\n        jest.spyOn(communityAssignmentService, 'assignCommunitiesToUser').mockRejectedValue(error);\n\n        // Act & Assert\n        await expect(controller.assignCommunitiesToMe(TEST_USER_IDS.CLIENT)).rejects.toThrow(InternalServerErrorException);\n      });\n    });\n\n    describe('assignCommunitiesToUser', () => {\n      it('should assign communities to specific user', async () => {\n        // Arrange\n        const assignedCommunities = [TEST_COMMUNITY_IDS.ANXIETY_SUPPORT];\n        jest.spyOn(communityAssignmentService, 'assignCommunitiesToUser').mockResolvedValue(assignedCommunities);\n\n        // Act\n        const result = await controller.assignCommunitiesToUser(TEST_USER_IDS.CLIENT);\n\n        // Assert\n        expect(communityAssignmentService.assignCommunitiesToUser).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n        expect(result).toEqual({ assignedCommunities });\n      });\n    });\n\n    describe('getMyRecommendedCommunities', () => {\n      it('should return recommended communities for user', async () => {\n        // Arrange\n        const recommendedCommunities = [TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_COMMUNITY_IDS.DEPRESSION_HELP];\n        jest.spyOn(communityAssignmentService, 'getRecommendedCommunities').mockResolvedValue(recommendedCommunities);\n\n        // Act\n        const result = await controller.getMyRecommendedCommunities(TEST_USER_IDS.CLIENT);\n\n        // Assert\n        expect(communityAssignmentService.getRecommendedCommunities).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n        expect(result).toEqual({ recommendedCommunities });\n      });\n    });\n\n    describe('bulkAssignCommunities', () => {\n      it('should bulk assign communities to multiple users', async () => {\n        // Arrange\n        const userIds = [TEST_USER_IDS.CLIENT, TEST_USER_IDS.THERAPIST];\n        const bulkResults = {\n          [TEST_USER_IDS.CLIENT]: [TEST_COMMUNITY_IDS.ANXIETY_SUPPORT],\n          [TEST_USER_IDS.THERAPIST]: [TEST_COMMUNITY_IDS.DEPRESSION_HELP],\n        };\n        jest.spyOn(communityAssignmentService, 'bulkAssignCommunities').mockResolvedValue(bulkResults);\n\n        // Act\n        const result = await controller.bulkAssignCommunities({ userIds });\n\n        // Assert\n        expect(communityAssignmentService.bulkAssignCommunities).toHaveBeenCalledWith(userIds);\n        expect(result).toEqual({ results: bulkResults });\n      });\n\n      it('should handle service errors', async () => {\n        // Arrange\n        const error = new Error('Bulk assignment failed');\n        jest.spyOn(communityAssignmentService, 'bulkAssignCommunities').mockRejectedValue(error);\n\n        // Act & Assert\n        await expect(controller.bulkAssignCommunities({ userIds: [TEST_USER_IDS.CLIENT] })).rejects.toThrow(\n          InternalServerErrorException,\n        );\n      });\n    });\n  });\n\n  describe('Security and Authorization', () => {\n    it('should have proper guards applied', () => {\n      // Test that JwtAuthGuard is applied at controller level\n      const guards = Reflect.getMetadata('__guards__', CommunitiesController);\n      expect(guards).toBeDefined();\n      expect(guards).toContain(JwtAuthGuard);\n    });\n\n    it('should test role-based access for admin endpoints', async () => {\n      // Test that admin/moderator endpoints have proper role decorators\n      const adminMethods = ['create', 'update', 'remove', 'createRoomGroup', 'createRoom'];\n      \n      adminMethods.forEach(method => {\n        const roles = Reflect.getMetadata('roles', controller[method as keyof CommunitiesController]);\n        expect(roles).toBeDefined();\n        expect(roles).toContain('moderator');\n      });\n    });\n\n    it('should test role-based access for user endpoints', async () => {\n      // Test that user endpoints have proper role decorators\n      const userMethods = ['joinCommunity', 'leaveCommunity'];\n      \n      userMethods.forEach(method => {\n        const roles = Reflect.getMetadata('roles', controller[method as keyof CommunitiesController]);\n        expect(roles).toBeDefined();\n        expect(roles).toContain('client');\n      });\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle InternalServerErrorException properly', async () => {\n      // Arrange\n      const error = new InternalServerErrorException('Internal error');\n      jest.spyOn(communitiesService, 'findAll').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.findAll()).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should wrap unknown errors in InternalServerErrorException', async () => {\n      // Arrange\n      const unknownError = new Error('Unknown error');\n      jest.spyOn(communitiesService, 'findAll').mockRejectedValue(unknownError);\n\n      // Act & Assert\n      await expect(controller.findAll()).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete community creation workflow', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'createCommunity').mockResolvedValue(mockCommunity);\n\n      // Act\n      const result = await controller.create(mockCreateCommunityDto);\n\n      // Assert\n      expect(result).toBeDefined();\n      expect(result.name).toBe(mockCommunity.name);\n      expect(result.description).toBe(mockCommunity.description);\n      expect(result.slug).toBe(mockCommunity.slug);\n    });\n\n    it('should handle complete community join workflow', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'joinCommunity').mockResolvedValue(undefined);\n\n      // Act\n      const result = await controller.joinCommunity(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT, TEST_USER_IDS.CLIENT);\n\n      // Assert\n      expect(result).toBeDefined();\n      expect(result.joined).toBe(true);\n    });\n\n    it('should handle complete community structure workflow', async () => {\n      // Arrange\n      jest.spyOn(communitiesService, 'findOneWithStructure').mockResolvedValue(mockCommunityWithRoomGroups);\n\n      // Act\n      const result = await controller.getOneWithStructure(TEST_COMMUNITY_IDS.ANXIETY_SUPPORT);\n\n      // Assert\n      expect(result).toBeDefined();\n      expect(result.roomGroups).toBeDefined();\n      expect(result.roomGroups.length).toBeGreaterThan(0);\n      expect(result.roomGroups[0].rooms).toBeDefined();\n    });\n  });\n});"],"version":3}