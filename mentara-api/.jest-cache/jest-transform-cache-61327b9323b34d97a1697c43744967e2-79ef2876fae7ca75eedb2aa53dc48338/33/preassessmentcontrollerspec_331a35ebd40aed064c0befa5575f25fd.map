{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/pre-assessment/pre-assessment.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/pre-assessment/pre-assessment.controller.spec.ts"],"sourcesContent":["/**\n * Comprehensive Test Suite for PreAssessmentController\n * Tests pre-assessment functionality and AI service integration\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { InternalServerErrorException, HttpStatus } from '@nestjs/common';\nimport { PreAssessmentController } from './pre-assessment.controller';\nimport { PreAssessmentService } from './pre-assessment.service';\nimport { AiServiceClient } from './services/ai-service.client';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { AdminAuthGuard } from '../auth/guards/admin-auth.guard';\nimport { PreAssessment } from '@prisma/client';\nimport { SecurityGuardTestUtils, RoleBasedTestUtils } from '../test-utils/auth-testing-helpers';\nimport { MockBuilder, TestDataGenerator, TestAssertions } from '../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../test-utils/index';\n\ndescribe('PreAssessmentController', () => {\n  let controller: PreAssessmentController;\n  let preAssessmentService: PreAssessmentService;\n  let aiServiceClient: AiServiceClient;\n  let module: TestingModule;\n\n  // Mock PreAssessmentService\n  const mockPreAssessmentService = {\n    createPreAssessment: jest.fn(),\n    getPreAssessmentByUserId: jest.fn(),\n    updatePreAssessment: jest.fn(),\n    deletePreAssessment: jest.fn(),\n  };\n\n  // Mock AiServiceClient\n  const mockAiServiceClient = {\n    healthCheck: jest.fn(),\n    getServiceInfo: jest.fn(),\n    processAssessment: jest.fn(),\n    getAssessmentResults: jest.fn(),\n  };\n\n  // Mock Guards\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  const mockAdminAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test data\n  const mockPreAssessment: PreAssessment = {\n    id: 'assessment_123456789',\n    userId: TEST_USER_IDS.CLIENT,\n    scores: {\n      anxiety: 6.8,\n      depression: 4.2,\n      stress: 7.5,\n      ptsd: 2.1,\n      bipolar: 1.8,\n      ocd: 3.4,\n      eating_disorders: 2.9,\n      substance_abuse: 1.2,\n      adhd: 5.7,\n      autism: 2.3,\n      personality_disorders: 3.1,\n      sleep_disorders: 6.3,\n      anger_management: 4.8,\n    },\n    responses: {\n      demographics: {\n        age: 28,\n        gender: 'female',\n        location: 'New York, NY',\n        education: 'bachelors',\n        employment: 'full_time',\n        relationship_status: 'single',\n      },\n      mental_health_history: {\n        previous_therapy: true,\n        previous_medication: false,\n        family_history: true,\n        current_symptoms: ['anxiety', 'stress', 'sleep_issues'],\n        symptom_duration: '6_months_to_1_year',\n        severity_level: 'moderate',\n      },\n      preferences: {\n        therapist_gender: 'no_preference',\n        session_type: 'video',\n        frequency: 'weekly',\n        goals: ['manage_anxiety', 'improve_sleep', 'stress_reduction'],\n        communication_style: 'direct',\n      },\n      questionnaire_responses: [\n        { question_id: 'anx_1', response: 3, category: 'anxiety' },\n        { question_id: 'anx_2', response: 4, category: 'anxiety' },\n        { question_id: 'dep_1', response: 2, category: 'depression' },\n        // ... more responses would be here in real data\n      ],\n    },\n    completedAt: new Date('2024-02-14T10:00:00Z'),\n    createdAt: new Date('2024-02-14T09:00:00Z'),\n    updatedAt: new Date('2024-02-14T10:00:00Z'),\n  };\n\n  const createPreAssessmentDto = {\n    responses: {\n      demographics: {\n        age: 25,\n        gender: 'male',\n        location: 'Los Angeles, CA',\n        education: 'masters',\n        employment: 'full_time',\n        relationship_status: 'married',\n      },\n      mental_health_history: {\n        previous_therapy: false,\n        previous_medication: true,\n        family_history: false,\n        current_symptoms: ['stress', 'work_pressure'],\n        symptom_duration: '3_to_6_months',\n        severity_level: 'mild',\n      },\n      preferences: {\n        therapist_gender: 'male',\n        session_type: 'in_person',\n        frequency: 'bi_weekly',\n        goals: ['stress_management', 'work_life_balance'],\n        communication_style: 'supportive',\n      },\n      questionnaire_responses: [\n        { question_id: 'stress_1', response: 4, category: 'stress' },\n        { question_id: 'stress_2', response: 3, category: 'stress' },\n        { question_id: 'anx_1', response: 2, category: 'anxiety' },\n      ],\n    },\n  };\n\n  const mockAiServiceInfo = {\n    name: 'Mentara AI Assessment Service',\n    version: '2.1.4',\n    endpoint: 'http://localhost:5000',\n    model_version: '1.3.2',\n    supported_assessments: [\n      'anxiety', 'depression', 'stress', 'ptsd', 'bipolar',\n      'ocd', 'eating_disorders', 'substance_abuse', 'adhd',\n      'autism', 'personality_disorders', 'sleep_disorders', 'anger_management'\n    ],\n    last_updated: '2024-02-01T00:00:00Z',\n  };\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [PreAssessmentController],\n      providers: [\n        {\n          provide: PreAssessmentService,\n          useValue: mockPreAssessmentService,\n        },\n        {\n          provide: AiServiceClient,\n          useValue: mockAiServiceClient,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .overrideGuard(AdminAuthGuard)\n      .useValue(mockAdminAuthGuard)\n      .compile();\n\n    controller = module.get<PreAssessmentController>(PreAssessmentController);\n    preAssessmentService = module.get<PreAssessmentService>(PreAssessmentService);\n    aiServiceClient = module.get<AiServiceClient>(AiServiceClient);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have all services injected', () => {\n      expect(preAssessmentService).toBeDefined();\n      expect(aiServiceClient).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', PreAssessmentController);\n      expect(guards).toContain(JwtAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', PreAssessmentController);\n      expect(controllerMetadata).toBe('pre-assessment');\n    });\n\n    it('should have AdminOnly decorator on health check endpoint', () => {\n      const adminOnlyMetadata = Reflect.getMetadata('admin_only', controller.checkAiServiceHealth);\n      expect(adminOnlyMetadata).toBeTruthy();\n    });\n  });\n\n  describe('POST /pre-assessment', () => {\n    it('should create pre-assessment successfully', async () => {\n      const expectedAssessment = {\n        ...mockPreAssessment,\n        responses: createPreAssessmentDto.responses,\n        scores: {\n          anxiety: 2.5,\n          depression: 1.8,\n          stress: 6.2,\n          ptsd: 1.1,\n          bipolar: 1.0,\n          ocd: 2.1,\n          eating_disorders: 1.5,\n          substance_abuse: 1.0,\n          adhd: 3.2,\n          autism: 1.4,\n          personality_disorders: 2.1,\n          sleep_disorders: 4.1,\n          anger_management: 3.8,\n        },\n      };\n      mockPreAssessmentService.createPreAssessment.mockResolvedValue(expectedAssessment);\n\n      const result = await controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto);\n\n      expect(result).toEqual(expectedAssessment);\n      expect(preAssessmentService.createPreAssessment).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        createPreAssessmentDto,\n      );\n    });\n\n    it('should handle different response patterns', async () => {\n      const responseVariations = [\n        {\n          // High anxiety, low depression\n          questionnaire_responses: [\n            { question_id: 'anx_1', response: 5, category: 'anxiety' },\n            { question_id: 'anx_2', response: 4, category: 'anxiety' },\n            { question_id: 'dep_1', response: 1, category: 'depression' },\n          ],\n        },\n        {\n          // Moderate depression, high stress\n          questionnaire_responses: [\n            { question_id: 'dep_1', response: 4, category: 'depression' },\n            { question_id: 'stress_1', response: 5, category: 'stress' },\n            { question_id: 'stress_2', response: 4, category: 'stress' },\n          ],\n        },\n        {\n          // Multiple conditions indicated\n          questionnaire_responses: [\n            { question_id: 'anx_1', response: 3, category: 'anxiety' },\n            { question_id: 'dep_1', response: 3, category: 'depression' },\n            { question_id: 'ptsd_1', response: 4, category: 'ptsd' },\n            { question_id: 'adhd_1', response: 4, category: 'adhd' },\n          ],\n        },\n      ];\n\n      for (const responses of responseVariations) {\n        const dto = {\n          ...createPreAssessmentDto,\n          responses: { ...createPreAssessmentDto.responses, ...responses },\n        };\n        const assessment = { ...mockPreAssessment, responses: dto.responses };\n        mockPreAssessmentService.createPreAssessment.mockResolvedValue(assessment);\n\n        const result = await controller.createPreAssessment(TEST_USER_IDS.CLIENT, dto);\n\n        expect(result.responses).toEqual(dto.responses);\n      }\n    });\n\n    it('should handle different demographic profiles', async () => {\n      const demographicVariations = [\n        {\n          age: 18,\n          gender: 'non_binary',\n          education: 'high_school',\n          employment: 'student',\n          relationship_status: 'single',\n        },\n        {\n          age: 45,\n          gender: 'female',\n          education: 'doctorate',\n          employment: 'self_employed',\n          relationship_status: 'divorced',\n        },\n        {\n          age: 67,\n          gender: 'male',\n          education: 'some_college',\n          employment: 'retired',\n          relationship_status: 'widowed',\n        },\n      ];\n\n      for (const demographics of demographicVariations) {\n        const dto = {\n          ...createPreAssessmentDto,\n          responses: {\n            ...createPreAssessmentDto.responses,\n            demographics,\n          },\n        };\n        const assessment = { ...mockPreAssessment, responses: dto.responses };\n        mockPreAssessmentService.createPreAssessment.mockResolvedValue(assessment);\n\n        const result = await controller.createPreAssessment(TEST_USER_IDS.CLIENT, dto);\n\n        expect(result.responses.demographics).toEqual(demographics);\n      }\n    });\n\n    it('should handle various therapy preferences', async () => {\n      const preferenceVariations = [\n        {\n          therapist_gender: 'female',\n          session_type: 'phone',\n          frequency: 'monthly',\n          goals: ['depression_management'],\n          communication_style: 'gentle',\n        },\n        {\n          therapist_gender: 'no_preference',\n          session_type: 'video',\n          frequency: 'weekly',\n          goals: ['trauma_recovery', 'relationship_issues'],\n          communication_style: 'direct',\n        },\n        {\n          therapist_gender: 'male',\n          session_type: 'in_person',\n          frequency: 'bi_weekly',\n          goals: ['anger_management', 'communication_skills'],\n          communication_style: 'challenging',\n        },\n      ];\n\n      for (const preferences of preferenceVariations) {\n        const dto = {\n          ...createPreAssessmentDto,\n          responses: {\n            ...createPreAssessmentDto.responses,\n            preferences,\n          },\n        };\n        const assessment = { ...mockPreAssessment, responses: dto.responses };\n        mockPreAssessmentService.createPreAssessment.mockResolvedValue(assessment);\n\n        const result = await controller.createPreAssessment(TEST_USER_IDS.CLIENT, dto);\n\n        expect(result.responses.preferences).toEqual(preferences);\n      }\n    });\n\n    it('should handle service errors gracefully', async () => {\n      const serviceError = new Error('Assessment processing failed');\n      mockPreAssessmentService.createPreAssessment.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto)\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto)\n      ).rejects.toThrow('Assessment processing failed');\n    });\n\n    it('should handle validation errors', async () => {\n      const validationError = new Error('Invalid assessment data format');\n      mockPreAssessmentService.createPreAssessment.mockRejectedValue(validationError);\n\n      await expect(\n        controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto)\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle non-Error exceptions', async () => {\n      const stringError = 'String error message';\n      mockPreAssessmentService.createPreAssessment.mockRejectedValue(stringError);\n\n      await expect(\n        controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto)\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto)\n      ).rejects.toThrow(stringError);\n    });\n  });\n\n  describe('GET /pre-assessment', () => {\n    it('should get pre-assessment successfully', async () => {\n      mockPreAssessmentService.getPreAssessmentByUserId.mockResolvedValue(mockPreAssessment);\n\n      const result = await controller.getPreAssessment(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(mockPreAssessment);\n      expect(preAssessmentService.getPreAssessmentByUserId).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should validate complete assessment structure', async () => {\n      mockPreAssessmentService.getPreAssessmentByUserId.mockResolvedValue(mockPreAssessment);\n\n      const result = await controller.getPreAssessment(TEST_USER_IDS.CLIENT);\n\n      expect(result).toHaveProperty('id');\n      expect(result).toHaveProperty('userId');\n      expect(result).toHaveProperty('scores');\n      expect(result).toHaveProperty('responses');\n      expect(result).toHaveProperty('completedAt');\n      expect(result).toHaveProperty('createdAt');\n      expect(result).toHaveProperty('updatedAt');\n\n      // Validate scores structure\n      expect(result.scores).toHaveProperty('anxiety');\n      expect(result.scores).toHaveProperty('depression');\n      expect(result.scores).toHaveProperty('stress');\n      expect(typeof result.scores.anxiety).toBe('number');\n\n      // Validate responses structure\n      expect(result.responses).toHaveProperty('demographics');\n      expect(result.responses).toHaveProperty('mental_health_history');\n      expect(result.responses).toHaveProperty('preferences');\n      expect(result.responses).toHaveProperty('questionnaire_responses');\n    });\n\n    it('should handle assessment not found', async () => {\n      const notFoundError = new Error('Pre-assessment not found for user');\n      mockPreAssessmentService.getPreAssessmentByUserId.mockRejectedValue(notFoundError);\n\n      await expect(\n        controller.getPreAssessment('non-existent-user')\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.getPreAssessment('non-existent-user')\n      ).rejects.toThrow('Pre-assessment not found for user');\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database connection failed');\n      mockPreAssessmentService.getPreAssessmentByUserId.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getPreAssessment(TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.getPreAssessment(TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow('Database connection failed');\n    });\n  });\n\n  describe('PUT /pre-assessment', () => {\n    const updateData = {\n      responses: {\n        preferences: {\n          therapist_gender: 'female',\n          frequency: 'weekly',\n          goals: ['anxiety_management', 'sleep_improvement'],\n        },\n        questionnaire_responses: [\n          { question_id: 'anx_1', response: 2, category: 'anxiety' },\n          { question_id: 'sleep_1', response: 4, category: 'sleep_disorders' },\n        ],\n      },\n    };\n\n    it('should update pre-assessment successfully', async () => {\n      const updatedAssessment = {\n        ...mockPreAssessment,\n        responses: {\n          ...mockPreAssessment.responses,\n          ...updateData.responses,\n        },\n        scores: {\n          ...mockPreAssessment.scores,\n          anxiety: 4.2, // Updated based on new responses\n          sleep_disorders: 7.1,\n        },\n        updatedAt: new Date(),\n      };\n      mockPreAssessmentService.updatePreAssessment.mockResolvedValue(updatedAssessment);\n\n      const result = await controller.updatePreAssessment(TEST_USER_IDS.CLIENT, updateData);\n\n      expect(result).toEqual(updatedAssessment);\n      expect(preAssessmentService.updatePreAssessment).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        updateData,\n      );\n    });\n\n    it('should handle partial updates', async () => {\n      const partialUpdates = [\n        { responses: { preferences: { frequency: 'bi_weekly' } } },\n        { responses: { demographics: { age: 29 } } },\n        { responses: { mental_health_history: { current_symptoms: ['anxiety', 'panic'] } } },\n      ];\n\n      for (const partialUpdate of partialUpdates) {\n        const updatedAssessment = {\n          ...mockPreAssessment,\n          responses: { ...mockPreAssessment.responses, ...partialUpdate.responses },\n          updatedAt: new Date(),\n        };\n        mockPreAssessmentService.updatePreAssessment.mockResolvedValue(updatedAssessment);\n\n        const result = await controller.updatePreAssessment(TEST_USER_IDS.CLIENT, partialUpdate);\n\n        expect(result.updatedAt).toBeDefined();\n        expect(preAssessmentService.updatePreAssessment).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          partialUpdate,\n        );\n      }\n    });\n\n    it('should handle updating specific questionnaire responses', async () => {\n      const responseUpdates = [\n        [\n          { question_id: 'anx_1', response: 1, category: 'anxiety' },\n          { question_id: 'anx_2', response: 2, category: 'anxiety' },\n        ],\n        [\n          { question_id: 'dep_1', response: 4, category: 'depression' },\n          { question_id: 'dep_2', response: 3, category: 'depression' },\n        ],\n        [\n          { question_id: 'stress_1', response: 5, category: 'stress' },\n          { question_id: 'sleep_1', response: 4, category: 'sleep_disorders' },\n        ],\n      ];\n\n      for (const responses of responseUpdates) {\n        const updateWithResponses = {\n          responses: { questionnaire_responses: responses },\n        };\n        const updatedAssessment = {\n          ...mockPreAssessment,\n          responses: {\n            ...mockPreAssessment.responses,\n            questionnaire_responses: responses,\n          },\n        };\n        mockPreAssessmentService.updatePreAssessment.mockResolvedValue(updatedAssessment);\n\n        const result = await controller.updatePreAssessment(TEST_USER_IDS.CLIENT, updateWithResponses);\n\n        expect(result.responses.questionnaire_responses).toEqual(responses);\n      }\n    });\n\n    it('should handle assessment not found during update', async () => {\n      const notFoundError = new Error('Pre-assessment not found for user');\n      mockPreAssessmentService.updatePreAssessment.mockRejectedValue(notFoundError);\n\n      await expect(\n        controller.updatePreAssessment('non-existent-user', updateData)\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.updatePreAssessment('non-existent-user', updateData)\n      ).rejects.toThrow('Pre-assessment not found for user');\n    });\n\n    it('should handle service errors during update', async () => {\n      const serviceError = new Error('Update failed due to database constraint');\n      mockPreAssessmentService.updatePreAssessment.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.updatePreAssessment(TEST_USER_IDS.CLIENT, updateData)\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.updatePreAssessment(TEST_USER_IDS.CLIENT, updateData)\n      ).rejects.toThrow('Update failed due to database constraint');\n    });\n  });\n\n  describe('DELETE /pre-assessment', () => {\n    it('should delete pre-assessment successfully', async () => {\n      mockPreAssessmentService.deletePreAssessment.mockResolvedValue(null);\n\n      const result = await controller.deletePreAssessment(TEST_USER_IDS.CLIENT);\n\n      expect(result).toBeNull();\n      expect(preAssessmentService.deletePreAssessment).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should handle assessment not found during deletion', async () => {\n      const notFoundError = new Error('Pre-assessment not found for user');\n      mockPreAssessmentService.deletePreAssessment.mockRejectedValue(notFoundError);\n\n      await expect(\n        controller.deletePreAssessment('non-existent-user')\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.deletePreAssessment('non-existent-user')\n      ).rejects.toThrow('Pre-assessment not found for user');\n    });\n\n    it('should handle service errors during deletion', async () => {\n      const serviceError = new Error('Deletion failed due to database error');\n      mockPreAssessmentService.deletePreAssessment.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.deletePreAssessment(TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.deletePreAssessment(TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow('Deletion failed due to database error');\n    });\n\n    it('should handle cascade deletion implications', async () => {\n      const cascadeError = new Error('Cannot delete assessment with active recommendations');\n      mockPreAssessmentService.deletePreAssessment.mockRejectedValue(cascadeError);\n\n      await expect(\n        controller.deletePreAssessment(TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.deletePreAssessment(TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow('Cannot delete assessment with active recommendations');\n    });\n  });\n\n  describe('GET /pre-assessment/ai-service/health', () => {\n    beforeEach(() => {\n      mockAiServiceClient.getServiceInfo.mockReturnValue(mockAiServiceInfo);\n    });\n\n    it('should check AI service health successfully', async () => {\n      mockAiServiceClient.healthCheck.mockResolvedValue(true);\n\n      const result = await controller.checkAiServiceHealth(TEST_USER_IDS.ADMIN);\n\n      expect(result).toEqual({\n        status: 'healthy',\n        healthy: true,\n        serviceInfo: mockAiServiceInfo,\n        timestamp: expect.any(String),\n      });\n      expect(aiServiceClient.healthCheck).toHaveBeenCalledWith();\n      expect(aiServiceClient.getServiceInfo).toHaveBeenCalledWith();\n    });\n\n    it('should handle unhealthy AI service', async () => {\n      mockAiServiceClient.healthCheck.mockResolvedValue(false);\n\n      const result = await controller.checkAiServiceHealth(TEST_USER_IDS.ADMIN);\n\n      expect(result).toEqual({\n        status: 'unhealthy',\n        healthy: false,\n        serviceInfo: mockAiServiceInfo,\n        timestamp: expect.any(String),\n      });\n    });\n\n    it('should handle AI service errors gracefully', async () => {\n      const healthCheckError = new Error('Connection timeout');\n      mockAiServiceClient.healthCheck.mockRejectedValue(healthCheckError);\n\n      const result = await controller.checkAiServiceHealth(TEST_USER_IDS.ADMIN);\n\n      expect(result).toEqual({\n        status: 'error',\n        healthy: false,\n        serviceInfo: mockAiServiceInfo,\n        timestamp: expect.any(String),\n      });\n    });\n\n    it('should validate timestamp format', async () => {\n      mockAiServiceClient.healthCheck.mockResolvedValue(true);\n\n      const result = await controller.checkAiServiceHealth(TEST_USER_IDS.ADMIN);\n\n      expect(result.timestamp).toMatch(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/);\n      expect(new Date(result.timestamp)).toBeInstanceOf(Date);\n    });\n\n    it('should include comprehensive service info', async () => {\n      mockAiServiceClient.healthCheck.mockResolvedValue(true);\n\n      const result = await controller.checkAiServiceHealth(TEST_USER_IDS.ADMIN);\n\n      expect(result.serviceInfo).toHaveProperty('name');\n      expect(result.serviceInfo).toHaveProperty('version');\n      expect(result.serviceInfo).toHaveProperty('endpoint');\n      expect(result.serviceInfo).toHaveProperty('model_version');\n      expect(result.serviceInfo).toHaveProperty('supported_assessments');\n      expect(Array.isArray(result.serviceInfo.supported_assessments)).toBe(true);\n    });\n\n    it('should log admin actions', async () => {\n      const logSpy = jest.spyOn(controller['logger'], 'log');\n      mockAiServiceClient.healthCheck.mockResolvedValue(true);\n\n      await controller.checkAiServiceHealth(TEST_USER_IDS.ADMIN);\n\n      expect(logSpy).toHaveBeenCalledWith(`Admin ${TEST_USER_IDS.ADMIN} checking AI service health`);\n    });\n\n    it('should log errors when health check fails', async () => {\n      const logSpy = jest.spyOn(controller['logger'], 'error');\n      const healthCheckError = new Error('Service unavailable');\n      mockAiServiceClient.healthCheck.mockRejectedValue(healthCheckError);\n\n      await controller.checkAiServiceHealth(TEST_USER_IDS.ADMIN);\n\n      expect(logSpy).toHaveBeenCalledWith('AI service health check failed:', healthCheckError);\n    });\n\n    it('should handle different error types during health check', async () => {\n      const errorTypes = [\n        new Error('Network timeout'),\n        new Error('Service not found'),\n        new Error('Authentication failed'),\n        'String error',\n        { message: 'Object error' },\n      ];\n\n      for (const error of errorTypes) {\n        mockAiServiceClient.healthCheck.mockRejectedValue(error);\n\n        const result = await controller.checkAiServiceHealth(TEST_USER_IDS.ADMIN);\n\n        expect(result.status).toBe('error');\n        expect(result.healthy).toBe(false);\n      }\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted assessment creation response', async () => {\n      mockPreAssessmentService.createPreAssessment.mockResolvedValue(mockPreAssessment);\n\n      const result = await controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto);\n\n      TestAssertions.expectValidEntity(result, ['id', 'userId', 'scores', 'responses']);\n      expect(result.createdAt).toBeInstanceOf(Date);\n      expect(result.updatedAt).toBeInstanceOf(Date);\n      expect(result.completedAt).toBeInstanceOf(Date);\n      expect(typeof result.scores).toBe('object');\n      expect(typeof result.responses).toBe('object');\n    });\n\n    it('should return properly formatted assessment retrieval response', async () => {\n      mockPreAssessmentService.getPreAssessmentByUserId.mockResolvedValue(mockPreAssessment);\n\n      const result = await controller.getPreAssessment(TEST_USER_IDS.CLIENT);\n\n      expect(result.userId).toBe(TEST_USER_IDS.CLIENT);\n      expect(Object.keys(result.scores)).toHaveLength(13); // All assessment categories\n      expect(result.responses).toHaveProperty('demographics');\n      expect(result.responses).toHaveProperty('mental_health_history');\n      expect(result.responses).toHaveProperty('preferences');\n      expect(result.responses).toHaveProperty('questionnaire_responses');\n    });\n\n    it('should return properly formatted health check response', async () => {\n      mockAiServiceClient.healthCheck.mockResolvedValue(true);\n\n      const result = await controller.checkAiServiceHealth(TEST_USER_IDS.ADMIN);\n\n      expect(result).toHaveProperty('status');\n      expect(result).toHaveProperty('healthy');\n      expect(result).toHaveProperty('serviceInfo');\n      expect(result).toHaveProperty('timestamp');\n      expect(typeof result.status).toBe('string');\n      expect(typeof result.healthy).toBe('boolean');\n      expect(typeof result.serviceInfo).toBe('object');\n      expect(typeof result.timestamp).toBe('string');\n    });\n\n    it('should validate score ranges in assessment response', async () => {\n      mockPreAssessmentService.createPreAssessment.mockResolvedValue(mockPreAssessment);\n\n      const result = await controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto);\n\n      Object.values(result.scores).forEach((score) => {\n        expect(typeof score).toBe('number');\n        expect(score).toBeGreaterThanOrEqual(0);\n        expect(score).toBeLessThanOrEqual(10); // Assuming 0-10 scale\n      });\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle service unavailable scenarios', async () => {\n      const serviceError = new Error('Pre-assessment service temporarily unavailable');\n      mockPreAssessmentService.getPreAssessmentByUserId.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getPreAssessment(TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle database connection errors', async () => {\n      const dbError = new Error('Database connection failed');\n      mockPreAssessmentService.createPreAssessment.mockRejectedValue(dbError);\n\n      await expect(\n        controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto)\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle AI service integration errors', async () => {\n      const aiError = new Error('AI service processing failed');\n      mockPreAssessmentService.createPreAssessment.mockRejectedValue(aiError);\n\n      await expect(\n        controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto)\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.createPreAssessment(TEST_USER_IDS.CLIENT, createPreAssessmentDto)\n      ).rejects.toThrow('AI service processing failed');\n    });\n\n    it('should handle validation errors consistently', async () => {\n      const validationError = new Error('Invalid assessment format');\n      mockPreAssessmentService.updatePreAssessment.mockRejectedValue(validationError);\n\n      await expect(\n        controller.updatePreAssessment(TEST_USER_IDS.CLIENT, {})\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        controller.updatePreAssessment(TEST_USER_IDS.CLIENT, {})\n      ).rejects.toThrow('Invalid assessment format');\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete assessment lifecycle', async () => {\n      // Create assessment\n      mockPreAssessmentService.createPreAssessment.mockResolvedValue(mockPreAssessment);\n      const createResult = await controller.createPreAssessment(\n        TEST_USER_IDS.CLIENT,\n        createPreAssessmentDto,\n      );\n      expect(createResult.id).toBeDefined();\n\n      // Retrieve assessment\n      mockPreAssessmentService.getPreAssessmentByUserId.mockResolvedValue(mockPreAssessment);\n      const getResult = await controller.getPreAssessment(TEST_USER_IDS.CLIENT);\n      expect(getResult.id).toBe(createResult.id);\n\n      // Update assessment\n      const updatedAssessment = { ...mockPreAssessment, updatedAt: new Date() };\n      mockPreAssessmentService.updatePreAssessment.mockResolvedValue(updatedAssessment);\n      const updateResult = await controller.updatePreAssessment(\n        TEST_USER_IDS.CLIENT,\n        { responses: { preferences: { frequency: 'weekly' } } },\n      );\n      expect(updateResult.updatedAt).toBeInstanceOf(Date);\n\n      // Delete assessment\n      mockPreAssessmentService.deletePreAssessment.mockResolvedValue(null);\n      const deleteResult = await controller.deletePreAssessment(TEST_USER_IDS.CLIENT);\n      expect(deleteResult).toBeNull();\n    });\n\n    it('should handle admin monitoring workflow', async () => {\n      // Check AI service health\n      mockAiServiceClient.healthCheck.mockResolvedValue(true);\n      const healthResult = await controller.checkAiServiceHealth(TEST_USER_IDS.ADMIN);\n      expect(healthResult.healthy).toBe(true);\n\n      // Verify service info is comprehensive\n      expect(healthResult.serviceInfo.supported_assessments).toContain('anxiety');\n      expect(healthResult.serviceInfo.supported_assessments).toContain('depression');\n      expect(healthResult.timestamp).toBeDefined();\n    });\n\n    it('should handle multiple user assessments', async () => {\n      const userIds = [TEST_USER_IDS.CLIENT, 'user_2', 'user_3'];\n      const assessments = userIds.map((userId) => ({\n        ...mockPreAssessment,\n        id: `assessment_${userId}`,\n        userId,\n      }));\n\n      for (let i = 0; i < userIds.length; i++) {\n        mockPreAssessmentService.getPreAssessmentByUserId.mockResolvedValue(assessments[i]);\n\n        const result = await controller.getPreAssessment(userIds[i]);\n\n        expect(result.userId).toBe(userIds[i]);\n        expect(result.id).toBe(`assessment_${userIds[i]}`);\n      }\n    });\n  });\n});"],"version":3}