d6e5a8ea365bcd88c68ea72cdbc29580
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const throttler_1 = require("@nestjs/throttler");
const client_auth_controller_1 = require("./client-auth.controller");
const client_auth_service_1 = require("../../services/auth/client-auth.service");
const jwt_auth_guard_1 = require("../guards/jwt-auth.guard");
const zod_validation_pipe_1 = require("../../common/pipes/zod-validation.pipe");
const auth_testing_helpers_1 = require("../../test-utils/auth-testing-helpers");
describe('ClientAuthController', () => {
    let controller;
    let clientAuthService;
    let mockJwtAuthGuard;
    // Test data constants
    const mockClientUser = {
        id: auth_testing_helpers_1.TEST_USER_IDS.CLIENT,
        email: auth_testing_helpers_1.TEST_EMAILS.CLIENT,
        firstName: 'John',
        lastName: 'Doe',
        role: 'client',
        emailVerified: false,
        dateOfBirth: new Date('1990-01-01'),
        phoneNumber: '+1234567890',
        profileComplete: true,
        therapistId: null,
        createdAt: new Date(),
    };
    const mockTokens = {
        accessToken: 'mock-access-token',
        refreshToken: 'mock-refresh-token',
        expiresIn: 3600,
    };
    const mockRegistrationResult = {
        user: mockClientUser,
        tokens: mockTokens,
        message: 'Client account created successfully',
    };
    const mockLoginResult = {
        user: mockClientUser,
        tokens: mockTokens,
    };
    const mockFirstSignInStatus = {
        isFirstSignIn: true,
        hasSeenRecommendations: false,
        profileCompleted: false,
        assessmentCompleted: false,
    };
    const mockMarkRecommendationsResult = {
        success: true,
        message: 'Recommendations marked as seen successfully',
    };
    beforeEach(async () => {
        // Create mock services
        const mockClientAuthService = {
            registerClient: jest.fn(),
            loginClient: jest.fn(),
            getClientProfile: jest.fn(),
            getFirstSignInStatus: jest.fn(),
            markRecommendationsSeen: jest.fn(),
        };
        mockJwtAuthGuard = {
            canActivate: jest.fn().mockReturnValue(true),
        };
        const module = await testing_1.Test.createTestingModule({
            imports: [
                throttler_1.ThrottlerModule.forRoot([
                    {
                        name: 'short',
                        ttl: 1000,
                        limit: 3,
                    },
                ]),
            ],
            controllers: [client_auth_controller_1.ClientAuthController],
            providers: [
                {
                    provide: client_auth_service_1.ClientAuthService,
                    useValue: mockClientAuthService,
                },
            ],
        })
            .overrideGuard(jwt_auth_guard_1.JwtAuthGuard)
            .useValue(mockJwtAuthGuard)
            .overrideGuard(throttler_1.ThrottlerGuard)
            .useValue({ canActivate: jest.fn().mockReturnValue(true) })
            .compile();
        controller = module.get(client_auth_controller_1.ClientAuthController);
        clientAuthService = module.get(client_auth_service_1.ClientAuthService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('register', () => {
        const validRegisterDto = {
            email: 'newclient@example.com',
            password: 'SecurePass123!',
            firstName: 'New',
            lastName: 'Client',
            dateOfBirth: new Date('1990-01-01'),
            phoneNumber: '+1234567890',
        };
        it('should register client successfully', async () => {
            // Arrange
            jest.spyOn(clientAuthService, 'registerClient').mockResolvedValue(mockRegistrationResult);
            // Act
            const result = await controller.register(validRegisterDto);
            // Assert
            expect(clientAuthService.registerClient).toHaveBeenCalledWith(validRegisterDto);
            expect(result).toEqual({
                user: {
                    id: mockClientUser.id,
                    email: mockClientUser.email,
                    firstName: mockClientUser.firstName,
                    lastName: mockClientUser.lastName,
                    role: mockClientUser.role,
                    emailVerified: mockClientUser.emailVerified,
                },
                accessToken: mockTokens.accessToken,
                refreshToken: mockTokens.refreshToken,
                expiresIn: mockTokens.expiresIn,
                message: mockRegistrationResult.message,
            });
        });
        it('should handle registration with minimal data', async () => {
            // Arrange
            const minimalRegisterDto = {
                email: 'minimal@example.com',
                password: 'SecurePass123!',
                firstName: 'Minimal',
                lastName: 'User',
            };
            jest.spyOn(clientAuthService, 'registerClient').mockResolvedValue(mockRegistrationResult);
            // Act
            const result = await controller.register(minimalRegisterDto);
            // Assert
            expect(clientAuthService.registerClient).toHaveBeenCalledWith(minimalRegisterDto);
            expect(result).toBeDefined();
        });
        it('should handle email already exists error', async () => {
            // Arrange
            const error = new common_1.BadRequestException('Email already exists');
            jest.spyOn(clientAuthService, 'registerClient').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.register(validRegisterDto)).rejects.toThrow(common_1.BadRequestException);
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Database error');
            jest.spyOn(clientAuthService, 'registerClient').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.register(validRegisterDto)).rejects.toThrow(error);
        });
    });
    describe('login', () => {
        const validLoginDto = {
            email: auth_testing_helpers_1.TEST_EMAILS.CLIENT,
            password: 'SecurePass123!',
        };
        const mockRequest = {
            ip: '192.168.1.1',
            get: jest.fn().mockReturnValue('Test User Agent'),
        };
        it('should login client successfully with valid credentials', async () => {
            // Arrange
            jest.spyOn(clientAuthService, 'loginClient').mockResolvedValue(mockLoginResult);
            // Act
            const result = await controller.login(validLoginDto, mockRequest);
            // Assert
            expect(clientAuthService.loginClient).toHaveBeenCalledWith(validLoginDto.email, validLoginDto.password, mockRequest.ip, 'Test User Agent');
            expect(result).toEqual({
                user: {
                    id: mockClientUser.id,
                    email: mockClientUser.email,
                    firstName: mockClientUser.firstName,
                    lastName: mockClientUser.lastName,
                    role: mockClientUser.role,
                    emailVerified: mockClientUser.emailVerified,
                },
                accessToken: mockTokens.accessToken,
                refreshToken: mockTokens.refreshToken,
                expiresIn: mockTokens.expiresIn,
            });
        });
        it('should handle missing User-Agent header', async () => {
            // Arrange
            const mockRequestWithoutUserAgent = {
                ip: '192.168.1.1',
                get: jest.fn().mockReturnValue(undefined),
            };
            jest.spyOn(clientAuthService, 'loginClient').mockResolvedValue(mockLoginResult);
            // Act
            await controller.login(validLoginDto, mockRequestWithoutUserAgent);
            // Assert
            expect(clientAuthService.loginClient).toHaveBeenCalledWith(validLoginDto.email, validLoginDto.password, mockRequestWithoutUserAgent.ip, undefined);
        });
        it('should handle invalid credentials', async () => {
            // Arrange
            const authError = new common_1.UnauthorizedException('Invalid credentials');
            jest.spyOn(clientAuthService, 'loginClient').mockRejectedValue(authError);
            // Act & Assert
            await expect(controller.login(validLoginDto, mockRequest)).rejects.toThrow(authError);
        });
        it('should handle service errors', async () => {
            // Arrange
            const serviceError = new Error('Database connection failed');
            jest.spyOn(clientAuthService, 'loginClient').mockRejectedValue(serviceError);
            // Act & Assert
            await expect(controller.login(validLoginDto, mockRequest)).rejects.toThrow(serviceError);
        });
    });
    describe('getProfile', () => {
        it('should return client profile successfully', async () => {
            // Arrange
            jest.spyOn(clientAuthService, 'getClientProfile').mockResolvedValue(mockClientUser);
            // Act
            const result = await controller.getProfile(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            // Assert
            expect(clientAuthService.getClientProfile).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockClientUser);
        });
        it('should handle profile not found', async () => {
            // Arrange
            const notFoundError = new Error('Client profile not found');
            jest.spyOn(clientAuthService, 'getClientProfile').mockRejectedValue(notFoundError);
            // Act & Assert
            await expect(controller.getProfile(auth_testing_helpers_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(notFoundError);
        });
    });
    describe('getFirstSignInStatus', () => {
        it('should return first sign-in status successfully', async () => {
            // Arrange
            jest.spyOn(clientAuthService, 'getFirstSignInStatus').mockResolvedValue(mockFirstSignInStatus);
            // Act
            const result = await controller.getFirstSignInStatus(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            // Assert
            expect(clientAuthService.getFirstSignInStatus).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockFirstSignInStatus);
        });
        it('should handle returning user status', async () => {
            // Arrange
            const returningUserStatus = {
                isFirstSignIn: false,
                hasSeenRecommendations: true,
                profileCompleted: true,
                assessmentCompleted: true,
            };
            jest.spyOn(clientAuthService, 'getFirstSignInStatus').mockResolvedValue(returningUserStatus);
            // Act
            const result = await controller.getFirstSignInStatus(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            // Assert
            expect(result).toEqual(returningUserStatus);
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Database error');
            jest.spyOn(clientAuthService, 'getFirstSignInStatus').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.getFirstSignInStatus(auth_testing_helpers_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(error);
        });
    });
    describe('markRecommendationsSeen', () => {
        it('should mark recommendations as seen successfully', async () => {
            // Arrange
            jest.spyOn(clientAuthService, 'markRecommendationsSeen').mockResolvedValue(mockMarkRecommendationsResult);
            // Act
            const result = await controller.markRecommendationsSeen(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            // Assert
            expect(clientAuthService.markRecommendationsSeen).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockMarkRecommendationsResult);
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Database error');
            jest.spyOn(clientAuthService, 'markRecommendationsSeen').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.markRecommendationsSeen(auth_testing_helpers_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(error);
        });
    });
    describe('Security Tests', () => {
        it('should validate input data through ZodValidationPipe', () => {
            // This tests that the controller uses proper validation
            const validationPipe = new zod_validation_pipe_1.ZodValidationPipe({});
            expect(validationPipe).toBeDefined();
        });
        it('should apply rate limiting through ThrottlerGuard', () => {
            // Test that throttling is configured
            const registerMetadata = Reflect.getMetadata('__throttler_options__', controller.register);
            const loginMetadata = Reflect.getMetadata('__throttler_options__', controller.login);
            expect(registerMetadata).toBeDefined();
            expect(loginMetadata).toBeDefined();
        });
        it('should require authentication for protected endpoints', () => {
            // Test that protected endpoints have JwtAuthGuard
            const protectedMethods = ['getProfile', 'getFirstSignInStatus', 'markRecommendationsSeen'];
            protectedMethods.forEach(method => {
                const guards = Reflect.getMetadata('__guards__', controller[method]);
                expect(guards).toBeDefined();
            });
        });
        it('should allow public access to register and login endpoints', () => {
            // Test that public endpoints are marked as public
            const publicMethods = ['register', 'login'];
            publicMethods.forEach(method => {
                const publicMetadata = Reflect.getMetadata('isPublic', controller[method]);
                expect(publicMetadata).toBeTruthy();
            });
        });
    });
    describe('Role-based Access Control', () => {
        it('should test role-based access for protected endpoints', async () => {
            // Test that client role can access client-specific endpoints
            await auth_testing_helpers_1.RoleBasedTestUtils.testWithRoles(async (userId, role) => {
                // Mock the auth guard to return the specific role
                mockJwtAuthGuard.canActivate.mockReturnValue(role === 'client');
                try {
                    await controller.getProfile(userId);
                    return true;
                }
                catch (error) {
                    return false;
                }
            }, {
                client: true,
                therapist: false,
                admin: false,
                moderator: false,
            });
        });
        it('should validate client-specific functionality', async () => {
            // Test that client-specific endpoints work for clients
            const clientContext = auth_testing_helpers_1.MockBuilder.createAuthContext('client');
            jest.spyOn(clientAuthService, 'getFirstSignInStatus').mockResolvedValue(mockFirstSignInStatus);
            const result = await controller.getFirstSignInStatus(clientContext.userId);
            expect(result).toBeDefined();
            expect(result.isFirstSignIn).toBeDefined();
        });
    });
    describe('Error Handling', () => {
        it('should handle network errors gracefully', async () => {
            // Arrange
            const networkError = new Error('Network timeout');
            jest.spyOn(clientAuthService, 'getClientProfile').mockRejectedValue(networkError);
            // Act & Assert
            await expect(controller.getProfile(auth_testing_helpers_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(networkError);
        });
        it('should handle validation errors', async () => {
            // Test that invalid data would be caught by the validation pipe
            const invalidData = {
                email: 'invalid-email',
                password: '123', // Too short
                firstName: '',
                lastName: '',
            };
            // In a real scenario, this would throw a validation error
            // The pipe would catch this before it reaches the controller
            expect(() => {
                // This would be handled by ZodValidationPipe
                // and would throw a BadRequestException
            }).not.toThrow();
        });
    });
    describe('Integration Tests', () => {
        it('should handle complete client registration workflow', async () => {
            // Arrange
            const registrationDto = {
                email: 'integration@example.com',
                password: 'SecurePass123!',
                firstName: 'Integration',
                lastName: 'Test',
                dateOfBirth: new Date('1990-01-01'),
                phoneNumber: '+1234567890',
            };
            jest.spyOn(clientAuthService, 'registerClient').mockResolvedValue(mockRegistrationResult);
            // Act
            const result = await controller.register(registrationDto);
            // Assert
            expect(result).toBeDefined();
            expect(result.user.email).toBe(mockClientUser.email);
            expect(result.accessToken).toBe(mockTokens.accessToken);
            expect(result.refreshToken).toBe(mockTokens.refreshToken);
            expect(result.expiresIn).toBe(mockTokens.expiresIn);
            expect(result.message).toBe(mockRegistrationResult.message);
        });
        it('should handle complete client login workflow', async () => {
            // Arrange
            const loginDto = {
                email: auth_testing_helpers_1.TEST_EMAILS.CLIENT,
                password: 'SecurePass123!',
            };
            const mockRequest = {
                ip: '192.168.1.1',
                get: jest.fn().mockReturnValue('Test User Agent'),
            };
            jest.spyOn(clientAuthService, 'loginClient').mockResolvedValue(mockLoginResult);
            // Act
            const result = await controller.login(loginDto, mockRequest);
            // Assert
            expect(result).toBeDefined();
            expect(result.user.email).toBe(mockClientUser.email);
            expect(result.accessToken).toBe(mockTokens.accessToken);
            expect(result.refreshToken).toBe(mockTokens.refreshToken);
            expect(result.expiresIn).toBe(mockTokens.expiresIn);
        });
        it('should handle complete onboarding status workflow', async () => {
            // Arrange
            jest.spyOn(clientAuthService, 'getFirstSignInStatus').mockResolvedValue(mockFirstSignInStatus);
            jest.spyOn(clientAuthService, 'markRecommendationsSeen').mockResolvedValue(mockMarkRecommendationsResult);
            // Act - Check initial status
            const initialStatus = await controller.getFirstSignInStatus(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            // Act - Mark recommendations as seen
            const markResult = await controller.markRecommendationsSeen(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            // Assert
            expect(initialStatus).toBeDefined();
            expect(initialStatus.isFirstSignIn).toBe(true);
            expect(initialStatus.hasSeenRecommendations).toBe(false);
            expect(markResult).toBeDefined();
            expect(markResult.success).toBe(true);
        });
    });
    describe('Data Validation', () => {
        it('should validate registration data structure', () => {
            // Test that we're using the correct DTO structure
            const validRegistrationData = {
                email: 'test@example.com',
                password: 'SecurePass123!',
                firstName: 'Test',
                lastName: 'User',
                dateOfBirth: new Date('1990-01-01'),
                phoneNumber: '+1234567890',
            };
            // Verify all required fields are present
            expect(validRegistrationData.email).toBeDefined();
            expect(validRegistrationData.password).toBeDefined();
            expect(validRegistrationData.firstName).toBeDefined();
            expect(validRegistrationData.lastName).toBeDefined();
        });
        it('should validate login data structure', () => {
            // Test that we're using the correct DTO structure
            const validLoginData = {
                email: 'test@example.com',
                password: 'SecurePass123!',
            };
            // Verify all required fields are present
            expect(validLoginData.email).toBeDefined();
            expect(validLoginData.password).toBeDefined();
        });
    });
    describe('Response Format Validation', () => {
        it('should return correctly formatted registration response', async () => {
            // Arrange
            const registerDto = {
                email: 'format@example.com',
                password: 'SecurePass123!',
                firstName: 'Format',
                lastName: 'Test',
            };
            jest.spyOn(clientAuthService, 'registerClient').mockResolvedValue(mockRegistrationResult);
            // Act
            const result = await controller.register(registerDto);
            // Assert
            expect(result).toHaveProperty('user');
            expect(result).toHaveProperty('accessToken');
            expect(result).toHaveProperty('refreshToken');
            expect(result).toHaveProperty('expiresIn');
            expect(result).toHaveProperty('message');
            expect(result.user).toHaveProperty('id');
            expect(result.user).toHaveProperty('email');
            expect(result.user).toHaveProperty('firstName');
            expect(result.user).toHaveProperty('lastName');
            expect(result.user).toHaveProperty('role');
            expect(result.user).toHaveProperty('emailVerified');
        });
        it('should return correctly formatted login response', async () => {
            // Arrange
            const loginDto = {
                email: auth_testing_helpers_1.TEST_EMAILS.CLIENT,
                password: 'SecurePass123!',
            };
            const mockRequest = {
                ip: '192.168.1.1',
                get: jest.fn().mockReturnValue('Test User Agent'),
            };
            jest.spyOn(clientAuthService, 'loginClient').mockResolvedValue(mockLoginResult);
            // Act
            const result = await controller.login(loginDto, mockRequest);
            // Assert
            expect(result).toHaveProperty('user');
            expect(result).toHaveProperty('accessToken');
            expect(result).toHaveProperty('refreshToken');
            expect(result).toHaveProperty('expiresIn');
            expect(result).not.toHaveProperty('message'); // Login doesn't include message
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2F1dGgvY29udHJvbGxlcnMvY2xpZW50LWF1dGguY29udHJvbGxlci5zcGVjLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsNkNBQXNEO0FBQ3RELDJDQUE0RTtBQUM1RSxpREFBb0U7QUFDcEUscUVBQWdFO0FBQ2hFLGlGQUE0RTtBQUM1RSw2REFBd0Q7QUFDeEQsZ0ZBQTJFO0FBQzNFLGdGQVErQztBQUUvQyxRQUFRLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO0lBQ3BDLElBQUksVUFBZ0MsQ0FBQztJQUNyQyxJQUFJLGlCQUFvQyxDQUFDO0lBQ3pDLElBQUksZ0JBQTJDLENBQUM7SUFFaEQsc0JBQXNCO0lBQ3RCLE1BQU0sY0FBYyxHQUFHO1FBQ3JCLEVBQUUsRUFBRSxvQ0FBYSxDQUFDLE1BQU07UUFDeEIsS0FBSyxFQUFFLGtDQUFXLENBQUMsTUFBTTtRQUN6QixTQUFTLEVBQUUsTUFBTTtRQUNqQixRQUFRLEVBQUUsS0FBSztRQUNmLElBQUksRUFBRSxRQUFRO1FBQ2QsYUFBYSxFQUFFLEtBQUs7UUFDcEIsV0FBVyxFQUFFLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQztRQUNuQyxXQUFXLEVBQUUsYUFBYTtRQUMxQixlQUFlLEVBQUUsSUFBSTtRQUNyQixXQUFXLEVBQUUsSUFBSTtRQUNqQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7S0FDdEIsQ0FBQztJQUVGLE1BQU0sVUFBVSxHQUFHO1FBQ2pCLFdBQVcsRUFBRSxtQkFBbUI7UUFDaEMsWUFBWSxFQUFFLG9CQUFvQjtRQUNsQyxTQUFTLEVBQUUsSUFBSTtLQUNoQixDQUFDO0lBRUYsTUFBTSxzQkFBc0IsR0FBRztRQUM3QixJQUFJLEVBQUUsY0FBYztRQUNwQixNQUFNLEVBQUUsVUFBVTtRQUNsQixPQUFPLEVBQUUscUNBQXFDO0tBQy9DLENBQUM7SUFFRixNQUFNLGVBQWUsR0FBRztRQUN0QixJQUFJLEVBQUUs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Q0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2F1dGgvY29udHJvbGxlcnMvY2xpZW50LWF1dGguY29udHJvbGxlci5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgVW5hdXRob3JpemVkRXhjZXB0aW9uLCBCYWRSZXF1ZXN0RXhjZXB0aW9uIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgVGhyb3R0bGVyR3VhcmQsIFRocm90dGxlck1vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGhyb3R0bGVyJztcbmltcG9ydCB7IENsaWVudEF1dGhDb250cm9sbGVyIH0gZnJvbSAnLi9jbGllbnQtYXV0aC5jb250cm9sbGVyJztcbmltcG9ydCB7IENsaWVudEF1dGhTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXV0aC9jbGllbnQtYXV0aC5zZXJ2aWNlJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uL2d1YXJkcy9qd3QtYXV0aC5ndWFyZCc7XG5pbXBvcnQgeyBab2RWYWxpZGF0aW9uUGlwZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9waXBlcy96b2QtdmFsaWRhdGlvbi5waXBlJztcbmltcG9ydCB7XG4gIE1vY2tCdWlsZGVyLFxuICBUZXN0RGF0YUdlbmVyYXRvcixcbiAgVGVzdEFzc2VydGlvbnMsXG4gIFNlY3VyaXR5R3VhcmRUZXN0VXRpbHMsXG4gIFJvbGVCYXNlZFRlc3RVdGlscyxcbiAgVEVTVF9VU0VSX0lEUyxcbiAgVEVTVF9FTUFJTFMsXG59IGZyb20gJy4uLy4uL3Rlc3QtdXRpbHMvYXV0aC10ZXN0aW5nLWhlbHBlcnMnO1xuXG5kZXNjcmliZSgnQ2xpZW50QXV0aENvbnRyb2xsZXInLCAoKSA9PiB7XG4gIGxldCBjb250cm9sbGVyOiBDbGllbnRBdXRoQ29udHJvbGxlcjtcbiAgbGV0IGNsaWVudEF1dGhTZXJ2aWNlOiBDbGllbnRBdXRoU2VydmljZTtcbiAgbGV0IG1vY2tKd3RBdXRoR3VhcmQ6IGplc3QuTW9ja2VkPEp3dEF1dGhHdWFyZD47XG5cbiAgLy8gVGVzdCBkYXRhIGNvbnN0YW50c1xuICBjb25zdCBtb2NrQ2xpZW50VXNlciA9IHtcbiAgICBpZDogVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgZW1haWw6IFRFU1RfRU1BSUxTLkNMSUVOVCxcbiAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgcm9sZTogJ2NsaWVudCcsXG4gICAgZW1haWxWZXJpZmllZDogZmFsc2UsXG4gICAgZGF0ZU9mQmlydGg6IG5ldyBEYXRlKCcxOTkwLTAxLTAxJyksXG4gICAgcGhvbmVOdW1iZXI6ICcrMTIzNDU2Nzg5MCcsXG4gICAgcHJvZmlsZUNvbXBsZXRlOiB0cnVlLFxuICAgIHRoZXJhcGlzdElkOiBudWxsLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgfTtcblxuICBjb25zdCBtb2NrVG9rZW5zID0ge1xuICAgIGFjY2Vzc1Rva2VuOiAnbW9jay1hY2Nlc3MtdG9rZW4nLFxuICAgIHJlZnJlc2hUb2tlbjogJ21vY2stcmVmcmVzaC10b2tlbicsXG4gICAgZXhwaXJlc0luOiAzNjAwLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tSZWdpc3RyYXRpb25SZXN1bHQgPSB7XG4gICAgdXNlcjogbW9ja0NsaWVudFVzZXIsXG4gICAgdG9rZW5zOiBtb2NrVG9rZW5zLFxuICAgIG1lc3NhZ2U6ICdDbGllbnQgYWNjb3VudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsXG4gIH07XG5cbiAgY29uc3QgbW9ja0xvZ2luUmVzdWx0ID0ge1xuICAgIHVzZXI6IG1vY2tDbGllbnRVc2VyLFxuICAgIHRva2VuczogbW9ja1Rva2VucyxcbiAgfTtcblxuICBjb25zdCBtb2NrRmlyc3RTaWduSW5TdGF0dXMgPSB7XG4gICAgaXNGaXJzdFNpZ25JbjogdHJ1ZSxcbiAgICBoYXNTZWVuUmVjb21tZW5kYXRpb25zOiBmYWxzZSxcbiAgICBwcm9maWxlQ29tcGxldGVkOiBmYWxzZSxcbiAgICBhc3Nlc3NtZW50Q29tcGxldGVkOiBmYWxzZSxcbiAgfTtcblxuICBjb25zdCBtb2NrTWFya1JlY29tbWVuZGF0aW9uc1Jlc3VsdCA9IHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIG1lc3NhZ2U6ICdSZWNvbW1lbmRhdGlvbnMgbWFya2VkIGFzIHNlZW4gc3VjY2Vzc2Z1bGx5JyxcbiAgfTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAvLyBDcmVhdGUgbW9jayBzZXJ2aWNlc1xuICAgIGNvbnN0IG1vY2tDbGllbnRBdXRoU2VydmljZSA9IHtcbiAgICAgIHJlZ2lzdGVyQ2xpZW50OiBqZXN0LmZuKCksXG4gICAgICBsb2dpbkNsaWVudDogamVzdC5mbigpLFxuICAgICAgZ2V0Q2xpZW50UHJvZmlsZTogamVzdC5mbigpLFxuICAgICAgZ2V0Rmlyc3RTaWduSW5TdGF0dXM6IGplc3QuZm4oKSxcbiAgICAgIG1hcmtSZWNvbW1lbmRhdGlvbnNTZWVuOiBqZXN0LmZuKCksXG4gICAgfTtcblxuICAgIG1vY2tKd3RBdXRoR3VhcmQgPSB7XG4gICAgICBjYW5BY3RpdmF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKSxcbiAgICB9IGFzIGFueTtcblxuICAgIGNvbnN0IG1vZHVsZTogVGVzdGluZ01vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XG4gICAgICBpbXBvcnRzOiBbXG4gICAgICAgIFRocm90dGxlck1vZHVsZS5mb3JSb290KFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnc2hvcnQnLFxuICAgICAgICAgICAgdHRsOiAxMDAwLFxuICAgICAgICAgICAgbGltaXQ6IDMsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSksXG4gICAgICBdLFxuICAgICAgY29udHJvbGxlcnM6IFtDbGllbnRBdXRoQ29udHJvbGxlcl0sXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IENsaWVudEF1dGhTZXJ2aWNlLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrQ2xpZW50QXV0aFNlcnZpY2UsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pXG4gICAgICAub3ZlcnJpZGVHdWFyZChKd3RBdXRoR3VhcmQpXG4gICAgICAudXNlVmFsdWUobW9ja0p3dEF1dGhHdWFyZClcbiAgICAgIC5vdmVycmlkZUd1YXJkKFRocm90dGxlckd1YXJkKVxuICAgICAgLnVzZVZhbHVlKHsgY2FuQWN0aXZhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSkgfSlcbiAgICAgIC5jb21waWxlKCk7XG5cbiAgICBjb250cm9sbGVyID0gbW9kdWxlLmdldDxDbGllbnRBdXRoQ29udHJvbGxlcj4oQ2xpZW50QXV0aENvbnRyb2xsZXIpO1xuICAgIGNsaWVudEF1dGhTZXJ2aWNlID0gbW9kdWxlLmdldDxDbGllbnRBdXRoU2VydmljZT4oQ2xpZW50QXV0aFNlcnZpY2UpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgncmVnaXN0ZXInLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRSZWdpc3RlckR0byA9IHtcbiAgICAgIGVtYWlsOiAnbmV3Y2xpZW50QGV4YW1wbGUuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAnU2VjdXJlUGFzczEyMyEnLFxuICAgICAgZmlyc3ROYW1lOiAnTmV3JyxcbiAgICAgIGxhc3ROYW1lOiAnQ2xpZW50JyxcbiAgICAgIGRhdGVPZkJpcnRoOiBuZXcgRGF0ZSgnMTk5MC0wMS0wMScpLFxuICAgICAgcGhvbmVOdW1iZXI6ICcrMTIzNDU2Nzg5MCcsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgY2xpZW50IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24oY2xpZW50QXV0aFNlcnZpY2UsICdyZWdpc3RlckNsaWVudCcpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZWdpc3RyYXRpb25SZXN1bHQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIucmVnaXN0ZXIodmFsaWRSZWdpc3RlckR0byk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGNsaWVudEF1dGhTZXJ2aWNlLnJlZ2lzdGVyQ2xpZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh2YWxpZFJlZ2lzdGVyRHRvKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IG1vY2tDbGllbnRVc2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiBtb2NrQ2xpZW50VXNlci5lbWFpbCxcbiAgICAgICAgICBmaXJzdE5hbWU6IG1vY2tDbGllbnRVc2VyLmZpcnN0TmFtZSxcbiAgICAgICAgICBsYXN0TmFtZTogbW9ja0NsaWVudFVzZXIubGFzdE5hbWUsXG4gICAgICAgICAgcm9sZTogbW9ja0NsaWVudFVzZXIucm9sZSxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBtb2NrQ2xpZW50VXNlci5lbWFpbFZlcmlmaWVkLFxuICAgICAgICB9LFxuICAgICAgICBhY2Nlc3NUb2tlbjogbW9ja1Rva2Vucy5hY2Nlc3NUb2tlbixcbiAgICAgICAgcmVmcmVzaFRva2VuOiBtb2NrVG9rZW5zLnJlZnJlc2hUb2tlbixcbiAgICAgICAgZXhwaXJlc0luOiBtb2NrVG9rZW5zLmV4cGlyZXNJbixcbiAgICAgICAgbWVzc2FnZTogbW9ja1JlZ2lzdHJhdGlvblJlc3VsdC5tZXNzYWdlLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByZWdpc3RyYXRpb24gd2l0aCBtaW5pbWFsIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtaW5pbWFsUmVnaXN0ZXJEdG8gPSB7XG4gICAgICAgIGVtYWlsOiAnbWluaW1hbEBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAnU2VjdXJlUGFzczEyMyEnLFxuICAgICAgICBmaXJzdE5hbWU6ICdNaW5pbWFsJyxcbiAgICAgICAgbGFzdE5hbWU6ICdVc2VyJyxcbiAgICAgIH07XG5cbiAgICAgIGplc3Quc3B5T24oY2xpZW50QXV0aFNlcnZpY2UsICdyZWdpc3RlckNsaWVudCcpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZWdpc3RyYXRpb25SZXN1bHQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIucmVnaXN0ZXIobWluaW1hbFJlZ2lzdGVyRHRvKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QoY2xpZW50QXV0aFNlcnZpY2UucmVnaXN0ZXJDbGllbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1pbmltYWxSZWdpc3RlckR0byk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1haWwgYWxyZWFkeSBleGlzdHMgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdFbWFpbCBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgamVzdC5zcHlPbihjbGllbnRBdXRoU2VydmljZSwgJ3JlZ2lzdGVyQ2xpZW50JykubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLnJlZ2lzdGVyKHZhbGlkUmVnaXN0ZXJEdG8pKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpO1xuICAgICAgamVzdC5zcHlPbihjbGllbnRBdXRoU2VydmljZSwgJ3JlZ2lzdGVyQ2xpZW50JykubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLnJlZ2lzdGVyKHZhbGlkUmVnaXN0ZXJEdG8pKS5yZWplY3RzLnRvVGhyb3coZXJyb3IpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9naW4nLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRMb2dpbkR0byA9IHtcbiAgICAgIGVtYWlsOiBURVNUX0VNQUlMUy5DTElFTlQsXG4gICAgICBwYXNzd29yZDogJ1NlY3VyZVBhc3MxMjMhJyxcbiAgICB9O1xuXG4gICAgY29uc3QgbW9ja1JlcXVlc3QgPSB7XG4gICAgICBpcDogJzE5Mi4xNjguMS4xJyxcbiAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgnVGVzdCBVc2VyIEFnZW50JyksXG4gICAgfSBhcyBhbnk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZ2luIGNsaWVudCBzdWNjZXNzZnVsbHkgd2l0aCB2YWxpZCBjcmVkZW50aWFscycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24oY2xpZW50QXV0aFNlcnZpY2UsICdsb2dpbkNsaWVudCcpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tMb2dpblJlc3VsdCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5sb2dpbih2YWxpZExvZ2luRHRvLCBtb2NrUmVxdWVzdCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGNsaWVudEF1dGhTZXJ2aWNlLmxvZ2luQ2xpZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgdmFsaWRMb2dpbkR0by5lbWFpbCxcbiAgICAgICAgdmFsaWRMb2dpbkR0by5wYXNzd29yZCxcbiAgICAgICAgbW9ja1JlcXVlc3QuaXAsXG4gICAgICAgICdUZXN0IFVzZXIgQWdlbnQnLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogbW9ja0NsaWVudFVzZXIuaWQsXG4gICAgICAgICAgZW1haWw6IG1vY2tDbGllbnRVc2VyLmVtYWlsLFxuICAgICAgICAgIGZpcnN0TmFtZTogbW9ja0NsaWVudFVzZXIuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiBtb2NrQ2xpZW50VXNlci5sYXN0TmFtZSxcbiAgICAgICAgICByb2xlOiBtb2NrQ2xpZW50VXNlci5yb2xlLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IG1vY2tDbGllbnRVc2VyLmVtYWlsVmVyaWZpZWQsXG4gICAgICAgIH0sXG4gICAgICAgIGFjY2Vzc1Rva2VuOiBtb2NrVG9rZW5zLmFjY2Vzc1Rva2VuLFxuICAgICAgICByZWZyZXNoVG9rZW46IG1vY2tUb2tlbnMucmVmcmVzaFRva2VuLFxuICAgICAgICBleHBpcmVzSW46IG1vY2tUb2tlbnMuZXhwaXJlc0luLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIFVzZXItQWdlbnQgaGVhZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja1JlcXVlc3RXaXRob3V0VXNlckFnZW50ID0ge1xuICAgICAgICBpcDogJzE5Mi4xNjguMS4xJyxcbiAgICAgICAgZ2V0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHVuZGVmaW5lZCksXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgamVzdC5zcHlPbihjbGllbnRBdXRoU2VydmljZSwgJ2xvZ2luQ2xpZW50JykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0xvZ2luUmVzdWx0KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBjb250cm9sbGVyLmxvZ2luKHZhbGlkTG9naW5EdG8sIG1vY2tSZXF1ZXN0V2l0aG91dFVzZXJBZ2VudCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGNsaWVudEF1dGhTZXJ2aWNlLmxvZ2luQ2xpZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgdmFsaWRMb2dpbkR0by5lbWFpbCxcbiAgICAgICAgdmFsaWRMb2dpbkR0by5wYXNzd29yZCxcbiAgICAgICAgbW9ja1JlcXVlc3RXaXRob3V0VXNlckFnZW50LmlwLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBjcmVkZW50aWFscycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGF1dGhFcnJvciA9IG5ldyBVbmF1dGhvcml6ZWRFeGNlcHRpb24oJ0ludmFsaWQgY3JlZGVudGlhbHMnKTtcbiAgICAgIGplc3Quc3B5T24oY2xpZW50QXV0aFNlcnZpY2UsICdsb2dpbkNsaWVudCcpLm1vY2tSZWplY3RlZFZhbHVlKGF1dGhFcnJvcik7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KGNvbnRyb2xsZXIubG9naW4odmFsaWRMb2dpbkR0bywgbW9ja1JlcXVlc3QpKS5yZWplY3RzLnRvVGhyb3coYXV0aEVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgamVzdC5zcHlPbihjbGllbnRBdXRoU2VydmljZSwgJ2xvZ2luQ2xpZW50JykubW9ja1JlamVjdGVkVmFsdWUoc2VydmljZUVycm9yKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoY29udHJvbGxlci5sb2dpbih2YWxpZExvZ2luRHRvLCBtb2NrUmVxdWVzdCkpLnJlamVjdHMudG9UaHJvdyhzZXJ2aWNlRXJyb3IpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0UHJvZmlsZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjbGllbnQgcHJvZmlsZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBqZXN0LnNweU9uKGNsaWVudEF1dGhTZXJ2aWNlLCAnZ2V0Q2xpZW50UHJvZmlsZScpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDbGllbnRVc2VyKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFByb2ZpbGUoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjbGllbnRBdXRoU2VydmljZS5nZXRDbGllbnRQcm9maWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tDbGllbnRVc2VyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHByb2ZpbGUgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3Qgbm90Rm91bmRFcnJvciA9IG5ldyBFcnJvcignQ2xpZW50IHByb2ZpbGUgbm90IGZvdW5kJyk7XG4gICAgICBqZXN0LnNweU9uKGNsaWVudEF1dGhTZXJ2aWNlLCAnZ2V0Q2xpZW50UHJvZmlsZScpLm1vY2tSZWplY3RlZFZhbHVlKG5vdEZvdW5kRXJyb3IpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLmdldFByb2ZpbGUoVEVTVF9VU0VSX0lEUy5DTElFTlQpKS5yZWplY3RzLnRvVGhyb3cobm90Rm91bmRFcnJvcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRGaXJzdFNpZ25JblN0YXR1cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBmaXJzdCBzaWduLWluIHN0YXR1cyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBqZXN0LnNweU9uKGNsaWVudEF1dGhTZXJ2aWNlLCAnZ2V0Rmlyc3RTaWduSW5TdGF0dXMnKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRmlyc3RTaWduSW5TdGF0dXMpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Rmlyc3RTaWduSW5TdGF0dXMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjbGllbnRBdXRoU2VydmljZS5nZXRGaXJzdFNpZ25JblN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrRmlyc3RTaWduSW5TdGF0dXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmV0dXJuaW5nIHVzZXIgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcmV0dXJuaW5nVXNlclN0YXR1cyA9IHtcbiAgICAgICAgaXNGaXJzdFNpZ25JbjogZmFsc2UsXG4gICAgICAgIGhhc1NlZW5SZWNvbW1lbmRhdGlvbnM6IHRydWUsXG4gICAgICAgIHByb2ZpbGVDb21wbGV0ZWQ6IHRydWUsXG4gICAgICAgIGFzc2Vzc21lbnRDb21wbGV0ZWQ6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBqZXN0LnNweU9uKGNsaWVudEF1dGhTZXJ2aWNlLCAnZ2V0Rmlyc3RTaWduSW5TdGF0dXMnKS5tb2NrUmVzb2x2ZWRWYWx1ZShyZXR1cm5pbmdVc2VyU3RhdHVzKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldEZpcnN0U2lnbkluU3RhdHVzKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHJldHVybmluZ1VzZXJTdGF0dXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKTtcbiAgICAgIGplc3Quc3B5T24oY2xpZW50QXV0aFNlcnZpY2UsICdnZXRGaXJzdFNpZ25JblN0YXR1cycpLm1vY2tSZWplY3RlZFZhbHVlKGVycm9yKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoY29udHJvbGxlci5nZXRGaXJzdFNpZ25JblN0YXR1cyhURVNUX1VTRVJfSURTLkNMSUVOVCkpLnJlamVjdHMudG9UaHJvdyhlcnJvcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdtYXJrUmVjb21tZW5kYXRpb25zU2VlbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG1hcmsgcmVjb21tZW5kYXRpb25zIGFzIHNlZW4gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgamVzdC5zcHlPbihjbGllbnRBdXRoU2VydmljZSwgJ21hcmtSZWNvbW1lbmRhdGlvbnNTZWVuJykubW9ja1Jlc29sdmVkVmFsdWUobW9ja01hcmtSZWNvbW1lbmRhdGlvbnNSZXN1bHQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIubWFya1JlY29tbWVuZGF0aW9uc1NlZW4oVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjbGllbnRBdXRoU2VydmljZS5tYXJrUmVjb21tZW5kYXRpb25zU2VlbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrTWFya1JlY29tbWVuZGF0aW9uc1Jlc3VsdCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpO1xuICAgICAgamVzdC5zcHlPbihjbGllbnRBdXRoU2VydmljZSwgJ21hcmtSZWNvbW1lbmRhdGlvbnNTZWVuJykubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLm1hcmtSZWNvbW1lbmRhdGlvbnNTZWVuKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKSkucmVqZWN0cy50b1Rocm93KGVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlY3VyaXR5IFRlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgaW5wdXQgZGF0YSB0aHJvdWdoIFpvZFZhbGlkYXRpb25QaXBlJywgKCkgPT4ge1xuICAgICAgLy8gVGhpcyB0ZXN0cyB0aGF0IHRoZSBjb250cm9sbGVyIHVzZXMgcHJvcGVyIHZhbGlkYXRpb25cbiAgICAgIGNvbnN0IHZhbGlkYXRpb25QaXBlID0gbmV3IFpvZFZhbGlkYXRpb25QaXBlKHt9IGFzIGFueSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvblBpcGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFwcGx5IHJhdGUgbGltaXRpbmcgdGhyb3VnaCBUaHJvdHRsZXJHdWFyZCcsICgpID0+IHtcbiAgICAgIC8vIFRlc3QgdGhhdCB0aHJvdHRsaW5nIGlzIGNvbmZpZ3VyZWRcbiAgICAgIGNvbnN0IHJlZ2lzdGVyTWV0YWRhdGEgPSBSZWZsZWN0LmdldE1ldGFkYXRhKCdfX3Rocm90dGxlcl9vcHRpb25zX18nLCBjb250cm9sbGVyLnJlZ2lzdGVyKTtcbiAgICAgIGNvbnN0IGxvZ2luTWV0YWRhdGEgPSBSZWZsZWN0LmdldE1ldGFkYXRhKCdfX3Rocm90dGxlcl9vcHRpb25zX18nLCBjb250cm9sbGVyLmxvZ2luKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlZ2lzdGVyTWV0YWRhdGEpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobG9naW5NZXRhZGF0YSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSBhdXRoZW50aWNhdGlvbiBmb3IgcHJvdGVjdGVkIGVuZHBvaW50cycsICgpID0+IHtcbiAgICAgIC8vIFRlc3QgdGhhdCBwcm90ZWN0ZWQgZW5kcG9pbnRzIGhhdmUgSnd0QXV0aEd1YXJkXG4gICAgICBjb25zdCBwcm90ZWN0ZWRNZXRob2RzID0gWydnZXRQcm9maWxlJywgJ2dldEZpcnN0U2lnbkluU3RhdHVzJywgJ21hcmtSZWNvbW1lbmRhdGlvbnNTZWVuJ107XG4gICAgICBcbiAgICAgIHByb3RlY3RlZE1ldGhvZHMuZm9yRWFjaChtZXRob2QgPT4ge1xuICAgICAgICBjb25zdCBndWFyZHMgPSBSZWZsZWN0LmdldE1ldGFkYXRhKCdfX2d1YXJkc19fJywgY29udHJvbGxlclttZXRob2QgYXMga2V5b2YgQ2xpZW50QXV0aENvbnRyb2xsZXJdKTtcbiAgICAgICAgZXhwZWN0KGd1YXJkcykudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBwdWJsaWMgYWNjZXNzIHRvIHJlZ2lzdGVyIGFuZCBsb2dpbiBlbmRwb2ludHMnLCAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHRoYXQgcHVibGljIGVuZHBvaW50cyBhcmUgbWFya2VkIGFzIHB1YmxpY1xuICAgICAgY29uc3QgcHVibGljTWV0aG9kcyA9IFsncmVnaXN0ZXInLCAnbG9naW4nXTtcbiAgICAgIFxuICAgICAgcHVibGljTWV0aG9kcy5mb3JFYWNoKG1ldGhvZCA9PiB7XG4gICAgICAgIGNvbnN0IHB1YmxpY01ldGFkYXRhID0gUmVmbGVjdC5nZXRNZXRhZGF0YSgnaXNQdWJsaWMnLCBjb250cm9sbGVyW21ldGhvZCBhcyBrZXlvZiBDbGllbnRBdXRoQ29udHJvbGxlcl0pO1xuICAgICAgICBleHBlY3QocHVibGljTWV0YWRhdGEpLnRvQmVUcnV0aHkoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUm9sZS1iYXNlZCBBY2Nlc3MgQ29udHJvbCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHRlc3Qgcm9sZS1iYXNlZCBhY2Nlc3MgZm9yIHByb3RlY3RlZCBlbmRwb2ludHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHRoYXQgY2xpZW50IHJvbGUgY2FuIGFjY2VzcyBjbGllbnQtc3BlY2lmaWMgZW5kcG9pbnRzXG4gICAgICBhd2FpdCBSb2xlQmFzZWRUZXN0VXRpbHMudGVzdFdpdGhSb2xlcyhcbiAgICAgICAgYXN5bmMgKHVzZXJJZDogc3RyaW5nLCByb2xlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAvLyBNb2NrIHRoZSBhdXRoIGd1YXJkIHRvIHJldHVybiB0aGUgc3BlY2lmaWMgcm9sZVxuICAgICAgICAgIG1vY2tKd3RBdXRoR3VhcmQuY2FuQWN0aXZhdGUubW9ja1JldHVyblZhbHVlKHJvbGUgPT09ICdjbGllbnQnKTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgY29udHJvbGxlci5nZXRQcm9maWxlKHVzZXJJZCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGNsaWVudDogdHJ1ZSxcbiAgICAgICAgICB0aGVyYXBpc3Q6IGZhbHNlLFxuICAgICAgICAgIGFkbWluOiBmYWxzZSxcbiAgICAgICAgICBtb2RlcmF0b3I6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgY2xpZW50LXNwZWNpZmljIGZ1bmN0aW9uYWxpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHRoYXQgY2xpZW50LXNwZWNpZmljIGVuZHBvaW50cyB3b3JrIGZvciBjbGllbnRzXG4gICAgICBjb25zdCBjbGllbnRDb250ZXh0ID0gTW9ja0J1aWxkZXIuY3JlYXRlQXV0aENvbnRleHQoJ2NsaWVudCcpO1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKGNsaWVudEF1dGhTZXJ2aWNlLCAnZ2V0Rmlyc3RTaWduSW5TdGF0dXMnKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRmlyc3RTaWduSW5TdGF0dXMpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldEZpcnN0U2lnbkluU3RhdHVzKGNsaWVudENvbnRleHQudXNlcklkKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNGaXJzdFNpZ25JbikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5ldHdvcmsgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBuZXR3b3JrRXJyb3IgPSBuZXcgRXJyb3IoJ05ldHdvcmsgdGltZW91dCcpO1xuICAgICAgamVzdC5zcHlPbihjbGllbnRBdXRoU2VydmljZSwgJ2dldENsaWVudFByb2ZpbGUnKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXR3b3JrRXJyb3IpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLmdldFByb2ZpbGUoVEVTVF9VU0VSX0lEUy5DTElFTlQpKS5yZWplY3RzLnRvVGhyb3cobmV0d29ya0Vycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHZhbGlkYXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCB0aGF0IGludmFsaWQgZGF0YSB3b3VsZCBiZSBjYXVnaHQgYnkgdGhlIHZhbGlkYXRpb24gcGlwZVxuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7XG4gICAgICAgIGVtYWlsOiAnaW52YWxpZC1lbWFpbCcsXG4gICAgICAgIHBhc3N3b3JkOiAnMTIzJywgLy8gVG9vIHNob3J0XG4gICAgICAgIGZpcnN0TmFtZTogJycsXG4gICAgICAgIGxhc3ROYW1lOiAnJyxcbiAgICAgIH07XG5cbiAgICAgIC8vIEluIGEgcmVhbCBzY2VuYXJpbywgdGhpcyB3b3VsZCB0aHJvdyBhIHZhbGlkYXRpb24gZXJyb3JcbiAgICAgIC8vIFRoZSBwaXBlIHdvdWxkIGNhdGNoIHRoaXMgYmVmb3JlIGl0IHJlYWNoZXMgdGhlIGNvbnRyb2xsZXJcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIC8vIFRoaXMgd291bGQgYmUgaGFuZGxlZCBieSBab2RWYWxpZGF0aW9uUGlwZVxuICAgICAgICAvLyBhbmQgd291bGQgdGhyb3cgYSBCYWRSZXF1ZXN0RXhjZXB0aW9uXG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcGxldGUgY2xpZW50IHJlZ2lzdHJhdGlvbiB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbkR0byA9IHtcbiAgICAgICAgZW1haWw6ICdpbnRlZ3JhdGlvbkBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAnU2VjdXJlUGFzczEyMyEnLFxuICAgICAgICBmaXJzdE5hbWU6ICdJbnRlZ3JhdGlvbicsXG4gICAgICAgIGxhc3ROYW1lOiAnVGVzdCcsXG4gICAgICAgIGRhdGVPZkJpcnRoOiBuZXcgRGF0ZSgnMTk5MC0wMS0wMScpLFxuICAgICAgICBwaG9uZU51bWJlcjogJysxMjM0NTY3ODkwJyxcbiAgICAgIH07XG5cbiAgICAgIGplc3Quc3B5T24oY2xpZW50QXV0aFNlcnZpY2UsICdyZWdpc3RlckNsaWVudCcpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZWdpc3RyYXRpb25SZXN1bHQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIucmVnaXN0ZXIocmVnaXN0cmF0aW9uRHRvKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC51c2VyLmVtYWlsKS50b0JlKG1vY2tDbGllbnRVc2VyLmVtYWlsKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuYWNjZXNzVG9rZW4pLnRvQmUobW9ja1Rva2Vucy5hY2Nlc3NUb2tlbik7XG4gICAgICBleHBlY3QocmVzdWx0LnJlZnJlc2hUb2tlbikudG9CZShtb2NrVG9rZW5zLnJlZnJlc2hUb2tlbik7XG4gICAgICBleHBlY3QocmVzdWx0LmV4cGlyZXNJbikudG9CZShtb2NrVG9rZW5zLmV4cGlyZXNJbik7XG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQmUobW9ja1JlZ2lzdHJhdGlvblJlc3VsdC5tZXNzYWdlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlIGNsaWVudCBsb2dpbiB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGxvZ2luRHRvID0ge1xuICAgICAgICBlbWFpbDogVEVTVF9FTUFJTFMuQ0xJRU5ULFxuICAgICAgICBwYXNzd29yZDogJ1NlY3VyZVBhc3MxMjMhJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tSZXF1ZXN0ID0ge1xuICAgICAgICBpcDogJzE5Mi4xNjguMS4xJyxcbiAgICAgICAgZ2V0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdUZXN0IFVzZXIgQWdlbnQnKSxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBqZXN0LnNweU9uKGNsaWVudEF1dGhTZXJ2aWNlLCAnbG9naW5DbGllbnQnKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrTG9naW5SZXN1bHQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIubG9naW4obG9naW5EdG8sIG1vY2tSZXF1ZXN0KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC51c2VyLmVtYWlsKS50b0JlKG1vY2tDbGllbnRVc2VyLmVtYWlsKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuYWNjZXNzVG9rZW4pLnRvQmUobW9ja1Rva2Vucy5hY2Nlc3NUb2tlbik7XG4gICAgICBleHBlY3QocmVzdWx0LnJlZnJlc2hUb2tlbikudG9CZShtb2NrVG9rZW5zLnJlZnJlc2hUb2tlbik7XG4gICAgICBleHBlY3QocmVzdWx0LmV4cGlyZXNJbikudG9CZShtb2NrVG9rZW5zLmV4cGlyZXNJbik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZSBvbmJvYXJkaW5nIHN0YXR1cyB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24oY2xpZW50QXV0aFNlcnZpY2UsICdnZXRGaXJzdFNpZ25JblN0YXR1cycpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tGaXJzdFNpZ25JblN0YXR1cyk7XG4gICAgICBqZXN0LnNweU9uKGNsaWVudEF1dGhTZXJ2aWNlLCAnbWFya1JlY29tbWVuZGF0aW9uc1NlZW4nKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrTWFya1JlY29tbWVuZGF0aW9uc1Jlc3VsdCk7XG5cbiAgICAgIC8vIEFjdCAtIENoZWNrIGluaXRpYWwgc3RhdHVzXG4gICAgICBjb25zdCBpbml0aWFsU3RhdHVzID0gYXdhaXQgY29udHJvbGxlci5nZXRGaXJzdFNpZ25JblN0YXR1cyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICBcbiAgICAgIC8vIEFjdCAtIE1hcmsgcmVjb21tZW5kYXRpb25zIGFzIHNlZW5cbiAgICAgIGNvbnN0IG1hcmtSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLm1hcmtSZWNvbW1lbmRhdGlvbnNTZWVuKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QoaW5pdGlhbFN0YXR1cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChpbml0aWFsU3RhdHVzLmlzRmlyc3RTaWduSW4pLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaW5pdGlhbFN0YXR1cy5oYXNTZWVuUmVjb21tZW5kYXRpb25zKS50b0JlKGZhbHNlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1hcmtSZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobWFya1Jlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRGF0YSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcmVnaXN0cmF0aW9uIGRhdGEgc3RydWN0dXJlJywgKCkgPT4ge1xuICAgICAgLy8gVGVzdCB0aGF0IHdlJ3JlIHVzaW5nIHRoZSBjb3JyZWN0IERUTyBzdHJ1Y3R1cmVcbiAgICAgIGNvbnN0IHZhbGlkUmVnaXN0cmF0aW9uRGF0YSA9IHtcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdTZWN1cmVQYXNzMTIzIScsXG4gICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICBkYXRlT2ZCaXJ0aDogbmV3IERhdGUoJzE5OTAtMDEtMDEnKSxcbiAgICAgICAgcGhvbmVOdW1iZXI6ICcrMTIzNDU2Nzg5MCcsXG4gICAgICB9O1xuXG4gICAgICAvLyBWZXJpZnkgYWxsIHJlcXVpcmVkIGZpZWxkcyBhcmUgcHJlc2VudFxuICAgICAgZXhwZWN0KHZhbGlkUmVnaXN0cmF0aW9uRGF0YS5lbWFpbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh2YWxpZFJlZ2lzdHJhdGlvbkRhdGEucGFzc3dvcmQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodmFsaWRSZWdpc3RyYXRpb25EYXRhLmZpcnN0TmFtZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh2YWxpZFJlZ2lzdHJhdGlvbkRhdGEubGFzdE5hbWUpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGxvZ2luIGRhdGEgc3RydWN0dXJlJywgKCkgPT4ge1xuICAgICAgLy8gVGVzdCB0aGF0IHdlJ3JlIHVzaW5nIHRoZSBjb3JyZWN0IERUTyBzdHJ1Y3R1cmVcbiAgICAgIGNvbnN0IHZhbGlkTG9naW5EYXRhID0ge1xuICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICBwYXNzd29yZDogJ1NlY3VyZVBhc3MxMjMhJyxcbiAgICAgIH07XG5cbiAgICAgIC8vIFZlcmlmeSBhbGwgcmVxdWlyZWQgZmllbGRzIGFyZSBwcmVzZW50XG4gICAgICBleHBlY3QodmFsaWRMb2dpbkRhdGEuZW1haWwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodmFsaWRMb2dpbkRhdGEucGFzc3dvcmQpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZXNwb25zZSBGb3JtYXQgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb3JyZWN0bHkgZm9ybWF0dGVkIHJlZ2lzdHJhdGlvbiByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlZ2lzdGVyRHRvID0ge1xuICAgICAgICBlbWFpbDogJ2Zvcm1hdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAnU2VjdXJlUGFzczEyMyEnLFxuICAgICAgICBmaXJzdE5hbWU6ICdGb3JtYXQnLFxuICAgICAgICBsYXN0TmFtZTogJ1Rlc3QnLFxuICAgICAgfTtcblxuICAgICAgamVzdC5zcHlPbihjbGllbnRBdXRoU2VydmljZSwgJ3JlZ2lzdGVyQ2xpZW50JykubW9ja1Jlc29sdmVkVmFsdWUobW9ja1JlZ2lzdHJhdGlvblJlc3VsdCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5yZWdpc3RlcihyZWdpc3RlckR0byk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3VzZXInKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdhY2Nlc3NUb2tlbicpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3JlZnJlc2hUb2tlbicpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2V4cGlyZXNJbicpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ21lc3NhZ2UnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC51c2VyKS50b0hhdmVQcm9wZXJ0eSgnaWQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudXNlcikudG9IYXZlUHJvcGVydHkoJ2VtYWlsJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnVzZXIpLnRvSGF2ZVByb3BlcnR5KCdmaXJzdE5hbWUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudXNlcikudG9IYXZlUHJvcGVydHkoJ2xhc3ROYW1lJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnVzZXIpLnRvSGF2ZVByb3BlcnR5KCdyb2xlJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnVzZXIpLnRvSGF2ZVByb3BlcnR5KCdlbWFpbFZlcmlmaWVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb3JyZWN0bHkgZm9ybWF0dGVkIGxvZ2luIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbG9naW5EdG8gPSB7XG4gICAgICAgIGVtYWlsOiBURVNUX0VNQUlMUy5DTElFTlQsXG4gICAgICAgIHBhc3N3b3JkOiAnU2VjdXJlUGFzczEyMyEnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1JlcXVlc3QgPSB7XG4gICAgICAgIGlwOiAnMTkyLjE2OC4xLjEnLFxuICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ1Rlc3QgVXNlciBBZ2VudCcpLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGplc3Quc3B5T24oY2xpZW50QXV0aFNlcnZpY2UsICdsb2dpbkNsaWVudCcpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tMb2dpblJlc3VsdCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5sb2dpbihsb2dpbkR0bywgbW9ja1JlcXVlc3QpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCd1c2VyJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnYWNjZXNzVG9rZW4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdyZWZyZXNoVG9rZW4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdleHBpcmVzSW4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLm5vdC50b0hhdmVQcm9wZXJ0eSgnbWVzc2FnZScpOyAvLyBMb2dpbiBkb2Vzbid0IGluY2x1ZGUgbWVzc2FnZVxuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==