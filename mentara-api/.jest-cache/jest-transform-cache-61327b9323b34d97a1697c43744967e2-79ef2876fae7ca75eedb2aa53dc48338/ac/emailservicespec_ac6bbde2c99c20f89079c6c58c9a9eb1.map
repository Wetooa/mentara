{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/services/email.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/services/email.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { EmailService, EmailNotificationData } from './email.service';\n\ndescribe('EmailService', () => {\n  let service: EmailService;\n\n  // Mock console methods to avoid cluttering test output\n  let consoleSpy: jest.SpyInstance;\n  let consoleErrorSpy: jest.SpyInstance;\n\n  beforeEach(async () => {\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [EmailService],\n    }).compile();\n\n    service = module.get<EmailService>(EmailService);\n\n    // Mock console methods\n    consoleSpy = jest.spyOn(console, 'log').mockImplementation();\n    consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation();\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n    consoleSpy.mockRestore();\n    consoleErrorSpy.mockRestore();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('sendTherapistApplicationNotification', () => {\n    const baseEmailData: EmailNotificationData = {\n      to: 'therapist@example.com',\n      name: 'Dr. John Doe',\n      status: 'approved',\n    };\n\n    it('should send approved notification successfully', async () => {\n      const emailData: EmailNotificationData = {\n        ...baseEmailData,\n        status: 'approved',\n        credentials: {\n          email: 'therapist@example.com',\n          password: 'temp123456',\n        },\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(emailData);\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Email notification queued for therapist@example.com',\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith('Email notification requested:', {\n        recipient: 'therapist@example.com',\n        status: 'approved',\n        hasCredentials: true,\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          subject: 'Mentara Therapist Application Approved',\n          greeting: 'Dear Dr. John Doe,',\n          body: expect.stringContaining(\n            'Congratulations! Your therapist application has been approved.',\n          ),\n        }),\n      );\n    });\n\n    it('should send rejected notification successfully', async () => {\n      const emailData: EmailNotificationData = {\n        ...baseEmailData,\n        status: 'rejected',\n        adminNotes: 'Insufficient experience in required specializations.',\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(emailData);\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Email notification queued for therapist@example.com',\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith('Email notification requested:', {\n        recipient: 'therapist@example.com',\n        status: 'rejected',\n        hasCredentials: false,\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          subject: 'Mentara Therapist Application Update',\n          greeting: 'Dear Dr. John Doe,',\n          body: expect.stringContaining(\n            'we have decided not to approve your application',\n          ),\n        }),\n      );\n    });\n\n    it('should handle approved notification without credentials', async () => {\n      const emailData: EmailNotificationData = {\n        ...baseEmailData,\n        status: 'approved',\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(emailData);\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Email notification queued for therapist@example.com',\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith('Email notification requested:', {\n        recipient: 'therapist@example.com',\n        status: 'approved',\n        hasCredentials: false,\n      });\n    });\n\n    it('should handle approved notification with admin notes', async () => {\n      const emailData: EmailNotificationData = {\n        ...baseEmailData,\n        status: 'approved',\n        adminNotes: 'Welcome to our premium therapist network!',\n        credentials: {\n          email: 'therapist@example.com',\n          password: 'temp123456',\n        },\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(emailData);\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          body: expect.stringContaining(\n            'Welcome to our premium therapist network!',\n          ),\n        }),\n      );\n    });\n\n    it('should handle rejected notification without admin notes', async () => {\n      const emailData: EmailNotificationData = {\n        ...baseEmailData,\n        status: 'rejected',\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(emailData);\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          body: expect.not.stringContaining('Feedback from our review team:'),\n        }),\n      );\n    });\n\n    it('should handle errors gracefully', async () => {\n      // Mock generateEmailContent to throw an error\n      const originalGenerateEmailContent = service['generateEmailContent'];\n      service['generateEmailContent'] = jest.fn().mockImplementation(() => {\n        throw new Error('Email template generation failed');\n      });\n\n      const result =\n        await service.sendTherapistApplicationNotification(baseEmailData);\n\n      expect(result).toEqual({\n        success: false,\n        message: 'Email template generation failed',\n      });\n\n      expect(consoleErrorSpy).toHaveBeenCalledWith(\n        'Failed to send email notification:',\n        expect.any(Error),\n      );\n\n      // Restore original method\n      service['generateEmailContent'] = originalGenerateEmailContent;\n    });\n\n    it('should handle non-Error exceptions', async () => {\n      // Mock generateEmailContent to throw a non-Error\n      const originalGenerateEmailContent = service['generateEmailContent'];\n      service['generateEmailContent'] = jest.fn().mockImplementation(() => {\n        throw new Error('Non-error exception');\n      });\n\n      const result =\n        await service.sendTherapistApplicationNotification(baseEmailData);\n\n      expect(result).toEqual({\n        success: false,\n        message: 'Non-error exception',\n      });\n\n      // Restore original method\n      service['generateEmailContent'] = originalGenerateEmailContent;\n    });\n\n    it('should handle empty email data', async () => {\n      const emptyEmailData: EmailNotificationData = {\n        to: '',\n        name: '',\n        status: 'approved',\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(emptyEmailData);\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledWith('Email notification requested:', {\n        recipient: '',\n        status: 'approved',\n        hasCredentials: false,\n      });\n    });\n\n    it('should handle special characters in name and email', async () => {\n      const specialCharEmailData: EmailNotificationData = {\n        to: 'therapist+test@example.com',\n        name: 'Dr. José María García-López',\n        status: 'approved',\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(\n          specialCharEmailData,\n        );\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          greeting: 'Dear Dr. José María García-López,',\n        }),\n      );\n    });\n\n    it('should handle very long admin notes', async () => {\n      const longNotes = 'A'.repeat(5000);\n      const emailData: EmailNotificationData = {\n        ...baseEmailData,\n        status: 'rejected',\n        adminNotes: longNotes,\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(emailData);\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          body: expect.stringContaining(longNotes),\n        }),\n      );\n    });\n\n    it('should handle null and undefined values gracefully', async () => {\n      const emailDataWithNulls: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: 'Dr. John Doe',\n        status: 'approved' as const,\n        adminNotes: undefined,\n        credentials: undefined,\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(emailDataWithNulls);\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle both approved and rejected status in same session', async () => {\n      const approvedData: EmailNotificationData = {\n        ...baseEmailData,\n        status: 'approved',\n      };\n\n      const rejectedData: EmailNotificationData = {\n        ...baseEmailData,\n        status: 'rejected',\n      };\n\n      const approvedResult =\n        await service.sendTherapistApplicationNotification(approvedData);\n      const rejectedResult =\n        await service.sendTherapistApplicationNotification(rejectedData);\n\n      expect(approvedResult.success).toBe(true);\n      expect(rejectedResult.success).toBe(true);\n\n      expect(consoleSpy).toHaveBeenCalledTimes(4); // 2 calls for each notification\n    });\n  });\n\n  describe('generateEmailContent', () => {\n    it('should generate approved email content with credentials', () => {\n      const emailData: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: 'Dr. Sarah Wilson',\n        status: 'approved',\n        credentials: {\n          email: 'therapist@example.com',\n          password: 'temp987654',\n        },\n      };\n\n      const content = service['generateEmailContent'](emailData);\n\n      expect(content).toEqual({\n        subject: 'Mentara Therapist Application Approved',\n        greeting: 'Dear Dr. Sarah Wilson,',\n        companySignature:\n          'Best regards,\\nThe Mentara Team\\nsupport@mentara.com',\n        body: expect.stringContaining(\n          'Congratulations! Your therapist application has been approved.',\n        ),\n      });\n\n      expect(content.body).toContain('Your account credentials:');\n      expect(content.body).toContain('Email: therapist@example.com');\n      expect(content.body).toContain('Temporary Password: temp987654');\n      expect(content.body).toContain(\n        'Please log in and change your password immediately.',\n      );\n      expect(content.body).toContain('https://mentara.com/therapist');\n      expect(content.body).toContain(\n        'Welcome to the Mentara therapist network!',\n      );\n    });\n\n    it('should generate approved email content without credentials', () => {\n      const emailData: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: 'Dr. Michael Johnson',\n        status: 'approved',\n      };\n\n      const content = service['generateEmailContent'](emailData);\n\n      expect(content.body).not.toContain('Your account credentials:');\n      expect(content.body).not.toContain('Temporary Password:');\n      expect(content.body).toContain(\n        'Congratulations! Your therapist application has been approved.',\n      );\n      expect(content.body).toContain(\n        'Welcome to the Mentara therapist network!',\n      );\n    });\n\n    it('should generate approved email content with admin notes', () => {\n      const emailData: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: 'Dr. Emma Brown',\n        status: 'approved',\n        adminNotes: 'We are particularly excited about your expertise in CBT.',\n      };\n\n      const content = service['generateEmailContent'](emailData);\n\n      expect(content.body).toContain('Additional notes from our team:');\n      expect(content.body).toContain(\n        'We are particularly excited about your expertise in CBT.',\n      );\n    });\n\n    it('should generate rejected email content with admin notes', () => {\n      const emailData: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: 'Dr. Alex Taylor',\n        status: 'rejected',\n        adminNotes:\n          'Please obtain additional certification in trauma therapy and reapply.',\n      };\n\n      const content = service['generateEmailContent'](emailData);\n\n      expect(content).toEqual({\n        subject: 'Mentara Therapist Application Update',\n        greeting: 'Dear Dr. Alex Taylor,',\n        companySignature:\n          'Best regards,\\nThe Mentara Team\\nsupport@mentara.com',\n        body: expect.stringContaining(\n          'we have decided not to approve your application at this time',\n        ),\n      });\n\n      expect(content.body).toContain('Feedback from our review team:');\n      expect(content.body).toContain(\n        'Please obtain additional certification in trauma therapy and reapply.',\n      );\n      expect(content.body).toContain(\n        'We encourage you to address any concerns mentioned above',\n      );\n      expect(content.body).toContain(\n        \"If you have any questions, please don't hesitate to contact our support team.\",\n      );\n    });\n\n    it('should generate rejected email content without admin notes', () => {\n      const emailData: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: 'Dr. Chris Lee',\n        status: 'rejected',\n      };\n\n      const content = service['generateEmailContent'](emailData);\n\n      expect(content.body).not.toContain('Feedback from our review team:');\n      expect(content.body).toContain(\n        'Thank you for your interest in joining the Mentara therapist network.',\n      );\n      expect(content.body).toContain(\n        'we have decided not to approve your application at this time',\n      );\n      expect(content.body).toContain(\n        'We encourage you to address any concerns mentioned above',\n      );\n    });\n\n    it('should handle empty name gracefully', () => {\n      const emailData: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: '',\n        status: 'approved',\n      };\n\n      const content = service['generateEmailContent'](emailData);\n\n      expect(content.greeting).toBe('Dear ,');\n      expect(content.body).toContain(\n        'Congratulations! Your therapist application has been approved.',\n      );\n    });\n\n    it('should handle whitespace-only name', () => {\n      const emailData: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: '   ',\n        status: 'approved',\n      };\n\n      const content = service['generateEmailContent'](emailData);\n\n      expect(content.greeting).toBe('Dear    ,');\n    });\n\n    it('should handle multiline admin notes', () => {\n      const emailData: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: 'Dr. Jordan Smith',\n        status: 'rejected',\n        adminNotes: 'Line 1\\nLine 2\\nLine 3',\n      };\n\n      const content = service['generateEmailContent'](emailData);\n\n      expect(content.body).toContain('Line 1\\nLine 2\\nLine 3');\n    });\n\n    it('should handle credentials with special characters', () => {\n      const emailData: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: 'Dr. Riley Parker',\n        status: 'approved',\n        credentials: {\n          email: 'therapist+test@example.com',\n          password: 'P@ssw0rd!2024',\n        },\n      };\n\n      const content = service['generateEmailContent'](emailData);\n\n      expect(content.body).toContain('Email: therapist+test@example.com');\n      expect(content.body).toContain('Temporary Password: P@ssw0rd!2024');\n    });\n\n    it('should maintain consistent email structure', () => {\n      const approvedData: EmailNotificationData = {\n        to: 'therapist1@example.com',\n        name: 'Dr. One',\n        status: 'approved',\n      };\n\n      const rejectedData: EmailNotificationData = {\n        to: 'therapist2@example.com',\n        name: 'Dr. Two',\n        status: 'rejected',\n      };\n\n      const approvedContent = service['generateEmailContent'](approvedData);\n      const rejectedContent = service['generateEmailContent'](rejectedData);\n\n      // Both should have consistent structure\n      expect(approvedContent).toHaveProperty('subject');\n      expect(approvedContent).toHaveProperty('greeting');\n      expect(approvedContent).toHaveProperty('body');\n      expect(approvedContent).toHaveProperty('companySignature');\n\n      expect(rejectedContent).toHaveProperty('subject');\n      expect(rejectedContent).toHaveProperty('greeting');\n      expect(rejectedContent).toHaveProperty('body');\n      expect(rejectedContent).toHaveProperty('companySignature');\n\n      // Company signature should be the same\n      expect(approvedContent.companySignature).toBe(\n        rejectedContent.companySignature,\n      );\n    });\n  });\n\n  describe('sendTherapistWelcomeEmail', () => {\n    it('should send welcome email successfully', async () => {\n      const credentials = {\n        email: 'newtherapist@example.com',\n        password: 'welcome123',\n      };\n\n      const result = await service.sendTherapistWelcomeEmail(\n        'newtherapist@example.com',\n        'Dr. Welcome User',\n        credentials,\n      );\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Email notification queued for newtherapist@example.com',\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith('Email notification requested:', {\n        recipient: 'newtherapist@example.com',\n        status: 'approved',\n        hasCredentials: true,\n      });\n    });\n\n    it('should handle empty credentials', async () => {\n      const credentials = {\n        email: '',\n        password: '',\n      };\n\n      const result = await service.sendTherapistWelcomeEmail(\n        'therapist@example.com',\n        'Dr. Test',\n        credentials,\n      );\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle special characters in therapist name', async () => {\n      const credentials = {\n        email: 'therapist@example.com',\n        password: 'temp123',\n      };\n\n      const result = await service.sendTherapistWelcomeEmail(\n        'therapist@example.com',\n        \"Dr. François O'Connor-Smith\",\n        credentials,\n      );\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          greeting: \"Dear Dr. François O'Connor-Smith,\",\n        }),\n      );\n    });\n\n    it('should handle very long email addresses', async () => {\n      const longEmail =\n        'very.long.therapist.email.address.that.is.extremely.long@example.com';\n      const credentials = {\n        email: longEmail,\n        password: 'temp123',\n      };\n\n      const result = await service.sendTherapistWelcomeEmail(\n        longEmail,\n        'Dr. Long Email',\n        credentials,\n      );\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle invalid email format gracefully', async () => {\n      const invalidEmail = 'not-an-email';\n      const credentials = {\n        email: invalidEmail,\n        password: 'temp123',\n      };\n\n      const result = await service.sendTherapistWelcomeEmail(\n        invalidEmail,\n        'Dr. Invalid Email',\n        credentials,\n      );\n\n      expect(result.success).toBe(true);\n    });\n  });\n\n  describe('sendTherapistRejectionEmail', () => {\n    it('should send rejection email with reason', async () => {\n      const reason = 'Insufficient experience in required therapy modalities.';\n\n      const result = await service.sendTherapistRejectionEmail(\n        'rejected@example.com',\n        'Dr. Rejected User',\n        reason,\n      );\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Email notification queued for rejected@example.com',\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith('Email notification requested:', {\n        recipient: 'rejected@example.com',\n        status: 'rejected',\n        hasCredentials: false,\n      });\n    });\n\n    it('should send rejection email without reason', async () => {\n      const result = await service.sendTherapistRejectionEmail(\n        'rejected@example.com',\n        'Dr. Rejected User',\n      );\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          body: expect.not.stringContaining('Feedback from our review team:'),\n        }),\n      );\n    });\n\n    it('should handle empty reason', async () => {\n      const result = await service.sendTherapistRejectionEmail(\n        'rejected@example.com',\n        'Dr. Rejected User',\n        '',\n      );\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle undefined reason', async () => {\n      const result = await service.sendTherapistRejectionEmail(\n        'rejected@example.com',\n        'Dr. Rejected User',\n        undefined,\n      );\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle very long rejection reason', async () => {\n      const longReason =\n        'Unfortunately, '.repeat(100) +\n        'we cannot approve your application at this time.';\n\n      const result = await service.sendTherapistRejectionEmail(\n        'rejected@example.com',\n        'Dr. Long Reason',\n        longReason,\n      );\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          body: expect.stringContaining(longReason),\n        }),\n      );\n    });\n\n    it('should handle rejection reason with HTML characters', async () => {\n      const reasonWithHtml =\n        'Missing certifications: <strong>CBT</strong> & <em>EMDR</em>';\n\n      const result = await service.sendTherapistRejectionEmail(\n        'rejected@example.com',\n        'Dr. HTML Test',\n        reasonWithHtml,\n      );\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          body: expect.stringContaining(reasonWithHtml),\n        }),\n      );\n    });\n\n    it('should handle rejection reason with newlines and special characters', async () => {\n      const reasonWithSpecialChars =\n        'Reasons:\\n1. License not verified\\n2. Missing references\\n3. Application incomplete';\n\n      const result = await service.sendTherapistRejectionEmail(\n        'rejected@example.com',\n        'Dr. Special Chars',\n        reasonWithSpecialChars,\n      );\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Generated email content:',\n        expect.objectContaining({\n          body: expect.stringContaining(reasonWithSpecialChars),\n        }),\n      );\n    });\n  });\n\n  describe('testConfiguration', () => {\n    it('should pass configuration test', async () => {\n      const result = await service.testConfiguration();\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Email service configuration test passed',\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Testing email service configuration...',\n      );\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Test email content generated successfully:',\n        expect.objectContaining({\n          subject: 'Mentara Therapist Application Approved',\n          greeting: 'Dear Test Therapist,',\n          body: expect.stringContaining(\n            'Congratulations! Your therapist application has been approved.',\n          ),\n        }),\n      );\n    });\n\n    it('should handle test failure gracefully', async () => {\n      // Mock generateEmailContent to throw an error during test\n      const originalGenerateEmailContent = service['generateEmailContent'];\n      service['generateEmailContent'] = jest.fn().mockImplementation(() => {\n        throw new Error('Test configuration failed');\n      });\n\n      const result = await service.testConfiguration();\n\n      expect(result).toEqual({\n        success: false,\n        message: 'Test configuration failed',\n      });\n\n      expect(consoleErrorSpy).toHaveBeenCalledWith(\n        'Email service test failed:',\n        expect.any(Error),\n      );\n\n      // Restore original method\n      service['generateEmailContent'] = originalGenerateEmailContent;\n    });\n\n    it('should handle non-Error exceptions in test', async () => {\n      // Mock generateEmailContent to throw a non-Error during test\n      const originalGenerateEmailContent = service['generateEmailContent'];\n      service['generateEmailContent'] = jest.fn().mockImplementation(() => {\n        throw new Error('Non-error test failure');\n      });\n\n      const result = await service.testConfiguration();\n\n      expect(result).toEqual({\n        success: false,\n        message: 'Non-error test failure',\n      });\n\n      // Restore original method\n      service['generateEmailContent'] = originalGenerateEmailContent;\n    });\n\n    it('should use predefined test data', async () => {\n      await service.testConfiguration();\n\n      expect(consoleSpy).toHaveBeenCalledWith(\n        'Test email content generated successfully:',\n        expect.objectContaining({\n          greeting: 'Dear Test Therapist,',\n          body: expect.stringMatching(\n            /Email: test@example\\.com.*Temporary Password: temp123/s,\n          ),\n        }),\n      );\n    });\n\n    it('should test both email generation and logging', async () => {\n      const result = await service.testConfiguration();\n\n      expect(result.success).toBe(true);\n      expect(consoleSpy).toHaveBeenCalledTimes(2);\n      expect(consoleSpy).toHaveBeenNthCalledWith(\n        1,\n        'Testing email service configuration...',\n      );\n      expect(consoleSpy).toHaveBeenNthCalledWith(\n        2,\n        'Test email content generated successfully:',\n        expect.any(Object),\n      );\n    });\n  });\n\n  describe('Error handling and edge cases', () => {\n    it('should handle concurrent email operations', async () => {\n      const operations = [\n        service.sendTherapistWelcomeEmail('user1@example.com', 'User 1', {\n          email: 'user1@example.com',\n          password: 'pass1',\n        }),\n        service.sendTherapistRejectionEmail(\n          'user2@example.com',\n          'User 2',\n          'Reason 2',\n        ),\n        service.testConfiguration(),\n        service.sendTherapistApplicationNotification({\n          to: 'user3@example.com',\n          name: 'User 3',\n          status: 'approved',\n        }),\n      ];\n\n      const results = await Promise.all(operations);\n\n      expect(results.every((result) => result.success)).toBe(true);\n    });\n\n    it('should handle memory-intensive operations', async () => {\n      const largeEmailData: EmailNotificationData = {\n        to: 'therapist@example.com',\n        name: 'Dr. Large Data',\n        status: 'approved',\n        adminNotes: 'A'.repeat(100000), // 100KB of text\n        credentials: {\n          email: 'therapist@example.com',\n          password: 'temp123',\n        },\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(largeEmailData);\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle rapid successive operations', async () => {\n      const rapidOperations = Array(20)\n        .fill(null)\n        .map((_, i) =>\n          service.sendTherapistApplicationNotification({\n            to: `therapist${i}@example.com`,\n            name: `Dr. Test ${i}`,\n            status: i % 2 === 0 ? 'approved' : 'rejected',\n          }),\n        );\n\n      const results = await Promise.all(rapidOperations);\n\n      expect(results.every((result) => result.success)).toBe(true);\n      expect(results).toHaveLength(20);\n    });\n\n    it('should handle Unicode characters in all fields', async () => {\n      const unicodeEmailData: EmailNotificationData = {\n        to: 'tëst@ëxämplë.cöm',\n        name: 'Dr. José María García-López 中文 русский العربية',\n        status: 'approved',\n        adminNotes: 'Notes with Unicode: 中文测试 русский тест اختبار عربي',\n        credentials: {\n          email: 'tëst@ëxämplë.cöm',\n          password: 'pässwörd123',\n        },\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(unicodeEmailData);\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle extremely long input data', async () => {\n      const longEmailData: EmailNotificationData = {\n        to: 'a'.repeat(320) + '@example.com', // Very long email\n        name: 'Dr. ' + 'X'.repeat(1000), // Very long name\n        status: 'rejected',\n        adminNotes: 'B'.repeat(50000), // Very long admin notes\n      };\n\n      const result =\n        await service.sendTherapistApplicationNotification(longEmailData);\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should maintain performance with complex data structures', async () => {\n      const complexEmailData: EmailNotificationData = {\n        to: 'complex@example.com',\n        name: 'Dr. Complex Data',\n        status: 'approved',\n        adminNotes: JSON.stringify({\n          reviewedBy: 'Admin Team',\n          scores: { technical: 9, experience: 8, communication: 10 },\n          recommendations: ['Excellent candidate', 'Strong background'],\n          metadata: { timestamp: new Date().toISOString(), version: '1.0' },\n        }),\n        credentials: {\n          email: 'complex@example.com',\n          password: 'complex_p@ssw0rd_2024',\n        },\n      };\n\n      const startTime = Date.now();\n      const result =\n        await service.sendTherapistApplicationNotification(complexEmailData);\n      const endTime = Date.now();\n\n      expect(result.success).toBe(true);\n      expect(endTime - startTime).toBeLessThan(1000); // Should complete within 1 second\n    });\n\n    it('should handle null prototype objects', async () => {\n      const nullProtoData = Object.create(null);\n      nullProtoData.to = 'test@example.com';\n      nullProtoData.name = 'Dr. Test';\n      nullProtoData.status = 'approved';\n\n      const result =\n        await service.sendTherapistApplicationNotification(nullProtoData);\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle frozen objects', async () => {\n      const frozenData: EmailNotificationData = Object.freeze({\n        to: 'frozen@example.com',\n        name: 'Dr. Frozen',\n        status: 'approved',\n      });\n\n      const result =\n        await service.sendTherapistApplicationNotification(frozenData);\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should maintain consistent behavior across different execution contexts', async () => {\n      // Test in setTimeout to simulate different execution context\n      const asyncResult = await new Promise<{\n        success: boolean;\n        message: string;\n      }>((resolve) => {\n        setTimeout(() => {\n          const result = service.sendTherapistApplicationNotification({\n            to: 'async@example.com',\n            name: 'Dr. Async',\n            status: 'approved',\n          });\n          resolve(result);\n        }, 0);\n      });\n\n      expect(asyncResult.success).toBe(true);\n    });\n  });\n});\n"],"version":3}