{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/client/client.controller.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/client/client.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Put,\n  Post,\n  Delete,\n  Body,\n  UseGuards,\n  HttpException,\n  HttpStatus,\n} from '@nestjs/common';\nimport { CurrentUserId } from '../auth/decorators/current-user-id.decorator';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { ClientService } from './client.service';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBody,\n  ApiBearerAuth,\n  ApiParam,\n  ApiQuery,\n} from '@nestjs/swagger';\n// Import will be resolved via service return type\nimport type { UpdateClientDto, TherapistRecommendation } from './types';\n\n@ApiTags('clients')\n@ApiBearerAuth('JWT-auth')\n@Controller('client')\n@UseGuards(JwtAuthGuard)\nexport class ClientController {\n  constructor(private readonly clientService: ClientService) {}\n\n  @Get('profile')\n  @ApiOperation({\n    summary: 'Retrieve get profile',\n\n    description: 'Retrieve get profile',\n  })\n  @ApiResponse({\n    status: 200,\n\n    description: 'Retrieved successfully',\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  async getProfile(@CurrentUserId() id: string) {\n    try {\n      return await this.clientService.getProfile(id);\n    } catch (error) {\n      throw new HttpException(\n        `Failed to fetch client profile: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Put('profile')\n  @ApiOperation({\n    summary: 'Update client profile',\n    description: 'Update client profile information',\n  })\n  @ApiResponse({\n    status: 200,\n\n    description: 'Updated successfully',\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  async updateProfile(\n    @CurrentUserId() id: string,\n    @Body() data: UpdateClientDto,\n  ) {\n    try {\n      return await this.clientService.updateProfile(id, data);\n    } catch (error) {\n      throw new HttpException(\n        `Failed to update client profile: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('needs-therapist-recommendations')\n  @ApiOperation({\n    summary: 'Retrieve needs therapist recommendations',\n\n    description: 'Retrieve needs therapist recommendations',\n  })\n  @ApiResponse({\n    status: 200,\n\n    description: 'Retrieved successfully',\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  async needsTherapistRecommendations(\n    @CurrentUserId() id: string,\n  ): Promise<{ needsTherapistRecommendations: boolean }> {\n    try {\n      const needs = await this.clientService.needsTherapistRecommendations(id);\n      return { needsTherapistRecommendations: needs };\n    } catch (error) {\n      throw new HttpException(\n        `Failed to check therapist recommendations: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Put('mark-therapist-recommendations-seen')\n  @ApiOperation({\n    summary: 'Update mark therapist recommendations seen',\n\n    description: 'Update mark therapist recommendations seen',\n  })\n  @ApiResponse({\n    status: 200,\n\n    description: 'Updated successfully',\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  async markTherapistRecommendationsSeen(\n    @CurrentUserId() id: string,\n  ): Promise<{ success: boolean }> {\n    try {\n      await this.clientService.markTherapistRecommendationsSeen(id);\n      return { success: true };\n    } catch (error) {\n      throw new HttpException(\n        `Failed to mark therapist recommendations as seen: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('therapist')\n  @ApiOperation({\n    summary: 'Retrieve get assigned therapist',\n\n    description: 'Retrieve get assigned therapist',\n  })\n  @ApiResponse({\n    status: 200,\n\n    description: 'Retrieved successfully',\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  async getAssignedTherapist(\n    @CurrentUserId() id: string,\n  ): Promise<{ therapist: TherapistRecommendation | null }> {\n    try {\n      const therapist = await this.clientService.getAssignedTherapist(id);\n      return { therapist };\n    } catch (error) {\n      throw new HttpException(\n        `Failed to fetch assigned therapist: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Get('therapists')\n  @ApiOperation({\n    summary: 'Retrieve all assigned therapists',\n    description: 'Retrieve all active assigned therapists for the client',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Retrieved successfully',\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  async getAssignedTherapists(\n    @CurrentUserId() id: string,\n  ): Promise<{ therapists: TherapistRecommendation[] }> {\n    try {\n      const therapists = await this.clientService.getAssignedTherapists(id);\n      return { therapists };\n    } catch (error) {\n      throw new HttpException(\n        `Failed to fetch assigned therapists: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Post('therapist')\n  @ApiOperation({\n    summary: 'Create assign therapist',\n\n    description: 'Create assign therapist',\n  })\n  @ApiResponse({\n    status: 201,\n\n    description: 'Created successfully',\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  async assignTherapist(\n    @CurrentUserId() id: string,\n    @Body() data: { therapistId: string },\n  ): Promise<{ therapist: TherapistRecommendation }> {\n    try {\n      const therapist = await this.clientService.assignTherapist(\n        id,\n        data.therapistId,\n      );\n      return { therapist };\n    } catch (error) {\n      throw new HttpException(\n        `Failed to assign therapist: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        error instanceof Error && error.message.includes('not found')\n          ? HttpStatus.NOT_FOUND\n          : HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Delete('therapist')\n  @ApiOperation({\n    summary: 'Delete remove therapist',\n\n    description: 'Delete remove therapist',\n  })\n  @ApiResponse({\n    status: 200,\n\n    description: 'Deleted successfully',\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  async removeTherapist(\n    @CurrentUserId() id: string,\n  ): Promise<{ success: boolean }> {\n    try {\n      await this.clientService.removeTherapist(id);\n      return { success: true };\n    } catch (error) {\n      throw new HttpException(\n        `Failed to remove therapist: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        error instanceof Error && error.message.includes('not found')\n          ? HttpStatus.NOT_FOUND\n          : HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n}\n"],"version":3}