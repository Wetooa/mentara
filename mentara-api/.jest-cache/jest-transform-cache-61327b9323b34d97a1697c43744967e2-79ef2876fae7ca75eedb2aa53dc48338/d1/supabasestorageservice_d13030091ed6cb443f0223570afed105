9b39550822c12786f76186dadc67da0e
"use strict";

/* istanbul ignore next */
function cov_2gz5alsydl() {
  var path = "/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/services/supabase-storage.service.ts";
  var hash = "066f17eadb173618037d4a77ae79b13950d36aa0";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/services/supabase-storage.service.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 17
        },
        end: {
          line: 7,
          column: 1
        }
      },
      "1": {
        start: {
          line: 3,
          column: 12
        },
        end: {
          line: 3,
          column: 28
        }
      },
      "2": {
        start: {
          line: 3,
          column: 34
        },
        end: {
          line: 3,
          column: 125
        }
      },
      "3": {
        start: {
          line: 4,
          column: 4
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "4": {
        start: {
          line: 4,
          column: 79
        },
        end: {
          line: 4,
          column: 131
        }
      },
      "5": {
        start: {
          line: 5,
          column: 9
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "6": {
        start: {
          line: 5,
          column: 22
        },
        end: {
          line: 5,
          column: 43
        }
      },
      "7": {
        start: {
          line: 5,
          column: 58
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "8": {
        start: {
          line: 5,
          column: 81
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "9": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 6,
          column: 66
        }
      },
      "10": {
        start: {
          line: 8,
          column: 17
        },
        end: {
          line: 10,
          column: 1
        }
      },
      "11": {
        start: {
          line: 9,
          column: 4
        },
        end: {
          line: 9,
          column: 109
        }
      },
      "12": {
        start: {
          line: 9,
          column: 79
        },
        end: {
          line: 9,
          column: 109
        }
      },
      "13": {
        start: {
          line: 13,
          column: 0
        },
        end: {
          line: 13,
          column: 62
        }
      },
      "14": {
        start: {
          line: 14,
          column: 0
        },
        end: {
          line: 14,
          column: 40
        }
      },
      "15": {
        start: {
          line: 15,
          column: 17
        },
        end: {
          line: 15,
          column: 42
        }
      },
      "16": {
        start: {
          line: 16,
          column: 17
        },
        end: {
          line: 16,
          column: 42
        }
      },
      "17": {
        start: {
          line: 17,
          column: 16
        },
        end: {
          line: 17,
          column: 32
        }
      },
      "18": {
        start: {
          line: 18,
          column: 15
        },
        end: {
          line: 18,
          column: 30
        }
      },
      "19": {
        start: {
          line: 19,
          column: 29
        },
        end: {
          line: 213,
          column: 1
        }
      },
      "20": {
        start: {
          line: 21,
          column: 13
        },
        end: {
          line: 21,
          column: 63
        }
      },
      "21": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 43
        }
      },
      "22": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 26,
          column: 72
        }
      },
      "23": {
        start: {
          line: 27,
          column: 8
        },
        end: {
          line: 28,
          column: 61
        }
      },
      "24": {
        start: {
          line: 29,
          column: 8
        },
        end: {
          line: 31,
          column: 9
        }
      },
      "25": {
        start: {
          line: 30,
          column: 12
        },
        end: {
          line: 30,
          column: 134
        }
      },
      "26": {
        start: {
          line: 40,
          column: 8
        },
        end: {
          line: 40,
          column: 96
        }
      },
      "27": {
        start: {
          line: 41,
          column: 8
        },
        end: {
          line: 60,
          column: 9
        }
      },
      "28": {
        start: {
          line: 43,
          column: 37
        },
        end: {
          line: 43,
          column: 54
        }
      },
      "29": {
        start: {
          line: 44,
          column: 34
        },
        end: {
          line: 44,
          column: 73
        }
      },
      "30": {
        start: {
          line: 45,
          column: 35
        },
        end: {
          line: 45,
          column: 72
        }
      },
      "31": {
        start: {
          line: 47,
          column: 12
        },
        end: {
          line: 47,
          column: 92
        }
      },
      "32": {
        start: {
          line: 49,
          column: 30
        },
        end: {
          line: 49,
          column: 104
        }
      },
      "33": {
        start: {
          line: 50,
          column: 12
        },
        end: {
          line: 50,
          column: 89
        }
      },
      "34": {
        start: {
          line: 51,
          column: 12
        },
        end: {
          line: 55,
          column: 14
        }
      },
      "35": {
        start: {
          line: 58,
          column: 12
        },
        end: {
          line: 58,
          column: 95
        }
      },
      "36": {
        start: {
          line: 59,
          column: 12
        },
        end: {
          line: 59,
          column: 103
        }
      },
      "37": {
        start: {
          line: 69,
          column: 8
        },
        end: {
          line: 71,
          column: 9
        }
      },
      "38": {
        start: {
          line: 70,
          column: 12
        },
        end: {
          line: 70,
          column: 22
        }
      },
      "39": {
        start: {
          line: 72,
          column: 8
        },
        end: {
          line: 72,
          column: 89
        }
      },
      "40": {
        start: {
          line: 73,
          column: 8
        },
        end: {
          line: 82,
          column: 9
        }
      },
      "41": {
        start: {
          line: 74,
          column: 35
        },
        end: {
          line: 74,
          column: 85
        }
      },
      "42": {
        start: {
          line: 74,
          column: 55
        },
        end: {
          line: 74,
          column: 84
        }
      },
      "43": {
        start: {
          line: 75,
          column: 28
        },
        end: {
          line: 75,
          column: 61
        }
      },
      "44": {
        start: {
          line: 76,
          column: 12
        },
        end: {
          line: 76,
          column: 89
        }
      },
      "45": {
        start: {
          line: 77,
          column: 12
        },
        end: {
          line: 77,
          column: 27
        }
      },
      "46": {
        start: {
          line: 80,
          column: 12
        },
        end: {
          line: 80,
          column: 83
        }
      },
      "47": {
        start: {
          line: 81,
          column: 12
        },
        end: {
          line: 81,
          column: 104
        }
      },
      "48": {
        start: {
          line: 90,
          column: 8
        },
        end: {
          line: 90,
          column: 88
        }
      },
      "49": {
        start: {
          line: 91,
          column: 8
        },
        end: {
          line: 109,
          column: 9
        }
      },
      "50": {
        start: {
          line: 92,
          column: 24
        },
        end: {
          line: 92,
          column: 85
        }
      },
      "51": {
        start: {
          line: 93,
          column: 29
        },
        end: {
          line: 97,
          column: 14
        }
      },
      "52": {
        start: {
          line: 98,
          column: 12
        },
        end: {
          line: 104,
          column: 13
        }
      },
      "53": {
        start: {
          line: 99,
          column: 16
        },
        end: {
          line: 99,
          column: 88
        }
      },
      "54": {
        start: {
          line: 102,
          column: 16
        },
        end: {
          line: 102,
          column: 129
        }
      },
      "55": {
        start: {
          line: 103,
          column: 16
        },
        end: {
          line: 103,
          column: 90
        }
      },
      "56": {
        start: {
          line: 107,
          column: 12
        },
        end: {
          line: 107,
          column: 87
        }
      },
      "57": {
        start: {
          line: 108,
          column: 12
        },
        end: {
          line: 108,
          column: 105
        }
      },
      "58": {
        start: {
          line: 117,
          column: 29
        },
        end: {
          line: 117,
          column: 54
        }
      },
      "59": {
        start: {
          line: 118,
          column: 8
        },
        end: {
          line: 118,
          column: 75
        }
      },
      "60": {
        start: {
          line: 128,
          column: 20
        },
        end: {
          line: 128,
          column: 77
        }
      },
      "61": {
        start: {
          line: 129,
          column: 8
        },
        end: {
          line: 153,
          column: 9
        }
      },
      "62": {
        start: {
          line: 130,
          column: 29
        },
        end: {
          line: 135,
          column: 14
        }
      },
      "63": {
        start: {
          line: 136,
          column: 12
        },
        end: {
          line: 142,
          column: 13
        }
      },
      "64": {
        start: {
          line: 137,
          column: 16
        },
        end: {
          line: 137,
          column: 85
        }
      },
      "65": {
        start: {
          line: 140,
          column: 16
        },
        end: {
          line: 140,
          column: 127
        }
      },
      "66": {
        start: {
          line: 141,
          column: 16
        },
        end: {
          line: 141,
          column: 90
        }
      },
      "67": {
        start: {
          line: 145,
          column: 12
        },
        end: {
          line: 152,
          column: 13
        }
      },
      "68": {
        start: {
          line: 146,
          column: 16
        },
        end: {
          line: 146,
          column: 107
        }
      },
      "69": {
        start: {
          line: 147,
          column: 16
        },
        end: {
          line: 147,
          column: 120
        }
      },
      "70": {
        start: {
          line: 150,
          column: 16
        },
        end: {
          line: 150,
          column: 92
        }
      },
      "71": {
        start: {
          line: 151,
          column: 16
        },
        end: {
          line: 151,
          column: 82
        }
      },
      "72": {
        start: {
          line: 178,
          column: 8
        },
        end: {
          line: 183,
          column: 9
        }
      },
      "73": {
        start: {
          line: 179,
          column: 12
        },
        end: {
          line: 182,
          column: 14
        }
      },
      "74": {
        start: {
          line: 185,
          column: 8
        },
        end: {
          line: 190,
          column: 9
        }
      },
      "75": {
        start: {
          line: 186,
          column: 12
        },
        end: {
          line: 189,
          column: 14
        }
      },
      "76": {
        start: {
          line: 192,
          column: 29
        },
        end: {
          line: 192,
          column: 78
        }
      },
      "77": {
        start: {
          line: 193,
          column: 8
        },
        end: {
          line: 198,
          column: 9
        }
      },
      "78": {
        start: {
          line: 194,
          column: 12
        },
        end: {
          line: 197,
          column: 14
        }
      },
      "79": {
        start: {
          line: 199,
          column: 8
        },
        end: {
          line: 199,
          column: 33
        }
      },
      "80": {
        start: {
          line: 205,
          column: 8
        },
        end: {
          line: 211,
          column: 10
        }
      },
      "81": {
        start: {
          line: 214,
          column: 0
        },
        end: {
          line: 214,
          column: 56
        }
      },
      "82": {
        start: {
          line: 215,
          column: 0
        },
        end: {
          line: 218,
          column: 27
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 2,
            column: 46
          },
          end: {
            line: 2,
            column: 47
          }
        },
        loc: {
          start: {
            line: 2,
            column: 87
          },
          end: {
            line: 7,
            column: 1
          }
        },
        line: 2
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 8,
            column: 46
          },
          end: {
            line: 8,
            column: 47
          }
        },
        loc: {
          start: {
            line: 8,
            column: 62
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 8
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 24,
            column: 5
          }
        },
        loc: {
          start: {
            line: 24,
            column: 31
          },
          end: {
            line: 32,
            column: 5
          }
        },
        line: 24
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 39,
            column: 4
          },
          end: {
            line: 39,
            column: 5
          }
        },
        loc: {
          start: {
            line: 39,
            column: 35
          },
          end: {
            line: 61,
            column: 5
          }
        },
        line: 39
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 68,
            column: 5
          }
        },
        loc: {
          start: {
            line: 68,
            column: 37
          },
          end: {
            line: 83,
            column: 5
          }
        },
        line: 68
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 74,
            column: 45
          },
          end: {
            line: 74,
            column: 46
          }
        },
        loc: {
          start: {
            line: 74,
            column: 55
          },
          end: {
            line: 74,
            column: 84
          }
        },
        line: 74
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 89,
            column: 4
          },
          end: {
            line: 89,
            column: 5
          }
        },
        loc: {
          start: {
            line: 89,
            column: 39
          },
          end: {
            line: 110,
            column: 5
          }
        },
        line: 89
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 116,
            column: 4
          },
          end: {
            line: 116,
            column: 5
          }
        },
        loc: {
          start: {
            line: 116,
            column: 31
          },
          end: {
            line: 119,
            column: 5
          }
        },
        line: 116
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 127,
            column: 4
          },
          end: {
            line: 127,
            column: 5
          }
        },
        loc: {
          start: {
            line: 127,
            column: 63
          },
          end: {
            line: 154,
            column: 5
          }
        },
        line: 127
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 161,
            column: 4
          },
          end: {
            line: 161,
            column: 5
          }
        },
        loc: {
          start: {
            line: 176,
            column: 7
          },
          end: {
            line: 200,
            column: 5
          }
        },
        line: 176
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 204,
            column: 4
          },
          end: {
            line: 204,
            column: 5
          }
        },
        loc: {
          start: {
            line: 204,
            column: 33
          },
          end: {
            line: 212,
            column: 5
          }
        },
        line: 204
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 2,
            column: 17
          },
          end: {
            line: 7,
            column: 1
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 2,
            column: 18
          },
          end: {
            line: 2,
            column: 22
          }
        }, {
          start: {
            line: 2,
            column: 26
          },
          end: {
            line: 2,
            column: 41
          }
        }, {
          start: {
            line: 2,
            column: 46
          },
          end: {
            line: 7,
            column: 1
          }
        }],
        line: 2
      },
      "1": {
        loc: {
          start: {
            line: 3,
            column: 34
          },
          end: {
            line: 3,
            column: 125
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 3,
            column: 42
          },
          end: {
            line: 3,
            column: 48
          }
        }, {
          start: {
            line: 3,
            column: 51
          },
          end: {
            line: 3,
            column: 125
          }
        }],
        line: 3
      },
      "2": {
        loc: {
          start: {
            line: 3,
            column: 51
          },
          end: {
            line: 3,
            column: 125
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 3,
            column: 67
          },
          end: {
            line: 3,
            column: 118
          }
        }, {
          start: {
            line: 3,
            column: 121
          },
          end: {
            line: 3,
            column: 125
          }
        }],
        line: 3
      },
      "3": {
        loc: {
          start: {
            line: 4,
            column: 4
          },
          end: {
            line: 5,
            column: 150
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 4,
            column: 4
          },
          end: {
            line: 5,
            column: 150
          }
        }, {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 150
          }
        }],
        line: 4
      },
      "4": {
        loc: {
          start: {
            line: 4,
            column: 8
          },
          end: {
            line: 4,
            column: 77
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 4,
            column: 8
          },
          end: {
            line: 4,
            column: 35
          }
        }, {
          start: {
            line: 4,
            column: 39
          },
          end: {
            line: 4,
            column: 77
          }
        }],
        line: 4
      },
      "5": {
        loc: {
          start: {
            line: 5,
            column: 58
          },
          end: {
            line: 5,
            column: 150
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 5,
            column: 58
          },
          end: {
            line: 5,
            column: 150
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 5
      },
      "6": {
        loc: {
          start: {
            line: 5,
            column: 85
          },
          end: {
            line: 5,
            column: 149
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 5,
            column: 86
          },
          end: {
            line: 5,
            column: 143
          }
        }, {
          start: {
            line: 5,
            column: 148
          },
          end: {
            line: 5,
            column: 149
          }
        }],
        line: 5
      },
      "7": {
        loc: {
          start: {
            line: 5,
            column: 86
          },
          end: {
            line: 5,
            column: 143
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 5,
            column: 94
          },
          end: {
            line: 5,
            column: 98
          }
        }, {
          start: {
            line: 5,
            column: 101
          },
          end: {
            line: 5,
            column: 143
          }
        }],
        line: 5
      },
      "8": {
        loc: {
          start: {
            line: 5,
            column: 101
          },
          end: {
            line: 5,
            column: 143
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 5,
            column: 109
          },
          end: {
            line: 5,
            column: 126
          }
        }, {
          start: {
            line: 5,
            column: 129
          },
          end: {
            line: 5,
            column: 143
          }
        }],
        line: 5
      },
      "9": {
        loc: {
          start: {
            line: 6,
            column: 11
          },
          end: {
            line: 6,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 6,
            column: 11
          },
          end: {
            line: 6,
            column: 16
          }
        }, {
          start: {
            line: 6,
            column: 20
          },
          end: {
            line: 6,
            column: 21
          }
        }, {
          start: {
            line: 6,
            column: 25
          },
          end: {
            line: 6,
            column: 62
          }
        }],
        line: 6
      },
      "10": {
        loc: {
          start: {
            line: 8,
            column: 17
          },
          end: {
            line: 10,
            column: 1
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 8,
            column: 18
          },
          end: {
            line: 8,
            column: 22
          }
        }, {
          start: {
            line: 8,
            column: 26
          },
          end: {
            line: 8,
            column: 41
          }
        }, {
          start: {
            line: 8,
            column: 46
          },
          end: {
            line: 10,
            column: 1
          }
        }],
        line: 8
      },
      "11": {
        loc: {
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 9,
            column: 109
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 9,
            column: 109
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 9
      },
      "12": {
        loc: {
          start: {
            line: 9,
            column: 8
          },
          end: {
            line: 9,
            column: 77
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 9,
            column: 8
          },
          end: {
            line: 9,
            column: 35
          }
        }, {
          start: {
            line: 9,
            column: 39
          },
          end: {
            line: 9,
            column: 77
          }
        }],
        line: 9
      },
      "13": {
        loc: {
          start: {
            line: 26,
            column: 27
          },
          end: {
            line: 26,
            column: 71
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 26,
            column: 27
          },
          end: {
            line: 26,
            column: 65
          }
        }, {
          start: {
            line: 26,
            column: 69
          },
          end: {
            line: 26,
            column: 71
          }
        }],
        line: 26
      },
      "14": {
        loc: {
          start: {
            line: 28,
            column: 12
          },
          end: {
            line: 28,
            column: 60
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 28,
            column: 12
          },
          end: {
            line: 28,
            column: 54
          }
        }, {
          start: {
            line: 28,
            column: 58
          },
          end: {
            line: 28,
            column: 60
          }
        }],
        line: 28
      },
      "15": {
        loc: {
          start: {
            line: 29,
            column: 8
          },
          end: {
            line: 31,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 29,
            column: 8
          },
          end: {
            line: 31,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 29
      },
      "16": {
        loc: {
          start: {
            line: 29,
            column: 12
          },
          end: {
            line: 29,
            column: 53
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 29,
            column: 12
          },
          end: {
            line: 29,
            column: 29
          }
        }, {
          start: {
            line: 29,
            column: 33
          },
          end: {
            line: 29,
            column: 53
          }
        }],
        line: 29
      },
      "17": {
        loc: {
          start: {
            line: 59,
            column: 66
          },
          end: {
            line: 59,
            column: 99
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 59,
            column: 66
          },
          end: {
            line: 59,
            column: 80
          }
        }, {
          start: {
            line: 59,
            column: 84
          },
          end: {
            line: 59,
            column: 99
          }
        }],
        line: 59
      },
      "18": {
        loc: {
          start: {
            line: 69,
            column: 8
          },
          end: {
            line: 71,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 69,
            column: 8
          },
          end: {
            line: 71,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 69
      },
      "19": {
        loc: {
          start: {
            line: 69,
            column: 12
          },
          end: {
            line: 69,
            column: 40
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 69,
            column: 12
          },
          end: {
            line: 69,
            column: 18
          }
        }, {
          start: {
            line: 69,
            column: 22
          },
          end: {
            line: 69,
            column: 40
          }
        }],
        line: 69
      },
      "20": {
        loc: {
          start: {
            line: 81,
            column: 67
          },
          end: {
            line: 81,
            column: 100
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 81,
            column: 67
          },
          end: {
            line: 81,
            column: 81
          }
        }, {
          start: {
            line: 81,
            column: 85
          },
          end: {
            line: 81,
            column: 100
          }
        }],
        line: 81
      },
      "21": {
        loc: {
          start: {
            line: 98,
            column: 12
          },
          end: {
            line: 104,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 98,
            column: 12
          },
          end: {
            line: 104,
            column: 13
          }
        }, {
          start: {
            line: 101,
            column: 17
          },
          end: {
            line: 104,
            column: 13
          }
        }],
        line: 98
      },
      "22": {
        loc: {
          start: {
            line: 108,
            column: 68
          },
          end: {
            line: 108,
            column: 101
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 108,
            column: 68
          },
          end: {
            line: 108,
            column: 82
          }
        }, {
          start: {
            line: 108,
            column: 86
          },
          end: {
            line: 108,
            column: 101
          }
        }],
        line: 108
      },
      "23": {
        loc: {
          start: {
            line: 118,
            column: 15
          },
          end: {
            line: 118,
            column: 74
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 118,
            column: 37
          },
          end: {
            line: 118,
            column: 39
          }
        }, {
          start: {
            line: 118,
            column: 42
          },
          end: {
            line: 118,
            column: 74
          }
        }],
        line: 118
      },
      "24": {
        loc: {
          start: {
            line: 136,
            column: 12
          },
          end: {
            line: 142,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 136,
            column: 12
          },
          end: {
            line: 142,
            column: 13
          }
        }, {
          start: {
            line: 139,
            column: 17
          },
          end: {
            line: 142,
            column: 13
          }
        }],
        line: 136
      },
      "25": {
        loc: {
          start: {
            line: 136,
            column: 16
          },
          end: {
            line: 136,
            column: 66
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 136,
            column: 16
          },
          end: {
            line: 136,
            column: 39
          }
        }, {
          start: {
            line: 136,
            column: 43
          },
          end: {
            line: 136,
            column: 66
          }
        }],
        line: 136
      },
      "26": {
        loc: {
          start: {
            line: 145,
            column: 12
          },
          end: {
            line: 152,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 145,
            column: 12
          },
          end: {
            line: 152,
            column: 13
          }
        }, {
          start: {
            line: 149,
            column: 17
          },
          end: {
            line: 152,
            column: 13
          }
        }],
        line: 145
      },
      "27": {
        loc: {
          start: {
            line: 147,
            column: 59
          },
          end: {
            line: 147,
            column: 116
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 147,
            column: 59
          },
          end: {
            line: 147,
            column: 87
          }
        }, {
          start: {
            line: 147,
            column: 91
          },
          end: {
            line: 147,
            column: 116
          }
        }],
        line: 147
      },
      "28": {
        loc: {
          start: {
            line: 161,
            column: 23
          },
          end: {
            line: 161,
            column: 56
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 161,
            column: 40
          },
          end: {
            line: 161,
            column: 56
          }
        }],
        line: 161
      },
      "29": {
        loc: {
          start: {
            line: 162,
            column: 4
          },
          end: {
            line: 176,
            column: 5
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 162,
            column: 23
          },
          end: {
            line: 176,
            column: 5
          }
        }],
        line: 162
      },
      "30": {
        loc: {
          start: {
            line: 178,
            column: 8
          },
          end: {
            line: 183,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 178,
            column: 8
          },
          end: {
            line: 183,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 178
      },
      "31": {
        loc: {
          start: {
            line: 185,
            column: 8
          },
          end: {
            line: 190,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 185,
            column: 8
          },
          end: {
            line: 190,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 185
      },
      "32": {
        loc: {
          start: {
            line: 193,
            column: 8
          },
          end: {
            line: 198,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 193,
            column: 8
          },
          end: {
            line: 198,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 193
      },
      "33": {
        loc: {
          start: {
            line: 217,
            column: 37
          },
          end: {
            line: 217,
            column: 151
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 217,
            column: 140
          },
          end: {
            line: 217,
            column: 142
          }
        }, {
          start: {
            line: 217,
            column: 145
          },
          end: {
            line: 217,
            column: 151
          }
        }],
        line: 217
      },
      "34": {
        loc: {
          start: {
            line: 217,
            column: 50
          },
          end: {
            line: 217,
            column: 121
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 217,
            column: 50
          },
          end: {
            line: 217,
            column: 95
          }
        }, {
          start: {
            line: 217,
            column: 99
          },
          end: {
            line: 217,
            column: 121
          }
        }],
        line: 217
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0
    },
    b: {
      "0": [0, 0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0, 0],
      "10": [0, 0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0],
      "29": [0],
      "30": [0, 0],
      "31": [0, 0],
      "32": [0, 0],
      "33": [0, 0],
      "34": [0, 0]
    },
    inputSourceMap: {
      file: "/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/services/supabase-storage.service.ts",
      mappings: "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",
      names: [],
      sources: ["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/services/supabase-storage.service.ts"],
      sourcesContent: ["import { Injectable, Logger } from '@nestjs/common';\nimport { ConfigService } from '@nestjs/config';\nimport axios from 'axios';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport interface FileUploadResult {\n  filename: string;\n  url: string;\n  bucket: string;\n}\n\n@Injectable()\nexport class SupabaseStorageService {\n  private readonly logger = new Logger(SupabaseStorageService.name);\n  private readonly supabaseUrl: string;\n  private readonly supabaseApiKey: string;\n\n  constructor(private configService: ConfigService) {\n    this.supabaseUrl = this.configService.get<string>('SUPABASE_URL') || '';\n    this.supabaseApiKey =\n      this.configService.get<string>('SUPABASE_API_KEY') || '';\n\n    if (!this.supabaseUrl || !this.supabaseApiKey) {\n      throw new Error(\n        'Supabase configuration is missing. Please set SUPABASE_URL and SUPABASE_API_KEY environment variables.',\n      );\n    }\n  }\n\n  /**\n   * Upload a file to Supabase Storage\n   * @param file - The file to upload\n   * @param bucket - The storage bucket name\n   * @returns Promise<FileUploadResult> - Upload result with filename and URL\n   */\n  async uploadFile(\n    file: Express.Multer.File,\n    bucket: string,\n  ): Promise<FileUploadResult> {\n    this.logger.log(\n      `Uploading file to Supabase: ${file.originalname} (bucket: ${bucket})`,\n    );\n\n    try {\n      // Generate unique filename to avoid conflicts\n      const originalFilename = file.originalname;\n      const fileExtension = this.getFileExtension(originalFilename);\n      const uniqueFilename = `${uuidv4()}${fileExtension}`;\n\n      // Upload to Supabase\n      await this.uploadToSupabase(\n        bucket,\n        uniqueFilename,\n        file.buffer,\n        file.mimetype,\n      );\n\n      // Generate public URL\n      const publicUrl = `${this.supabaseUrl}/storage/v1/object/public/${bucket}/${uniqueFilename}`;\n\n      this.logger.log(\n        `File uploaded successfully to Supabase: ${uniqueFilename}`,\n      );\n\n      return {\n        filename: uniqueFilename,\n        url: publicUrl,\n        bucket,\n      };\n    } catch (error: any) {\n      this.logger.error(\n        `Error uploading file to Supabase: ${file.originalname}`,\n        error,\n      );\n      throw new Error(\n        `Failed to upload file to Supabase: ${error?.message || 'Unknown error'}`,\n      );\n    }\n  }\n\n  /**\n   * Upload multiple files to Supabase Storage\n   * @param files - Array of files to upload\n   * @param bucket - The storage bucket name\n   * @returns Promise<FileUploadResult[]> - Array of upload results\n   */\n  async uploadFiles(\n    files: Express.Multer.File[],\n    bucket: string,\n  ): Promise<FileUploadResult[]> {\n    if (!files || files.length === 0) {\n      return [];\n    }\n\n    this.logger.log(\n      `Uploading ${files.length} files to Supabase bucket: ${bucket}`,\n    );\n\n    try {\n      const uploadPromises = files.map((file) => this.uploadFile(file, bucket));\n      const results = await Promise.all(uploadPromises);\n\n      this.logger.log(\n        `Successfully uploaded ${results.length} files to Supabase`,\n      );\n      return results;\n    } catch (error: any) {\n      this.logger.error(`Error uploading multiple files to Supabase`, error);\n      throw new Error(\n        `Failed to upload files to Supabase: ${error?.message || 'Unknown error'}`,\n      );\n    }\n  }\n\n  /**\n   * Delete a file from Supabase Storage\n   * @param bucket - The storage bucket name\n   * @param filename - The filename to delete\n   */\n  async deleteFile(bucket: string, filename: string): Promise<void> {\n    this.logger.log(\n      `Deleting file from Supabase: ${filename} (bucket: ${bucket})`,\n    );\n\n    try {\n      const url = `${this.supabaseUrl}/storage/v1/object/${bucket}/${filename}`;\n\n      const response = await axios.delete(url, {\n        headers: {\n          Authorization: `Bearer ${this.supabaseApiKey}`,\n        },\n      });\n\n      if (response.status === 200) {\n        this.logger.log(`File deleted successfully from Supabase: ${filename}`);\n      } else {\n        this.logger.error(\n          `Failed to delete file from Supabase. Status: ${response.status}, Response: ${response.data}`,\n        );\n        throw new Error(\n          `Supabase delete failed with status: ${response.status}`,\n        );\n      }\n    } catch (error: any) {\n      this.logger.error(\n        `Error deleting file from Supabase: ${filename}`,\n        error,\n      );\n      throw new Error(\n        `Failed to delete file from Supabase: ${error?.message || 'Unknown error'}`,\n      );\n    }\n  }\n\n  /**\n   * Get file extension from filename\n   * @param filename - The original filename\n   * @returns string - The file extension including the dot\n   */\n  private getFileExtension(filename: string): string {\n    const lastDotIndex = filename.lastIndexOf('.');\n    return lastDotIndex === -1 ? '' : filename.substring(lastDotIndex);\n  }\n\n  /**\n   * Upload file content to Supabase Storage\n   * @param bucket - The storage bucket name\n   * @param path - The file path/name in the bucket\n   * @param fileBuffer - The file content as buffer\n   * @param mimeType - The MIME type of the file\n   */\n  private async uploadToSupabase(\n    bucket: string,\n    path: string,\n    fileBuffer: Buffer,\n    mimeType: string,\n  ): Promise<void> {\n    const url = `${this.supabaseUrl}/storage/v1/object/${bucket}/${path}`;\n\n    try {\n      const response = await axios.post(url, fileBuffer, {\n        headers: {\n          'Content-Type': mimeType,\n          Authorization: `Bearer ${this.supabaseApiKey}`,\n        },\n      });\n\n      if (response.status === 200 || response.status === 201) {\n        this.logger.debug(`File uploaded successfully to Supabase: ${path}`);\n      } else {\n        this.logger.error(\n          `Failed to upload file to Supabase. Status: ${response.status}, Response: ${response.data}`,\n        );\n        throw new Error(\n          `Supabase upload failed with status: ${response.status}`,\n        );\n      }\n    } catch (error: any) {\n      if (error?.response) {\n        this.logger.error(\n          `Supabase API error: ${error.response.status} - ${error.response.data}`,\n        );\n        throw new Error(\n          `Supabase upload failed: ${error.response.data?.message || error.response.statusText}`,\n        );\n      } else {\n        this.logger.error(\n          `Network error during Supabase upload: ${error.message}`,\n        );\n        throw new Error(`Failed to upload to Supabase: ${error.message}`);\n      }\n    }\n  }\n\n  /**\n   * Validate file for upload\n   * @param file - The file to validate\n   * @param maxSizeInBytes - Maximum file size allowed\n   * @param allowedMimeTypes - Array of allowed MIME types\n   */\n  validateFile(\n    file: Express.Multer.File,\n    maxSizeInBytes: number = 10 * 1024 * 1024, // 10MB default\n    allowedMimeTypes: string[] = [\n      'image/jpeg',\n      'image/png',\n      'image/gif',\n      'image/webp',\n      'application/pdf',\n      'text/plain',\n      'text/csv',\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document', // .docx\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', // .xlsx\n      'application/vnd.openxmlformats-officedocument.presentationml.presentation', // .pptx\n      'application/msword', // .doc\n      'application/vnd.ms-excel', // .xls\n      'application/vnd.ms-powerpoint', // .ppt\n    ],\n  ): { isValid: boolean; error?: string } {\n    // File size validation\n    if (file.size > maxSizeInBytes) {\n      return {\n        isValid: false,\n        error: `File size exceeds ${Math.floor(maxSizeInBytes / (1024 * 1024))}MB limit`,\n      };\n    }\n\n    // MIME type validation\n    if (!allowedMimeTypes.includes(file.mimetype)) {\n      return {\n        isValid: false,\n        error: `File type ${file.mimetype} is not allowed`,\n      };\n    }\n\n    // Filename validation - prevent path traversal\n    const safeFilename = file.originalname.replace(/[^a-zA-Z0-9.-]/g, '_');\n    if (safeFilename !== file.originalname) {\n      return {\n        isValid: false,\n        error: 'Filename contains invalid characters',\n      };\n    }\n\n    return { isValid: true };\n  }\n\n  /**\n   * Get supported storage buckets\n   */\n  static getSupportedBuckets() {\n    return {\n      USER_PROFILES: 'user-profiles',\n      POST_ATTACHMENTS: 'post-attachments',\n      MESSAGES: 'messages',\n      DOCUMENTS: 'documents',\n      WORKSHEETS: 'worksheets',\n    } as const;\n  }\n}\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "066f17eadb173618037d4a77ae79b13950d36aa0"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2gz5alsydl = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2gz5alsydl();
var __decorate =
/* istanbul ignore next */
(cov_2gz5alsydl().s[0]++,
/* istanbul ignore next */
(cov_2gz5alsydl().b[0][0]++, this) &&
/* istanbul ignore next */
(cov_2gz5alsydl().b[0][1]++, this.__decorate) ||
/* istanbul ignore next */
(cov_2gz5alsydl().b[0][2]++, function (decorators, target, key, desc) {
  /* istanbul ignore next */
  cov_2gz5alsydl().f[0]++;
  var c =
    /* istanbul ignore next */
    (cov_2gz5alsydl().s[1]++, arguments.length),
    r =
    /* istanbul ignore next */
    (cov_2gz5alsydl().s[2]++, c < 3 ?
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[1][0]++, target) :
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[1][1]++, desc === null ?
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[2][0]++, desc = Object.getOwnPropertyDescriptor(target, key)) :
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[2][1]++, desc))),
    d;
  /* istanbul ignore next */
  cov_2gz5alsydl().s[3]++;
  if (
  /* istanbul ignore next */
  (cov_2gz5alsydl().b[4][0]++, typeof Reflect === "object") &&
  /* istanbul ignore next */
  (cov_2gz5alsydl().b[4][1]++, typeof Reflect.decorate === "function")) {
    /* istanbul ignore next */
    cov_2gz5alsydl().b[3][0]++;
    cov_2gz5alsydl().s[4]++;
    r = Reflect.decorate(decorators, target, key, desc);
  } else {
    /* istanbul ignore next */
    cov_2gz5alsydl().b[3][1]++;
    cov_2gz5alsydl().s[5]++;
    for (var i =
    /* istanbul ignore next */
    (cov_2gz5alsydl().s[6]++, decorators.length - 1); i >= 0; i--) {
      /* istanbul ignore next */
      cov_2gz5alsydl().s[7]++;
      if (d = decorators[i]) {
        /* istanbul ignore next */
        cov_2gz5alsydl().b[5][0]++;
        cov_2gz5alsydl().s[8]++;
        r =
        /* istanbul ignore next */
        (cov_2gz5alsydl().b[6][0]++, c < 3 ?
        /* istanbul ignore next */
        (cov_2gz5alsydl().b[7][0]++, d(r)) :
        /* istanbul ignore next */
        (cov_2gz5alsydl().b[7][1]++, c > 3 ?
        /* istanbul ignore next */
        (cov_2gz5alsydl().b[8][0]++, d(target, key, r)) :
        /* istanbul ignore next */
        (cov_2gz5alsydl().b[8][1]++, d(target, key)))) ||
        /* istanbul ignore next */
        (cov_2gz5alsydl().b[6][1]++, r);
      } else
      /* istanbul ignore next */
      {
        cov_2gz5alsydl().b[5][1]++;
      }
    }
  }
  /* istanbul ignore next */
  cov_2gz5alsydl().s[9]++;
  return /* istanbul ignore next */(cov_2gz5alsydl().b[9][0]++, c > 3) &&
  /* istanbul ignore next */
  (cov_2gz5alsydl().b[9][1]++, r) &&
  /* istanbul ignore next */
  (cov_2gz5alsydl().b[9][2]++, Object.defineProperty(target, key, r)), r;
}));
var __metadata =
/* istanbul ignore next */
(cov_2gz5alsydl().s[10]++,
/* istanbul ignore next */
(cov_2gz5alsydl().b[10][0]++, this) &&
/* istanbul ignore next */
(cov_2gz5alsydl().b[10][1]++, this.__metadata) ||
/* istanbul ignore next */
(cov_2gz5alsydl().b[10][2]++, function (k, v) {
  /* istanbul ignore next */
  cov_2gz5alsydl().f[1]++;
  cov_2gz5alsydl().s[11]++;
  if (
  /* istanbul ignore next */
  (cov_2gz5alsydl().b[12][0]++, typeof Reflect === "object") &&
  /* istanbul ignore next */
  (cov_2gz5alsydl().b[12][1]++, typeof Reflect.metadata === "function")) {
    /* istanbul ignore next */
    cov_2gz5alsydl().b[11][0]++;
    cov_2gz5alsydl().s[12]++;
    return Reflect.metadata(k, v);
  } else
  /* istanbul ignore next */
  {
    cov_2gz5alsydl().b[11][1]++;
  }
}));
var SupabaseStorageService_1;
var _a;
/* istanbul ignore next */
cov_2gz5alsydl().s[13]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_2gz5alsydl().s[14]++;
exports.SupabaseStorageService = void 0;
const common_1 =
/* istanbul ignore next */
(cov_2gz5alsydl().s[15]++, require("@nestjs/common"));
const config_1 =
/* istanbul ignore next */
(cov_2gz5alsydl().s[16]++, require("@nestjs/config"));
const axios_1 =
/* istanbul ignore next */
(cov_2gz5alsydl().s[17]++, require("axios"));
const uuid_1 =
/* istanbul ignore next */
(cov_2gz5alsydl().s[18]++, require("uuid"));
let SupabaseStorageService =
/* istanbul ignore next */
(cov_2gz5alsydl().s[19]++, SupabaseStorageService_1 = class SupabaseStorageService {
  configService;
  logger =
  /* istanbul ignore next */
  (cov_2gz5alsydl().s[20]++, new common_1.Logger(SupabaseStorageService_1.name));
  supabaseUrl;
  supabaseApiKey;
  constructor(configService) {
    /* istanbul ignore next */
    cov_2gz5alsydl().f[2]++;
    cov_2gz5alsydl().s[21]++;
    this.configService = configService;
    /* istanbul ignore next */
    cov_2gz5alsydl().s[22]++;
    this.supabaseUrl =
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[13][0]++, this.configService.get('SUPABASE_URL')) ||
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[13][1]++, '');
    /* istanbul ignore next */
    cov_2gz5alsydl().s[23]++;
    this.supabaseApiKey =
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[14][0]++, this.configService.get('SUPABASE_API_KEY')) ||
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[14][1]++, '');
    /* istanbul ignore next */
    cov_2gz5alsydl().s[24]++;
    if (
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[16][0]++, !this.supabaseUrl) ||
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[16][1]++, !this.supabaseApiKey)) {
      /* istanbul ignore next */
      cov_2gz5alsydl().b[15][0]++;
      cov_2gz5alsydl().s[25]++;
      throw new Error('Supabase configuration is missing. Please set SUPABASE_URL and SUPABASE_API_KEY environment variables.');
    } else
    /* istanbul ignore next */
    {
      cov_2gz5alsydl().b[15][1]++;
    }
  }
  /**
   * Upload a file to Supabase Storage
   * @param file - The file to upload
   * @param bucket - The storage bucket name
   * @returns Promise<FileUploadResult> - Upload result with filename and URL
   */
  async uploadFile(file, bucket) {
    /* istanbul ignore next */
    cov_2gz5alsydl().f[3]++;
    cov_2gz5alsydl().s[26]++;
    this.logger.log(`Uploading file to Supabase: ${file.originalname} (bucket: ${bucket})`);
    /* istanbul ignore next */
    cov_2gz5alsydl().s[27]++;
    try {
      // Generate unique filename to avoid conflicts
      const originalFilename =
      /* istanbul ignore next */
      (cov_2gz5alsydl().s[28]++, file.originalname);
      const fileExtension =
      /* istanbul ignore next */
      (cov_2gz5alsydl().s[29]++, this.getFileExtension(originalFilename));
      const uniqueFilename =
      /* istanbul ignore next */
      (cov_2gz5alsydl().s[30]++, `${(0, uuid_1.v4)()}${fileExtension}`);
      // Upload to Supabase
      /* istanbul ignore next */
      cov_2gz5alsydl().s[31]++;
      await this.uploadToSupabase(bucket, uniqueFilename, file.buffer, file.mimetype);
      // Generate public URL
      const publicUrl =
      /* istanbul ignore next */
      (cov_2gz5alsydl().s[32]++, `${this.supabaseUrl}/storage/v1/object/public/${bucket}/${uniqueFilename}`);
      /* istanbul ignore next */
      cov_2gz5alsydl().s[33]++;
      this.logger.log(`File uploaded successfully to Supabase: ${uniqueFilename}`);
      /* istanbul ignore next */
      cov_2gz5alsydl().s[34]++;
      return {
        filename: uniqueFilename,
        url: publicUrl,
        bucket
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_2gz5alsydl().s[35]++;
      this.logger.error(`Error uploading file to Supabase: ${file.originalname}`, error);
      /* istanbul ignore next */
      cov_2gz5alsydl().s[36]++;
      throw new Error(`Failed to upload file to Supabase: ${
      /* istanbul ignore next */
      (cov_2gz5alsydl().b[17][0]++, error?.message) ||
      /* istanbul ignore next */
      (cov_2gz5alsydl().b[17][1]++, 'Unknown error')}`);
    }
  }
  /**
   * Upload multiple files to Supabase Storage
   * @param files - Array of files to upload
   * @param bucket - The storage bucket name
   * @returns Promise<FileUploadResult[]> - Array of upload results
   */
  async uploadFiles(files, bucket) {
    /* istanbul ignore next */
    cov_2gz5alsydl().f[4]++;
    cov_2gz5alsydl().s[37]++;
    if (
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[19][0]++, !files) ||
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[19][1]++, files.length === 0)) {
      /* istanbul ignore next */
      cov_2gz5alsydl().b[18][0]++;
      cov_2gz5alsydl().s[38]++;
      return [];
    } else
    /* istanbul ignore next */
    {
      cov_2gz5alsydl().b[18][1]++;
    }
    cov_2gz5alsydl().s[39]++;
    this.logger.log(`Uploading ${files.length} files to Supabase bucket: ${bucket}`);
    /* istanbul ignore next */
    cov_2gz5alsydl().s[40]++;
    try {
      const uploadPromises =
      /* istanbul ignore next */
      (cov_2gz5alsydl().s[41]++, files.map(file => {
        /* istanbul ignore next */
        cov_2gz5alsydl().f[5]++;
        cov_2gz5alsydl().s[42]++;
        return this.uploadFile(file, bucket);
      }));
      const results =
      /* istanbul ignore next */
      (cov_2gz5alsydl().s[43]++, await Promise.all(uploadPromises));
      /* istanbul ignore next */
      cov_2gz5alsydl().s[44]++;
      this.logger.log(`Successfully uploaded ${results.length} files to Supabase`);
      /* istanbul ignore next */
      cov_2gz5alsydl().s[45]++;
      return results;
    } catch (error) {
      /* istanbul ignore next */
      cov_2gz5alsydl().s[46]++;
      this.logger.error(`Error uploading multiple files to Supabase`, error);
      /* istanbul ignore next */
      cov_2gz5alsydl().s[47]++;
      throw new Error(`Failed to upload files to Supabase: ${
      /* istanbul ignore next */
      (cov_2gz5alsydl().b[20][0]++, error?.message) ||
      /* istanbul ignore next */
      (cov_2gz5alsydl().b[20][1]++, 'Unknown error')}`);
    }
  }
  /**
   * Delete a file from Supabase Storage
   * @param bucket - The storage bucket name
   * @param filename - The filename to delete
   */
  async deleteFile(bucket, filename) {
    /* istanbul ignore next */
    cov_2gz5alsydl().f[6]++;
    cov_2gz5alsydl().s[48]++;
    this.logger.log(`Deleting file from Supabase: ${filename} (bucket: ${bucket})`);
    /* istanbul ignore next */
    cov_2gz5alsydl().s[49]++;
    try {
      const url =
      /* istanbul ignore next */
      (cov_2gz5alsydl().s[50]++, `${this.supabaseUrl}/storage/v1/object/${bucket}/${filename}`);
      const response =
      /* istanbul ignore next */
      (cov_2gz5alsydl().s[51]++, await axios_1.default.delete(url, {
        headers: {
          Authorization: `Bearer ${this.supabaseApiKey}`
        }
      }));
      /* istanbul ignore next */
      cov_2gz5alsydl().s[52]++;
      if (response.status === 200) {
        /* istanbul ignore next */
        cov_2gz5alsydl().b[21][0]++;
        cov_2gz5alsydl().s[53]++;
        this.logger.log(`File deleted successfully from Supabase: ${filename}`);
      } else {
        /* istanbul ignore next */
        cov_2gz5alsydl().b[21][1]++;
        cov_2gz5alsydl().s[54]++;
        this.logger.error(`Failed to delete file from Supabase. Status: ${response.status}, Response: ${response.data}`);
        /* istanbul ignore next */
        cov_2gz5alsydl().s[55]++;
        throw new Error(`Supabase delete failed with status: ${response.status}`);
      }
    } catch (error) {
      /* istanbul ignore next */
      cov_2gz5alsydl().s[56]++;
      this.logger.error(`Error deleting file from Supabase: ${filename}`, error);
      /* istanbul ignore next */
      cov_2gz5alsydl().s[57]++;
      throw new Error(`Failed to delete file from Supabase: ${
      /* istanbul ignore next */
      (cov_2gz5alsydl().b[22][0]++, error?.message) ||
      /* istanbul ignore next */
      (cov_2gz5alsydl().b[22][1]++, 'Unknown error')}`);
    }
  }
  /**
   * Get file extension from filename
   * @param filename - The original filename
   * @returns string - The file extension including the dot
   */
  getFileExtension(filename) {
    /* istanbul ignore next */
    cov_2gz5alsydl().f[7]++;
    const lastDotIndex =
    /* istanbul ignore next */
    (cov_2gz5alsydl().s[58]++, filename.lastIndexOf('.'));
    /* istanbul ignore next */
    cov_2gz5alsydl().s[59]++;
    return lastDotIndex === -1 ?
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[23][0]++, '') :
    /* istanbul ignore next */
    (cov_2gz5alsydl().b[23][1]++, filename.substring(lastDotIndex));
  }
  /**
   * Upload file content to Supabase Storage
   * @param bucket - The storage bucket name
   * @param path - The file path/name in the bucket
   * @param fileBuffer - The file content as buffer
   * @param mimeType - The MIME type of the file
   */
  async uploadToSupabase(bucket, path, fileBuffer, mimeType) {
    /* istanbul ignore next */
    cov_2gz5alsydl().f[8]++;
    const url =
    /* istanbul ignore next */
    (cov_2gz5alsydl().s[60]++, `${this.supabaseUrl}/storage/v1/object/${bucket}/${path}`);
    /* istanbul ignore next */
    cov_2gz5alsydl().s[61]++;
    try {
      const response =
      /* istanbul ignore next */
      (cov_2gz5alsydl().s[62]++, await axios_1.default.post(url, fileBuffer, {
        headers: {
          'Content-Type': mimeType,
          Authorization: `Bearer ${this.supabaseApiKey}`
        }
      }));
      /* istanbul ignore next */
      cov_2gz5alsydl().s[63]++;
      if (
      /* istanbul ignore next */
      (cov_2gz5alsydl().b[25][0]++, response.status === 200) ||
      /* istanbul ignore next */
      (cov_2gz5alsydl().b[25][1]++, response.status === 201)) {
        /* istanbul ignore next */
        cov_2gz5alsydl().b[24][0]++;
        cov_2gz5alsydl().s[64]++;
        this.logger.debug(`File uploaded successfully to Supabase: ${path}`);
      } else {
        /* istanbul ignore next */
        cov_2gz5alsydl().b[24][1]++;
        cov_2gz5alsydl().s[65]++;
        this.logger.error(`Failed to upload file to Supabase. Status: ${response.status}, Response: ${response.data}`);
        /* istanbul ignore next */
        cov_2gz5alsydl().s[66]++;
        throw new Error(`Supabase upload failed with status: ${response.status}`);
      }
    } catch (error) {
      /* istanbul ignore next */
      cov_2gz5alsydl().s[67]++;
      if (error?.response) {
        /* istanbul ignore next */
        cov_2gz5alsydl().b[26][0]++;
        cov_2gz5alsydl().s[68]++;
        this.logger.error(`Supabase API error: ${error.response.status} - ${error.response.data}`);
        /* istanbul ignore next */
        cov_2gz5alsydl().s[69]++;
        throw new Error(`Supabase upload failed: ${
        /* istanbul ignore next */
        (cov_2gz5alsydl().b[27][0]++, error.response.data?.message) ||
        /* istanbul ignore next */
        (cov_2gz5alsydl().b[27][1]++, error.response.statusText)}`);
      } else {
        /* istanbul ignore next */
        cov_2gz5alsydl().b[26][1]++;
        cov_2gz5alsydl().s[70]++;
        this.logger.error(`Network error during Supabase upload: ${error.message}`);
        /* istanbul ignore next */
        cov_2gz5alsydl().s[71]++;
        throw new Error(`Failed to upload to Supabase: ${error.message}`);
      }
    }
  }
  /**
   * Validate file for upload
   * @param file - The file to validate
   * @param maxSizeInBytes - Maximum file size allowed
   * @param allowedMimeTypes - Array of allowed MIME types
   */
  validateFile(file, maxSizeInBytes =
  /* istanbul ignore next */
  (cov_2gz5alsydl().b[28][0]++, 10 * 1024 * 1024),
  // 10MB default
  allowedMimeTypes =
  /* istanbul ignore next */
  (cov_2gz5alsydl().b[29][0]++, ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'application/pdf', 'text/plain', 'text/csv', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
  // .docx
  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
  // .xlsx
  'application/vnd.openxmlformats-officedocument.presentationml.presentation',
  // .pptx
  'application/msword',
  // .doc
  'application/vnd.ms-excel',
  // .xls
  'application/vnd.ms-powerpoint' // .ppt
  ])) {
    /* istanbul ignore next */
    cov_2gz5alsydl().f[9]++;
    cov_2gz5alsydl().s[72]++;
    // File size validation
    if (file.size > maxSizeInBytes) {
      /* istanbul ignore next */
      cov_2gz5alsydl().b[30][0]++;
      cov_2gz5alsydl().s[73]++;
      return {
        isValid: false,
        error: `File size exceeds ${Math.floor(maxSizeInBytes / (1024 * 1024))}MB limit`
      };
    } else
    /* istanbul ignore next */
    {
      cov_2gz5alsydl().b[30][1]++;
    }
    // MIME type validation
    cov_2gz5alsydl().s[74]++;
    if (!allowedMimeTypes.includes(file.mimetype)) {
      /* istanbul ignore next */
      cov_2gz5alsydl().b[31][0]++;
      cov_2gz5alsydl().s[75]++;
      return {
        isValid: false,
        error: `File type ${file.mimetype} is not allowed`
      };
    } else
    /* istanbul ignore next */
    {
      cov_2gz5alsydl().b[31][1]++;
    }
    // Filename validation - prevent path traversal
    const safeFilename =
    /* istanbul ignore next */
    (cov_2gz5alsydl().s[76]++, file.originalname.replace(/[^a-zA-Z0-9.-]/g, '_'));
    /* istanbul ignore next */
    cov_2gz5alsydl().s[77]++;
    if (safeFilename !== file.originalname) {
      /* istanbul ignore next */
      cov_2gz5alsydl().b[32][0]++;
      cov_2gz5alsydl().s[78]++;
      return {
        isValid: false,
        error: 'Filename contains invalid characters'
      };
    } else
    /* istanbul ignore next */
    {
      cov_2gz5alsydl().b[32][1]++;
    }
    cov_2gz5alsydl().s[79]++;
    return {
      isValid: true
    };
  }
  /**
   * Get supported storage buckets
   */
  static getSupportedBuckets() {
    /* istanbul ignore next */
    cov_2gz5alsydl().f[10]++;
    cov_2gz5alsydl().s[80]++;
    return {
      USER_PROFILES: 'user-profiles',
      POST_ATTACHMENTS: 'post-attachments',
      MESSAGES: 'messages',
      DOCUMENTS: 'documents',
      WORKSHEETS: 'worksheets'
    };
  }
});
/* istanbul ignore next */
cov_2gz5alsydl().s[81]++;
exports.SupabaseStorageService = SupabaseStorageService;
/* istanbul ignore next */
cov_2gz5alsydl().s[82]++;
exports.SupabaseStorageService = SupabaseStorageService = SupabaseStorageService_1 = __decorate([(0, common_1.Injectable)(), __metadata("design:paramtypes", [typeof (_a =
/* istanbul ignore next */
(cov_2gz5alsydl().b[34][0]++, typeof config_1.ConfigService !== "undefined") &&
/* istanbul ignore next */
(cov_2gz5alsydl().b[34][1]++, config_1.ConfigService)) === "function" ?
/* istanbul ignore next */
(cov_2gz5alsydl().b[33][0]++, _a) :
/* istanbul ignore next */
(cov_2gz5alsydl().b[33][1]++, Object)])], SupabaseStorageService);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmd6NWFsc3lkbCIsImFjdHVhbENvdmVyYWdlIiwiY29tbW9uXzEiLCJzIiwicmVxdWlyZSIsImNvbmZpZ18xIiwiYXhpb3NfMSIsInV1aWRfMSIsIlN1cGFiYXNlU3RvcmFnZVNlcnZpY2UiLCJTdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlXzEiLCJjb25maWdTZXJ2aWNlIiwibG9nZ2VyIiwiTG9nZ2VyIiwibmFtZSIsInN1cGFiYXNlVXJsIiwic3VwYWJhc2VBcGlLZXkiLCJjb25zdHJ1Y3RvciIsImYiLCJiIiwiZ2V0IiwiRXJyb3IiLCJ1cGxvYWRGaWxlIiwiZmlsZSIsImJ1Y2tldCIsImxvZyIsIm9yaWdpbmFsbmFtZSIsIm9yaWdpbmFsRmlsZW5hbWUiLCJmaWxlRXh0ZW5zaW9uIiwiZ2V0RmlsZUV4dGVuc2lvbiIsInVuaXF1ZUZpbGVuYW1lIiwidjQiLCJ1cGxvYWRUb1N1cGFiYXNlIiwiYnVmZmVyIiwibWltZXR5cGUiLCJwdWJsaWNVcmwiLCJmaWxlbmFtZSIsInVybCIsImVycm9yIiwibWVzc2FnZSIsInVwbG9hZEZpbGVzIiwiZmlsZXMiLCJsZW5ndGgiLCJ1cGxvYWRQcm9taXNlcyIsIm1hcCIsInJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwiZGVsZXRlRmlsZSIsInJlc3BvbnNlIiwiZGVmYXVsdCIsImRlbGV0ZSIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwic3RhdHVzIiwiZGF0YSIsImxhc3REb3RJbmRleCIsImxhc3RJbmRleE9mIiwic3Vic3RyaW5nIiwicGF0aCIsImZpbGVCdWZmZXIiLCJtaW1lVHlwZSIsInBvc3QiLCJkZWJ1ZyIsInN0YXR1c1RleHQiLCJ2YWxpZGF0ZUZpbGUiLCJtYXhTaXplSW5CeXRlcyIsImFsbG93ZWRNaW1lVHlwZXMiLCJzaXplIiwiaXNWYWxpZCIsIk1hdGgiLCJmbG9vciIsImluY2x1ZGVzIiwic2FmZUZpbGVuYW1lIiwicmVwbGFjZSIsImdldFN1cHBvcnRlZEJ1Y2tldHMiLCJVU0VSX1BST0ZJTEVTIiwiUE9TVF9BVFRBQ0hNRU5UUyIsIk1FU1NBR0VTIiwiRE9DVU1FTlRTIiwiV09SS1NIRUVUUyIsImV4cG9ydHMiLCJfX2RlY29yYXRlIiwiSW5qZWN0YWJsZSIsIkNvbmZpZ1NlcnZpY2UiLCJfYSIsIk9iamVjdCJdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy9jb21tb24vc2VydmljZXMvc3VwYWJhc2Utc3RvcmFnZS5zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIExvZ2dlciB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IENvbmZpZ1NlcnZpY2UgfSBmcm9tICdAbmVzdGpzL2NvbmZpZyc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVVwbG9hZFJlc3VsdCB7XG4gIGZpbGVuYW1lOiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICBidWNrZXQ6IHN0cmluZztcbn1cblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFN1cGFiYXNlU3RvcmFnZVNlcnZpY2Uge1xuICBwcml2YXRlIHJlYWRvbmx5IGxvZ2dlciA9IG5ldyBMb2dnZXIoU3VwYWJhc2VTdG9yYWdlU2VydmljZS5uYW1lKTtcbiAgcHJpdmF0ZSByZWFkb25seSBzdXBhYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIHJlYWRvbmx5IHN1cGFiYXNlQXBpS2V5OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWdTZXJ2aWNlOiBDb25maWdTZXJ2aWNlKSB7XG4gICAgdGhpcy5zdXBhYmFzZVVybCA9IHRoaXMuY29uZmlnU2VydmljZS5nZXQ8c3RyaW5nPignU1VQQUJBU0VfVVJMJykgfHwgJyc7XG4gICAgdGhpcy5zdXBhYmFzZUFwaUtleSA9XG4gICAgICB0aGlzLmNvbmZpZ1NlcnZpY2UuZ2V0PHN0cmluZz4oJ1NVUEFCQVNFX0FQSV9LRVknKSB8fCAnJztcblxuICAgIGlmICghdGhpcy5zdXBhYmFzZVVybCB8fCAhdGhpcy5zdXBhYmFzZUFwaUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnU3VwYWJhc2UgY29uZmlndXJhdGlvbiBpcyBtaXNzaW5nLiBQbGVhc2Ugc2V0IFNVUEFCQVNFX1VSTCBhbmQgU1VQQUJBU0VfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwbG9hZCBhIGZpbGUgdG8gU3VwYWJhc2UgU3RvcmFnZVxuICAgKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIHRvIHVwbG9hZFxuICAgKiBAcGFyYW0gYnVja2V0IC0gVGhlIHN0b3JhZ2UgYnVja2V0IG5hbWVcbiAgICogQHJldHVybnMgUHJvbWlzZTxGaWxlVXBsb2FkUmVzdWx0PiAtIFVwbG9hZCByZXN1bHQgd2l0aCBmaWxlbmFtZSBhbmQgVVJMXG4gICAqL1xuICBhc3luYyB1cGxvYWRGaWxlKFxuICAgIGZpbGU6IEV4cHJlc3MuTXVsdGVyLkZpbGUsXG4gICAgYnVja2V0OiBzdHJpbmcsXG4gICk6IFByb21pc2U8RmlsZVVwbG9hZFJlc3VsdD4ge1xuICAgIHRoaXMubG9nZ2VyLmxvZyhcbiAgICAgIGBVcGxvYWRpbmcgZmlsZSB0byBTdXBhYmFzZTogJHtmaWxlLm9yaWdpbmFsbmFtZX0gKGJ1Y2tldDogJHtidWNrZXR9KWAsXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgZmlsZW5hbWUgdG8gYXZvaWQgY29uZmxpY3RzXG4gICAgICBjb25zdCBvcmlnaW5hbEZpbGVuYW1lID0gZmlsZS5vcmlnaW5hbG5hbWU7XG4gICAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gdGhpcy5nZXRGaWxlRXh0ZW5zaW9uKG9yaWdpbmFsRmlsZW5hbWUpO1xuICAgICAgY29uc3QgdW5pcXVlRmlsZW5hbWUgPSBgJHt1dWlkdjQoKX0ke2ZpbGVFeHRlbnNpb259YDtcblxuICAgICAgLy8gVXBsb2FkIHRvIFN1cGFiYXNlXG4gICAgICBhd2FpdCB0aGlzLnVwbG9hZFRvU3VwYWJhc2UoXG4gICAgICAgIGJ1Y2tldCxcbiAgICAgICAgdW5pcXVlRmlsZW5hbWUsXG4gICAgICAgIGZpbGUuYnVmZmVyLFxuICAgICAgICBmaWxlLm1pbWV0eXBlLFxuICAgICAgKTtcblxuICAgICAgLy8gR2VuZXJhdGUgcHVibGljIFVSTFxuICAgICAgY29uc3QgcHVibGljVXJsID0gYCR7dGhpcy5zdXBhYmFzZVVybH0vc3RvcmFnZS92MS9vYmplY3QvcHVibGljLyR7YnVja2V0fS8ke3VuaXF1ZUZpbGVuYW1lfWA7XG5cbiAgICAgIHRoaXMubG9nZ2VyLmxvZyhcbiAgICAgICAgYEZpbGUgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5IHRvIFN1cGFiYXNlOiAke3VuaXF1ZUZpbGVuYW1lfWAsXG4gICAgICApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBmaWxlbmFtZTogdW5pcXVlRmlsZW5hbWUsXG4gICAgICAgIHVybDogcHVibGljVXJsLFxuICAgICAgICBidWNrZXQsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICBgRXJyb3IgdXBsb2FkaW5nIGZpbGUgdG8gU3VwYWJhc2U6ICR7ZmlsZS5vcmlnaW5hbG5hbWV9YCxcbiAgICAgICAgZXJyb3IsXG4gICAgICApO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgRmFpbGVkIHRvIHVwbG9hZCBmaWxlIHRvIFN1cGFiYXNlOiAke2Vycm9yPy5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBsb2FkIG11bHRpcGxlIGZpbGVzIHRvIFN1cGFiYXNlIFN0b3JhZ2VcbiAgICogQHBhcmFtIGZpbGVzIC0gQXJyYXkgb2YgZmlsZXMgdG8gdXBsb2FkXG4gICAqIEBwYXJhbSBidWNrZXQgLSBUaGUgc3RvcmFnZSBidWNrZXQgbmFtZVxuICAgKiBAcmV0dXJucyBQcm9taXNlPEZpbGVVcGxvYWRSZXN1bHRbXT4gLSBBcnJheSBvZiB1cGxvYWQgcmVzdWx0c1xuICAgKi9cbiAgYXN5bmMgdXBsb2FkRmlsZXMoXG4gICAgZmlsZXM6IEV4cHJlc3MuTXVsdGVyLkZpbGVbXSxcbiAgICBidWNrZXQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxGaWxlVXBsb2FkUmVzdWx0W10+IHtcbiAgICBpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHRoaXMubG9nZ2VyLmxvZyhcbiAgICAgIGBVcGxvYWRpbmcgJHtmaWxlcy5sZW5ndGh9IGZpbGVzIHRvIFN1cGFiYXNlIGJ1Y2tldDogJHtidWNrZXR9YCxcbiAgICApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVwbG9hZFByb21pc2VzID0gZmlsZXMubWFwKChmaWxlKSA9PiB0aGlzLnVwbG9hZEZpbGUoZmlsZSwgYnVja2V0KSk7XG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodXBsb2FkUHJvbWlzZXMpO1xuXG4gICAgICB0aGlzLmxvZ2dlci5sb2coXG4gICAgICAgIGBTdWNjZXNzZnVsbHkgdXBsb2FkZWQgJHtyZXN1bHRzLmxlbmd0aH0gZmlsZXMgdG8gU3VwYWJhc2VgLFxuICAgICAgKTtcbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBFcnJvciB1cGxvYWRpbmcgbXVsdGlwbGUgZmlsZXMgdG8gU3VwYWJhc2VgLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gdXBsb2FkIGZpbGVzIHRvIFN1cGFiYXNlOiAke2Vycm9yPy5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgZmlsZSBmcm9tIFN1cGFiYXNlIFN0b3JhZ2VcbiAgICogQHBhcmFtIGJ1Y2tldCAtIFRoZSBzdG9yYWdlIGJ1Y2tldCBuYW1lXG4gICAqIEBwYXJhbSBmaWxlbmFtZSAtIFRoZSBmaWxlbmFtZSB0byBkZWxldGVcbiAgICovXG4gIGFzeW5jIGRlbGV0ZUZpbGUoYnVja2V0OiBzdHJpbmcsIGZpbGVuYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmxvZ2dlci5sb2coXG4gICAgICBgRGVsZXRpbmcgZmlsZSBmcm9tIFN1cGFiYXNlOiAke2ZpbGVuYW1lfSAoYnVja2V0OiAke2J1Y2tldH0pYCxcbiAgICApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuc3VwYWJhc2VVcmx9L3N0b3JhZ2UvdjEvb2JqZWN0LyR7YnVja2V0fS8ke2ZpbGVuYW1lfWA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZGVsZXRlKHVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuc3VwYWJhc2VBcGlLZXl9YCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBGaWxlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5IGZyb20gU3VwYWJhc2U6ICR7ZmlsZW5hbWV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcbiAgICAgICAgICBgRmFpbGVkIHRvIGRlbGV0ZSBmaWxlIGZyb20gU3VwYWJhc2UuIFN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9LCBSZXNwb25zZTogJHtyZXNwb25zZS5kYXRhfWAsXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgU3VwYWJhc2UgZGVsZXRlIGZhaWxlZCB3aXRoIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihcbiAgICAgICAgYEVycm9yIGRlbGV0aW5nIGZpbGUgZnJvbSBTdXBhYmFzZTogJHtmaWxlbmFtZX1gLFxuICAgICAgICBlcnJvcixcbiAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gZGVsZXRlIGZpbGUgZnJvbSBTdXBhYmFzZTogJHtlcnJvcj8ubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaWxlIGV4dGVuc2lvbiBmcm9tIGZpbGVuYW1lXG4gICAqIEBwYXJhbSBmaWxlbmFtZSAtIFRoZSBvcmlnaW5hbCBmaWxlbmFtZVxuICAgKiBAcmV0dXJucyBzdHJpbmcgLSBUaGUgZmlsZSBleHRlbnNpb24gaW5jbHVkaW5nIHRoZSBkb3RcbiAgICovXG4gIHByaXZhdGUgZ2V0RmlsZUV4dGVuc2lvbihmaWxlbmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsYXN0RG90SW5kZXggPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpO1xuICAgIHJldHVybiBsYXN0RG90SW5kZXggPT09IC0xID8gJycgOiBmaWxlbmFtZS5zdWJzdHJpbmcobGFzdERvdEluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGxvYWQgZmlsZSBjb250ZW50IHRvIFN1cGFiYXNlIFN0b3JhZ2VcbiAgICogQHBhcmFtIGJ1Y2tldCAtIFRoZSBzdG9yYWdlIGJ1Y2tldCBuYW1lXG4gICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpbGUgcGF0aC9uYW1lIGluIHRoZSBidWNrZXRcbiAgICogQHBhcmFtIGZpbGVCdWZmZXIgLSBUaGUgZmlsZSBjb250ZW50IGFzIGJ1ZmZlclxuICAgKiBAcGFyYW0gbWltZVR5cGUgLSBUaGUgTUlNRSB0eXBlIG9mIHRoZSBmaWxlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHVwbG9hZFRvU3VwYWJhc2UoXG4gICAgYnVja2V0OiBzdHJpbmcsXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIGZpbGVCdWZmZXI6IEJ1ZmZlcixcbiAgICBtaW1lVHlwZTogc3RyaW5nLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLnN1cGFiYXNlVXJsfS9zdG9yYWdlL3YxL29iamVjdC8ke2J1Y2tldH0vJHtwYXRofWA7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KHVybCwgZmlsZUJ1ZmZlciwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IG1pbWVUeXBlLFxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLnN1cGFiYXNlQXBpS2V5fWAsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseSB0byBTdXBhYmFzZTogJHtwYXRofWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgYEZhaWxlZCB0byB1cGxvYWQgZmlsZSB0byBTdXBhYmFzZS4gU3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c30sIFJlc3BvbnNlOiAke3Jlc3BvbnNlLmRhdGF9YCxcbiAgICAgICAgKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBTdXBhYmFzZSB1cGxvYWQgZmFpbGVkIHdpdGggc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGlmIChlcnJvcj8ucmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgYFN1cGFiYXNlIEFQSSBlcnJvcjogJHtlcnJvci5yZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvci5yZXNwb25zZS5kYXRhfWAsXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgU3VwYWJhc2UgdXBsb2FkIGZhaWxlZDogJHtlcnJvci5yZXNwb25zZS5kYXRhPy5tZXNzYWdlIHx8IGVycm9yLnJlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICAgIGBOZXR3b3JrIGVycm9yIGR1cmluZyBTdXBhYmFzZSB1cGxvYWQ6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICApO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGxvYWQgdG8gU3VwYWJhc2U6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgZmlsZSBmb3IgdXBsb2FkXG4gICAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgdG8gdmFsaWRhdGVcbiAgICogQHBhcmFtIG1heFNpemVJbkJ5dGVzIC0gTWF4aW11bSBmaWxlIHNpemUgYWxsb3dlZFxuICAgKiBAcGFyYW0gYWxsb3dlZE1pbWVUeXBlcyAtIEFycmF5IG9mIGFsbG93ZWQgTUlNRSB0eXBlc1xuICAgKi9cbiAgdmFsaWRhdGVGaWxlKFxuICAgIGZpbGU6IEV4cHJlc3MuTXVsdGVyLkZpbGUsXG4gICAgbWF4U2l6ZUluQnl0ZXM6IG51bWJlciA9IDEwICogMTAyNCAqIDEwMjQsIC8vIDEwTUIgZGVmYXVsdFxuICAgIGFsbG93ZWRNaW1lVHlwZXM6IHN0cmluZ1tdID0gW1xuICAgICAgJ2ltYWdlL2pwZWcnLFxuICAgICAgJ2ltYWdlL3BuZycsXG4gICAgICAnaW1hZ2UvZ2lmJyxcbiAgICAgICdpbWFnZS93ZWJwJyxcbiAgICAgICdhcHBsaWNhdGlvbi9wZGYnLFxuICAgICAgJ3RleHQvcGxhaW4nLFxuICAgICAgJ3RleHQvY3N2JyxcbiAgICAgICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCcsIC8vIC5kb2N4XG4gICAgICAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnLCAvLyAueGxzeFxuICAgICAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC5wcmVzZW50YXRpb24nLCAvLyAucHB0eFxuICAgICAgJ2FwcGxpY2F0aW9uL21zd29yZCcsIC8vIC5kb2NcbiAgICAgICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnLCAvLyAueGxzXG4gICAgICAnYXBwbGljYXRpb24vdm5kLm1zLXBvd2VycG9pbnQnLCAvLyAucHB0XG4gICAgXSxcbiAgKTogeyBpc1ZhbGlkOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9IHtcbiAgICAvLyBGaWxlIHNpemUgdmFsaWRhdGlvblxuICAgIGlmIChmaWxlLnNpemUgPiBtYXhTaXplSW5CeXRlcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgRmlsZSBzaXplIGV4Y2VlZHMgJHtNYXRoLmZsb29yKG1heFNpemVJbkJ5dGVzIC8gKDEwMjQgKiAxMDI0KSl9TUIgbGltaXRgLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNSU1FIHR5cGUgdmFsaWRhdGlvblxuICAgIGlmICghYWxsb3dlZE1pbWVUeXBlcy5pbmNsdWRlcyhmaWxlLm1pbWV0eXBlKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgRmlsZSB0eXBlICR7ZmlsZS5taW1ldHlwZX0gaXMgbm90IGFsbG93ZWRgLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBGaWxlbmFtZSB2YWxpZGF0aW9uIC0gcHJldmVudCBwYXRoIHRyYXZlcnNhbFxuICAgIGNvbnN0IHNhZmVGaWxlbmFtZSA9IGZpbGUub3JpZ2luYWxuYW1lLnJlcGxhY2UoL1teYS16QS1aMC05Li1dL2csICdfJyk7XG4gICAgaWYgKHNhZmVGaWxlbmFtZSAhPT0gZmlsZS5vcmlnaW5hbG5hbWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0ZpbGVuYW1lIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycycsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IGlzVmFsaWQ6IHRydWUgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3VwcG9ydGVkIHN0b3JhZ2UgYnVja2V0c1xuICAgKi9cbiAgc3RhdGljIGdldFN1cHBvcnRlZEJ1Y2tldHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFVTRVJfUFJPRklMRVM6ICd1c2VyLXByb2ZpbGVzJyxcbiAgICAgIFBPU1RfQVRUQUNITUVOVFM6ICdwb3N0LWF0dGFjaG1lbnRzJyxcbiAgICAgIE1FU1NBR0VTOiAnbWVzc2FnZXMnLFxuICAgICAgRE9DVU1FTlRTOiAnZG9jdW1lbnRzJyxcbiAgICAgIFdPUktTSEVFVFM6ICd3b3Jrc2hlZXRzJyxcbiAgICB9IGFzIGNvbnN0O1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBQ0E7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsY0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFEQSxNQUFBRSxRQUFBO0FBQUE7QUFBQSxDQUFBRixjQUFBLEdBQUFHLENBQUEsUUFBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUE7QUFBQTtBQUFBLENBQUFMLGNBQUEsR0FBQUcsQ0FBQSxRQUFBQyxPQUFBO0FBQ0EsTUFBQUUsT0FBQTtBQUFBO0FBQUEsQ0FBQU4sY0FBQSxHQUFBRyxDQUFBLFFBQUFDLE9BQUE7QUFDQSxNQUFBRyxNQUFBO0FBQUE7QUFBQSxDQUFBUCxjQUFBLEdBQUFHLENBQUEsUUFBQUMsT0FBQTtBQVNPLElBQU1JLHNCQUFzQjtBQUFBO0FBQUEsQ0FBQVIsY0FBQSxHQUFBRyxDQUFBLFFBQUFNLHdCQUFBLEdBQTVCLE1BQU1ELHNCQUFzQjtFQUtiRSxhQUFBO0VBSkhDLE1BQU07RUFBQTtFQUFBLENBQUFYLGNBQUEsR0FBQUcsQ0FBQSxRQUFHLElBQUlELFFBQUEsQ0FBQVUsTUFBTSxDQUFDSCx3QkFBc0IsQ0FBQ0ksSUFBSSxDQUFDO0VBQ2hEQyxXQUFXO0VBQ1hDLGNBQWM7RUFFL0JDLFlBQW9CTixhQUE0QjtJQUFBO0lBQUFWLGNBQUEsR0FBQWlCLENBQUE7SUFBQWpCLGNBQUEsR0FBQUcsQ0FBQTtJQUE1QixLQUFBTyxhQUFhLEdBQWJBLGFBQWE7SUFBZTtJQUFBVixjQUFBLEdBQUFHLENBQUE7SUFDOUMsSUFBSSxDQUFDVyxXQUFXO0lBQUc7SUFBQSxDQUFBZCxjQUFBLEdBQUFrQixDQUFBLGVBQUksQ0FBQ1IsYUFBYSxDQUFDUyxHQUFHLENBQVMsY0FBYyxDQUFDO0lBQUE7SUFBQSxDQUFBbkIsY0FBQSxHQUFBa0IsQ0FBQSxXQUFJLEVBQUU7SUFBQztJQUFBbEIsY0FBQSxHQUFBRyxDQUFBO0lBQ3hFLElBQUksQ0FBQ1ksY0FBYztJQUNqQjtJQUFBLENBQUFmLGNBQUEsR0FBQWtCLENBQUEsZUFBSSxDQUFDUixhQUFhLENBQUNTLEdBQUcsQ0FBUyxrQkFBa0IsQ0FBQztJQUFBO0lBQUEsQ0FBQW5CLGNBQUEsR0FBQWtCLENBQUEsV0FBSSxFQUFFO0lBQUM7SUFBQWxCLGNBQUEsR0FBQUcsQ0FBQTtJQUUzRDtJQUFJO0lBQUEsQ0FBQUgsY0FBQSxHQUFBa0IsQ0FBQSxZQUFDLElBQUksQ0FBQ0osV0FBVztJQUFBO0lBQUEsQ0FBQWQsY0FBQSxHQUFBa0IsQ0FBQSxXQUFJLENBQUMsSUFBSSxDQUFDSCxjQUFjLEdBQUU7TUFBQTtNQUFBZixjQUFBLEdBQUFrQixDQUFBO01BQUFsQixjQUFBLEdBQUFHLENBQUE7TUFDN0MsTUFBTSxJQUFJaUIsS0FBSyxDQUNiLHdHQUF3RyxDQUN6RztJQUNILENBQUM7SUFBQTtJQUFBO01BQUFwQixjQUFBLEdBQUFrQixDQUFBO0lBQUE7RUFDSDtFQUVBOzs7Ozs7RUFNQSxNQUFNRyxVQUFVQSxDQUNkQyxJQUF5QixFQUN6QkMsTUFBYztJQUFBO0lBQUF2QixjQUFBLEdBQUFpQixDQUFBO0lBQUFqQixjQUFBLEdBQUFHLENBQUE7SUFFZCxJQUFJLENBQUNRLE1BQU0sQ0FBQ2EsR0FBRyxDQUNiLCtCQUErQkYsSUFBSSxDQUFDRyxZQUFZLGFBQWFGLE1BQU0sR0FBRyxDQUN2RTtJQUFDO0lBQUF2QixjQUFBLEdBQUFHLENBQUE7SUFFRixJQUFJO01BQ0Y7TUFDQSxNQUFNdUIsZ0JBQWdCO01BQUE7TUFBQSxDQUFBMUIsY0FBQSxHQUFBRyxDQUFBLFFBQUdtQixJQUFJLENBQUNHLFlBQVk7TUFDMUMsTUFBTUUsYUFBYTtNQUFBO01BQUEsQ0FBQTNCLGNBQUEsR0FBQUcsQ0FBQSxRQUFHLElBQUksQ0FBQ3lCLGdCQUFnQixDQUFDRixnQkFBZ0IsQ0FBQztNQUM3RCxNQUFNRyxjQUFjO01BQUE7TUFBQSxDQUFBN0IsY0FBQSxHQUFBRyxDQUFBLFFBQUcsR0FBRyxJQUFBSSxNQUFBLENBQUF1QixFQUFNLEdBQUUsR0FBR0gsYUFBYSxFQUFFO01BRXBEO01BQUE7TUFBQTNCLGNBQUEsR0FBQUcsQ0FBQTtNQUNBLE1BQU0sSUFBSSxDQUFDNEIsZ0JBQWdCLENBQ3pCUixNQUFNLEVBQ05NLGNBQWMsRUFDZFAsSUFBSSxDQUFDVSxNQUFNLEVBQ1hWLElBQUksQ0FBQ1csUUFBUSxDQUNkO01BRUQ7TUFDQSxNQUFNQyxTQUFTO01BQUE7TUFBQSxDQUFBbEMsY0FBQSxHQUFBRyxDQUFBLFFBQUcsR0FBRyxJQUFJLENBQUNXLFdBQVcsNkJBQTZCUyxNQUFNLElBQUlNLGNBQWMsRUFBRTtNQUFDO01BQUE3QixjQUFBLEdBQUFHLENBQUE7TUFFN0YsSUFBSSxDQUFDUSxNQUFNLENBQUNhLEdBQUcsQ0FDYiwyQ0FBMkNLLGNBQWMsRUFBRSxDQUM1RDtNQUFDO01BQUE3QixjQUFBLEdBQUFHLENBQUE7TUFFRixPQUFPO1FBQ0xnQyxRQUFRLEVBQUVOLGNBQWM7UUFDeEJPLEdBQUcsRUFBRUYsU0FBUztRQUNkWDtPQUNEO0lBQ0gsQ0FBQyxDQUFDLE9BQU9jLEtBQVUsRUFBRTtNQUFBO01BQUFyQyxjQUFBLEdBQUFHLENBQUE7TUFDbkIsSUFBSSxDQUFDUSxNQUFNLENBQUMwQixLQUFLLENBQ2YscUNBQXFDZixJQUFJLENBQUNHLFlBQVksRUFBRSxFQUN4RFksS0FBSyxDQUNOO01BQUM7TUFBQXJDLGNBQUEsR0FBQUcsQ0FBQTtNQUNGLE1BQU0sSUFBSWlCLEtBQUssQ0FDYjtNQUFzQztNQUFBLENBQUFwQixjQUFBLEdBQUFrQixDQUFBLFdBQUFtQixLQUFLLEVBQUVDLE9BQU87TUFBQTtNQUFBLENBQUF0QyxjQUFBLEdBQUFrQixDQUFBLFdBQUksZUFBZSxHQUFFLENBQzFFO0lBQ0g7RUFDRjtFQUVBOzs7Ozs7RUFNQSxNQUFNcUIsV0FBV0EsQ0FDZkMsS0FBNEIsRUFDNUJqQixNQUFjO0lBQUE7SUFBQXZCLGNBQUEsR0FBQWlCLENBQUE7SUFBQWpCLGNBQUEsR0FBQUcsQ0FBQTtJQUVkO0lBQUk7SUFBQSxDQUFBSCxjQUFBLEdBQUFrQixDQUFBLFlBQUNzQixLQUFLO0lBQUE7SUFBQSxDQUFBeEMsY0FBQSxHQUFBa0IsQ0FBQSxXQUFJc0IsS0FBSyxDQUFDQyxNQUFNLEtBQUssQ0FBQyxHQUFFO01BQUE7TUFBQXpDLGNBQUEsR0FBQWtCLENBQUE7TUFBQWxCLGNBQUEsR0FBQUcsQ0FBQTtNQUNoQyxPQUFPLEVBQUU7SUFDWCxDQUFDO0lBQUE7SUFBQTtNQUFBSCxjQUFBLEdBQUFrQixDQUFBO0lBQUE7SUFBQWxCLGNBQUEsR0FBQUcsQ0FBQTtJQUVELElBQUksQ0FBQ1EsTUFBTSxDQUFDYSxHQUFHLENBQ2IsYUFBYWdCLEtBQUssQ0FBQ0MsTUFBTSw4QkFBOEJsQixNQUFNLEVBQUUsQ0FDaEU7SUFBQztJQUFBdkIsY0FBQSxHQUFBRyxDQUFBO0lBRUYsSUFBSTtNQUNGLE1BQU11QyxjQUFjO01BQUE7TUFBQSxDQUFBMUMsY0FBQSxHQUFBRyxDQUFBLFFBQUdxQyxLQUFLLENBQUNHLEdBQUcsQ0FBRXJCLElBQUksSUFBSztRQUFBO1FBQUF0QixjQUFBLEdBQUFpQixDQUFBO1FBQUFqQixjQUFBLEdBQUFHLENBQUE7UUFBQSxXQUFJLENBQUNrQixVQUFVLENBQUNDLElBQUksRUFBRUMsTUFBTSxDQUFDO01BQUQsQ0FBQyxDQUFDO01BQ3pFLE1BQU1xQixPQUFPO01BQUE7TUFBQSxDQUFBNUMsY0FBQSxHQUFBRyxDQUFBLFFBQUcsTUFBTTBDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSixjQUFjLENBQUM7TUFBQztNQUFBMUMsY0FBQSxHQUFBRyxDQUFBO01BRWxELElBQUksQ0FBQ1EsTUFBTSxDQUFDYSxHQUFHLENBQ2IseUJBQXlCb0IsT0FBTyxDQUFDSCxNQUFNLG9CQUFvQixDQUM1RDtNQUFDO01BQUF6QyxjQUFBLEdBQUFHLENBQUE7TUFDRixPQUFPeUMsT0FBTztJQUNoQixDQUFDLENBQUMsT0FBT1AsS0FBVSxFQUFFO01BQUE7TUFBQXJDLGNBQUEsR0FBQUcsQ0FBQTtNQUNuQixJQUFJLENBQUNRLE1BQU0sQ0FBQzBCLEtBQUssQ0FBQyw0Q0FBNEMsRUFBRUEsS0FBSyxDQUFDO01BQUM7TUFBQXJDLGNBQUEsR0FBQUcsQ0FBQTtNQUN2RSxNQUFNLElBQUlpQixLQUFLLENBQ2I7TUFBdUM7TUFBQSxDQUFBcEIsY0FBQSxHQUFBa0IsQ0FBQSxXQUFBbUIsS0FBSyxFQUFFQyxPQUFPO01BQUE7TUFBQSxDQUFBdEMsY0FBQSxHQUFBa0IsQ0FBQSxXQUFJLGVBQWUsR0FBRSxDQUMzRTtJQUNIO0VBQ0Y7RUFFQTs7Ozs7RUFLQSxNQUFNNkIsVUFBVUEsQ0FBQ3hCLE1BQWMsRUFBRVksUUFBZ0I7SUFBQTtJQUFBbkMsY0FBQSxHQUFBaUIsQ0FBQTtJQUFBakIsY0FBQSxHQUFBRyxDQUFBO0lBQy9DLElBQUksQ0FBQ1EsTUFBTSxDQUFDYSxHQUFHLENBQ2IsZ0NBQWdDVyxRQUFRLGFBQWFaLE1BQU0sR0FBRyxDQUMvRDtJQUFDO0lBQUF2QixjQUFBLEdBQUFHLENBQUE7SUFFRixJQUFJO01BQ0YsTUFBTWlDLEdBQUc7TUFBQTtNQUFBLENBQUFwQyxjQUFBLEdBQUFHLENBQUEsUUFBRyxHQUFHLElBQUksQ0FBQ1csV0FBVyxzQkFBc0JTLE1BQU0sSUFBSVksUUFBUSxFQUFFO01BRXpFLE1BQU1hLFFBQVE7TUFBQTtNQUFBLENBQUFoRCxjQUFBLEdBQUFHLENBQUEsUUFBRyxNQUFNRyxPQUFBLENBQUEyQyxPQUFLLENBQUNDLE1BQU0sQ0FBQ2QsR0FBRyxFQUFFO1FBQ3ZDZSxPQUFPLEVBQUU7VUFDUEMsYUFBYSxFQUFFLFVBQVUsSUFBSSxDQUFDckMsY0FBYzs7T0FFL0MsQ0FBQztNQUFDO01BQUFmLGNBQUEsR0FBQUcsQ0FBQTtNQUVILElBQUk2QyxRQUFRLENBQUNLLE1BQU0sS0FBSyxHQUFHLEVBQUU7UUFBQTtRQUFBckQsY0FBQSxHQUFBa0IsQ0FBQTtRQUFBbEIsY0FBQSxHQUFBRyxDQUFBO1FBQzNCLElBQUksQ0FBQ1EsTUFBTSxDQUFDYSxHQUFHLENBQUMsNENBQTRDVyxRQUFRLEVBQUUsQ0FBQztNQUN6RSxDQUFDLE1BQU07UUFBQTtRQUFBbkMsY0FBQSxHQUFBa0IsQ0FBQTtRQUFBbEIsY0FBQSxHQUFBRyxDQUFBO1FBQ0wsSUFBSSxDQUFDUSxNQUFNLENBQUMwQixLQUFLLENBQ2YsZ0RBQWdEVyxRQUFRLENBQUNLLE1BQU0sZUFBZUwsUUFBUSxDQUFDTSxJQUFJLEVBQUUsQ0FDOUY7UUFBQztRQUFBdEQsY0FBQSxHQUFBRyxDQUFBO1FBQ0YsTUFBTSxJQUFJaUIsS0FBSyxDQUNiLHVDQUF1QzRCLFFBQVEsQ0FBQ0ssTUFBTSxFQUFFLENBQ3pEO01BQ0g7SUFDRixDQUFDLENBQUMsT0FBT2hCLEtBQVUsRUFBRTtNQUFBO01BQUFyQyxjQUFBLEdBQUFHLENBQUE7TUFDbkIsSUFBSSxDQUFDUSxNQUFNLENBQUMwQixLQUFLLENBQ2Ysc0NBQXNDRixRQUFRLEVBQUUsRUFDaERFLEtBQUssQ0FDTjtNQUFDO01BQUFyQyxjQUFBLEdBQUFHLENBQUE7TUFDRixNQUFNLElBQUlpQixLQUFLLENBQ2I7TUFBd0M7TUFBQSxDQUFBcEIsY0FBQSxHQUFBa0IsQ0FBQSxXQUFBbUIsS0FBSyxFQUFFQyxPQUFPO01BQUE7TUFBQSxDQUFBdEMsY0FBQSxHQUFBa0IsQ0FBQSxXQUFJLGVBQWUsR0FBRSxDQUM1RTtJQUNIO0VBQ0Y7RUFFQTs7Ozs7RUFLUVUsZ0JBQWdCQSxDQUFDTyxRQUFnQjtJQUFBO0lBQUFuQyxjQUFBLEdBQUFpQixDQUFBO0lBQ3ZDLE1BQU1zQyxZQUFZO0lBQUE7SUFBQSxDQUFBdkQsY0FBQSxHQUFBRyxDQUFBLFFBQUdnQyxRQUFRLENBQUNxQixXQUFXLENBQUMsR0FBRyxDQUFDO0lBQUM7SUFBQXhELGNBQUEsR0FBQUcsQ0FBQTtJQUMvQyxPQUFPb0QsWUFBWSxLQUFLLENBQUMsQ0FBQztJQUFBO0lBQUEsQ0FBQXZELGNBQUEsR0FBQWtCLENBQUEsV0FBRyxFQUFFO0lBQUE7SUFBQSxDQUFBbEIsY0FBQSxHQUFBa0IsQ0FBQSxXQUFHaUIsUUFBUSxDQUFDc0IsU0FBUyxDQUFDRixZQUFZLENBQUM7RUFDcEU7RUFFQTs7Ozs7OztFQU9RLE1BQU14QixnQkFBZ0JBLENBQzVCUixNQUFjLEVBQ2RtQyxJQUFZLEVBQ1pDLFVBQWtCLEVBQ2xCQyxRQUFnQjtJQUFBO0lBQUE1RCxjQUFBLEdBQUFpQixDQUFBO0lBRWhCLE1BQU1tQixHQUFHO0lBQUE7SUFBQSxDQUFBcEMsY0FBQSxHQUFBRyxDQUFBLFFBQUcsR0FBRyxJQUFJLENBQUNXLFdBQVcsc0JBQXNCUyxNQUFNLElBQUltQyxJQUFJLEVBQUU7SUFBQztJQUFBMUQsY0FBQSxHQUFBRyxDQUFBO0lBRXRFLElBQUk7TUFDRixNQUFNNkMsUUFBUTtNQUFBO01BQUEsQ0FBQWhELGNBQUEsR0FBQUcsQ0FBQSxRQUFHLE1BQU1HLE9BQUEsQ0FBQTJDLE9BQUssQ0FBQ1ksSUFBSSxDQUFDekIsR0FBRyxFQUFFdUIsVUFBVSxFQUFFO1FBQ2pEUixPQUFPLEVBQUU7VUFDUCxjQUFjLEVBQUVTLFFBQVE7VUFDeEJSLGFBQWEsRUFBRSxVQUFVLElBQUksQ0FBQ3JDLGNBQWM7O09BRS9DLENBQUM7TUFBQztNQUFBZixjQUFBLEdBQUFHLENBQUE7TUFFSDtNQUFJO01BQUEsQ0FBQUgsY0FBQSxHQUFBa0IsQ0FBQSxXQUFBOEIsUUFBUSxDQUFDSyxNQUFNLEtBQUssR0FBRztNQUFBO01BQUEsQ0FBQXJELGNBQUEsR0FBQWtCLENBQUEsV0FBSThCLFFBQVEsQ0FBQ0ssTUFBTSxLQUFLLEdBQUcsR0FBRTtRQUFBO1FBQUFyRCxjQUFBLEdBQUFrQixDQUFBO1FBQUFsQixjQUFBLEdBQUFHLENBQUE7UUFDdEQsSUFBSSxDQUFDUSxNQUFNLENBQUNtRCxLQUFLLENBQUMsMkNBQTJDSixJQUFJLEVBQUUsQ0FBQztNQUN0RSxDQUFDLE1BQU07UUFBQTtRQUFBMUQsY0FBQSxHQUFBa0IsQ0FBQTtRQUFBbEIsY0FBQSxHQUFBRyxDQUFBO1FBQ0wsSUFBSSxDQUFDUSxNQUFNLENBQUMwQixLQUFLLENBQ2YsOENBQThDVyxRQUFRLENBQUNLLE1BQU0sZUFBZUwsUUFBUSxDQUFDTSxJQUFJLEVBQUUsQ0FDNUY7UUFBQztRQUFBdEQsY0FBQSxHQUFBRyxDQUFBO1FBQ0YsTUFBTSxJQUFJaUIsS0FBSyxDQUNiLHVDQUF1QzRCLFFBQVEsQ0FBQ0ssTUFBTSxFQUFFLENBQ3pEO01BQ0g7SUFDRixDQUFDLENBQUMsT0FBT2hCLEtBQVUsRUFBRTtNQUFBO01BQUFyQyxjQUFBLEdBQUFHLENBQUE7TUFDbkIsSUFBSWtDLEtBQUssRUFBRVcsUUFBUSxFQUFFO1FBQUE7UUFBQWhELGNBQUEsR0FBQWtCLENBQUE7UUFBQWxCLGNBQUEsR0FBQUcsQ0FBQTtRQUNuQixJQUFJLENBQUNRLE1BQU0sQ0FBQzBCLEtBQUssQ0FDZix1QkFBdUJBLEtBQUssQ0FBQ1csUUFBUSxDQUFDSyxNQUFNLE1BQU1oQixLQUFLLENBQUNXLFFBQVEsQ0FBQ00sSUFBSSxFQUFFLENBQ3hFO1FBQUM7UUFBQXRELGNBQUEsR0FBQUcsQ0FBQTtRQUNGLE1BQU0sSUFBSWlCLEtBQUssQ0FDYjtRQUEyQjtRQUFBLENBQUFwQixjQUFBLEdBQUFrQixDQUFBLFdBQUFtQixLQUFLLENBQUNXLFFBQVEsQ0FBQ00sSUFBSSxFQUFFaEIsT0FBTztRQUFBO1FBQUEsQ0FBQXRDLGNBQUEsR0FBQWtCLENBQUEsV0FBSW1CLEtBQUssQ0FBQ1csUUFBUSxDQUFDZSxVQUFVLEdBQUUsQ0FDdkY7TUFDSCxDQUFDLE1BQU07UUFBQTtRQUFBL0QsY0FBQSxHQUFBa0IsQ0FBQTtRQUFBbEIsY0FBQSxHQUFBRyxDQUFBO1FBQ0wsSUFBSSxDQUFDUSxNQUFNLENBQUMwQixLQUFLLENBQ2YseUNBQXlDQSxLQUFLLENBQUNDLE9BQU8sRUFBRSxDQUN6RDtRQUFDO1FBQUF0QyxjQUFBLEdBQUFHLENBQUE7UUFDRixNQUFNLElBQUlpQixLQUFLLENBQUMsaUNBQWlDaUIsS0FBSyxDQUFDQyxPQUFPLEVBQUUsQ0FBQztNQUNuRTtJQUNGO0VBQ0Y7RUFFQTs7Ozs7O0VBTUEwQixZQUFZQSxDQUNWMUMsSUFBeUIsRUFDekIyQyxjQUFBO0VBQUE7RUFBQSxDQUFBakUsY0FBQSxHQUFBa0IsQ0FBQSxXQUF5QixFQUFFLEdBQUcsSUFBSSxHQUFHLElBQUk7RUFBRTtFQUMzQ2dELGdCQUFBO0VBQUE7RUFBQSxDQUFBbEUsY0FBQSxHQUFBa0IsQ0FBQSxXQUE2QixDQUMzQixZQUFZLEVBQ1osV0FBVyxFQUNYLFdBQVcsRUFDWCxZQUFZLEVBQ1osaUJBQWlCLEVBQ2pCLFlBQVksRUFDWixVQUFVLEVBQ1YseUVBQXlFO0VBQUU7RUFDM0UsbUVBQW1FO0VBQUU7RUFDckUsMkVBQTJFO0VBQUU7RUFDN0Usb0JBQW9CO0VBQUU7RUFDdEIsMEJBQTBCO0VBQUU7RUFDNUIsK0JBQStCLENBQUU7RUFBQSxDQUNsQztJQUFBO0lBQUFsQixjQUFBLEdBQUFpQixDQUFBO0lBQUFqQixjQUFBLEdBQUFHLENBQUE7SUFFRDtJQUNBLElBQUltQixJQUFJLENBQUM2QyxJQUFJLEdBQUdGLGNBQWMsRUFBRTtNQUFBO01BQUFqRSxjQUFBLEdBQUFrQixDQUFBO01BQUFsQixjQUFBLEdBQUFHLENBQUE7TUFDOUIsT0FBTztRQUNMaUUsT0FBTyxFQUFFLEtBQUs7UUFDZC9CLEtBQUssRUFBRSxxQkFBcUJnQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0wsY0FBYyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQztPQUN2RTtJQUNILENBQUM7SUFBQTtJQUFBO01BQUFqRSxjQUFBLEdBQUFrQixDQUFBO0lBQUE7SUFFRDtJQUFBbEIsY0FBQSxHQUFBRyxDQUFBO0lBQ0EsSUFBSSxDQUFDK0QsZ0JBQWdCLENBQUNLLFFBQVEsQ0FBQ2pELElBQUksQ0FBQ1csUUFBUSxDQUFDLEVBQUU7TUFBQTtNQUFBakMsY0FBQSxHQUFBa0IsQ0FBQTtNQUFBbEIsY0FBQSxHQUFBRyxDQUFBO01BQzdDLE9BQU87UUFDTGlFLE9BQU8sRUFBRSxLQUFLO1FBQ2QvQixLQUFLLEVBQUUsYUFBYWYsSUFBSSxDQUFDVyxRQUFRO09BQ2xDO0lBQ0gsQ0FBQztJQUFBO0lBQUE7TUFBQWpDLGNBQUEsR0FBQWtCLENBQUE7SUFBQTtJQUVEO0lBQ0EsTUFBTXNELFlBQVk7SUFBQTtJQUFBLENBQUF4RSxjQUFBLEdBQUFHLENBQUEsUUFBR21CLElBQUksQ0FBQ0csWUFBWSxDQUFDZ0QsT0FBTyxDQUFDLGlCQUFpQixFQUFFLEdBQUcsQ0FBQztJQUFDO0lBQUF6RSxjQUFBLEdBQUFHLENBQUE7SUFDdkUsSUFBSXFFLFlBQVksS0FBS2xELElBQUksQ0FBQ0csWUFBWSxFQUFFO01BQUE7TUFBQXpCLGNBQUEsR0FBQWtCLENBQUE7TUFBQWxCLGNBQUEsR0FBQUcsQ0FBQTtNQUN0QyxPQUFPO1FBQ0xpRSxPQUFPLEVBQUUsS0FBSztRQUNkL0IsS0FBSyxFQUFFO09BQ1I7SUFDSCxDQUFDO0lBQUE7SUFBQTtNQUFBckMsY0FBQSxHQUFBa0IsQ0FBQTtJQUFBO0lBQUFsQixjQUFBLEdBQUFHLENBQUE7SUFFRCxPQUFPO01BQUVpRSxPQUFPLEVBQUU7SUFBSSxDQUFFO0VBQzFCO0VBRUE7OztFQUdBLE9BQU9NLG1CQUFtQkEsQ0FBQTtJQUFBO0lBQUExRSxjQUFBLEdBQUFpQixDQUFBO0lBQUFqQixjQUFBLEdBQUFHLENBQUE7SUFDeEIsT0FBTztNQUNMd0UsYUFBYSxFQUFFLGVBQWU7TUFDOUJDLGdCQUFnQixFQUFFLGtCQUFrQjtNQUNwQ0MsUUFBUSxFQUFFLFVBQVU7TUFDcEJDLFNBQVMsRUFBRSxXQUFXO01BQ3RCQyxVQUFVLEVBQUU7S0FDSjtFQUNaO0NBQ0Q7QUFBQTtBQUFBL0UsY0FBQSxHQUFBRyxDQUFBO0FBM1FZNkUsT0FBQSxDQUFBeEUsc0JBQUEsR0FBQUEsc0JBQUE7QUFBc0I7QUFBQVIsY0FBQSxHQUFBRyxDQUFBO2lDQUF0Qkssc0JBQXNCLEdBQUFDLHdCQUFBLEdBQUF3RSxVQUFBLEVBRGxDLElBQUEvRSxRQUFBLENBQUFnRixVQUFVLEdBQUUsRTs7cUNBTXdCN0UsUUFBQSxDQUFBOEUsYUFBYTtBQUFBO0FBQUEsQ0FBQW5GLGNBQUEsR0FBQWtCLENBQUEsV0FBYmIsUUFBQSxDQUFBOEUsYUFBYTtBQUFBO0FBQUEsQ0FBQW5GLGNBQUEsR0FBQWtCLENBQUEsV0FBQWtFLEVBQUE7QUFBQTtBQUFBLENBQUFwRixjQUFBLEdBQUFrQixDQUFBLFdBQUFtRSxNQUFBLEksRUFMckM3RSxzQkFBc0IsQ0EyUWxDIiwiaWdub3JlTGlzdCI6W119