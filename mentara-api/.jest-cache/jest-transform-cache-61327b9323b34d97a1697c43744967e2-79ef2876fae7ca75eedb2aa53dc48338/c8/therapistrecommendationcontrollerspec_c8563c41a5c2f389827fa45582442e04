198c31eb25f8d1eefed4cb08dcc1b760
"use strict";
/**
 * Comprehensive Test Suite for TherapistRecommendationController
 * Tests all therapist recommendation endpoints with security, validation, and error handling
 */
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const jwt_auth_guard_1 = require("../auth/guards/jwt-auth.guard");
const therapist_recommendation_controller_1 = require("./therapist-recommendation.controller");
const therapist_recommendation_service_1 = require("./therapist-recommendation.service");
const prisma_client_provider_1 = require("../providers/prisma-client.provider");
const enhanced_test_helpers_1 = require("../test-utils/enhanced-test-helpers");
const index_1 = require("../test-utils/index");
describe('TherapistRecommendationController', () => {
    let controller;
    let therapistRecommendationService;
    let prismaService;
    let module;
    // Mock TherapistRecommendationService
    const mockTherapistRecommendationService = {
        getRecommendedTherapists: jest.fn(),
        getCompatibilityAnalysis: jest.fn(),
    };
    // Mock PrismaService
    const mockPrismaService = (0, index_1.createMockPrismaService)();
    // Mock JwtAuthGuard
    const mockJwtAuthGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    // Test data
    const mockUser = enhanced_test_helpers_1.TestDataGenerator.createUser({
        id: index_1.TEST_USER_IDS.CLIENT,
        email: index_1.TEST_EMAILS.CLIENT,
        firstName: 'John',
        lastName: 'Doe',
        role: 'client',
    });
    const mockClient = {
        userId: index_1.TEST_USER_IDS.CLIENT,
        hasSeenTherapistRecommendations: false,
        createdAt: new Date(),
    };
    const mockTherapistRecommendation = {
        id: index_1.TEST_USER_IDS.THERAPIST,
        firstName: 'Dr. Jane',
        lastName: 'Smith',
        bio: 'Experienced therapist specializing in anxiety and depression',
        providerType: 'Licensed Clinical Psychologist',
        areasOfExpertise: ['anxiety', 'depression'],
        therapeuticApproaches: ['CBT', 'DBT'],
        hourlyRate: 150.0,
        rating: 4.8,
        reviewCount: 25,
        isActive: true,
        matchScore: 0.87,
        compatibilityFactors: ['anxiety_specialization', 'cbt_approach'],
    };
    const mockRecommendationResponse = {
        recommendations: [mockTherapistRecommendation],
        totalCount: 1,
        page: 1,
        limit: 10,
        hasMore: false,
        matchingCriteria: {
            userPreferences: ['anxiety', 'depression'],
            locationBased: true,
            ratingFilter: 4.0,
        },
        algorithmVersion: '2.1.0',
    };
    const mockCompatibilityAnalysis = {
        userId: index_1.TEST_USER_IDS.CLIENT,
        therapistId: index_1.TEST_USER_IDS.THERAPIST,
        overallCompatibility: 0.87,
        compatibilityFactors: [
            {
                factor: 'anxiety_specialization',
                score: 0.95,
                importance: 'high',
                explanation: 'Therapist specializes in anxiety treatment',
            },
            {
                factor: 'cbt_approach',
                score: 0.82,
                importance: 'medium',
                explanation: 'CBT approach matches user preferences',
            },
        ],
        recommendations: [
            'This therapist is highly compatible with your anxiety treatment needs',
            'Consider scheduling an initial consultation',
        ],
        riskFactors: [],
        lastUpdated: new Date(),
    };
    beforeEach(async () => {
        module = await testing_1.Test.createTestingModule({
            controllers: [therapist_recommendation_controller_1.TherapistRecommendationController],
            providers: [
                {
                    provide: therapist_recommendation_service_1.TherapistRecommendationService,
                    useValue: mockTherapistRecommendationService,
                },
                {
                    provide: prisma_client_provider_1.PrismaService,
                    useValue: mockPrismaService,
                },
            ],
        })
            .overrideGuard(jwt_auth_guard_1.JwtAuthGuard)
            .useValue(mockJwtAuthGuard)
            .compile();
        controller = module.get(therapist_recommendation_controller_1.TherapistRecommendationController);
        therapistRecommendationService = module.get(therapist_recommendation_service_1.TherapistRecommendationService);
        prismaService = module.get(prisma_client_provider_1.PrismaService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('Controller Initialization', () => {
        it('should be defined', () => {
            expect(controller).toBeDefined();
        });
        it('should have therapistRecommendationService injected', () => {
            expect(therapistRecommendationService).toBeDefined();
        });
        it('should have prismaService injected', () => {
            expect(prismaService).toBeDefined();
        });
    });
    describe('Security Guards', () => {
        it('should be protected by JwtAuthGuard', () => {
            const guards = Reflect.getMetadata('__guards__', therapist_recommendation_controller_1.TherapistRecommendationController);
            expect(guards).toContain(jwt_auth_guard_1.JwtAuthGuard);
        });
        it('should have proper route decorators', () => {
            const controllerMetadata = Reflect.getMetadata('path', therapist_recommendation_controller_1.TherapistRecommendationController);
            expect(controllerMetadata).toBe('therapist-recommendations');
        });
    });
    describe('GET /therapist-recommendations', () => {
        const query = {
            limit: 10,
            includeInactive: false,
            province: 'Ontario',
            maxHourlyRate: 200,
        };
        it('should get recommended therapists successfully', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockTherapistRecommendationService.getRecommendedTherapists.mockResolvedValue(mockRecommendationResponse);
            const result = await controller.getRecommendedTherapists(index_1.TEST_USER_IDS.CLIENT, query);
            expect(result).toEqual(mockRecommendationResponse);
            expect(prismaService.user.findUnique).toHaveBeenCalledWith({
                where: { id: index_1.TEST_USER_IDS.CLIENT },
            });
            expect(therapistRecommendationService.getRecommendedTherapists).toHaveBeenCalledWith({
                userId: index_1.TEST_USER_IDS.CLIENT,
                limit: 10,
                includeInactive: false,
                province: 'Ontario',
                maxHourlyRate: 200,
            });
        });
        it('should handle user not found error', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(null);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getRecommendedTherapists(index_1.TEST_USER_IDS.CLIENT, query), common_1.NotFoundException, `User with ID ${index_1.TEST_USER_IDS.CLIENT} not found`);
        });
        it('should handle service errors', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            const serviceError = new Error('Recommendation service failed');
            mockTherapistRecommendationService.getRecommendedTherapists.mockRejectedValue(serviceError);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getRecommendedTherapists(index_1.TEST_USER_IDS.CLIENT, query), common_1.InternalServerErrorException, 'Recommendation service failed');
        });
        it('should handle undefined query parameters', async () => {
            const emptyQuery = {};
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockTherapistRecommendationService.getRecommendedTherapists.mockResolvedValue(mockRecommendationResponse);
            const result = await controller.getRecommendedTherapists(index_1.TEST_USER_IDS.CLIENT, emptyQuery);
            expect(result).toEqual(mockRecommendationResponse);
            expect(therapistRecommendationService.getRecommendedTherapists).toHaveBeenCalledWith({
                userId: index_1.TEST_USER_IDS.CLIENT,
                limit: undefined,
                includeInactive: undefined,
                province: undefined,
                maxHourlyRate: undefined,
            });
        });
        it('should handle database connection errors', async () => {
            const dbError = new Error('Database connection failed');
            mockPrismaService.user.findUnique.mockRejectedValue(dbError);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getRecommendedTherapists(index_1.TEST_USER_IDS.CLIENT, query), common_1.InternalServerErrorException, 'Database connection failed');
        });
    });
    describe('GET /therapist-recommendations/compatibility/:therapistId', () => {
        const therapistId = index_1.TEST_USER_IDS.THERAPIST;
        it('should get compatibility analysis successfully', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockTherapistRecommendationService.getCompatibilityAnalysis.mockResolvedValue(mockCompatibilityAnalysis);
            const result = await controller.getCompatibilityAnalysis(index_1.TEST_USER_IDS.CLIENT, therapistId);
            expect(result).toEqual(mockCompatibilityAnalysis);
            expect(prismaService.user.findUnique).toHaveBeenCalledWith({
                where: { id: index_1.TEST_USER_IDS.CLIENT },
            });
            expect(therapistRecommendationService.getCompatibilityAnalysis).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, therapistId);
        });
        it('should handle user not found error', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(null);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getCompatibilityAnalysis(index_1.TEST_USER_IDS.CLIENT, therapistId), common_1.NotFoundException, `User with ID ${index_1.TEST_USER_IDS.CLIENT} not found`);
        });
        it('should handle service errors', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            const serviceError = new Error('Compatibility analysis failed');
            mockTherapistRecommendationService.getCompatibilityAnalysis.mockRejectedValue(serviceError);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getCompatibilityAnalysis(index_1.TEST_USER_IDS.CLIENT, therapistId), common_1.InternalServerErrorException, 'Compatibility analysis failed');
        });
        it('should handle therapist not found in service', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            const notFoundError = new common_1.NotFoundException('Therapist not found');
            mockTherapistRecommendationService.getCompatibilityAnalysis.mockRejectedValue(notFoundError);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getCompatibilityAnalysis(index_1.TEST_USER_IDS.CLIENT, therapistId), common_1.NotFoundException, 'Therapist not found');
        });
        it('should handle invalid therapist ID', async () => {
            const invalidTherapistId = 'invalid-id';
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            const serviceError = new Error('Invalid therapist ID');
            mockTherapistRecommendationService.getCompatibilityAnalysis.mockRejectedValue(serviceError);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getCompatibilityAnalysis(index_1.TEST_USER_IDS.CLIENT, invalidTherapistId), common_1.InternalServerErrorException, 'Invalid therapist ID');
        });
    });
    describe('GET /therapist-recommendations/welcome', () => {
        const welcomeQuery = {
            limit: 5,
            province: 'Ontario',
            forceRefresh: false,
        };
        it('should get welcome recommendations for first-time user', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockPrismaService.client.findUnique.mockResolvedValue(mockClient);
            mockTherapistRecommendationService.getRecommendedTherapists.mockResolvedValue(mockRecommendationResponse);
            const result = await controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, welcomeQuery);
            expect(result).toHaveProperty('recommendations');
            expect(result).toHaveProperty('welcomeMessage');
            expect(result).toHaveProperty('isFirstTime', true);
            expect(result).toHaveProperty('userInfo');
            expect(result).toHaveProperty('nextSteps');
            expect(result).toHaveProperty('matchingInsights');
            expect(result.welcomeMessage).toContain('Welcome to Mentara, John!');
            expect(result.nextSteps.canSendRequests).toBe(true);
            expect(result.nextSteps.recommendedActions).toHaveLength(4);
        });
        it('should redirect returning user to regular recommendations', async () => {
            const returningClient = { ...mockClient, hasSeenTherapistRecommendations: true };
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockPrismaService.client.findUnique.mockResolvedValue(returningClient);
            const result = await controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, welcomeQuery);
            expect(result).toEqual({
                isFirstTime: false,
                redirectTo: '/therapist-recommendations',
                message: 'User has already completed welcome flow',
                lastSeenAt: returningClient.createdAt,
            });
        });
        it('should handle force refresh for returning user', async () => {
            const returningClient = { ...mockClient, hasSeenTherapistRecommendations: true };
            const forceRefreshQuery = { ...welcomeQuery, forceRefresh: true };
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockPrismaService.client.findUnique.mockResolvedValue(returningClient);
            mockTherapistRecommendationService.getRecommendedTherapists.mockResolvedValue(mockRecommendationResponse);
            const result = await controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, forceRefreshQuery);
            expect(result).toHaveProperty('recommendations');
            expect(result).toHaveProperty('welcomeMessage');
            expect(result).toHaveProperty('isFirstTime', false);
            expect(result.welcomeMessage).toContain('Welcome back, John!');
        });
        it('should handle user not found error', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(null);
            mockPrismaService.client.findUnique.mockResolvedValue(mockClient);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, welcomeQuery), common_1.NotFoundException, `User with ID ${index_1.TEST_USER_IDS.CLIENT} not found`);
        });
        it('should handle client profile not found error', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockPrismaService.client.findUnique.mockResolvedValue(null);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, welcomeQuery), common_1.NotFoundException, `Client profile not found for user ${index_1.TEST_USER_IDS.CLIENT}`);
        });
        it('should handle service errors', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockPrismaService.client.findUnique.mockResolvedValue(mockClient);
            const serviceError = new Error('Recommendation service failed');
            mockTherapistRecommendationService.getRecommendedTherapists.mockRejectedValue(serviceError);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, welcomeQuery), common_1.InternalServerErrorException, 'Recommendation service failed');
        });
        it('should handle database query errors', async () => {
            const dbError = new Error('Database query failed');
            mockPrismaService.user.findUnique.mockRejectedValue(dbError);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, welcomeQuery), common_1.InternalServerErrorException, 'Database query failed');
        });
    });
    describe('Integration Testing', () => {
        it('should handle complete recommendation workflow', async () => {
            // Step 1: Get regular recommendations
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockTherapistRecommendationService.getRecommendedTherapists.mockResolvedValue(mockRecommendationResponse);
            const recommendations = await controller.getRecommendedTherapists(index_1.TEST_USER_IDS.CLIENT, {
                limit: 10,
                includeInactive: false,
            });
            expect(recommendations).toEqual(mockRecommendationResponse);
            // Step 2: Get compatibility analysis for a specific therapist
            mockTherapistRecommendationService.getCompatibilityAnalysis.mockResolvedValue(mockCompatibilityAnalysis);
            const compatibility = await controller.getCompatibilityAnalysis(index_1.TEST_USER_IDS.CLIENT, index_1.TEST_USER_IDS.THERAPIST);
            expect(compatibility).toEqual(mockCompatibilityAnalysis);
            // Step 3: Get welcome recommendations
            mockPrismaService.client.findUnique.mockResolvedValue(mockClient);
            const welcome = await controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, {
                limit: 5,
                forceRefresh: false,
            });
            expect(welcome).toHaveProperty('welcomeMessage');
            expect(welcome).toHaveProperty('isFirstTime', true);
        });
        it('should handle user journey from welcome to regular recommendations', async () => {
            // Step 1: First-time user gets welcome recommendations
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockPrismaService.client.findUnique.mockResolvedValue(mockClient);
            mockTherapistRecommendationService.getRecommendedTherapists.mockResolvedValue(mockRecommendationResponse);
            const welcome = await controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, {
                limit: 5,
                forceRefresh: false,
            });
            expect(welcome.isFirstTime).toBe(true);
            // Step 2: Later, user gets regular recommendations
            const returningClient = { ...mockClient, hasSeenTherapistRecommendations: true };
            mockPrismaService.client.findUnique.mockResolvedValue(returningClient);
            const returningWelcome = await controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, {
                limit: 5,
                forceRefresh: false,
            });
            expect(returningWelcome.isFirstTime).toBe(false);
            expect(returningWelcome.redirectTo).toBe('/therapist-recommendations');
        });
    });
    describe('Error Handling', () => {
        it('should handle service unavailable scenarios', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            const serviceError = new Error('Service temporarily unavailable');
            mockTherapistRecommendationService.getRecommendedTherapists.mockRejectedValue(serviceError);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getRecommendedTherapists(index_1.TEST_USER_IDS.CLIENT, { limit: 10 }), common_1.InternalServerErrorException, 'Service temporarily unavailable');
        });
        it('should handle concurrent access issues', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            const concurrencyError = new Error('Resource is locked');
            mockTherapistRecommendationService.getRecommendedTherapists.mockRejectedValue(concurrencyError);
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getRecommendedTherapists(index_1.TEST_USER_IDS.CLIENT, { limit: 10 }), common_1.InternalServerErrorException, 'Resource is locked');
        });
        it('should handle malformed query parameters', async () => {
            const malformedQuery = { invalid: 'data' };
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockTherapistRecommendationService.getRecommendedTherapists.mockResolvedValue(mockRecommendationResponse);
            const result = await controller.getRecommendedTherapists(index_1.TEST_USER_IDS.CLIENT, malformedQuery);
            expect(therapistRecommendationService.getRecommendedTherapists).toHaveBeenCalledWith({
                userId: index_1.TEST_USER_IDS.CLIENT,
                limit: undefined,
                includeInactive: undefined,
                province: undefined,
                maxHourlyRate: undefined,
            });
        });
    });
    describe('Response Format Validation', () => {
        it('should return properly formatted recommendation response', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockTherapistRecommendationService.getRecommendedTherapists.mockResolvedValue(mockRecommendationResponse);
            const result = await controller.getRecommendedTherapists(index_1.TEST_USER_IDS.CLIENT, { limit: 10 });
            expect(result).toHaveProperty('recommendations');
            expect(result).toHaveProperty('totalCount');
            expect(result).toHaveProperty('page');
            expect(result).toHaveProperty('limit');
            expect(result).toHaveProperty('hasMore');
            expect(Array.isArray(result.recommendations)).toBe(true);
            expect(typeof result.totalCount).toBe('number');
        });
        it('should return properly formatted compatibility analysis response', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockTherapistRecommendationService.getCompatibilityAnalysis.mockResolvedValue(mockCompatibilityAnalysis);
            const result = await controller.getCompatibilityAnalysis(index_1.TEST_USER_IDS.CLIENT, index_1.TEST_USER_IDS.THERAPIST);
            expect(result).toHaveProperty('userId');
            expect(result).toHaveProperty('therapistId');
            expect(result).toHaveProperty('overallCompatibility');
            expect(result).toHaveProperty('compatibilityFactors');
            expect(Array.isArray(result.compatibilityFactors)).toBe(true);
            expect(typeof result.overallCompatibility).toBe('number');
        });
        it('should return properly formatted welcome response', async () => {
            mockPrismaService.user.findUnique.mockResolvedValue(mockUser);
            mockPrismaService.client.findUnique.mockResolvedValue(mockClient);
            mockTherapistRecommendationService.getRecommendedTherapists.mockResolvedValue(mockRecommendationResponse);
            const result = await controller.getWelcomeRecommendations(index_1.TEST_USER_IDS.CLIENT, { limit: 5 });
            expect(result).toHaveProperty('welcomeMessage');
            expect(result).toHaveProperty('isFirstTime');
            expect(result).toHaveProperty('userInfo');
            expect(result).toHaveProperty('nextSteps');
            expect(result).toHaveProperty('matchingInsights');
            expect(typeof result.welcomeMessage).toBe('string');
            expect(typeof result.isFirstTime).toBe('boolean');
            expect(result.userInfo).toHaveProperty('firstName');
            expect(result.nextSteps).toHaveProperty('canSendRequests');
            expect(Array.isArray(result.nextSteps.recommendedActions)).toBe(true);
        });
    });
    describe('Private Methods', () => {
        it('should generate proper welcome message for first-time user', () => {
            const message = controller.generateWelcomeMessage('John', true);
            expect(message).toContain('Welcome to Mentara, John!');
            expect(message).toContain('curated a personalized list');
        });
        it('should generate proper welcome message for returning user', () => {
            const message = controller.generateWelcomeMessage('John', false);
            expect(message).toContain('Welcome back, John!');
            expect(message).toContain('fresh therapist recommendations');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL3RoZXJhcGlzdC90aGVyYXBpc3QtcmVjb21tZW5kYXRpb24uY29udHJvbGxlci5zcGVjLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBRUgsNkNBQXNEO0FBQ3RELDJDQUFpRjtBQUNqRixrRUFBNkQ7QUFDN0QsK0ZBQTBGO0FBQzFGLHlGQUFvRjtBQUNwRixnRkFBb0U7QUFFcEUsK0VBQXFHO0FBQ3JHLCtDQUEwRjtBQUUxRixRQUFRLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO0lBQ2pELElBQUksVUFBNkMsQ0FBQztJQUNsRCxJQUFJLDhCQUE4RCxDQUFDO0lBQ25FLElBQUksYUFBNEIsQ0FBQztJQUNqQyxJQUFJLE1BQXFCLENBQUM7SUFFMUIsc0NBQXNDO0lBQ3RDLE1BQU0sa0NBQWtDLEdBQUc7UUFDekMsd0JBQXdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNuQyx3QkFBd0IsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQ3BDLENBQUM7SUFFRixxQkFBcUI7SUFDckIsTUFBTSxpQkFBaUIsR0FBRyxJQUFBLCtCQUF1QixHQUFFLENBQUM7SUFFcEQsb0JBQW9CO0lBQ3BCLE1BQU0sZ0JBQWdCLEdBQUc7UUFDdkIsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDO0tBQzdDLENBQUM7SUFFRixZQUFZO0lBQ1osTUFBTSxRQUFRLEdBQUcseUNBQWlCLENBQUMsVUFBVSxDQUFDO1FBQzVDLEVBQUUsRUFBRSxxQkFBYSxDQUFDLE1BQU07UUFDeEIsS0FBSyxFQUFFLG1CQUFXLENBQUMsTUFBTTtRQUN6QixTQUFTLEVBQUUsTUFBTTtRQUNqQixRQUFRLEVBQUUsS0FBSztRQUNmLElBQUksRUFBRSxRQUFRO0tBQ2YsQ0FBQyxDQUFDO0lBRUgsTUFBTSxVQUFVLEdBQUc7UUFDakIsTUFBTSxFQUFFLHFC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OltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy90aGVyYXBpc3QvdGhlcmFwaXN0LXJlY29tbWVuZGF0aW9uLmNvbnRyb2xsZXIuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbXByZWhlbnNpdmUgVGVzdCBTdWl0ZSBmb3IgVGhlcmFwaXN0UmVjb21tZW5kYXRpb25Db250cm9sbGVyXG4gKiBUZXN0cyBhbGwgdGhlcmFwaXN0IHJlY29tbWVuZGF0aW9uIGVuZHBvaW50cyB3aXRoIHNlY3VyaXR5LCB2YWxpZGF0aW9uLCBhbmQgZXJyb3IgaGFuZGxpbmdcbiAqL1xuXG5pbXBvcnQgeyBUZXN0LCBUZXN0aW5nTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcbmltcG9ydCB7IE5vdEZvdW5kRXhjZXB0aW9uLCBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgSnd0QXV0aEd1YXJkIH0gZnJvbSAnLi4vYXV0aC9ndWFyZHMvand0LWF1dGguZ3VhcmQnO1xuaW1wb3J0IHsgVGhlcmFwaXN0UmVjb21tZW5kYXRpb25Db250cm9sbGVyIH0gZnJvbSAnLi90aGVyYXBpc3QtcmVjb21tZW5kYXRpb24uY29udHJvbGxlcic7XG5pbXBvcnQgeyBUaGVyYXBpc3RSZWNvbW1lbmRhdGlvblNlcnZpY2UgfSBmcm9tICcuL3RoZXJhcGlzdC1yZWNvbW1lbmRhdGlvbi5zZXJ2aWNlJztcbmltcG9ydCB7IFByaXNtYVNlcnZpY2UgfSBmcm9tICcuLi9wcm92aWRlcnMvcHJpc21hLWNsaWVudC5wcm92aWRlcic7XG5pbXBvcnQgeyBTZWN1cml0eUd1YXJkVGVzdFV0aWxzLCBSb2xlQmFzZWRUZXN0VXRpbHMgfSBmcm9tICcuLi90ZXN0LXV0aWxzL2F1dGgtdGVzdGluZy1oZWxwZXJzJztcbmltcG9ydCB7IE1vY2tCdWlsZGVyLCBUZXN0RGF0YUdlbmVyYXRvciwgVGVzdEFzc2VydGlvbnMgfSBmcm9tICcuLi90ZXN0LXV0aWxzL2VuaGFuY2VkLXRlc3QtaGVscGVycyc7XG5pbXBvcnQgeyBURVNUX1VTRVJfSURTLCBURVNUX0VNQUlMUywgY3JlYXRlTW9ja1ByaXNtYVNlcnZpY2UgfSBmcm9tICcuLi90ZXN0LXV0aWxzL2luZGV4JztcblxuZGVzY3JpYmUoJ1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uQ29udHJvbGxlcicsICgpID0+IHtcbiAgbGV0IGNvbnRyb2xsZXI6IFRoZXJhcGlzdFJlY29tbWVuZGF0aW9uQ29udHJvbGxlcjtcbiAgbGV0IHRoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZTogVGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlO1xuICBsZXQgcHJpc21hU2VydmljZTogUHJpc21hU2VydmljZTtcbiAgbGV0IG1vZHVsZTogVGVzdGluZ01vZHVsZTtcblxuICAvLyBNb2NrIFRoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZVxuICBjb25zdCBtb2NrVGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlID0ge1xuICAgIGdldFJlY29tbWVuZGVkVGhlcmFwaXN0czogamVzdC5mbigpLFxuICAgIGdldENvbXBhdGliaWxpdHlBbmFseXNpczogamVzdC5mbigpLFxuICB9O1xuXG4gIC8vIE1vY2sgUHJpc21hU2VydmljZVxuICBjb25zdCBtb2NrUHJpc21hU2VydmljZSA9IGNyZWF0ZU1vY2tQcmlzbWFTZXJ2aWNlKCk7XG5cbiAgLy8gTW9jayBKd3RBdXRoR3VhcmRcbiAgY29uc3QgbW9ja0p3dEF1dGhHdWFyZCA9IHtcbiAgICBjYW5BY3RpdmF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKSxcbiAgfTtcblxuICAvLyBUZXN0IGRhdGFcbiAgY29uc3QgbW9ja1VzZXIgPSBUZXN0RGF0YUdlbmVyYXRvci5jcmVhdGVVc2VyKHtcbiAgICBpZDogVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgZW1haWw6IFRFU1RfRU1BSUxTLkNMSUVOVCxcbiAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgcm9sZTogJ2NsaWVudCcsXG4gIH0pO1xuXG4gIGNvbnN0IG1vY2tDbGllbnQgPSB7XG4gICAgdXNlcklkOiBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICBoYXNTZWVuVGhlcmFwaXN0UmVjb21tZW5kYXRpb25zOiBmYWxzZSxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gIH07XG5cbiAgY29uc3QgbW9ja1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uID0ge1xuICAgIGlkOiBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICBmaXJzdE5hbWU6ICdEci4gSmFuZScsXG4gICAgbGFzdE5hbWU6ICdTbWl0aCcsXG4gICAgYmlvOiAnRXhwZXJpZW5jZWQgdGhlcmFwaXN0IHNwZWNpYWxpemluZyBpbiBhbnhpZXR5IGFuZCBkZXByZXNzaW9uJyxcbiAgICBwcm92aWRlclR5cGU6ICdMaWNlbnNlZCBDbGluaWNhbCBQc3ljaG9sb2dpc3QnLFxuICAgIGFyZWFzT2ZFeHBlcnRpc2U6IFsnYW54aWV0eScsICdkZXByZXNzaW9uJ10sXG4gICAgdGhlcmFwZXV0aWNBcHByb2FjaGVzOiBbJ0NCVCcsICdEQlQnXSxcbiAgICBob3VybHlSYXRlOiAxNTAuMCxcbiAgICByYXRpbmc6IDQuOCxcbiAgICByZXZpZXdDb3VudDogMjUsXG4gICAgaXNBY3RpdmU6IHRydWUsXG4gICAgbWF0Y2hTY29yZTogMC44NyxcbiAgICBjb21wYXRpYmlsaXR5RmFjdG9yczogWydhbnhpZXR5X3NwZWNpYWxpemF0aW9uJywgJ2NidF9hcHByb2FjaCddLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tSZWNvbW1lbmRhdGlvblJlc3BvbnNlID0ge1xuICAgIHJlY29tbWVuZGF0aW9uczogW21vY2tUaGVyYXBpc3RSZWNvbW1lbmRhdGlvbl0sXG4gICAgdG90YWxDb3VudDogMSxcbiAgICBwYWdlOiAxLFxuICAgIGxpbWl0OiAxMCxcbiAgICBoYXNNb3JlOiBmYWxzZSxcbiAgICBtYXRjaGluZ0NyaXRlcmlhOiB7XG4gICAgICB1c2VyUHJlZmVyZW5jZXM6IFsnYW54aWV0eScsICdkZXByZXNzaW9uJ10sXG4gICAgICBsb2NhdGlvbkJhc2VkOiB0cnVlLFxuICAgICAgcmF0aW5nRmlsdGVyOiA0LjAsXG4gICAgfSxcbiAgICBhbGdvcml0aG1WZXJzaW9uOiAnMi4xLjAnLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tDb21wYXRpYmlsaXR5QW5hbHlzaXMgPSB7XG4gICAgdXNlcklkOiBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICB0aGVyYXBpc3RJZDogVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgb3ZlcmFsbENvbXBhdGliaWxpdHk6IDAuODcsXG4gICAgY29tcGF0aWJpbGl0eUZhY3RvcnM6IFtcbiAgICAgIHtcbiAgICAgICAgZmFjdG9yOiAnYW54aWV0eV9zcGVjaWFsaXphdGlvbicsXG4gICAgICAgIHNjb3JlOiAwLjk1LFxuICAgICAgICBpbXBvcnRhbmNlOiAnaGlnaCcsXG4gICAgICAgIGV4cGxhbmF0aW9uOiAnVGhlcmFwaXN0IHNwZWNpYWxpemVzIGluIGFueGlldHkgdHJlYXRtZW50JyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGZhY3RvcjogJ2NidF9hcHByb2FjaCcsXG4gICAgICAgIHNjb3JlOiAwLjgyLFxuICAgICAgICBpbXBvcnRhbmNlOiAnbWVkaXVtJyxcbiAgICAgICAgZXhwbGFuYXRpb246ICdDQlQgYXBwcm9hY2ggbWF0Y2hlcyB1c2VyIHByZWZlcmVuY2VzJyxcbiAgICAgIH0sXG4gICAgXSxcbiAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICdUaGlzIHRoZXJhcGlzdCBpcyBoaWdobHkgY29tcGF0aWJsZSB3aXRoIHlvdXIgYW54aWV0eSB0cmVhdG1lbnQgbmVlZHMnLFxuICAgICAgJ0NvbnNpZGVyIHNjaGVkdWxpbmcgYW4gaW5pdGlhbCBjb25zdWx0YXRpb24nLFxuICAgIF0sXG4gICAgcmlza0ZhY3RvcnM6IFtdLFxuICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLFxuICB9O1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIG1vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XG4gICAgICBjb250cm9sbGVyczogW1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uQ29udHJvbGxlcl0sXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IFRoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IFByaXNtYVNlcnZpY2UsXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tQcmlzbWFTZXJ2aWNlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KVxuICAgICAgLm92ZXJyaWRlR3VhcmQoSnd0QXV0aEd1YXJkKVxuICAgICAgLnVzZVZhbHVlKG1vY2tKd3RBdXRoR3VhcmQpXG4gICAgICAuY29tcGlsZSgpO1xuXG4gICAgY29udHJvbGxlciA9IG1vZHVsZS5nZXQ8VGhlcmFwaXN0UmVjb21tZW5kYXRpb25Db250cm9sbGVyPihUaGVyYXBpc3RSZWNvbW1lbmRhdGlvbkNvbnRyb2xsZXIpO1xuICAgIHRoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZSA9IG1vZHVsZS5nZXQ8VGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlPihUaGVyYXBpc3RSZWNvbW1lbmRhdGlvblNlcnZpY2UpO1xuICAgIHByaXNtYVNlcnZpY2UgPSBtb2R1bGUuZ2V0PFByaXNtYVNlcnZpY2U+KFByaXNtYVNlcnZpY2UpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29udHJvbGxlciBJbml0aWFsaXphdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGJlIGRlZmluZWQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoY29udHJvbGxlcikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSB0aGVyYXBpc3RSZWNvbW1lbmRhdGlvblNlcnZpY2UgaW5qZWN0ZWQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByaXNtYVNlcnZpY2UgaW5qZWN0ZWQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlY3VyaXR5IEd1YXJkcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGJlIHByb3RlY3RlZCBieSBKd3RBdXRoR3VhcmQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBndWFyZHMgPSBSZWZsZWN0LmdldE1ldGFkYXRhKCdfX2d1YXJkc19fJywgVGhlcmFwaXN0UmVjb21tZW5kYXRpb25Db250cm9sbGVyKTtcbiAgICAgIGV4cGVjdChndWFyZHMpLnRvQ29udGFpbihKd3RBdXRoR3VhcmQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciByb3V0ZSBkZWNvcmF0b3JzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29udHJvbGxlck1ldGFkYXRhID0gUmVmbGVjdC5nZXRNZXRhZGF0YSgncGF0aCcsIFRoZXJhcGlzdFJlY29tbWVuZGF0aW9uQ29udHJvbGxlcik7XG4gICAgICBleHBlY3QoY29udHJvbGxlck1ldGFkYXRhKS50b0JlKCd0aGVyYXBpc3QtcmVjb21tZW5kYXRpb25zJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL3RoZXJhcGlzdC1yZWNvbW1lbmRhdGlvbnMnLCAoKSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSB7XG4gICAgICBsaW1pdDogMTAsXG4gICAgICBpbmNsdWRlSW5hY3RpdmU6IGZhbHNlLFxuICAgICAgcHJvdmluY2U6ICdPbnRhcmlvJyxcbiAgICAgIG1heEhvdXJseVJhdGU6IDIwMCxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgcmVjb21tZW5kZWQgdGhlcmFwaXN0cyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuICAgICAgbW9ja1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZS5nZXRSZWNvbW1lbmRlZFRoZXJhcGlzdHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1JlY29tbWVuZGF0aW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFJlY29tbWVuZGVkVGhlcmFwaXN0cyhURVNUX1VTRVJfSURTLkNMSUVOVCwgcXVlcnkpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZWNvbW1lbmRhdGlvblJlc3BvbnNlKTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogVEVTVF9VU0VSX0lEUy5DTElFTlQgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHRoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZS5nZXRSZWNvbW1lbmRlZFRoZXJhcGlzdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgdXNlcklkOiBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICBpbmNsdWRlSW5hY3RpdmU6IGZhbHNlLFxuICAgICAgICBwcm92aW5jZTogJ09udGFyaW8nLFxuICAgICAgICBtYXhIb3VybHlSYXRlOiAyMDAsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVzZXIgbm90IGZvdW5kIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBhd2FpdCBUZXN0QXNzZXJ0aW9ucy5leHBlY3RUb1Rocm93TmVzdEV4Y2VwdGlvbihcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5nZXRSZWNvbW1lbmRlZFRoZXJhcGlzdHMoVEVTVF9VU0VSX0lEUy5DTElFTlQsIHF1ZXJ5KSxcbiAgICAgICAgTm90Rm91bmRFeGNlcHRpb24sXG4gICAgICAgIGBVc2VyIHdpdGggSUQgJHtURVNUX1VTRVJfSURTLkNMSUVOVH0gbm90IGZvdW5kYCxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXNlcik7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ1JlY29tbWVuZGF0aW9uIHNlcnZpY2UgZmFpbGVkJyk7XG4gICAgICBtb2NrVGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldFJlY29tbWVuZGVkVGhlcmFwaXN0cy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBUZXN0QXNzZXJ0aW9ucy5leHBlY3RUb1Rocm93TmVzdEV4Y2VwdGlvbihcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5nZXRSZWNvbW1lbmRlZFRoZXJhcGlzdHMoVEVTVF9VU0VSX0lEUy5DTElFTlQsIHF1ZXJ5KSxcbiAgICAgICAgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbixcbiAgICAgICAgJ1JlY29tbWVuZGF0aW9uIHNlcnZpY2UgZmFpbGVkJyxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmRlZmluZWQgcXVlcnkgcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVtcHR5UXVlcnkgPSB7fTtcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXNlcik7XG4gICAgICBtb2NrVGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldFJlY29tbWVuZGVkVGhlcmFwaXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVjb21tZW5kYXRpb25SZXNwb25zZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UmVjb21tZW5kZWRUaGVyYXBpc3RzKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCBlbXB0eVF1ZXJ5KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrUmVjb21tZW5kYXRpb25SZXNwb25zZSk7XG4gICAgICBleHBlY3QodGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldFJlY29tbWVuZGVkVGhlcmFwaXN0cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB1c2VySWQ6IFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgICBsaW1pdDogdW5kZWZpbmVkLFxuICAgICAgICBpbmNsdWRlSW5hY3RpdmU6IHVuZGVmaW5lZCxcbiAgICAgICAgcHJvdmluY2U6IHVuZGVmaW5lZCxcbiAgICAgICAgbWF4SG91cmx5UmF0ZTogdW5kZWZpbmVkLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBjb25uZWN0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUubW9ja1JlamVjdGVkVmFsdWUoZGJFcnJvcik7XG5cbiAgICAgIGF3YWl0IFRlc3RBc3NlcnRpb25zLmV4cGVjdFRvVGhyb3dOZXN0RXhjZXB0aW9uKFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmdldFJlY29tbWVuZGVkVGhlcmFwaXN0cyhURVNUX1VTRVJfSURTLkNMSUVOVCwgcXVlcnkpLFxuICAgICAgICBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uLFxuICAgICAgICAnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvdGhlcmFwaXN0LXJlY29tbWVuZGF0aW9ucy9jb21wYXRpYmlsaXR5Lzp0aGVyYXBpc3RJZCcsICgpID0+IHtcbiAgICBjb25zdCB0aGVyYXBpc3RJZCA9IFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNUO1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgY29tcGF0aWJpbGl0eSBhbmFseXNpcyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuICAgICAgbW9ja1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZS5nZXRDb21wYXRpYmlsaXR5QW5hbHlzaXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbXBhdGliaWxpdHlBbmFseXNpcyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Q29tcGF0aWJpbGl0eUFuYWx5c2lzKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCB0aGVyYXBpc3RJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja0NvbXBhdGliaWxpdHlBbmFseXNpcyk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IFRFU1RfVVNFUl9JRFMuQ0xJRU5UIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdCh0aGVyYXBpc3RSZWNvbW1lbmRhdGlvblNlcnZpY2UuZ2V0Q29tcGF0aWJpbGl0eUFuYWx5c2lzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgIHRoZXJhcGlzdElkLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVzZXIgbm90IGZvdW5kIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBhd2FpdCBUZXN0QXNzZXJ0aW9ucy5leHBlY3RUb1Rocm93TmVzdEV4Y2VwdGlvbihcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5nZXRDb21wYXRpYmlsaXR5QW5hbHlzaXMoVEVTVF9VU0VSX0lEUy5DTElFTlQsIHRoZXJhcGlzdElkKSxcbiAgICAgICAgTm90Rm91bmRFeGNlcHRpb24sXG4gICAgICAgIGBVc2VyIHdpdGggSUQgJHtURVNUX1VTRVJfSURTLkNMSUVOVH0gbm90IGZvdW5kYCxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXNlcik7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ0NvbXBhdGliaWxpdHkgYW5hbHlzaXMgZmFpbGVkJyk7XG4gICAgICBtb2NrVGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldENvbXBhdGliaWxpdHlBbmFseXNpcy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBUZXN0QXNzZXJ0aW9ucy5leHBlY3RUb1Rocm93TmVzdEV4Y2VwdGlvbihcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5nZXRDb21wYXRpYmlsaXR5QW5hbHlzaXMoVEVTVF9VU0VSX0lEUy5DTElFTlQsIHRoZXJhcGlzdElkKSxcbiAgICAgICAgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbixcbiAgICAgICAgJ0NvbXBhdGliaWxpdHkgYW5hbHlzaXMgZmFpbGVkJyxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB0aGVyYXBpc3Qgbm90IGZvdW5kIGluIHNlcnZpY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuICAgICAgY29uc3Qgbm90Rm91bmRFcnJvciA9IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbignVGhlcmFwaXN0IG5vdCBmb3VuZCcpO1xuICAgICAgbW9ja1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZS5nZXRDb21wYXRpYmlsaXR5QW5hbHlzaXMubW9ja1JlamVjdGVkVmFsdWUobm90Rm91bmRFcnJvcik7XG5cbiAgICAgIGF3YWl0IFRlc3RBc3NlcnRpb25zLmV4cGVjdFRvVGhyb3dOZXN0RXhjZXB0aW9uKFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmdldENvbXBhdGliaWxpdHlBbmFseXNpcyhURVNUX1VTRVJfSURTLkNMSUVOVCwgdGhlcmFwaXN0SWQpLFxuICAgICAgICBOb3RGb3VuZEV4Y2VwdGlvbixcbiAgICAgICAgJ1RoZXJhcGlzdCBub3QgZm91bmQnLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgdGhlcmFwaXN0IElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZFRoZXJhcGlzdElkID0gJ2ludmFsaWQtaWQnO1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcbiAgICAgIGNvbnN0IHNlcnZpY2VFcnJvciA9IG5ldyBFcnJvcignSW52YWxpZCB0aGVyYXBpc3QgSUQnKTtcbiAgICAgIG1vY2tUaGVyYXBpc3RSZWNvbW1lbmRhdGlvblNlcnZpY2UuZ2V0Q29tcGF0aWJpbGl0eUFuYWx5c2lzLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IFRlc3RBc3NlcnRpb25zLmV4cGVjdFRvVGhyb3dOZXN0RXhjZXB0aW9uKFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmdldENvbXBhdGliaWxpdHlBbmFseXNpcyhURVNUX1VTRVJfSURTLkNMSUVOVCwgaW52YWxpZFRoZXJhcGlzdElkKSxcbiAgICAgICAgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbixcbiAgICAgICAgJ0ludmFsaWQgdGhlcmFwaXN0IElEJyxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL3RoZXJhcGlzdC1yZWNvbW1lbmRhdGlvbnMvd2VsY29tZScsICgpID0+IHtcbiAgICBjb25zdCB3ZWxjb21lUXVlcnkgPSB7XG4gICAgICBsaW1pdDogNSxcbiAgICAgIHByb3ZpbmNlOiAnT250YXJpbycsXG4gICAgICBmb3JjZVJlZnJlc2g6IGZhbHNlLFxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIGdldCB3ZWxjb21lIHJlY29tbWVuZGF0aW9ucyBmb3IgZmlyc3QtdGltZSB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLmNsaWVudC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDbGllbnQpO1xuICAgICAgbW9ja1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZS5nZXRSZWNvbW1lbmRlZFRoZXJhcGlzdHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1JlY29tbWVuZGF0aW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFdlbGNvbWVSZWNvbW1lbmRhdGlvbnMoVEVTVF9VU0VSX0lEUy5DTElFTlQsIHdlbGNvbWVRdWVyeSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdyZWNvbW1lbmRhdGlvbnMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCd3ZWxjb21lTWVzc2FnZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2lzRmlyc3RUaW1lJywgdHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgndXNlckluZm8nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCduZXh0U3RlcHMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdtYXRjaGluZ0luc2lnaHRzJyk7XG4gICAgICBleHBlY3QocmVzdWx0LndlbGNvbWVNZXNzYWdlKS50b0NvbnRhaW4oJ1dlbGNvbWUgdG8gTWVudGFyYSwgSm9obiEnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubmV4dFN0ZXBzLmNhblNlbmRSZXF1ZXN0cykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubmV4dFN0ZXBzLnJlY29tbWVuZGVkQWN0aW9ucykudG9IYXZlTGVuZ3RoKDQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWRpcmVjdCByZXR1cm5pbmcgdXNlciB0byByZWd1bGFyIHJlY29tbWVuZGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJldHVybmluZ0NsaWVudCA9IHsgLi4ubW9ja0NsaWVudCwgaGFzU2VlblRoZXJhcGlzdFJlY29tbWVuZGF0aW9uczogdHJ1ZSB9O1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLmNsaWVudC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKHJldHVybmluZ0NsaWVudCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0V2VsY29tZVJlY29tbWVuZGF0aW9ucyhURVNUX1VTRVJfSURTLkNMSUVOVCwgd2VsY29tZVF1ZXJ5KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIGlzRmlyc3RUaW1lOiBmYWxzZSxcbiAgICAgICAgcmVkaXJlY3RUbzogJy90aGVyYXBpc3QtcmVjb21tZW5kYXRpb25zJyxcbiAgICAgICAgbWVzc2FnZTogJ1VzZXIgaGFzIGFscmVhZHkgY29tcGxldGVkIHdlbGNvbWUgZmxvdycsXG4gICAgICAgIGxhc3RTZWVuQXQ6IHJldHVybmluZ0NsaWVudC5jcmVhdGVkQXQsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZvcmNlIHJlZnJlc2ggZm9yIHJldHVybmluZyB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmV0dXJuaW5nQ2xpZW50ID0geyAuLi5tb2NrQ2xpZW50LCBoYXNTZWVuVGhlcmFwaXN0UmVjb21tZW5kYXRpb25zOiB0cnVlIH07XG4gICAgICBjb25zdCBmb3JjZVJlZnJlc2hRdWVyeSA9IHsgLi4ud2VsY29tZVF1ZXJ5LCBmb3JjZVJlZnJlc2g6IHRydWUgfTtcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXNlcik7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS5jbGllbnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShyZXR1cm5pbmdDbGllbnQpO1xuICAgICAgbW9ja1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZS5nZXRSZWNvbW1lbmRlZFRoZXJhcGlzdHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1JlY29tbWVuZGF0aW9uUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFdlbGNvbWVSZWNvbW1lbmRhdGlvbnMoVEVTVF9VU0VSX0lEUy5DTElFTlQsIGZvcmNlUmVmcmVzaFF1ZXJ5KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3JlY29tbWVuZGF0aW9ucycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3dlbGNvbWVNZXNzYWdlJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnaXNGaXJzdFRpbWUnLCBmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LndlbGNvbWVNZXNzYWdlKS50b0NvbnRhaW4oJ1dlbGNvbWUgYmFjaywgSm9obiEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVzZXIgbm90IGZvdW5kIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UuY2xpZW50LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NsaWVudCk7XG5cbiAgICAgIGF3YWl0IFRlc3RBc3NlcnRpb25zLmV4cGVjdFRvVGhyb3dOZXN0RXhjZXB0aW9uKFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmdldFdlbGNvbWVSZWNvbW1lbmRhdGlvbnMoVEVTVF9VU0VSX0lEUy5DTElFTlQsIHdlbGNvbWVRdWVyeSksXG4gICAgICAgIE5vdEZvdW5kRXhjZXB0aW9uLFxuICAgICAgICBgVXNlciB3aXRoIElEICR7VEVTVF9VU0VSX0lEUy5DTElFTlR9IG5vdCBmb3VuZGAsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY2xpZW50IHByb2ZpbGUgbm90IGZvdW5kIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLmNsaWVudC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBhd2FpdCBUZXN0QXNzZXJ0aW9ucy5leHBlY3RUb1Rocm93TmVzdEV4Y2VwdGlvbihcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5nZXRXZWxjb21lUmVjb21tZW5kYXRpb25zKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCB3ZWxjb21lUXVlcnkpLFxuICAgICAgICBOb3RGb3VuZEV4Y2VwdGlvbixcbiAgICAgICAgYENsaWVudCBwcm9maWxlIG5vdCBmb3VuZCBmb3IgdXNlciAke1RFU1RfVVNFUl9JRFMuQ0xJRU5UfWAsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UuY2xpZW50LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NsaWVudCk7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ1JlY29tbWVuZGF0aW9uIHNlcnZpY2UgZmFpbGVkJyk7XG4gICAgICBtb2NrVGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldFJlY29tbWVuZGVkVGhlcmFwaXN0cy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBUZXN0QXNzZXJ0aW9ucy5leHBlY3RUb1Rocm93TmVzdEV4Y2VwdGlvbihcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5nZXRXZWxjb21lUmVjb21tZW5kYXRpb25zKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCB3ZWxjb21lUXVlcnkpLFxuICAgICAgICBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uLFxuICAgICAgICAnUmVjb21tZW5kYXRpb24gc2VydmljZSBmYWlsZWQnLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIHF1ZXJ5IGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIHF1ZXJ5IGZhaWxlZCcpO1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZWplY3RlZFZhbHVlKGRiRXJyb3IpO1xuXG4gICAgICBhd2FpdCBUZXN0QXNzZXJ0aW9ucy5leHBlY3RUb1Rocm93TmVzdEV4Y2VwdGlvbihcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5nZXRXZWxjb21lUmVjb21tZW5kYXRpb25zKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCB3ZWxjb21lUXVlcnkpLFxuICAgICAgICBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uLFxuICAgICAgICAnRGF0YWJhc2UgcXVlcnkgZmFpbGVkJyxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiBUZXN0aW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlIHJlY29tbWVuZGF0aW9uIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU3RlcCAxOiBHZXQgcmVndWxhciByZWNvbW1lbmRhdGlvbnNcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXNlcik7XG4gICAgICBtb2NrVGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldFJlY29tbWVuZGVkVGhlcmFwaXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVjb21tZW5kYXRpb25SZXNwb25zZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UmVjb21tZW5kZWRUaGVyYXBpc3RzKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCB7XG4gICAgICAgIGxpbWl0OiAxMCxcbiAgICAgICAgaW5jbHVkZUluYWN0aXZlOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9ucykudG9FcXVhbChtb2NrUmVjb21tZW5kYXRpb25SZXNwb25zZSk7XG5cbiAgICAgIC8vIFN0ZXAgMjogR2V0IGNvbXBhdGliaWxpdHkgYW5hbHlzaXMgZm9yIGEgc3BlY2lmaWMgdGhlcmFwaXN0XG4gICAgICBtb2NrVGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldENvbXBhdGliaWxpdHlBbmFseXNpcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ29tcGF0aWJpbGl0eUFuYWx5c2lzKTtcbiAgICAgIFxuICAgICAgY29uc3QgY29tcGF0aWJpbGl0eSA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Q29tcGF0aWJpbGl0eUFuYWx5c2lzKFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICApO1xuICAgICAgZXhwZWN0KGNvbXBhdGliaWxpdHkpLnRvRXF1YWwobW9ja0NvbXBhdGliaWxpdHlBbmFseXNpcyk7XG5cbiAgICAgIC8vIFN0ZXAgMzogR2V0IHdlbGNvbWUgcmVjb21tZW5kYXRpb25zXG4gICAgICBtb2NrUHJpc21hU2VydmljZS5jbGllbnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2xpZW50KTtcbiAgICAgIFxuICAgICAgY29uc3Qgd2VsY29tZSA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0V2VsY29tZVJlY29tbWVuZGF0aW9ucyhURVNUX1VTRVJfSURTLkNMSUVOVCwge1xuICAgICAgICBsaW1pdDogNSxcbiAgICAgICAgZm9yY2VSZWZyZXNoOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHdlbGNvbWUpLnRvSGF2ZVByb3BlcnR5KCd3ZWxjb21lTWVzc2FnZScpO1xuICAgICAgZXhwZWN0KHdlbGNvbWUpLnRvSGF2ZVByb3BlcnR5KCdpc0ZpcnN0VGltZScsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdXNlciBqb3VybmV5IGZyb20gd2VsY29tZSB0byByZWd1bGFyIHJlY29tbWVuZGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFN0ZXAgMTogRmlyc3QtdGltZSB1c2VyIGdldHMgd2VsY29tZSByZWNvbW1lbmRhdGlvbnNcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXNlcik7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS5jbGllbnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2xpZW50KTtcbiAgICAgIG1vY2tUaGVyYXBpc3RSZWNvbW1lbmRhdGlvblNlcnZpY2UuZ2V0UmVjb21tZW5kZWRUaGVyYXBpc3RzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZWNvbW1lbmRhdGlvblJlc3BvbnNlKTtcbiAgICAgIFxuICAgICAgY29uc3Qgd2VsY29tZSA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0V2VsY29tZVJlY29tbWVuZGF0aW9ucyhURVNUX1VTRVJfSURTLkNMSUVOVCwge1xuICAgICAgICBsaW1pdDogNSxcbiAgICAgICAgZm9yY2VSZWZyZXNoOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHdlbGNvbWUuaXNGaXJzdFRpbWUpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFN0ZXAgMjogTGF0ZXIsIHVzZXIgZ2V0cyByZWd1bGFyIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgcmV0dXJuaW5nQ2xpZW50ID0geyAuLi5tb2NrQ2xpZW50LCBoYXNTZWVuVGhlcmFwaXN0UmVjb21tZW5kYXRpb25zOiB0cnVlIH07XG4gICAgICBtb2NrUHJpc21hU2VydmljZS5jbGllbnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShyZXR1cm5pbmdDbGllbnQpO1xuICAgICAgXG4gICAgICBjb25zdCByZXR1cm5pbmdXZWxjb21lID0gYXdhaXQgY29udHJvbGxlci5nZXRXZWxjb21lUmVjb21tZW5kYXRpb25zKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCB7XG4gICAgICAgIGxpbWl0OiA1LFxuICAgICAgICBmb3JjZVJlZnJlc2g6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmV0dXJuaW5nV2VsY29tZS5pc0ZpcnN0VGltZSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmV0dXJuaW5nV2VsY29tZS5yZWRpcmVjdFRvKS50b0JlKCcvdGhlcmFwaXN0LXJlY29tbWVuZGF0aW9ucycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSB1bmF2YWlsYWJsZSBzY2VuYXJpb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdTZXJ2aWNlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlJyk7XG4gICAgICBtb2NrVGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldFJlY29tbWVuZGVkVGhlcmFwaXN0cy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBUZXN0QXNzZXJ0aW9ucy5leHBlY3RUb1Rocm93TmVzdEV4Y2VwdGlvbihcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5nZXRSZWNvbW1lbmRlZFRoZXJhcGlzdHMoVEVTVF9VU0VSX0lEUy5DTElFTlQsIHsgbGltaXQ6IDEwIH0pLFxuICAgICAgICBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uLFxuICAgICAgICAnU2VydmljZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZScsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCBhY2Nlc3MgaXNzdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcbiAgICAgIGNvbnN0IGNvbmN1cnJlbmN5RXJyb3IgPSBuZXcgRXJyb3IoJ1Jlc291cmNlIGlzIGxvY2tlZCcpO1xuICAgICAgbW9ja1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZS5nZXRSZWNvbW1lbmRlZFRoZXJhcGlzdHMubW9ja1JlamVjdGVkVmFsdWUoY29uY3VycmVuY3lFcnJvcik7XG5cbiAgICAgIGF3YWl0IFRlc3RBc3NlcnRpb25zLmV4cGVjdFRvVGhyb3dOZXN0RXhjZXB0aW9uKFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmdldFJlY29tbWVuZGVkVGhlcmFwaXN0cyhURVNUX1VTRVJfSURTLkNMSUVOVCwgeyBsaW1pdDogMTAgfSksXG4gICAgICAgIEludGVybmFsU2VydmVyRXJyb3JFeGNlcHRpb24sXG4gICAgICAgICdSZXNvdXJjZSBpcyBsb2NrZWQnLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1hbGZvcm1lZCBxdWVyeSBwYXJhbWV0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWFsZm9ybWVkUXVlcnkgPSB7IGludmFsaWQ6ICdkYXRhJyB9O1xuICAgICAgbW9ja1ByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcbiAgICAgIG1vY2tUaGVyYXBpc3RSZWNvbW1lbmRhdGlvblNlcnZpY2UuZ2V0UmVjb21tZW5kZWRUaGVyYXBpc3RzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZWNvbW1lbmRhdGlvblJlc3BvbnNlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRSZWNvbW1lbmRlZFRoZXJhcGlzdHMoVEVTVF9VU0VSX0lEUy5DTElFTlQsIG1hbGZvcm1lZFF1ZXJ5IGFzIGFueSk7XG5cbiAgICAgIGV4cGVjdCh0aGVyYXBpc3RSZWNvbW1lbmRhdGlvblNlcnZpY2UuZ2V0UmVjb21tZW5kZWRUaGVyYXBpc3RzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHVzZXJJZDogVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgIGxpbWl0OiB1bmRlZmluZWQsXG4gICAgICAgIGluY2x1ZGVJbmFjdGl2ZTogdW5kZWZpbmVkLFxuICAgICAgICBwcm92aW5jZTogdW5kZWZpbmVkLFxuICAgICAgICBtYXhIb3VybHlSYXRlOiB1bmRlZmluZWQsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Jlc3BvbnNlIEZvcm1hdCBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHByb3Blcmx5IGZvcm1hdHRlZCByZWNvbW1lbmRhdGlvbiByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXNlcik7XG4gICAgICBtb2NrVGhlcmFwaXN0UmVjb21tZW5kYXRpb25TZXJ2aWNlLmdldFJlY29tbWVuZGVkVGhlcmFwaXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVjb21tZW5kYXRpb25SZXNwb25zZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UmVjb21tZW5kZWRUaGVyYXBpc3RzKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCB7IGxpbWl0OiAxMCB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3JlY29tbWVuZGF0aW9ucycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3RvdGFsQ291bnQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdwYWdlJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnbGltaXQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdoYXNNb3JlJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnRvdGFsQ291bnQpLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvcGVybHkgZm9ybWF0dGVkIGNvbXBhdGliaWxpdHkgYW5hbHlzaXMgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuICAgICAgbW9ja1RoZXJhcGlzdFJlY29tbWVuZGF0aW9uU2VydmljZS5nZXRDb21wYXRpYmlsaXR5QW5hbHlzaXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbXBhdGliaWxpdHlBbmFseXNpcyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Q29tcGF0aWJpbGl0eUFuYWx5c2lzKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCBURVNUX1VTRVJfSURTLlRIRVJBUElTVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCd1c2VySWQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCd0aGVyYXBpc3RJZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ292ZXJhbGxDb21wYXRpYmlsaXR5Jyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnY29tcGF0aWJpbGl0eUZhY3RvcnMnKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5jb21wYXRpYmlsaXR5RmFjdG9ycykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5vdmVyYWxsQ29tcGF0aWJpbGl0eSkudG9CZSgnbnVtYmVyJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBwcm9wZXJseSBmb3JtYXR0ZWQgd2VsY29tZSByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXNlcik7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS5jbGllbnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2xpZW50KTtcbiAgICAgIG1vY2tUaGVyYXBpc3RSZWNvbW1lbmRhdGlvblNlcnZpY2UuZ2V0UmVjb21tZW5kZWRUaGVyYXBpc3RzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZWNvbW1lbmRhdGlvblJlc3BvbnNlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRXZWxjb21lUmVjb21tZW5kYXRpb25zKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCB7IGxpbWl0OiA1IH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnd2VsY29tZU1lc3NhZ2UnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdpc0ZpcnN0VGltZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3VzZXJJbmZvJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnbmV4dFN0ZXBzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnbWF0Y2hpbmdJbnNpZ2h0cycpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQud2VsY29tZU1lc3NhZ2UpLnRvQmUoJ3N0cmluZycpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuaXNGaXJzdFRpbWUpLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudXNlckluZm8pLnRvSGF2ZVByb3BlcnR5KCdmaXJzdE5hbWUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubmV4dFN0ZXBzKS50b0hhdmVQcm9wZXJ0eSgnY2FuU2VuZFJlcXVlc3RzJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQubmV4dFN0ZXBzLnJlY29tbWVuZGVkQWN0aW9ucykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcml2YXRlIE1ldGhvZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBwcm9wZXIgd2VsY29tZSBtZXNzYWdlIGZvciBmaXJzdC10aW1lIHVzZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gKGNvbnRyb2xsZXIgYXMgYW55KS5nZW5lcmF0ZVdlbGNvbWVNZXNzYWdlKCdKb2huJywgdHJ1ZSk7XG4gICAgICBleHBlY3QobWVzc2FnZSkudG9Db250YWluKCdXZWxjb21lIHRvIE1lbnRhcmEsIEpvaG4hJyk7XG4gICAgICBleHBlY3QobWVzc2FnZSkudG9Db250YWluKCdjdXJhdGVkIGEgcGVyc29uYWxpemVkIGxpc3QnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgcHJvcGVyIHdlbGNvbWUgbWVzc2FnZSBmb3IgcmV0dXJuaW5nIHVzZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gKGNvbnRyb2xsZXIgYXMgYW55KS5nZW5lcmF0ZVdlbGNvbWVNZXNzYWdlKCdKb2huJywgZmFsc2UpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2UpLnRvQ29udGFpbignV2VsY29tZSBiYWNrLCBKb2huIScpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2UpLnRvQ29udGFpbignZnJlc2ggdGhlcmFwaXN0IHJlY29tbWVuZGF0aW9ucycpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==