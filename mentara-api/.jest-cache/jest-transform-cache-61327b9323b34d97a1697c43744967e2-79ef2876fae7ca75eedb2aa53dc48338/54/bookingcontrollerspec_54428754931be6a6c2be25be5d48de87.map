{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/booking/booking.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/booking/booking.controller.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport {\n  HttpStatus,\n  ForbiddenException,\n  UnauthorizedException,\n  NotFoundException,\n  BadRequestException,\n} from '@nestjs/common';\nimport { BookingController } from './booking.controller';\nimport { BookingService } from './booking.service';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport { MeetingStatus } from '@prisma/client';\nimport {\n  createMockPrismaService,\n  TEST_USER_IDS,\n} from '../test-utils';\nimport {\n  TestDataGenerator,\n  TestAssertions,\n} from '../test-utils/enhanced-test-helpers';\n\ndescribe('BookingController', () => {\n  let controller: BookingController;\n  let bookingService: jest.Mocked<BookingService>;\n\n  const mockBookingService = {\n    createMeeting: jest.fn(),\n    getMeetings: jest.fn(),\n    getMeeting: jest.fn(),\n    updateMeeting: jest.fn(),\n    cancelMeeting: jest.fn(),\n    createAvailability: jest.fn(),\n    getAvailability: jest.fn(),\n    updateAvailability: jest.fn(),\n    deleteAvailability: jest.fn(),\n    getDurations: jest.fn(),\n    getAvailableSlots: jest.fn(),\n    checkMeetingAvailability: jest.fn(),\n  };\n\n  beforeEach(async () => {\n    const mockPrisma = createMockPrismaService();\n\n    const module: TestingModule = await Test.createTestingModule({\n      controllers: [BookingController],\n      providers: [\n        {\n          provide: BookingService,\n          useValue: mockBookingService,\n        },\n        {\n          provide: PrismaService,\n          useValue: mockPrisma,\n        },\n      ],\n    }).compile();\n\n    controller = module.get<BookingController>(BookingController);\n    bookingService = module.get(BookingService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('basic functionality', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have bookingService injected', () => {\n      expect(bookingService).toBeDefined();\n    });\n  });\n\n  describe('createMeeting', () => {\n    const createMeetingDto = {\n      therapistId: TEST_USER_IDS.THERAPIST,\n      startTime: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(), // Tomorrow\n      duration: 60,\n      meetingType: 'video',\n      title: 'Initial consultation',\n    };\n\n    it('should allow clients to create meetings', async () => {\n      const mockMeeting = {\n        id: 'meeting-123',\n        ...createMeetingDto,\n        clientId: TEST_USER_IDS.CLIENT,\n        status: MeetingStatus.SCHEDULED,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      };\n\n      bookingService.createMeeting.mockResolvedValue(mockMeeting as any);\n\n      const result = await controller.createMeeting(\n        createMeetingDto,\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n\n      expect(bookingService.createMeeting).toHaveBeenCalledWith(\n        createMeetingDto,\n        TEST_USER_IDS.CLIENT,\n      );\n      expect(result).toEqual(mockMeeting);\n    });\n\n    it('should reject non-client users from creating meetings', async () => {\n      await expect(\n        controller.createMeeting(\n          createMeetingDto,\n          TEST_USER_IDS.THERAPIST,\n          'therapist',\n        ),\n      ).rejects.toThrow(ForbiddenException);\n\n      expect(bookingService.createMeeting).not.toHaveBeenCalled();\n    });\n\n    it('should reject admin users from creating meetings', async () => {\n      await expect(\n        controller.createMeeting(\n          createMeetingDto,\n          TEST_USER_IDS.ADMIN,\n          'admin',\n        ),\n      ).rejects.toThrow(ForbiddenException);\n\n      expect(bookingService.createMeeting).not.toHaveBeenCalled();\n    });\n\n    it('should handle booking service errors', async () => {\n      bookingService.createMeeting.mockRejectedValue(\n        new BadRequestException('Therapist not available at this time'),\n      );\n\n      await expect(\n        controller.createMeeting(\n          createMeetingDto,\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle scheduling conflicts', async () => {\n      bookingService.createMeeting.mockRejectedValue(\n        new BadRequestException('Time slot not available'),\n      );\n\n      await expect(\n        controller.createMeeting(createMeetingDto, TEST_USER_IDS.CLIENT, 'client'),\n      ).rejects.toThrow(BadRequestException);\n\n      expect(bookingService.createMeeting).toHaveBeenCalledWith(\n        createMeetingDto,\n        TEST_USER_IDS.CLIENT,\n      );\n    });\n\n    it('should handle invalid therapist', async () => {\n      const invalidMeetingData = {\n        ...createMeetingDto,\n        therapistId: 'invalid-therapist-id',\n      };\n\n      bookingService.createMeeting.mockRejectedValue(\n        new NotFoundException('Therapist not found'),\n      );\n\n      await expect(\n        controller.createMeeting(\n          invalidMeetingData,\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(NotFoundException);\n    });\n\n    it('should validate meeting duration', async () => {\n      const invalidDurationData = {\n        ...createMeetingDto,\n        duration: 0,\n      };\n\n      bookingService.createMeeting.mockRejectedValue(\n        new BadRequestException('Invalid meeting duration'),\n      );\n\n      await expect(\n        controller.createMeeting(\n          invalidDurationData,\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(BadRequestException);\n    });\n  });\n\n  describe('getMeetings', () => {\n    it('should return meetings for client users', async () => {\n      const mockMeetings = [\n        TestDataGenerator.createMeeting({\n          clientId: TEST_USER_IDS.CLIENT,\n          therapistId: TEST_USER_IDS.THERAPIST,\n          status: 'SCHEDULED',\n        }),\n        TestDataGenerator.createMeeting({\n          clientId: TEST_USER_IDS.CLIENT,\n          therapistId: TEST_USER_IDS.THERAPIST,\n          status: 'COMPLETED',\n        }),\n      ];\n\n      bookingService.getMeetings.mockResolvedValue(mockMeetings as any);\n\n      const result = await controller.getMeetings(\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n\n      expect(bookingService.getMeetings).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n      expect(result).toEqual(mockMeetings);\n      expect(result).toHaveLength(2);\n    });\n\n    it('should return meetings for therapist users', async () => {\n      const mockMeetings = [\n        TestDataGenerator.createMeeting({\n          therapistId: TEST_USER_IDS.THERAPIST,\n          status: 'SCHEDULED',\n        }),\n        TestDataGenerator.createMeeting({\n          therapistId: TEST_USER_IDS.THERAPIST,\n          status: 'IN_PROGRESS',\n        }),\n      ];\n\n      bookingService.getMeetings.mockResolvedValue(mockMeetings as any);\n\n      const result = await controller.getMeetings(\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n\n      expect(bookingService.getMeetings).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n      expect(result).toEqual(mockMeetings);\n    });\n\n    it('should return empty array when no meetings exist', async () => {\n      bookingService.getMeetings.mockResolvedValue([]);\n\n      const result = await controller.getMeetings(\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n\n      expect(result).toEqual([]);\n      expect(result).toHaveLength(0);\n    });\n\n    it('should handle admin role appropriately', async () => {\n      const mockAdminMeetings = [\n        TestDataGenerator.createMeeting({ status: 'SCHEDULED' }),\n      ];\n\n      bookingService.getMeetings.mockResolvedValue(mockAdminMeetings as any);\n\n      const result = await controller.getMeetings(\n        TEST_USER_IDS.ADMIN,\n        'admin',\n      );\n\n      expect(bookingService.getMeetings).toHaveBeenCalledWith(\n        TEST_USER_IDS.ADMIN,\n        'admin',\n      );\n      expect(result).toEqual(mockAdminMeetings);\n    });\n  });\n\n  describe('getMeeting', () => {\n    const meetingId = 'meeting-123';\n    const mockMeeting = {\n      id: meetingId,\n      clientId: TEST_USER_IDS.CLIENT,\n      therapistId: TEST_USER_IDS.THERAPIST,\n      startTime: new Date('2024-12-01T10:00:00Z'),\n      duration: 60,\n      status: MeetingStatus.SCHEDULED,\n      meetingType: 'video',\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    it('should return meeting for authorized client', async () => {\n      bookingService.getMeeting.mockResolvedValue(mockMeeting as any);\n\n      const result = await controller.getMeeting(\n        meetingId,\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n\n      expect(bookingService.getMeeting).toHaveBeenCalledWith(\n        meetingId,\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n      expect(result).toEqual(mockMeeting);\n    });\n\n    it('should return meeting for authorized therapist', async () => {\n      bookingService.getMeeting.mockResolvedValue(mockMeeting as any);\n\n      const result = await controller.getMeeting(\n        meetingId,\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n\n      expect(bookingService.getMeeting).toHaveBeenCalledWith(\n        meetingId,\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n      expect(result).toEqual(mockMeeting);\n    });\n\n    it('should handle meeting not found', async () => {\n      bookingService.getMeeting.mockRejectedValue(\n        new NotFoundException('Meeting not found'),\n      );\n\n      await expect(\n        controller.getMeeting(\n          'invalid-meeting-id',\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(NotFoundException);\n    });\n\n    it('should handle unauthorized access', async () => {\n      bookingService.getMeeting.mockRejectedValue(\n        new ForbiddenException('Access denied'),\n      );\n\n      await expect(\n        controller.getMeeting(meetingId, 'unauthorized-user', 'client'),\n      ).rejects.toThrow(ForbiddenException);\n    });\n  });\n\n  describe('updateMeeting', () => {\n    const meetingId = 'meeting-123';\n    const updateData = {\n      startTime: '2024-12-01T14:00:00Z',\n      title: 'Updated meeting',\n      therapistId: TEST_USER_IDS.THERAPIST,\n      duration: 60,\n    };\n\n    it('should successfully update meeting', async () => {\n      const updatedMeeting = {\n        id: meetingId,\n        clientId: TEST_USER_IDS.CLIENT,\n        ...updateData,\n        duration: 60,\n        status: MeetingStatus.SCHEDULED,\n        meetingType: 'video',\n        updatedAt: new Date(),\n      };\n\n      bookingService.updateMeeting.mockResolvedValue(updatedMeeting as any);\n\n      const result = await controller.updateMeeting(\n        meetingId,\n        updateData as any,\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n\n      expect(bookingService.updateMeeting).toHaveBeenCalledWith(\n        meetingId,\n        updateData,\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n      expect(result).toEqual(updatedMeeting);\n    });\n\n    it('should handle invalid meeting update', async () => {\n      bookingService.updateMeeting.mockRejectedValue(\n        new BadRequestException('Cannot update past meeting'),\n      );\n\n      await expect(\n        controller.updateMeeting(\n          meetingId,\n          updateData as any,\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle unauthorized update', async () => {\n      bookingService.updateMeeting.mockRejectedValue(\n        new ForbiddenException('Only meeting participants can update'),\n      );\n\n      await expect(\n        controller.updateMeeting(\n          meetingId,\n          updateData as any,\n          'unauthorized-user',\n          'client',\n        ),\n      ).rejects.toThrow(ForbiddenException);\n    });\n\n    it('should allow therapists to update meetings', async () => {\n      const therapistUpdate = {\n        startTime: '2024-12-01T15:00:00Z',\n        therapistId: TEST_USER_IDS.THERAPIST,\n        duration: 60,\n        title: 'Therapist updated meeting',\n      };\n\n      const mockUpdatedMeeting = {\n        id: meetingId,\n        ...therapistUpdate,\n      };\n\n      bookingService.updateMeeting.mockResolvedValue(\n        mockUpdatedMeeting as any,\n      );\n\n      const result = await controller.updateMeeting(\n        meetingId,\n        therapistUpdate,\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n\n      expect(result).toEqual(mockUpdatedMeeting);\n    });\n  });\n\n  describe('cancelMeeting', () => {\n    const meetingId = 'meeting-123';\n\n    it('should successfully cancel meeting', async () => {\n      const cancelledMeeting = {\n        id: meetingId,\n        clientId: TEST_USER_IDS.CLIENT,\n        therapistId: TEST_USER_IDS.THERAPIST,\n        status: MeetingStatus.CANCELLED,\n        cancelledAt: new Date(),\n        cancellationReason: 'Client request',\n        updatedAt: new Date(),\n      };\n\n      bookingService.cancelMeeting.mockResolvedValue(cancelledMeeting as any);\n\n      const result = await controller.cancelMeeting(\n        meetingId,\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n\n      expect(bookingService.cancelMeeting).toHaveBeenCalledWith(\n        meetingId,\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n      expect(result).toEqual(cancelledMeeting);\n    });\n\n    it('should handle cancellation of already cancelled meeting', async () => {\n      bookingService.cancelMeeting.mockRejectedValue(\n        new BadRequestException('Meeting already cancelled'),\n      );\n\n      await expect(\n        controller.cancelMeeting(meetingId, TEST_USER_IDS.CLIENT, 'client'),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle unauthorized cancellation', async () => {\n      bookingService.cancelMeeting.mockRejectedValue(\n        new ForbiddenException('Access denied'),\n      );\n\n      await expect(\n        controller.cancelMeeting(meetingId, 'unauthorized-user', 'client'),\n      ).rejects.toThrow(ForbiddenException);\n    });\n\n    it('should allow therapists to cancel meetings', async () => {\n      const mockTherapistCancellation = {\n        id: meetingId,\n        status: 'CANCELLED',\n        cancelledBy: TEST_USER_IDS.THERAPIST,\n        cancellationReason: 'Emergency',\n      };\n\n      bookingService.cancelMeeting.mockResolvedValue(\n        mockTherapistCancellation as any,\n      );\n\n      const result = await controller.cancelMeeting(\n        meetingId,\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n\n      expect(result).toEqual(mockTherapistCancellation);\n    });\n  });\n\n  describe('createAvailability (Therapist Only)', () => {\n    const createAvailabilityDto = {\n      dayOfWeek: 1, // Monday\n      startTime: '09:00',\n      endTime: '17:00',\n      isAvailable: true,\n    };\n\n    it('should allow therapists to create availability', async () => {\n      const mockAvailability = {\n        id: 'availability-123',\n        therapistId: TEST_USER_IDS.THERAPIST,\n        ...createAvailabilityDto,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      };\n\n      bookingService.createAvailability.mockResolvedValue(\n        mockAvailability as any,\n      );\n\n      const result = await controller.createAvailability(\n        createAvailabilityDto,\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n\n      expect(bookingService.createAvailability).toHaveBeenCalledWith(\n        createAvailabilityDto,\n        TEST_USER_IDS.THERAPIST,\n      );\n      expect(result).toEqual(mockAvailability);\n    });\n\n    it('should reject non-therapist users from creating availability', async () => {\n      await expect(\n        controller.createAvailability(\n          createAvailabilityDto,\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(UnauthorizedException);\n\n      expect(bookingService.createAvailability).not.toHaveBeenCalled();\n    });\n\n    it('should reject admin users from creating availability', async () => {\n      await expect(\n        controller.createAvailability(\n          createAvailabilityDto,\n          TEST_USER_IDS.ADMIN,\n          'admin',\n        ),\n      ).rejects.toThrow(UnauthorizedException);\n\n      expect(bookingService.createAvailability).not.toHaveBeenCalled();\n    });\n\n    it('should handle availability creation errors', async () => {\n      bookingService.createAvailability.mockRejectedValue(\n        new BadRequestException('Invalid time range'),\n      );\n\n      await expect(\n        controller.createAvailability(\n          createAvailabilityDto,\n          TEST_USER_IDS.THERAPIST,\n          'therapist',\n        ),\n      ).rejects.toThrow(BadRequestException);\n    });\n  });\n\n  describe('getAvailability (Therapist Only)', () => {\n    it('should allow therapists to view their availability', async () => {\n      const mockAvailabilities = [\n        {\n          id: 'availability-1',\n          therapistId: TEST_USER_IDS.THERAPIST,\n          dayOfWeek: 1,\n          startTime: '09:00',\n          endTime: '12:00',\n          isAvailable: true,\n        },\n        {\n          id: 'availability-2',\n          therapistId: TEST_USER_IDS.THERAPIST,\n          dayOfWeek: 1,\n          startTime: '14:00',\n          endTime: '17:00',\n          isAvailable: true,\n        },\n      ];\n\n      bookingService.getAvailability.mockResolvedValue(\n        mockAvailabilities as any,\n      );\n\n      const result = await controller.getAvailability(\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n\n      expect(bookingService.getAvailability).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n      );\n      expect(result).toEqual(mockAvailabilities);\n      expect(result).toHaveLength(2);\n    });\n\n    it('should reject non-therapist users from viewing availability', async () => {\n      await expect(\n        controller.getAvailability(TEST_USER_IDS.CLIENT, 'client'),\n      ).rejects.toThrow(UnauthorizedException);\n\n      expect(bookingService.getAvailability).not.toHaveBeenCalled();\n    });\n\n    it('should return empty array for therapist with no availability', async () => {\n      bookingService.getAvailability.mockResolvedValue([]);\n\n      const result = await controller.getAvailability(\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n\n      expect(result).toEqual([]);\n      expect(result).toHaveLength(0);\n    });\n  });\n\n  describe('updateAvailability (Therapist Only)', () => {\n    const availabilityId = 'availability-123';\n    const updateAvailabilityDto = {\n      dayOfWeek: 1,\n      startTime: '10:00',\n      endTime: '16:00',\n    };\n\n    it('should allow therapists to update their availability', async () => {\n      const mockUpdatedAvailability = {\n        id: availabilityId,\n        therapistId: TEST_USER_IDS.THERAPIST,\n        ...updateAvailabilityDto,\n        updatedAt: new Date(),\n      };\n\n      bookingService.updateAvailability.mockResolvedValue(\n        mockUpdatedAvailability as any,\n      );\n\n      const result = await controller.updateAvailability(\n        availabilityId,\n        updateAvailabilityDto,\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n\n      expect(bookingService.updateAvailability).toHaveBeenCalledWith(\n        availabilityId,\n        updateAvailabilityDto,\n        TEST_USER_IDS.THERAPIST,\n      );\n      expect(result).toEqual(mockUpdatedAvailability);\n    });\n\n    it('should reject non-therapist users from updating availability', async () => {\n      await expect(\n        controller.updateAvailability(\n          availabilityId,\n          updateAvailabilityDto,\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(UnauthorizedException);\n\n      expect(bookingService.updateAvailability).not.toHaveBeenCalled();\n    });\n\n    it('should handle availability not found', async () => {\n      bookingService.updateAvailability.mockRejectedValue(\n        new NotFoundException('Availability not found'),\n      );\n\n      await expect(\n        controller.updateAvailability(\n          'non-existent-availability',\n          updateAvailabilityDto,\n          TEST_USER_IDS.THERAPIST,\n          'therapist',\n        ),\n      ).rejects.toThrow(NotFoundException);\n    });\n  });\n\n  describe('deleteAvailability (Therapist Only)', () => {\n    const availabilityId = 'availability-123';\n\n    it('should allow therapists to delete their availability', async () => {\n      const mockDeletedAvailability = {\n        id: availabilityId,\n        therapistId: TEST_USER_IDS.THERAPIST,\n        deleted: true,\n      };\n\n      bookingService.deleteAvailability.mockResolvedValue(\n        mockDeletedAvailability as any,\n      );\n\n      const result = await controller.deleteAvailability(\n        availabilityId,\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n\n      expect(bookingService.deleteAvailability).toHaveBeenCalledWith(\n        availabilityId,\n        TEST_USER_IDS.THERAPIST,\n      );\n      expect(result).toEqual(mockDeletedAvailability);\n    });\n\n    it('should reject non-therapist users from deleting availability', async () => {\n      await expect(\n        controller.deleteAvailability(\n          availabilityId,\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(UnauthorizedException);\n\n      expect(bookingService.deleteAvailability).not.toHaveBeenCalled();\n    });\n\n    it('should handle deletion of non-existent availability', async () => {\n      bookingService.deleteAvailability.mockRejectedValue(\n        new NotFoundException('Availability not found'),\n      );\n\n      await expect(\n        controller.deleteAvailability(\n          'non-existent-availability',\n          TEST_USER_IDS.THERAPIST,\n          'therapist',\n        ),\n      ).rejects.toThrow(NotFoundException);\n    });\n  });\n\n  describe('getDurations (Public)', () => {\n    it('should return available session durations', async () => {\n      const mockDurations = [\n        { value: 30, label: '30 minutes' },\n        { value: 45, label: '45 minutes' },\n        { value: 60, label: '1 hour' },\n        { value: 90, label: '1.5 hours' },\n      ];\n\n      bookingService.getDurations.mockReturnValue(mockDurations as any);\n\n      const result = controller.getDurations();\n\n      expect(bookingService.getDurations).toHaveBeenCalled();\n      expect(result).toEqual(mockDurations);\n      expect(result).toHaveLength(4);\n    });\n\n    it('should handle empty durations', async () => {\n      bookingService.getDurations.mockReturnValue([]);\n\n      const result = controller.getDurations();\n\n      expect(result).toEqual([]);\n    });\n  });\n\n  describe('getAvailableSlots (Public)', () => {\n    const therapistId = TEST_USER_IDS.THERAPIST;\n    const date = '2024-12-15';\n\n    it('should return available time slots for a therapist on a specific date', async () => {\n      const mockSlots = [\n        {\n          startTime: '09:00',\n          endTime: '10:00',\n          duration: 60,\n          available: true,\n        },\n        {\n          startTime: '10:00',\n          endTime: '11:00',\n          duration: 60,\n          available: true,\n        },\n        {\n          startTime: '14:00',\n          endTime: '15:00',\n          duration: 60,\n          available: true,\n        },\n      ];\n\n      bookingService.getAvailableSlots.mockResolvedValue(mockSlots as any);\n\n      const result = await controller.getAvailableSlots(therapistId, date);\n\n      expect(bookingService.getAvailableSlots).toHaveBeenCalledWith(\n        therapistId,\n        date,\n      );\n      expect(result).toEqual(mockSlots);\n      expect(result).toHaveLength(3);\n    });\n\n    it('should return empty array when no slots available', async () => {\n      bookingService.getAvailableSlots.mockResolvedValue([]);\n\n      const result = await controller.getAvailableSlots(therapistId, date);\n\n      expect(result).toEqual([]);\n      expect(result).toHaveLength(0);\n    });\n\n    it('should handle invalid therapist ID', async () => {\n      bookingService.getAvailableSlots.mockRejectedValue(\n        new NotFoundException('Therapist not found'),\n      );\n\n      await expect(\n        controller.getAvailableSlots('invalid-therapist-id', date),\n      ).rejects.toThrow(NotFoundException);\n    });\n\n    it('should handle invalid date format', async () => {\n      bookingService.getAvailableSlots.mockRejectedValue(\n        new BadRequestException('Invalid date format'),\n      );\n\n      await expect(\n        controller.getAvailableSlots(therapistId, 'invalid-date'),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle past dates appropriately', async () => {\n      const pastDate = '2020-01-01';\n\n      bookingService.getAvailableSlots.mockRejectedValue(\n        new BadRequestException('Cannot get slots for past dates'),\n      );\n\n      await expect(\n        controller.getAvailableSlots(therapistId, pastDate),\n      ).rejects.toThrow(BadRequestException);\n    });\n  });\n\n  describe('Role-Based Access Control Integration', () => {\n    it('should enforce role restrictions across all endpoints', async () => {\n      // Test client restrictions\n      await expect(\n        controller.createAvailability(\n          {} as any,\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(UnauthorizedException);\n\n      await expect(\n        controller.getAvailability(TEST_USER_IDS.CLIENT, 'client'),\n      ).rejects.toThrow(UnauthorizedException);\n\n      // Test therapist restrictions\n      await expect(\n        controller.createMeeting({} as any, TEST_USER_IDS.THERAPIST, 'therapist'),\n      ).rejects.toThrow(ForbiddenException);\n\n      // Verify no service calls were made\n      expect(bookingService.createAvailability).not.toHaveBeenCalled();\n      expect(bookingService.getAvailability).not.toHaveBeenCalled();\n      expect(bookingService.createMeeting).not.toHaveBeenCalled();\n    });\n\n    it('should allow appropriate role access to shared endpoints', async () => {\n      const mockMeetings = [TestDataGenerator.createMeeting()];\n      bookingService.getMeetings.mockResolvedValue(mockMeetings as any);\n\n      // Both client and therapist should access getMeetings\n      await controller.getMeetings(TEST_USER_IDS.CLIENT, 'client');\n      await controller.getMeetings(TEST_USER_IDS.THERAPIST, 'therapist');\n\n      expect(bookingService.getMeetings).toHaveBeenCalledTimes(2);\n    });\n\n    it('should handle moderator and admin roles appropriately', async () => {\n      const mockMeetings = [TestDataGenerator.createMeeting()];\n      bookingService.getMeetings.mockResolvedValue(mockMeetings as any);\n\n      // Admin should be able to view meetings\n      await controller.getMeetings(TEST_USER_IDS.ADMIN, 'admin');\n\n      // But admin cannot create meetings\n      await expect(\n        controller.createMeeting({} as any, TEST_USER_IDS.ADMIN, 'admin'),\n      ).rejects.toThrow(ForbiddenException);\n\n      expect(bookingService.getMeetings).toHaveBeenCalledWith(\n        TEST_USER_IDS.ADMIN,\n        'admin',\n      );\n    });\n  });\n\n  describe('Error Handling and Edge Cases', () => {\n    it('should handle service errors gracefully', async () => {\n      bookingService.createMeeting.mockRejectedValue(\n        new Error('Database connection failed'),\n      );\n\n      await expect(\n        controller.createMeeting({} as any, TEST_USER_IDS.CLIENT, 'client'),\n      ).rejects.toThrow('Database connection failed');\n    });\n\n    it('should pass through HTTP exceptions', async () => {\n      const notFoundError = new NotFoundException('Resource not found');\n      bookingService.getMeeting.mockRejectedValue(notFoundError);\n\n      await expect(\n        controller.getMeeting('meeting-1', TEST_USER_IDS.CLIENT, 'client'),\n      ).rejects.toThrow(NotFoundException);\n    });\n\n    it('should handle malformed request data', async () => {\n      const malformedMeetingDto = {\n        therapistId: null,\n        startTime: 'invalid-date',\n        duration: -1,\n      };\n\n      bookingService.createMeeting.mockRejectedValue(\n        new BadRequestException('Invalid meeting data'),\n      );\n\n      await expect(\n        controller.createMeeting(\n          malformedMeetingDto as any,\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle concurrent booking requests', async () => {\n      const concurrentBookingDto = {\n        therapistId: TEST_USER_IDS.THERAPIST,\n        startTime: new Date().toISOString(),\n        duration: 60,\n        meetingType: 'video',\n      };\n\n      // Simulate conflict\n      bookingService.createMeeting.mockRejectedValue(\n        new BadRequestException('Time slot no longer available'),\n      );\n\n      await expect(\n        controller.createMeeting(\n          concurrentBookingDto,\n          TEST_USER_IDS.CLIENT,\n          'client',\n        ),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle database connection issues gracefully', async () => {\n      bookingService.getMeetings.mockRejectedValue(\n        new Error('Database connection failed'),\n      );\n\n      await expect(\n        controller.getMeetings(TEST_USER_IDS.CLIENT, 'client'),\n      ).rejects.toThrow('Database connection failed');\n    });\n  });\n\n  describe('Integration Workflow Tests', () => {\n    it('should handle complete booking workflow', async () => {\n      // 1. Get available slots\n      const mockSlots = [\n        { startTime: '10:00', endTime: '11:00', available: true },\n      ];\n      bookingService.getAvailableSlots.mockResolvedValue(mockSlots as any);\n\n      // 2. Create meeting\n      const meetingDto = {\n        therapistId: TEST_USER_IDS.THERAPIST,\n        startTime: '2024-12-15T10:00:00Z',\n        duration: 60,\n        meetingType: 'video',\n      };\n      const mockMeeting = {\n        id: 'meeting-workflow',\n        ...meetingDto,\n        clientId: TEST_USER_IDS.CLIENT,\n        status: 'SCHEDULED',\n      };\n      bookingService.createMeeting.mockResolvedValue(mockMeeting as any);\n\n      // 3. Get meetings to verify\n      bookingService.getMeetings.mockResolvedValue([mockMeeting] as any);\n\n      // Execute workflow\n      const slotsResult = await controller.getAvailableSlots(\n        TEST_USER_IDS.THERAPIST,\n        '2024-12-15',\n      );\n      const meetingResult = await controller.createMeeting(\n        meetingDto,\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n      const meetingsResult = await controller.getMeetings(\n        TEST_USER_IDS.CLIENT,\n        'client',\n      );\n\n      expect(slotsResult).toHaveLength(1);\n      expect(meetingResult.status).toBe('SCHEDULED');\n      expect(meetingsResult).toHaveLength(1);\n    });\n\n    it('should handle therapist availability management workflow', async () => {\n      // 1. Create availability\n      const availabilityDto = {\n        dayOfWeek: 1,\n        startTime: '09:00',\n        endTime: '17:00',\n        isAvailable: true,\n      };\n      const mockAvailability = {\n        id: 'availability-workflow',\n        therapistId: TEST_USER_IDS.THERAPIST,\n        ...availabilityDto,\n      };\n      bookingService.createAvailability.mockResolvedValue(\n        mockAvailability as any,\n      );\n\n      // 2. Get availability to verify\n      bookingService.getAvailability.mockResolvedValue([\n        mockAvailability,\n      ] as any);\n\n      // 3. Update availability\n      const updateDto = { \n        dayOfWeek: 1,\n        startTime: '09:00',\n        endTime: '16:00' \n      };\n      const mockUpdatedAvailability = {\n        ...mockAvailability,\n        ...updateDto,\n      };\n      bookingService.updateAvailability.mockResolvedValue(\n        mockUpdatedAvailability as any,\n      );\n\n      // Execute workflow\n      const createResult = await controller.createAvailability(\n        availabilityDto,\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n      const getResult = await controller.getAvailability(\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n      const updateResult = await controller.updateAvailability(\n        mockAvailability.id,\n        updateDto,\n        TEST_USER_IDS.THERAPIST,\n        'therapist',\n      );\n\n      expect(createResult.isAvailable).toBe(true);\n      expect(getResult).toHaveLength(1);\n      expect(updateResult.endTime).toBe('16:00');\n    });\n  });\n});"],"version":3}