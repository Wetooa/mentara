{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/therapist/controllers/therapist-worksheet.controller.spec.ts","mappings":";AAAA;;;GAGG;;AAEH,6CAAsD;AAEtD,qFAAgF;AAChF,4EAAwE;AACxE,qEAAgE;AAEhE,kFAAwG;AACxG,kDAAoE;AAEpE,QAAQ,CAAC,8BAA8B,EAAE,GAAG,EAAE;IAC5C,IAAI,UAAwC,CAAC;IAC7C,IAAI,iBAAoC,CAAC;IACzC,IAAI,MAAqB,CAAC;IAE1B,yBAAyB;IACzB,MAAM,qBAAqB,GAAG;QAC5B,OAAO,EAAE,IAAI,CAAC,EAAE,EAAE;QAClB,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE;QACnB,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;QACjB,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;KAClB,CAAC;IAEF,cAAc;IACd,MAAM,gBAAgB,GAAG;QACvB,WAAW,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC;KAC7C,CAAC;IAEF,YAAY;IACZ,MAAM,aAAa,GAAG;QACpB,EAAE,EAAE,qBAAqB;QACzB,KAAK,EAAE,8BAA8B;QACrC,WAAW,EAAE,6CAA6C;QAC1D,YAAY,EAAE,wCAAwC;QACtD,OAAO,EAAE;YACP,QAAQ,EAAE;gBACR;oBACE,IAAI,EAAE,MAAM;oBACZ,KAAK,EAAE,kBAAkB;oBACzB,WAAW,EAAE,0BAA0B;iBACxC;gBACD;oBACE,IAAI,EAAE,WAAW;oBACjB,KAAK,EAAE,sBAAsB;oBAC7B,SAAS,EAAE;wBACT,oCAAoC;wBACpC,qCAAqC;qBACtC;iBACF;aACF;SACF;QACD,QAAQ,EAAE,qBAAa,CAAC,MAAM;QAC9B,WAAW,EAAE,qBAAa,CAAC,SAAS;QACpC,MAAM,EAAE,UAAU;QAClB,UAAU,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QAC5C,OAAO,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QACzC,WAAW,EAAE,IAAI;QACjB,QAAQ,EAAE,SAAS;QACnB,aAAa,EAAE,EAAE;QACjB,UAAU,EAAE,cAAc;QAC1B,IAAI,EAAE,CAAC,SAAS,EAAE,eAAe,EAAE,eAAe,CAAC;KACpD,CAAC;IAEF,MAAM,sBAAsB,GAAG;QAC7B,GAAG,aAAa;QAChB,MAAM,EAAE,WAAW;QACnB,WAAW,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QAC7C,SAAS,EAAE;YACT,UAAU,EAAE,CAAC;YACb,iBAAiB,EAAE;gBACjB,kCAAkC;gBAClC,4CAA4C;aAC7C;SACF;KACF,CAAC;IAEF,MAAM,iBAAiB,GAAG;QACxB,aAAa;QACb,sBAAsB;QACtB;YACE,GAAG,aAAa;YAChB,EAAE,EAAE,qBAAqB;YACzB,KAAK,EAAE,uBAAuB;YAC9B,MAAM,EAAE,aAAa;YACrB,QAAQ,EAAE,YAAY;SACvB;KACF,CAAC;IAEF,MAAM,kBAAkB,GAAG;QACzB,KAAK,EAAE,mBAAmB;QAC1B,WAAW,EAAE,wCAAwC;QACrD,YAAY,EAAE,uCAAuC;QACrD,OAAO,EAAE;YACP,QAAQ,EAAE;gBACR;oBACE,IAAI,EAAE,MAAM;oBACZ,KAAK,EAAE,gBAAgB;oBACvB,WAAW,EAAE,+BAA+B;iBAC7C;aACF;SACF;QACD,QAAQ,EAAE,qBAAa,CAAC,MAAM;QAC9B,QAAQ,EAAE,KAAK;QACf,OAAO,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QACzC,aAAa,EAAE,EAAE;QACjB,UAAU,EAAE,UAAU;QACtB,IAAI,EAAE,CAAC,KAAK,EAAE,gBAAgB,CAAC;KAChC,CAAC;IAEF,MAAM,kBAAkB,GAAG;QACzB,KAAK,EAAE,2BAA2B;QAClC,WAAW,EAAE,wCAAwC;QACrD,YAAY,EAAE,yCAAyC;QACvD,OAAO,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QACzC,aAAa,EAAE,EAAE;KAClB,CAAC;IAEF,UAAU,CAAC,KAAK,IAAI,EAAE;QACpB,MAAM,GAAG,MAAM,cAAI,CAAC,mBAAmB,CAAC;YACtC,WAAW,EAAE,CAAC,6DAA4B,CAAC;YAC3C,SAAS,EAAE;gBACT;oBACE,OAAO,EAAE,sCAAiB;oBAC1B,QAAQ,EAAE,qBAAqB;iBAChC;aACF;SACF,CAAC;aACC,aAAa,CAAC,6BAAY,CAAC;aAC3B,QAAQ,CAAC,gBAAgB,CAAC;aAC1B,OAAO,EAAE,CAAC;QAEb,UAAU,GAAG,MAAM,CAAC,GAAG,CAA+B,6DAA4B,CAAC,CAAC;QACpF,iBAAiB,GAAG,MAAM,CAAC,GAAG,CAAoB,sCAAiB,CAAC,CAAC;IACvE,CAAC,CAAC,CAAC;IAEH,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,2BAA2B,EAAE,GAAG,EAAE;QACzC,EAAE,CAAC,mBAAmB,EAAE,GAAG,EAAE;YAC3B,MAAM,CAAC,UAAU,CAAC,CAAC,WAAW,EAAE,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,wCAAwC,EAAE,GAAG,EAAE;YAChD,MAAM,CAAC,iBAAiB,CAAC,CAAC,WAAW,EAAE,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;QAC/B,EAAE,CAAC,qCAAqC,EAAE,GAAG,EAAE;YAC7C,MAAM,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,YAAY,EAAE,6DAA4B,CAAC,CAAC;YAC/E,MAAM,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,6BAAY,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qCAAqC,EAAE,GAAG,EAAE;YAC7C,MAAM,kBAAkB,GAAG,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,6DAA4B,CAAC,CAAC;YACrF,MAAM,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;QAC1D,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,2BAA2B,EAAE,GAAG,EAAE;QACzC,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;YAC5D,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,CAAC;YAEnE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,sBAAsB,CAAC,qBAAa,CAAC,SAAS,CAAC,CAAC;YAEhF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;YAC1C,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,oBAAoB,CACpD,SAAS,EAAE,WAAW;YACtB,qBAAa,CAAC,SAAS,EACvB,SAAS,CAAC,SAAS;aACpB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;YAClD,MAAM,mBAAmB,GAAG,CAAC,sBAAsB,CAAC,CAAC;YACrD,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,CAAC;YAErE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,sBAAsB,CACpD,qBAAa,CAAC,SAAS,EACvB,WAAW,CACZ,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;YAC5C,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,oBAAoB,CACpD,SAAS,EACT,qBAAa,CAAC,SAAS,EACvB,WAAW,CACZ,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;YAClD,MAAM,gBAAgB,GAAG,CAAC,aAAa,CAAC,CAAC;YACzC,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YAElE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,sBAAsB,CACpD,qBAAa,CAAC,SAAS,EACvB,SAAS,EACT,qBAAa,CAAC,MAAM,CACrB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YACzC,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,oBAAoB,CACpD,qBAAa,CAAC,MAAM,EACpB,qBAAa,CAAC,SAAS,EACvB,SAAS,CACV,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oDAAoD,EAAE,KAAK,IAAI,EAAE;YAClE,MAAM,kBAAkB,GAAG,CAAC,sBAAsB,CAAC,CAAC;YACpD,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC;YAEpE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,sBAAsB,CACpD,qBAAa,CAAC,SAAS,EACvB,WAAW,EACX,qBAAa,CAAC,MAAM,CACrB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;YAC3C,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,oBAAoB,CACpD,qBAAa,CAAC,MAAM,EACpB,qBAAa,CAAC,SAAS,EACvB,WAAW,CACZ,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;YAClD,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAEpD,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,sBAAsB,CAAC,qBAAa,CAAC,SAAS,CAAC,CAAC;YAEhF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8BAA8B,EAAE,KAAK,IAAI,EAAE;YAC5C,MAAM,YAAY,GAAG,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;YAChE,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;YAE9D,MAAM,MAAM,CACV,UAAU,CAAC,sBAAsB,CAAC,qBAAa,CAAC,SAAS,CAAC,CAC3D,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,KAAK,IAAI,EAAE;YACxD,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,CAAC;YAEnE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,sBAAsB,CAAC,qBAAa,CAAC,SAAS,CAAC,CAAC;YAEhF,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACzC,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;gBACzB,MAAM,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;gBACvC,MAAM,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;gBAC1C,MAAM,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;gBAChD,MAAM,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;gBAC7C,MAAM,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;gBAChD,MAAM,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;gBAC3C,MAAM,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;gBAC/C,MAAM,CAAC,CAAC,UAAU,EAAE,aAAa,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YAC1F,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,+BAA+B,EAAE,GAAG,EAAE;QAC7C,EAAE,CAAC,mDAAmD,EAAE,KAAK,IAAI,EAAE;YACjE,qBAAqB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;YAEhE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,yBAAyB,CACvD,qBAAa,CAAC,SAAS,EACvB,qBAAqB,CACtB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;YACtC,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC,qBAAqB,CAAC,CAAC;QACjF,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,sCAAsC,EAAE,KAAK,IAAI,EAAE;YACpD,qBAAqB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAEvD,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,yBAAyB,CACvD,qBAAa,CAAC,SAAS,EACvB,uBAAuB,CACxB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YAChE,MAAM,YAAY,GAAG,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;YAC7D,qBAAqB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;YAE/D,MAAM,MAAM,CACV,UAAU,CAAC,yBAAyB,CAAC,qBAAa,CAAC,SAAS,EAAE,eAAe,CAAC,CAC/E,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,qBAAqB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;YAEhE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,yBAAyB,CACvD,qBAAa,CAAC,SAAS,EACvB,qBAAqB,CACtB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YACpC,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACvC,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;YAC7C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;YAC9C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;YACzC,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAC1C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;YAC7C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;YACxC,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;YAC5C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;YACzC,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAC1C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;YAC/C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;YAC5C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YAEtC,MAAM,CAAC,OAAO,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC7C,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1D,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9C,MAAM,CAAC,OAAO,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YAChE,qBAAqB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,sBAAsB,CAAC,CAAC;YAEzE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,yBAAyB,CACvD,qBAAa,CAAC,SAAS,EACvB,qBAAqB,CACtB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACxC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,WAAW,EAAE,CAAC;YACzC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,CAAC;YACvC,MAAM,CAAC,OAAO,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,4BAA4B,EAAE,GAAG,EAAE;QAC1C,EAAE,CAAC,gDAAgD,EAAE,KAAK,IAAI,EAAE;YAC9D,MAAM,gBAAgB,GAAG,EAAE,GAAG,aAAa,EAAE,GAAG,kBAAkB,EAAE,CAAC;YACrE,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YAEjE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,wBAAwB,CACtD,qBAAa,CAAC,SAAS,EACvB,kBAAkB,CACnB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YACzC,MAAM,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,oBAAoB,CACnD,kBAAkB,EAClB,kBAAkB,CAAC,QAAQ,EAC3B,qBAAa,CAAC,SAAS,CACxB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,YAAY,GAAG,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;YAC7D,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;YAE7D,MAAM,MAAM,CACV,UAAU,CAAC,wBAAwB,CAAC,qBAAa,CAAC,SAAS,EAAE,kBAAkB,CAAC,CACjF,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC3D,MAAM,gBAAgB,GAAG;gBACvB,GAAG,aAAa;gBAChB,GAAG,kBAAkB;gBACrB,EAAE,EAAE,mBAAmB;gBACvB,UAAU,EAAE,IAAI,IAAI,EAAE;aACvB,CAAC;YACF,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YAEjE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,wBAAwB,CACtD,qBAAa,CAAC,SAAS,EACvB,kBAAkB,CACnB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YACpC,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACvC,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;YAC7C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAC1C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;YAC7C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;YACxC,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;YAC5C,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;YACpD,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;YAC1D,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,qBAAa,CAAC,SAAS,CAAC,CAAC;YACzD,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,UAAU,GAAG,CAAC,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,aAAa,EAAE,QAAQ,CAAC,CAAC;YAE7E,KAAK,MAAM,QAAQ,IAAI,UAAU,EAAE,CAAC;gBAClC,MAAM,GAAG,GAAG,EAAE,GAAG,kBAAkB,EAAE,QAAQ,EAAE,CAAC;gBAChD,MAAM,gBAAgB,GAAG,EAAE,GAAG,aAAa,EAAE,QAAQ,EAAE,CAAC;gBACxD,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;gBAEjE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,wBAAwB,CACtD,qBAAa,CAAC,SAAS,EACvB,GAAG,CACJ,CAAC;gBAEF,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACzC,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;YACzD,MAAM,YAAY,GAAG,CAAC,UAAU,EAAE,cAAc,EAAE,UAAU,CAAC,CAAC;YAE9D,KAAK,MAAM,UAAU,IAAI,YAAY,EAAE,CAAC;gBACtC,MAAM,GAAG,GAAG,EAAE,GAAG,kBAAkB,EAAE,UAAU,EAAE,CAAC;gBAClD,MAAM,gBAAgB,GAAG,EAAE,GAAG,aAAa,EAAE,UAAU,EAAE,CAAC;gBAC1D,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;gBAEjE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,wBAAwB,CACtD,qBAAa,CAAC,SAAS,EACvB,GAAG,CACJ,CAAC;gBAEF,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAC7C,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,+BAA+B,EAAE,GAAG,EAAE;QAC7C,EAAE,CAAC,gDAAgD,EAAE,KAAK,IAAI,EAAE;YAC9D,MAAM,gBAAgB,GAAG,EAAE,GAAG,aAAa,EAAE,GAAG,kBAAkB,EAAE,CAAC;YACrE,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YAEjE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,wBAAwB,CACtD,qBAAa,CAAC,SAAS,EACvB,qBAAqB,EACrB,kBAAkB,CACnB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YACzC,MAAM,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,oBAAoB,CACnD,qBAAqB,EACrB,kBAAkB,CACnB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;YAC7C,MAAM,aAAa,GAAG,EAAE,KAAK,EAAE,yBAAyB,EAAE,CAAC;YAC3D,MAAM,gBAAgB,GAAG,EAAE,GAAG,aAAa,EAAE,KAAK,EAAE,aAAa,CAAC,KAAK,EAAE,CAAC;YAC1E,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YAEjE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,wBAAwB,CACtD,qBAAa,CAAC,SAAS,EACvB,qBAAqB,EACrB,aAAa,CACd,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC/C,MAAM,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,oBAAoB,CACnD,qBAAqB,EACrB,aAAa,CACd,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,YAAY,GAAG,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;YACtD,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;YAE7D,MAAM,MAAM,CACV,UAAU,CAAC,wBAAwB,CACjC,qBAAa,CAAC,SAAS,EACvB,uBAAuB,EACvB,kBAAkB,CACnB,CACF,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC3D,MAAM,gBAAgB,GAAG,EAAE,GAAG,aAAa,EAAE,GAAG,kBAAkB,EAAE,CAAC;YACrE,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YAEjE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,wBAAwB,CACtD,qBAAa,CAAC,SAAS,EACvB,qBAAqB,EACrB,kBAAkB,CACnB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YACpC,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACvC,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;YAC7C,MAAM,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;YAC9C,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;YACpD,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;YAChE,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC;QACpE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,iCAAiC,EAAE,KAAK,IAAI,EAAE;YAC/C,MAAM,gBAAgB,GAAG,EAAE,GAAG,aAAa,EAAE,OAAO,EAAE,kBAAkB,CAAC,OAAO,EAAE,CAAC;YACnF,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YAEjE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,wBAAwB,CACtD,qBAAa,CAAC,SAAS,EACvB,qBAAqB,EACrB,EAAE,OAAO,EAAE,kBAAkB,CAAC,OAAO,EAAE,CACxC,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;QAC7D,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,4BAA4B,EAAE,GAAG,EAAE;QAC1C,EAAE,CAAC,iDAAiD,EAAE,KAAK,IAAI,EAAE;YAC/D,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,CAAC;YAEnE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,sBAAsB,CAAC,qBAAa,CAAC,SAAS,CAAC,CAAC;YAEhF,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACzC,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;gBACzB,sCAAc,CAAC,iBAAiB,CAAC,SAAS,EAAE;oBAC1C,IAAI;oBACJ,OAAO;oBACP,UAAU;oBACV,aAAa;oBACb,QAAQ;oBACR,YAAY;iBACb,CAAC,CAAC;gBACH,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YACpD,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,mDAAmD,EAAE,KAAK,IAAI,EAAE;YACjE,qBAAqB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;YAEhE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,yBAAyB,CACvD,qBAAa,CAAC,SAAS,EACvB,qBAAqB,CACtB,CAAC;YAEF,sCAAc,CAAC,iBAAiB,CAAC,MAAM,EAAE;gBACvC,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,cAAc;gBACd,SAAS;gBACT,UAAU;gBACV,aAAa;gBACb,QAAQ;aACT,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YAC/C,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oDAAoD,EAAE,KAAK,IAAI,EAAE;YAClE,MAAM,gBAAgB,GAAG,EAAE,GAAG,aAAa,EAAE,GAAG,kBAAkB,EAAE,CAAC;YACrE,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YAEjE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,wBAAwB,CACtD,qBAAa,CAAC,SAAS,EACvB,kBAAkB,CACnB,CAAC;YAEF,sCAAc,CAAC,iBAAiB,CAAC,MAAM,EAAE;gBACvC,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,UAAU;gBACV,aAAa;gBACb,QAAQ;aACT,CAAC,CAAC;YACH,MAAM,CAAC,OAAO,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACnD,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,gBAAgB,EAAE,GAAG,EAAE;QAC9B,EAAE,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC3D,MAAM,YAAY,GAAG,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAC;YAC5E,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;YAE9D,MAAM,MAAM,CACV,UAAU,CAAC,sBAAsB,CAAC,qBAAa,CAAC,SAAS,CAAC,CAC3D,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,KAAK,IAAI,EAAE;YACxD,MAAM,OAAO,GAAG,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;YACxD,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;YAExD,MAAM,MAAM,CACV,UAAU,CAAC,wBAAwB,CAAC,qBAAa,CAAC,SAAS,EAAE,kBAAkB,CAAC,CACjF,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qCAAqC,EAAE,KAAK,IAAI,EAAE;YACnD,MAAM,cAAc,GAAG,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;YAChE,qBAAqB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;YAEjE,MAAM,MAAM,CACV,UAAU,CAAC,yBAAyB,CAAC,qBAAa,CAAC,SAAS,EAAE,YAAY,CAAC,CAC5E,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;QACjC,EAAE,CAAC,sDAAsD,EAAE,KAAK,IAAI,EAAE;YACpE,mBAAmB;YACnB,MAAM,gBAAgB,GAAG,EAAE,GAAG,aAAa,EAAE,GAAG,kBAAkB,EAAE,CAAC;YACrE,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YACjE,MAAM,YAAY,GAAG,MAAM,UAAU,CAAC,wBAAwB,CAC5D,qBAAa,CAAC,SAAS,EACvB,kBAAkB,CACnB,CAAC;YACF,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC;YAEtC,sBAAsB;YACtB,qBAAqB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YACnE,MAAM,SAAS,GAAG,MAAM,UAAU,CAAC,yBAAyB,CAC1D,qBAAa,CAAC,SAAS,EACvB,YAAY,CAAC,EAAE,CAChB,CAAC;YACF,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;YAE3C,mBAAmB;YACnB,MAAM,gBAAgB,GAAG,EAAE,GAAG,gBAAgB,EAAE,GAAG,kBAAkB,EAAE,CAAC;YACxE,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YACjE,MAAM,YAAY,GAAG,MAAM,UAAU,CAAC,wBAAwB,CAC5D,qBAAa,CAAC,SAAS,EACvB,YAAY,CAAC,EAAE,EACf,kBAAkB,CACnB,CAAC;YACF,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;YAE1D,kBAAkB;YAClB,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;YACpE,MAAM,UAAU,GAAG,MAAM,UAAU,CAAC,sBAAsB,CAAC,qBAAa,CAAC,SAAS,CAAC,CAAC;YACpF,MAAM,CAAC,UAAU,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YACnC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,yDAAyD,EAAE,KAAK,IAAI,EAAE;YACvE,qBAAqB;YACrB,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,CAAC;YACnE,MAAM,aAAa,GAAG,MAAM,UAAU,CAAC,sBAAsB,CAAC,qBAAa,CAAC,SAAS,CAAC,CAAC;YACvF,MAAM,CAAC,aAAa,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAEtC,mBAAmB;YACnB,MAAM,mBAAmB,GAAG,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,KAAK,WAAW,CAAC,CAAC;YACpF,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,CAAC;YACrE,MAAM,cAAc,GAAG,MAAM,UAAU,CAAC,sBAAsB,CAC5D,qBAAa,CAAC,SAAS,EACvB,WAAW,CACZ,CAAC;YACF,MAAM,CAAC,cAAc,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YACvC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAEnD,mBAAmB;YACnB,MAAM,gBAAgB,GAAG,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,qBAAa,CAAC,MAAM,CAAC,CAAC;YAC5F,qBAAqB,CAAC,OAAO,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YAClE,MAAM,cAAc,GAAG,MAAM,UAAU,CAAC,sBAAsB,CAC5D,qBAAa,CAAC,SAAS,EACvB,SAAS,EACT,qBAAa,CAAC,MAAM,CACrB,CAAC;YACF,MAAM,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,qBAAa,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpF,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC3D,qBAAqB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;YAEhE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,yBAAyB,CACvD,qBAAa,CAAC,SAAS,EACvB,qBAAqB,CACtB,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAClD,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1D,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBACxC,MAAM,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;gBACvC,MAAM,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;gBACxC,MAAM,CAAC,CAAC,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC7E,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC3D,yCAAyC;YACzC,MAAM,aAAa,GAAG;gBACpB,GAAG,kBAAkB;gBACrB,QAAQ,EAAE,qBAAa,CAAC,MAAM;gBAC9B,YAAY,EAAE,sCAAsC;gBACpD,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE,kBAAkB;aAC5E,CAAC;YAEF,MAAM,iBAAiB,GAAG;gBACxB,GAAG,aAAa;gBAChB,GAAG,aAAa;gBAChB,MAAM,EAAE,UAAU;gBAClB,UAAU,EAAE,IAAI,IAAI,EAAE;aACvB,CAAC;YAEF,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,CAAC;YAClE,MAAM,MAAM,GAAG,MAAM,UAAU,CAAC,wBAAwB,CACtD,qBAAa,CAAC,SAAS,EACvB,aAAa,CACd,CAAC;YAEF,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACvC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,qBAAa,CAAC,MAAM,CAAC,CAAC;YACnD,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,qBAAa,CAAC,SAAS,CAAC,CAAC;YACzD,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YAC/C,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/therapist/controllers/therapist-worksheet.controller.spec.ts"],"sourcesContent":["/**\n * Comprehensive Test Suite for TherapistWorksheetController\n * Tests therapist worksheet management functionality\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { HttpException, HttpStatus } from '@nestjs/common';\nimport { TherapistWorksheetController } from './therapist-worksheet.controller';\nimport { WorksheetsService } from '../../worksheets/worksheets.service';\nimport { JwtAuthGuard } from '../../auth/guards/jwt-auth.guard';\nimport { SecurityGuardTestUtils, RoleBasedTestUtils } from '../../test-utils/auth-testing-helpers';\nimport { MockBuilder, TestDataGenerator, TestAssertions } from '../../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../../test-utils/index';\n\ndescribe('TherapistWorksheetController', () => {\n  let controller: TherapistWorksheetController;\n  let worksheetsService: WorksheetsService;\n  let module: TestingModule;\n\n  // Mock WorksheetsService\n  const mockWorksheetsService = {\n    findAll: jest.fn(),\n    findById: jest.fn(),\n    create: jest.fn(),\n    update: jest.fn(),\n  };\n\n  // Mock Guards\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test data\n  const mockWorksheet = {\n    id: 'worksheet_123456789',\n    title: 'Anxiety Management Worksheet',\n    description: 'A worksheet to help manage anxiety symptoms',\n    instructions: 'Complete the following exercises daily',\n    content: {\n      sections: [\n        {\n          type: 'text',\n          title: 'Daily Mood Check',\n          description: 'Rate your mood from 1-10',\n        },\n        {\n          type: 'questions',\n          title: 'Reflection Questions',\n          questions: [\n            'What triggered your anxiety today?',\n            'What coping strategies did you use?',\n          ],\n        },\n      ],\n    },\n    clientId: TEST_USER_IDS.CLIENT,\n    therapistId: TEST_USER_IDS.THERAPIST,\n    status: 'assigned',\n    assignedAt: new Date('2024-02-14T10:00:00Z'),\n    dueDate: new Date('2024-02-21T23:59:59Z'),\n    completedAt: null,\n    category: 'anxiety',\n    estimatedTime: 30,\n    difficulty: 'intermediate',\n    tags: ['anxiety', 'mood-tracking', 'coping-skills'],\n  };\n\n  const mockCompletedWorksheet = {\n    ...mockWorksheet,\n    status: 'completed',\n    completedAt: new Date('2024-02-18T14:30:00Z'),\n    responses: {\n      moodRating: 7,\n      reflectionAnswers: [\n        'Work presentation caused anxiety',\n        'Used deep breathing and positive self-talk',\n      ],\n    },\n  };\n\n  const mockWorksheetList = [\n    mockWorksheet,\n    mockCompletedWorksheet,\n    {\n      ...mockWorksheet,\n      id: 'worksheet_987654321',\n      title: 'Depression Assessment',\n      status: 'in_progress',\n      category: 'depression',\n    },\n  ];\n\n  const createWorksheetDto = {\n    title: 'New CBT Worksheet',\n    description: 'Cognitive Behavioral Therapy exercises',\n    instructions: 'Complete all sections within one week',\n    content: {\n      sections: [\n        {\n          type: 'text',\n          title: 'Thought Record',\n          description: 'Record your negative thoughts',\n        },\n      ],\n    },\n    clientId: TEST_USER_IDS.CLIENT,\n    category: 'cbt',\n    dueDate: new Date('2024-02-28T23:59:59Z'),\n    estimatedTime: 45,\n    difficulty: 'advanced',\n    tags: ['cbt', 'thought-record'],\n  };\n\n  const updateWorksheetDto = {\n    title: 'Updated Anxiety Worksheet',\n    description: 'Updated description with new exercises',\n    instructions: 'Updated instructions for better clarity',\n    dueDate: new Date('2024-02-25T23:59:59Z'),\n    estimatedTime: 40,\n  };\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [TherapistWorksheetController],\n      providers: [\n        {\n          provide: WorksheetsService,\n          useValue: mockWorksheetsService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .compile();\n\n    controller = module.get<TherapistWorksheetController>(TherapistWorksheetController);\n    worksheetsService = module.get<WorksheetsService>(WorksheetsService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have worksheetsService injected', () => {\n      expect(worksheetsService).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', TherapistWorksheetController);\n      expect(guards).toContain(JwtAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', TherapistWorksheetController);\n      expect(controllerMetadata).toBe('therapist/worksheets');\n    });\n  });\n\n  describe('GET /therapist/worksheets', () => {\n    it('should get therapist worksheets successfully', async () => {\n      mockWorksheetsService.findAll.mockResolvedValue(mockWorksheetList);\n\n      const result = await controller.getTherapistWorksheets(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual(mockWorksheetList);\n      expect(worksheetsService.findAll).toHaveBeenCalledWith(\n        undefined, // clientId\n        TEST_USER_IDS.THERAPIST,\n        undefined // status\n      );\n    });\n\n    it('should filter worksheets by status', async () => {\n      const completedWorksheets = [mockCompletedWorksheet];\n      mockWorksheetsService.findAll.mockResolvedValue(completedWorksheets);\n\n      const result = await controller.getTherapistWorksheets(\n        TEST_USER_IDS.THERAPIST,\n        'completed'\n      );\n\n      expect(result).toEqual(completedWorksheets);\n      expect(worksheetsService.findAll).toHaveBeenCalledWith(\n        undefined,\n        TEST_USER_IDS.THERAPIST,\n        'completed'\n      );\n    });\n\n    it('should filter worksheets by client', async () => {\n      const clientWorksheets = [mockWorksheet];\n      mockWorksheetsService.findAll.mockResolvedValue(clientWorksheets);\n\n      const result = await controller.getTherapistWorksheets(\n        TEST_USER_IDS.THERAPIST,\n        undefined,\n        TEST_USER_IDS.CLIENT\n      );\n\n      expect(result).toEqual(clientWorksheets);\n      expect(worksheetsService.findAll).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        TEST_USER_IDS.THERAPIST,\n        undefined\n      );\n    });\n\n    it('should filter worksheets by both status and client', async () => {\n      const filteredWorksheets = [mockCompletedWorksheet];\n      mockWorksheetsService.findAll.mockResolvedValue(filteredWorksheets);\n\n      const result = await controller.getTherapistWorksheets(\n        TEST_USER_IDS.THERAPIST,\n        'completed',\n        TEST_USER_IDS.CLIENT\n      );\n\n      expect(result).toEqual(filteredWorksheets);\n      expect(worksheetsService.findAll).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        TEST_USER_IDS.THERAPIST,\n        'completed'\n      );\n    });\n\n    it('should handle empty worksheet list', async () => {\n      mockWorksheetsService.findAll.mockResolvedValue([]);\n\n      const result = await controller.getTherapistWorksheets(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Failed to retrieve worksheets');\n      mockWorksheetsService.findAll.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getTherapistWorksheets(TEST_USER_IDS.THERAPIST)\n      ).rejects.toThrow(serviceError);\n    });\n\n    it('should validate worksheet list structure', async () => {\n      mockWorksheetsService.findAll.mockResolvedValue(mockWorksheetList);\n\n      const result = await controller.getTherapistWorksheets(TEST_USER_IDS.THERAPIST);\n\n      expect(Array.isArray(result)).toBe(true);\n      result.forEach(worksheet => {\n        expect(worksheet).toHaveProperty('id');\n        expect(worksheet).toHaveProperty('title');\n        expect(worksheet).toHaveProperty('description');\n        expect(worksheet).toHaveProperty('clientId');\n        expect(worksheet).toHaveProperty('therapistId');\n        expect(worksheet).toHaveProperty('status');\n        expect(worksheet).toHaveProperty('assignedAt');\n        expect(['assigned', 'in_progress', 'completed', 'overdue']).toContain(worksheet.status);\n      });\n    });\n  });\n\n  describe('GET /therapist/worksheets/:id', () => {\n    it('should get therapist worksheet by id successfully', async () => {\n      mockWorksheetsService.findById.mockResolvedValue(mockWorksheet);\n\n      const result = await controller.getTherapistWorksheetById(\n        TEST_USER_IDS.THERAPIST,\n        'worksheet_123456789'\n      );\n\n      expect(result).toEqual(mockWorksheet);\n      expect(worksheetsService.findById).toHaveBeenCalledWith('worksheet_123456789');\n    });\n\n    it('should handle non-existent worksheet', async () => {\n      mockWorksheetsService.findById.mockResolvedValue(null);\n\n      const result = await controller.getTherapistWorksheetById(\n        TEST_USER_IDS.THERAPIST,\n        'nonexistent_worksheet'\n      );\n\n      expect(result).toBeNull();\n    });\n\n    it('should handle service errors for worksheet by id', async () => {\n      const serviceError = new Error('Database connection failed');\n      mockWorksheetsService.findById.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getTherapistWorksheetById(TEST_USER_IDS.THERAPIST, 'worksheet_123')\n      ).rejects.toThrow(serviceError);\n    });\n\n    it('should validate worksheet detail structure', async () => {\n      mockWorksheetsService.findById.mockResolvedValue(mockWorksheet);\n\n      const result = await controller.getTherapistWorksheetById(\n        TEST_USER_IDS.THERAPIST,\n        'worksheet_123456789'\n      );\n\n      expect(result).toHaveProperty('id');\n      expect(result).toHaveProperty('title');\n      expect(result).toHaveProperty('description');\n      expect(result).toHaveProperty('instructions');\n      expect(result).toHaveProperty('content');\n      expect(result).toHaveProperty('clientId');\n      expect(result).toHaveProperty('therapistId');\n      expect(result).toHaveProperty('status');\n      expect(result).toHaveProperty('assignedAt');\n      expect(result).toHaveProperty('dueDate');\n      expect(result).toHaveProperty('category');\n      expect(result).toHaveProperty('estimatedTime');\n      expect(result).toHaveProperty('difficulty');\n      expect(result).toHaveProperty('tags');\n\n      expect(typeof result.content).toBe('object');\n      expect(Array.isArray(result.content.sections)).toBe(true);\n      expect(Array.isArray(result.tags)).toBe(true);\n      expect(typeof result.estimatedTime).toBe('number');\n    });\n\n    it('should handle completed worksheet with responses', async () => {\n      mockWorksheetsService.findById.mockResolvedValue(mockCompletedWorksheet);\n\n      const result = await controller.getTherapistWorksheetById(\n        TEST_USER_IDS.THERAPIST,\n        'worksheet_completed'\n      );\n\n      expect(result.status).toBe('completed');\n      expect(result.completedAt).toBeDefined();\n      expect(result.responses).toBeDefined();\n      expect(typeof result.responses).toBe('object');\n    });\n  });\n\n  describe('POST /therapist/worksheets', () => {\n    it('should create therapist worksheet successfully', async () => {\n      const createdWorksheet = { ...mockWorksheet, ...createWorksheetDto };\n      mockWorksheetsService.create.mockResolvedValue(createdWorksheet);\n\n      const result = await controller.createTherapistWorksheet(\n        TEST_USER_IDS.THERAPIST,\n        createWorksheetDto\n      );\n\n      expect(result).toEqual(createdWorksheet);\n      expect(worksheetsService.create).toHaveBeenCalledWith(\n        createWorksheetDto,\n        createWorksheetDto.clientId,\n        TEST_USER_IDS.THERAPIST\n      );\n    });\n\n    it('should handle service errors during creation', async () => {\n      const serviceError = new Error('Failed to create worksheet');\n      mockWorksheetsService.create.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.createTherapistWorksheet(TEST_USER_IDS.THERAPIST, createWorksheetDto)\n      ).rejects.toThrow(serviceError);\n    });\n\n    it('should validate created worksheet structure', async () => {\n      const createdWorksheet = {\n        ...mockWorksheet,\n        ...createWorksheetDto,\n        id: 'new_worksheet_123',\n        assignedAt: new Date(),\n      };\n      mockWorksheetsService.create.mockResolvedValue(createdWorksheet);\n\n      const result = await controller.createTherapistWorksheet(\n        TEST_USER_IDS.THERAPIST,\n        createWorksheetDto\n      );\n\n      expect(result).toHaveProperty('id');\n      expect(result).toHaveProperty('title');\n      expect(result).toHaveProperty('description');\n      expect(result).toHaveProperty('clientId');\n      expect(result).toHaveProperty('therapistId');\n      expect(result).toHaveProperty('status');\n      expect(result).toHaveProperty('assignedAt');\n      expect(result.title).toBe(createWorksheetDto.title);\n      expect(result.clientId).toBe(createWorksheetDto.clientId);\n      expect(result.therapistId).toBe(TEST_USER_IDS.THERAPIST);\n      expect(result.status).toBe('assigned');\n    });\n\n    it('should handle different worksheet categories', async () => {\n      const categories = ['anxiety', 'depression', 'cbt', 'mindfulness', 'trauma'];\n\n      for (const category of categories) {\n        const dto = { ...createWorksheetDto, category };\n        const createdWorksheet = { ...mockWorksheet, category };\n        mockWorksheetsService.create.mockResolvedValue(createdWorksheet);\n\n        const result = await controller.createTherapistWorksheet(\n          TEST_USER_IDS.THERAPIST,\n          dto\n        );\n\n        expect(result.category).toBe(category);\n      }\n    });\n\n    it('should handle different difficulty levels', async () => {\n      const difficulties = ['beginner', 'intermediate', 'advanced'];\n\n      for (const difficulty of difficulties) {\n        const dto = { ...createWorksheetDto, difficulty };\n        const createdWorksheet = { ...mockWorksheet, difficulty };\n        mockWorksheetsService.create.mockResolvedValue(createdWorksheet);\n\n        const result = await controller.createTherapistWorksheet(\n          TEST_USER_IDS.THERAPIST,\n          dto\n        );\n\n        expect(result.difficulty).toBe(difficulty);\n      }\n    });\n  });\n\n  describe('PUT /therapist/worksheets/:id', () => {\n    it('should update therapist worksheet successfully', async () => {\n      const updatedWorksheet = { ...mockWorksheet, ...updateWorksheetDto };\n      mockWorksheetsService.update.mockResolvedValue(updatedWorksheet);\n\n      const result = await controller.updateTherapistWorksheet(\n        TEST_USER_IDS.THERAPIST,\n        'worksheet_123456789',\n        updateWorksheetDto\n      );\n\n      expect(result).toEqual(updatedWorksheet);\n      expect(worksheetsService.update).toHaveBeenCalledWith(\n        'worksheet_123456789',\n        updateWorksheetDto\n      );\n    });\n\n    it('should handle partial updates', async () => {\n      const partialUpdate = { title: 'Partially Updated Title' };\n      const updatedWorksheet = { ...mockWorksheet, title: partialUpdate.title };\n      mockWorksheetsService.update.mockResolvedValue(updatedWorksheet);\n\n      const result = await controller.updateTherapistWorksheet(\n        TEST_USER_IDS.THERAPIST,\n        'worksheet_123456789',\n        partialUpdate\n      );\n\n      expect(result.title).toBe(partialUpdate.title);\n      expect(worksheetsService.update).toHaveBeenCalledWith(\n        'worksheet_123456789',\n        partialUpdate\n      );\n    });\n\n    it('should handle service errors during update', async () => {\n      const serviceError = new Error('Worksheet not found');\n      mockWorksheetsService.update.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.updateTherapistWorksheet(\n          TEST_USER_IDS.THERAPIST,\n          'nonexistent_worksheet',\n          updateWorksheetDto\n        )\n      ).rejects.toThrow(serviceError);\n    });\n\n    it('should validate updated worksheet structure', async () => {\n      const updatedWorksheet = { ...mockWorksheet, ...updateWorksheetDto };\n      mockWorksheetsService.update.mockResolvedValue(updatedWorksheet);\n\n      const result = await controller.updateTherapistWorksheet(\n        TEST_USER_IDS.THERAPIST,\n        'worksheet_123456789',\n        updateWorksheetDto\n      );\n\n      expect(result).toHaveProperty('id');\n      expect(result).toHaveProperty('title');\n      expect(result).toHaveProperty('description');\n      expect(result).toHaveProperty('instructions');\n      expect(result.title).toBe(updateWorksheetDto.title);\n      expect(result.description).toBe(updateWorksheetDto.description);\n      expect(result.instructions).toBe(updateWorksheetDto.instructions);\n    });\n\n    it('should handle updating due date', async () => {\n      const updatedWorksheet = { ...mockWorksheet, dueDate: updateWorksheetDto.dueDate };\n      mockWorksheetsService.update.mockResolvedValue(updatedWorksheet);\n\n      const result = await controller.updateTherapistWorksheet(\n        TEST_USER_IDS.THERAPIST,\n        'worksheet_123456789',\n        { dueDate: updateWorksheetDto.dueDate }\n      );\n\n      expect(result.dueDate).toEqual(updateWorksheetDto.dueDate);\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted worksheet list', async () => {\n      mockWorksheetsService.findAll.mockResolvedValue(mockWorksheetList);\n\n      const result = await controller.getTherapistWorksheets(TEST_USER_IDS.THERAPIST);\n\n      expect(Array.isArray(result)).toBe(true);\n      result.forEach(worksheet => {\n        TestAssertions.expectValidEntity(worksheet, [\n          'id',\n          'title',\n          'clientId',\n          'therapistId',\n          'status',\n          'assignedAt',\n        ]);\n        expect(worksheet.assignedAt).toBeInstanceOf(Date);\n      });\n    });\n\n    it('should return properly formatted worksheet detail', async () => {\n      mockWorksheetsService.findById.mockResolvedValue(mockWorksheet);\n\n      const result = await controller.getTherapistWorksheetById(\n        TEST_USER_IDS.THERAPIST,\n        'worksheet_123456789'\n      );\n\n      TestAssertions.expectValidEntity(result, [\n        'id',\n        'title',\n        'description',\n        'instructions',\n        'content',\n        'clientId',\n        'therapistId',\n        'status',\n      ]);\n      expect(result.assignedAt).toBeInstanceOf(Date);\n      expect(result.dueDate).toBeInstanceOf(Date);\n    });\n\n    it('should return properly formatted created worksheet', async () => {\n      const createdWorksheet = { ...mockWorksheet, ...createWorksheetDto };\n      mockWorksheetsService.create.mockResolvedValue(createdWorksheet);\n\n      const result = await controller.createTherapistWorksheet(\n        TEST_USER_IDS.THERAPIST,\n        createWorksheetDto\n      );\n\n      TestAssertions.expectValidEntity(result, [\n        'id',\n        'title',\n        'description',\n        'clientId',\n        'therapistId',\n        'status',\n      ]);\n      expect(typeof result.estimatedTime).toBe('number');\n      expect(Array.isArray(result.tags)).toBe(true);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle worksheet service unavailable', async () => {\n      const serviceError = new Error('Worksheet service temporarily unavailable');\n      mockWorksheetsService.findAll.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getTherapistWorksheets(TEST_USER_IDS.THERAPIST)\n      ).rejects.toThrow(serviceError);\n    });\n\n    it('should handle database connection errors', async () => {\n      const dbError = new Error('Database connection failed');\n      mockWorksheetsService.create.mockRejectedValue(dbError);\n\n      await expect(\n        controller.createTherapistWorksheet(TEST_USER_IDS.THERAPIST, createWorksheetDto)\n      ).rejects.toThrow(dbError);\n    });\n\n    it('should handle invalid worksheet IDs', async () => {\n      const invalidIdError = new Error('Invalid worksheet ID format');\n      mockWorksheetsService.findById.mockRejectedValue(invalidIdError);\n\n      await expect(\n        controller.getTherapistWorksheetById(TEST_USER_IDS.THERAPIST, 'invalid-id')\n      ).rejects.toThrow(invalidIdError);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete worksheet management workflow', async () => {\n      // Create worksheet\n      const createdWorksheet = { ...mockWorksheet, ...createWorksheetDto };\n      mockWorksheetsService.create.mockResolvedValue(createdWorksheet);\n      const createResult = await controller.createTherapistWorksheet(\n        TEST_USER_IDS.THERAPIST,\n        createWorksheetDto\n      );\n      expect(createResult.id).toBeDefined();\n\n      // Get worksheet by ID\n      mockWorksheetsService.findById.mockResolvedValue(createdWorksheet);\n      const getResult = await controller.getTherapistWorksheetById(\n        TEST_USER_IDS.THERAPIST,\n        createResult.id\n      );\n      expect(getResult.id).toBe(createResult.id);\n\n      // Update worksheet\n      const updatedWorksheet = { ...createdWorksheet, ...updateWorksheetDto };\n      mockWorksheetsService.update.mockResolvedValue(updatedWorksheet);\n      const updateResult = await controller.updateTherapistWorksheet(\n        TEST_USER_IDS.THERAPIST,\n        createResult.id,\n        updateWorksheetDto\n      );\n      expect(updateResult.title).toBe(updateWorksheetDto.title);\n\n      // List worksheets\n      mockWorksheetsService.findAll.mockResolvedValue([updatedWorksheet]);\n      const listResult = await controller.getTherapistWorksheets(TEST_USER_IDS.THERAPIST);\n      expect(listResult).toHaveLength(1);\n      expect(listResult[0].id).toBe(createResult.id);\n    });\n\n    it('should handle worksheet filtering and status management', async () => {\n      // Get all worksheets\n      mockWorksheetsService.findAll.mockResolvedValue(mockWorksheetList);\n      const allWorksheets = await controller.getTherapistWorksheets(TEST_USER_IDS.THERAPIST);\n      expect(allWorksheets).toHaveLength(3);\n\n      // Filter by status\n      const completedWorksheets = mockWorksheetList.filter(w => w.status === 'completed');\n      mockWorksheetsService.findAll.mockResolvedValue(completedWorksheets);\n      const statusFiltered = await controller.getTherapistWorksheets(\n        TEST_USER_IDS.THERAPIST,\n        'completed'\n      );\n      expect(statusFiltered).toHaveLength(1);\n      expect(statusFiltered[0].status).toBe('completed');\n\n      // Filter by client\n      const clientWorksheets = mockWorksheetList.filter(w => w.clientId === TEST_USER_IDS.CLIENT);\n      mockWorksheetsService.findAll.mockResolvedValue(clientWorksheets);\n      const clientFiltered = await controller.getTherapistWorksheets(\n        TEST_USER_IDS.THERAPIST,\n        undefined,\n        TEST_USER_IDS.CLIENT\n      );\n      expect(clientFiltered.every(w => w.clientId === TEST_USER_IDS.CLIENT)).toBe(true);\n    });\n\n    it('should validate worksheet content structure', async () => {\n      mockWorksheetsService.findById.mockResolvedValue(mockWorksheet);\n\n      const result = await controller.getTherapistWorksheetById(\n        TEST_USER_IDS.THERAPIST,\n        'worksheet_123456789'\n      );\n\n      expect(result.content).toHaveProperty('sections');\n      expect(Array.isArray(result.content.sections)).toBe(true);\n      result.content.sections.forEach(section => {\n        expect(section).toHaveProperty('type');\n        expect(section).toHaveProperty('title');\n        expect(['text', 'questions', 'scale', 'checkbox']).toContain(section.type);\n      });\n    });\n\n    it('should handle worksheet assignment workflow', async () => {\n      // Therapist creates worksheet for client\n      const assignmentDto = {\n        ...createWorksheetDto,\n        clientId: TEST_USER_IDS.CLIENT,\n        instructions: 'Please complete this within one week',\n        dueDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 1 week from now\n      };\n\n      const assignedWorksheet = {\n        ...mockWorksheet,\n        ...assignmentDto,\n        status: 'assigned',\n        assignedAt: new Date(),\n      };\n\n      mockWorksheetsService.create.mockResolvedValue(assignedWorksheet);\n      const result = await controller.createTherapistWorksheet(\n        TEST_USER_IDS.THERAPIST,\n        assignmentDto\n      );\n\n      expect(result.status).toBe('assigned');\n      expect(result.clientId).toBe(TEST_USER_IDS.CLIENT);\n      expect(result.therapistId).toBe(TEST_USER_IDS.THERAPIST);\n      expect(result.assignedAt).toBeInstanceOf(Date);\n      expect(result.dueDate).toBeInstanceOf(Date);\n    });\n  });\n});"],"version":3}