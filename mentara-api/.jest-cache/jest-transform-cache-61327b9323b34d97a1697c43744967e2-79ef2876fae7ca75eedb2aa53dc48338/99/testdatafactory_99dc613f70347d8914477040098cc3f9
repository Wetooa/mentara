dc10da63b4dd2811fde32cf977ed452d
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TestDataFactory = void 0;
const faker_1 = require("@faker-js/faker");
const uuid_1 = require("uuid");
class TestDataFactory {
    prisma;
    constructor(prisma) {
        this.prisma = prisma;
    }
    // User Factory
    createUserData(overrides = {}) {
        return {
            id: (0, uuid_1.v4)(),
            email: faker_1.faker.internet.email(),
            firstName: faker_1.faker.person.firstName(),
            middleName: faker_1.faker.person.middleName(),
            lastName: faker_1.faker.person.lastName(),
            birthDate: faker_1.faker.date.birthdate({ min: 18, max: 80, mode: 'age' }),
            address: faker_1.faker.location.streetAddress(),
            avatarUrl: faker_1.faker.image.avatar(),
            role: 'client',
            bio: faker_1.faker.lorem.paragraph(),
            coverImageUrl: faker_1.faker.image.url(),
            isActive: true,
            ...overrides,
        };
    }
    async createUser(overrides = {}) {
        const userData = this.createUserData(overrides);
        return await this.prisma.user.create({ data: userData });
    }
    // Client Factory
    async createClient(userOverrides = {}) {
        const user = await this.createUser({ role: 'client', ...userOverrides });
        return await this.prisma.client.create({
            data: {
                userId: user.id,
                hasSeenTherapistRecommendations: false,
            },
            include: { user: true },
        });
    }
    // Therapist Factory
    createTherapistData(userOverrides = {}) {
        return {
            mobile: faker_1.faker.phone.number(),
            province: faker_1.faker.location.state(),
            providerType: faker_1.faker.helpers.arrayElement([
                'Individual',
                'Group Practice',
                'Hospital',
            ]),
            professionalLicenseType: faker_1.faker.helpers.arrayElement([
                'LCSW',
                'LPC',
                'LMFT',
                'Psychologist',
            ]),
            isPRCLicensed: faker_1.faker.datatype.boolean() ? 'Yes' : 'No',
            prcLicenseNumber: `PRC-${faker_1.faker.string.numeric(8)}`,
            expirationDateOfLicense: faker_1.faker.date.future({ years: 3 }),
            practiceStartDate: faker_1.faker.date.past({ years: 10 }),
            areasOfExpertise: faker_1.faker.helpers.arrayElements([
                'Anxiety',
                'Depression',
                'PTSD',
                'Couples Therapy',
                'Family Therapy',
                'Addiction',
                'Eating Disorders',
                'Bipolar Disorder',
            ], { min: 2, max: 5 }),
            assessmentTools: faker_1.faker.helpers.arrayElements(['PHQ-9', 'GAD-7', 'AUDIT', 'BDI-II', 'MMPI-2'], { min: 1, max: 3 }),
            therapeuticApproachesUsedList: faker_1.faker.helpers.arrayElements(['CBT', 'DBT', 'Psychodynamic', 'Humanistic', 'EMDR'], { min: 1, max: 3 }),
            languagesOffered: faker_1.faker.helpers.arrayElements(['English', 'Spanish', 'Mandarin', 'Tagalog', 'French'], { min: 1, max: 2 }),
            providedOnlineTherapyBefore: faker_1.faker.datatype.boolean(),
            comfortableUsingVideoConferencing: faker_1.faker.datatype.boolean(),
            preferredSessionLength: faker_1.faker.helpers.arrayElements([30, 45, 60, 90], {
                min: 1,
                max: 2,
            }),
            privateConfidentialSpace: faker_1.faker.datatype.boolean() ? 'Yes' : 'No',
            compliesWithDataPrivacyAct: true,
            professionalLiabilityInsurance: faker_1.faker.datatype.boolean() ? 'Yes' : 'No',
            complaintsOrDisciplinaryActions: faker_1.faker.datatype.boolean()
                ? faker_1.faker.lorem.sentence()
                : 'None',
            willingToAbideByPlatformGuidelines: true,
            expertise: faker_1.faker.helpers.arrayElements([
                'Anxiety Disorders',
                'Mood Disorders',
                'Trauma Recovery',
                'Relationship Issues',
            ], { min: 1, max: 3 }),
            approaches: faker_1.faker.helpers.arrayElements([
                'Cognitive Behavioral Therapy',
                'Mindfulness-Based Therapy',
                'Solution-Focused Therapy',
            ], { min: 1, max: 2 }),
            languages: faker_1.faker.helpers.arrayElements(['English', 'Spanish', 'Tagalog'], { min: 1, max: 2 }),
            illnessSpecializations: faker_1.faker.helpers.arrayElements(['Depression', 'Anxiety', 'PTSD', 'Bipolar Disorder'], { min: 1, max: 3 }),
            acceptTypes: faker_1.faker.helpers.arrayElements(['Individual', 'Couples', 'Family', 'Group'], { min: 1, max: 2 }),
            treatmentSuccessRates: {
                anxiety: faker_1.faker.number.float({ min: 0.6, max: 0.95, fractionDigits: 2 }),
                depression: faker_1.faker.number.float({
                    min: 0.6,
                    max: 0.95,
                    fractionDigits: 2,
                }),
            },
            sessionLength: faker_1.faker.helpers.arrayElement([
                '30 minutes',
                '45 minutes',
                '60 minutes',
            ]),
            hourlyRate: faker_1.faker.number.float({ min: 80, max: 200, fractionDigits: 2 }),
            status: 'approved',
            ...userOverrides,
        };
    }
    async createTherapist(userOverrides = {}) {
        const user = await this.createUser({ role: 'therapist', ...userOverrides });
        const therapistData = this.createTherapistData();
        return await this.prisma.therapist.create({
            data: {
                userId: user.id,
                ...therapistData,
            },
            include: { user: true },
        });
    }
    // Community Factory
    async createCommunity(overrides = {}) {
        const communityData = {
            name: faker_1.faker.company.name() + ' Support Group',
            description: faker_1.faker.lorem.paragraph(),
            slug: faker_1.faker.lorem.slug(),
            imageUrl: faker_1.faker.image.url(),
            ...overrides,
        };
        return await this.prisma.community.create({ data: communityData });
    }
    // Meeting Factory
    async createMeeting(clientId, therapistId, overrides = {}) {
        const meetingData = {
            clientId,
            therapistId,
            startTime: faker_1.faker.date.future(),
            duration: faker_1.faker.helpers.arrayElement([30, 45, 60]),
            status: 'SCHEDULED',
            description: faker_1.faker.lorem.paragraph(),
            ...overrides,
        };
        return await this.prisma.meeting.create({ data: meetingData });
    }
    // Pre-assessment Factory
    async createPreAssessment(userId, overrides = {}) {
        const assessmentData = {
            clientId: userId,
            questionnaires: this.generateQuestionnaires(),
            answers: this.generateAssessmentResponses(),
            answerMatrix: this.generateAnswerMatrix(),
            scores: this.generateAssessmentScores(),
            severityLevels: this.generateSeverityLevels(),
            aiEstimate: this.generateAiEstimate(),
            ...overrides,
        };
        return await this.prisma.preAssessment.create({ data: assessmentData });
    }
    // Post Factory
    async createPost(authorId, communityId, overrides = {}) {
        const postData = {
            title: faker_1.faker.lorem.sentence(),
            content: faker_1.faker.lorem.paragraphs(3),
            userId: authorId,
            roomId: communityId,
            ...overrides,
        };
        return await this.prisma.post.create({ data: postData });
    }
    // Comment Factory
    async createComment(postId, userId, overrides = {}) {
        const commentData = {
            content: faker_1.faker.lorem.paragraph(),
            postId,
            userId,
            ...overrides,
        };
        return await this.prisma.comment.create({ data: commentData });
    }
    // Helper methods for complex data structures
    generateAssessmentResponses() {
        const responses = {};
        // Generate responses for different assessment tools
        for (let i = 1; i <= 201; i++) {
            responses[`q${i}`] = faker_1.faker.number.int({ min: 0, max: 4 });
        }
        return responses;
    }
    generateAssessmentScores() {
        return {
            PHQ: faker_1.faker.number.int({ min: 0, max: 27 }),
            GAD7: faker_1.faker.number.int({ min: 0, max: 21 }),
            AUDIT: faker_1.faker.number.int({ min: 0, max: 40 }),
            // Add more assessment scores as needed
        };
    }
    generateSeverityLevels() {
        return {
            depression: faker_1.faker.helpers.arrayElement([
                'minimal',
                'mild',
                'moderate',
                'severe',
            ]),
            anxiety: faker_1.faker.helpers.arrayElement([
                'minimal',
                'mild',
                'moderate',
                'severe',
            ]),
            substance_use: faker_1.faker.helpers.arrayElement([
                'low_risk',
                'hazardous',
                'harmful',
                'dependent',
            ]),
        };
    }
    generateQuestionnaires() {
        return [
            { id: 'PHQ-9', name: 'Patient Health Questionnaire-9', questions: 9 },
            { id: 'GAD-7', name: 'General Anxiety Disorder-7', questions: 7 },
            {
                id: 'AUDIT',
                name: 'Alcohol Use Disorders Identification Test',
                questions: 10,
            },
            { id: 'ASRS', name: 'Adult ADHD Self-Report Scale', questions: 18 },
            { id: 'BES', name: 'Binge Eating Scale', questions: 16 },
            { id: 'DAST-10', name: 'Drug Abuse Screening Test', questions: 10 },
            { id: 'ISI', name: 'Insomnia Severity Index', questions: 7 },
            { id: 'MBI', name: 'Maslach Burnout Inventory', questions: 22 },
            { id: 'MDQ', name: 'Mood Disorder Questionnaire', questions: 13 },
            {
                id: 'OCI-R',
                name: 'Obsessive-Compulsive Inventory-Revised',
                questions: 18,
            },
            { id: 'PCL-5', name: 'PTSD Checklist for DSM-5', questions: 20 },
            { id: 'PDSS', name: 'Panic Disorder Severity Scale', questions: 7 },
            { id: 'PSS', name: 'Perceived Stress Scale', questions: 10 },
        ];
    }
    generateAnswerMatrix() {
        const matrix = [];
        for (let questionIndex = 0; questionIndex < 201; questionIndex++) {
            matrix.push({
                questionId: questionIndex + 1,
                scale: faker_1.faker.helpers.arrayElement([
                    'PHQ-9',
                    'GAD-7',
                    'AUDIT',
                    'ASRS',
                    'BES',
                    'DAST-10',
                    'ISI',
                    'MBI',
                    'MDQ',
                    'OCI-R',
                    'PCL-5',
                    'PDSS',
                    'PSS',
                ]),
                weight: faker_1.faker.number.float({ min: 0.1, max: 1.0, fractionDigits: 2 }),
                reverse_scored: faker_1.faker.datatype.boolean({ probability: 0.1 }),
            });
        }
        return matrix;
    }
    generateAiEstimate() {
        return {
            confidence: faker_1.faker.number.float({
                min: 0.7,
                max: 0.98,
                fractionDigits: 3,
            }),
            risk_factors: faker_1.faker.helpers.arrayElements([
                'substance_abuse',
                'trauma_history',
                'family_history',
                'chronic_stress',
                'social_isolation',
                'financial_stress',
                'relationship_issues',
            ], { min: 1, max: 4 }),
            recommendations: faker_1.faker.helpers.arrayElements([
                'CBT therapy',
                'medication_evaluation',
                'lifestyle_changes',
                'support_group',
                'stress_management',
                'mindfulness_practice',
            ], { min: 2, max: 5 }),
            estimated_severity: {
                overall: faker_1.faker.helpers.arrayElement(['low', 'moderate', 'high']),
                depression: faker_1.faker.number.float({ min: 0, max: 1, fractionDigits: 2 }),
                anxiety: faker_1.faker.number.float({ min: 0, max: 1, fractionDigits: 2 }),
                stress: faker_1.faker.number.float({ min: 0, max: 1, fractionDigits: 2 }),
            },
        };
    }
    // Bulk creation methods
    async createMultipleUsers(count, overrides = {}) {
        const users = [];
        for (let i = 0; i < count; i++) {
            users.push(await this.createUser(overrides));
        }
        return users;
    }
    async createMultipleTherapists(count, overrides = {}) {
        const therapists = [];
        for (let i = 0; i < count; i++) {
            therapists.push(await this.createTherapist(overrides));
        }
        return therapists;
    }
    async createMultipleClients(count, overrides = {}) {
        const clients = [];
        for (let i = 0; i < count; i++) {
            clients.push(await this.createClient(overrides));
        }
        return clients;
    }
    // Test scenario builders
    async createCompleteTherapyScenario() {
        // Create a client and therapist
        const client = await this.createClient();
        const therapist = await this.createTherapist();
        // Create client-therapist relationship
        await this.prisma.clientTherapist.create({
            data: {
                clientId: client.userId,
                therapistId: therapist.userId,
                assignedAt: faker_1.faker.date.past(),
            },
        });
        // Create pre-assessment
        const preAssessment = await this.createPreAssessment(client.userId);
        // Create some meetings
        const meetings = [];
        for (let i = 0; i < 3; i++) {
            meetings.push(await this.createMeeting(client.userId, therapist.userId, {
                startTime: faker_1.faker.date.future({ years: (7 * (i + 1)) / 365 }),
            }));
        }
        return {
            client,
            therapist,
            preAssessment,
            meetings,
        };
    }
    async createCommunityWithContent() {
        const community = await this.createCommunity();
        const users = await this.createMultipleUsers(5);
        // Create memberships
        for (const user of users) {
            await this.prisma.membership.create({
                data: {
                    userId: user.id,
                    communityId: community.id,
                    role: 'member',
                },
            });
        }
        // Create posts and comments
        const posts = [];
        for (let i = 0; i < 3; i++) {
            const post = await this.createPost(faker_1.faker.helpers.arrayElement(users).id, community.id);
            posts.push(post);
            // Add comments to each post
            for (let j = 0; j < 2; j++) {
                await this.createComment(post.id, faker_1.faker.helpers.arrayElement(users).id);
            }
        }
        return {
            community,
            users,
            posts,
        };
    }
}
exports.TestDataFactory = TestDataFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL3Rlc3QtdXRpbHMvdGVzdC1kYXRhLmZhY3RvcnkudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMkNBQXdDO0FBRXhDLCtCQUFvQztBQUVwQyxNQUFhLGVBQWU7SUFDTjtJQUFwQixZQUFvQixNQUFxQjtRQUFyQixXQUFNLEdBQU4sTUFBTSxDQUFlO0lBQUcsQ0FBQztJQUU3QyxlQUFlO0lBQ2YsY0FBYyxDQUFDLFlBQTBCLEVBQUU7UUFDekMsT0FBTztZQUNMLEVBQUUsRUFBRSxJQUFBLFNBQU0sR0FBRTtZQUNaLEtBQUssRUFBRSxhQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRTtZQUM3QixTQUFTLEVBQUUsYUFBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7WUFDbkMsVUFBVSxFQUFFLGFBQUssQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFO1lBQ3JDLFFBQVEsRUFBRSxhQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRTtZQUNqQyxTQUFTLEVBQUUsYUFBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDO1lBQ2xFLE9BQU8sRUFBRSxhQUFLLENBQUMsUUFBUSxDQUFDLGFBQWEsRUFBRTtZQUN2QyxTQUFTLEVBQUUsYUFBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUU7WUFDL0IsSUFBSSxFQUFFLFFBQVE7WUFDZCxHQUFHLEVBQUUsYUFBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUU7WUFDNUIsYUFBYSxFQUFFLGFBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFO1lBQ2hDLFFBQVEsRUFBRSxJQUFJO1lBQ2QsR0FBRyxTQUFTO1NBQ2IsQ0FBQztJQUNKLENBQUM7SUFFRCxLQUFLLENBQUMsVUFBVSxDQUFDLFlBQTBCLEVBQUU7UUFDM0MsTUFB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O1FBQ0wsQ0FBQztRQUVELDRCQUE0QjtRQUM1QixNQUFNLEtBQUssR0FBVSxFQUFFLENBQUM7UUFDeEIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQzNCLE1BQU0sSUFBSSxHQUFHLE1BQU0sSUFBSSxDQUFDLFVBQVUsQ0FDaEMsYUFBSyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUNwQyxTQUFTLENBQUMsRUFBRSxDQUNiLENBQUM7WUFDRixLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRWpCLDRCQUE0QjtZQUM1QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQzNCLE1BQU0sSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLGFBQUssQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzFFLENBQUM7UUFDSCxDQUFDO1FBRUQsT0FBTztZQUNMLFNBQVM7WUFDVCxLQUFLO1lBQ0wsS0FBSztTQUNOLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUF0ZEQsMENBc2RDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy90ZXN0LXV0aWxzL3Rlc3QtZGF0YS5mYWN0b3J5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZha2VyIH0gZnJvbSAnQGZha2VyLWpzL2Zha2VyJztcbmltcG9ydCB7IFByaXNtYVNlcnZpY2UgfSBmcm9tICcuLi9wcm92aWRlcnMvcHJpc21hLWNsaWVudC5wcm92aWRlcic7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcblxuZXhwb3J0IGNsYXNzIFRlc3REYXRhRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcHJpc21hOiBQcmlzbWFTZXJ2aWNlKSB7fVxuXG4gIC8vIFVzZXIgRmFjdG9yeVxuICBjcmVhdGVVc2VyRGF0YShvdmVycmlkZXM6IFBhcnRpYWw8YW55PiA9IHt9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgIGVtYWlsOiBmYWtlci5pbnRlcm5ldC5lbWFpbCgpLFxuICAgICAgZmlyc3ROYW1lOiBmYWtlci5wZXJzb24uZmlyc3ROYW1lKCksXG4gICAgICBtaWRkbGVOYW1lOiBmYWtlci5wZXJzb24ubWlkZGxlTmFtZSgpLFxuICAgICAgbGFzdE5hbWU6IGZha2VyLnBlcnNvbi5sYXN0TmFtZSgpLFxuICAgICAgYmlydGhEYXRlOiBmYWtlci5kYXRlLmJpcnRoZGF0ZSh7IG1pbjogMTgsIG1heDogODAsIG1vZGU6ICdhZ2UnIH0pLFxuICAgICAgYWRkcmVzczogZmFrZXIubG9jYXRpb24uc3RyZWV0QWRkcmVzcygpLFxuICAgICAgYXZhdGFyVXJsOiBmYWtlci5pbWFnZS5hdmF0YXIoKSxcbiAgICAgIHJvbGU6ICdjbGllbnQnLFxuICAgICAgYmlvOiBmYWtlci5sb3JlbS5wYXJhZ3JhcGgoKSxcbiAgICAgIGNvdmVySW1hZ2VVcmw6IGZha2VyLmltYWdlLnVybCgpLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAuLi5vdmVycmlkZXMsXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVVzZXIob3ZlcnJpZGVzOiBQYXJ0aWFsPGFueT4gPSB7fSkge1xuICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy5jcmVhdGVVc2VyRGF0YShvdmVycmlkZXMpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnByaXNtYS51c2VyLmNyZWF0ZSh7IGRhdGE6IHVzZXJEYXRhIH0pO1xuICB9XG5cbiAgLy8gQ2xpZW50IEZhY3RvcnlcbiAgYXN5bmMgY3JlYXRlQ2xpZW50KHVzZXJPdmVycmlkZXM6IFBhcnRpYWw8YW55PiA9IHt9KSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuY3JlYXRlVXNlcih7IHJvbGU6ICdjbGllbnQnLCAuLi51c2VyT3ZlcnJpZGVzIH0pO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnByaXNtYS5jbGllbnQuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICBoYXNTZWVuVGhlcmFwaXN0UmVjb21tZW5kYXRpb25zOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7IHVzZXI6IHRydWUgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFRoZXJhcGlzdCBGYWN0b3J5XG4gIGNyZWF0ZVRoZXJhcGlzdERhdGEodXNlck92ZXJyaWRlczogUGFydGlhbDxhbnk+ID0ge30pIHtcbiAgICByZXR1cm4ge1xuICAgICAgbW9iaWxlOiBmYWtlci5waG9uZS5udW1iZXIoKSxcbiAgICAgIHByb3ZpbmNlOiBmYWtlci5sb2NhdGlvbi5zdGF0ZSgpLFxuICAgICAgcHJvdmlkZXJUeXBlOiBmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudChbXG4gICAgICAgICdJbmRpdmlkdWFsJyxcbiAgICAgICAgJ0dyb3VwIFByYWN0aWNlJyxcbiAgICAgICAgJ0hvc3BpdGFsJyxcbiAgICAgIF0pLFxuICAgICAgcHJvZmVzc2lvbmFsTGljZW5zZVR5cGU6IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFtcbiAgICAgICAgJ0xDU1cnLFxuICAgICAgICAnTFBDJyxcbiAgICAgICAgJ0xNRlQnLFxuICAgICAgICAnUHN5Y2hvbG9naXN0JyxcbiAgICAgIF0pLFxuICAgICAgaXNQUkNMaWNlbnNlZDogZmFrZXIuZGF0YXR5cGUuYm9vbGVhbigpID8gJ1llcycgOiAnTm8nLFxuICAgICAgcHJjTGljZW5zZU51bWJlcjogYFBSQy0ke2Zha2VyLnN0cmluZy5udW1lcmljKDgpfWAsXG4gICAgICBleHBpcmF0aW9uRGF0ZU9mTGljZW5zZTogZmFrZXIuZGF0ZS5mdXR1cmUoeyB5ZWFyczogMyB9KSxcbiAgICAgIHByYWN0aWNlU3RhcnREYXRlOiBmYWtlci5kYXRlLnBhc3QoeyB5ZWFyczogMTAgfSksXG4gICAgICBhcmVhc09mRXhwZXJ0aXNlOiBmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudHMoXG4gICAgICAgIFtcbiAgICAgICAgICAnQW54aWV0eScsXG4gICAgICAgICAgJ0RlcHJlc3Npb24nLFxuICAgICAgICAgICdQVFNEJyxcbiAgICAgICAgICAnQ291cGxlcyBUaGVyYXB5JyxcbiAgICAgICAgICAnRmFtaWx5IFRoZXJhcHknLFxuICAgICAgICAgICdBZGRpY3Rpb24nLFxuICAgICAgICAgICdFYXRpbmcgRGlzb3JkZXJzJyxcbiAgICAgICAgICAnQmlwb2xhciBEaXNvcmRlcicsXG4gICAgICAgIF0sXG4gICAgICAgIHsgbWluOiAyLCBtYXg6IDUgfSxcbiAgICAgICksXG4gICAgICBhc3Nlc3NtZW50VG9vbHM6IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50cyhcbiAgICAgICAgWydQSFEtOScsICdHQUQtNycsICdBVURJVCcsICdCREktSUknLCAnTU1QSS0yJ10sXG4gICAgICAgIHsgbWluOiAxLCBtYXg6IDMgfSxcbiAgICAgICksXG4gICAgICB0aGVyYXBldXRpY0FwcHJvYWNoZXNVc2VkTGlzdDogZmFrZXIuaGVscGVycy5hcnJheUVsZW1lbnRzKFxuICAgICAgICBbJ0NCVCcsICdEQlQnLCAnUHN5Y2hvZHluYW1pYycsICdIdW1hbmlzdGljJywgJ0VNRFInXSxcbiAgICAgICAgeyBtaW46IDEsIG1heDogMyB9LFxuICAgICAgKSxcbiAgICAgIGxhbmd1YWdlc09mZmVyZWQ6IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50cyhcbiAgICAgICAgWydFbmdsaXNoJywgJ1NwYW5pc2gnLCAnTWFuZGFyaW4nLCAnVGFnYWxvZycsICdGcmVuY2gnXSxcbiAgICAgICAgeyBtaW46IDEsIG1heDogMiB9LFxuICAgICAgKSxcbiAgICAgIHByb3ZpZGVkT25saW5lVGhlcmFweUJlZm9yZTogZmFrZXIuZGF0YXR5cGUuYm9vbGVhbigpLFxuICAgICAgY29tZm9ydGFibGVVc2luZ1ZpZGVvQ29uZmVyZW5jaW5nOiBmYWtlci5kYXRhdHlwZS5ib29sZWFuKCksXG4gICAgICBwcmVmZXJyZWRTZXNzaW9uTGVuZ3RoOiBmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudHMoWzMwLCA0NSwgNjAsIDkwXSwge1xuICAgICAgICBtaW46IDEsXG4gICAgICAgIG1heDogMixcbiAgICAgIH0pLFxuICAgICAgcHJpdmF0ZUNvbmZpZGVudGlhbFNwYWNlOiBmYWtlci5kYXRhdHlwZS5ib29sZWFuKCkgPyAnWWVzJyA6ICdObycsXG4gICAgICBjb21wbGllc1dpdGhEYXRhUHJpdmFjeUFjdDogdHJ1ZSxcbiAgICAgIHByb2Zlc3Npb25hbExpYWJpbGl0eUluc3VyYW5jZTogZmFrZXIuZGF0YXR5cGUuYm9vbGVhbigpID8gJ1llcycgOiAnTm8nLFxuICAgICAgY29tcGxhaW50c09yRGlzY2lwbGluYXJ5QWN0aW9uczogZmFrZXIuZGF0YXR5cGUuYm9vbGVhbigpXG4gICAgICAgID8gZmFrZXIubG9yZW0uc2VudGVuY2UoKVxuICAgICAgICA6ICdOb25lJyxcbiAgICAgIHdpbGxpbmdUb0FiaWRlQnlQbGF0Zm9ybUd1aWRlbGluZXM6IHRydWUsXG4gICAgICBleHBlcnRpc2U6IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50cyhcbiAgICAgICAgW1xuICAgICAgICAgICdBbnhpZXR5IERpc29yZGVycycsXG4gICAgICAgICAgJ01vb2QgRGlzb3JkZXJzJyxcbiAgICAgICAgICAnVHJhdW1hIFJlY292ZXJ5JyxcbiAgICAgICAgICAnUmVsYXRpb25zaGlwIElzc3VlcycsXG4gICAgICAgIF0sXG4gICAgICAgIHsgbWluOiAxLCBtYXg6IDMgfSxcbiAgICAgICksXG4gICAgICBhcHByb2FjaGVzOiBmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudHMoXG4gICAgICAgIFtcbiAgICAgICAgICAnQ29nbml0aXZlIEJlaGF2aW9yYWwgVGhlcmFweScsXG4gICAgICAgICAgJ01pbmRmdWxuZXNzLUJhc2VkIFRoZXJhcHknLFxuICAgICAgICAgICdTb2x1dGlvbi1Gb2N1c2VkIFRoZXJhcHknLFxuICAgICAgICBdLFxuICAgICAgICB7IG1pbjogMSwgbWF4OiAyIH0sXG4gICAgICApLFxuICAgICAgbGFuZ3VhZ2VzOiBmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudHMoXG4gICAgICAgIFsnRW5nbGlzaCcsICdTcGFuaXNoJywgJ1RhZ2Fsb2cnXSxcbiAgICAgICAgeyBtaW46IDEsIG1heDogMiB9LFxuICAgICAgKSxcbiAgICAgIGlsbG5lc3NTcGVjaWFsaXphdGlvbnM6IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50cyhcbiAgICAgICAgWydEZXByZXNzaW9uJywgJ0FueGlldHknLCAnUFRTRCcsICdCaXBvbGFyIERpc29yZGVyJ10sXG4gICAgICAgIHsgbWluOiAxLCBtYXg6IDMgfSxcbiAgICAgICksXG4gICAgICBhY2NlcHRUeXBlczogZmFrZXIuaGVscGVycy5hcnJheUVsZW1lbnRzKFxuICAgICAgICBbJ0luZGl2aWR1YWwnLCAnQ291cGxlcycsICdGYW1pbHknLCAnR3JvdXAnXSxcbiAgICAgICAgeyBtaW46IDEsIG1heDogMiB9LFxuICAgICAgKSxcbiAgICAgIHRyZWF0bWVudFN1Y2Nlc3NSYXRlczoge1xuICAgICAgICBhbnhpZXR5OiBmYWtlci5udW1iZXIuZmxvYXQoeyBtaW46IDAuNiwgbWF4OiAwLjk1LCBmcmFjdGlvbkRpZ2l0czogMiB9KSxcbiAgICAgICAgZGVwcmVzc2lvbjogZmFrZXIubnVtYmVyLmZsb2F0KHtcbiAgICAgICAgICBtaW46IDAuNixcbiAgICAgICAgICBtYXg6IDAuOTUsXG4gICAgICAgICAgZnJhY3Rpb25EaWdpdHM6IDIsXG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICAgIHNlc3Npb25MZW5ndGg6IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFtcbiAgICAgICAgJzMwIG1pbnV0ZXMnLFxuICAgICAgICAnNDUgbWludXRlcycsXG4gICAgICAgICc2MCBtaW51dGVzJyxcbiAgICAgIF0pLFxuICAgICAgaG91cmx5UmF0ZTogZmFrZXIubnVtYmVyLmZsb2F0KHsgbWluOiA4MCwgbWF4OiAyMDAsIGZyYWN0aW9uRGlnaXRzOiAyIH0pLFxuICAgICAgc3RhdHVzOiAnYXBwcm92ZWQnLFxuICAgICAgLi4udXNlck92ZXJyaWRlcyxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlVGhlcmFwaXN0KHVzZXJPdmVycmlkZXM6IFBhcnRpYWw8YW55PiA9IHt9KSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuY3JlYXRlVXNlcih7IHJvbGU6ICd0aGVyYXBpc3QnLCAuLi51c2VyT3ZlcnJpZGVzIH0pO1xuICAgIGNvbnN0IHRoZXJhcGlzdERhdGEgPSB0aGlzLmNyZWF0ZVRoZXJhcGlzdERhdGEoKTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnByaXNtYS50aGVyYXBpc3QuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAuLi50aGVyYXBpc3REYXRhLFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHsgdXNlcjogdHJ1ZSB9LFxuICAgIH0pO1xuICB9XG5cbiAgLy8gQ29tbXVuaXR5IEZhY3RvcnlcbiAgYXN5bmMgY3JlYXRlQ29tbXVuaXR5KG92ZXJyaWRlczogUGFydGlhbDxhbnk+ID0ge30pIHtcbiAgICBjb25zdCBjb21tdW5pdHlEYXRhID0ge1xuICAgICAgbmFtZTogZmFrZXIuY29tcGFueS5uYW1lKCkgKyAnIFN1cHBvcnQgR3JvdXAnLFxuICAgICAgZGVzY3JpcHRpb246IGZha2VyLmxvcmVtLnBhcmFncmFwaCgpLFxuICAgICAgc2x1ZzogZmFrZXIubG9yZW0uc2x1ZygpLFxuICAgICAgaW1hZ2VVcmw6IGZha2VyLmltYWdlLnVybCgpLFxuICAgICAgLi4ub3ZlcnJpZGVzLFxuICAgIH07XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wcmlzbWEuY29tbXVuaXR5LmNyZWF0ZSh7IGRhdGE6IGNvbW11bml0eURhdGEgfSk7XG4gIH1cblxuICAvLyBNZWV0aW5nIEZhY3RvcnlcbiAgYXN5bmMgY3JlYXRlTWVldGluZyhcbiAgICBjbGllbnRJZDogc3RyaW5nLFxuICAgIHRoZXJhcGlzdElkOiBzdHJpbmcsXG4gICAgb3ZlcnJpZGVzOiBQYXJ0aWFsPGFueT4gPSB7fSxcbiAgKSB7XG4gICAgY29uc3QgbWVldGluZ0RhdGEgPSB7XG4gICAgICBjbGllbnRJZCxcbiAgICAgIHRoZXJhcGlzdElkLFxuICAgICAgc3RhcnRUaW1lOiBmYWtlci5kYXRlLmZ1dHVyZSgpLFxuICAgICAgZHVyYXRpb246IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFszMCwgNDUsIDYwXSksXG4gICAgICBzdGF0dXM6ICdTQ0hFRFVMRUQnIGFzIGFueSxcbiAgICAgIGRlc2NyaXB0aW9uOiBmYWtlci5sb3JlbS5wYXJhZ3JhcGgoKSxcbiAgICAgIC4uLm92ZXJyaWRlcyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucHJpc21hLm1lZXRpbmcuY3JlYXRlKHsgZGF0YTogbWVldGluZ0RhdGEgfSk7XG4gIH1cblxuICAvLyBQcmUtYXNzZXNzbWVudCBGYWN0b3J5XG4gIGFzeW5jIGNyZWF0ZVByZUFzc2Vzc21lbnQodXNlcklkOiBzdHJpbmcsIG92ZXJyaWRlczogUGFydGlhbDxhbnk+ID0ge30pIHtcbiAgICBjb25zdCBhc3Nlc3NtZW50RGF0YSA9IHtcbiAgICAgIGNsaWVudElkOiB1c2VySWQsXG4gICAgICBxdWVzdGlvbm5haXJlczogdGhpcy5nZW5lcmF0ZVF1ZXN0aW9ubmFpcmVzKCksXG4gICAgICBhbnN3ZXJzOiB0aGlzLmdlbmVyYXRlQXNzZXNzbWVudFJlc3BvbnNlcygpLFxuICAgICAgYW5zd2VyTWF0cml4OiB0aGlzLmdlbmVyYXRlQW5zd2VyTWF0cml4KCksXG4gICAgICBzY29yZXM6IHRoaXMuZ2VuZXJhdGVBc3Nlc3NtZW50U2NvcmVzKCksXG4gICAgICBzZXZlcml0eUxldmVsczogdGhpcy5nZW5lcmF0ZVNldmVyaXR5TGV2ZWxzKCksXG4gICAgICBhaUVzdGltYXRlOiB0aGlzLmdlbmVyYXRlQWlFc3RpbWF0ZSgpLFxuICAgICAgLi4ub3ZlcnJpZGVzLFxuICAgIH07XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wcmlzbWEucHJlQXNzZXNzbWVudC5jcmVhdGUoeyBkYXRhOiBhc3Nlc3NtZW50RGF0YSB9KTtcbiAgfVxuXG4gIC8vIFBvc3QgRmFjdG9yeVxuICBhc3luYyBjcmVhdGVQb3N0KFxuICAgIGF1dGhvcklkOiBzdHJpbmcsXG4gICAgY29tbXVuaXR5SWQ6IHN0cmluZyxcbiAgICBvdmVycmlkZXM6IFBhcnRpYWw8YW55PiA9IHt9LFxuICApIHtcbiAgICBjb25zdCBwb3N0RGF0YSA9IHtcbiAgICAgIHRpdGxlOiBmYWtlci5sb3JlbS5zZW50ZW5jZSgpLFxuICAgICAgY29udGVudDogZmFrZXIubG9yZW0ucGFyYWdyYXBocygzKSxcbiAgICAgIHVzZXJJZDogYXV0aG9ySWQsXG4gICAgICByb29tSWQ6IGNvbW11bml0eUlkLFxuICAgICAgLi4ub3ZlcnJpZGVzLFxuICAgIH07XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wcmlzbWEucG9zdC5jcmVhdGUoeyBkYXRhOiBwb3N0RGF0YSB9KTtcbiAgfVxuXG4gIC8vIENvbW1lbnQgRmFjdG9yeVxuICBhc3luYyBjcmVhdGVDb21tZW50KFxuICAgIHBvc3RJZDogc3RyaW5nLFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG92ZXJyaWRlczogUGFydGlhbDxhbnk+ID0ge30sXG4gICkge1xuICAgIGNvbnN0IGNvbW1lbnREYXRhID0ge1xuICAgICAgY29udGVudDogZmFrZXIubG9yZW0ucGFyYWdyYXBoKCksXG4gICAgICBwb3N0SWQsXG4gICAgICB1c2VySWQsXG4gICAgICAuLi5vdmVycmlkZXMsXG4gICAgfTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnByaXNtYS5jb21tZW50LmNyZWF0ZSh7IGRhdGE6IGNvbW1lbnREYXRhIH0pO1xuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZHMgZm9yIGNvbXBsZXggZGF0YSBzdHJ1Y3R1cmVzXG4gIHByaXZhdGUgZ2VuZXJhdGVBc3Nlc3NtZW50UmVzcG9uc2VzKCkge1xuICAgIGNvbnN0IHJlc3BvbnNlcyA9IHt9O1xuICAgIC8vIEdlbmVyYXRlIHJlc3BvbnNlcyBmb3IgZGlmZmVyZW50IGFzc2Vzc21lbnQgdG9vbHNcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAyMDE7IGkrKykge1xuICAgICAgcmVzcG9uc2VzW2BxJHtpfWBdID0gZmFrZXIubnVtYmVyLmludCh7IG1pbjogMCwgbWF4OiA0IH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2VzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUFzc2Vzc21lbnRTY29yZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFBIUTogZmFrZXIubnVtYmVyLmludCh7IG1pbjogMCwgbWF4OiAyNyB9KSxcbiAgICAgIEdBRDc6IGZha2VyLm51bWJlci5pbnQoeyBtaW46IDAsIG1heDogMjEgfSksXG4gICAgICBBVURJVDogZmFrZXIubnVtYmVyLmludCh7IG1pbjogMCwgbWF4OiA0MCB9KSxcbiAgICAgIC8vIEFkZCBtb3JlIGFzc2Vzc21lbnQgc2NvcmVzIGFzIG5lZWRlZFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlU2V2ZXJpdHlMZXZlbHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRlcHJlc3Npb246IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFtcbiAgICAgICAgJ21pbmltYWwnLFxuICAgICAgICAnbWlsZCcsXG4gICAgICAgICdtb2RlcmF0ZScsXG4gICAgICAgICdzZXZlcmUnLFxuICAgICAgXSksXG4gICAgICBhbnhpZXR5OiBmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudChbXG4gICAgICAgICdtaW5pbWFsJyxcbiAgICAgICAgJ21pbGQnLFxuICAgICAgICAnbW9kZXJhdGUnLFxuICAgICAgICAnc2V2ZXJlJyxcbiAgICAgIF0pLFxuICAgICAgc3Vic3RhbmNlX3VzZTogZmFrZXIuaGVscGVycy5hcnJheUVsZW1lbnQoW1xuICAgICAgICAnbG93X3Jpc2snLFxuICAgICAgICAnaGF6YXJkb3VzJyxcbiAgICAgICAgJ2hhcm1mdWwnLFxuICAgICAgICAnZGVwZW5kZW50JyxcbiAgICAgIF0pLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUXVlc3Rpb25uYWlyZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHsgaWQ6ICdQSFEtOScsIG5hbWU6ICdQYXRpZW50IEhlYWx0aCBRdWVzdGlvbm5haXJlLTknLCBxdWVzdGlvbnM6IDkgfSxcbiAgICAgIHsgaWQ6ICdHQUQtNycsIG5hbWU6ICdHZW5lcmFsIEFueGlldHkgRGlzb3JkZXItNycsIHF1ZXN0aW9uczogNyB9LFxuICAgICAge1xuICAgICAgICBpZDogJ0FVRElUJyxcbiAgICAgICAgbmFtZTogJ0FsY29ob2wgVXNlIERpc29yZGVycyBJZGVudGlmaWNhdGlvbiBUZXN0JyxcbiAgICAgICAgcXVlc3Rpb25zOiAxMCxcbiAgICAgIH0sXG4gICAgICB7IGlkOiAnQVNSUycsIG5hbWU6ICdBZHVsdCBBREhEIFNlbGYtUmVwb3J0IFNjYWxlJywgcXVlc3Rpb25zOiAxOCB9LFxuICAgICAgeyBpZDogJ0JFUycsIG5hbWU6ICdCaW5nZSBFYXRpbmcgU2NhbGUnLCBxdWVzdGlvbnM6IDE2IH0sXG4gICAgICB7IGlkOiAnREFTVC0xMCcsIG5hbWU6ICdEcnVnIEFidXNlIFNjcmVlbmluZyBUZXN0JywgcXVlc3Rpb25zOiAxMCB9LFxuICAgICAgeyBpZDogJ0lTSScsIG5hbWU6ICdJbnNvbW5pYSBTZXZlcml0eSBJbmRleCcsIHF1ZXN0aW9uczogNyB9LFxuICAgICAgeyBpZDogJ01CSScsIG5hbWU6ICdNYXNsYWNoIEJ1cm5vdXQgSW52ZW50b3J5JywgcXVlc3Rpb25zOiAyMiB9LFxuICAgICAgeyBpZDogJ01EUScsIG5hbWU6ICdNb29kIERpc29yZGVyIFF1ZXN0aW9ubmFpcmUnLCBxdWVzdGlvbnM6IDEzIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnT0NJLVInLFxuICAgICAgICBuYW1lOiAnT2JzZXNzaXZlLUNvbXB1bHNpdmUgSW52ZW50b3J5LVJldmlzZWQnLFxuICAgICAgICBxdWVzdGlvbnM6IDE4LFxuICAgICAgfSxcbiAgICAgIHsgaWQ6ICdQQ0wtNScsIG5hbWU6ICdQVFNEIENoZWNrbGlzdCBmb3IgRFNNLTUnLCBxdWVzdGlvbnM6IDIwIH0sXG4gICAgICB7IGlkOiAnUERTUycsIG5hbWU6ICdQYW5pYyBEaXNvcmRlciBTZXZlcml0eSBTY2FsZScsIHF1ZXN0aW9uczogNyB9LFxuICAgICAgeyBpZDogJ1BTUycsIG5hbWU6ICdQZXJjZWl2ZWQgU3RyZXNzIFNjYWxlJywgcXVlc3Rpb25zOiAxMCB9LFxuICAgIF07XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQW5zd2VyTWF0cml4KCkge1xuICAgIGNvbnN0IG1hdHJpeDogYW55W10gPSBbXTtcbiAgICBmb3IgKGxldCBxdWVzdGlvbkluZGV4ID0gMDsgcXVlc3Rpb25JbmRleCA8IDIwMTsgcXVlc3Rpb25JbmRleCsrKSB7XG4gICAgICBtYXRyaXgucHVzaCh7XG4gICAgICAgIHF1ZXN0aW9uSWQ6IHF1ZXN0aW9uSW5kZXggKyAxLFxuICAgICAgICBzY2FsZTogZmFrZXIuaGVscGVycy5hcnJheUVsZW1lbnQoW1xuICAgICAgICAgICdQSFEtOScsXG4gICAgICAgICAgJ0dBRC03JyxcbiAgICAgICAgICAnQVVESVQnLFxuICAgICAgICAgICdBU1JTJyxcbiAgICAgICAgICAnQkVTJyxcbiAgICAgICAgICAnREFTVC0xMCcsXG4gICAgICAgICAgJ0lTSScsXG4gICAgICAgICAgJ01CSScsXG4gICAgICAgICAgJ01EUScsXG4gICAgICAgICAgJ09DSS1SJyxcbiAgICAgICAgICAnUENMLTUnLFxuICAgICAgICAgICdQRFNTJyxcbiAgICAgICAgICAnUFNTJyxcbiAgICAgICAgXSksXG4gICAgICAgIHdlaWdodDogZmFrZXIubnVtYmVyLmZsb2F0KHsgbWluOiAwLjEsIG1heDogMS4wLCBmcmFjdGlvbkRpZ2l0czogMiB9KSxcbiAgICAgICAgcmV2ZXJzZV9zY29yZWQ6IGZha2VyLmRhdGF0eXBlLmJvb2xlYW4oeyBwcm9iYWJpbGl0eTogMC4xIH0pLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBtYXRyaXg7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQWlFc3RpbWF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29uZmlkZW5jZTogZmFrZXIubnVtYmVyLmZsb2F0KHtcbiAgICAgICAgbWluOiAwLjcsXG4gICAgICAgIG1heDogMC45OCxcbiAgICAgICAgZnJhY3Rpb25EaWdpdHM6IDMsXG4gICAgICB9KSxcbiAgICAgIHJpc2tfZmFjdG9yczogZmFrZXIuaGVscGVycy5hcnJheUVsZW1lbnRzKFxuICAgICAgICBbXG4gICAgICAgICAgJ3N1YnN0YW5jZV9hYnVzZScsXG4gICAgICAgICAgJ3RyYXVtYV9oaXN0b3J5JyxcbiAgICAgICAgICAnZmFtaWx5X2hpc3RvcnknLFxuICAgICAgICAgICdjaHJvbmljX3N0cmVzcycsXG4gICAgICAgICAgJ3NvY2lhbF9pc29sYXRpb24nLFxuICAgICAgICAgICdmaW5hbmNpYWxfc3RyZXNzJyxcbiAgICAgICAgICAncmVsYXRpb25zaGlwX2lzc3VlcycsXG4gICAgICAgIF0sXG4gICAgICAgIHsgbWluOiAxLCBtYXg6IDQgfSxcbiAgICAgICksXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50cyhcbiAgICAgICAgW1xuICAgICAgICAgICdDQlQgdGhlcmFweScsXG4gICAgICAgICAgJ21lZGljYXRpb25fZXZhbHVhdGlvbicsXG4gICAgICAgICAgJ2xpZmVzdHlsZV9jaGFuZ2VzJyxcbiAgICAgICAgICAnc3VwcG9ydF9ncm91cCcsXG4gICAgICAgICAgJ3N0cmVzc19tYW5hZ2VtZW50JyxcbiAgICAgICAgICAnbWluZGZ1bG5lc3NfcHJhY3RpY2UnLFxuICAgICAgICBdLFxuICAgICAgICB7IG1pbjogMiwgbWF4OiA1IH0sXG4gICAgICApLFxuICAgICAgZXN0aW1hdGVkX3NldmVyaXR5OiB7XG4gICAgICAgIG92ZXJhbGw6IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsnbG93JywgJ21vZGVyYXRlJywgJ2hpZ2gnXSksXG4gICAgICAgIGRlcHJlc3Npb246IGZha2VyLm51bWJlci5mbG9hdCh7IG1pbjogMCwgbWF4OiAxLCBmcmFjdGlvbkRpZ2l0czogMiB9KSxcbiAgICAgICAgYW54aWV0eTogZmFrZXIubnVtYmVyLmZsb2F0KHsgbWluOiAwLCBtYXg6IDEsIGZyYWN0aW9uRGlnaXRzOiAyIH0pLFxuICAgICAgICBzdHJlc3M6IGZha2VyLm51bWJlci5mbG9hdCh7IG1pbjogMCwgbWF4OiAxLCBmcmFjdGlvbkRpZ2l0czogMiB9KSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIEJ1bGsgY3JlYXRpb24gbWV0aG9kc1xuICBhc3luYyBjcmVhdGVNdWx0aXBsZVVzZXJzKGNvdW50OiBudW1iZXIsIG92ZXJyaWRlczogUGFydGlhbDxhbnk+ID0ge30pIHtcbiAgICBjb25zdCB1c2VyczogYW55W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgIHVzZXJzLnB1c2goYXdhaXQgdGhpcy5jcmVhdGVVc2VyKG92ZXJyaWRlcykpO1xuICAgIH1cbiAgICByZXR1cm4gdXNlcnM7XG4gIH1cblxuICBhc3luYyBjcmVhdGVNdWx0aXBsZVRoZXJhcGlzdHMoY291bnQ6IG51bWJlciwgb3ZlcnJpZGVzOiBQYXJ0aWFsPGFueT4gPSB7fSkge1xuICAgIGNvbnN0IHRoZXJhcGlzdHM6IGFueVtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICB0aGVyYXBpc3RzLnB1c2goYXdhaXQgdGhpcy5jcmVhdGVUaGVyYXBpc3Qob3ZlcnJpZGVzKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGVyYXBpc3RzO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlTXVsdGlwbGVDbGllbnRzKGNvdW50OiBudW1iZXIsIG92ZXJyaWRlczogUGFydGlhbDxhbnk+ID0ge30pIHtcbiAgICBjb25zdCBjbGllbnRzOiBhbnlbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgY2xpZW50cy5wdXNoKGF3YWl0IHRoaXMuY3JlYXRlQ2xpZW50KG92ZXJyaWRlcykpO1xuICAgIH1cbiAgICByZXR1cm4gY2xpZW50cztcbiAgfVxuXG4gIC8vIFRlc3Qgc2NlbmFyaW8gYnVpbGRlcnNcbiAgYXN5bmMgY3JlYXRlQ29tcGxldGVUaGVyYXB5U2NlbmFyaW8oKSB7XG4gICAgLy8gQ3JlYXRlIGEgY2xpZW50IGFuZCB0aGVyYXBpc3RcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNyZWF0ZUNsaWVudCgpO1xuICAgIGNvbnN0IHRoZXJhcGlzdCA9IGF3YWl0IHRoaXMuY3JlYXRlVGhlcmFwaXN0KCk7XG5cbiAgICAvLyBDcmVhdGUgY2xpZW50LXRoZXJhcGlzdCByZWxhdGlvbnNoaXBcbiAgICBhd2FpdCB0aGlzLnByaXNtYS5jbGllbnRUaGVyYXBpc3QuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY2xpZW50SWQ6IGNsaWVudC51c2VySWQsXG4gICAgICAgIHRoZXJhcGlzdElkOiB0aGVyYXBpc3QudXNlcklkLFxuICAgICAgICBhc3NpZ25lZEF0OiBmYWtlci5kYXRlLnBhc3QoKSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgcHJlLWFzc2Vzc21lbnRcbiAgICBjb25zdCBwcmVBc3Nlc3NtZW50ID0gYXdhaXQgdGhpcy5jcmVhdGVQcmVBc3Nlc3NtZW50KGNsaWVudC51c2VySWQpO1xuXG4gICAgLy8gQ3JlYXRlIHNvbWUgbWVldGluZ3NcbiAgICBjb25zdCBtZWV0aW5nczogYW55W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgbWVldGluZ3MucHVzaChcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVNZWV0aW5nKGNsaWVudC51c2VySWQsIHRoZXJhcGlzdC51c2VySWQsIHtcbiAgICAgICAgICBzdGFydFRpbWU6IGZha2VyLmRhdGUuZnV0dXJlKHsgeWVhcnM6ICg3ICogKGkgKyAxKSkgLyAzNjUgfSksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgY2xpZW50LFxuICAgICAgdGhlcmFwaXN0LFxuICAgICAgcHJlQXNzZXNzbWVudCxcbiAgICAgIG1lZXRpbmdzLFxuICAgIH07XG4gIH1cblxuICBhc3luYyBjcmVhdGVDb21tdW5pdHlXaXRoQ29udGVudCgpIHtcbiAgICBjb25zdCBjb21tdW5pdHkgPSBhd2FpdCB0aGlzLmNyZWF0ZUNvbW11bml0eSgpO1xuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgdGhpcy5jcmVhdGVNdWx0aXBsZVVzZXJzKDUpO1xuXG4gICAgLy8gQ3JlYXRlIG1lbWJlcnNoaXBzXG4gICAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XG4gICAgICBhd2FpdCB0aGlzLnByaXNtYS5tZW1iZXJzaGlwLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgY29tbXVuaXR5SWQ6IGNvbW11bml0eS5pZCxcbiAgICAgICAgICByb2xlOiAnbWVtYmVyJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBwb3N0cyBhbmQgY29tbWVudHNcbiAgICBjb25zdCBwb3N0czogYW55W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IHRoaXMuY3JlYXRlUG9zdChcbiAgICAgICAgZmFrZXIuaGVscGVycy5hcnJheUVsZW1lbnQodXNlcnMpLmlkLFxuICAgICAgICBjb21tdW5pdHkuaWQsXG4gICAgICApO1xuICAgICAgcG9zdHMucHVzaChwb3N0KTtcblxuICAgICAgLy8gQWRkIGNvbW1lbnRzIHRvIGVhY2ggcG9zdFxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAyOyBqKyspIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVDb21tZW50KHBvc3QuaWQsIGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KHVzZXJzKS5pZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbW11bml0eSxcbiAgICAgIHVzZXJzLFxuICAgICAgcG9zdHMsXG4gICAgfTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9