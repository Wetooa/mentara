{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/therapist/therapist-application.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/therapist/therapist-application.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { TherapistApplicationService } from './therapist-application.service';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport { EmailService } from '../services/email.service';\nimport { BadRequestException, NotFoundException } from '@nestjs/common';\nimport {\n  FileStatus,\n  AttachmentEntityType,\n  AttachmentPurpose,\n} from '@prisma/client';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\n// Mock fs and path modules\njest.mock('fs');\njest.mock('path');\n\ndescribe('TherapistApplicationService', () => {\n  let service: TherapistApplicationService;\n  let prismaService: any;\n  let emailService: any;\n\n  // Mock data\n  const mockUser = {\n    id: 'user-123',\n    email: 'therapist@example.com',\n    firstName: 'John',\n    lastName: 'Doe',\n    role: 'client',\n    isActive: false,\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    updatedAt: new Date('2024-01-15T00:00:00Z'),\n  };\n\n  const mockTherapistApplication = {\n    userId: 'user-123',\n    mobile: '+1234567890',\n    province: 'Ontario',\n    status: 'pending',\n    providerType: 'Registered Psychologist',\n    professionalLicenseType: 'Registered Psychologist',\n    isPRCLicensed: true,\n    prcLicenseNumber: 'RP12345',\n    practiceStartDate: new Date('2020-01-01T00:00:00Z'),\n    areasOfExpertise: ['anxiety', 'depression'],\n    assessmentTools: ['GAD-7', 'PHQ-9'],\n    therapeuticApproachesUsedList: ['CBT', 'DBT'],\n    languagesOffered: ['English', 'French'],\n    providedOnlineTherapyBefore: true,\n    comfortableUsingVideoConferencing: true,\n    privateConfidentialSpace: 'yes',\n    compliesWithDataPrivacyAct: true,\n    professionalLiabilityInsurance: 'yes',\n    complaintsOrDisciplinaryActions: 'no',\n    willingToAbideByPlatformGuidelines: true,\n    sessionLength: '50 minutes',\n    hourlyRate: 120,\n    submissionDate: new Date('2024-01-15T00:00:00Z'),\n    processingDate: new Date('2024-01-15T00:00:00Z'),\n    expirationDateOfLicense: new Date('2025-01-01T00:00:00Z'),\n    licenseVerified: false,\n    acceptsInsurance: false,\n    acceptedInsuranceTypes: [],\n    specialCertifications: [],\n    expertise: ['anxiety', 'depression'],\n    approaches: ['CBT', 'DBT'],\n    languages: ['English', 'French'],\n    illnessSpecializations: [],\n    acceptTypes: ['individual', 'couples'],\n    treatmentSuccessRates: {},\n    preferredSessionLength: [30, 45, 60],\n    user: mockUser,\n  };\n\n  const mockApplicationDto = {\n    userId: 'user-123',\n    firstName: 'John',\n    lastName: 'Doe',\n    email: 'therapist@example.com',\n    mobile: '+1234567890',\n    province: 'Ontario',\n    providerType: 'Registered Psychologist',\n    professionalLicenseType: 'Registered Psychologist',\n    isPRCLicensed: 'yes',\n    prcLicenseNumber: 'RP12345',\n    practiceStartDate: '2020-01-01',\n    areasOfExpertise: ['anxiety', 'depression'],\n    assessmentTools: ['GAD-7', 'PHQ-9'],\n    therapeuticApproachesUsedList: ['CBT', 'DBT'],\n    languagesOffered: ['English', 'French'],\n    providedOnlineTherapyBefore: true,\n    comfortableUsingVideoConferencing: true,\n    privateConfidentialSpace: true,\n    compliesWithDataPrivacyAct: true,\n    weeklyAvailability: '20 hours',\n    preferredSessionLength: '50 minutes',\n    accepts: ['individual', 'couples'],\n    professionalLiabilityInsurance: 'yes',\n    complaintsOrDisciplinaryActions: 'no',\n    willingToAbideByPlatformGuidelines: true,\n    hourlyRate: 120,\n  };\n\n  const mockFile = {\n    originalname: 'license.pdf',\n    mimetype: 'application/pdf',\n    size: 1024,\n    buffer: Buffer.from('fake file content'),\n  } as Express.Multer.File;\n\n  const mockFileRecord = {\n    id: 'file-123',\n    filename: 'license.pdf',\n    displayName: 'license.pdf',\n    mimeType: 'application/pdf',\n    size: 1024,\n    storagePath: 'uploads/therapist-documents/123456-license.pdf',\n    uploadedBy: 'user-123',\n    status: FileStatus.UPLOADED,\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n  };\n\n  const mockFileAttachment = {\n    id: 'attachment-123',\n    fileId: 'file-123',\n    entityType: AttachmentEntityType.THERAPIST_APPLICATION,\n    entityId: 'user-123',\n    purpose: AttachmentPurpose.LICENSE,\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    file: mockFileRecord,\n  };\n\n  beforeEach(async () => {\n    const mockPrismaService = {\n      user: {\n        findUnique: jest.fn(),\n        create: jest.fn(),\n      },\n      therapist: {\n        findUnique: jest.fn(),\n        findFirst: jest.fn(),\n        findMany: jest.fn(),\n        create: jest.fn(),\n        update: jest.fn(),\n        count: jest.fn(),\n      },\n      file: {\n        create: jest.fn(),\n      },\n      fileAttachment: {\n        create: jest.fn(),\n        findMany: jest.fn(),\n      },\n      $transaction: jest.fn(),\n    };\n\n    const mockEmailService = {\n      sendTherapistWelcomeEmail: jest.fn(),\n      sendTherapistRejectionEmail: jest.fn(),\n    };\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        TherapistApplicationService,\n        {\n          provide: PrismaService,\n          useValue: mockPrismaService,\n        },\n        {\n          provide: EmailService,\n          useValue: mockEmailService,\n        },\n      ],\n    }).compile();\n\n    service = module.get<TherapistApplicationService>(\n      TherapistApplicationService,\n    );\n    prismaService = module.get(PrismaService);\n    emailService = module.get(EmailService);\n\n    // Mock fs operations\n    (fs.existsSync as jest.Mock).mockReturnValue(false);\n    (fs.mkdirSync as jest.Mock).mockReturnValue(undefined);\n    (fs.writeFileSync as jest.Mock).mockReturnValue(undefined);\n    (path.join as jest.Mock).mockImplementation((...args) => args.join('/'));\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('createApplication', () => {\n    beforeEach(() => {\n      prismaService.therapist.findUnique.mockResolvedValue(null);\n      prismaService.user.findUnique.mockResolvedValue(mockUser);\n      prismaService.therapist.create.mockResolvedValue(\n        mockTherapistApplication,\n      );\n    });\n\n    it('should create application successfully for authenticated user', async () => {\n      const result = await service.createApplication(mockApplicationDto);\n\n      expect(prismaService.therapist.findUnique).toHaveBeenCalledWith({\n        where: { userId: mockApplicationDto.userId },\n      });\n      expect(prismaService.user.findUnique).toHaveBeenCalledWith({\n        where: { id: mockApplicationDto.userId },\n      });\n      expect(prismaService.therapist.create).toHaveBeenCalled();\n      expect(result).toEqual(mockTherapistApplication);\n    });\n\n    it('should create application for public user with temp ID', async () => {\n      const publicApplicationDto = {\n        ...mockApplicationDto,\n        userId: 'temp_12345',\n      };\n\n      prismaService.therapist.findFirst.mockResolvedValue(null);\n      prismaService.user.create.mockResolvedValue(mockUser);\n\n      await service.createApplication(publicApplicationDto);\n\n      expect(prismaService.therapist.findFirst).toHaveBeenCalledWith({\n        where: {\n          OR: [\n            { user: { email: publicApplicationDto.email } },\n            {\n              userId: {\n                contains: publicApplicationDto.email.replace('@', '_at_'),\n              },\n            },\n          ],\n        },\n      });\n      expect(prismaService.user.create).toHaveBeenCalledWith({\n        data: {\n          id: publicApplicationDto.userId,\n          email: publicApplicationDto.email,\n          firstName: publicApplicationDto.firstName,\n          lastName: publicApplicationDto.lastName,\n          role: 'client',\n          isActive: false,\n        },\n      });\n    });\n\n    it('should throw BadRequestException if user already has application', async () => {\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n\n      await expect(\n        service.createApplication(mockApplicationDto),\n      ).rejects.toThrow(\n        new BadRequestException('User already has a therapist application'),\n      );\n    });\n\n    it('should throw NotFoundException if authenticated user not found', async () => {\n      prismaService.user.findUnique.mockResolvedValue(null);\n\n      await expect(\n        service.createApplication(mockApplicationDto),\n      ).rejects.toThrow(new NotFoundException('User not found'));\n    });\n\n    it('should throw BadRequestException if public user email already exists', async () => {\n      const publicApplicationDto = {\n        ...mockApplicationDto,\n        userId: 'temp_12345',\n      };\n\n      prismaService.therapist.findFirst.mockResolvedValue(\n        mockTherapistApplication,\n      );\n\n      await expect(\n        service.createApplication(publicApplicationDto),\n      ).rejects.toThrow(\n        new BadRequestException(\n          'An application with this email already exists',\n        ),\n      );\n    });\n\n    it('should handle missing optional fields', async () => {\n      const minimalDto = {\n        ...mockApplicationDto,\n        hourlyRate: undefined,\n        prcLicenseNumber: undefined,\n        expirationDateOfLicense: undefined,\n      };\n\n      await service.createApplication(minimalDto);\n\n      expect(prismaService.therapist.create).toHaveBeenCalledWith(\n        expect.objectContaining({\n          data: expect.objectContaining({\n            hourlyRate: 0,\n            prcLicenseNumber: '',\n          }),\n        }),\n      );\n    });\n\n    it('should handle database errors during creation', async () => {\n      prismaService.therapist.create.mockRejectedValue(\n        new Error('Database error'),\n      );\n\n      await expect(\n        service.createApplication(mockApplicationDto),\n      ).rejects.toThrow(\n        new BadRequestException('Failed to create application'),\n      );\n    });\n\n    it('should convert date strings to Date objects', async () => {\n      await service.createApplication(mockApplicationDto);\n\n      expect(prismaService.therapist.create).toHaveBeenCalledWith(\n        expect.objectContaining({\n          data: expect.objectContaining({\n            practiceStartDate: expect.any(Date),\n            expirationDateOfLicense: expect.any(Date),\n          }),\n        }),\n      );\n    });\n\n    it('should set default expiration date if not provided', async () => {\n      const applicationWithoutExpiration = {\n        ...mockApplicationDto,\n        expirationDateOfLicense: undefined,\n      };\n\n      await service.createApplication(applicationWithoutExpiration);\n\n      expect(prismaService.therapist.create).toHaveBeenCalledWith(\n        expect.objectContaining({\n          data: expect.objectContaining({\n            expirationDateOfLicense: expect.any(Date),\n          }),\n        }),\n      );\n    });\n\n    it('should convert boolean privateConfidentialSpace to string', async () => {\n      await service.createApplication(mockApplicationDto);\n\n      expect(prismaService.therapist.create).toHaveBeenCalledWith(\n        expect.objectContaining({\n          data: expect.objectContaining({\n            privateConfidentialSpace: 'yes',\n          }),\n        }),\n      );\n    });\n\n    it('should set default values for required fields', async () => {\n      await service.createApplication(mockApplicationDto);\n\n      expect(prismaService.therapist.create).toHaveBeenCalledWith(\n        expect.objectContaining({\n          data: expect.objectContaining({\n            status: 'pending',\n            licenseVerified: false,\n            acceptsInsurance: false,\n            acceptedInsuranceTypes: [],\n            specialCertifications: [],\n            illnessSpecializations: [],\n            treatmentSuccessRates: {},\n            preferredSessionLength: [30, 45, 60],\n          }),\n        }),\n      );\n    });\n  });\n\n  describe('getAllApplications', () => {\n    const mockApplicationsList = [mockTherapistApplication];\n\n    beforeEach(() => {\n      prismaService.therapist.findMany.mockResolvedValue(mockApplicationsList);\n      prismaService.therapist.count.mockResolvedValue(1);\n      jest.spyOn(service, 'getApplicationFiles').mockResolvedValue([\n        {\n          id: 'file-123',\n          fileName: 'license.pdf',\n          fileUrl: '/api/files/serve/file-123',\n          uploadedAt: '2024-01-15T00:00:00.000Z',\n        },\n      ]);\n    });\n\n    it('should get all applications with pagination', async () => {\n      const options = { page: 1, limit: 10 };\n\n      const result = await service.getAllApplications(options);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith({\n        where: {},\n        include: { user: true },\n        skip: 0,\n        take: 10,\n        orderBy: { submissionDate: 'desc' },\n      });\n      expect(prismaService.therapist.count).toHaveBeenCalledWith({ where: {} });\n      expect(result).toEqual({\n        applications: expect.any(Array),\n        totalCount: 1,\n        page: 1,\n        totalPages: 1,\n      });\n    });\n\n    it('should filter applications by status', async () => {\n      const options = { status: 'approved', page: 1, limit: 10 };\n\n      await service.getAllApplications(options);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith({\n        where: { status: 'approved' },\n        include: { user: true },\n        skip: 0,\n        take: 10,\n        orderBy: { submissionDate: 'desc' },\n      });\n    });\n\n    it('should calculate pagination correctly', async () => {\n      prismaService.therapist.count.mockResolvedValue(25);\n      const options = { page: 3, limit: 10 };\n\n      const result = await service.getAllApplications(options);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          skip: 20,\n          take: 10,\n        }),\n      );\n      expect(result.totalPages).toBe(3);\n    });\n\n    it('should transform applications to response format', async () => {\n      const options = { page: 1, limit: 10 };\n\n      const result = await service.getAllApplications(options);\n\n      expect(result.applications[0]).toEqual(\n        expect.objectContaining({\n          id: mockTherapistApplication.userId,\n          status: mockTherapistApplication.status,\n          submissionDate: expect.any(String),\n          firstName: mockUser.firstName,\n          lastName: mockUser.lastName,\n          email: mockUser.email,\n          files: expect.any(Array),\n        }),\n      );\n    });\n\n    it('should handle empty user names', async () => {\n      const applicationWithNullNames = {\n        ...mockTherapistApplication,\n        user: { ...mockUser, firstName: null, lastName: null },\n      };\n      prismaService.therapist.findMany.mockResolvedValue([\n        applicationWithNullNames,\n      ]);\n\n      const result = await service.getAllApplications({ page: 1, limit: 10 });\n\n      expect(result.applications[0].firstName).toBe('');\n      expect(result.applications[0].lastName).toBe('');\n    });\n\n    it('should convert boolean values to strings in response', async () => {\n      const result = await service.getAllApplications({ page: 1, limit: 10 });\n\n      expect(result.applications[0].providedOnlineTherapyBefore).toBe('yes');\n      expect(result.applications[0].comfortableUsingVideoConferencing).toBe(\n        'yes',\n      );\n    });\n\n    it('should handle hourly rate conversion', async () => {\n      const result = await service.getAllApplications({ page: 1, limit: 10 });\n\n      expect(typeof result.applications[0].hourlyRate).toBe('number');\n    });\n  });\n\n  describe('getApplicationById', () => {\n    beforeEach(() => {\n      jest.spyOn(service, 'getApplicationFiles').mockResolvedValue([]);\n    });\n\n    it('should get application by ID successfully', async () => {\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n\n      const result = await service.getApplicationById('user-123');\n\n      expect(prismaService.therapist.findUnique).toHaveBeenCalledWith({\n        where: { userId: 'user-123' },\n        include: { user: true },\n      });\n      expect(result).toEqual(\n        expect.objectContaining({\n          id: 'user-123',\n          email: mockUser.email,\n        }),\n      );\n    });\n\n    it('should return null if application not found', async () => {\n      prismaService.therapist.findUnique.mockResolvedValue(null);\n\n      const result = await service.getApplicationById('nonexistent');\n\n      expect(result).toBeNull();\n    });\n\n    it('should include application files', async () => {\n      const mockFiles = [\n        {\n          id: 'file-123',\n          fileName: 'license.pdf',\n          fileUrl: '/api/files/serve/file-123',\n          uploadedAt: '2024-01-15T00:00:00.000Z',\n        },\n      ];\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      jest.spyOn(service, 'getApplicationFiles').mockResolvedValue(mockFiles);\n\n      const result = await service.getApplicationById('user-123');\n\n      expect(service.getApplicationFiles).toHaveBeenCalledWith('user-123');\n      expect(result?.files).toEqual(mockFiles);\n    });\n  });\n\n  describe('updateApplicationStatus', () => {\n    beforeEach(() => {\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.therapist.update.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      emailService.sendTherapistWelcomeEmail.mockResolvedValue(undefined);\n      emailService.sendTherapistRejectionEmail.mockResolvedValue(undefined);\n    });\n\n    it('should update application status successfully', async () => {\n      const updateData = { status: 'pending' as const };\n\n      const result = await service.updateApplicationStatus(\n        'user-123',\n        updateData,\n      );\n\n      expect(prismaService.therapist.update).toHaveBeenCalledWith({\n        where: { userId: 'user-123' },\n        data: {\n          status: 'pending',\n          processingDate: expect.any(Date),\n        },\n      });\n      expect(result).toEqual({\n        success: true,\n        message: 'Application pending successfully',\n      });\n    });\n\n    it('should throw NotFoundException if application not found', async () => {\n      prismaService.therapist.findUnique.mockResolvedValue(null);\n\n      await expect(\n        service.updateApplicationStatus('nonexistent', { status: 'approved' }),\n      ).rejects.toThrow(new NotFoundException('Application not found'));\n    });\n\n    it('should handle approval status with credentials generation', async () => {\n      const updateData = { status: 'approved' as const };\n\n      const result = await service.updateApplicationStatus(\n        'user-123',\n        updateData,\n      );\n\n      expect(result).toEqual({\n        success: true,\n        message:\n          'Application approved successfully. Therapist account credentials generated.',\n        credentials: {\n          email: mockUser.email,\n          password: expect.any(String),\n        },\n      });\n      expect(emailService.sendTherapistWelcomeEmail).toHaveBeenCalledWith(\n        mockUser.email,\n        'John Doe',\n        expect.objectContaining({\n          email: mockUser.email,\n          password: expect.any(String),\n        }),\n      );\n    });\n\n    it('should handle rejection status with admin notes', async () => {\n      const updateData = {\n        status: 'rejected' as const,\n        adminNotes: 'Incomplete documentation',\n      };\n\n      const result = await service.updateApplicationStatus(\n        'user-123',\n        updateData,\n      );\n\n      expect(result.success).toBe(true);\n      expect(emailService.sendTherapistRejectionEmail).toHaveBeenCalledWith(\n        mockUser.email,\n        'John Doe',\n        'Incomplete documentation',\n      );\n    });\n\n    it('should continue if email sending fails', async () => {\n      emailService.sendTherapistWelcomeEmail.mockRejectedValue(\n        new Error('Email error'),\n      );\n      const updateData = { status: 'approved' as const };\n\n      const result = await service.updateApplicationStatus(\n        'user-123',\n        updateData,\n      );\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle user with missing names', async () => {\n      const applicationWithNullNames = {\n        ...mockTherapistApplication,\n        user: { ...mockUser, firstName: null, lastName: null },\n      };\n      prismaService.therapist.findUnique.mockResolvedValue(\n        applicationWithNullNames,\n      );\n\n      const updateData = { status: 'approved' as const };\n\n      await service.updateApplicationStatus('user-123', updateData);\n\n      expect(emailService.sendTherapistWelcomeEmail).toHaveBeenCalledWith(\n        mockUser.email,\n        'Therapist',\n        expect.any(Object),\n      );\n    });\n\n    it('should handle database errors during update', async () => {\n      prismaService.therapist.update.mockRejectedValue(\n        new Error('Database error'),\n      );\n\n      await expect(\n        service.updateApplicationStatus('user-123', { status: 'approved' }),\n      ).rejects.toThrow(\n        new BadRequestException('Failed to update application status'),\n      );\n    });\n  });\n\n  describe('uploadDocuments', () => {\n    beforeEach(() => {\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.file.create.mockResolvedValue(mockFileRecord);\n      prismaService.fileAttachment.create.mockResolvedValue(mockFileAttachment);\n    });\n\n    it('should upload documents successfully', async () => {\n      const files = [mockFile];\n      const fileTypeMap = { 'license.pdf': 'license' };\n\n      const result = await service.uploadDocuments(\n        'user-123',\n        files,\n        fileTypeMap,\n      );\n\n      expect(prismaService.therapist.findUnique).toHaveBeenCalledWith({\n        where: { userId: 'user-123' },\n      });\n      expect(fs.mkdirSync).toHaveBeenCalled();\n      expect(fs.writeFileSync).toHaveBeenCalled();\n      expect(prismaService.file.create).toHaveBeenCalledWith({\n        data: {\n          filename: mockFile.originalname,\n          displayName: mockFile.originalname,\n          mimeType: mockFile.mimetype,\n          size: mockFile.size,\n          storagePath: expect.stringContaining('uploads/therapist-documents/'),\n          uploadedBy: 'user-123',\n          status: FileStatus.UPLOADED,\n        },\n      });\n      expect(result).toEqual([\n        {\n          id: mockFileRecord.id,\n          fileName: mockFile.originalname,\n          url: `/api/files/serve/${mockFileRecord.id}`,\n        },\n      ]);\n    });\n\n    it('should throw NotFoundException if application not found', async () => {\n      prismaService.therapist.findUnique.mockResolvedValue(null);\n\n      await expect(\n        service.uploadDocuments('nonexistent', [mockFile]),\n      ).rejects.toThrow(\n        new NotFoundException('Therapist application not found'),\n      );\n    });\n\n    it('should create uploads directory if it does not exist', async () => {\n      await service.uploadDocuments('user-123', [mockFile]);\n\n      expect(fs.existsSync).toHaveBeenCalled();\n      expect(fs.mkdirSync).toHaveBeenCalledWith(\n        expect.stringContaining('uploads/therapist-documents'),\n        { recursive: true },\n      );\n    });\n\n    it('should map file types to attachment purposes', async () => {\n      const fileTypeMap = { 'license.pdf': 'license' };\n\n      await service.uploadDocuments('user-123', [mockFile], fileTypeMap);\n\n      expect(prismaService.fileAttachment.create).toHaveBeenCalledWith({\n        data: {\n          fileId: mockFileRecord.id,\n          entityType: AttachmentEntityType.THERAPIST_APPLICATION,\n          entityId: 'user-123',\n          purpose: AttachmentPurpose.LICENSE,\n        },\n      });\n    });\n\n    it('should continue uploading other files if one fails', async () => {\n      const files = [\n        mockFile,\n        { ...mockFile, originalname: 'certificate.pdf' },\n      ];\n      prismaService.file.create\n        .mockRejectedValueOnce(new Error('File error'))\n        .mockResolvedValueOnce(mockFileRecord);\n\n      const result = await service.uploadDocuments('user-123', files);\n\n      expect(result).toHaveLength(1);\n      expect(prismaService.file.create).toHaveBeenCalledTimes(2);\n    });\n\n    it('should handle default file type mapping', async () => {\n      await service.uploadDocuments('user-123', [mockFile]);\n\n      expect(prismaService.fileAttachment.create).toHaveBeenCalledWith({\n        data: expect.objectContaining({\n          purpose: AttachmentPurpose.DOCUMENT, // Default purpose\n        }),\n      });\n    });\n  });\n\n  describe('getApplicationFiles', () => {\n    beforeEach(() => {\n      prismaService.fileAttachment.findMany.mockResolvedValue([\n        mockFileAttachment,\n      ]);\n    });\n\n    it('should get application files successfully', async () => {\n      const result = await service.getApplicationFiles('user-123');\n\n      expect(prismaService.fileAttachment.findMany).toHaveBeenCalledWith({\n        where: {\n          entityType: AttachmentEntityType.THERAPIST_APPLICATION,\n          entityId: 'user-123',\n        },\n        include: { file: true },\n        orderBy: { createdAt: 'desc' },\n      });\n      expect(result).toEqual([\n        {\n          id: mockFileRecord.id,\n          fileName: mockFileRecord.filename,\n          fileUrl: `/api/files/serve/${mockFileRecord.id}`,\n          uploadedAt: mockFileRecord.createdAt.toISOString(),\n        },\n      ]);\n    });\n\n    it('should return empty array if no files found', async () => {\n      prismaService.fileAttachment.findMany.mockResolvedValue([]);\n\n      const result = await service.getApplicationFiles('user-123');\n\n      expect(result).toEqual([]);\n    });\n\n    it('should order files by creation date descending', async () => {\n      await service.getApplicationFiles('user-123');\n\n      expect(prismaService.fileAttachment.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          orderBy: { createdAt: 'desc' },\n        }),\n      );\n    });\n  });\n\n  describe('createApplicationWithDocuments', () => {\n    beforeEach(() => {\n      prismaService.$transaction.mockImplementation((callback) =>\n        callback(prismaService),\n      );\n      prismaService.therapist.findUnique.mockResolvedValue(null);\n      prismaService.user.findUnique.mockResolvedValue(mockUser);\n      prismaService.therapist.create.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.file.create.mockResolvedValue(mockFileRecord);\n      prismaService.fileAttachment.create.mockResolvedValue(mockFileAttachment);\n    });\n\n    it('should create application with documents in transaction', async () => {\n      const files = [mockFile];\n      const fileTypeMap = { 'license.pdf': 'license' };\n\n      const result = await service.createApplicationWithDocuments(\n        mockApplicationDto,\n        files,\n        fileTypeMap,\n      );\n\n      expect(prismaService.$transaction).toHaveBeenCalled();\n      expect(result).toEqual({\n        application: mockTherapistApplication,\n        uploadedFiles: [\n          {\n            id: mockFileRecord.id,\n            fileName: mockFile.originalname,\n            url: `/api/files/serve/${mockFileRecord.id}`,\n          },\n        ],\n      });\n    });\n\n    it('should create application without files', async () => {\n      const result = await service.createApplicationWithDocuments(\n        mockApplicationDto,\n        [],\n      );\n\n      expect(result).toEqual({\n        application: mockTherapistApplication,\n        uploadedFiles: [],\n      });\n    });\n\n    it('should handle file upload errors in transaction', async () => {\n      const files = [mockFile];\n      prismaService.file.create.mockRejectedValue(\n        new Error('File upload error'),\n      );\n\n      await expect(\n        service.createApplicationWithDocuments(mockApplicationDto, files),\n      ).rejects.toThrow(\n        new BadRequestException('Failed to upload file: license.pdf'),\n      );\n    });\n\n    it('should validate application data before creating user', async () => {\n      const publicApplicationDto = {\n        ...mockApplicationDto,\n        userId: 'temp_12345',\n      };\n\n      prismaService.therapist.findFirst.mockResolvedValue(null);\n      prismaService.user.create.mockResolvedValue(mockUser);\n\n      await service.createApplicationWithDocuments(publicApplicationDto, []);\n\n      expect(prismaService.user.create).toHaveBeenCalledWith({\n        data: {\n          id: publicApplicationDto.userId,\n          email: publicApplicationDto.email,\n          firstName: publicApplicationDto.firstName,\n          lastName: publicApplicationDto.lastName,\n          role: 'client',\n          isActive: false,\n        },\n      });\n    });\n\n    it('should rollback transaction if application creation fails', async () => {\n      prismaService.therapist.create.mockRejectedValue(\n        new Error('Application error'),\n      );\n\n      await expect(\n        service.createApplicationWithDocuments(mockApplicationDto, []),\n      ).rejects.toThrow('Application error');\n    });\n  });\n\n  describe('Edge cases and error handling', () => {\n    it('should handle malformed application data', async () => {\n      const malformedData = {\n        ...mockApplicationDto,\n        practiceStartDate: 'invalid-date',\n        hourlyRate: 'not-a-number',\n      } as any;\n\n      prismaService.therapist.findUnique.mockResolvedValue(null);\n      prismaService.user.findUnique.mockResolvedValue(mockUser);\n      prismaService.therapist.create.mockRejectedValue(\n        new Error('Invalid date format'),\n      );\n\n      // The service should catch database errors and throw BadRequestException\n      await expect(service.createApplication(malformedData)).rejects.toThrow(\n        new BadRequestException('Failed to create application'),\n      );\n    });\n\n    it('should handle email service failures gracefully', async () => {\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.therapist.update.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      emailService.sendTherapistWelcomeEmail.mockRejectedValue(\n        new Error('SMTP error'),\n      );\n\n      const result = await service.updateApplicationStatus('user-123', {\n        status: 'approved',\n      });\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle concurrent application submissions', async () => {\n      prismaService.therapist.findUnique.mockResolvedValue(null);\n      prismaService.user.findUnique.mockResolvedValue(mockUser);\n      prismaService.therapist.create\n        .mockResolvedValueOnce(mockTherapistApplication)\n        .mockRejectedValueOnce(new Error('Unique constraint violation'));\n\n      const promises = [\n        service.createApplication(mockApplicationDto),\n        service.createApplication(mockApplicationDto),\n      ];\n\n      const results = await Promise.allSettled(promises);\n\n      expect(results[0].status).toBe('fulfilled');\n      expect(results[1].status).toBe('rejected');\n    });\n\n    it('should handle file system errors during document upload', async () => {\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      (fs.writeFileSync as jest.Mock).mockImplementation(() => {\n        throw new Error('Disk full');\n      });\n\n      const result = await service.uploadDocuments('user-123', [mockFile]);\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle missing file extensions', async () => {\n      const fileWithoutExtension = {\n        ...mockFile,\n        originalname: 'document',\n      };\n\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.file.create.mockResolvedValue(mockFileRecord);\n\n      const result = await service.uploadDocuments('user-123', [\n        fileWithoutExtension,\n      ]);\n\n      expect(result).toHaveLength(1);\n    });\n\n    it('should handle very large file uploads', async () => {\n      const largeFile = {\n        ...mockFile,\n        size: 100 * 1024 * 1024, // 100MB\n      };\n\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.file.create.mockResolvedValue({\n        ...mockFileRecord,\n        size: largeFile.size,\n      });\n\n      const result = await service.uploadDocuments('user-123', [largeFile]);\n\n      expect(result).toHaveLength(1);\n    });\n  });\n\n  describe('Performance and scaling', () => {\n    it('should handle bulk document uploads efficiently', async () => {\n      const manyFiles = Array(20)\n        .fill(mockFile)\n        .map((file, i) => ({\n          ...file,\n          originalname: `document-${i}.pdf`,\n        }));\n\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.file.create.mockResolvedValue(mockFileRecord);\n      prismaService.fileAttachment.create.mockResolvedValue(mockFileAttachment);\n\n      const result = await service.uploadDocuments('user-123', manyFiles);\n\n      expect(result).toHaveLength(20);\n      expect(prismaService.file.create).toHaveBeenCalledTimes(20);\n    });\n\n    it('should handle pagination for large application lists', async () => {\n      const manyApplications = Array(100).fill(mockTherapistApplication);\n      prismaService.therapist.findMany.mockResolvedValue(manyApplications);\n      prismaService.therapist.count.mockResolvedValue(100);\n      jest.spyOn(service, 'getApplicationFiles').mockResolvedValue([]);\n\n      const result = await service.getAllApplications({ page: 1, limit: 50 });\n\n      expect(result.applications).toHaveLength(100);\n      expect(result.totalPages).toBe(2);\n    });\n\n    it('should handle concurrent status updates', async () => {\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.therapist.update.mockResolvedValue(\n        mockTherapistApplication,\n      );\n\n      const promises = Array(5)\n        .fill(null)\n        .map(() =>\n          service.updateApplicationStatus('user-123', { status: 'pending' }),\n        );\n\n      const results = await Promise.allSettled(promises);\n\n      expect(results.every((result) => result.status === 'fulfilled')).toBe(\n        true,\n      );\n    });\n  });\n\n  describe('Business logic validation', () => {\n    it('should generate secure temporary passwords', async () => {\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.therapist.update.mockResolvedValue(\n        mockTherapistApplication,\n      );\n\n      const result = await service.updateApplicationStatus('user-123', {\n        status: 'approved',\n      });\n\n      expect(result.credentials?.password).toHaveLength(12);\n      expect(result.credentials?.password).toMatch(/[A-Za-z0-9@#$%]/);\n    });\n\n    it('should map file types to appropriate purposes', async () => {\n      const testCases = [\n        { fileType: 'license', expected: AttachmentPurpose.LICENSE },\n        { fileType: 'certificate', expected: AttachmentPurpose.CERTIFICATE },\n        { fileType: 'resume', expected: AttachmentPurpose.DOCUMENT },\n        { fileType: 'unknown', expected: AttachmentPurpose.DOCUMENT },\n      ];\n\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.file.create.mockResolvedValue(mockFileRecord);\n\n      for (const testCase of testCases) {\n        const fileTypeMap = { [mockFile.originalname]: testCase.fileType };\n\n        await service.uploadDocuments('user-123', [mockFile], fileTypeMap);\n\n        expect(prismaService.fileAttachment.create).toHaveBeenCalledWith({\n          data: expect.objectContaining({\n            purpose: testCase.expected,\n          }),\n        });\n\n        jest.clearAllMocks();\n        prismaService.therapist.findUnique.mockResolvedValue(\n          mockTherapistApplication,\n        );\n        prismaService.file.create.mockResolvedValue(mockFileRecord);\n      }\n    });\n\n    it('should validate public application email patterns', async () => {\n      const publicApplicationDto = {\n        ...mockApplicationDto,\n        userId: 'temp_test_example.com',\n        email: 'test@example.com',\n      };\n\n      prismaService.therapist.findFirst.mockResolvedValue(null);\n\n      await service.createApplication(publicApplicationDto);\n\n      expect(prismaService.therapist.findFirst).toHaveBeenCalledWith({\n        where: {\n          OR: [\n            { user: { email: 'test@example.com' } },\n            { userId: { contains: 'test_at_example.com' } },\n          ],\n        },\n      });\n    });\n\n    it('should handle application status transitions correctly', async () => {\n      const statuses = ['pending', 'approved', 'rejected'] as const;\n\n      prismaService.therapist.findUnique.mockResolvedValue(\n        mockTherapistApplication,\n      );\n      prismaService.therapist.update.mockResolvedValue(\n        mockTherapistApplication,\n      );\n\n      for (const status of statuses) {\n        const result = await service.updateApplicationStatus('user-123', {\n          status,\n        });\n\n        expect(result.success).toBe(true);\n        expect(result.message).toContain(status);\n      }\n    });\n  });\n});\n"],"version":3}