3a131d44e20be41c4e4a3627c93b8140
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.SessionsController = void 0;
const common_1 = require("@nestjs/common");
const sessions_service_1 = require("./sessions.service");
const jwt_auth_guard_1 = require("src/auth/guards/jwt-auth.guard");
const current_user_id_decorator_1 = require("src/auth/decorators/current-user-id.decorator");
const current_user_role_decorator_1 = require("src/auth/decorators/current-user-role.decorator");
const zod_validation_pipe_1 = require("src/common/pipes/zod-validation.pipe");
const swagger_1 = require("@nestjs/swagger");
const commons_1 = require("@mentara/commons");
let SessionsController = class SessionsController {
    sessionsService;
    constructor(sessionsService) {
        this.sessionsService = sessionsService;
    }
    createSessionLog(body, userId, userRole) {
        // Ensure the user can create session logs
        if (userRole === 'client' && body.clientId !== userId) {
            body.clientId = userId; // Override with actual user ID
        }
        if (userRole === 'therapist' && body.therapistId !== userId) {
            body.therapistId = userId; // Override with actual therapist ID
        }
        return this.sessionsService.createSessionLog(body);
    }
    findAllSessions(userRole, userId, query) {
        // Filter based on user role
        let { clientId, therapistId } = query;
        if (userRole === 'client') {
            clientId = userId;
        }
        else if (userRole === 'therapist') {
            therapistId = userId;
        }
        return this.sessionsService.findAllSessions(clientId, therapistId, query.status, query.sessionType);
    }
    findSession(id) {
        return this.sessionsService.findSession(id);
    }
    updateSession(id, body) {
        return this.sessionsService.updateSession(id, body);
    }
    endSession(id, body) {
        return this.sessionsService.endSession(id, body.notes, body.quality);
    }
    addSessionActivity(sessionId, body) {
        return this.sessionsService.addSessionActivity(sessionId, body.activityType, body.description, body.duration, body.metadata);
    }
    getSessionActivities(sessionId) {
        return this.sessionsService.getSessionActivities(sessionId);
    }
    logUserActivity(body, userId) {
        return this.sessionsService.logUserActivity(userId, body.action, body.page, body.component, body.metadata, body.sessionId, body.deviceInfo);
    }
    getUserActivities(userId, query) {
        return this.sessionsService.getUserActivities(userId, query.action, query.startDate ? new Date(query.startDate) : undefined, query.endDate ? new Date(query.endDate) : undefined);
    }
    createTherapyProgress(body, userRole, userId) {
        // Ensure therapist can only create progress for their clients
        if (userRole === 'therapist') {
            body.therapistId = userId;
        }
        return this.sessionsService.createTherapyProgress(body);
    }
    getTherapyProgress(userRole, userId, query) {
        // Filter based on user role
        let { clientId, therapistId } = query;
        if (userRole === 'client') {
            clientId = userId;
        }
        else if (userRole === 'therapist') {
            therapistId = userId;
        }
        return this.sessionsService.getTherapyProgress(clientId, therapistId, query.startDate ? new Date(query.startDate) : undefined, query.endDate ? new Date(query.endDate) : undefined);
    }
    getSessionStatistics(userRole, userId, query) {
        // Filter based on user role
        let { clientId, therapistId } = query;
        if (userRole === 'client') {
            clientId = userId;
        }
        else if (userRole === 'therapist') {
            therapistId = userId;
        }
        return this.sessionsService.getSessionStatistics(clientId, therapistId);
    }
};
exports.SessionsController = SessionsController;
__decorate([
    (0, common_1.Post)('logs'),
    (0, swagger_1.ApiOperation)({
        summary: 'Create session log',
        description: 'Create a new therapy session log entry',
    }),
    (0, swagger_1.ApiBody)({
        description: 'Session log data',
        schema: {
            type: 'object',
            required: ['sessionType', 'status'],
            properties: {
                clientId: {
                    type: 'string',
                    description: 'Client ID (auto-filled for client users)',
                },
                therapistId: {
                    type: 'string',
                    description: 'Therapist ID (auto-filled for therapist users)',
                },
                sessionType: {
                    type: 'string',
                    enum: ['video', 'audio', 'chat', 'in_person'],
                },
                status: {
                    type: 'string',
                    enum: ['scheduled', 'active', 'completed', 'cancelled'],
                },
                startTime: { type: 'string', format: 'date-time' },
                endTime: { type: 'string', format: 'date-time' },
                notes: { type: 'string' },
                rating: { type: 'number', minimum: 1, maximum: 5 },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Session log created successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                clientId: { type: 'string' },
                therapistId: { type: 'string' },
                sessionType: { type: 'string' },
                status: { type: 'string' },
                startTime: { type: 'string', format: 'date-time' },
                createdAt: { type: 'string', format: 'date-time' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'Invalid session data' }),
    __param(0, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(commons_1.CreateSessionLogDtoSchema))),
    __param(1, (0, current_user_id_decorator_1.CurrentUserId)()),
    __param(2, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, String, String]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "createSessionLog", null);
__decorate([
    (0, common_1.Get)('logs'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get session logs',
        description: 'Retrieve session logs with optional filtering. Results are automatically filtered by user role.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'clientId',
        required: false,
        description: 'Filter by client ID (admin/therapist only)',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'therapistId',
        required: false,
        description: 'Filter by therapist ID (admin/client only)',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'status',
        required: false,
        description: 'Filter by session status',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'sessionType',
        required: false,
        description: 'Filter by session type',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Session logs retrieved successfully',
        schema: {
            type: 'array',
            items: {
                type: 'object',
                properties: {
                    id: { type: 'string' },
                    clientId: { type: 'string' },
                    therapistId: { type: 'string' },
                    sessionType: { type: 'string' },
                    status: { type: 'string' },
                    startTime: { type: 'string', format: 'date-time' },
                    endTime: { type: 'string', format: 'date-time', nullable: true },
                    duration: { type: 'number', nullable: true },
                    createdAt: { type: 'string', format: 'date-time' },
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, current_user_id_decorator_1.CurrentUserId)()),
    __param(2, (0, common_1.Query)(new zod_validation_pipe_1.ZodValidationPipe(commons_1.FindSessionsQueryDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Object]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "findAllSessions", null);
__decorate([
    (0, common_1.Get)('logs/:id'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get session log by ID',
        description: 'Retrieve detailed information about a specific session log',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Session log ID' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Session log retrieved successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                clientId: { type: 'string' },
                therapistId: { type: 'string' },
                sessionType: { type: 'string' },
                status: { type: 'string' },
                startTime: { type: 'string', format: 'date-time' },
                endTime: { type: 'string', format: 'date-time', nullable: true },
                duration: { type: 'number', nullable: true },
                notes: { type: 'string', nullable: true },
                rating: { type: 'number', nullable: true },
                activities: { type: 'array', items: { type: 'object' } },
                createdAt: { type: 'string', format: 'date-time' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Session log not found' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "findSession", null);
__decorate([
    (0, common_1.Patch)('logs/:id'),
    (0, swagger_1.ApiOperation)({
        summary: 'Update session log',
        description: 'Update an existing session log with new information',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Session log ID' }),
    (0, swagger_1.ApiBody)({
        description: 'Updated session data',
        schema: {
            type: 'object',
            properties: {
                status: {
                    type: 'string',
                    enum: ['scheduled', 'active', 'completed', 'cancelled'],
                },
                endTime: { type: 'string', format: 'date-time' },
                notes: { type: 'string' },
                rating: { type: 'number', minimum: 1, maximum: 5 },
                quality: { type: 'number', minimum: 1, maximum: 5 },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Session log updated successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                status: { type: 'string' },
                updatedAt: { type: 'string', format: 'date-time' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Session log not found' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(commons_1.UpdateSessionLogDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "updateSession", null);
__decorate([
    (0, common_1.Post)('logs/:id/end'),
    (0, swagger_1.ApiOperation)({
        summary: 'End session',
        description: 'Mark a session as completed and add final notes and quality rating',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Session log ID' }),
    (0, swagger_1.ApiBody)({
        description: 'Session completion data',
        schema: {
            type: 'object',
            properties: {
                notes: { type: 'string', description: 'Final session notes' },
                quality: {
                    type: 'number',
                    minimum: 1,
                    maximum: 5,
                    description: 'Session quality rating',
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Session ended successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                status: { type: 'string' },
                endTime: { type: 'string', format: 'date-time' },
                duration: { type: 'number' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Session log not found' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(commons_1.EndSessionDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "endSession", null);
__decorate([
    (0, common_1.Post)('logs/:id/activities'),
    (0, swagger_1.ApiOperation)({
        summary: 'Add session activity',
        description: 'Add an activity or event to a session log for detailed tracking',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Session log ID' }),
    (0, swagger_1.ApiBody)({
        description: 'Activity data',
        schema: {
            type: 'object',
            required: ['activityType'],
            properties: {
                activityType: {
                    type: 'string',
                    enum: ['discussion', 'exercise', 'assessment', 'break', 'other'],
                },
                description: { type: 'string' },
                duration: { type: 'number', description: 'Duration in minutes' },
                metadata: {
                    type: 'object',
                    description: 'Additional activity metadata',
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Activity added successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                sessionId: { type: 'string' },
                activityType: { type: 'string' },
                description: { type: 'string' },
                duration: { type: 'number' },
                createdAt: { type: 'string', format: 'date-time' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Session log not found' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(commons_1.AddSessionActivityDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "addSessionActivity", null);
__decorate([
    (0, common_1.Get)('logs/:id/activities'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get session activities',
        description: 'Retrieve all activities and events for a specific session',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Session log ID' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Session activities retrieved successfully',
        schema: {
            type: 'array',
            items: {
                type: 'object',
                properties: {
                    id: { type: 'string' },
                    activityType: { type: 'string' },
                    description: { type: 'string' },
                    duration: { type: 'number' },
                    metadata: { type: 'object' },
                    createdAt: { type: 'string', format: 'date-time' },
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Session log not found' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "getSessionActivities", null);
__decorate([
    (0, common_1.Post)('user-activities'),
    (0, swagger_1.ApiOperation)({
        summary: 'Log user activity',
        description: 'Log user interactions and activities for analytics and session tracking',
    }),
    (0, swagger_1.ApiBody)({
        description: 'User activity data',
        schema: {
            type: 'object',
            required: ['action'],
            properties: {
                action: {
                    type: 'string',
                    enum: [
                        'click',
                        'view',
                        'scroll',
                        'form_submit',
                        'navigation',
                        'other',
                    ],
                },
                page: {
                    type: 'string',
                    description: 'Page or route where action occurred',
                },
                component: { type: 'string', description: 'UI component involved' },
                metadata: { type: 'object', description: 'Additional action metadata' },
                sessionId: { type: 'string', description: 'Associated session ID' },
                deviceInfo: {
                    type: 'object',
                    description: 'Device and browser information',
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'User activity logged successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                userId: { type: 'string' },
                action: { type: 'string' },
                timestamp: { type: 'string', format: 'date-time' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    __param(0, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(commons_1.LogUserActivityDtoSchema))),
    __param(1, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, String]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "logUserActivity", null);
__decorate([
    (0, common_1.Get)('user-activities'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get user activities',
        description: 'Retrieve user activity logs with optional filtering by action type and date range',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'action',
        required: false,
        description: 'Filter by action type',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'startDate',
        required: false,
        description: 'Start date for filtering (ISO string)',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'endDate',
        required: false,
        description: 'End date for filtering (ISO string)',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'User activities retrieved successfully',
        schema: {
            type: 'array',
            items: {
                type: 'object',
                properties: {
                    id: { type: 'string' },
                    action: { type: 'string' },
                    page: { type: 'string' },
                    component: { type: 'string' },
                    metadata: { type: 'object' },
                    sessionId: { type: 'string', nullable: true },
                    timestamp: { type: 'string', format: 'date-time' },
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __param(1, (0, common_1.Query)(new zod_validation_pipe_1.ZodValidationPipe(commons_1.GetUserActivitiesQueryDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "getUserActivities", null);
__decorate([
    (0, common_1.Post)('therapy-progress'),
    (0, swagger_1.ApiOperation)({
        summary: 'Create therapy progress entry',
        description: 'Create a therapy progress entry to track client improvements and milestones',
    }),
    (0, swagger_1.ApiBody)({
        description: 'Therapy progress data',
        schema: {
            type: 'object',
            required: ['clientId', 'progressNotes'],
            properties: {
                clientId: { type: 'string' },
                therapistId: {
                    type: 'string',
                    description: 'Auto-filled for therapist users',
                },
                sessionId: { type: 'string', description: 'Associated session ID' },
                progressNotes: {
                    type: 'string',
                    description: 'Detailed progress notes',
                },
                goalsAchieved: { type: 'array', items: { type: 'string' } },
                newGoals: { type: 'array', items: { type: 'string' } },
                moodRating: { type: 'number', minimum: 1, maximum: 10 },
                progressRating: { type: 'number', minimum: 1, maximum: 10 },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Therapy progress entry created successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                clientId: { type: 'string' },
                therapistId: { type: 'string' },
                progressNotes: { type: 'string' },
                moodRating: { type: 'number' },
                progressRating: { type: 'number' },
                createdAt: { type: 'string', format: 'date-time' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    __param(0, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(commons_1.CreateTherapyProgressDtoSchema))),
    __param(1, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(2, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, String, String]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "createTherapyProgress", null);
__decorate([
    (0, common_1.Get)('therapy-progress'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get therapy progress',
        description: 'Retrieve therapy progress entries with optional filtering. Results are automatically filtered by user role.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'clientId',
        required: false,
        description: 'Filter by client ID (therapist/admin only)',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'therapistId',
        required: false,
        description: 'Filter by therapist ID (client/admin only)',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'startDate',
        required: false,
        description: 'Start date for filtering (ISO string)',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'endDate',
        required: false,
        description: 'End date for filtering (ISO string)',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Therapy progress entries retrieved successfully',
        schema: {
            type: 'array',
            items: {
                type: 'object',
                properties: {
                    id: { type: 'string' },
                    clientId: { type: 'string' },
                    therapistId: { type: 'string' },
                    sessionId: { type: 'string', nullable: true },
                    progressNotes: { type: 'string' },
                    goalsAchieved: { type: 'array', items: { type: 'string' } },
                    newGoals: { type: 'array', items: { type: 'string' } },
                    moodRating: { type: 'number', nullable: true },
                    progressRating: { type: 'number', nullable: true },
                    createdAt: { type: 'string', format: 'date-time' },
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, current_user_id_decorator_1.CurrentUserId)()),
    __param(2, (0, common_1.Query)(new zod_validation_pipe_1.ZodValidationPipe(commons_1.GetTherapyProgressQueryDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Object]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "getTherapyProgress", null);
__decorate([
    (0, common_1.Get)('statistics'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get session statistics',
        description: 'Retrieve session statistics and analytics. Results are automatically filtered by user role.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'clientId',
        required: false,
        description: 'Filter by client ID (therapist/admin only)',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'therapistId',
        required: false,
        description: 'Filter by therapist ID (client/admin only)',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Session statistics retrieved successfully',
        schema: {
            type: 'object',
            properties: {
                totalSessions: { type: 'number' },
                completedSessions: { type: 'number' },
                cancelledSessions: { type: 'number' },
                averageSessionDuration: { type: 'number' },
                averageSessionRating: { type: 'number' },
                sessionsByType: {
                    type: 'object',
                    properties: {
                        video: { type: 'number' },
                        audio: { type: 'number' },
                        chat: { type: 'number' },
                        in_person: { type: 'number' },
                    },
                },
                progressTrend: {
                    type: 'object',
                    properties: {
                        averageMoodRating: { type: 'number' },
                        averageProgressRating: { type: 'number' },
                        improvementPercentage: { type: 'number' },
                    },
                },
                dateRange: {
                    type: 'object',
                    properties: {
                        startDate: { type: 'string', format: 'date-time' },
                        endDate: { type: 'string', format: 'date-time' },
                    },
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, current_user_id_decorator_1.CurrentUserId)()),
    __param(2, (0, common_1.Query)(new zod_validation_pipe_1.ZodValidationPipe(commons_1.GetSessionStatisticsQueryDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Object]),
    __metadata("design:returntype", void 0)
], SessionsController.prototype, "getSessionStatistics", null);
exports.SessionsController = SessionsController = __decorate([
    (0, swagger_1.ApiTags)('sessions'),
    (0, swagger_1.ApiBearerAuth)('JWT-auth'),
    (0, common_1.Controller)('sessions'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __metadata("design:paramtypes", [typeof (_a = typeof sessions_service_1.SessionsService !== "undefined" && sessions_service_1.SessionsService) === "function" ? _a : Object])
], SessionsController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL3Nlc3Npb25zL3Nlc3Npb25zLmNvbnRyb2xsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDJDQVN3QjtBQUN4Qix5REFBcUQ7QUFDckQsbUVBQThEO0FBQzlELDZGQUE4RTtBQUM5RSxpR0FBa0Y7QUFDbEYsOEVBQXlFO0FBQ3pFLDZDQVF5QjtBQUN6Qiw4Q0FxQjBCO0FBWW5CLElBQU0sa0JBQWtCLEdBQXhCLE1BQU0sa0JBQWtCO0lBQ0E7SUFBN0IsWUFBNkIsZUFBZ0M7UUFBaEMsb0JBQWUsR0FBZixlQUFlLENBQWlCO0lBQUcsQ0FBQztJQXNEakUsZ0JBQWdCLENBRWQsSUFBeUIsRUFDUixNQUFjLEVBQ1osUUFBZ0I7UUFFbkMsMENBQTBDO1FBQzFDLElBQUksUUFBUSxLQUFLLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLE1BQU0sRUFBRSxDQUFDO1lBQ3RELElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLENBQUMsK0JBQStCO1FBQ3pELENBQUM7UUFDRCxJQUFJLFFBQVEsS0FBSyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsS0FBSyxNQUFNLEVBQUUsQ0FBQztZQUM1RCxJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQyxDQUFDLG9DQUFvQztRQUNqRSxDQUFDO1FBRUQsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFrREQsZUFBZSxDQUNNLFFBQWdCLEVBQ2xCLE1BQWMsRUFFL0IsS0FBMkI7UUFFM0IsNEJBQTRCO1FBQzVCLElBQUksRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLEdBQUcsS0FBSyxDQUFDO1FBQ3RDLElBQUksUUFBUSxLQUFLLFFBQVEsRUFBRSxDQUFDO1lBQzFCLFFBQVEsR0FBRyxNQUFNLENBQUM7UUFDcEIsQ0FBQzthQUFNLElBQUks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RTtxQkFDOUI7aUJBQ0Y7Z0JBQ0QsYUFBYSxFQUFFO29CQUNiLElBQUksRUFBRSxRQUFRO29CQUNkLFVBQVUsRUFBRTt3QkFDVixpQkFBaUIsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUU7d0JBQ3JDLHFCQUFxQixFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRTt3QkFDekMscUJBQXFCLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFO3FCQUMxQztpQkFDRjtnQkFDRCxTQUFTLEVBQUU7b0JBQ1QsSUFBSSxFQUFFLFFBQVE7b0JBQ2QsVUFBVSxFQUFFO3dCQUNWLFNBQVMsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRTt3QkFDbEQsT0FBTyxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFO3FCQUNqRDtpQkFDRjthQUNGO1NBQ0Y7S0FDRixDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLENBQUM7SUFFdkQsV0FBQSxJQUFBLDZDQUFlLEdBQUUsQ0FBQTtJQUNqQixXQUFBLElBQUEseUNBQWEsR0FBRSxDQUFBO0lBQ2YsV0FBQSxJQUFBLGNBQUssRUFBQyxJQUFJLHVDQUFpQixDQUFDLDRDQUFrQyxDQUFDLENBQUMsQ0FBQTs7Ozs4REFZbEU7NkJBaHFCVSxrQkFBa0I7SUFKOUIsSUFBQSxpQkFBTyxFQUFDLFVBQVUsQ0FBQztJQUNuQixJQUFBLHVCQUFhLEVBQUMsVUFBVSxDQUFDO0lBQ3pCLElBQUEsbUJBQVUsRUFBQyxVQUFVLENBQUM7SUFDdEIsSUFBQSxrQkFBUyxFQUFDLDZCQUFZLENBQUM7eURBRXdCLGtDQUFlLG9CQUFmLGtDQUFlO0dBRGxELGtCQUFrQixDQWlxQjlCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy9zZXNzaW9ucy9zZXNzaW9ucy5jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbnRyb2xsZXIsXG4gIEdldCxcbiAgUG9zdCxcbiAgQm9keSxcbiAgUGF0Y2gsXG4gIFBhcmFtLFxuICBRdWVyeSxcbiAgVXNlR3VhcmRzLFxufSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBTZXNzaW9uc1NlcnZpY2UgfSBmcm9tICcuL3Nlc3Npb25zLnNlcnZpY2UnO1xuaW1wb3J0IHsgSnd0QXV0aEd1YXJkIH0gZnJvbSAnc3JjL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IEN1cnJlbnRVc2VySWQgfSBmcm9tICdzcmMvYXV0aC9kZWNvcmF0b3JzL2N1cnJlbnQtdXNlci1pZC5kZWNvcmF0b3InO1xuaW1wb3J0IHsgQ3VycmVudFVzZXJSb2xlIH0gZnJvbSAnc3JjL2F1dGgvZGVjb3JhdG9ycy9jdXJyZW50LXVzZXItcm9sZS5kZWNvcmF0b3InO1xuaW1wb3J0IHsgWm9kVmFsaWRhdGlvblBpcGUgfSBmcm9tICdzcmMvY29tbW9uL3BpcGVzL3pvZC12YWxpZGF0aW9uLnBpcGUnO1xuaW1wb3J0IHtcbiAgQXBpVGFncyxcbiAgQXBpT3BlcmF0aW9uLFxuICBBcGlSZXNwb25zZSxcbiAgQXBpQm9keSxcbiAgQXBpQmVhcmVyQXV0aCxcbiAgQXBpUGFyYW0sXG4gIEFwaVF1ZXJ5LFxufSBmcm9tICdAbmVzdGpzL3N3YWdnZXInO1xuaW1wb3J0IHtcbiAgQ3JlYXRlU2Vzc2lvbkxvZ0R0b1NjaGVtYSxcbiAgRmluZFNlc3Npb25zUXVlcnlEdG9TY2hlbWEsXG4gIFVwZGF0ZVNlc3Npb25Mb2dEdG9TY2hlbWEsXG4gIEVuZFNlc3Npb25EdG9TY2hlbWEsXG4gIEFkZFNlc3Npb25BY3Rpdml0eUR0b1NjaGVtYSxcbiAgTG9nVXNlckFjdGl2aXR5RHRvU2NoZW1hLFxuICBHZXRVc2VyQWN0aXZpdGllc1F1ZXJ5RHRvU2NoZW1hLFxuICBDcmVhdGVUaGVyYXB5UHJvZ3Jlc3NEdG9TY2hlbWEsXG4gIEdldFRoZXJhcHlQcm9ncmVzc1F1ZXJ5RHRvU2NoZW1hLFxuICBHZXRTZXNzaW9uU3RhdGlzdGljc1F1ZXJ5RHRvU2NoZW1hLFxuICB0eXBlIENyZWF0ZVNlc3Npb25Mb2dEdG8sXG4gIHR5cGUgRmluZFNlc3Npb25zUXVlcnlEdG8sXG4gIHR5cGUgVXBkYXRlU2Vzc2lvbkxvZ0R0byxcbiAgdHlwZSBFbmRTZXNzaW9uRHRvLFxuICB0eXBlIEFkZFNlc3Npb25BY3Rpdml0eUR0byxcbiAgdHlwZSBMb2dVc2VyQWN0aXZpdHlEdG8sXG4gIHR5cGUgR2V0VXNlckFjdGl2aXRpZXNRdWVyeUR0byxcbiAgdHlwZSBDcmVhdGVUaGVyYXB5UHJvZ3Jlc3NEdG8sXG4gIHR5cGUgR2V0VGhlcmFweVByb2dyZXNzUXVlcnlEdG8sXG4gIHR5cGUgR2V0U2Vzc2lvblN0YXRpc3RpY3NRdWVyeUR0byxcbn0gZnJvbSAnQG1lbnRhcmEvY29tbW9ucyc7XG5pbXBvcnQge1xuICBTZXNzaW9uVHlwZSxcbiAgU2Vzc2lvblN0YXR1cyxcbiAgQWN0aXZpdHlUeXBlLFxuICBVc2VyQWN0aW9uVHlwZSxcbn0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG5AQXBpVGFncygnc2Vzc2lvbnMnKVxuQEFwaUJlYXJlckF1dGgoJ0pXVC1hdXRoJylcbkBDb250cm9sbGVyKCdzZXNzaW9ucycpXG5AVXNlR3VhcmRzKEp3dEF1dGhHdWFyZClcbmV4cG9ydCBjbGFzcyBTZXNzaW9uc0NvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHNlc3Npb25zU2VydmljZTogU2Vzc2lvbnNTZXJ2aWNlKSB7fVxuXG4gIEBQb3N0KCdsb2dzJylcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0NyZWF0ZSBzZXNzaW9uIGxvZycsXG4gICAgZGVzY3JpcHRpb246ICdDcmVhdGUgYSBuZXcgdGhlcmFweSBzZXNzaW9uIGxvZyBlbnRyeScsXG4gIH0pXG4gIEBBcGlCb2R5KHtcbiAgICBkZXNjcmlwdGlvbjogJ1Nlc3Npb24gbG9nIGRhdGEnLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICByZXF1aXJlZDogWydzZXNzaW9uVHlwZScsICdzdGF0dXMnXSxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgY2xpZW50SWQ6IHtcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NsaWVudCBJRCAoYXV0by1maWxsZWQgZm9yIGNsaWVudCB1c2VycyknLFxuICAgICAgICB9LFxuICAgICAgICB0aGVyYXBpc3RJZDoge1xuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlcmFwaXN0IElEIChhdXRvLWZpbGxlZCBmb3IgdGhlcmFwaXN0IHVzZXJzKScsXG4gICAgICAgIH0sXG4gICAgICAgIHNlc3Npb25UeXBlOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZW51bTogWyd2aWRlbycsICdhdWRpbycsICdjaGF0JywgJ2luX3BlcnNvbiddLFxuICAgICAgICB9LFxuICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBlbnVtOiBbJ3NjaGVkdWxlZCcsICdhY3RpdmUnLCAnY29tcGxldGVkJywgJ2NhbmNlbGxlZCddLFxuICAgICAgICB9LFxuICAgICAgICBzdGFydFRpbWU6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgICAgZW5kVGltZTogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgICBub3RlczogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICByYXRpbmc6IHsgdHlwZTogJ251bWJlcicsIG1pbmltdW06IDEsIG1heGltdW06IDUgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMSxcbiAgICBkZXNjcmlwdGlvbjogJ1Nlc3Npb24gbG9nIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBjbGllbnRJZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICB0aGVyYXBpc3RJZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBzZXNzaW9uVHlwZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBzdGF0dXM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgc3RhcnRUaW1lOiB7IHR5cGU6ICdzdHJpbmcnLCBmb3JtYXQ6ICdkYXRlLXRpbWUnIH0sXG4gICAgICAgIGNyZWF0ZWRBdDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDAwLCBkZXNjcmlwdGlvbjogJ0ludmFsaWQgc2Vzc2lvbiBkYXRhJyB9KVxuICBjcmVhdGVTZXNzaW9uTG9nKFxuICAgIEBCb2R5KG5ldyBab2RWYWxpZGF0aW9uUGlwZShDcmVhdGVTZXNzaW9uTG9nRHRvU2NoZW1hKSlcbiAgICBib2R5OiBDcmVhdGVTZXNzaW9uTG9nRHRvLFxuICAgIEBDdXJyZW50VXNlcklkKCkgdXNlcklkOiBzdHJpbmcsXG4gICAgQEN1cnJlbnRVc2VyUm9sZSgpIHVzZXJSb2xlOiBzdHJpbmcsXG4gICkge1xuICAgIC8vIEVuc3VyZSB0aGUgdXNlciBjYW4gY3JlYXRlIHNlc3Npb24gbG9nc1xuICAgIGlmICh1c2VyUm9sZSA9PT0gJ2NsaWVudCcgJiYgYm9keS5jbGllbnRJZCAhPT0gdXNlcklkKSB7XG4gICAgICBib2R5LmNsaWVudElkID0gdXNlcklkOyAvLyBPdmVycmlkZSB3aXRoIGFjdHVhbCB1c2VyIElEXG4gICAgfVxuICAgIGlmICh1c2VyUm9sZSA9PT0gJ3RoZXJhcGlzdCcgJiYgYm9keS50aGVyYXBpc3RJZCAhPT0gdXNlcklkKSB7XG4gICAgICBib2R5LnRoZXJhcGlzdElkID0gdXNlcklkOyAvLyBPdmVycmlkZSB3aXRoIGFjdHVhbCB0aGVyYXBpc3QgSURcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uc1NlcnZpY2UuY3JlYXRlU2Vzc2lvbkxvZyhib2R5KTtcbiAgfVxuXG4gIEBHZXQoJ2xvZ3MnKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnR2V0IHNlc3Npb24gbG9ncycsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnUmV0cmlldmUgc2Vzc2lvbiBsb2dzIHdpdGggb3B0aW9uYWwgZmlsdGVyaW5nLiBSZXN1bHRzIGFyZSBhdXRvbWF0aWNhbGx5IGZpbHRlcmVkIGJ5IHVzZXIgcm9sZS4nLFxuICB9KVxuICBAQXBpUXVlcnkoe1xuICAgIG5hbWU6ICdjbGllbnRJZCcsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIGRlc2NyaXB0aW9uOiAnRmlsdGVyIGJ5IGNsaWVudCBJRCAoYWRtaW4vdGhlcmFwaXN0IG9ubHkpJyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAndGhlcmFwaXN0SWQnLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICBkZXNjcmlwdGlvbjogJ0ZpbHRlciBieSB0aGVyYXBpc3QgSUQgKGFkbWluL2NsaWVudCBvbmx5KScsXG4gIH0pXG4gIEBBcGlRdWVyeSh7XG4gICAgbmFtZTogJ3N0YXR1cycsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIGRlc2NyaXB0aW9uOiAnRmlsdGVyIGJ5IHNlc3Npb24gc3RhdHVzJyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAnc2Vzc2lvblR5cGUnLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICBkZXNjcmlwdGlvbjogJ0ZpbHRlciBieSBzZXNzaW9uIHR5cGUnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnU2Vzc2lvbiBsb2dzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgIGl0ZW1zOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICBjbGllbnRJZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgIHRoZXJhcGlzdElkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgc2Vzc2lvblR5cGU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICBzdGF0dXM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICBzdGFydFRpbWU6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgICAgICBlbmRUaW1lOiB7IHR5cGU6ICdzdHJpbmcnLCBmb3JtYXQ6ICdkYXRlLXRpbWUnLCBudWxsYWJsZTogdHJ1ZSB9LFxuICAgICAgICAgIGR1cmF0aW9uOiB7IHR5cGU6ICdudW1iZXInLCBudWxsYWJsZTogdHJ1ZSB9LFxuICAgICAgICAgIGNyZWF0ZWRBdDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIGZpbmRBbGxTZXNzaW9ucyhcbiAgICBAQ3VycmVudFVzZXJSb2xlKCkgdXNlclJvbGU6IHN0cmluZyxcbiAgICBAQ3VycmVudFVzZXJJZCgpIHVzZXJJZDogc3RyaW5nLFxuICAgIEBRdWVyeShuZXcgWm9kVmFsaWRhdGlvblBpcGUoRmluZFNlc3Npb25zUXVlcnlEdG9TY2hlbWEpKVxuICAgIHF1ZXJ5OiBGaW5kU2Vzc2lvbnNRdWVyeUR0byxcbiAgKSB7XG4gICAgLy8gRmlsdGVyIGJhc2VkIG9uIHVzZXIgcm9sZVxuICAgIGxldCB7IGNsaWVudElkLCB0aGVyYXBpc3RJZCB9ID0gcXVlcnk7XG4gICAgaWYgKHVzZXJSb2xlID09PSAnY2xpZW50Jykge1xuICAgICAgY2xpZW50SWQgPSB1c2VySWQ7XG4gICAgfSBlbHNlIGlmICh1c2VyUm9sZSA9PT0gJ3RoZXJhcGlzdCcpIHtcbiAgICAgIHRoZXJhcGlzdElkID0gdXNlcklkO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNlc3Npb25zU2VydmljZS5maW5kQWxsU2Vzc2lvbnMoXG4gICAgICBjbGllbnRJZCxcbiAgICAgIHRoZXJhcGlzdElkLFxuICAgICAgcXVlcnkuc3RhdHVzLFxuICAgICAgcXVlcnkuc2Vzc2lvblR5cGUsXG4gICAgKTtcbiAgfVxuXG4gIEBHZXQoJ2xvZ3MvOmlkJylcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0dldCBzZXNzaW9uIGxvZyBieSBJRCcsXG4gICAgZGVzY3JpcHRpb246ICdSZXRyaWV2ZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIHNlc3Npb24gbG9nJyxcbiAgfSlcbiAgQEFwaVBhcmFtKHsgbmFtZTogJ2lkJywgZGVzY3JpcHRpb246ICdTZXNzaW9uIGxvZyBJRCcgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ1Nlc3Npb24gbG9nIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGlkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGNsaWVudElkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHRoZXJhcGlzdElkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHNlc3Npb25UeXBlOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHN0YXR1czogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBzdGFydFRpbWU6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgICAgZW5kVGltZTogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJywgbnVsbGFibGU6IHRydWUgfSxcbiAgICAgICAgZHVyYXRpb246IHsgdHlwZTogJ251bWJlcicsIG51bGxhYmxlOiB0cnVlIH0sXG4gICAgICAgIG5vdGVzOiB7IHR5cGU6ICdzdHJpbmcnLCBudWxsYWJsZTogdHJ1ZSB9LFxuICAgICAgICByYXRpbmc6IHsgdHlwZTogJ251bWJlcicsIG51bGxhYmxlOiB0cnVlIH0sXG4gICAgICAgIGFjdGl2aXRpZXM6IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHsgdHlwZTogJ29iamVjdCcgfSB9LFxuICAgICAgICBjcmVhdGVkQXQ6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDEsIGRlc2NyaXB0aW9uOiAnVW5hdXRob3JpemVkJyB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwNCwgZGVzY3JpcHRpb246ICdTZXNzaW9uIGxvZyBub3QgZm91bmQnIH0pXG4gIGZpbmRTZXNzaW9uKEBQYXJhbSgnaWQnKSBpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbnNTZXJ2aWNlLmZpbmRTZXNzaW9uKGlkKTtcbiAgfVxuXG4gIEBQYXRjaCgnbG9ncy86aWQnKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnVXBkYXRlIHNlc3Npb24gbG9nJyxcbiAgICBkZXNjcmlwdGlvbjogJ1VwZGF0ZSBhbiBleGlzdGluZyBzZXNzaW9uIGxvZyB3aXRoIG5ldyBpbmZvcm1hdGlvbicsXG4gIH0pXG4gIEBBcGlQYXJhbSh7IG5hbWU6ICdpZCcsIGRlc2NyaXB0aW9uOiAnU2Vzc2lvbiBsb2cgSUQnIH0pXG4gIEBBcGlCb2R5KHtcbiAgICBkZXNjcmlwdGlvbjogJ1VwZGF0ZWQgc2Vzc2lvbiBkYXRhJyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBlbnVtOiBbJ3NjaGVkdWxlZCcsICdhY3RpdmUnLCAnY29tcGxldGVkJywgJ2NhbmNlbGxlZCddLFxuICAgICAgICB9LFxuICAgICAgICBlbmRUaW1lOiB7IHR5cGU6ICdzdHJpbmcnLCBmb3JtYXQ6ICdkYXRlLXRpbWUnIH0sXG4gICAgICAgIG5vdGVzOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHJhdGluZzogeyB0eXBlOiAnbnVtYmVyJywgbWluaW11bTogMSwgbWF4aW11bTogNSB9LFxuICAgICAgICBxdWFsaXR5OiB7IHR5cGU6ICdudW1iZXInLCBtaW5pbXVtOiAxLCBtYXhpbXVtOiA1IH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdTZXNzaW9uIGxvZyB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgc3RhdHVzOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHVwZGF0ZWRBdDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDA0LCBkZXNjcmlwdGlvbjogJ1Nlc3Npb24gbG9nIG5vdCBmb3VuZCcgfSlcbiAgdXBkYXRlU2Vzc2lvbihcbiAgICBAUGFyYW0oJ2lkJykgaWQ6IHN0cmluZyxcbiAgICBAQm9keShuZXcgWm9kVmFsaWRhdGlvblBpcGUoVXBkYXRlU2Vzc2lvbkxvZ0R0b1NjaGVtYSkpXG4gICAgYm9keTogVXBkYXRlU2Vzc2lvbkxvZ0R0byxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbnNTZXJ2aWNlLnVwZGF0ZVNlc3Npb24oaWQsIGJvZHkpO1xuICB9XG5cbiAgQFBvc3QoJ2xvZ3MvOmlkL2VuZCcpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdFbmQgc2Vzc2lvbicsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnTWFyayBhIHNlc3Npb24gYXMgY29tcGxldGVkIGFuZCBhZGQgZmluYWwgbm90ZXMgYW5kIHF1YWxpdHkgcmF0aW5nJyxcbiAgfSlcbiAgQEFwaVBhcmFtKHsgbmFtZTogJ2lkJywgZGVzY3JpcHRpb246ICdTZXNzaW9uIGxvZyBJRCcgfSlcbiAgQEFwaUJvZHkoe1xuICAgIGRlc2NyaXB0aW9uOiAnU2Vzc2lvbiBjb21wbGV0aW9uIGRhdGEnLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIG5vdGVzOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0ZpbmFsIHNlc3Npb24gbm90ZXMnIH0sXG4gICAgICAgIHF1YWxpdHk6IHtcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBtaW5pbXVtOiAxLFxuICAgICAgICAgIG1heGltdW06IDUsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdTZXNzaW9uIHF1YWxpdHkgcmF0aW5nJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ1Nlc3Npb24gZW5kZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBzdGF0dXM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgZW5kVGltZTogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgICBkdXJhdGlvbjogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDA0LCBkZXNjcmlwdGlvbjogJ1Nlc3Npb24gbG9nIG5vdCBmb3VuZCcgfSlcbiAgZW5kU2Vzc2lvbihcbiAgICBAUGFyYW0oJ2lkJykgaWQ6IHN0cmluZyxcbiAgICBAQm9keShuZXcgWm9kVmFsaWRhdGlvblBpcGUoRW5kU2Vzc2lvbkR0b1NjaGVtYSkpIGJvZHk6IEVuZFNlc3Npb25EdG8sXG4gICkge1xuICAgIHJldHVybiB0aGlzLnNlc3Npb25zU2VydmljZS5lbmRTZXNzaW9uKGlkLCBib2R5Lm5vdGVzLCBib2R5LnF1YWxpdHkpO1xuICB9XG5cbiAgQFBvc3QoJ2xvZ3MvOmlkL2FjdGl2aXRpZXMnKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnQWRkIHNlc3Npb24gYWN0aXZpdHknLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ0FkZCBhbiBhY3Rpdml0eSBvciBldmVudCB0byBhIHNlc3Npb24gbG9nIGZvciBkZXRhaWxlZCB0cmFja2luZycsXG4gIH0pXG4gIEBBcGlQYXJhbSh7IG5hbWU6ICdpZCcsIGRlc2NyaXB0aW9uOiAnU2Vzc2lvbiBsb2cgSUQnIH0pXG4gIEBBcGlCb2R5KHtcbiAgICBkZXNjcmlwdGlvbjogJ0FjdGl2aXR5IGRhdGEnLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICByZXF1aXJlZDogWydhY3Rpdml0eVR5cGUnXSxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgYWN0aXZpdHlUeXBlOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZW51bTogWydkaXNjdXNzaW9uJywgJ2V4ZXJjaXNlJywgJ2Fzc2Vzc21lbnQnLCAnYnJlYWsnLCAnb3RoZXInXSxcbiAgICAgICAgfSxcbiAgICAgICAgZGVzY3JpcHRpb246IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgZHVyYXRpb246IHsgdHlwZTogJ251bWJlcicsIGRlc2NyaXB0aW9uOiAnRHVyYXRpb24gaW4gbWludXRlcycgfSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0FkZGl0aW9uYWwgYWN0aXZpdHkgbWV0YWRhdGEnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAxLFxuICAgIGRlc2NyaXB0aW9uOiAnQWN0aXZpdHkgYWRkZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBzZXNzaW9uSWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgYWN0aXZpdHlUeXBlOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGRlc2NyaXB0aW9uOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGR1cmF0aW9uOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgIGNyZWF0ZWRBdDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDA0LCBkZXNjcmlwdGlvbjogJ1Nlc3Npb24gbG9nIG5vdCBmb3VuZCcgfSlcbiAgYWRkU2Vzc2lvbkFjdGl2aXR5KFxuICAgIEBQYXJhbSgnaWQnKSBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICBAQm9keShuZXcgWm9kVmFsaWRhdGlvblBpcGUoQWRkU2Vzc2lvbkFjdGl2aXR5RHRvU2NoZW1hKSlcbiAgICBib2R5OiBBZGRTZXNzaW9uQWN0aXZpdHlEdG8sXG4gICkge1xuICAgIHJldHVybiB0aGlzLnNlc3Npb25zU2VydmljZS5hZGRTZXNzaW9uQWN0aXZpdHkoXG4gICAgICBzZXNzaW9uSWQsXG4gICAgICBib2R5LmFjdGl2aXR5VHlwZSxcbiAgICAgIGJvZHkuZGVzY3JpcHRpb24sXG4gICAgICBib2R5LmR1cmF0aW9uLFxuICAgICAgYm9keS5tZXRhZGF0YSxcbiAgICApO1xuICB9XG5cbiAgQEdldCgnbG9ncy86aWQvYWN0aXZpdGllcycpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdHZXQgc2Vzc2lvbiBhY3Rpdml0aWVzJyxcbiAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlIGFsbCBhY3Rpdml0aWVzIGFuZCBldmVudHMgZm9yIGEgc3BlY2lmaWMgc2Vzc2lvbicsXG4gIH0pXG4gIEBBcGlQYXJhbSh7IG5hbWU6ICdpZCcsIGRlc2NyaXB0aW9uOiAnU2Vzc2lvbiBsb2cgSUQnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdTZXNzaW9uIGFjdGl2aXRpZXMgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgaXRlbXM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgIGFjdGl2aXR5VHlwZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgZHVyYXRpb246IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgICAgICBtZXRhZGF0YTogeyB0eXBlOiAnb2JqZWN0JyB9LFxuICAgICAgICAgIGNyZWF0ZWRBdDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDA0LCBkZXNjcmlwdGlvbjogJ1Nlc3Npb24gbG9nIG5vdCBmb3VuZCcgfSlcbiAgZ2V0U2Vzc2lvbkFjdGl2aXRpZXMoQFBhcmFtKCdpZCcpIHNlc3Npb25JZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbnNTZXJ2aWNlLmdldFNlc3Npb25BY3Rpdml0aWVzKHNlc3Npb25JZCk7XG4gIH1cblxuICBAUG9zdCgndXNlci1hY3Rpdml0aWVzJylcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0xvZyB1c2VyIGFjdGl2aXR5JyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdMb2cgdXNlciBpbnRlcmFjdGlvbnMgYW5kIGFjdGl2aXRpZXMgZm9yIGFuYWx5dGljcyBhbmQgc2Vzc2lvbiB0cmFja2luZycsXG4gIH0pXG4gIEBBcGlCb2R5KHtcbiAgICBkZXNjcmlwdGlvbjogJ1VzZXIgYWN0aXZpdHkgZGF0YScsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHJlcXVpcmVkOiBbJ2FjdGlvbiddLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBhY3Rpb246IHtcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBlbnVtOiBbXG4gICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAgICAgJ3ZpZXcnLFxuICAgICAgICAgICAgJ3Njcm9sbCcsXG4gICAgICAgICAgICAnZm9ybV9zdWJtaXQnLFxuICAgICAgICAgICAgJ25hdmlnYXRpb24nLFxuICAgICAgICAgICAgJ290aGVyJyxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBwYWdlOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdQYWdlIG9yIHJvdXRlIHdoZXJlIGFjdGlvbiBvY2N1cnJlZCcsXG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBvbmVudDogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdVSSBjb21wb25lbnQgaW52b2x2ZWQnIH0sXG4gICAgICAgIG1ldGFkYXRhOiB7IHR5cGU6ICdvYmplY3QnLCBkZXNjcmlwdGlvbjogJ0FkZGl0aW9uYWwgYWN0aW9uIG1ldGFkYXRhJyB9LFxuICAgICAgICBzZXNzaW9uSWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnQXNzb2NpYXRlZCBzZXNzaW9uIElEJyB9LFxuICAgICAgICBkZXZpY2VJbmZvOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdEZXZpY2UgYW5kIGJyb3dzZXIgaW5mb3JtYXRpb24nLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAxLFxuICAgIGRlc2NyaXB0aW9uOiAnVXNlciBhY3Rpdml0eSBsb2dnZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICB1c2VySWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgYWN0aW9uOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHRpbWVzdGFtcDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIGxvZ1VzZXJBY3Rpdml0eShcbiAgICBAQm9keShuZXcgWm9kVmFsaWRhdGlvblBpcGUoTG9nVXNlckFjdGl2aXR5RHRvU2NoZW1hKSlcbiAgICBib2R5OiBMb2dVc2VyQWN0aXZpdHlEdG8sXG4gICAgQEN1cnJlbnRVc2VySWQoKSB1c2VySWQ6IHN0cmluZyxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbnNTZXJ2aWNlLmxvZ1VzZXJBY3Rpdml0eShcbiAgICAgIHVzZXJJZCxcbiAgICAgIGJvZHkuYWN0aW9uLFxuICAgICAgYm9keS5wYWdlLFxuICAgICAgYm9keS5jb21wb25lbnQsXG4gICAgICBib2R5Lm1ldGFkYXRhLFxuICAgICAgYm9keS5zZXNzaW9uSWQsXG4gICAgICBib2R5LmRldmljZUluZm8sXG4gICAgKTtcbiAgfVxuXG4gIEBHZXQoJ3VzZXItYWN0aXZpdGllcycpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdHZXQgdXNlciBhY3Rpdml0aWVzJyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdSZXRyaWV2ZSB1c2VyIGFjdGl2aXR5IGxvZ3Mgd2l0aCBvcHRpb25hbCBmaWx0ZXJpbmcgYnkgYWN0aW9uIHR5cGUgYW5kIGRhdGUgcmFuZ2UnLFxuICB9KVxuICBAQXBpUXVlcnkoe1xuICAgIG5hbWU6ICdhY3Rpb24nLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICBkZXNjcmlwdGlvbjogJ0ZpbHRlciBieSBhY3Rpb24gdHlwZScsXG4gIH0pXG4gIEBBcGlRdWVyeSh7XG4gICAgbmFtZTogJ3N0YXJ0RGF0ZScsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIGRlc2NyaXB0aW9uOiAnU3RhcnQgZGF0ZSBmb3IgZmlsdGVyaW5nIChJU08gc3RyaW5nKScsXG4gIH0pXG4gIEBBcGlRdWVyeSh7XG4gICAgbmFtZTogJ2VuZERhdGUnLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICBkZXNjcmlwdGlvbjogJ0VuZCBkYXRlIGZvciBmaWx0ZXJpbmcgKElTTyBzdHJpbmcpJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ1VzZXIgYWN0aXZpdGllcyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICBpdGVtczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGlkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgYWN0aW9uOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgcGFnZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgIGNvbXBvbmVudDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgIG1ldGFkYXRhOiB7IHR5cGU6ICdvYmplY3QnIH0sXG4gICAgICAgICAgc2Vzc2lvbklkOiB7IHR5cGU6ICdzdHJpbmcnLCBudWxsYWJsZTogdHJ1ZSB9LFxuICAgICAgICAgIHRpbWVzdGFtcDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIGdldFVzZXJBY3Rpdml0aWVzKFxuICAgIEBDdXJyZW50VXNlcklkKCkgdXNlcklkOiBzdHJpbmcsXG4gICAgQFF1ZXJ5KG5ldyBab2RWYWxpZGF0aW9uUGlwZShHZXRVc2VyQWN0aXZpdGllc1F1ZXJ5RHRvU2NoZW1hKSlcbiAgICBxdWVyeTogR2V0VXNlckFjdGl2aXRpZXNRdWVyeUR0byxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbnNTZXJ2aWNlLmdldFVzZXJBY3Rpdml0aWVzKFxuICAgICAgdXNlcklkLFxuICAgICAgcXVlcnkuYWN0aW9uLFxuICAgICAgcXVlcnkuc3RhcnREYXRlID8gbmV3IERhdGUocXVlcnkuc3RhcnREYXRlKSA6IHVuZGVmaW5lZCxcbiAgICAgIHF1ZXJ5LmVuZERhdGUgPyBuZXcgRGF0ZShxdWVyeS5lbmREYXRlKSA6IHVuZGVmaW5lZCxcbiAgICApO1xuICB9XG5cbiAgQFBvc3QoJ3RoZXJhcHktcHJvZ3Jlc3MnKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnQ3JlYXRlIHRoZXJhcHkgcHJvZ3Jlc3MgZW50cnknLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ0NyZWF0ZSBhIHRoZXJhcHkgcHJvZ3Jlc3MgZW50cnkgdG8gdHJhY2sgY2xpZW50IGltcHJvdmVtZW50cyBhbmQgbWlsZXN0b25lcycsXG4gIH0pXG4gIEBBcGlCb2R5KHtcbiAgICBkZXNjcmlwdGlvbjogJ1RoZXJhcHkgcHJvZ3Jlc3MgZGF0YScsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHJlcXVpcmVkOiBbJ2NsaWVudElkJywgJ3Byb2dyZXNzTm90ZXMnXSxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgY2xpZW50SWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgdGhlcmFwaXN0SWQ6IHtcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0F1dG8tZmlsbGVkIGZvciB0aGVyYXBpc3QgdXNlcnMnLFxuICAgICAgICB9LFxuICAgICAgICBzZXNzaW9uSWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnQXNzb2NpYXRlZCBzZXNzaW9uIElEJyB9LFxuICAgICAgICBwcm9ncmVzc05vdGVzOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdEZXRhaWxlZCBwcm9ncmVzcyBub3RlcycsXG4gICAgICAgIH0sXG4gICAgICAgIGdvYWxzQWNoaWV2ZWQ6IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHsgdHlwZTogJ3N0cmluZycgfSB9LFxuICAgICAgICBuZXdHb2FsczogeyB0eXBlOiAnYXJyYXknLCBpdGVtczogeyB0eXBlOiAnc3RyaW5nJyB9IH0sXG4gICAgICAgIG1vb2RSYXRpbmc6IHsgdHlwZTogJ251bWJlcicsIG1pbmltdW06IDEsIG1heGltdW06IDEwIH0sXG4gICAgICAgIHByb2dyZXNzUmF0aW5nOiB7IHR5cGU6ICdudW1iZXInLCBtaW5pbXVtOiAxLCBtYXhpbXVtOiAxMCB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAxLFxuICAgIGRlc2NyaXB0aW9uOiAnVGhlcmFweSBwcm9ncmVzcyBlbnRyeSBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgY2xpZW50SWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgdGhlcmFwaXN0SWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgcHJvZ3Jlc3NOb3RlczogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBtb29kUmF0aW5nOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgIHByb2dyZXNzUmF0aW5nOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgIGNyZWF0ZWRBdDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIGNyZWF0ZVRoZXJhcHlQcm9ncmVzcyhcbiAgICBAQm9keShuZXcgWm9kVmFsaWRhdGlvblBpcGUoQ3JlYXRlVGhlcmFweVByb2dyZXNzRHRvU2NoZW1hKSlcbiAgICBib2R5OiBDcmVhdGVUaGVyYXB5UHJvZ3Jlc3NEdG8sXG4gICAgQEN1cnJlbnRVc2VyUm9sZSgpIHVzZXJSb2xlOiBzdHJpbmcsXG4gICAgQEN1cnJlbnRVc2VySWQoKSB1c2VySWQ6IHN0cmluZyxcbiAgKSB7XG4gICAgLy8gRW5zdXJlIHRoZXJhcGlzdCBjYW4gb25seSBjcmVhdGUgcHJvZ3Jlc3MgZm9yIHRoZWlyIGNsaWVudHNcbiAgICBpZiAodXNlclJvbGUgPT09ICd0aGVyYXBpc3QnKSB7XG4gICAgICBib2R5LnRoZXJhcGlzdElkID0gdXNlcklkO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNlc3Npb25zU2VydmljZS5jcmVhdGVUaGVyYXB5UHJvZ3Jlc3MoYm9keSk7XG4gIH1cblxuICBAR2V0KCd0aGVyYXB5LXByb2dyZXNzJylcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0dldCB0aGVyYXB5IHByb2dyZXNzJyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdSZXRyaWV2ZSB0aGVyYXB5IHByb2dyZXNzIGVudHJpZXMgd2l0aCBvcHRpb25hbCBmaWx0ZXJpbmcuIFJlc3VsdHMgYXJlIGF1dG9tYXRpY2FsbHkgZmlsdGVyZWQgYnkgdXNlciByb2xlLicsXG4gIH0pXG4gIEBBcGlRdWVyeSh7XG4gICAgbmFtZTogJ2NsaWVudElkJyxcbiAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgZGVzY3JpcHRpb246ICdGaWx0ZXIgYnkgY2xpZW50IElEICh0aGVyYXBpc3QvYWRtaW4gb25seSknLFxuICB9KVxuICBAQXBpUXVlcnkoe1xuICAgIG5hbWU6ICd0aGVyYXBpc3RJZCcsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIGRlc2NyaXB0aW9uOiAnRmlsdGVyIGJ5IHRoZXJhcGlzdCBJRCAoY2xpZW50L2FkbWluIG9ubHkpJyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAnc3RhcnREYXRlJyxcbiAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgZGVzY3JpcHRpb246ICdTdGFydCBkYXRlIGZvciBmaWx0ZXJpbmcgKElTTyBzdHJpbmcpJyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAnZW5kRGF0ZScsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIGRlc2NyaXB0aW9uOiAnRW5kIGRhdGUgZm9yIGZpbHRlcmluZyAoSVNPIHN0cmluZyknLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnVGhlcmFweSBwcm9ncmVzcyBlbnRyaWVzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgIGl0ZW1zOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICBjbGllbnRJZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgIHRoZXJhcGlzdElkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgc2Vzc2lvbklkOiB7IHR5cGU6ICdzdHJpbmcnLCBudWxsYWJsZTogdHJ1ZSB9LFxuICAgICAgICAgIHByb2dyZXNzTm90ZXM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICBnb2Fsc0FjaGlldmVkOiB7IHR5cGU6ICdhcnJheScsIGl0ZW1zOiB7IHR5cGU6ICdzdHJpbmcnIH0gfSxcbiAgICAgICAgICBuZXdHb2FsczogeyB0eXBlOiAnYXJyYXknLCBpdGVtczogeyB0eXBlOiAnc3RyaW5nJyB9IH0sXG4gICAgICAgICAgbW9vZFJhdGluZzogeyB0eXBlOiAnbnVtYmVyJywgbnVsbGFibGU6IHRydWUgfSxcbiAgICAgICAgICBwcm9ncmVzc1JhdGluZzogeyB0eXBlOiAnbnVtYmVyJywgbnVsbGFibGU6IHRydWUgfSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDEsIGRlc2NyaXB0aW9uOiAnVW5hdXRob3JpemVkJyB9KVxuICBnZXRUaGVyYXB5UHJvZ3Jlc3MoXG4gICAgQEN1cnJlbnRVc2VyUm9sZSgpIHVzZXJSb2xlOiBzdHJpbmcsXG4gICAgQEN1cnJlbnRVc2VySWQoKSB1c2VySWQ6IHN0cmluZyxcbiAgICBAUXVlcnkobmV3IFpvZFZhbGlkYXRpb25QaXBlKEdldFRoZXJhcHlQcm9ncmVzc1F1ZXJ5RHRvU2NoZW1hKSlcbiAgICBxdWVyeTogR2V0VGhlcmFweVByb2dyZXNzUXVlcnlEdG8sXG4gICkge1xuICAgIC8vIEZpbHRlciBiYXNlZCBvbiB1c2VyIHJvbGVcbiAgICBsZXQgeyBjbGllbnRJZCwgdGhlcmFwaXN0SWQgfSA9IHF1ZXJ5O1xuICAgIGlmICh1c2VyUm9sZSA9PT0gJ2NsaWVudCcpIHtcbiAgICAgIGNsaWVudElkID0gdXNlcklkO1xuICAgIH0gZWxzZSBpZiAodXNlclJvbGUgPT09ICd0aGVyYXBpc3QnKSB7XG4gICAgICB0aGVyYXBpc3RJZCA9IHVzZXJJZDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uc1NlcnZpY2UuZ2V0VGhlcmFweVByb2dyZXNzKFxuICAgICAgY2xpZW50SWQsXG4gICAgICB0aGVyYXBpc3RJZCxcbiAgICAgIHF1ZXJ5LnN0YXJ0RGF0ZSA/IG5ldyBEYXRlKHF1ZXJ5LnN0YXJ0RGF0ZSkgOiB1bmRlZmluZWQsXG4gICAgICBxdWVyeS5lbmREYXRlID8gbmV3IERhdGUocXVlcnkuZW5kRGF0ZSkgOiB1bmRlZmluZWQsXG4gICAgKTtcbiAgfVxuXG4gIEBHZXQoJ3N0YXRpc3RpY3MnKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnR2V0IHNlc3Npb24gc3RhdGlzdGljcycsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnUmV0cmlldmUgc2Vzc2lvbiBzdGF0aXN0aWNzIGFuZCBhbmFseXRpY3MuIFJlc3VsdHMgYXJlIGF1dG9tYXRpY2FsbHkgZmlsdGVyZWQgYnkgdXNlciByb2xlLicsXG4gIH0pXG4gIEBBcGlRdWVyeSh7XG4gICAgbmFtZTogJ2NsaWVudElkJyxcbiAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgZGVzY3JpcHRpb246ICdGaWx0ZXIgYnkgY2xpZW50IElEICh0aGVyYXBpc3QvYWRtaW4gb25seSknLFxuICB9KVxuICBAQXBpUXVlcnkoe1xuICAgIG5hbWU6ICd0aGVyYXBpc3RJZCcsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIGRlc2NyaXB0aW9uOiAnRmlsdGVyIGJ5IHRoZXJhcGlzdCBJRCAoY2xpZW50L2FkbWluIG9ubHkpJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ1Nlc3Npb24gc3RhdGlzdGljcyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICB0b3RhbFNlc3Npb25zOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgIGNvbXBsZXRlZFNlc3Npb25zOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgIGNhbmNlbGxlZFNlc3Npb25zOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgIGF2ZXJhZ2VTZXNzaW9uRHVyYXRpb246IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgICAgYXZlcmFnZVNlc3Npb25SYXRpbmc6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgICAgc2Vzc2lvbnNCeVR5cGU6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICB2aWRlbzogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgICAgYXVkaW86IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgICAgICAgIGNoYXQ6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgICAgICAgIGluX3BlcnNvbjogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHByb2dyZXNzVHJlbmQ6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBhdmVyYWdlTW9vZFJhdGluZzogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgICAgICAgYXZlcmFnZVByb2dyZXNzUmF0aW5nOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgICAgICBpbXByb3ZlbWVudFBlcmNlbnRhZ2U6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBkYXRlUmFuZ2U6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBzdGFydERhdGU6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgICAgICAgIGVuZERhdGU6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIGdldFNlc3Npb25TdGF0aXN0aWNzKFxuICAgIEBDdXJyZW50VXNlclJvbGUoKSB1c2VyUm9sZTogc3RyaW5nLFxuICAgIEBDdXJyZW50VXNlcklkKCkgdXNlcklkOiBzdHJpbmcsXG4gICAgQFF1ZXJ5KG5ldyBab2RWYWxpZGF0aW9uUGlwZShHZXRTZXNzaW9uU3RhdGlzdGljc1F1ZXJ5RHRvU2NoZW1hKSlcbiAgICBxdWVyeTogR2V0U2Vzc2lvblN0YXRpc3RpY3NRdWVyeUR0byxcbiAgKSB7XG4gICAgLy8gRmlsdGVyIGJhc2VkIG9uIHVzZXIgcm9sZVxuICAgIGxldCB7IGNsaWVudElkLCB0aGVyYXBpc3RJZCB9ID0gcXVlcnk7XG4gICAgaWYgKHVzZXJSb2xlID09PSAnY2xpZW50Jykge1xuICAgICAgY2xpZW50SWQgPSB1c2VySWQ7XG4gICAgfSBlbHNlIGlmICh1c2VyUm9sZSA9PT0gJ3RoZXJhcGlzdCcpIHtcbiAgICAgIHRoZXJhcGlzdElkID0gdXNlcklkO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNlc3Npb25zU2VydmljZS5nZXRTZXNzaW9uU3RhdGlzdGljcyhjbGllbnRJZCwgdGhlcmFwaXN0SWQpO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=