184da9f25f2237f0489836fef2eb4dcc
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.AnalyticsController = void 0;
const common_1 = require("@nestjs/common");
const analytics_service_1 = require("./analytics.service");
const jwt_auth_guard_1 = require("../auth/guards/jwt-auth.guard");
const current_user_id_decorator_1 = require("../auth/decorators/current-user-id.decorator");
const current_user_role_decorator_1 = require("../auth/decorators/current-user-role.decorator");
const zod_validation_pipe_1 = require("../common/pipes/zod-validation.pipe");
const analytics_schemas_1 = require("./validation/analytics.schemas");
let AnalyticsController = class AnalyticsController {
    analyticsService;
    constructor(analyticsService) {
        this.analyticsService = analyticsService;
    }
    getPlatformAnalytics(role, query) {
        if (role !== 'admin') {
            throw new common_1.ForbiddenException('Access denied: Admin role required');
        }
        const start = query.dateFrom ? new Date(query.dateFrom) : undefined;
        const end = query.dateTo ? new Date(query.dateTo) : undefined;
        return this.analyticsService.getPlatformAnalytics(start, end);
    }
    getTherapistAnalytics(userId, role, query) {
        // Allow therapists to view their own analytics or admins to view any
        const targetTherapistId = query.therapistId || userId;
        if (role === 'therapist' && targetTherapistId !== userId) {
            throw new common_1.ForbiddenException('Access denied: Can only view your own analytics');
        }
        if (role !== 'therapist' && role !== 'admin') {
            throw new common_1.ForbiddenException('Access denied: Therapist or Admin role required');
        }
        const start = query.dateFrom ? new Date(query.dateFrom) : undefined;
        const end = query.dateTo ? new Date(query.dateTo) : undefined;
        return this.analyticsService.getTherapistAnalytics(targetTherapistId, start, end);
    }
    getClientAnalytics(userId, role, query) {
        // Allow clients to view their own analytics or admins/therapists to view assigned clients
        const targetClientId = query.clientId || userId;
        if (role === 'user' && targetClientId !== userId) {
            throw new common_1.ForbiddenException('Access denied: Can only view your own analytics');
        }
        if (role !== 'user' && role !== 'therapist' && role !== 'admin') {
            throw new common_1.ForbiddenException('Access denied: Invalid role');
        }
        const start = query.dateFrom ? new Date(query.dateFrom) : undefined;
        const end = query.dateTo ? new Date(query.dateTo) : undefined;
        return this.analyticsService.getClientAnalytics(targetClientId, start, end);
    }
};
exports.AnalyticsController = AnalyticsController;
__decorate([
    (0, common_1.Get)('platform'),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, common_1.Query)(new zod_validation_pipe_1.ZodValidationPipe(analytics_schemas_1.PlatformAnalyticsQueryDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", void 0)
], AnalyticsController.prototype, "getPlatformAnalytics", null);
__decorate([
    (0, common_1.Get)('therapist'),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __param(1, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(2, (0, common_1.Query)(new zod_validation_pipe_1.ZodValidationPipe(analytics_schemas_1.TherapistAnalyticsQueryDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Object]),
    __metadata("design:returntype", void 0)
], AnalyticsController.prototype, "getTherapistAnalytics", null);
__decorate([
    (0, common_1.Get)('client'),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __param(1, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(2, (0, common_1.Query)(new zod_validation_pipe_1.ZodValidationPipe(analytics_schemas_1.ClientAnalyticsQueryDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Object]),
    __metadata("design:returntype", void 0)
], AnalyticsController.prototype, "getClientAnalytics", null);
exports.AnalyticsController = AnalyticsController = __decorate([
    (0, common_1.Controller)('analytics'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __metadata("design:paramtypes", [typeof (_a = typeof analytics_service_1.AnalyticsService !== "undefined" && analytics_service_1.AnalyticsService) === "function" ? _a : Object])
], AnalyticsController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2FuYWx5dGljcy9hbmFseXRpY3MuY29udHJvbGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsMkNBTXdCO0FBQ3hCLDJEQUF1RDtBQUN2RCxrRUFBNkQ7QUFDN0QsNEZBQTZFO0FBQzdFLGdHQUFpRjtBQUNqRiw2RUFBd0U7QUFDeEUsc0VBSXdDO0FBU2pDLElBQU0sbUJBQW1CLEdBQXpCLE1BQU0sbUJBQW1CO0lBQ0Q7SUFBN0IsWUFBNkIsZ0JBQWtDO1FBQWxDLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7SUFBRyxDQUFDO0lBR25FLG9CQUFvQixDQUNDLElBQVksRUFFL0IsS0FBZ0M7UUFFaEMsSUFBSSxJQUFJLEtBQUssT0FBTyxFQUFFLENBQUM7WUFDckIsTUFBTSxJQUFJLDJCQUFrQixDQUFDLG9DQUFvQyxDQUFDLENBQUM7UUFDckUsQ0FBQztRQUVELE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1FBQ3BFLE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1FBRTlELE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBR0QscUJBQXFCLENBQ0YsTUFBYyxFQUNaLElBQVksRUFFL0IsS0FBaUM7UUFFakMscUVBQXFFO1FBQ3JFLE1BQU0saUJBQWlCLEdBQUcsS0FBSyxDQUFDLFdBQVcsSUFBSSxNQUFNLENBQUM7UUFFdEQsSUFBSSxJQUFJLEtBQUssV0FBVyxJQUFJLGlCQUFp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LENBNEUvQiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvYW5hbHl0aWNzL2FuYWx5dGljcy5jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbnRyb2xsZXIsXG4gIEdldCxcbiAgUXVlcnksXG4gIFVzZUd1YXJkcyxcbiAgRm9yYmlkZGVuRXhjZXB0aW9uLFxufSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBBbmFseXRpY3NTZXJ2aWNlIH0gZnJvbSAnLi9hbmFseXRpY3Muc2VydmljZSc7XG5pbXBvcnQgeyBKd3RBdXRoR3VhcmQgfSBmcm9tICcuLi9hdXRoL2d1YXJkcy9qd3QtYXV0aC5ndWFyZCc7XG5pbXBvcnQgeyBDdXJyZW50VXNlcklkIH0gZnJvbSAnLi4vYXV0aC9kZWNvcmF0b3JzL2N1cnJlbnQtdXNlci1pZC5kZWNvcmF0b3InO1xuaW1wb3J0IHsgQ3VycmVudFVzZXJSb2xlIH0gZnJvbSAnLi4vYXV0aC9kZWNvcmF0b3JzL2N1cnJlbnQtdXNlci1yb2xlLmRlY29yYXRvcic7XG5pbXBvcnQgeyBab2RWYWxpZGF0aW9uUGlwZSB9IGZyb20gJy4uL2NvbW1vbi9waXBlcy96b2QtdmFsaWRhdGlvbi5waXBlJztcbmltcG9ydCB7XG4gIFBsYXRmb3JtQW5hbHl0aWNzUXVlcnlEdG9TY2hlbWEsXG4gIFRoZXJhcGlzdEFuYWx5dGljc1F1ZXJ5RHRvU2NoZW1hLFxuICBDbGllbnRBbmFseXRpY3NRdWVyeUR0b1NjaGVtYSxcbn0gZnJvbSAnLi92YWxpZGF0aW9uL2FuYWx5dGljcy5zY2hlbWFzJztcbmltcG9ydCB0eXBlIHtcbiAgUGxhdGZvcm1BbmFseXRpY3NRdWVyeUR0byxcbiAgVGhlcmFwaXN0QW5hbHl0aWNzUXVlcnlEdG8sXG4gIENsaWVudEFuYWx5dGljc1F1ZXJ5RHRvLFxufSBmcm9tICcuL3R5cGVzJztcblxuQENvbnRyb2xsZXIoJ2FuYWx5dGljcycpXG5AVXNlR3VhcmRzKEp3dEF1dGhHdWFyZClcbmV4cG9ydCBjbGFzcyBBbmFseXRpY3NDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBhbmFseXRpY3NTZXJ2aWNlOiBBbmFseXRpY3NTZXJ2aWNlKSB7fVxuXG4gIEBHZXQoJ3BsYXRmb3JtJylcbiAgZ2V0UGxhdGZvcm1BbmFseXRpY3MoXG4gICAgQEN1cnJlbnRVc2VyUm9sZSgpIHJvbGU6IHN0cmluZyxcbiAgICBAUXVlcnkobmV3IFpvZFZhbGlkYXRpb25QaXBlKFBsYXRmb3JtQW5hbHl0aWNzUXVlcnlEdG9TY2hlbWEpKVxuICAgIHF1ZXJ5OiBQbGF0Zm9ybUFuYWx5dGljc1F1ZXJ5RHRvLFxuICApIHtcbiAgICBpZiAocm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgdGhyb3cgbmV3IEZvcmJpZGRlbkV4Y2VwdGlvbignQWNjZXNzIGRlbmllZDogQWRtaW4gcm9sZSByZXF1aXJlZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0ID0gcXVlcnkuZGF0ZUZyb20gPyBuZXcgRGF0ZShxdWVyeS5kYXRlRnJvbSkgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZW5kID0gcXVlcnkuZGF0ZVRvID8gbmV3IERhdGUocXVlcnkuZGF0ZVRvKSA6IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiB0aGlzLmFuYWx5dGljc1NlcnZpY2UuZ2V0UGxhdGZvcm1BbmFseXRpY3Moc3RhcnQsIGVuZCk7XG4gIH1cblxuICBAR2V0KCd0aGVyYXBpc3QnKVxuICBnZXRUaGVyYXBpc3RBbmFseXRpY3MoXG4gICAgQEN1cnJlbnRVc2VySWQoKSB1c2VySWQ6IHN0cmluZyxcbiAgICBAQ3VycmVudFVzZXJSb2xlKCkgcm9sZTogc3RyaW5nLFxuICAgIEBRdWVyeShuZXcgWm9kVmFsaWRhdGlvblBpcGUoVGhlcmFwaXN0QW5hbHl0aWNzUXVlcnlEdG9TY2hlbWEpKVxuICAgIHF1ZXJ5OiBUaGVyYXBpc3RBbmFseXRpY3NRdWVyeUR0byxcbiAgKSB7XG4gICAgLy8gQWxsb3cgdGhlcmFwaXN0cyB0byB2aWV3IHRoZWlyIG93biBhbmFseXRpY3Mgb3IgYWRtaW5zIHRvIHZpZXcgYW55XG4gICAgY29uc3QgdGFyZ2V0VGhlcmFwaXN0SWQgPSBxdWVyeS50aGVyYXBpc3RJZCB8fCB1c2VySWQ7XG5cbiAgICBpZiAocm9sZSA9PT0gJ3RoZXJhcGlzdCcgJiYgdGFyZ2V0VGhlcmFwaXN0SWQgIT09IHVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEZvcmJpZGRlbkV4Y2VwdGlvbihcbiAgICAgICAgJ0FjY2VzcyBkZW5pZWQ6IENhbiBvbmx5IHZpZXcgeW91ciBvd24gYW5hbHl0aWNzJyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJvbGUgIT09ICd0aGVyYXBpc3QnICYmIHJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5FeGNlcHRpb24oXG4gICAgICAgICdBY2Nlc3MgZGVuaWVkOiBUaGVyYXBpc3Qgb3IgQWRtaW4gcm9sZSByZXF1aXJlZCcsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0ID0gcXVlcnkuZGF0ZUZyb20gPyBuZXcgRGF0ZShxdWVyeS5kYXRlRnJvbSkgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZW5kID0gcXVlcnkuZGF0ZVRvID8gbmV3IERhdGUocXVlcnkuZGF0ZVRvKSA6IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiB0aGlzLmFuYWx5dGljc1NlcnZpY2UuZ2V0VGhlcmFwaXN0QW5hbHl0aWNzKFxuICAgICAgdGFyZ2V0VGhlcmFwaXN0SWQsXG4gICAgICBzdGFydCxcbiAgICAgIGVuZCxcbiAgICApO1xuICB9XG5cbiAgQEdldCgnY2xpZW50JylcbiAgZ2V0Q2xpZW50QW5hbHl0aWNzKFxuICAgIEBDdXJyZW50VXNlcklkKCkgdXNlcklkOiBzdHJpbmcsXG4gICAgQEN1cnJlbnRVc2VyUm9sZSgpIHJvbGU6IHN0cmluZyxcbiAgICBAUXVlcnkobmV3IFpvZFZhbGlkYXRpb25QaXBlKENsaWVudEFuYWx5dGljc1F1ZXJ5RHRvU2NoZW1hKSlcbiAgICBxdWVyeTogQ2xpZW50QW5hbHl0aWNzUXVlcnlEdG8sXG4gICkge1xuICAgIC8vIEFsbG93IGNsaWVudHMgdG8gdmlldyB0aGVpciBvd24gYW5hbHl0aWNzIG9yIGFkbWlucy90aGVyYXBpc3RzIHRvIHZpZXcgYXNzaWduZWQgY2xpZW50c1xuICAgIGNvbnN0IHRhcmdldENsaWVudElkID0gcXVlcnkuY2xpZW50SWQgfHwgdXNlcklkO1xuXG4gICAgaWYgKHJvbGUgPT09ICd1c2VyJyAmJiB0YXJnZXRDbGllbnRJZCAhPT0gdXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXhjZXB0aW9uKFxuICAgICAgICAnQWNjZXNzIGRlbmllZDogQ2FuIG9ubHkgdmlldyB5b3VyIG93biBhbmFseXRpY3MnLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAocm9sZSAhPT0gJ3VzZXInICYmIHJvbGUgIT09ICd0aGVyYXBpc3QnICYmIHJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5FeGNlcHRpb24oJ0FjY2VzcyBkZW5pZWQ6IEludmFsaWQgcm9sZScpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0ID0gcXVlcnkuZGF0ZUZyb20gPyBuZXcgRGF0ZShxdWVyeS5kYXRlRnJvbSkgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZW5kID0gcXVlcnkuZGF0ZVRvID8gbmV3IERhdGUocXVlcnkuZGF0ZVRvKSA6IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiB0aGlzLmFuYWx5dGljc1NlcnZpY2UuZ2V0Q2xpZW50QW5hbHl0aWNzKHRhcmdldENsaWVudElkLCBzdGFydCwgZW5kKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9