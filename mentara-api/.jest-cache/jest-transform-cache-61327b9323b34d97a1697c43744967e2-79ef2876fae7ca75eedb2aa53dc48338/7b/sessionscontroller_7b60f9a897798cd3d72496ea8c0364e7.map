{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/sessions/sessions.controller.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/sessions/sessions.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Body,\n  Patch,\n  Param,\n  Query,\n  UseGuards,\n} from '@nestjs/common';\nimport { SessionsService } from './sessions.service';\nimport { JwtAuthGuard } from 'src/auth/guards/jwt-auth.guard';\nimport { CurrentUserId } from 'src/auth/decorators/current-user-id.decorator';\nimport { CurrentUserRole } from 'src/auth/decorators/current-user-role.decorator';\nimport { ZodValidationPipe } from 'src/common/pipes/zod-validation.pipe';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBody,\n  ApiBearerAuth,\n  ApiParam,\n  ApiQuery,\n} from '@nestjs/swagger';\nimport {\n  CreateSessionLogDtoSchema,\n  FindSessionsQueryDtoSchema,\n  UpdateSessionLogDtoSchema,\n  EndSessionDtoSchema,\n  AddSessionActivityDtoSchema,\n  LogUserActivityDtoSchema,\n  GetUserActivitiesQueryDtoSchema,\n  CreateTherapyProgressDtoSchema,\n  GetTherapyProgressQueryDtoSchema,\n  GetSessionStatisticsQueryDtoSchema,\n  type CreateSessionLogDto,\n  type FindSessionsQueryDto,\n  type UpdateSessionLogDto,\n  type EndSessionDto,\n  type AddSessionActivityDto,\n  type LogUserActivityDto,\n  type GetUserActivitiesQueryDto,\n  type CreateTherapyProgressDto,\n  type GetTherapyProgressQueryDto,\n  type GetSessionStatisticsQueryDto,\n} from '@mentara/commons';\nimport {\n  SessionType,\n  SessionStatus,\n  ActivityType,\n  UserActionType,\n} from '@prisma/client';\n\n@ApiTags('sessions')\n@ApiBearerAuth('JWT-auth')\n@Controller('sessions')\n@UseGuards(JwtAuthGuard)\nexport class SessionsController {\n  constructor(private readonly sessionsService: SessionsService) {}\n\n  @Post('logs')\n  @ApiOperation({\n    summary: 'Create session log',\n    description: 'Create a new therapy session log entry',\n  })\n  @ApiBody({\n    description: 'Session log data',\n    schema: {\n      type: 'object',\n      required: ['sessionType', 'status'],\n      properties: {\n        clientId: {\n          type: 'string',\n          description: 'Client ID (auto-filled for client users)',\n        },\n        therapistId: {\n          type: 'string',\n          description: 'Therapist ID (auto-filled for therapist users)',\n        },\n        sessionType: {\n          type: 'string',\n          enum: ['video', 'audio', 'chat', 'in_person'],\n        },\n        status: {\n          type: 'string',\n          enum: ['scheduled', 'active', 'completed', 'cancelled'],\n        },\n        startTime: { type: 'string', format: 'date-time' },\n        endTime: { type: 'string', format: 'date-time' },\n        notes: { type: 'string' },\n        rating: { type: 'number', minimum: 1, maximum: 5 },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 201,\n    description: 'Session log created successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        id: { type: 'string' },\n        clientId: { type: 'string' },\n        therapistId: { type: 'string' },\n        sessionType: { type: 'string' },\n        status: { type: 'string' },\n        startTime: { type: 'string', format: 'date-time' },\n        createdAt: { type: 'string', format: 'date-time' },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  @ApiResponse({ status: 400, description: 'Invalid session data' })\n  createSessionLog(\n    @Body(new ZodValidationPipe(CreateSessionLogDtoSchema))\n    body: CreateSessionLogDto,\n    @CurrentUserId() userId: string,\n    @CurrentUserRole() userRole: string,\n  ) {\n    // Ensure the user can create session logs\n    if (userRole === 'client' && body.clientId !== userId) {\n      body.clientId = userId; // Override with actual user ID\n    }\n    if (userRole === 'therapist' && body.therapistId !== userId) {\n      body.therapistId = userId; // Override with actual therapist ID\n    }\n\n    return this.sessionsService.createSessionLog(body);\n  }\n\n  @Get('logs')\n  @ApiOperation({\n    summary: 'Get session logs',\n    description:\n      'Retrieve session logs with optional filtering. Results are automatically filtered by user role.',\n  })\n  @ApiQuery({\n    name: 'clientId',\n    required: false,\n    description: 'Filter by client ID (admin/therapist only)',\n  })\n  @ApiQuery({\n    name: 'therapistId',\n    required: false,\n    description: 'Filter by therapist ID (admin/client only)',\n  })\n  @ApiQuery({\n    name: 'status',\n    required: false,\n    description: 'Filter by session status',\n  })\n  @ApiQuery({\n    name: 'sessionType',\n    required: false,\n    description: 'Filter by session type',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Session logs retrieved successfully',\n    schema: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          id: { type: 'string' },\n          clientId: { type: 'string' },\n          therapistId: { type: 'string' },\n          sessionType: { type: 'string' },\n          status: { type: 'string' },\n          startTime: { type: 'string', format: 'date-time' },\n          endTime: { type: 'string', format: 'date-time', nullable: true },\n          duration: { type: 'number', nullable: true },\n          createdAt: { type: 'string', format: 'date-time' },\n        },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  findAllSessions(\n    @CurrentUserRole() userRole: string,\n    @CurrentUserId() userId: string,\n    @Query(new ZodValidationPipe(FindSessionsQueryDtoSchema))\n    query: FindSessionsQueryDto,\n  ) {\n    // Filter based on user role\n    let { clientId, therapistId } = query;\n    if (userRole === 'client') {\n      clientId = userId;\n    } else if (userRole === 'therapist') {\n      therapistId = userId;\n    }\n\n    return this.sessionsService.findAllSessions(\n      clientId,\n      therapistId,\n      query.status,\n      query.sessionType,\n    );\n  }\n\n  @Get('logs/:id')\n  @ApiOperation({\n    summary: 'Get session log by ID',\n    description: 'Retrieve detailed information about a specific session log',\n  })\n  @ApiParam({ name: 'id', description: 'Session log ID' })\n  @ApiResponse({\n    status: 200,\n    description: 'Session log retrieved successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        id: { type: 'string' },\n        clientId: { type: 'string' },\n        therapistId: { type: 'string' },\n        sessionType: { type: 'string' },\n        status: { type: 'string' },\n        startTime: { type: 'string', format: 'date-time' },\n        endTime: { type: 'string', format: 'date-time', nullable: true },\n        duration: { type: 'number', nullable: true },\n        notes: { type: 'string', nullable: true },\n        rating: { type: 'number', nullable: true },\n        activities: { type: 'array', items: { type: 'object' } },\n        createdAt: { type: 'string', format: 'date-time' },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  @ApiResponse({ status: 404, description: 'Session log not found' })\n  findSession(@Param('id') id: string) {\n    return this.sessionsService.findSession(id);\n  }\n\n  @Patch('logs/:id')\n  @ApiOperation({\n    summary: 'Update session log',\n    description: 'Update an existing session log with new information',\n  })\n  @ApiParam({ name: 'id', description: 'Session log ID' })\n  @ApiBody({\n    description: 'Updated session data',\n    schema: {\n      type: 'object',\n      properties: {\n        status: {\n          type: 'string',\n          enum: ['scheduled', 'active', 'completed', 'cancelled'],\n        },\n        endTime: { type: 'string', format: 'date-time' },\n        notes: { type: 'string' },\n        rating: { type: 'number', minimum: 1, maximum: 5 },\n        quality: { type: 'number', minimum: 1, maximum: 5 },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Session log updated successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        id: { type: 'string' },\n        status: { type: 'string' },\n        updatedAt: { type: 'string', format: 'date-time' },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  @ApiResponse({ status: 404, description: 'Session log not found' })\n  updateSession(\n    @Param('id') id: string,\n    @Body(new ZodValidationPipe(UpdateSessionLogDtoSchema))\n    body: UpdateSessionLogDto,\n  ) {\n    return this.sessionsService.updateSession(id, body);\n  }\n\n  @Post('logs/:id/end')\n  @ApiOperation({\n    summary: 'End session',\n    description:\n      'Mark a session as completed and add final notes and quality rating',\n  })\n  @ApiParam({ name: 'id', description: 'Session log ID' })\n  @ApiBody({\n    description: 'Session completion data',\n    schema: {\n      type: 'object',\n      properties: {\n        notes: { type: 'string', description: 'Final session notes' },\n        quality: {\n          type: 'number',\n          minimum: 1,\n          maximum: 5,\n          description: 'Session quality rating',\n        },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Session ended successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        id: { type: 'string' },\n        status: { type: 'string' },\n        endTime: { type: 'string', format: 'date-time' },\n        duration: { type: 'number' },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  @ApiResponse({ status: 404, description: 'Session log not found' })\n  endSession(\n    @Param('id') id: string,\n    @Body(new ZodValidationPipe(EndSessionDtoSchema)) body: EndSessionDto,\n  ) {\n    return this.sessionsService.endSession(id, body.notes, body.quality);\n  }\n\n  @Post('logs/:id/activities')\n  @ApiOperation({\n    summary: 'Add session activity',\n    description:\n      'Add an activity or event to a session log for detailed tracking',\n  })\n  @ApiParam({ name: 'id', description: 'Session log ID' })\n  @ApiBody({\n    description: 'Activity data',\n    schema: {\n      type: 'object',\n      required: ['activityType'],\n      properties: {\n        activityType: {\n          type: 'string',\n          enum: ['discussion', 'exercise', 'assessment', 'break', 'other'],\n        },\n        description: { type: 'string' },\n        duration: { type: 'number', description: 'Duration in minutes' },\n        metadata: {\n          type: 'object',\n          description: 'Additional activity metadata',\n        },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 201,\n    description: 'Activity added successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        id: { type: 'string' },\n        sessionId: { type: 'string' },\n        activityType: { type: 'string' },\n        description: { type: 'string' },\n        duration: { type: 'number' },\n        createdAt: { type: 'string', format: 'date-time' },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  @ApiResponse({ status: 404, description: 'Session log not found' })\n  addSessionActivity(\n    @Param('id') sessionId: string,\n    @Body(new ZodValidationPipe(AddSessionActivityDtoSchema))\n    body: AddSessionActivityDto,\n  ) {\n    return this.sessionsService.addSessionActivity(\n      sessionId,\n      body.activityType,\n      body.description,\n      body.duration,\n      body.metadata,\n    );\n  }\n\n  @Get('logs/:id/activities')\n  @ApiOperation({\n    summary: 'Get session activities',\n    description: 'Retrieve all activities and events for a specific session',\n  })\n  @ApiParam({ name: 'id', description: 'Session log ID' })\n  @ApiResponse({\n    status: 200,\n    description: 'Session activities retrieved successfully',\n    schema: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          id: { type: 'string' },\n          activityType: { type: 'string' },\n          description: { type: 'string' },\n          duration: { type: 'number' },\n          metadata: { type: 'object' },\n          createdAt: { type: 'string', format: 'date-time' },\n        },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  @ApiResponse({ status: 404, description: 'Session log not found' })\n  getSessionActivities(@Param('id') sessionId: string) {\n    return this.sessionsService.getSessionActivities(sessionId);\n  }\n\n  @Post('user-activities')\n  @ApiOperation({\n    summary: 'Log user activity',\n    description:\n      'Log user interactions and activities for analytics and session tracking',\n  })\n  @ApiBody({\n    description: 'User activity data',\n    schema: {\n      type: 'object',\n      required: ['action'],\n      properties: {\n        action: {\n          type: 'string',\n          enum: [\n            'click',\n            'view',\n            'scroll',\n            'form_submit',\n            'navigation',\n            'other',\n          ],\n        },\n        page: {\n          type: 'string',\n          description: 'Page or route where action occurred',\n        },\n        component: { type: 'string', description: 'UI component involved' },\n        metadata: { type: 'object', description: 'Additional action metadata' },\n        sessionId: { type: 'string', description: 'Associated session ID' },\n        deviceInfo: {\n          type: 'object',\n          description: 'Device and browser information',\n        },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 201,\n    description: 'User activity logged successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        id: { type: 'string' },\n        userId: { type: 'string' },\n        action: { type: 'string' },\n        timestamp: { type: 'string', format: 'date-time' },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  logUserActivity(\n    @Body(new ZodValidationPipe(LogUserActivityDtoSchema))\n    body: LogUserActivityDto,\n    @CurrentUserId() userId: string,\n  ) {\n    return this.sessionsService.logUserActivity(\n      userId,\n      body.action,\n      body.page,\n      body.component,\n      body.metadata,\n      body.sessionId,\n      body.deviceInfo,\n    );\n  }\n\n  @Get('user-activities')\n  @ApiOperation({\n    summary: 'Get user activities',\n    description:\n      'Retrieve user activity logs with optional filtering by action type and date range',\n  })\n  @ApiQuery({\n    name: 'action',\n    required: false,\n    description: 'Filter by action type',\n  })\n  @ApiQuery({\n    name: 'startDate',\n    required: false,\n    description: 'Start date for filtering (ISO string)',\n  })\n  @ApiQuery({\n    name: 'endDate',\n    required: false,\n    description: 'End date for filtering (ISO string)',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'User activities retrieved successfully',\n    schema: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          id: { type: 'string' },\n          action: { type: 'string' },\n          page: { type: 'string' },\n          component: { type: 'string' },\n          metadata: { type: 'object' },\n          sessionId: { type: 'string', nullable: true },\n          timestamp: { type: 'string', format: 'date-time' },\n        },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  getUserActivities(\n    @CurrentUserId() userId: string,\n    @Query(new ZodValidationPipe(GetUserActivitiesQueryDtoSchema))\n    query: GetUserActivitiesQueryDto,\n  ) {\n    return this.sessionsService.getUserActivities(\n      userId,\n      query.action,\n      query.startDate ? new Date(query.startDate) : undefined,\n      query.endDate ? new Date(query.endDate) : undefined,\n    );\n  }\n\n  @Post('therapy-progress')\n  @ApiOperation({\n    summary: 'Create therapy progress entry',\n    description:\n      'Create a therapy progress entry to track client improvements and milestones',\n  })\n  @ApiBody({\n    description: 'Therapy progress data',\n    schema: {\n      type: 'object',\n      required: ['clientId', 'progressNotes'],\n      properties: {\n        clientId: { type: 'string' },\n        therapistId: {\n          type: 'string',\n          description: 'Auto-filled for therapist users',\n        },\n        sessionId: { type: 'string', description: 'Associated session ID' },\n        progressNotes: {\n          type: 'string',\n          description: 'Detailed progress notes',\n        },\n        goalsAchieved: { type: 'array', items: { type: 'string' } },\n        newGoals: { type: 'array', items: { type: 'string' } },\n        moodRating: { type: 'number', minimum: 1, maximum: 10 },\n        progressRating: { type: 'number', minimum: 1, maximum: 10 },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 201,\n    description: 'Therapy progress entry created successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        id: { type: 'string' },\n        clientId: { type: 'string' },\n        therapistId: { type: 'string' },\n        progressNotes: { type: 'string' },\n        moodRating: { type: 'number' },\n        progressRating: { type: 'number' },\n        createdAt: { type: 'string', format: 'date-time' },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  createTherapyProgress(\n    @Body(new ZodValidationPipe(CreateTherapyProgressDtoSchema))\n    body: CreateTherapyProgressDto,\n    @CurrentUserRole() userRole: string,\n    @CurrentUserId() userId: string,\n  ) {\n    // Ensure therapist can only create progress for their clients\n    if (userRole === 'therapist') {\n      body.therapistId = userId;\n    }\n\n    return this.sessionsService.createTherapyProgress(body);\n  }\n\n  @Get('therapy-progress')\n  @ApiOperation({\n    summary: 'Get therapy progress',\n    description:\n      'Retrieve therapy progress entries with optional filtering. Results are automatically filtered by user role.',\n  })\n  @ApiQuery({\n    name: 'clientId',\n    required: false,\n    description: 'Filter by client ID (therapist/admin only)',\n  })\n  @ApiQuery({\n    name: 'therapistId',\n    required: false,\n    description: 'Filter by therapist ID (client/admin only)',\n  })\n  @ApiQuery({\n    name: 'startDate',\n    required: false,\n    description: 'Start date for filtering (ISO string)',\n  })\n  @ApiQuery({\n    name: 'endDate',\n    required: false,\n    description: 'End date for filtering (ISO string)',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Therapy progress entries retrieved successfully',\n    schema: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          id: { type: 'string' },\n          clientId: { type: 'string' },\n          therapistId: { type: 'string' },\n          sessionId: { type: 'string', nullable: true },\n          progressNotes: { type: 'string' },\n          goalsAchieved: { type: 'array', items: { type: 'string' } },\n          newGoals: { type: 'array', items: { type: 'string' } },\n          moodRating: { type: 'number', nullable: true },\n          progressRating: { type: 'number', nullable: true },\n          createdAt: { type: 'string', format: 'date-time' },\n        },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  getTherapyProgress(\n    @CurrentUserRole() userRole: string,\n    @CurrentUserId() userId: string,\n    @Query(new ZodValidationPipe(GetTherapyProgressQueryDtoSchema))\n    query: GetTherapyProgressQueryDto,\n  ) {\n    // Filter based on user role\n    let { clientId, therapistId } = query;\n    if (userRole === 'client') {\n      clientId = userId;\n    } else if (userRole === 'therapist') {\n      therapistId = userId;\n    }\n\n    return this.sessionsService.getTherapyProgress(\n      clientId,\n      therapistId,\n      query.startDate ? new Date(query.startDate) : undefined,\n      query.endDate ? new Date(query.endDate) : undefined,\n    );\n  }\n\n  @Get('statistics')\n  @ApiOperation({\n    summary: 'Get session statistics',\n    description:\n      'Retrieve session statistics and analytics. Results are automatically filtered by user role.',\n  })\n  @ApiQuery({\n    name: 'clientId',\n    required: false,\n    description: 'Filter by client ID (therapist/admin only)',\n  })\n  @ApiQuery({\n    name: 'therapistId',\n    required: false,\n    description: 'Filter by therapist ID (client/admin only)',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Session statistics retrieved successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        totalSessions: { type: 'number' },\n        completedSessions: { type: 'number' },\n        cancelledSessions: { type: 'number' },\n        averageSessionDuration: { type: 'number' },\n        averageSessionRating: { type: 'number' },\n        sessionsByType: {\n          type: 'object',\n          properties: {\n            video: { type: 'number' },\n            audio: { type: 'number' },\n            chat: { type: 'number' },\n            in_person: { type: 'number' },\n          },\n        },\n        progressTrend: {\n          type: 'object',\n          properties: {\n            averageMoodRating: { type: 'number' },\n            averageProgressRating: { type: 'number' },\n            improvementPercentage: { type: 'number' },\n          },\n        },\n        dateRange: {\n          type: 'object',\n          properties: {\n            startDate: { type: 'string', format: 'date-time' },\n            endDate: { type: 'string', format: 'date-time' },\n          },\n        },\n      },\n    },\n  })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  getSessionStatistics(\n    @CurrentUserRole() userRole: string,\n    @CurrentUserId() userId: string,\n    @Query(new ZodValidationPipe(GetSessionStatisticsQueryDtoSchema))\n    query: GetSessionStatisticsQueryDto,\n  ) {\n    // Filter based on user role\n    let { clientId, therapistId } = query;\n    if (userRole === 'client') {\n      clientId = userId;\n    } else if (userRole === 'therapist') {\n      therapistId = userId;\n    }\n\n    return this.sessionsService.getSessionStatistics(clientId, therapistId);\n  }\n}\n"],"version":3}