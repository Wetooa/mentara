{"version":3,"names":["cov_1djpf9f8wi","actualCoverage","s","domain_event_interface_1","require","AppointmentBookedEvent","BaseDomainEvent","constructor","data","metadata","f","appointmentId","exports","AppointmentCancelledEvent","AppointmentCompletedEvent","AppointmentRescheduledEvent","AppointmentReminderEvent","SessionStartedEvent","sessionId","SessionEndedEvent","SessionCompletedEvent","TherapistAssignedEvent","clientId","therapistId","TherapistUnassignedEvent","MeetingConfirmedEvent","meetingId","MeetingStartedEvent","MeetingCompletedEvent","MeetingCancelledEvent","MeetingEmergencyTerminatedEvent"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/events/booking-events.ts"],"sourcesContent":["import {\n  BaseDomainEvent,\n  EventMetadata,\n} from './interfaces/domain-event.interface';\n\n// Booking & Therapy Events\n\nexport interface AppointmentBookedData {\n  appointmentId: string;\n  clientId: string;\n  therapistId: string;\n  startTime: Date;\n  duration: number; // in minutes\n  meetingType: 'video' | 'audio' | 'in_person' | 'chat';\n  title?: string;\n  description?: string;\n  isInitialConsultation: boolean;\n}\n\nexport class AppointmentBookedEvent extends BaseDomainEvent<AppointmentBookedData> {\n  constructor(data: AppointmentBookedData, metadata?: EventMetadata) {\n    super(data.appointmentId, 'Appointment', data, metadata);\n  }\n}\n\nexport interface AppointmentCancelledData {\n  appointmentId: string;\n  clientId: string;\n  therapistId: string;\n  cancelledBy: string; // userId\n  cancellationReason: string;\n  cancelledAt: Date;\n  originalStartTime: Date;\n  cancellationNotice: number; // hours before appointment\n}\n\nexport class AppointmentCancelledEvent extends BaseDomainEvent<AppointmentCancelledData> {\n  constructor(data: AppointmentCancelledData, metadata?: EventMetadata) {\n    super(data.appointmentId, 'Appointment', data, metadata);\n  }\n}\n\nexport interface AppointmentCompletedData {\n  appointmentId: string;\n  clientId: string;\n  therapistId: string;\n  completedAt: Date;\n  duration: number; // actual duration in minutes\n  sessionNotes?: string;\n  attendanceStatus: 'ATTENDED' | 'NO_SHOW' | 'LATE';\n}\n\nexport class AppointmentCompletedEvent extends BaseDomainEvent<AppointmentCompletedData> {\n  constructor(data: AppointmentCompletedData, metadata?: EventMetadata) {\n    super(data.appointmentId, 'Appointment', data, metadata);\n  }\n}\n\nexport interface AppointmentRescheduledData {\n  appointmentId: string;\n  clientId: string;\n  therapistId: string;\n  rescheduledBy: string; // userId\n  originalStartTime: Date;\n  newStartTime: Date;\n  rescheduleReason: string;\n}\n\nexport class AppointmentRescheduledEvent extends BaseDomainEvent<AppointmentRescheduledData> {\n  constructor(data: AppointmentRescheduledData, metadata?: EventMetadata) {\n    super(data.appointmentId, 'Appointment', data, metadata);\n  }\n}\n\nexport interface AppointmentReminderData {\n  appointmentId: string;\n  clientId: string;\n  therapistId: string;\n  startTime: Date;\n  reminderType: '24h' | '1h' | '15min';\n  deliveryMethod: 'email' | 'sms' | 'push' | 'in_app';\n}\n\nexport class AppointmentReminderEvent extends BaseDomainEvent<AppointmentReminderData> {\n  constructor(data: AppointmentReminderData, metadata?: EventMetadata) {\n    super(data.appointmentId, 'Appointment', data, metadata);\n  }\n}\n\nexport interface SessionStartedData {\n  sessionId: string;\n  appointmentId: string;\n  clientId: string;\n  therapistId: string;\n  sessionType: 'individual' | 'group' | 'consultation';\n  platform: string;\n  actualStartTime: Date;\n  scheduledStartTime: Date;\n}\n\nexport class SessionStartedEvent extends BaseDomainEvent<SessionStartedData> {\n  constructor(data: SessionStartedData, metadata?: EventMetadata) {\n    super(data.sessionId, 'Session', data, metadata);\n  }\n}\n\nexport interface SessionEndedData {\n  sessionId: string;\n  appointmentId: string;\n  clientId: string;\n  therapistId: string;\n  endTime: Date;\n  actualDuration: number; // in minutes\n  scheduledDuration: number; // in minutes\n  endReason: 'completed' | 'technical_issue' | 'no_show' | 'cancelled';\n}\n\nexport class SessionEndedEvent extends BaseDomainEvent<SessionEndedData> {\n  constructor(data: SessionEndedData, metadata?: EventMetadata) {\n    super(data.sessionId, 'Session', data, metadata);\n  }\n}\n\nexport interface SessionCompletedData {\n  sessionId: string;\n  appointmentId: string;\n  clientId: string;\n  therapistId: string;\n  completedAt: Date;\n  sessionNotes?: string;\n  nextSteps?: string;\n  followUpRequired: boolean;\n  sessionRating?: number; // 1-5\n}\n\nexport class SessionCompletedEvent extends BaseDomainEvent<SessionCompletedData> {\n  constructor(data: SessionCompletedData, metadata?: EventMetadata) {\n    super(data.sessionId, 'Session', data, metadata);\n  }\n}\n\nexport interface TherapistAssignedData {\n  clientId: string;\n  therapistId: string;\n  assignedBy: string; // userId of admin or system\n  assignmentReason:\n    | 'manual'\n    | 'recommendation'\n    | 'availability'\n    | 'specialty_match';\n  effectiveDate: Date;\n}\n\nexport class TherapistAssignedEvent extends BaseDomainEvent<TherapistAssignedData> {\n  constructor(data: TherapistAssignedData, metadata?: EventMetadata) {\n    super(\n      `${data.clientId}_${data.therapistId}`,\n      'ClientTherapist',\n      data,\n      metadata,\n    );\n  }\n}\n\nexport interface TherapistUnassignedData {\n  clientId: string;\n  therapistId: string;\n  unassignedBy: string;\n  unassignmentReason: string;\n  relationshipDuration: number; // in days\n  sessionCount: number;\n}\n\nexport class TherapistUnassignedEvent extends BaseDomainEvent<TherapistUnassignedData> {\n  constructor(data: TherapistUnassignedData, metadata?: EventMetadata) {\n    super(\n      `${data.clientId}_${data.therapistId}`,\n      'ClientTherapist',\n      data,\n      metadata,\n    );\n  }\n}\n\n// Meeting-specific events\n\nexport interface MeetingConfirmedData {\n  meetingId: string;\n  clientId: string;\n  therapistId: string;\n  confirmedAt: Date;\n  startTime: Date;\n  duration: number;\n}\n\nexport class MeetingConfirmedEvent extends BaseDomainEvent<MeetingConfirmedData> {\n  constructor(data: MeetingConfirmedData, metadata?: EventMetadata) {\n    super(data.meetingId, 'Meeting', data, metadata);\n  }\n}\n\nexport interface MeetingStartedData {\n  meetingId: string;\n  clientId: string;\n  therapistId: string;\n  startedAt: Date;\n  actualStartTime: Date;\n  scheduledStartTime: Date;\n}\n\nexport class MeetingStartedEvent extends BaseDomainEvent<MeetingStartedData> {\n  constructor(data: MeetingStartedData, metadata?: EventMetadata) {\n    super(data.meetingId, 'Meeting', data, metadata);\n  }\n}\n\nexport interface MeetingCompletedData {\n  meetingId: string;\n  clientId: string;\n  therapistId: string;\n  completedAt: Date;\n  actualDuration: number;\n  scheduledDuration: number;\n}\n\nexport class MeetingCompletedEvent extends BaseDomainEvent<MeetingCompletedData> {\n  constructor(data: MeetingCompletedData, metadata?: EventMetadata) {\n    super(data.meetingId, 'Meeting', data, metadata);\n  }\n}\n\nexport interface MeetingCancelledData {\n  meetingId: string;\n  clientId: string;\n  therapistId: string;\n  cancelledBy: string;\n  cancelledAt: Date;\n  cancellationReason?: string;\n  originalStartTime: Date;\n}\n\nexport class MeetingCancelledEvent extends BaseDomainEvent<MeetingCancelledData> {\n  constructor(data: MeetingCancelledData, metadata?: EventMetadata) {\n    super(data.meetingId, 'Meeting', data, metadata);\n  }\n}\n\nexport interface MeetingEmergencyTerminatedData {\n  meetingId: string;\n  clientId: string;\n  therapistId: string;\n  terminatedBy: string;\n  terminatedAt: Date;\n  reason: string;\n}\n\nexport class MeetingEmergencyTerminatedEvent extends BaseDomainEvent<MeetingEmergencyTerminatedData> {\n  constructor(data: MeetingEmergencyTerminatedData, metadata?: EventMetadata) {\n    super(data.meetingId, 'Meeting', data, metadata);\n  }\n}\n"],"mappings":"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","ignoreList":[]}