6b3ae86825f8a82def64fbeb6957bb38
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_1 = require("@nestjs/common");
const performance_dashboard_1 = require("./performance-dashboard");
const os = require("os");
const process = require("process");
describe('PerformanceDashboard', () => {
    let dashboard;
    let originalSetInterval;
    let originalClearInterval;
    let mockDate;
    // Mock data structures
    const mockDate = new Date('2024-01-15T10:00:00Z');
    const mockMemoryUsage = {
        rss: 67108864, // 64MB
        heapTotal: 50331648, // 48MB
        heapUsed: 33554432, // 32MB
        external: 8388608, // 8MB
        arrayBuffers: 1048576, // 1MB
    };
    const mockCpuUsage = {
        user: 1000000, // 1 second in microseconds
        system: 500000, // 0.5 seconds in microseconds
    };
    const mockOsMemory = {
        total: 17179869184, // 16GB
        free: 8589934592, // 8GB
    };
    const mockLoadAverage = [0.85, 1.2, 1.5];
    const mockCpus = Array.from({ length: 8 }, () => ({ model: 'Test CPU' }));
    beforeEach(() => {
        dashboard = new performance_dashboard_1.PerformanceDashboard();
        // Mock timers
        jest.useFakeTimers();
        jest.setSystemTime(mockDate);
        // Store original functions
        originalSetInterval = global.setInterval;
        originalClearInterval = global.clearInterval;
        // Mock process and os modules
        jest.spyOn(process, 'memoryUsage').mockReturnValue(mockMemoryUsage);
        jest.spyOn(process, 'cpuUsage').mockReturnValue(mockCpuUsage);
        jest.spyOn(process, 'uptime').mockReturnValue(86400); // 24 hours
        jest.spyOn(os, 'totalmem').mockReturnValue(mockOsMemory.total);
        jest.spyOn(os, 'freemem').mockReturnValue(mockOsMemory.free);
        jest.spyOn(os, 'loadavg').mockReturnValue(mockLoadAverage);
        jest.spyOn(os, 'cpus').mockReturnValue(mockCpus);
        // Mock logger to prevent console output during tests
        jest.spyOn(common_1.Logger.prototype, 'log').mockImplementation();
        jest.spyOn(common_1.Logger.prototype, 'warn').mockImplementation();
        jest.spyOn(common_1.Logger.prototype, 'error').mockImplementation();
    });
    afterEach(() => {
        dashboard.stopMonitoring();
        jest.clearAllMocks();
        jest.useRealTimers();
        jest.restoreAllMocks();
    });
    describe('Constructor and Initialization', () => {
        it('should initialize dashboard with default values', () => {
            expect(dashboard).toBeDefined();
            expect(dashboard).toBeInstanceOf(performance_dashboard_1.PerformanceDashboard);
        });
        it('should extend EventEmitter', () => {
            expect(dashboard.on).toBeDefined();
            expect(dashboard.emit).toBeDefined();
            expect(dashboard.removeListener).toBeDefined();
        });
        it('should log initialization message', () => {
            new performance_dashboard_1.PerformanceDashboard();
            expect(common_1.Logger.prototype.log).toHaveBeenCalledWith('Performance Dashboard initialized');
        });
        it('should initialize with empty metrics and alerts', () => {
            const dashboardData = dashboard.getDashboardData();
            expect(dashboardData.performanceTimeline).toHaveLength(0);
            expect(dashboardData.recentAlerts).toHaveLength(0);
            expect(dashboardData.endpointStats).toHaveLength(0);
        });
    });
    describe('Monitoring Lifecycle', () => {
        describe('startMonitoring', () => {
            it('should start monitoring and set internal state', () => {
                const emitSpy = jest.spyOn(dashboard, 'emit');
                dashboard.startMonitoring();
                expect(common_1.Logger.prototype.log).toHaveBeenCalledWith('Performance monitoring started');
                expect(emitSpy).toHaveBeenCalledWith('monitoring-started');
            });
            it('should not start monitoring twice', () => {
                const logSpy = jest.spyOn(common_1.Logger.prototype, 'warn');
                dashboard.startMonitoring();
                dashboard.startMonitoring();
                expect(logSpy).toHaveBeenCalledWith('Monitoring already started');
            });
            it('should set up interval for collecting system metrics', () => {
                const setIntervalSpy = jest.spyOn(global, 'setInterval');
                dashboard.startMonitoring();
                expect(setIntervalSpy).toHaveBeenCalledWith(expect.any(Function), 5000);
            });
            it('should collect system metrics periodically', () => {
                const emitSpy = jest.spyOn(dashboard, 'emit');
                dashboard.startMonitoring();
                // Advance timer by 5 seconds
                jest.advanceTimersByTime(5000);
                expect(emitSpy).toHaveBeenCalledWith('system-metrics-collected', expect.any(Object));
            });
            it('should update start time when monitoring starts', () => {
                const initialTime = Date.now();
                jest.advanceTimersByTime(1000);
                dashboard.startMonitoring();
                // Start time should be updated to current time
                expect(dashboard.startTime).toBeGreaterThan(initialTime);
            });
        });
        describe('stopMonitoring', () => {
            it('should stop monitoring and clear interval', () => {
                const emitSpy = jest.spyOn(dashboard, 'emit');
                const clearIntervalSpy = jest.spyOn(global, 'clearInterval');
                dashboard.startMonitoring();
                dashboard.stopMonitoring();
                expect(clearIntervalSpy).toHaveBeenCalled();
                expect(common_1.Logger.prototype.log).toHaveBeenCalledWith('Performance monitoring stopped');
                expect(emitSpy).toHaveBeenCalledWith('monitoring-stopped');
            });
            it('should not fail when stopping monitoring that was never started', () => {
                expect(() => dashboard.stopMonitoring()).not.toThrow();
            });
            it('should handle multiple stop calls gracefully', () => {
                dashboard.startMonitoring();
                dashboard.stopMonitoring();
                expect(() => dashboard.stopMonitoring()).not.toThrow();
            });
        });
    });
    describe('Request Recording', () => {
        describe('recordRequest', () => {
            it('should record a successful request', () => {
                const emitSpy = jest.spyOn(dashboard, 'emit');
                dashboard.recordRequest('GET /api/users', 'GET', 150, 200, 2);
                const dashboardData = dashboard.getDashboardData();
                expect(dashboardData.performanceTimeline).toHaveLength(1);
                const metric = dashboardData.performanceTimeline[0];
                expect(metric.endpoint).toBe('GET GET /api/users');
                expect(metric.method).toBe('GET');
                expect(metric.responseTime).toBe(150);
                expect(metric.statusCode).toBe(200);
                expect(metric.databaseConnections).toBe(2);
                expect(metric.errorCount).toBe(0);
                expect(metric.requestCount).toBe(1);
                expect(emitSpy).toHaveBeenCalledWith('request-recorded', metric);
            });
            it('should record an error request', () => {
                dashboard.recordRequest('POST /api/users', 'POST', 500, 500);
                const dashboardData = dashboard.getDashboardData();
                const metric = dashboardData.performanceTimeline[0];
                expect(metric.statusCode).toBe(500);
                expect(metric.errorCount).toBe(1);
            });
            it('should include memory and CPU usage in metrics', () => {
                dashboard.recordRequest('GET /api/test', 'GET', 100, 200);
                const dashboardData = dashboard.getDashboardData();
                const metric = dashboardData.performanceTimeline[0];
                expect(metric.memoryUsage).toEqual(mockMemoryUsage);
                expect(metric.cpuUsage).toEqual(mockCpuUsage);
            });
            it('should update endpoint statistics', () => {
                dashboard.recordRequest('GET /api/users', 'GET', 150, 200);
                dashboard.recordRequest('GET /api/users', 'GET', 200, 200);
                const stats = dashboard.getEndpointStats('GET GET /api/users');
                expect(stats).toBeDefined();
                expect(stats.totalRequests).toBe(2);
                expect(stats.averageResponseTime).toBe(175);
                expect(stats.minResponseTime).toBe(150);
                expect(stats.maxResponseTime).toBe(200);
                expect(stats.errorRate).toBe(0);
            });
            it('should limit metrics to 1000 entries', () => {
                // Record 1005 requests
                for (let i = 0; i < 1005; i++) {
                    dashboard.recordRequest(`GET /api/test${i}`, 'GET', 100, 200);
                }
                const dashboardData = dashboard.getDashboardData();
                expect(dashboardData.performanceTimeline).toHaveLength(100); // Last 100 from slice(-100)
                expect(dashboard.metrics).toHaveLength(1000); // Internal limit
            });
            it('should trigger threshold checks', () => {
                const createAlertSpy = jest.spyOn(dashboard, 'createAlert');
                // Record a slow request that should trigger warning threshold
                dashboard.recordRequest('GET /api/slow', 'GET', 2000, 200);
                expect(createAlertSpy).toHaveBeenCalledWith('HIGH', 'RESPONSE_TIME', expect.stringContaining('Slow response time: 2000ms'), 'GET GET /api/slow', 2000, 1000);
            });
            it('should handle requests with default database connections', () => {
                dashboard.recordRequest('GET /api/test', 'GET', 100, 200);
                const dashboardData = dashboard.getDashboardData();
                const metric = dashboardData.performanceTimeline[0];
                expect(metric.databaseConnections).toBe(0);
            });
        });
        describe('Endpoint Statistics', () => {
            beforeEach(() => {
                // Record some test requests
                dashboard.recordRequest('GET /api/users', 'GET', 100, 200);
                dashboard.recordRequest('GET /api/users', 'GET', 200, 200);
                dashboard.recordRequest('GET /api/users', 'GET', 150, 500);
                dashboard.recordRequest('POST /api/users', 'POST', 300, 201);
            });
            it('should calculate correct endpoint statistics', () => {
                const stats = dashboard.getEndpointStats('GET GET /api/users');
                expect(stats).toBeDefined();
                expect(stats.totalRequests).toBe(3);
                expect(stats.averageResponseTime).toBeCloseTo(150, 1);
                expect(stats.minResponseTime).toBe(100);
                expect(stats.maxResponseTime).toBe(200);
                expect(stats.errorCount).toBe(1);
                expect(stats.errorRate).toBeCloseTo(33.33, 1);
            });
            it('should calculate percentiles correctly', () => {
                // Add more data points for better percentile calculation
                for (let i = 0; i < 50; i++) {
                    dashboard.recordRequest('GET /api/test', 'GET', i * 10, 200);
                }
                const stats = dashboard.getEndpointStats('GET GET /api/test');
                expect(stats.performance95thPercentile).toBeGreaterThan(0);
                expect(stats.performance99thPercentile).toBeGreaterThan(0);
                expect(stats.performance99thPercentile).toBeGreaterThanOrEqual(stats.performance95thPercentile);
            });
            it('should calculate requests per minute', () => {
                const stats = dashboard.getEndpointStats('GET GET /api/users');
                expect(stats.requestsPerMinute).toBeGreaterThan(0);
            });
            it('should return null for non-existent endpoint', () => {
                const stats = dashboard.getEndpointStats('GET /api/nonexistent');
                expect(stats).toBeNull();
            });
            it('should update last updated timestamp', () => {
                const initialTime = Date.now();
                jest.advanceTimersByTime(1000);
                dashboard.recordRequest('GET /api/test', 'GET', 100, 200);
                const stats = dashboard.getEndpointStats('GET GET /api/test');
                expect(stats.lastUpdated).toBeGreaterThan(initialTime);
            });
        });
    });
    describe('System Metrics Collection', () => {
        it('should collect current system metrics', () => {
            const systemMetrics = dashboard.getCurrentSystemMetrics();
            expect(systemMetrics).toHaveProperty('timestamp');
            expect(systemMetrics).toHaveProperty('cpu');
            expect(systemMetrics).toHaveProperty('memory');
            expect(systemMetrics).toHaveProperty('network');
            expect(systemMetrics).toHaveProperty('database');
            // CPU metrics
            expect(systemMetrics.cpu.usage).toBeGreaterThan(0);
            expect(systemMetrics.cpu.loadAverage).toEqual(mockLoadAverage);
            // Memory metrics
            expect(systemMetrics.memory.totalMB).toBe(Math.round(mockOsMemory.total / 1024 / 1024));
            expect(systemMetrics.memory.usedMB).toBe(Math.round((mockOsMemory.total - mockOsMemory.free) / 1024 / 1024));
            expect(systemMetrics.memory.freeMB).toBe(Math.round(mockOsMemory.free / 1024 / 1024));
            expect(systemMetrics.memory.usage).toBe(50); // 50% used
        });
        it('should calculate memory usage percentage correctly', () => {
            const systemMetrics = dashboard.getCurrentSystemMetrics();
            const expectedUsage = ((mockOsMemory.total - mockOsMemory.free) / mockOsMemory.total) * 100;
            expect(systemMetrics.memory.usage).toBeCloseTo(expectedUsage, 1);
        });
        it('should calculate requests per second', () => {
            // Record some requests
            dashboard.recordRequest('GET /api/test1', 'GET', 100, 200);
            dashboard.recordRequest('GET /api/test2', 'GET', 100, 200);
            const rps = dashboard.calculateRequestsPerSecond();
            expect(rps).toBe(2);
        });
        it('should calculate CPU usage from process.cpuUsage', () => {
            const cpuUsage = dashboard.calculateCpuUsage(mockCpuUsage);
            const expectedUsage = ((mockCpuUsage.user + mockCpuUsage.system) / 1000000) * 100;
            expect(cpuUsage).toBe(expectedUsage);
        });
        it('should emit system metrics when collected', () => {
            const emitSpy = jest.spyOn(dashboard, 'emit');
            dashboard.startMonitoring();
            jest.advanceTimersByTime(5000);
            expect(emitSpy).toHaveBeenCalledWith('system-metrics-collected', expect.any(Object));
        });
    });
    describe('Alert System', () => {
        describe('Response Time Alerts', () => {
            it('should create critical alert for very slow responses', () => {
                const emitSpy = jest.spyOn(dashboard, 'emit');
                dashboard.recordRequest('GET /api/slow', 'GET', 6000, 200);
                const alerts = dashboard.getRecentAlerts();
                expect(alerts).toHaveLength(1);
                expect(alerts[0].severity).toBe('CRITICAL');
                expect(alerts[0].type).toBe('RESPONSE_TIME');
                expect(alerts[0].value).toBe(6000);
                expect(alerts[0].threshold).toBe(5000);
                expect(emitSpy).toHaveBeenCalledWith('alert-created', alerts[0]);
            });
            it('should create warning alert for slow responses', () => {
                dashboard.recordRequest('GET /api/medium', 'GET', 2000, 200);
                const alerts = dashboard.getRecentAlerts();
                expect(alerts).toHaveLength(1);
                expect(alerts[0].severity).toBe('HIGH');
                expect(alerts[0].type).toBe('RESPONSE_TIME');
                expect(alerts[0].value).toBe(2000);
                expect(alerts[0].threshold).toBe(1000);
            });
            it('should not create alert for fast responses', () => {
                dashboard.recordRequest('GET /api/fast', 'GET', 100, 200);
                const alerts = dashboard.getRecentAlerts();
                expect(alerts).toHaveLength(0);
            });
        });
        describe('Error Rate Alerts', () => {
            it('should create critical alert for high error rates', () => {
                // Create requests with >10% error rate
                for (let i = 0; i < 10; i++) {
                    dashboard.recordRequest('GET /api/error', 'GET', 100, i < 9 ? 200 : 500);
                }
                // The last request should trigger the alert
                dashboard.recordRequest('GET /api/error', 'GET', 100, 500);
                const alerts = dashboard.getRecentAlerts(1);
                expect(alerts.length).toBeGreaterThan(0);
                const errorRateAlert = alerts.find(a => a.type === 'ERROR_RATE');
                if (errorRateAlert) {
                    expect(errorRateAlert.severity).toBe('CRITICAL');
                    expect(errorRateAlert.value).toBeGreaterThan(10);
                }
            });
            it('should create warning alert for medium error rates', () => {
                // Create requests with ~7% error rate
                for (let i = 0; i < 15; i++) {
                    dashboard.recordRequest('GET /api/warning', 'GET', 100, i === 0 ? 500 : 200);
                }
                const alerts = dashboard.getRecentAlerts();
                const errorRateAlert = alerts.find(a => a.type === 'ERROR_RATE');
                if (errorRateAlert) {
                    expect(errorRateAlert.severity).toBe('HIGH');
                }
            });
        });
        describe('System Resource Alerts', () => {
            it('should create memory usage alerts', () => {
                // Mock high memory usage
                jest.spyOn(os, 'freemem').mockReturnValue(mockOsMemory.total * 0.05); // 95% used
                dashboard.startMonitoring();
                jest.advanceTimersByTime(5000);
                const alerts = dashboard.getRecentAlerts();
                const memoryAlert = alerts.find(a => a.type === 'MEMORY');
                expect(memoryAlert).toBeDefined();
                expect(memoryAlert.severity).toBe('CRITICAL');
                expect(memoryAlert.value).toBeGreaterThan(90);
            });
            it('should create CPU usage alerts', () => {
                // Mock high CPU usage
                jest.spyOn(process, 'cpuUsage').mockReturnValue({
                    user: 90000000, // High CPU usage
                    system: 10000000,
                });
                dashboard.startMonitoring();
                jest.advanceTimersByTime(5000);
                const alerts = dashboard.getRecentAlerts();
                const cpuAlert = alerts.find(a => a.type === 'CPU');
                expect(cpuAlert).toBeDefined();
                expect(cpuAlert.severity).toBe('CRITICAL');
            });
            it('should limit alerts to 100 entries', () => {
                // Create many alerts
                for (let i = 0; i < 105; i++) {
                    dashboard.recordRequest('GET /api/slow', 'GET', 6000, 200);
                }
                expect(dashboard.alerts.length).toBe(100);
            });
        });
    });
    describe('Dashboard Data', () => {
        beforeEach(() => {
            // Set up test data
            dashboard.recordRequest('GET /api/users', 'GET', 150, 200);
            dashboard.recordRequest('POST /api/users', 'POST', 300, 201);
            dashboard.recordRequest('GET /api/slow', 'GET', 2000, 200); // Triggers alert
        });
        it('should return comprehensive dashboard data', () => {
            const data = dashboard.getDashboardData();
            expect(data).toHaveProperty('systemMetrics');
            expect(data).toHaveProperty('endpointStats');
            expect(data).toHaveProperty('recentAlerts');
            expect(data).toHaveProperty('performanceTimeline');
            expect(data).toHaveProperty('recommendations');
            expect(data.endpointStats).toHaveLength(3);
            expect(data.performanceTimeline).toHaveLength(3);
            expect(data.recentAlerts.length).toBeGreaterThan(0);
            expect(data.recommendations.length).toBeGreaterThan(0);
        });
        it('should limit performance timeline to last 100 entries', () => {
            // Add more requests
            for (let i = 0; i < 150; i++) {
                dashboard.recordRequest(`GET /api/test${i}`, 'GET', 100, 200);
            }
            const data = dashboard.getDashboardData();
            expect(data.performanceTimeline).toHaveLength(100);
        });
        it('should limit recent alerts to last 10 entries', () => {
            // Create many alerts
            for (let i = 0; i < 15; i++) {
                dashboard.recordRequest('GET /api/slow', 'GET', 6000, 200);
            }
            const data = dashboard.getDashboardData();
            expect(data.recentAlerts).toHaveLength(10);
        });
    });
    describe('Recommendations Engine', () => {
        it('should recommend optimization for slow endpoints', () => {
            dashboard.recordRequest('GET /api/slow1', 'GET', 1500, 200);
            dashboard.recordRequest('GET /api/slow2', 'GET', 2000, 200);
            const data = dashboard.getDashboardData();
            const slowEndpointRec = data.recommendations.find(r => r.includes('slow endpoint(s)'));
            expect(slowEndpointRec).toBeDefined();
        });
        it('should recommend investigation for high error rate endpoints', () => {
            // Create high error rate
            for (let i = 0; i < 10; i++) {
                dashboard.recordRequest('GET /api/errors', 'GET', 100, i < 3 ? 500 : 200);
            }
            const data = dashboard.getDashboardData();
            const errorRateRec = data.recommendations.find(r => r.includes('error rate'));
            expect(errorRateRec).toBeDefined();
        });
        it('should recommend caching for high traffic endpoints', () => {
            // Create high traffic (simulate by recording many recent requests)
            for (let i = 0; i < 150; i++) {
                dashboard.recordRequest('GET /api/popular', 'GET', 100, 200);
            }
            const data = dashboard.getDashboardData();
            const cachingRec = data.recommendations.find(r => r.includes('caching'));
            expect(cachingRec).toBeDefined();
        });
        it('should recommend addressing critical alerts', () => {
            dashboard.recordRequest('GET /api/critical', 'GET', 6000, 200);
            const data = dashboard.getDashboardData();
            const criticalRec = data.recommendations.find(r => r.includes('critical performance issue'));
            expect(criticalRec).toBeDefined();
        });
        it('should recommend memory optimization when usage is high', () => {
            // Mock high memory usage
            jest.spyOn(os, 'freemem').mockReturnValue(mockOsMemory.total * 0.15); // 85% used
            const data = dashboard.getDashboardData();
            const memoryRec = data.recommendations.find(r => r.includes('memory usage'));
            expect(memoryRec).toBeDefined();
        });
        it('should recommend CPU optimization when usage is high', () => {
            // Mock high CPU usage
            jest.spyOn(process, 'cpuUsage').mockReturnValue({
                user: 85000000,
                system: 5000000,
            });
            const data = dashboard.getDashboardData();
            const cpuRec = data.recommendations.find(r => r.includes('CPU usage'));
            expect(cpuRec).toBeDefined();
        });
    });
    describe('Data Export and Analysis', () => {
        beforeEach(() => {
            // Set up test data
            dashboard.recordRequest('GET /api/test1', 'GET', 100, 200);
            dashboard.recordRequest('GET /api/test2', 'GET', 200, 500);
            dashboard.recordRequest('GET /api/test1', 'GET', 150, 200);
        });
        it('should export comprehensive performance data', () => {
            const exportData = dashboard.exportPerformanceData();
            expect(exportData).toHaveProperty('metrics');
            expect(exportData).toHaveProperty('endpointStats');
            expect(exportData).toHaveProperty('alerts');
            expect(exportData).toHaveProperty('systemInfo');
            expect(exportData.metrics).toHaveLength(3);
            expect(exportData.endpointStats).toHaveLength(2);
        });
        it('should calculate correct system info in export', () => {
            const exportData = dashboard.exportPerformanceData();
            expect(exportData.systemInfo.totalRequests).toBe(3);
            expect(exportData.systemInfo.averageResponseTime).toBeCloseTo(150, 0);
            expect(exportData.systemInfo.errorRate).toBeCloseTo(33.33, 1);
            expect(exportData.systemInfo.uptime).toBeGreaterThan(0);
            expect(exportData.systemInfo.startTime).toBeDefined();
        });
        it('should handle empty data in export', () => {
            const emptyDashboard = new performance_dashboard_1.PerformanceDashboard();
            const exportData = emptyDashboard.exportPerformanceData();
            expect(exportData.systemInfo.totalRequests).toBe(0);
            expect(exportData.systemInfo.averageResponseTime).toBe(0);
            expect(exportData.systemInfo.errorRate).toBe(0);
        });
    });
    describe('Utility Methods', () => {
        describe('getRecentAlerts', () => {
            it('should return specified number of recent alerts', () => {
                // Create multiple alerts
                for (let i = 0; i < 5; i++) {
                    dashboard.recordRequest('GET /api/slow', 'GET', 6000, 200);
                }
                const alerts = dashboard.getRecentAlerts(3);
                expect(alerts).toHaveLength(3);
            });
            it('should default to 20 alerts', () => {
                // Create more than 20 alerts
                for (let i = 0; i < 25; i++) {
                    dashboard.recordRequest('GET /api/slow', 'GET', 6000, 200);
                }
                const alerts = dashboard.getRecentAlerts();
                expect(alerts).toHaveLength(20);
            });
        });
        describe('resetMetrics', () => {
            beforeEach(() => {
                dashboard.recordRequest('GET /api/test', 'GET', 100, 200);
                dashboard.recordRequest('GET /api/slow', 'GET', 6000, 200); // Creates alert
            });
            it('should clear all metrics and alerts', () => {
                const emitSpy = jest.spyOn(dashboard, 'emit');
                dashboard.resetMetrics();
                const data = dashboard.getDashboardData();
                expect(data.performanceTimeline).toHaveLength(0);
                expect(data.endpointStats).toHaveLength(0);
                expect(data.recentAlerts).toHaveLength(0);
                expect(common_1.Logger.prototype.log).toHaveBeenCalledWith('Performance metrics reset');
                expect(emitSpy).toHaveBeenCalledWith('metrics-reset');
            });
            it('should reset start time', () => {
                const originalStartTime = dashboard.startTime;
                jest.advanceTimersByTime(5000);
                dashboard.resetMetrics();
                expect(dashboard.startTime).toBeGreaterThan(originalStartTime);
            });
        });
        describe('calculatePercentile', () => {
            it('should calculate percentiles correctly', () => {
                const sortedArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
                const p50 = dashboard.calculatePercentile(sortedArray, 50);
                const p95 = dashboard.calculatePercentile(sortedArray, 95);
                const p99 = dashboard.calculatePercentile(sortedArray, 99);
                expect(p50).toBe(5);
                expect(p95).toBe(10);
                expect(p99).toBe(10);
            });
            it('should handle empty arrays', () => {
                const result = dashboard.calculatePercentile([], 95);
                expect(result).toBe(0);
            });
            it('should handle single element arrays', () => {
                const result = dashboard.calculatePercentile([42], 95);
                expect(result).toBe(42);
            });
        });
    });
    describe('Error Handling and Edge Cases', () => {
        it('should handle system metrics collection errors', () => {
            jest.spyOn(os, 'totalmem').mockImplementation(() => {
                throw new Error('System metrics unavailable');
            });
            expect(() => dashboard.getCurrentSystemMetrics()).toThrow('System metrics unavailable');
        });
        it('should handle process metrics collection errors', () => {
            jest.spyOn(process, 'memoryUsage').mockImplementation(() => {
                throw new Error('Process metrics unavailable');
            });
            expect(() => dashboard.getCurrentSystemMetrics()).toThrow('Process metrics unavailable');
        });
        it('should handle extreme values in calculations', () => {
            // Test with very large response times
            dashboard.recordRequest('GET /api/extreme', 'GET', Number.MAX_SAFE_INTEGER, 200);
            const stats = dashboard.getEndpointStats('GET GET /api/extreme');
            expect(stats.averageResponseTime).toBe(Number.MAX_SAFE_INTEGER);
            expect(stats.maxResponseTime).toBe(Number.MAX_SAFE_INTEGER);
        });
        it('should handle zero memory scenarios', () => {
            jest.spyOn(os, 'totalmem').mockReturnValue(0);
            jest.spyOn(os, 'freemem').mockReturnValue(0);
            const systemMetrics = dashboard.getCurrentSystemMetrics();
            expect(systemMetrics.memory.totalMB).toBe(0);
            expect(systemMetrics.memory.usage).toBeNaN(); // Division by zero
        });
        it('should handle negative values gracefully', () => {
            jest.spyOn(process, 'cpuUsage').mockReturnValue({
                user: -1000,
                system: -500,
            });
            const cpuUsage = dashboard.calculateCpuUsage(process.cpuUsage());
            expect(cpuUsage).toBe(-0.15); // Negative CPU usage
        });
    });
    describe('Performance and Memory Management', () => {
        it('should maintain performance with large datasets', () => {
            const startTime = Date.now();
            // Record 1000 requests
            for (let i = 0; i < 1000; i++) {
                dashboard.recordRequest(`GET /api/test${i % 100}`, 'GET', Math.random() * 1000, 200);
            }
            const duration = Date.now() - startTime;
            expect(duration).toBeLessThan(1000); // Should complete within 1 second
        });
        it('should limit memory usage with metric pruning', () => {
            const initialMemory = process.memoryUsage().heapUsed;
            // Record many requests to trigger pruning
            for (let i = 0; i < 2000; i++) {
                dashboard.recordRequest('GET /api/test', 'GET', 100, 200);
            }
            const finalMemory = process.memoryUsage().heapUsed;
            const memoryIncrease = finalMemory - initialMemory;
            // Memory increase should be reasonable (less than 50MB)
            expect(memoryIncrease).toBeLessThan(50 * 1024 * 1024);
            expect(dashboard.metrics.length).toBe(1000); // Should be limited
        });
        it('should handle concurrent request recording', async () => {
            const promises = Array.from({ length: 100 }, (_, i) => Promise.resolve(dashboard.recordRequest(`GET /api/concurrent${i}`, 'GET', 100, 200)));
            await Promise.all(promises);
            const data = dashboard.getDashboardData();
            expect(data.performanceTimeline).toHaveLength(100);
            expect(data.endpointStats).toHaveLength(100);
        });
        it('should efficiently calculate statistics for high-frequency endpoints', () => {
            const startTime = Date.now();
            // Record 100 requests for the same endpoint
            for (let i = 0; i < 100; i++) {
                dashboard.recordRequest('GET /api/popular', 'GET', Math.random() * 500, 200);
            }
            const calculationTime = Date.now() - startTime;
            expect(calculationTime).toBeLessThan(100); // Should be fast
            const stats = dashboard.getEndpointStats('GET GET /api/popular');
            expect(stats.totalRequests).toBe(100);
            expect(stats.performance95thPercentile).toBeGreaterThan(0);
            expect(stats.performance99thPercentile).toBeGreaterThan(0);
        });
    });
    describe('Event System', () => {
        it('should emit events for all major operations', () => {
            const emitSpy = jest.spyOn(dashboard, 'emit');
            dashboard.startMonitoring();
            dashboard.recordRequest('GET /api/test', 'GET', 100, 200);
            dashboard.stopMonitoring();
            dashboard.resetMetrics();
            expect(emitSpy).toHaveBeenCalledWith('monitoring-started');
            expect(emitSpy).toHaveBeenCalledWith('request-recorded', expect.any(Object));
            expect(emitSpy).toHaveBeenCalledWith('monitoring-stopped');
            expect(emitSpy).toHaveBeenCalledWith('metrics-reset');
        });
        it('should emit alert events when alerts are created', () => {
            const emitSpy = jest.spyOn(dashboard, 'emit');
            dashboard.recordRequest('GET /api/slow', 'GET', 6000, 200);
            expect(emitSpy).toHaveBeenCalledWith('alert-created', expect.any(Object));
        });
        it('should emit system metrics events during monitoring', () => {
            const emitSpy = jest.spyOn(dashboard, 'emit');
            dashboard.startMonitoring();
            jest.advanceTimersByTime(5000);
            expect(emitSpy).toHaveBeenCalledWith('system-metrics-collected', expect.any(Object));
        });
    });
    describe('Singleton Instance', () => {
        it('should export a singleton instance', () => {
            expect(performance_dashboard_1.performanceDashboard).toBeInstanceOf(performance_dashboard_1.PerformanceDashboard);
        });
        it('should maintain state across imports', () => {
            performance_dashboard_1.performanceDashboard.recordRequest('GET /api/singleton', 'GET', 100, 200);
            const stats = performance_dashboard_1.performanceDashboard.getEndpointStats('GET GET /api/singleton');
            expect(stats).toBeDefined();
            expect(stats.totalRequests).toBe(1);
        });
    });
    describe('Middleware Integration', () => {
        it('should provide performance middleware', () => {
            const { performanceMiddleware } = require('./performance-dashboard');
            expect(performanceMiddleware).toBeDefined();
            expect(typeof performanceMiddleware).toBe('function');
        });
        it('should record requests through middleware', (done) => {
            const { performanceMiddleware } = require('./performance-dashboard');
            const mockReq = {
                method: 'GET',
                path: '/api/middleware-test',
                route: { path: '/api/middleware-test' }
            };
            const mockRes = {
                statusCode: 200,
                on: jest.fn((event, callback) => {
                    if (event === 'finish') {
                        setTimeout(callback, 10); // Simulate response time
                    }
                })
            };
            const mockNext = jest.fn();
            performanceMiddleware(mockReq, mockRes, mockNext);
            setTimeout(() => {
                expect(mockNext).toHaveBeenCalled();
                expect(mockRes.on).toHaveBeenCalledWith('finish', expect.any(Function));
                done();
            }, 50);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL21vbml0b3JpbmcvcGVyZm9ybWFuY2UtZGFzaGJvYXJkLnNwZWMudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQ0FBd0M7QUFDeEMsbUVBUWlDO0FBQ2pDLHlCQUF5QjtBQUN6QixtQ0FBbUM7QUFFbkMsUUFBUSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRTtJQUNwQyxJQUFJLFNBQStCLENBQUM7SUFDcEMsSUFBSSxtQkFBdUMsQ0FBQztJQUM1QyxJQUFJLHFCQUEyQyxDQUFDO0lBQ2hELElBQUksUUFBYyxDQUFDO0lBRW5CLHVCQUF1QjtJQUN2QixNQUFNLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBRWxELE1BQU0sZUFBZSxHQUF1QjtRQUMxQyxHQUFHLEVBQUUsUUFBUSxFQUFFLE9BQU87UUFDdEIsU0FBUyxFQUFFLFFBQVEsRUFBRSxPQUFPO1FBQzVCLFFBQVEsRUFBRSxRQUFRLEVBQUUsT0FBTztRQUMzQixRQUFRLEVBQUUsT0FBTyxFQUFFLE1BQU07UUFDekIsWUFBWSxFQUFFLE9BQU8sRUFBRSxNQUFNO0tBQzlCLENBQUM7SUFFRixNQUFNLFlBQVksR0FBb0I7UUFDcEMsSUFBSSxFQUFFLE9BQU8sRUFBRSwyQkFBMkI7UUFDMUMsTUFBTSxFQUFFLE1BQU0sRUFBRSw4QkFBOEI7S0FDL0MsQ0FBQztJQUVGLE1BQU0sWUFBWSxHQUFHO1FBQ25CLEtBQUssRUFBRSxXQUFXLEVBQUUsT0FBTztRQUMzQixJQUFJLEVBQUUsVUFBVSxFQUFFLE1BQU07S0FDekIsQ0FBQztJQUVGLE1BQU0sZUFBZSxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN6QyxNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMs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QUFFLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztZQUVsRCxVQUFVLENBQUMsR0FBRyxFQUFFO2dCQUNkLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO2dCQUNwQyxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hFLElBQUksRUFBRSxDQUFDO1lBQ1QsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ1QsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy9tb25pdG9yaW5nL3BlcmZvcm1hbmNlLWRhc2hib2FyZC5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IFxuICBQZXJmb3JtYW5jZURhc2hib2FyZCwgXG4gIFBlcmZvcm1hbmNlTWV0cmljcywgXG4gIEVuZHBvaW50U3RhdHMsIFxuICBTeXN0ZW1NZXRyaWNzLCBcbiAgUGVyZm9ybWFuY2VBbGVydCwgXG4gIERhc2hib2FyZERhdGEsXG4gIHBlcmZvcm1hbmNlRGFzaGJvYXJkXG59IGZyb20gJy4vcGVyZm9ybWFuY2UtZGFzaGJvYXJkJztcbmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJztcbmltcG9ydCAqIGFzIHByb2Nlc3MgZnJvbSAncHJvY2Vzcyc7XG5cbmRlc2NyaWJlKCdQZXJmb3JtYW5jZURhc2hib2FyZCcsICgpID0+IHtcbiAgbGV0IGRhc2hib2FyZDogUGVyZm9ybWFuY2VEYXNoYm9hcmQ7XG4gIGxldCBvcmlnaW5hbFNldEludGVydmFsOiB0eXBlb2Ygc2V0SW50ZXJ2YWw7XG4gIGxldCBvcmlnaW5hbENsZWFySW50ZXJ2YWw6IHR5cGVvZiBjbGVhckludGVydmFsO1xuICBsZXQgbW9ja0RhdGU6IERhdGU7XG5cbiAgLy8gTW9jayBkYXRhIHN0cnVjdHVyZXNcbiAgY29uc3QgbW9ja0RhdGUgPSBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDowMDowMFonKTtcblxuICBjb25zdCBtb2NrTWVtb3J5VXNhZ2U6IE5vZGVKUy5NZW1vcnlVc2FnZSA9IHtcbiAgICByc3M6IDY3MTA4ODY0LCAvLyA2NE1CXG4gICAgaGVhcFRvdGFsOiA1MDMzMTY0OCwgLy8gNDhNQlxuICAgIGhlYXBVc2VkOiAzMzU1NDQzMiwgLy8gMzJNQlxuICAgIGV4dGVybmFsOiA4Mzg4NjA4LCAvLyA4TUJcbiAgICBhcnJheUJ1ZmZlcnM6IDEwNDg1NzYsIC8vIDFNQlxuICB9O1xuXG4gIGNvbnN0IG1vY2tDcHVVc2FnZTogTm9kZUpTLkNwdVVzYWdlID0ge1xuICAgIHVzZXI6IDEwMDAwMDAsIC8vIDEgc2Vjb25kIGluIG1pY3Jvc2Vjb25kc1xuICAgIHN5c3RlbTogNTAwMDAwLCAvLyAwLjUgc2Vjb25kcyBpbiBtaWNyb3NlY29uZHNcbiAgfTtcblxuICBjb25zdCBtb2NrT3NNZW1vcnkgPSB7XG4gICAgdG90YWw6IDE3MTc5ODY5MTg0LCAvLyAxNkdCXG4gICAgZnJlZTogODU4OTkzNDU5MiwgLy8gOEdCXG4gIH07XG5cbiAgY29uc3QgbW9ja0xvYWRBdmVyYWdlID0gWzAuODUsIDEuMiwgMS41XTtcbiAgY29uc3QgbW9ja0NwdXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA4IH0sICgpID0+ICh7IG1vZGVsOiAnVGVzdCBDUFUnIH0pKTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBkYXNoYm9hcmQgPSBuZXcgUGVyZm9ybWFuY2VEYXNoYm9hcmQoKTtcblxuICAgIC8vIE1vY2sgdGltZXJzXG4gICAgamVzdC51c2VGYWtlVGltZXJzKCk7XG4gICAgamVzdC5zZXRTeXN0ZW1UaW1lKG1vY2tEYXRlKTtcblxuICAgIC8vIFN0b3JlIG9yaWdpbmFsIGZ1bmN0aW9uc1xuICAgIG9yaWdpbmFsU2V0SW50ZXJ2YWwgPSBnbG9iYWwuc2V0SW50ZXJ2YWw7XG4gICAgb3JpZ2luYWxDbGVhckludGVydmFsID0gZ2xvYmFsLmNsZWFySW50ZXJ2YWw7XG5cbiAgICAvLyBNb2NrIHByb2Nlc3MgYW5kIG9zIG1vZHVsZXNcbiAgICBqZXN0LnNweU9uKHByb2Nlc3MsICdtZW1vcnlVc2FnZScpLm1vY2tSZXR1cm5WYWx1ZShtb2NrTWVtb3J5VXNhZ2UpO1xuICAgIGplc3Quc3B5T24ocHJvY2VzcywgJ2NwdVVzYWdlJykubW9ja1JldHVyblZhbHVlKG1vY2tDcHVVc2FnZSk7XG4gICAgamVzdC5zcHlPbihwcm9jZXNzLCAndXB0aW1lJykubW9ja1JldHVyblZhbHVlKDg2NDAwKTsgLy8gMjQgaG91cnNcbiAgICBcbiAgICBqZXN0LnNweU9uKG9zLCAndG90YWxtZW0nKS5tb2NrUmV0dXJuVmFsdWUobW9ja09zTWVtb3J5LnRvdGFsKTtcbiAgICBqZXN0LnNweU9uKG9zLCAnZnJlZW1lbScpLm1vY2tSZXR1cm5WYWx1ZShtb2NrT3NNZW1vcnkuZnJlZSk7XG4gICAgamVzdC5zcHlPbihvcywgJ2xvYWRhdmcnKS5tb2NrUmV0dXJuVmFsdWUobW9ja0xvYWRBdmVyYWdlKTtcbiAgICBqZXN0LnNweU9uKG9zLCAnY3B1cycpLm1vY2tSZXR1cm5WYWx1ZShtb2NrQ3B1cyBhcyBhbnkpO1xuXG4gICAgLy8gTW9jayBsb2dnZXIgdG8gcHJldmVudCBjb25zb2xlIG91dHB1dCBkdXJpbmcgdGVzdHNcbiAgICBqZXN0LnNweU9uKExvZ2dlci5wcm90b3R5cGUsICdsb2cnKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcbiAgICBqZXN0LnNweU9uKExvZ2dlci5wcm90b3R5cGUsICd3YXJuJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gICAgamVzdC5zcHlPbihMb2dnZXIucHJvdG90eXBlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBkYXNoYm9hcmQuc3RvcE1vbml0b3JpbmcoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBqZXN0LnVzZVJlYWxUaW1lcnMoKTtcbiAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29uc3RydWN0b3IgYW5kIEluaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSBkYXNoYm9hcmQgd2l0aCBkZWZhdWx0IHZhbHVlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChkYXNoYm9hcmQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGFzaGJvYXJkKS50b0JlSW5zdGFuY2VPZihQZXJmb3JtYW5jZURhc2hib2FyZCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGV4dGVuZCBFdmVudEVtaXR0ZXInLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZGFzaGJvYXJkLm9uKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhc2hib2FyZC5lbWl0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhc2hib2FyZC5yZW1vdmVMaXN0ZW5lcikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9nIGluaXRpYWxpemF0aW9uIG1lc3NhZ2UnLCAoKSA9PiB7XG4gICAgICBuZXcgUGVyZm9ybWFuY2VEYXNoYm9hcmQoKTtcbiAgICAgIGV4cGVjdChMb2dnZXIucHJvdG90eXBlLmxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1BlcmZvcm1hbmNlIERhc2hib2FyZCBpbml0aWFsaXplZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggZW1wdHkgbWV0cmljcyBhbmQgYWxlcnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGFzaGJvYXJkRGF0YSA9IGRhc2hib2FyZC5nZXREYXNoYm9hcmREYXRhKCk7XG4gICAgICBleHBlY3QoZGFzaGJvYXJkRGF0YS5wZXJmb3JtYW5jZVRpbWVsaW5lKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICBleHBlY3QoZGFzaGJvYXJkRGF0YS5yZWNlbnRBbGVydHMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhLmVuZHBvaW50U3RhdHMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01vbml0b3JpbmcgTGlmZWN5Y2xlJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdzdGFydE1vbml0b3JpbmcnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHN0YXJ0IG1vbml0b3JpbmcgYW5kIHNldCBpbnRlcm5hbCBzdGF0ZScsICgpID0+IHtcbiAgICAgICAgY29uc3QgZW1pdFNweSA9IGplc3Quc3B5T24oZGFzaGJvYXJkLCAnZW1pdCcpO1xuXG4gICAgICAgIGRhc2hib2FyZC5zdGFydE1vbml0b3JpbmcoKTtcblxuICAgICAgICBleHBlY3QoTG9nZ2VyLnByb3RvdHlwZS5sb2cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdQZXJmb3JtYW5jZSBtb25pdG9yaW5nIHN0YXJ0ZWQnKTtcbiAgICAgICAgZXhwZWN0KGVtaXRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdtb25pdG9yaW5nLXN0YXJ0ZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBzdGFydCBtb25pdG9yaW5nIHR3aWNlJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBsb2dTcHkgPSBqZXN0LnNweU9uKExvZ2dlci5wcm90b3R5cGUsICd3YXJuJyk7XG5cbiAgICAgICAgZGFzaGJvYXJkLnN0YXJ0TW9uaXRvcmluZygpO1xuICAgICAgICBkYXNoYm9hcmQuc3RhcnRNb25pdG9yaW5nKCk7XG5cbiAgICAgICAgZXhwZWN0KGxvZ1NweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ01vbml0b3JpbmcgYWxyZWFkeSBzdGFydGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBzZXQgdXAgaW50ZXJ2YWwgZm9yIGNvbGxlY3Rpbmcgc3lzdGVtIG1ldHJpY3MnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNldEludGVydmFsU3B5ID0gamVzdC5zcHlPbihnbG9iYWwsICdzZXRJbnRlcnZhbCcpO1xuXG4gICAgICAgIGRhc2hib2FyZC5zdGFydE1vbml0b3JpbmcoKTtcblxuICAgICAgICBleHBlY3Qoc2V0SW50ZXJ2YWxTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5hbnkoRnVuY3Rpb24pLCA1MDAwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNvbGxlY3Qgc3lzdGVtIG1ldHJpY3MgcGVyaW9kaWNhbGx5JywgKCkgPT4ge1xuICAgICAgICBjb25zdCBlbWl0U3B5ID0gamVzdC5zcHlPbihkYXNoYm9hcmQsICdlbWl0Jyk7XG5cbiAgICAgICAgZGFzaGJvYXJkLnN0YXJ0TW9uaXRvcmluZygpO1xuXG4gICAgICAgIC8vIEFkdmFuY2UgdGltZXIgYnkgNSBzZWNvbmRzXG4gICAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSg1MDAwKTtcblxuICAgICAgICBleHBlY3QoZW1pdFNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3N5c3RlbS1tZXRyaWNzLWNvbGxlY3RlZCcsIGV4cGVjdC5hbnkoT2JqZWN0KSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgc3RhcnQgdGltZSB3aGVuIG1vbml0b3Jpbmcgc3RhcnRzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBpbml0aWFsVGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSgxMDAwKTtcblxuICAgICAgICBkYXNoYm9hcmQuc3RhcnRNb25pdG9yaW5nKCk7XG5cbiAgICAgICAgLy8gU3RhcnQgdGltZSBzaG91bGQgYmUgdXBkYXRlZCB0byBjdXJyZW50IHRpbWVcbiAgICAgICAgZXhwZWN0KChkYXNoYm9hcmQgYXMgYW55KS5zdGFydFRpbWUpLnRvQmVHcmVhdGVyVGhhbihpbml0aWFsVGltZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdzdG9wTW9uaXRvcmluZycsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgc3RvcCBtb25pdG9yaW5nIGFuZCBjbGVhciBpbnRlcnZhbCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgZW1pdFNweSA9IGplc3Quc3B5T24oZGFzaGJvYXJkLCAnZW1pdCcpO1xuICAgICAgICBjb25zdCBjbGVhckludGVydmFsU3B5ID0gamVzdC5zcHlPbihnbG9iYWwsICdjbGVhckludGVydmFsJyk7XG5cbiAgICAgICAgZGFzaGJvYXJkLnN0YXJ0TW9uaXRvcmluZygpO1xuICAgICAgICBkYXNoYm9hcmQuc3RvcE1vbml0b3JpbmcoKTtcblxuICAgICAgICBleHBlY3QoY2xlYXJJbnRlcnZhbFNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgICBleHBlY3QoTG9nZ2VyLnByb3RvdHlwZS5sb2cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdQZXJmb3JtYW5jZSBtb25pdG9yaW5nIHN0b3BwZWQnKTtcbiAgICAgICAgZXhwZWN0KGVtaXRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdtb25pdG9yaW5nLXN0b3BwZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBmYWlsIHdoZW4gc3RvcHBpbmcgbW9uaXRvcmluZyB0aGF0IHdhcyBuZXZlciBzdGFydGVkJywgKCkgPT4ge1xuICAgICAgICBleHBlY3QoKCkgPT4gZGFzaGJvYXJkLnN0b3BNb25pdG9yaW5nKCkpLm5vdC50b1Rocm93KCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbXVsdGlwbGUgc3RvcCBjYWxscyBncmFjZWZ1bGx5JywgKCkgPT4ge1xuICAgICAgICBkYXNoYm9hcmQuc3RhcnRNb25pdG9yaW5nKCk7XG4gICAgICAgIGRhc2hib2FyZC5zdG9wTW9uaXRvcmluZygpO1xuICAgICAgICBcbiAgICAgICAgZXhwZWN0KCgpID0+IGRhc2hib2FyZC5zdG9wTW9uaXRvcmluZygpKS5ub3QudG9UaHJvdygpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZXF1ZXN0IFJlY29yZGluZycsICgpID0+IHtcbiAgICBkZXNjcmliZSgncmVjb3JkUmVxdWVzdCcsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgcmVjb3JkIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0JywgKCkgPT4ge1xuICAgICAgICBjb25zdCBlbWl0U3B5ID0gamVzdC5zcHlPbihkYXNoYm9hcmQsICdlbWl0Jyk7XG5cbiAgICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3VzZXJzJywgJ0dFVCcsIDE1MCwgMjAwLCAyKTtcblxuICAgICAgICBjb25zdCBkYXNoYm9hcmREYXRhID0gZGFzaGJvYXJkLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgICAgZXhwZWN0KGRhc2hib2FyZERhdGEucGVyZm9ybWFuY2VUaW1lbGluZSkudG9IYXZlTGVuZ3RoKDEpO1xuXG4gICAgICAgIGNvbnN0IG1ldHJpYyA9IGRhc2hib2FyZERhdGEucGVyZm9ybWFuY2VUaW1lbGluZVswXTtcbiAgICAgICAgZXhwZWN0KG1ldHJpYy5lbmRwb2ludCkudG9CZSgnR0VUIEdFVCAvYXBpL3VzZXJzJyk7XG4gICAgICAgIGV4cGVjdChtZXRyaWMubWV0aG9kKS50b0JlKCdHRVQnKTtcbiAgICAgICAgZXhwZWN0KG1ldHJpYy5yZXNwb25zZVRpbWUpLnRvQmUoMTUwKTtcbiAgICAgICAgZXhwZWN0KG1ldHJpYy5zdGF0dXNDb2RlKS50b0JlKDIwMCk7XG4gICAgICAgIGV4cGVjdChtZXRyaWMuZGF0YWJhc2VDb25uZWN0aW9ucykudG9CZSgyKTtcbiAgICAgICAgZXhwZWN0KG1ldHJpYy5lcnJvckNvdW50KS50b0JlKDApO1xuICAgICAgICBleHBlY3QobWV0cmljLnJlcXVlc3RDb3VudCkudG9CZSgxKTtcblxuICAgICAgICBleHBlY3QoZW1pdFNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3JlcXVlc3QtcmVjb3JkZWQnLCBtZXRyaWMpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVjb3JkIGFuIGVycm9yIHJlcXVlc3QnLCAoKSA9PiB7XG4gICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdQT1NUIC9hcGkvdXNlcnMnLCAnUE9TVCcsIDUwMCwgNTAwKTtcblxuICAgICAgICBjb25zdCBkYXNoYm9hcmREYXRhID0gZGFzaGJvYXJkLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgICAgY29uc3QgbWV0cmljID0gZGFzaGJvYXJkRGF0YS5wZXJmb3JtYW5jZVRpbWVsaW5lWzBdO1xuXG4gICAgICAgIGV4cGVjdChtZXRyaWMuc3RhdHVzQ29kZSkudG9CZSg1MDApO1xuICAgICAgICBleHBlY3QobWV0cmljLmVycm9yQ291bnQpLnRvQmUoMSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBpbmNsdWRlIG1lbW9yeSBhbmQgQ1BVIHVzYWdlIGluIG1ldHJpY3MnLCAoKSA9PiB7XG4gICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS90ZXN0JywgJ0dFVCcsIDEwMCwgMjAwKTtcblxuICAgICAgICBjb25zdCBkYXNoYm9hcmREYXRhID0gZGFzaGJvYXJkLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgICAgY29uc3QgbWV0cmljID0gZGFzaGJvYXJkRGF0YS5wZXJmb3JtYW5jZVRpbWVsaW5lWzBdO1xuXG4gICAgICAgIGV4cGVjdChtZXRyaWMubWVtb3J5VXNhZ2UpLnRvRXF1YWwobW9ja01lbW9yeVVzYWdlKTtcbiAgICAgICAgZXhwZWN0KG1ldHJpYy5jcHVVc2FnZSkudG9FcXVhbChtb2NrQ3B1VXNhZ2UpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdXBkYXRlIGVuZHBvaW50IHN0YXRpc3RpY3MnLCAoKSA9PiB7XG4gICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS91c2VycycsICdHRVQnLCAxNTAsIDIwMCk7XG4gICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS91c2VycycsICdHRVQnLCAyMDAsIDIwMCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdHMgPSBkYXNoYm9hcmQuZ2V0RW5kcG9pbnRTdGF0cygnR0VUIEdFVCAvYXBpL3VzZXJzJyk7XG4gICAgICAgIGV4cGVjdChzdGF0cykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHN0YXRzIS50b3RhbFJlcXVlc3RzKS50b0JlKDIpO1xuICAgICAgICBleHBlY3Qoc3RhdHMhLmF2ZXJhZ2VSZXNwb25zZVRpbWUpLnRvQmUoMTc1KTtcbiAgICAgICAgZXhwZWN0KHN0YXRzIS5taW5SZXNwb25zZVRpbWUpLnRvQmUoMTUwKTtcbiAgICAgICAgZXhwZWN0KHN0YXRzIS5tYXhSZXNwb25zZVRpbWUpLnRvQmUoMjAwKTtcbiAgICAgICAgZXhwZWN0KHN0YXRzIS5lcnJvclJhdGUpLnRvQmUoMCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBsaW1pdCBtZXRyaWNzIHRvIDEwMDAgZW50cmllcycsICgpID0+IHtcbiAgICAgICAgLy8gUmVjb3JkIDEwMDUgcmVxdWVzdHNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA1OyBpKyspIHtcbiAgICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdChgR0VUIC9hcGkvdGVzdCR7aX1gLCAnR0VUJywgMTAwLCAyMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGFzaGJvYXJkRGF0YSA9IGRhc2hib2FyZC5nZXREYXNoYm9hcmREYXRhKCk7XG4gICAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhLnBlcmZvcm1hbmNlVGltZWxpbmUpLnRvSGF2ZUxlbmd0aCgxMDApOyAvLyBMYXN0IDEwMCBmcm9tIHNsaWNlKC0xMDApXG4gICAgICAgIGV4cGVjdCgoZGFzaGJvYXJkIGFzIGFueSkubWV0cmljcykudG9IYXZlTGVuZ3RoKDEwMDApOyAvLyBJbnRlcm5hbCBsaW1pdFxuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdHJpZ2dlciB0aHJlc2hvbGQgY2hlY2tzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBjcmVhdGVBbGVydFNweSA9IGplc3Quc3B5T24oZGFzaGJvYXJkIGFzIGFueSwgJ2NyZWF0ZUFsZXJ0Jyk7XG5cbiAgICAgICAgLy8gUmVjb3JkIGEgc2xvdyByZXF1ZXN0IHRoYXQgc2hvdWxkIHRyaWdnZXIgd2FybmluZyB0aHJlc2hvbGRcbiAgICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3Nsb3cnLCAnR0VUJywgMjAwMCwgMjAwKTtcblxuICAgICAgICBleHBlY3QoY3JlYXRlQWxlcnRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICdISUdIJyxcbiAgICAgICAgICAnUkVTUE9OU0VfVElNRScsXG4gICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1Nsb3cgcmVzcG9uc2UgdGltZTogMjAwMG1zJyksXG4gICAgICAgICAgJ0dFVCBHRVQgL2FwaS9zbG93JyxcbiAgICAgICAgICAyMDAwLFxuICAgICAgICAgIDEwMDBcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSByZXF1ZXN0cyB3aXRoIGRlZmF1bHQgZGF0YWJhc2UgY29ubmVjdGlvbnMnLCAoKSA9PiB7XG4gICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS90ZXN0JywgJ0dFVCcsIDEwMCwgMjAwKTtcblxuICAgICAgICBjb25zdCBkYXNoYm9hcmREYXRhID0gZGFzaGJvYXJkLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgICAgY29uc3QgbWV0cmljID0gZGFzaGJvYXJkRGF0YS5wZXJmb3JtYW5jZVRpbWVsaW5lWzBdO1xuXG4gICAgICAgIGV4cGVjdChtZXRyaWMuZGF0YWJhc2VDb25uZWN0aW9ucykudG9CZSgwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0VuZHBvaW50IFN0YXRpc3RpY3MnLCAoKSA9PiB7XG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgLy8gUmVjb3JkIHNvbWUgdGVzdCByZXF1ZXN0c1xuICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvdXNlcnMnLCAnR0VUJywgMTAwLCAyMDApO1xuICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvdXNlcnMnLCAnR0VUJywgMjAwLCAyMDApO1xuICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvdXNlcnMnLCAnR0VUJywgMTUwLCA1MDApO1xuICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnUE9TVCAvYXBpL3VzZXJzJywgJ1BPU1QnLCAzMDAsIDIwMSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY29ycmVjdCBlbmRwb2ludCBzdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBzdGF0cyA9IGRhc2hib2FyZC5nZXRFbmRwb2ludFN0YXRzKCdHRVQgR0VUIC9hcGkvdXNlcnMnKTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChzdGF0cykudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHN0YXRzIS50b3RhbFJlcXVlc3RzKS50b0JlKDMpO1xuICAgICAgICBleHBlY3Qoc3RhdHMhLmF2ZXJhZ2VSZXNwb25zZVRpbWUpLnRvQmVDbG9zZVRvKDE1MCwgMSk7XG4gICAgICAgIGV4cGVjdChzdGF0cyEubWluUmVzcG9uc2VUaW1lKS50b0JlKDEwMCk7XG4gICAgICAgIGV4cGVjdChzdGF0cyEubWF4UmVzcG9uc2VUaW1lKS50b0JlKDIwMCk7XG4gICAgICAgIGV4cGVjdChzdGF0cyEuZXJyb3JDb3VudCkudG9CZSgxKTtcbiAgICAgICAgZXhwZWN0KHN0YXRzIS5lcnJvclJhdGUpLnRvQmVDbG9zZVRvKDMzLjMzLCAxKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBwZXJjZW50aWxlcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgIC8vIEFkZCBtb3JlIGRhdGEgcG9pbnRzIGZvciBiZXR0ZXIgcGVyY2VudGlsZSBjYWxjdWxhdGlvblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwOyBpKyspIHtcbiAgICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvdGVzdCcsICdHRVQnLCBpICogMTAsIDIwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0cyA9IGRhc2hib2FyZC5nZXRFbmRwb2ludFN0YXRzKCdHRVQgR0VUIC9hcGkvdGVzdCcpO1xuICAgICAgICBleHBlY3Qoc3RhdHMhLnBlcmZvcm1hbmNlOTV0aFBlcmNlbnRpbGUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KHN0YXRzIS5wZXJmb3JtYW5jZTk5dGhQZXJjZW50aWxlKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdChzdGF0cyEucGVyZm9ybWFuY2U5OXRoUGVyY2VudGlsZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChzdGF0cyEucGVyZm9ybWFuY2U5NXRoUGVyY2VudGlsZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgcmVxdWVzdHMgcGVyIG1pbnV0ZScsICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSBkYXNoYm9hcmQuZ2V0RW5kcG9pbnRTdGF0cygnR0VUIEdFVCAvYXBpL3VzZXJzJyk7XG4gICAgICAgIGV4cGVjdChzdGF0cyEucmVxdWVzdHNQZXJNaW51dGUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGZvciBub24tZXhpc3RlbnQgZW5kcG9pbnQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gZGFzaGJvYXJkLmdldEVuZHBvaW50U3RhdHMoJ0dFVCAvYXBpL25vbmV4aXN0ZW50Jyk7XG4gICAgICAgIGV4cGVjdChzdGF0cykudG9CZU51bGwoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHVwZGF0ZSBsYXN0IHVwZGF0ZWQgdGltZXN0YW1wJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBpbml0aWFsVGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSgxMDAwKTtcbiAgICAgICAgXG4gICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS90ZXN0JywgJ0dFVCcsIDEwMCwgMjAwKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0YXRzID0gZGFzaGJvYXJkLmdldEVuZHBvaW50U3RhdHMoJ0dFVCBHRVQgL2FwaS90ZXN0Jyk7XG4gICAgICAgIGV4cGVjdChzdGF0cyEubGFzdFVwZGF0ZWQpLnRvQmVHcmVhdGVyVGhhbihpbml0aWFsVGltZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N5c3RlbSBNZXRyaWNzIENvbGxlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjb2xsZWN0IGN1cnJlbnQgc3lzdGVtIG1ldHJpY3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzeXN0ZW1NZXRyaWNzID0gKGRhc2hib2FyZCBhcyBhbnkpLmdldEN1cnJlbnRTeXN0ZW1NZXRyaWNzKCk7XG5cbiAgICAgIGV4cGVjdChzeXN0ZW1NZXRyaWNzKS50b0hhdmVQcm9wZXJ0eSgndGltZXN0YW1wJyk7XG4gICAgICBleHBlY3Qoc3lzdGVtTWV0cmljcykudG9IYXZlUHJvcGVydHkoJ2NwdScpO1xuICAgICAgZXhwZWN0KHN5c3RlbU1ldHJpY3MpLnRvSGF2ZVByb3BlcnR5KCdtZW1vcnknKTtcbiAgICAgIGV4cGVjdChzeXN0ZW1NZXRyaWNzKS50b0hhdmVQcm9wZXJ0eSgnbmV0d29yaycpO1xuICAgICAgZXhwZWN0KHN5c3RlbU1ldHJpY3MpLnRvSGF2ZVByb3BlcnR5KCdkYXRhYmFzZScpO1xuXG4gICAgICAvLyBDUFUgbWV0cmljc1xuICAgICAgZXhwZWN0KHN5c3RlbU1ldHJpY3MuY3B1LnVzYWdlKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3Qoc3lzdGVtTWV0cmljcy5jcHUubG9hZEF2ZXJhZ2UpLnRvRXF1YWwobW9ja0xvYWRBdmVyYWdlKTtcblxuICAgICAgLy8gTWVtb3J5IG1ldHJpY3NcbiAgICAgIGV4cGVjdChzeXN0ZW1NZXRyaWNzLm1lbW9yeS50b3RhbE1CKS50b0JlKE1hdGgucm91bmQobW9ja09zTWVtb3J5LnRvdGFsIC8gMTAyNCAvIDEwMjQpKTtcbiAgICAgIGV4cGVjdChzeXN0ZW1NZXRyaWNzLm1lbW9yeS51c2VkTUIpLnRvQmUoTWF0aC5yb3VuZCgobW9ja09zTWVtb3J5LnRvdGFsIC0gbW9ja09zTWVtb3J5LmZyZWUpIC8gMTAyNCAvIDEwMjQpKTtcbiAgICAgIGV4cGVjdChzeXN0ZW1NZXRyaWNzLm1lbW9yeS5mcmVlTUIpLnRvQmUoTWF0aC5yb3VuZChtb2NrT3NNZW1vcnkuZnJlZSAvIDEwMjQgLyAxMDI0KSk7XG4gICAgICBleHBlY3Qoc3lzdGVtTWV0cmljcy5tZW1vcnkudXNhZ2UpLnRvQmUoNTApOyAvLyA1MCUgdXNlZFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgbWVtb3J5IHVzYWdlIHBlcmNlbnRhZ2UgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3lzdGVtTWV0cmljcyA9IChkYXNoYm9hcmQgYXMgYW55KS5nZXRDdXJyZW50U3lzdGVtTWV0cmljcygpO1xuICAgICAgY29uc3QgZXhwZWN0ZWRVc2FnZSA9ICgobW9ja09zTWVtb3J5LnRvdGFsIC0gbW9ja09zTWVtb3J5LmZyZWUpIC8gbW9ja09zTWVtb3J5LnRvdGFsKSAqIDEwMDtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN5c3RlbU1ldHJpY3MubWVtb3J5LnVzYWdlKS50b0JlQ2xvc2VUbyhleHBlY3RlZFVzYWdlLCAxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHJlcXVlc3RzIHBlciBzZWNvbmQnLCAoKSA9PiB7XG4gICAgICAvLyBSZWNvcmQgc29tZSByZXF1ZXN0c1xuICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3Rlc3QxJywgJ0dFVCcsIDEwMCwgMjAwKTtcbiAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS90ZXN0MicsICdHRVQnLCAxMDAsIDIwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJwcyA9IChkYXNoYm9hcmQgYXMgYW55KS5jYWxjdWxhdGVSZXF1ZXN0c1BlclNlY29uZCgpO1xuICAgICAgZXhwZWN0KHJwcykudG9CZSgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIENQVSB1c2FnZSBmcm9tIHByb2Nlc3MuY3B1VXNhZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjcHVVc2FnZSA9IChkYXNoYm9hcmQgYXMgYW55KS5jYWxjdWxhdGVDcHVVc2FnZShtb2NrQ3B1VXNhZ2UpO1xuICAgICAgY29uc3QgZXhwZWN0ZWRVc2FnZSA9ICgobW9ja0NwdVVzYWdlLnVzZXIgKyBtb2NrQ3B1VXNhZ2Uuc3lzdGVtKSAvIDEwMDAwMDApICogMTAwO1xuICAgICAgXG4gICAgICBleHBlY3QoY3B1VXNhZ2UpLnRvQmUoZXhwZWN0ZWRVc2FnZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVtaXQgc3lzdGVtIG1ldHJpY3Mgd2hlbiBjb2xsZWN0ZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlbWl0U3B5ID0gamVzdC5zcHlPbihkYXNoYm9hcmQsICdlbWl0Jyk7XG5cbiAgICAgIGRhc2hib2FyZC5zdGFydE1vbml0b3JpbmcoKTtcbiAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSg1MDAwKTtcblxuICAgICAgZXhwZWN0KGVtaXRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdzeXN0ZW0tbWV0cmljcy1jb2xsZWN0ZWQnLCBleHBlY3QuYW55KE9iamVjdCkpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWxlcnQgU3lzdGVtJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdSZXNwb25zZSBUaW1lIEFsZXJ0cycsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGNyaXRpY2FsIGFsZXJ0IGZvciB2ZXJ5IHNsb3cgcmVzcG9uc2VzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBlbWl0U3B5ID0gamVzdC5zcHlPbihkYXNoYm9hcmQsICdlbWl0Jyk7XG5cbiAgICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3Nsb3cnLCAnR0VUJywgNjAwMCwgMjAwKTtcblxuICAgICAgICBjb25zdCBhbGVydHMgPSBkYXNoYm9hcmQuZ2V0UmVjZW50QWxlcnRzKCk7XG4gICAgICAgIGV4cGVjdChhbGVydHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0c1swXS5zZXZlcml0eSkudG9CZSgnQ1JJVElDQUwnKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0c1swXS50eXBlKS50b0JlKCdSRVNQT05TRV9USU1FJyk7XG4gICAgICAgIGV4cGVjdChhbGVydHNbMF0udmFsdWUpLnRvQmUoNjAwMCk7XG4gICAgICAgIGV4cGVjdChhbGVydHNbMF0udGhyZXNob2xkKS50b0JlKDUwMDApO1xuXG4gICAgICAgIGV4cGVjdChlbWl0U3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnYWxlcnQtY3JlYXRlZCcsIGFsZXJ0c1swXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgd2FybmluZyBhbGVydCBmb3Igc2xvdyByZXNwb25zZXMnLCAoKSA9PiB7XG4gICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS9tZWRpdW0nLCAnR0VUJywgMjAwMCwgMjAwKTtcblxuICAgICAgICBjb25zdCBhbGVydHMgPSBkYXNoYm9hcmQuZ2V0UmVjZW50QWxlcnRzKCk7XG4gICAgICAgIGV4cGVjdChhbGVydHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0c1swXS5zZXZlcml0eSkudG9CZSgnSElHSCcpO1xuICAgICAgICBleHBlY3QoYWxlcnRzWzBdLnR5cGUpLnRvQmUoJ1JFU1BPTlNFX1RJTUUnKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0c1swXS52YWx1ZSkudG9CZSgyMDAwKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0c1swXS50aHJlc2hvbGQpLnRvQmUoMTAwMCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgY3JlYXRlIGFsZXJ0IGZvciBmYXN0IHJlc3BvbnNlcycsICgpID0+IHtcbiAgICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL2Zhc3QnLCAnR0VUJywgMTAwLCAyMDApO1xuXG4gICAgICAgIGNvbnN0IGFsZXJ0cyA9IGRhc2hib2FyZC5nZXRSZWNlbnRBbGVydHMoKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0cykudG9IYXZlTGVuZ3RoKDApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnRXJyb3IgUmF0ZSBBbGVydHMnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBjcml0aWNhbCBhbGVydCBmb3IgaGlnaCBlcnJvciByYXRlcycsICgpID0+IHtcbiAgICAgICAgLy8gQ3JlYXRlIHJlcXVlc3RzIHdpdGggPjEwJSBlcnJvciByYXRlXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS9lcnJvcicsICdHRVQnLCAxMDAsIGkgPCA5ID8gMjAwIDogNTAwKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVGhlIGxhc3QgcmVxdWVzdCBzaG91bGQgdHJpZ2dlciB0aGUgYWxlcnRcbiAgICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL2Vycm9yJywgJ0dFVCcsIDEwMCwgNTAwKTtcblxuICAgICAgICBjb25zdCBhbGVydHMgPSBkYXNoYm9hcmQuZ2V0UmVjZW50QWxlcnRzKDEpO1xuICAgICAgICBleHBlY3QoYWxlcnRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXJyb3JSYXRlQWxlcnQgPSBhbGVydHMuZmluZChhID0+IGEudHlwZSA9PT0gJ0VSUk9SX1JBVEUnKTtcbiAgICAgICAgaWYgKGVycm9yUmF0ZUFsZXJ0KSB7XG4gICAgICAgICAgZXhwZWN0KGVycm9yUmF0ZUFsZXJ0LnNldmVyaXR5KS50b0JlKCdDUklUSUNBTCcpO1xuICAgICAgICAgIGV4cGVjdChlcnJvclJhdGVBbGVydC52YWx1ZSkudG9CZUdyZWF0ZXJUaGFuKDEwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIHdhcm5pbmcgYWxlcnQgZm9yIG1lZGl1bSBlcnJvciByYXRlcycsICgpID0+IHtcbiAgICAgICAgLy8gQ3JlYXRlIHJlcXVlc3RzIHdpdGggfjclIGVycm9yIHJhdGVcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNTsgaSsrKSB7XG4gICAgICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3dhcm5pbmcnLCAnR0VUJywgMTAwLCBpID09PSAwID8gNTAwIDogMjAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFsZXJ0cyA9IGRhc2hib2FyZC5nZXRSZWNlbnRBbGVydHMoKTtcbiAgICAgICAgY29uc3QgZXJyb3JSYXRlQWxlcnQgPSBhbGVydHMuZmluZChhID0+IGEudHlwZSA9PT0gJ0VSUk9SX1JBVEUnKTtcbiAgICAgICAgaWYgKGVycm9yUmF0ZUFsZXJ0KSB7XG4gICAgICAgICAgZXhwZWN0KGVycm9yUmF0ZUFsZXJ0LnNldmVyaXR5KS50b0JlKCdISUdIJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1N5c3RlbSBSZXNvdXJjZSBBbGVydHMnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBtZW1vcnkgdXNhZ2UgYWxlcnRzJywgKCkgPT4ge1xuICAgICAgICAvLyBNb2NrIGhpZ2ggbWVtb3J5IHVzYWdlXG4gICAgICAgIGplc3Quc3B5T24ob3MsICdmcmVlbWVtJykubW9ja1JldHVyblZhbHVlKG1vY2tPc01lbW9yeS50b3RhbCAqIDAuMDUpOyAvLyA5NSUgdXNlZFxuXG4gICAgICAgIGRhc2hib2FyZC5zdGFydE1vbml0b3JpbmcoKTtcbiAgICAgICAgamVzdC5hZHZhbmNlVGltZXJzQnlUaW1lKDUwMDApO1xuXG4gICAgICAgIGNvbnN0IGFsZXJ0cyA9IGRhc2hib2FyZC5nZXRSZWNlbnRBbGVydHMoKTtcbiAgICAgICAgY29uc3QgbWVtb3J5QWxlcnQgPSBhbGVydHMuZmluZChhID0+IGEudHlwZSA9PT0gJ01FTU9SWScpO1xuICAgICAgICBleHBlY3QobWVtb3J5QWxlcnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChtZW1vcnlBbGVydCEuc2V2ZXJpdHkpLnRvQmUoJ0NSSVRJQ0FMJyk7XG4gICAgICAgIGV4cGVjdChtZW1vcnlBbGVydCEudmFsdWUpLnRvQmVHcmVhdGVyVGhhbig5MCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgQ1BVIHVzYWdlIGFsZXJ0cycsICgpID0+IHtcbiAgICAgICAgLy8gTW9jayBoaWdoIENQVSB1c2FnZVxuICAgICAgICBqZXN0LnNweU9uKHByb2Nlc3MsICdjcHVVc2FnZScpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgdXNlcjogOTAwMDAwMDAsIC8vIEhpZ2ggQ1BVIHVzYWdlXG4gICAgICAgICAgc3lzdGVtOiAxMDAwMDAwMCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGFzaGJvYXJkLnN0YXJ0TW9uaXRvcmluZygpO1xuICAgICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoNTAwMCk7XG5cbiAgICAgICAgY29uc3QgYWxlcnRzID0gZGFzaGJvYXJkLmdldFJlY2VudEFsZXJ0cygpO1xuICAgICAgICBjb25zdCBjcHVBbGVydCA9IGFsZXJ0cy5maW5kKGEgPT4gYS50eXBlID09PSAnQ1BVJyk7XG4gICAgICAgIGV4cGVjdChjcHVBbGVydCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KGNwdUFsZXJ0IS5zZXZlcml0eSkudG9CZSgnQ1JJVElDQUwnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGxpbWl0IGFsZXJ0cyB0byAxMDAgZW50cmllcycsICgpID0+IHtcbiAgICAgICAgLy8gQ3JlYXRlIG1hbnkgYWxlcnRzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA1OyBpKyspIHtcbiAgICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvc2xvdycsICdHRVQnLCA2MDAwLCAyMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwZWN0KChkYXNoYm9hcmQgYXMgYW55KS5hbGVydHMubGVuZ3RoKS50b0JlKDEwMCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Rhc2hib2FyZCBEYXRhJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgLy8gU2V0IHVwIHRlc3QgZGF0YVxuICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3VzZXJzJywgJ0dFVCcsIDE1MCwgMjAwKTtcbiAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdQT1NUIC9hcGkvdXNlcnMnLCAnUE9TVCcsIDMwMCwgMjAxKTtcbiAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS9zbG93JywgJ0dFVCcsIDIwMDAsIDIwMCk7IC8vIFRyaWdnZXJzIGFsZXJ0XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb21wcmVoZW5zaXZlIGRhc2hib2FyZCBkYXRhJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGRhc2hib2FyZC5nZXREYXNoYm9hcmREYXRhKCk7XG5cbiAgICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgnc3lzdGVtTWV0cmljcycpO1xuICAgICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdlbmRwb2ludFN0YXRzJyk7XG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3JlY2VudEFsZXJ0cycpO1xuICAgICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdwZXJmb3JtYW5jZVRpbWVsaW5lJyk7XG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3JlY29tbWVuZGF0aW9ucycpO1xuXG4gICAgICBleHBlY3QoZGF0YS5lbmRwb2ludFN0YXRzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QoZGF0YS5wZXJmb3JtYW5jZVRpbWVsaW5lKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QoZGF0YS5yZWNlbnRBbGVydHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoZGF0YS5yZWNvbW1lbmRhdGlvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxpbWl0IHBlcmZvcm1hbmNlIHRpbWVsaW5lIHRvIGxhc3QgMTAwIGVudHJpZXMnLCAoKSA9PiB7XG4gICAgICAvLyBBZGQgbW9yZSByZXF1ZXN0c1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNTA7IGkrKykge1xuICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdChgR0VUIC9hcGkvdGVzdCR7aX1gLCAnR0VUJywgMTAwLCAyMDApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gZGFzaGJvYXJkLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgIGV4cGVjdChkYXRhLnBlcmZvcm1hbmNlVGltZWxpbmUpLnRvSGF2ZUxlbmd0aCgxMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsaW1pdCByZWNlbnQgYWxlcnRzIHRvIGxhc3QgMTAgZW50cmllcycsICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBtYW55IGFsZXJ0c1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNTsgaSsrKSB7XG4gICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS9zbG93JywgJ0dFVCcsIDYwMDAsIDIwMCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBkYXNoYm9hcmQuZ2V0RGFzaGJvYXJkRGF0YSgpO1xuICAgICAgZXhwZWN0KGRhdGEucmVjZW50QWxlcnRzKS50b0hhdmVMZW5ndGgoMTApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVjb21tZW5kYXRpb25zIEVuZ2luZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlY29tbWVuZCBvcHRpbWl6YXRpb24gZm9yIHNsb3cgZW5kcG9pbnRzJywgKCkgPT4ge1xuICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3Nsb3cxJywgJ0dFVCcsIDE1MDAsIDIwMCk7XG4gICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvc2xvdzInLCAnR0VUJywgMjAwMCwgMjAwKTtcblxuICAgICAgY29uc3QgZGF0YSA9IGRhc2hib2FyZC5nZXREYXNoYm9hcmREYXRhKCk7XG4gICAgICBjb25zdCBzbG93RW5kcG9pbnRSZWMgPSBkYXRhLnJlY29tbWVuZGF0aW9ucy5maW5kKHIgPT4gXG4gICAgICAgIHIuaW5jbHVkZXMoJ3Nsb3cgZW5kcG9pbnQocyknKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChzbG93RW5kcG9pbnRSZWMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlY29tbWVuZCBpbnZlc3RpZ2F0aW9uIGZvciBoaWdoIGVycm9yIHJhdGUgZW5kcG9pbnRzJywgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGhpZ2ggZXJyb3IgcmF0ZVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS9lcnJvcnMnLCAnR0VUJywgMTAwLCBpIDwgMyA/IDUwMCA6IDIwMCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBkYXNoYm9hcmQuZ2V0RGFzaGJvYXJkRGF0YSgpO1xuICAgICAgY29uc3QgZXJyb3JSYXRlUmVjID0gZGF0YS5yZWNvbW1lbmRhdGlvbnMuZmluZChyID0+IFxuICAgICAgICByLmluY2x1ZGVzKCdlcnJvciByYXRlJylcbiAgICAgICk7XG4gICAgICBleHBlY3QoZXJyb3JSYXRlUmVjKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWNvbW1lbmQgY2FjaGluZyBmb3IgaGlnaCB0cmFmZmljIGVuZHBvaW50cycsICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBoaWdoIHRyYWZmaWMgKHNpbXVsYXRlIGJ5IHJlY29yZGluZyBtYW55IHJlY2VudCByZXF1ZXN0cylcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTUwOyBpKyspIHtcbiAgICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3BvcHVsYXInLCAnR0VUJywgMTAwLCAyMDApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gZGFzaGJvYXJkLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgIGNvbnN0IGNhY2hpbmdSZWMgPSBkYXRhLnJlY29tbWVuZGF0aW9ucy5maW5kKHIgPT4gXG4gICAgICAgIHIuaW5jbHVkZXMoJ2NhY2hpbmcnKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChjYWNoaW5nUmVjKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWNvbW1lbmQgYWRkcmVzc2luZyBjcml0aWNhbCBhbGVydHMnLCAoKSA9PiB7XG4gICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvY3JpdGljYWwnLCAnR0VUJywgNjAwMCwgMjAwKTtcblxuICAgICAgY29uc3QgZGF0YSA9IGRhc2hib2FyZC5nZXREYXNoYm9hcmREYXRhKCk7XG4gICAgICBjb25zdCBjcml0aWNhbFJlYyA9IGRhdGEucmVjb21tZW5kYXRpb25zLmZpbmQociA9PiBcbiAgICAgICAgci5pbmNsdWRlcygnY3JpdGljYWwgcGVyZm9ybWFuY2UgaXNzdWUnKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChjcml0aWNhbFJlYykudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVjb21tZW5kIG1lbW9yeSBvcHRpbWl6YXRpb24gd2hlbiB1c2FnZSBpcyBoaWdoJywgKCkgPT4ge1xuICAgICAgLy8gTW9jayBoaWdoIG1lbW9yeSB1c2FnZVxuICAgICAgamVzdC5zcHlPbihvcywgJ2ZyZWVtZW0nKS5tb2NrUmV0dXJuVmFsdWUobW9ja09zTWVtb3J5LnRvdGFsICogMC4xNSk7IC8vIDg1JSB1c2VkXG5cbiAgICAgIGNvbnN0IGRhdGEgPSBkYXNoYm9hcmQuZ2V0RGFzaGJvYXJkRGF0YSgpO1xuICAgICAgY29uc3QgbWVtb3J5UmVjID0gZGF0YS5yZWNvbW1lbmRhdGlvbnMuZmluZChyID0+IFxuICAgICAgICByLmluY2x1ZGVzKCdtZW1vcnkgdXNhZ2UnKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtZW1vcnlSZWMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlY29tbWVuZCBDUFUgb3B0aW1pemF0aW9uIHdoZW4gdXNhZ2UgaXMgaGlnaCcsICgpID0+IHtcbiAgICAgIC8vIE1vY2sgaGlnaCBDUFUgdXNhZ2VcbiAgICAgIGplc3Quc3B5T24ocHJvY2VzcywgJ2NwdVVzYWdlJykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjogODUwMDAwMDAsXG4gICAgICAgIHN5c3RlbTogNTAwMDAwMCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkYXRhID0gZGFzaGJvYXJkLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgIGNvbnN0IGNwdVJlYyA9IGRhdGEucmVjb21tZW5kYXRpb25zLmZpbmQociA9PiBcbiAgICAgICAgci5pbmNsdWRlcygnQ1BVIHVzYWdlJylcbiAgICAgICk7XG4gICAgICBleHBlY3QoY3B1UmVjKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRGF0YSBFeHBvcnQgYW5kIEFuYWx5c2lzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgLy8gU2V0IHVwIHRlc3QgZGF0YVxuICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3Rlc3QxJywgJ0dFVCcsIDEwMCwgMjAwKTtcbiAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS90ZXN0MicsICdHRVQnLCAyMDAsIDUwMCk7XG4gICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvdGVzdDEnLCAnR0VUJywgMTUwLCAyMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBleHBvcnQgY29tcHJlaGVuc2l2ZSBwZXJmb3JtYW5jZSBkYXRhJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXhwb3J0RGF0YSA9IGRhc2hib2FyZC5leHBvcnRQZXJmb3JtYW5jZURhdGEoKTtcblxuICAgICAgZXhwZWN0KGV4cG9ydERhdGEpLnRvSGF2ZVByb3BlcnR5KCdtZXRyaWNzJyk7XG4gICAgICBleHBlY3QoZXhwb3J0RGF0YSkudG9IYXZlUHJvcGVydHkoJ2VuZHBvaW50U3RhdHMnKTtcbiAgICAgIGV4cGVjdChleHBvcnREYXRhKS50b0hhdmVQcm9wZXJ0eSgnYWxlcnRzJyk7XG4gICAgICBleHBlY3QoZXhwb3J0RGF0YSkudG9IYXZlUHJvcGVydHkoJ3N5c3RlbUluZm8nKTtcblxuICAgICAgZXhwZWN0KGV4cG9ydERhdGEubWV0cmljcykudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KGV4cG9ydERhdGEuZW5kcG9pbnRTdGF0cykudG9IYXZlTGVuZ3RoKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY29ycmVjdCBzeXN0ZW0gaW5mbyBpbiBleHBvcnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBleHBvcnREYXRhID0gZGFzaGJvYXJkLmV4cG9ydFBlcmZvcm1hbmNlRGF0YSgpO1xuXG4gICAgICBleHBlY3QoZXhwb3J0RGF0YS5zeXN0ZW1JbmZvLnRvdGFsUmVxdWVzdHMpLnRvQmUoMyk7XG4gICAgICBleHBlY3QoZXhwb3J0RGF0YS5zeXN0ZW1JbmZvLmF2ZXJhZ2VSZXNwb25zZVRpbWUpLnRvQmVDbG9zZVRvKDE1MCwgMCk7XG4gICAgICBleHBlY3QoZXhwb3J0RGF0YS5zeXN0ZW1JbmZvLmVycm9yUmF0ZSkudG9CZUNsb3NlVG8oMzMuMzMsIDEpO1xuICAgICAgZXhwZWN0KGV4cG9ydERhdGEuc3lzdGVtSW5mby51cHRpbWUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChleHBvcnREYXRhLnN5c3RlbUluZm8uc3RhcnRUaW1lKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgZGF0YSBpbiBleHBvcnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlbXB0eURhc2hib2FyZCA9IG5ldyBQZXJmb3JtYW5jZURhc2hib2FyZCgpO1xuICAgICAgY29uc3QgZXhwb3J0RGF0YSA9IGVtcHR5RGFzaGJvYXJkLmV4cG9ydFBlcmZvcm1hbmNlRGF0YSgpO1xuXG4gICAgICBleHBlY3QoZXhwb3J0RGF0YS5zeXN0ZW1JbmZvLnRvdGFsUmVxdWVzdHMpLnRvQmUoMCk7XG4gICAgICBleHBlY3QoZXhwb3J0RGF0YS5zeXN0ZW1JbmZvLmF2ZXJhZ2VSZXNwb25zZVRpbWUpLnRvQmUoMCk7XG4gICAgICBleHBlY3QoZXhwb3J0RGF0YS5zeXN0ZW1JbmZvLmVycm9yUmF0ZSkudG9CZSgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1V0aWxpdHkgTWV0aG9kcycsICgpID0+IHtcbiAgICBkZXNjcmliZSgnZ2V0UmVjZW50QWxlcnRzJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gc3BlY2lmaWVkIG51bWJlciBvZiByZWNlbnQgYWxlcnRzJywgKCkgPT4ge1xuICAgICAgICAvLyBDcmVhdGUgbXVsdGlwbGUgYWxlcnRzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3Nsb3cnLCAnR0VUJywgNjAwMCwgMjAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFsZXJ0cyA9IGRhc2hib2FyZC5nZXRSZWNlbnRBbGVydHMoMyk7XG4gICAgICAgIGV4cGVjdChhbGVydHMpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGRlZmF1bHQgdG8gMjAgYWxlcnRzJywgKCkgPT4ge1xuICAgICAgICAvLyBDcmVhdGUgbW9yZSB0aGFuIDIwIGFsZXJ0c1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI1OyBpKyspIHtcbiAgICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvc2xvdycsICdHRVQnLCA2MDAwLCAyMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWxlcnRzID0gZGFzaGJvYXJkLmdldFJlY2VudEFsZXJ0cygpO1xuICAgICAgICBleHBlY3QoYWxlcnRzKS50b0hhdmVMZW5ndGgoMjApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncmVzZXRNZXRyaWNzJywgKCkgPT4ge1xuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS90ZXN0JywgJ0dFVCcsIDEwMCwgMjAwKTtcbiAgICAgICAgZGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3Nsb3cnLCAnR0VUJywgNjAwMCwgMjAwKTsgLy8gQ3JlYXRlcyBhbGVydFxuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY2xlYXIgYWxsIG1ldHJpY3MgYW5kIGFsZXJ0cycsICgpID0+IHtcbiAgICAgICAgY29uc3QgZW1pdFNweSA9IGplc3Quc3B5T24oZGFzaGJvYXJkLCAnZW1pdCcpO1xuXG4gICAgICAgIGRhc2hib2FyZC5yZXNldE1ldHJpY3MoKTtcblxuICAgICAgICBjb25zdCBkYXRhID0gZGFzaGJvYXJkLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgICAgZXhwZWN0KGRhdGEucGVyZm9ybWFuY2VUaW1lbGluZSkudG9IYXZlTGVuZ3RoKDApO1xuICAgICAgICBleHBlY3QoZGF0YS5lbmRwb2ludFN0YXRzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICAgIGV4cGVjdChkYXRhLnJlY2VudEFsZXJ0cykudG9IYXZlTGVuZ3RoKDApO1xuXG4gICAgICAgIGV4cGVjdChMb2dnZXIucHJvdG90eXBlLmxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1BlcmZvcm1hbmNlIG1ldHJpY3MgcmVzZXQnKTtcbiAgICAgICAgZXhwZWN0KGVtaXRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdtZXRyaWNzLXJlc2V0Jyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXNldCBzdGFydCB0aW1lJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFN0YXJ0VGltZSA9IChkYXNoYm9hcmQgYXMgYW55KS5zdGFydFRpbWU7XG4gICAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSg1MDAwKTtcblxuICAgICAgICBkYXNoYm9hcmQucmVzZXRNZXRyaWNzKCk7XG5cbiAgICAgICAgZXhwZWN0KChkYXNoYm9hcmQgYXMgYW55KS5zdGFydFRpbWUpLnRvQmVHcmVhdGVyVGhhbihvcmlnaW5hbFN0YXJ0VGltZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjYWxjdWxhdGVQZXJjZW50aWxlJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgcGVyY2VudGlsZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgICBjb25zdCBzb3J0ZWRBcnJheSA9IFsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMF07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwNTAgPSAoZGFzaGJvYXJkIGFzIGFueSkuY2FsY3VsYXRlUGVyY2VudGlsZShzb3J0ZWRBcnJheSwgNTApO1xuICAgICAgICBjb25zdCBwOTUgPSAoZGFzaGJvYXJkIGFzIGFueSkuY2FsY3VsYXRlUGVyY2VudGlsZShzb3J0ZWRBcnJheSwgOTUpO1xuICAgICAgICBjb25zdCBwOTkgPSAoZGFzaGJvYXJkIGFzIGFueSkuY2FsY3VsYXRlUGVyY2VudGlsZShzb3J0ZWRBcnJheSwgOTkpO1xuXG4gICAgICAgIGV4cGVjdChwNTApLnRvQmUoNSk7XG4gICAgICAgIGV4cGVjdChwOTUpLnRvQmUoMTApO1xuICAgICAgICBleHBlY3QocDk5KS50b0JlKDEwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBhcnJheXMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IChkYXNoYm9hcmQgYXMgYW55KS5jYWxjdWxhdGVQZXJjZW50aWxlKFtdLCA5NSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoMCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2luZ2xlIGVsZW1lbnQgYXJyYXlzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSAoZGFzaGJvYXJkIGFzIGFueSkuY2FsY3VsYXRlUGVyY2VudGlsZShbNDJdLCA5NSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoNDIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZyBhbmQgRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzeXN0ZW0gbWV0cmljcyBjb2xsZWN0aW9uIGVycm9ycycsICgpID0+IHtcbiAgICAgIGplc3Quc3B5T24ob3MsICd0b3RhbG1lbScpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU3lzdGVtIG1ldHJpY3MgdW5hdmFpbGFibGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoKCkgPT4gKGRhc2hib2FyZCBhcyBhbnkpLmdldEN1cnJlbnRTeXN0ZW1NZXRyaWNzKCkpLnRvVGhyb3coJ1N5c3RlbSBtZXRyaWNzIHVuYXZhaWxhYmxlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwcm9jZXNzIG1ldHJpY3MgY29sbGVjdGlvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBqZXN0LnNweU9uKHByb2Nlc3MsICdtZW1vcnlVc2FnZScpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvY2VzcyBtZXRyaWNzIHVuYXZhaWxhYmxlJyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KCgpID0+IChkYXNoYm9hcmQgYXMgYW55KS5nZXRDdXJyZW50U3lzdGVtTWV0cmljcygpKS50b1Rocm93KCdQcm9jZXNzIG1ldHJpY3MgdW5hdmFpbGFibGUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGV4dHJlbWUgdmFsdWVzIGluIGNhbGN1bGF0aW9ucycsICgpID0+IHtcbiAgICAgIC8vIFRlc3Qgd2l0aCB2ZXJ5IGxhcmdlIHJlc3BvbnNlIHRpbWVzXG4gICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvZXh0cmVtZScsICdHRVQnLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgMjAwKTtcblxuICAgICAgY29uc3Qgc3RhdHMgPSBkYXNoYm9hcmQuZ2V0RW5kcG9pbnRTdGF0cygnR0VUIEdFVCAvYXBpL2V4dHJlbWUnKTtcbiAgICAgIGV4cGVjdChzdGF0cyEuYXZlcmFnZVJlc3BvbnNlVGltZSkudG9CZShOdW1iZXIuTUFYX1NBRkVfSU5URUdFUik7XG4gICAgICBleHBlY3Qoc3RhdHMhLm1heFJlc3BvbnNlVGltZSkudG9CZShOdW1iZXIuTUFYX1NBRkVfSU5URUdFUik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB6ZXJvIG1lbW9yeSBzY2VuYXJpb3MnLCAoKSA9PiB7XG4gICAgICBqZXN0LnNweU9uKG9zLCAndG90YWxtZW0nKS5tb2NrUmV0dXJuVmFsdWUoMCk7XG4gICAgICBqZXN0LnNweU9uKG9zLCAnZnJlZW1lbScpLm1vY2tSZXR1cm5WYWx1ZSgwKTtcblxuICAgICAgY29uc3Qgc3lzdGVtTWV0cmljcyA9IChkYXNoYm9hcmQgYXMgYW55KS5nZXRDdXJyZW50U3lzdGVtTWV0cmljcygpO1xuICAgICAgZXhwZWN0KHN5c3RlbU1ldHJpY3MubWVtb3J5LnRvdGFsTUIpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3lzdGVtTWV0cmljcy5tZW1vcnkudXNhZ2UpLnRvQmVOYU4oKTsgLy8gRGl2aXNpb24gYnkgemVyb1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmVnYXRpdmUgdmFsdWVzIGdyYWNlZnVsbHknLCAoKSA9PiB7XG4gICAgICBqZXN0LnNweU9uKHByb2Nlc3MsICdjcHVVc2FnZScpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IC0xMDAwLFxuICAgICAgICBzeXN0ZW06IC01MDAsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY3B1VXNhZ2UgPSAoZGFzaGJvYXJkIGFzIGFueSkuY2FsY3VsYXRlQ3B1VXNhZ2UocHJvY2Vzcy5jcHVVc2FnZSgpKTtcbiAgICAgIGV4cGVjdChjcHVVc2FnZSkudG9CZSgtMC4xNSk7IC8vIE5lZ2F0aXZlIENQVSB1c2FnZVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgYW5kIE1lbW9yeSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gcGVyZm9ybWFuY2Ugd2l0aCBsYXJnZSBkYXRhc2V0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgIC8vIFJlY29yZCAxMDAwIHJlcXVlc3RzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykge1xuICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdChgR0VUIC9hcGkvdGVzdCR7aSAlIDEwMH1gLCAnR0VUJywgTWF0aC5yYW5kb20oKSAqIDEwMDAsIDIwMCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMDApOyAvLyBTaG91bGQgY29tcGxldGUgd2l0aGluIDEgc2Vjb25kXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxpbWl0IG1lbW9yeSB1c2FnZSB3aXRoIG1ldHJpYyBwcnVuaW5nJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbE1lbW9yeSA9IHByb2Nlc3MubWVtb3J5VXNhZ2UoKS5oZWFwVXNlZDtcblxuICAgICAgLy8gUmVjb3JkIG1hbnkgcmVxdWVzdHMgdG8gdHJpZ2dlciBwcnVuaW5nXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDIwMDA7IGkrKykge1xuICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvdGVzdCcsICdHRVQnLCAxMDAsIDIwMCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZpbmFsTWVtb3J5ID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkO1xuICAgICAgY29uc3QgbWVtb3J5SW5jcmVhc2UgPSBmaW5hbE1lbW9yeSAtIGluaXRpYWxNZW1vcnk7XG5cbiAgICAgIC8vIE1lbW9yeSBpbmNyZWFzZSBzaG91bGQgYmUgcmVhc29uYWJsZSAobGVzcyB0aGFuIDUwTUIpXG4gICAgICBleHBlY3QobWVtb3J5SW5jcmVhc2UpLnRvQmVMZXNzVGhhbig1MCAqIDEwMjQgKiAxMDI0KTtcbiAgICAgIGV4cGVjdCgoZGFzaGJvYXJkIGFzIGFueSkubWV0cmljcy5sZW5ndGgpLnRvQmUoMTAwMCk7IC8vIFNob3VsZCBiZSBsaW1pdGVkXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IHJlcXVlc3QgcmVjb3JkaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbWlzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAgfSwgKF8sIGkpID0+XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShkYXNoYm9hcmQucmVjb3JkUmVxdWVzdChgR0VUIC9hcGkvY29uY3VycmVudCR7aX1gLCAnR0VUJywgMTAwLCAyMDApKVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuXG4gICAgICBjb25zdCBkYXRhID0gZGFzaGJvYXJkLmdldERhc2hib2FyZERhdGEoKTtcbiAgICAgIGV4cGVjdChkYXRhLnBlcmZvcm1hbmNlVGltZWxpbmUpLnRvSGF2ZUxlbmd0aCgxMDApO1xuICAgICAgZXhwZWN0KGRhdGEuZW5kcG9pbnRTdGF0cykudG9IYXZlTGVuZ3RoKDEwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVmZmljaWVudGx5IGNhbGN1bGF0ZSBzdGF0aXN0aWNzIGZvciBoaWdoLWZyZXF1ZW5jeSBlbmRwb2ludHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAvLyBSZWNvcmQgMTAwIHJlcXVlc3RzIGZvciB0aGUgc2FtZSBlbmRwb2ludFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgICAgICBkYXNoYm9hcmQucmVjb3JkUmVxdWVzdCgnR0VUIC9hcGkvcG9wdWxhcicsICdHRVQnLCBNYXRoLnJhbmRvbSgpICogNTAwLCAyMDApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjYWxjdWxhdGlvblRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uVGltZSkudG9CZUxlc3NUaGFuKDEwMCk7IC8vIFNob3VsZCBiZSBmYXN0XG5cbiAgICAgIGNvbnN0IHN0YXRzID0gZGFzaGJvYXJkLmdldEVuZHBvaW50U3RhdHMoJ0dFVCBHRVQgL2FwaS9wb3B1bGFyJyk7XG4gICAgICBleHBlY3Qoc3RhdHMhLnRvdGFsUmVxdWVzdHMpLnRvQmUoMTAwKTtcbiAgICAgIGV4cGVjdChzdGF0cyEucGVyZm9ybWFuY2U5NXRoUGVyY2VudGlsZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHN0YXRzIS5wZXJmb3JtYW5jZTk5dGhQZXJjZW50aWxlKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFdmVudCBTeXN0ZW0nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBlbWl0IGV2ZW50cyBmb3IgYWxsIG1ham9yIG9wZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlbWl0U3B5ID0gamVzdC5zcHlPbihkYXNoYm9hcmQsICdlbWl0Jyk7XG5cbiAgICAgIGRhc2hib2FyZC5zdGFydE1vbml0b3JpbmcoKTtcbiAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS90ZXN0JywgJ0dFVCcsIDEwMCwgMjAwKTtcbiAgICAgIGRhc2hib2FyZC5zdG9wTW9uaXRvcmluZygpO1xuICAgICAgZGFzaGJvYXJkLnJlc2V0TWV0cmljcygpO1xuXG4gICAgICBleHBlY3QoZW1pdFNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ21vbml0b3Jpbmctc3RhcnRlZCcpO1xuICAgICAgZXhwZWN0KGVtaXRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdyZXF1ZXN0LXJlY29yZGVkJywgZXhwZWN0LmFueShPYmplY3QpKTtcbiAgICAgIGV4cGVjdChlbWl0U3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnbW9uaXRvcmluZy1zdG9wcGVkJyk7XG4gICAgICBleHBlY3QoZW1pdFNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ21ldHJpY3MtcmVzZXQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW1pdCBhbGVydCBldmVudHMgd2hlbiBhbGVydHMgYXJlIGNyZWF0ZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlbWl0U3B5ID0gamVzdC5zcHlPbihkYXNoYm9hcmQsICdlbWl0Jyk7XG5cbiAgICAgIGRhc2hib2FyZC5yZWNvcmRSZXF1ZXN0KCdHRVQgL2FwaS9zbG93JywgJ0dFVCcsIDYwMDAsIDIwMCk7XG5cbiAgICAgIGV4cGVjdChlbWl0U3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnYWxlcnQtY3JlYXRlZCcsIGV4cGVjdC5hbnkoT2JqZWN0KSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVtaXQgc3lzdGVtIG1ldHJpY3MgZXZlbnRzIGR1cmluZyBtb25pdG9yaW5nJywgKCkgPT4ge1xuICAgICAgY29uc3QgZW1pdFNweSA9IGplc3Quc3B5T24oZGFzaGJvYXJkLCAnZW1pdCcpO1xuXG4gICAgICBkYXNoYm9hcmQuc3RhcnRNb25pdG9yaW5nKCk7XG4gICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoNTAwMCk7XG5cbiAgICAgIGV4cGVjdChlbWl0U3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnc3lzdGVtLW1ldHJpY3MtY29sbGVjdGVkJywgZXhwZWN0LmFueShPYmplY3QpKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NpbmdsZXRvbiBJbnN0YW5jZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBhIHNpbmdsZXRvbiBpbnN0YW5jZScsICgpID0+IHtcbiAgICAgIGV4cGVjdChwZXJmb3JtYW5jZURhc2hib2FyZCkudG9CZUluc3RhbmNlT2YoUGVyZm9ybWFuY2VEYXNoYm9hcmQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBzdGF0ZSBhY3Jvc3MgaW1wb3J0cycsICgpID0+IHtcbiAgICAgIHBlcmZvcm1hbmNlRGFzaGJvYXJkLnJlY29yZFJlcXVlc3QoJ0dFVCAvYXBpL3NpbmdsZXRvbicsICdHRVQnLCAxMDAsIDIwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXRzID0gcGVyZm9ybWFuY2VEYXNoYm9hcmQuZ2V0RW5kcG9pbnRTdGF0cygnR0VUIEdFVCAvYXBpL3NpbmdsZXRvbicpO1xuICAgICAgZXhwZWN0KHN0YXRzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN0YXRzIS50b3RhbFJlcXVlc3RzKS50b0JlKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTWlkZGxld2FyZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgcGVyZm9ybWFuY2UgbWlkZGxld2FyZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcGVyZm9ybWFuY2VNaWRkbGV3YXJlIH0gPSByZXF1aXJlKCcuL3BlcmZvcm1hbmNlLWRhc2hib2FyZCcpO1xuICAgICAgZXhwZWN0KHBlcmZvcm1hbmNlTWlkZGxld2FyZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcGVyZm9ybWFuY2VNaWRkbGV3YXJlKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWNvcmQgcmVxdWVzdHMgdGhyb3VnaCBtaWRkbGV3YXJlJywgKGRvbmUpID0+IHtcbiAgICAgIGNvbnN0IHsgcGVyZm9ybWFuY2VNaWRkbGV3YXJlIH0gPSByZXF1aXJlKCcuL3BlcmZvcm1hbmNlLWRhc2hib2FyZCcpO1xuICAgICAgXG4gICAgICBjb25zdCBtb2NrUmVxID0ge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBwYXRoOiAnL2FwaS9taWRkbGV3YXJlLXRlc3QnLFxuICAgICAgICByb3V0ZTogeyBwYXRoOiAnL2FwaS9taWRkbGV3YXJlLXRlc3QnIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IG1vY2tSZXMgPSB7XG4gICAgICAgIHN0YXR1c0NvZGU6IDIwMCxcbiAgICAgICAgb246IGplc3QuZm4oKGV2ZW50LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGlmIChldmVudCA9PT0gJ2ZpbmlzaCcpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIDEwKTsgLy8gU2ltdWxhdGUgcmVzcG9uc2UgdGltZVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IG1vY2tOZXh0ID0gamVzdC5mbigpO1xuXG4gICAgICBwZXJmb3JtYW5jZU1pZGRsZXdhcmUobW9ja1JlcSwgbW9ja1JlcywgbW9ja05leHQpO1xuICAgICAgXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tOZXh0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICAgIGV4cGVjdChtb2NrUmVzLm9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZmluaXNoJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCA1MCk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9