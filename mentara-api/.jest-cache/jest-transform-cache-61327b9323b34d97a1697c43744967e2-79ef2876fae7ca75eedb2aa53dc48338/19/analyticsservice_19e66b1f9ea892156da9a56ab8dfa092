8cdf2537d2ccf28f382f99540fd3a2b6
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var AnalyticsService_1;
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.AnalyticsService = void 0;
const common_1 = require("@nestjs/common");
const prisma_client_provider_1 = require("../providers/prisma-client.provider");
let AnalyticsService = AnalyticsService_1 = class AnalyticsService {
    prisma;
    logger = new common_1.Logger(AnalyticsService_1.name);
    constructor(prisma) {
        this.prisma = prisma;
    }
    async getPlatformAnalytics(startDate, endDate) {
        try {
            const dateFilter = {};
            if (startDate)
                dateFilter['gte'] = startDate;
            if (endDate)
                dateFilter['lte'] = endDate;
            const whereDate = Object.keys(dateFilter).length > 0 ? { createdAt: dateFilter } : {};
            const [totalUsers, newUsers, totalTherapists, newTherapists, totalMeetings, completedMeetings, totalPosts, newPosts, totalCommunities, activeCommunities,] = await Promise.all([
                this.prisma.user.count(),
                this.prisma.user.count({ where: whereDate }),
                this.prisma.therapist.count({ where: { status: 'approved' } }),
                this.prisma.therapist.count({
                    where: {
                        status: 'approved',
                        ...whereDate,
                    },
                }),
                this.prisma.meeting.count(),
                this.prisma.meeting.count({ where: { status: 'COMPLETED' } }),
                this.prisma.post.count(),
                this.prisma.post.count({ where: whereDate }),
                this.prisma.community.count(),
                this.prisma.community.count({
                    where: {
                        roomGroups: {
                            some: {
                                rooms: {
                                    some: {
                                        posts: {
                                            some: whereDate,
                                        },
                                    },
                                },
                            },
                        },
                    },
                }),
            ]);
            const userGrowth = await this.getUserGrowthStats(startDate, endDate);
            const engagementStats = await this.getEngagementStats(startDate, endDate);
            const sessionStats = await this.getSessionStats(startDate, endDate);
            return {
                overview: {
                    totalUsers,
                    newUsers,
                    totalTherapists,
                    newTherapists,
                    totalMeetings,
                    completedMeetings,
                    meetingCompletionRate: totalMeetings > 0 ? (completedMeetings / totalMeetings) * 100 : 0,
                    totalPosts,
                    newPosts,
                    totalCommunities,
                    activeCommunities,
                },
                userGrowth,
                engagement: engagementStats,
                sessions: sessionStats,
            };
        }
        catch (error) {
            this.logger.error(`Failed to get platform analytics: ${String(error)}`);
            throw new common_1.InternalServerErrorException('Failed to retrieve platform analytics');
        }
    }
    async getUserGrowthStats(startDate, endDate) {
        try {
            const dateFilter = {};
            if (startDate)
                dateFilter['gte'] = startDate;
            if (endDate)
                dateFilter['lte'] = endDate;
            const whereDate = Object.keys(dateFilter).length > 0 ? { createdAt: dateFilter } : {};
            const usersByRole = await this.prisma.user.groupBy({
                by: ['role'],
                where: whereDate,
                _count: { role: true },
            });
            const monthlyGrowth = await this.prisma.$queryRaw `
        SELECT 
          DATE_TRUNC('month', "createdAt") as month,
          COUNT(*) as count,
          role
        FROM "User"
        ${whereDate.createdAt ? 'WHERE "createdAt" >= $1 AND "createdAt" <= $2' : ''}
        GROUP BY month, role
        ORDER BY month DESC
        LIMIT 12
      `;
            return {
                byRole: usersByRole,
                monthlyGrowth,
            };
        }
        catch (error) {
            throw new common_1.InternalServerErrorException(`Failed to get user growth stats: ${error instanceof Error ? error.message : String(error)}`);
        }
    }
    async getEngagementStats(startDate, endDate) {
        try {
            const dateFilter = {};
            if (startDate)
                dateFilter['gte'] = startDate;
            if (endDate)
                dateFilter['lte'] = endDate;
            const whereDate = Object.keys(dateFilter).length > 0 ? { createdAt: dateFilter } : {};
            const [totalPosts, totalComments, totalHearts, activeCommunities, activeUsers,] = await Promise.all([
                this.prisma.post.count({ where: whereDate }),
                this.prisma.comment.count({ where: whereDate }),
                this.prisma.postHeart.count({ where: whereDate }),
                this.prisma.community.count({
                    where: {
                        roomGroups: {
                            some: {
                                rooms: {
                                    some: {
                                        posts: {
                                            some: whereDate,
                                        },
                                    },
                                },
                            },
                        },
                    },
                }),
                this.prisma.user.count({
                    where: {
                        OR: [
                            { posts: { some: whereDate } },
                            { comments: { some: whereDate } },
                            { postHearts: { some: whereDate } },
                        ],
                    },
                }),
            ]);
            const topCommunities = await this.prisma.community.findMany({
                include: {
                    _count: {
                        select: {
                            memberships: true,
                        },
                    },
                },
                orderBy: {
                    memberships: {
                        _count: 'desc',
                    },
                },
                take: 10,
            });
            return {
                overview: {
                    totalPosts,
                    totalComments,
                    totalHearts,
                    activeCommunities,
                    activeUsers,
                    engagementRate: activeUsers > 0
                        ? (totalPosts + totalComments + totalHearts) / activeUsers
                        : 0,
                },
                topCommunities,
            };
        }
        catch (error) {
            throw new common_1.InternalServerErrorException(`Failed to get engagement stats: ${error instanceof Error ? error.message : String(error)}`);
        }
    }
    async getSessionStats(startDate, endDate) {
        try {
            const dateFilter = {};
            if (startDate)
                dateFilter['gte'] = startDate;
            if (endDate)
                dateFilter['lte'] = endDate;
            const whereDate = Object.keys(dateFilter).length > 0 ? { startTime: dateFilter } : {};
            const [totalSessions, completedSessions, averageDuration, sessionsByType,] = await Promise.all([
                this.prisma.sessionLog.count({ where: whereDate }),
                this.prisma.sessionLog.count({
                    where: { ...whereDate, status: 'COMPLETED' },
                }),
                this.prisma.sessionLog.aggregate({
                    where: { ...whereDate, status: 'COMPLETED' },
                    _avg: { duration: true },
                }),
                this.prisma.sessionLog.groupBy({
                    by: ['sessionType'],
                    where: whereDate,
                    _count: { sessionType: true },
                }),
            ]);
            const therapistPerformance = await this.prisma.sessionLog.groupBy({
                by: ['therapistId'],
                where: { ...whereDate, status: 'COMPLETED' },
                _count: { therapistId: true },
                _avg: { quality: true },
                orderBy: { _count: { therapistId: 'desc' } },
                take: 10,
            });
            return {
                overview: {
                    totalSessions,
                    completedSessions,
                    completionRate: totalSessions > 0 ? (completedSessions / totalSessions) * 100 : 0,
                    averageDuration: averageDuration._avg.duration || 0,
                },
                sessionsByType,
                topTherapists: therapistPerformance,
            };
        }
        catch (error) {
            throw new common_1.InternalServerErrorException(`Failed to get session stats: ${error instanceof Error ? error.message : String(error)}`);
        }
    }
    async getTherapistAnalytics(therapistId, startDate, endDate) {
        try {
            const dateFilter = {};
            if (startDate)
                dateFilter['gte'] = startDate;
            if (endDate)
                dateFilter['lte'] = endDate;
            const whereDate = Object.keys(dateFilter).length > 0 ? { startTime: dateFilter } : {};
            const [totalClients, activeSessions, completedSessions, averageRating, worksheetsAssigned, worksheetsCompleted,] = await Promise.all([
                this.prisma.clientTherapist.count({
                    where: { therapistId, status: 'active' },
                }),
                this.prisma.sessionLog.count({
                    where: { therapistId, ...whereDate },
                }),
                this.prisma.sessionLog.count({
                    where: { therapistId, status: 'COMPLETED', ...whereDate },
                }),
                this.prisma.sessionLog.aggregate({
                    where: { therapistId, status: 'COMPLETED', ...whereDate },
                    _avg: { quality: true },
                }),
                this.prisma.worksheet.count({
                    where: {
                        therapistId,
                        ...(startDate || endDate
                            ? {
                                createdAt: {
                                    ...(startDate && { gte: startDate }),
                                    ...(endDate && { lte: endDate }),
                                },
                            }
                            : {}),
                    },
                }),
                this.prisma.worksheet.count({
                    where: {
                        therapistId,
                        isCompleted: true,
                        ...(startDate || endDate
                            ? {
                                submittedAt: {
                                    ...(startDate && { gte: startDate }),
                                    ...(endDate && { lte: endDate }),
                                },
                            }
                            : {}),
                    },
                }),
            ]);
            const clientProgress = await this.prisma.therapyProgress.findMany({
                where: {
                    therapistId,
                    ...(startDate || endDate
                        ? {
                            assessmentDate: {
                                ...(startDate && { gte: startDate }),
                                ...(endDate && { lte: endDate }),
                            },
                        }
                        : {}),
                },
                include: {
                    client: {
                        include: { user: true },
                    },
                },
                orderBy: { assessmentDate: 'desc' },
                take: 10,
            });
            return {
                overview: {
                    totalClients,
                    activeSessions,
                    completedSessions,
                    sessionCompletionRate: activeSessions > 0 ? (completedSessions / activeSessions) * 100 : 0,
                    averageRating: averageRating._avg.quality || 0,
                    worksheetsAssigned,
                    worksheetsCompleted,
                    worksheetCompletionRate: worksheetsAssigned > 0
                        ? (worksheetsCompleted / worksheetsAssigned) * 100
                        : 0,
                },
                recentProgress: clientProgress,
            };
        }
        catch (error) {
            throw new common_1.InternalServerErrorException(`Failed to get therapist analytics: ${error instanceof Error ? error.message : String(error)}`);
        }
    }
    async getClientAnalytics(clientId, startDate, endDate) {
        try {
            const dateFilter = {};
            if (startDate)
                dateFilter['gte'] = startDate;
            if (endDate)
                dateFilter['lte'] = endDate;
            const whereDate = Object.keys(dateFilter).length > 0 ? { startTime: dateFilter } : {};
            const [totalSessions, completedSessions, averageSessionRating, worksheetsAssigned, worksheetsCompleted, communityPosts, communityEngagement,] = await Promise.all([
                this.prisma.sessionLog.count({
                    where: { clientId, ...whereDate },
                }),
                this.prisma.sessionLog.count({
                    where: { clientId, status: 'COMPLETED', ...whereDate },
                }),
                this.prisma.sessionLog.aggregate({
                    where: { clientId, status: 'COMPLETED', ...whereDate },
                    _avg: { quality: true },
                }),
                this.prisma.worksheet.count({
                    where: {
                        clientId,
                        ...(startDate || endDate
                            ? {
                                createdAt: {
                                    ...(startDate && { gte: startDate }),
                                    ...(endDate && { lte: endDate }),
                                },
                            }
                            : {}),
                    },
                }),
                this.prisma.worksheet.count({
                    where: {
                        clientId,
                        isCompleted: true,
                        ...(startDate || endDate
                            ? {
                                submittedAt: {
                                    ...(startDate && { gte: startDate }),
                                    ...(endDate && { lte: endDate }),
                                },
                            }
                            : {}),
                    },
                }),
                this.prisma.post.count({
                    where: {
                        userId: clientId,
                        ...(startDate || endDate
                            ? {
                                createdAt: {
                                    ...(startDate && { gte: startDate }),
                                    ...(endDate && { lte: endDate }),
                                },
                            }
                            : {}),
                    },
                }),
                this.prisma.comment.count({
                    where: {
                        userId: clientId,
                        ...(startDate || endDate
                            ? {
                                createdAt: {
                                    ...(startDate && { gte: startDate }),
                                    ...(endDate && { lte: endDate }),
                                },
                            }
                            : {}),
                    },
                }),
            ]);
            const progressHistory = await this.prisma.therapyProgress.findMany({
                where: {
                    clientId,
                    ...(startDate || endDate
                        ? {
                            assessmentDate: {
                                ...(startDate && { gte: startDate }),
                                ...(endDate && { lte: endDate }),
                            },
                        }
                        : {}),
                },
                orderBy: { assessmentDate: 'desc' },
                take: 10,
            });
            return {
                overview: {
                    totalSessions,
                    completedSessions,
                    sessionCompletionRate: totalSessions > 0 ? (completedSessions / totalSessions) * 100 : 0,
                    averageSessionRating: averageSessionRating._avg.quality || 0,
                    worksheetsAssigned,
                    worksheetsCompleted,
                    worksheetCompletionRate: worksheetsAssigned > 0
                        ? (worksheetsCompleted / worksheetsAssigned) * 100
                        : 0,
                    communityPosts,
                    communityEngagement,
                },
                progressHistory,
            };
        }
        catch (error) {
            throw new common_1.InternalServerErrorException(`Failed to get client analytics: ${error instanceof Error ? error.message : String(error)}`);
        }
    }
};
exports.AnalyticsService = AnalyticsService;
exports.AnalyticsService = AnalyticsService = AnalyticsService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof prisma_client_provider_1.PrismaService !== "undefined" && prisma_client_provider_1.PrismaService) === "function" ? _a : Object])
], AnalyticsService);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2FuYWx5dGljcy9hbmFseXRpY3Muc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLDJDQUl3QjtBQUN4QixnRkFBb0U7QUFHN0QsSUFBTSxnQkFBZ0Isd0JBQXRCLE1BQU0sZ0JBQWdCO0lBR0U7SUFGWixNQUFNLEdBQUcsSUFBSSxlQUFNLENBQUMsa0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFNUQsWUFBNkIsTUFBcUI7UUFBckIsV0FBTSxHQUFOLE1BQU0sQ0FBZTtJQUFHLENBQUM7SUFFdEQsS0FBSyxDQUFDLG9CQUFvQixDQUFDLFNBQWdCLEVBQUUsT0FBYztRQUN6RCxJQUFJLENBQUM7WUFDSCxNQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7WUFDdEIsSUFBSSxTQUFTO2dCQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxTQUFTLENBQUM7WUFDN0MsSUFBSSxPQUFPO2dCQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUM7WUFFekMsTUFBTSxTQUFTLEdBQ2IsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBRXRFLE1BQU0sQ0FDSixVQUFVLEVBQ1YsUUFBUSxFQUNSLGVBQWUsRUFDZixhQUFhLEVBQ2IsYUFBYSxFQUNiLGlCQUFpQixFQUNqQixVQUFVLEVBQ1YsUUFBUSxFQUNSLGdCQUFnQixFQUNoQixpQkFBaUIsRUFDbEIsR0FBRyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUM7Z0JBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtnQkFDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUs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QUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQzVGLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQztDQUNGLENBQUE7QUFoZlksNENBQWdCOzJCQUFoQixnQkFBZ0I7SUFENUIsSUFBQSxtQkFBVSxHQUFFO3lEQUkwQixzQ0FBYSxvQkFBYixzQ0FBYTtHQUh2QyxnQkFBZ0IsQ0FnZjVCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy9hbmFseXRpY3MvYW5hbHl0aWNzLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgSW5qZWN0YWJsZSxcbiAgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbixcbiAgTG9nZ2VyLFxufSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBQcmlzbWFTZXJ2aWNlIH0gZnJvbSAnLi4vcHJvdmlkZXJzL3ByaXNtYS1jbGllbnQucHJvdmlkZXInO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzU2VydmljZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyID0gbmV3IExvZ2dlcihBbmFseXRpY3NTZXJ2aWNlLm5hbWUpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgcHJpc21hOiBQcmlzbWFTZXJ2aWNlKSB7fVxuXG4gIGFzeW5jIGdldFBsYXRmb3JtQW5hbHl0aWNzKHN0YXJ0RGF0ZT86IERhdGUsIGVuZERhdGU/OiBEYXRlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGVGaWx0ZXIgPSB7fTtcbiAgICAgIGlmIChzdGFydERhdGUpIGRhdGVGaWx0ZXJbJ2d0ZSddID0gc3RhcnREYXRlO1xuICAgICAgaWYgKGVuZERhdGUpIGRhdGVGaWx0ZXJbJ2x0ZSddID0gZW5kRGF0ZTtcblxuICAgICAgY29uc3Qgd2hlcmVEYXRlID1cbiAgICAgICAgT2JqZWN0LmtleXMoZGF0ZUZpbHRlcikubGVuZ3RoID4gMCA/IHsgY3JlYXRlZEF0OiBkYXRlRmlsdGVyIH0gOiB7fTtcblxuICAgICAgY29uc3QgW1xuICAgICAgICB0b3RhbFVzZXJzLFxuICAgICAgICBuZXdVc2VycyxcbiAgICAgICAgdG90YWxUaGVyYXBpc3RzLFxuICAgICAgICBuZXdUaGVyYXBpc3RzLFxuICAgICAgICB0b3RhbE1lZXRpbmdzLFxuICAgICAgICBjb21wbGV0ZWRNZWV0aW5ncyxcbiAgICAgICAgdG90YWxQb3N0cyxcbiAgICAgICAgbmV3UG9zdHMsXG4gICAgICAgIHRvdGFsQ29tbXVuaXRpZXMsXG4gICAgICAgIGFjdGl2ZUNvbW11bml0aWVzLFxuICAgICAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgdGhpcy5wcmlzbWEudXNlci5jb3VudCgpLFxuICAgICAgICB0aGlzLnByaXNtYS51c2VyLmNvdW50KHsgd2hlcmU6IHdoZXJlRGF0ZSB9KSxcbiAgICAgICAgdGhpcy5wcmlzbWEudGhlcmFwaXN0LmNvdW50KHsgd2hlcmU6IHsgc3RhdHVzOiAnYXBwcm92ZWQnIH0gfSksXG4gICAgICAgIHRoaXMucHJpc21hLnRoZXJhcGlzdC5jb3VudCh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIHN0YXR1czogJ2FwcHJvdmVkJyxcbiAgICAgICAgICAgIC4uLndoZXJlRGF0ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy5wcmlzbWEubWVldGluZy5jb3VudCgpLFxuICAgICAgICB0aGlzLnByaXNtYS5tZWV0aW5nLmNvdW50KHsgd2hlcmU6IHsgc3RhdHVzOiAnQ09NUExFVEVEJyB9IH0pLFxuICAgICAgICB0aGlzLnByaXNtYS5wb3N0LmNvdW50KCksXG4gICAgICAgIHRoaXMucHJpc21hLnBvc3QuY291bnQoeyB3aGVyZTogd2hlcmVEYXRlIH0pLFxuICAgICAgICB0aGlzLnByaXNtYS5jb21tdW5pdHkuY291bnQoKSxcbiAgICAgICAgdGhpcy5wcmlzbWEuY29tbXVuaXR5LmNvdW50KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgcm9vbUdyb3Vwczoge1xuICAgICAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICAgICAgcm9vbXM6IHtcbiAgICAgICAgICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBzb21lOiB3aGVyZURhdGUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgXSk7XG5cbiAgICAgIGNvbnN0IHVzZXJHcm93dGggPSBhd2FpdCB0aGlzLmdldFVzZXJHcm93dGhTdGF0cyhzdGFydERhdGUsIGVuZERhdGUpO1xuICAgICAgY29uc3QgZW5nYWdlbWVudFN0YXRzID0gYXdhaXQgdGhpcy5nZXRFbmdhZ2VtZW50U3RhdHMoc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICAgIGNvbnN0IHNlc3Npb25TdGF0cyA9IGF3YWl0IHRoaXMuZ2V0U2Vzc2lvblN0YXRzKHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG92ZXJ2aWV3OiB7XG4gICAgICAgICAgdG90YWxVc2VycyxcbiAgICAgICAgICBuZXdVc2VycyxcbiAgICAgICAgICB0b3RhbFRoZXJhcGlzdHMsXG4gICAgICAgICAgbmV3VGhlcmFwaXN0cyxcbiAgICAgICAgICB0b3RhbE1lZXRpbmdzLFxuICAgICAgICAgIGNvbXBsZXRlZE1lZXRpbmdzLFxuICAgICAgICAgIG1lZXRpbmdDb21wbGV0aW9uUmF0ZTpcbiAgICAgICAgICAgIHRvdGFsTWVldGluZ3MgPiAwID8gKGNvbXBsZXRlZE1lZXRpbmdzIC8gdG90YWxNZWV0aW5ncykgKiAxMDAgOiAwLFxuICAgICAgICAgIHRvdGFsUG9zdHMsXG4gICAgICAgICAgbmV3UG9zdHMsXG4gICAgICAgICAgdG90YWxDb21tdW5pdGllcyxcbiAgICAgICAgICBhY3RpdmVDb21tdW5pdGllcyxcbiAgICAgICAgfSxcbiAgICAgICAgdXNlckdyb3d0aCxcbiAgICAgICAgZW5nYWdlbWVudDogZW5nYWdlbWVudFN0YXRzLFxuICAgICAgICBzZXNzaW9uczogc2Vzc2lvblN0YXRzLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBnZXQgcGxhdGZvcm0gYW5hbHl0aWNzOiAke1N0cmluZyhlcnJvcil9YCk7XG4gICAgICB0aHJvdyBuZXcgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbihcbiAgICAgICAgJ0ZhaWxlZCB0byByZXRyaWV2ZSBwbGF0Zm9ybSBhbmFseXRpY3MnLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRVc2VyR3Jvd3RoU3RhdHMoc3RhcnREYXRlPzogRGF0ZSwgZW5kRGF0ZT86IERhdGUpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0ZUZpbHRlciA9IHt9O1xuICAgICAgaWYgKHN0YXJ0RGF0ZSkgZGF0ZUZpbHRlclsnZ3RlJ10gPSBzdGFydERhdGU7XG4gICAgICBpZiAoZW5kRGF0ZSkgZGF0ZUZpbHRlclsnbHRlJ10gPSBlbmREYXRlO1xuXG4gICAgICBjb25zdCB3aGVyZURhdGUgPVxuICAgICAgICBPYmplY3Qua2V5cyhkYXRlRmlsdGVyKS5sZW5ndGggPiAwID8geyBjcmVhdGVkQXQ6IGRhdGVGaWx0ZXIgfSA6IHt9O1xuXG4gICAgICBjb25zdCB1c2Vyc0J5Um9sZSA9IGF3YWl0IHRoaXMucHJpc21hLnVzZXIuZ3JvdXBCeSh7XG4gICAgICAgIGJ5OiBbJ3JvbGUnXSxcbiAgICAgICAgd2hlcmU6IHdoZXJlRGF0ZSxcbiAgICAgICAgX2NvdW50OiB7IHJvbGU6IHRydWUgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBtb250aGx5R3Jvd3RoID0gYXdhaXQgdGhpcy5wcmlzbWEuJHF1ZXJ5UmF3YFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgREFURV9UUlVOQygnbW9udGgnLCBcImNyZWF0ZWRBdFwiKSBhcyBtb250aCxcbiAgICAgICAgICBDT1VOVCgqKSBhcyBjb3VudCxcbiAgICAgICAgICByb2xlXG4gICAgICAgIEZST00gXCJVc2VyXCJcbiAgICAgICAgJHt3aGVyZURhdGUuY3JlYXRlZEF0ID8gJ1dIRVJFIFwiY3JlYXRlZEF0XCIgPj0gJDEgQU5EIFwiY3JlYXRlZEF0XCIgPD0gJDInIDogJyd9XG4gICAgICAgIEdST1VQIEJZIG1vbnRoLCByb2xlXG4gICAgICAgIE9SREVSIEJZIG1vbnRoIERFU0NcbiAgICAgICAgTElNSVQgMTJcbiAgICAgIGA7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ5Um9sZTogdXNlcnNCeVJvbGUsXG4gICAgICAgIG1vbnRobHlHcm93dGgsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbihcbiAgICAgICAgYEZhaWxlZCB0byBnZXQgdXNlciBncm93dGggc3RhdHM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWAsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEVuZ2FnZW1lbnRTdGF0cyhzdGFydERhdGU/OiBEYXRlLCBlbmREYXRlPzogRGF0ZSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRlRmlsdGVyID0ge307XG4gICAgICBpZiAoc3RhcnREYXRlKSBkYXRlRmlsdGVyWydndGUnXSA9IHN0YXJ0RGF0ZTtcbiAgICAgIGlmIChlbmREYXRlKSBkYXRlRmlsdGVyWydsdGUnXSA9IGVuZERhdGU7XG5cbiAgICAgIGNvbnN0IHdoZXJlRGF0ZSA9XG4gICAgICAgIE9iamVjdC5rZXlzKGRhdGVGaWx0ZXIpLmxlbmd0aCA+IDAgPyB7IGNyZWF0ZWRBdDogZGF0ZUZpbHRlciB9IDoge307XG5cbiAgICAgIGNvbnN0IFtcbiAgICAgICAgdG90YWxQb3N0cyxcbiAgICAgICAgdG90YWxDb21tZW50cyxcbiAgICAgICAgdG90YWxIZWFydHMsXG4gICAgICAgIGFjdGl2ZUNvbW11bml0aWVzLFxuICAgICAgICBhY3RpdmVVc2VycyxcbiAgICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMucHJpc21hLnBvc3QuY291bnQoeyB3aGVyZTogd2hlcmVEYXRlIH0pLFxuICAgICAgICB0aGlzLnByaXNtYS5jb21tZW50LmNvdW50KHsgd2hlcmU6IHdoZXJlRGF0ZSB9KSxcbiAgICAgICAgdGhpcy5wcmlzbWEucG9zdEhlYXJ0LmNvdW50KHsgd2hlcmU6IHdoZXJlRGF0ZSB9KSxcbiAgICAgICAgdGhpcy5wcmlzbWEuY29tbXVuaXR5LmNvdW50KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgcm9vbUdyb3Vwczoge1xuICAgICAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICAgICAgcm9vbXM6IHtcbiAgICAgICAgICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBzb21lOiB3aGVyZURhdGUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgICB0aGlzLnByaXNtYS51c2VyLmNvdW50KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgeyBwb3N0czogeyBzb21lOiB3aGVyZURhdGUgfSB9LFxuICAgICAgICAgICAgICB7IGNvbW1lbnRzOiB7IHNvbWU6IHdoZXJlRGF0ZSB9IH0sXG4gICAgICAgICAgICAgIHsgcG9zdEhlYXJ0czogeyBzb21lOiB3aGVyZURhdGUgfSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCB0b3BDb21tdW5pdGllcyA9IGF3YWl0IHRoaXMucHJpc21hLmNvbW11bml0eS5maW5kTWFueSh7XG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICBtZW1iZXJzaGlwczogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgIG1lbWJlcnNoaXBzOiB7XG4gICAgICAgICAgICBfY291bnQ6ICdkZXNjJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB0YWtlOiAxMCxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBvdmVydmlldzoge1xuICAgICAgICAgIHRvdGFsUG9zdHMsXG4gICAgICAgICAgdG90YWxDb21tZW50cyxcbiAgICAgICAgICB0b3RhbEhlYXJ0cyxcbiAgICAgICAgICBhY3RpdmVDb21tdW5pdGllcyxcbiAgICAgICAgICBhY3RpdmVVc2VycyxcbiAgICAgICAgICBlbmdhZ2VtZW50UmF0ZTpcbiAgICAgICAgICAgIGFjdGl2ZVVzZXJzID4gMFxuICAgICAgICAgICAgICA/ICh0b3RhbFBvc3RzICsgdG90YWxDb21tZW50cyArIHRvdGFsSGVhcnRzKSAvIGFjdGl2ZVVzZXJzXG4gICAgICAgICAgICAgIDogMCxcbiAgICAgICAgfSxcbiAgICAgICAgdG9wQ29tbXVuaXRpZXMsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbihcbiAgICAgICAgYEZhaWxlZCB0byBnZXQgZW5nYWdlbWVudCBzdGF0czogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0U2Vzc2lvblN0YXRzKHN0YXJ0RGF0ZT86IERhdGUsIGVuZERhdGU/OiBEYXRlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGVGaWx0ZXIgPSB7fTtcbiAgICAgIGlmIChzdGFydERhdGUpIGRhdGVGaWx0ZXJbJ2d0ZSddID0gc3RhcnREYXRlO1xuICAgICAgaWYgKGVuZERhdGUpIGRhdGVGaWx0ZXJbJ2x0ZSddID0gZW5kRGF0ZTtcblxuICAgICAgY29uc3Qgd2hlcmVEYXRlID1cbiAgICAgICAgT2JqZWN0LmtleXMoZGF0ZUZpbHRlcikubGVuZ3RoID4gMCA/IHsgc3RhcnRUaW1lOiBkYXRlRmlsdGVyIH0gOiB7fTtcblxuICAgICAgY29uc3QgW1xuICAgICAgICB0b3RhbFNlc3Npb25zLFxuICAgICAgICBjb21wbGV0ZWRTZXNzaW9ucyxcbiAgICAgICAgYXZlcmFnZUR1cmF0aW9uLFxuICAgICAgICBzZXNzaW9uc0J5VHlwZSxcbiAgICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMucHJpc21hLnNlc3Npb25Mb2cuY291bnQoeyB3aGVyZTogd2hlcmVEYXRlIH0pLFxuICAgICAgICB0aGlzLnByaXNtYS5zZXNzaW9uTG9nLmNvdW50KHtcbiAgICAgICAgICB3aGVyZTogeyAuLi53aGVyZURhdGUsIHN0YXR1czogJ0NPTVBMRVRFRCcgfSxcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMucHJpc21hLnNlc3Npb25Mb2cuYWdncmVnYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyAuLi53aGVyZURhdGUsIHN0YXR1czogJ0NPTVBMRVRFRCcgfSxcbiAgICAgICAgICBfYXZnOiB7IGR1cmF0aW9uOiB0cnVlIH0sXG4gICAgICAgIH0pLFxuICAgICAgICB0aGlzLnByaXNtYS5zZXNzaW9uTG9nLmdyb3VwQnkoe1xuICAgICAgICAgIGJ5OiBbJ3Nlc3Npb25UeXBlJ10sXG4gICAgICAgICAgd2hlcmU6IHdoZXJlRGF0ZSxcbiAgICAgICAgICBfY291bnQ6IHsgc2Vzc2lvblR5cGU6IHRydWUgfSxcbiAgICAgICAgfSksXG4gICAgICBdKTtcblxuICAgICAgY29uc3QgdGhlcmFwaXN0UGVyZm9ybWFuY2UgPSBhd2FpdCB0aGlzLnByaXNtYS5zZXNzaW9uTG9nLmdyb3VwQnkoe1xuICAgICAgICBieTogWyd0aGVyYXBpc3RJZCddLFxuICAgICAgICB3aGVyZTogeyAuLi53aGVyZURhdGUsIHN0YXR1czogJ0NPTVBMRVRFRCcgfSxcbiAgICAgICAgX2NvdW50OiB7IHRoZXJhcGlzdElkOiB0cnVlIH0sXG4gICAgICAgIF9hdmc6IHsgcXVhbGl0eTogdHJ1ZSB9LFxuICAgICAgICBvcmRlckJ5OiB7IF9jb3VudDogeyB0aGVyYXBpc3RJZDogJ2Rlc2MnIH0gfSxcbiAgICAgICAgdGFrZTogMTAsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3ZlcnZpZXc6IHtcbiAgICAgICAgICB0b3RhbFNlc3Npb25zLFxuICAgICAgICAgIGNvbXBsZXRlZFNlc3Npb25zLFxuICAgICAgICAgIGNvbXBsZXRpb25SYXRlOlxuICAgICAgICAgICAgdG90YWxTZXNzaW9ucyA+IDAgPyAoY29tcGxldGVkU2Vzc2lvbnMgLyB0b3RhbFNlc3Npb25zKSAqIDEwMCA6IDAsXG4gICAgICAgICAgYXZlcmFnZUR1cmF0aW9uOiBhdmVyYWdlRHVyYXRpb24uX2F2Zy5kdXJhdGlvbiB8fCAwLFxuICAgICAgICB9LFxuICAgICAgICBzZXNzaW9uc0J5VHlwZSxcbiAgICAgICAgdG9wVGhlcmFwaXN0czogdGhlcmFwaXN0UGVyZm9ybWFuY2UsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbihcbiAgICAgICAgYEZhaWxlZCB0byBnZXQgc2Vzc2lvbiBzdGF0czogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VGhlcmFwaXN0QW5hbHl0aWNzKFxuICAgIHRoZXJhcGlzdElkOiBzdHJpbmcsXG4gICAgc3RhcnREYXRlPzogRGF0ZSxcbiAgICBlbmREYXRlPzogRGF0ZSxcbiAgKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGVGaWx0ZXIgPSB7fTtcbiAgICAgIGlmIChzdGFydERhdGUpIGRhdGVGaWx0ZXJbJ2d0ZSddID0gc3RhcnREYXRlO1xuICAgICAgaWYgKGVuZERhdGUpIGRhdGVGaWx0ZXJbJ2x0ZSddID0gZW5kRGF0ZTtcblxuICAgICAgY29uc3Qgd2hlcmVEYXRlID1cbiAgICAgICAgT2JqZWN0LmtleXMoZGF0ZUZpbHRlcikubGVuZ3RoID4gMCA/IHsgc3RhcnRUaW1lOiBkYXRlRmlsdGVyIH0gOiB7fTtcblxuICAgICAgY29uc3QgW1xuICAgICAgICB0b3RhbENsaWVudHMsXG4gICAgICAgIGFjdGl2ZVNlc3Npb25zLFxuICAgICAgICBjb21wbGV0ZWRTZXNzaW9ucyxcbiAgICAgICAgYXZlcmFnZVJhdGluZyxcbiAgICAgICAgd29ya3NoZWV0c0Fzc2lnbmVkLFxuICAgICAgICB3b3Jrc2hlZXRzQ29tcGxldGVkLFxuICAgICAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgdGhpcy5wcmlzbWEuY2xpZW50VGhlcmFwaXN0LmNvdW50KHtcbiAgICAgICAgICB3aGVyZTogeyB0aGVyYXBpc3RJZCwgc3RhdHVzOiAnYWN0aXZlJyB9LFxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy5wcmlzbWEuc2Vzc2lvbkxvZy5jb3VudCh7XG4gICAgICAgICAgd2hlcmU6IHsgdGhlcmFwaXN0SWQsIC4uLndoZXJlRGF0ZSB9LFxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy5wcmlzbWEuc2Vzc2lvbkxvZy5jb3VudCh7XG4gICAgICAgICAgd2hlcmU6IHsgdGhlcmFwaXN0SWQsIHN0YXR1czogJ0NPTVBMRVRFRCcsIC4uLndoZXJlRGF0ZSB9LFxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy5wcmlzbWEuc2Vzc2lvbkxvZy5hZ2dyZWdhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IHRoZXJhcGlzdElkLCBzdGF0dXM6ICdDT01QTEVURUQnLCAuLi53aGVyZURhdGUgfSxcbiAgICAgICAgICBfYXZnOiB7IHF1YWxpdHk6IHRydWUgfSxcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMucHJpc21hLndvcmtzaGVldC5jb3VudCh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIHRoZXJhcGlzdElkLFxuICAgICAgICAgICAgLi4uKHN0YXJ0RGF0ZSB8fCBlbmREYXRlXG4gICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihzdGFydERhdGUgJiYgeyBndGU6IHN0YXJ0RGF0ZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGVuZERhdGUgJiYgeyBsdGU6IGVuZERhdGUgfSksXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMucHJpc21hLndvcmtzaGVldC5jb3VudCh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIHRoZXJhcGlzdElkLFxuICAgICAgICAgICAgaXNDb21wbGV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAuLi4oc3RhcnREYXRlIHx8IGVuZERhdGVcbiAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICBzdWJtaXR0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAuLi4oc3RhcnREYXRlICYmIHsgZ3RlOiBzdGFydERhdGUgfSksXG4gICAgICAgICAgICAgICAgICAgIC4uLihlbmREYXRlICYmIHsgbHRlOiBlbmREYXRlIH0pLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgXSk7XG5cbiAgICAgIGNvbnN0IGNsaWVudFByb2dyZXNzID0gYXdhaXQgdGhpcy5wcmlzbWEudGhlcmFweVByb2dyZXNzLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICB0aGVyYXBpc3RJZCxcbiAgICAgICAgICAuLi4oc3RhcnREYXRlIHx8IGVuZERhdGVcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGFzc2Vzc21lbnREYXRlOiB7XG4gICAgICAgICAgICAgICAgICAuLi4oc3RhcnREYXRlICYmIHsgZ3RlOiBzdGFydERhdGUgfSksXG4gICAgICAgICAgICAgICAgICAuLi4oZW5kRGF0ZSAmJiB7IGx0ZTogZW5kRGF0ZSB9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGNsaWVudDoge1xuICAgICAgICAgICAgaW5jbHVkZTogeyB1c2VyOiB0cnVlIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeTogeyBhc3Nlc3NtZW50RGF0ZTogJ2Rlc2MnIH0sXG4gICAgICAgIHRha2U6IDEwLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG92ZXJ2aWV3OiB7XG4gICAgICAgICAgdG90YWxDbGllbnRzLFxuICAgICAgICAgIGFjdGl2ZVNlc3Npb25zLFxuICAgICAgICAgIGNvbXBsZXRlZFNlc3Npb25zLFxuICAgICAgICAgIHNlc3Npb25Db21wbGV0aW9uUmF0ZTpcbiAgICAgICAgICAgIGFjdGl2ZVNlc3Npb25zID4gMCA/IChjb21wbGV0ZWRTZXNzaW9ucyAvIGFjdGl2ZVNlc3Npb25zKSAqIDEwMCA6IDAsXG4gICAgICAgICAgYXZlcmFnZVJhdGluZzogYXZlcmFnZVJhdGluZy5fYXZnLnF1YWxpdHkgfHwgMCxcbiAgICAgICAgICB3b3Jrc2hlZXRzQXNzaWduZWQsXG4gICAgICAgICAgd29ya3NoZWV0c0NvbXBsZXRlZCxcbiAgICAgICAgICB3b3Jrc2hlZXRDb21wbGV0aW9uUmF0ZTpcbiAgICAgICAgICAgIHdvcmtzaGVldHNBc3NpZ25lZCA+IDBcbiAgICAgICAgICAgICAgPyAod29ya3NoZWV0c0NvbXBsZXRlZCAvIHdvcmtzaGVldHNBc3NpZ25lZCkgKiAxMDBcbiAgICAgICAgICAgICAgOiAwLFxuICAgICAgICB9LFxuICAgICAgICByZWNlbnRQcm9ncmVzczogY2xpZW50UHJvZ3Jlc3MsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbihcbiAgICAgICAgYEZhaWxlZCB0byBnZXQgdGhlcmFwaXN0IGFuYWx5dGljczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0Q2xpZW50QW5hbHl0aWNzKGNsaWVudElkOiBzdHJpbmcsIHN0YXJ0RGF0ZT86IERhdGUsIGVuZERhdGU/OiBEYXRlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGVGaWx0ZXIgPSB7fTtcbiAgICAgIGlmIChzdGFydERhdGUpIGRhdGVGaWx0ZXJbJ2d0ZSddID0gc3RhcnREYXRlO1xuICAgICAgaWYgKGVuZERhdGUpIGRhdGVGaWx0ZXJbJ2x0ZSddID0gZW5kRGF0ZTtcblxuICAgICAgY29uc3Qgd2hlcmVEYXRlID1cbiAgICAgICAgT2JqZWN0LmtleXMoZGF0ZUZpbHRlcikubGVuZ3RoID4gMCA/IHsgc3RhcnRUaW1lOiBkYXRlRmlsdGVyIH0gOiB7fTtcblxuICAgICAgY29uc3QgW1xuICAgICAgICB0b3RhbFNlc3Npb25zLFxuICAgICAgICBjb21wbGV0ZWRTZXNzaW9ucyxcbiAgICAgICAgYXZlcmFnZVNlc3Npb25SYXRpbmcsXG4gICAgICAgIHdvcmtzaGVldHNBc3NpZ25lZCxcbiAgICAgICAgd29ya3NoZWV0c0NvbXBsZXRlZCxcbiAgICAgICAgY29tbXVuaXR5UG9zdHMsXG4gICAgICAgIGNvbW11bml0eUVuZ2FnZW1lbnQsXG4gICAgICBdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLnByaXNtYS5zZXNzaW9uTG9nLmNvdW50KHtcbiAgICAgICAgICB3aGVyZTogeyBjbGllbnRJZCwgLi4ud2hlcmVEYXRlIH0sXG4gICAgICAgIH0pLFxuICAgICAgICB0aGlzLnByaXNtYS5zZXNzaW9uTG9nLmNvdW50KHtcbiAgICAgICAgICB3aGVyZTogeyBjbGllbnRJZCwgc3RhdHVzOiAnQ09NUExFVEVEJywgLi4ud2hlcmVEYXRlIH0sXG4gICAgICAgIH0pLFxuICAgICAgICB0aGlzLnByaXNtYS5zZXNzaW9uTG9nLmFnZ3JlZ2F0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgY2xpZW50SWQsIHN0YXR1czogJ0NPTVBMRVRFRCcsIC4uLndoZXJlRGF0ZSB9LFxuICAgICAgICAgIF9hdmc6IHsgcXVhbGl0eTogdHJ1ZSB9LFxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy5wcmlzbWEud29ya3NoZWV0LmNvdW50KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICAuLi4oc3RhcnREYXRlIHx8IGVuZERhdGVcbiAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKHN0YXJ0RGF0ZSAmJiB7IGd0ZTogc3RhcnREYXRlIH0pLFxuICAgICAgICAgICAgICAgICAgICAuLi4oZW5kRGF0ZSAmJiB7IGx0ZTogZW5kRGF0ZSB9KSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy5wcmlzbWEud29ya3NoZWV0LmNvdW50KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICBpc0NvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIC4uLihzdGFydERhdGUgfHwgZW5kRGF0ZVxuICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgIHN1Ym1pdHRlZEF0OiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihzdGFydERhdGUgJiYgeyBndGU6IHN0YXJ0RGF0ZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGVuZERhdGUgJiYgeyBsdGU6IGVuZERhdGUgfSksXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMucHJpc21hLnBvc3QuY291bnQoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICB1c2VySWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgLi4uKHN0YXJ0RGF0ZSB8fCBlbmREYXRlXG4gICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihzdGFydERhdGUgJiYgeyBndGU6IHN0YXJ0RGF0ZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGVuZERhdGUgJiYgeyBsdGU6IGVuZERhdGUgfSksXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMucHJpc21hLmNvbW1lbnQuY291bnQoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICB1c2VySWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgLi4uKHN0YXJ0RGF0ZSB8fCBlbmREYXRlXG4gICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihzdGFydERhdGUgJiYgeyBndGU6IHN0YXJ0RGF0ZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGVuZERhdGUgJiYgeyBsdGU6IGVuZERhdGUgfSksXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICBdKTtcblxuICAgICAgY29uc3QgcHJvZ3Jlc3NIaXN0b3J5ID0gYXdhaXQgdGhpcy5wcmlzbWEudGhlcmFweVByb2dyZXNzLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAuLi4oc3RhcnREYXRlIHx8IGVuZERhdGVcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGFzc2Vzc21lbnREYXRlOiB7XG4gICAgICAgICAgICAgICAgICAuLi4oc3RhcnREYXRlICYmIHsgZ3RlOiBzdGFydERhdGUgfSksXG4gICAgICAgICAgICAgICAgICAuLi4oZW5kRGF0ZSAmJiB7IGx0ZTogZW5kRGF0ZSB9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeTogeyBhc3Nlc3NtZW50RGF0ZTogJ2Rlc2MnIH0sXG4gICAgICAgIHRha2U6IDEwLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG92ZXJ2aWV3OiB7XG4gICAgICAgICAgdG90YWxTZXNzaW9ucyxcbiAgICAgICAgICBjb21wbGV0ZWRTZXNzaW9ucyxcbiAgICAgICAgICBzZXNzaW9uQ29tcGxldGlvblJhdGU6XG4gICAgICAgICAgICB0b3RhbFNlc3Npb25zID4gMCA/IChjb21wbGV0ZWRTZXNzaW9ucyAvIHRvdGFsU2Vzc2lvbnMpICogMTAwIDogMCxcbiAgICAgICAgICBhdmVyYWdlU2Vzc2lvblJhdGluZzogYXZlcmFnZVNlc3Npb25SYXRpbmcuX2F2Zy5xdWFsaXR5IHx8IDAsXG4gICAgICAgICAgd29ya3NoZWV0c0Fzc2lnbmVkLFxuICAgICAgICAgIHdvcmtzaGVldHNDb21wbGV0ZWQsXG4gICAgICAgICAgd29ya3NoZWV0Q29tcGxldGlvblJhdGU6XG4gICAgICAgICAgICB3b3Jrc2hlZXRzQXNzaWduZWQgPiAwXG4gICAgICAgICAgICAgID8gKHdvcmtzaGVldHNDb21wbGV0ZWQgLyB3b3Jrc2hlZXRzQXNzaWduZWQpICogMTAwXG4gICAgICAgICAgICAgIDogMCxcbiAgICAgICAgICBjb21tdW5pdHlQb3N0cyxcbiAgICAgICAgICBjb21tdW5pdHlFbmdhZ2VtZW50LFxuICAgICAgICB9LFxuICAgICAgICBwcm9ncmVzc0hpc3RvcnksXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbihcbiAgICAgICAgYEZhaWxlZCB0byBnZXQgY2xpZW50IGFuYWx5dGljczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCxcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG4iXSwidmVyc2lvbiI6M30=