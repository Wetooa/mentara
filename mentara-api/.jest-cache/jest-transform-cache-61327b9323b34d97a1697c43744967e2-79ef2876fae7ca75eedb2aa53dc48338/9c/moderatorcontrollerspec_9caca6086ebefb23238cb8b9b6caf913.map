{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/moderator/moderator.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/moderator/moderator.controller.spec.ts"],"sourcesContent":["/**\n * Comprehensive Test Suite for ModeratorController\n * Tests moderator CRUD operations and management functionality\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { BadRequestException, NotFoundException, ForbiddenException, HttpException, HttpStatus } from '@nestjs/common';\nimport { ModeratorController } from './moderator.controller';\nimport { ModeratorService } from './moderator.service';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { Moderator, Prisma } from '@prisma/client';\nimport { SecurityGuardTestUtils, RoleBasedTestUtils } from '../test-utils/auth-testing-helpers';\nimport { MockBuilder, TestDataGenerator, TestAssertions } from '../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../test-utils/index';\n\ndescribe('ModeratorController', () => {\n  let controller: ModeratorController;\n  let moderatorService: ModeratorService;\n  let module: TestingModule;\n\n  // Mock ModeratorService\n  const mockModeratorService = {\n    findAll: jest.fn(),\n    findOne: jest.fn(),\n    create: jest.fn(),\n    update: jest.fn(),\n    remove: jest.fn(),\n  };\n\n  // Mock JwtAuthGuard\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test data\n  const mockModerator: Moderator = {\n    id: 'moderator_123456789',\n    userId: TEST_USER_IDS.MODERATOR,\n    role: 'content_moderator',\n    permissions: ['view_posts', 'moderate_posts', 'delete_posts', 'ban_users'],\n    assignedCommunities: ['community_1', 'community_2'],\n    moderationLevel: 2,\n    isActive: true,\n    specializations: ['mental-health', 'crisis-intervention'],\n    languages: ['english', 'spanish'],\n    timezone: 'America/New_York',\n    workingHours: {\n      monday: { start: '09:00', end: '17:00' },\n      tuesday: { start: '09:00', end: '17:00' },\n      wednesday: { start: '09:00', end: '17:00' },\n      thursday: { start: '09:00', end: '17:00' },\n      friday: { start: '09:00', end: '17:00' },\n    },\n    metrics: {\n      totalActions: 245,\n      postsModerated: 189,\n      usersWarned: 32,\n      usersBanned: 8,\n      communitiesManaged: 2,\n      averageResponseTime: 18.5, // minutes\n    },\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    updatedAt: new Date('2024-02-14T10:00:00Z'),\n  };\n\n  const mockModeratorsList: Moderator[] = [\n    mockModerator,\n    {\n      ...mockModerator,\n      id: 'moderator_987654321',\n      userId: 'user_moderator_2',\n      role: 'senior_moderator',\n      moderationLevel: 3,\n      assignedCommunities: ['community_3', 'community_4', 'community_5'],\n      specializations: ['eating-disorders', 'addiction'],\n      metrics: {\n        totalActions: 456,\n        postsModerated: 334,\n        usersWarned: 78,\n        usersBanned: 23,\n        communitiesManaged: 3,\n        averageResponseTime: 12.3,\n      },\n    },\n  ];\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [ModeratorController],\n      providers: [\n        {\n          provide: ModeratorService,\n          useValue: mockModeratorService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .compile();\n\n    controller = module.get<ModeratorController>(ModeratorController);\n    moderatorService = module.get<ModeratorService>(ModeratorService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have moderatorService injected', () => {\n      expect(moderatorService).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', ModeratorController);\n      expect(guards).toContain(JwtAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', ModeratorController);\n      expect(controllerMetadata).toBe('moderator');\n    });\n  });\n\n  describe('GET /moderator', () => {\n    it('should get all moderators successfully', async () => {\n      mockModeratorService.findAll.mockResolvedValue(mockModeratorsList);\n\n      const result = await controller.findAll();\n\n      expect(result).toEqual(mockModeratorsList);\n      expect(result).toHaveLength(2);\n      expect(moderatorService.findAll).toHaveBeenCalledWith();\n    });\n\n    it('should handle empty moderators list', async () => {\n      mockModeratorService.findAll.mockResolvedValue([]);\n\n      const result = await controller.findAll();\n\n      expect(result).toEqual([]);\n      expect(result).toHaveLength(0);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database connection failed');\n      mockModeratorService.findAll.mockRejectedValue(serviceError);\n\n      await expect(controller.findAll()).rejects.toThrow(HttpException);\n      await expect(controller.findAll()).rejects.toThrow('Failed to fetch moderators');\n    });\n\n    it('should return moderators with all required fields', async () => {\n      mockModeratorService.findAll.mockResolvedValue(mockModeratorsList);\n\n      const result = await controller.findAll();\n\n      result.forEach((moderator) => {\n        expect(moderator).toHaveProperty('id');\n        expect(moderator).toHaveProperty('userId');\n        expect(moderator).toHaveProperty('role');\n        expect(moderator).toHaveProperty('permissions');\n        expect(moderator).toHaveProperty('assignedCommunities');\n        expect(moderator).toHaveProperty('moderationLevel');\n        expect(moderator).toHaveProperty('isActive');\n        expect(moderator).toHaveProperty('metrics');\n        expect(Array.isArray(moderator.permissions)).toBe(true);\n        expect(Array.isArray(moderator.assignedCommunities)).toBe(true);\n        expect(typeof moderator.moderationLevel).toBe('number');\n        expect(typeof moderator.isActive).toBe('boolean');\n      });\n    });\n\n    it('should handle different moderator roles', async () => {\n      const diverseModeratorsList = [\n        { ...mockModerator, role: 'content_moderator' },\n        { ...mockModerator, id: 'mod_2', role: 'senior_moderator' },\n        { ...mockModerator, id: 'mod_3', role: 'community_manager' },\n        { ...mockModerator, id: 'mod_4', role: 'crisis_moderator' },\n      ];\n      mockModeratorService.findAll.mockResolvedValue(diverseModeratorsList);\n\n      const result = await controller.findAll();\n\n      const roles = result.map(mod => mod.role);\n      expect(roles).toContain('content_moderator');\n      expect(roles).toContain('senior_moderator');\n      expect(roles).toContain('community_manager');\n      expect(roles).toContain('crisis_moderator');\n    });\n  });\n\n  describe('GET /moderator/:id', () => {\n    const moderatorId = 'moderator_123456789';\n\n    it('should get moderator by id successfully', async () => {\n      mockModeratorService.findOne.mockResolvedValue(mockModerator);\n\n      const result = await controller.findOne(moderatorId);\n\n      expect(result).toEqual(mockModerator);\n      expect(moderatorService.findOne).toHaveBeenCalledWith(moderatorId);\n    });\n\n    it('should handle moderator not found', async () => {\n      mockModeratorService.findOne.mockResolvedValue(null);\n\n      await expect(controller.findOne('non-existent-id')).rejects.toThrow(HttpException);\n      await expect(controller.findOne('non-existent-id')).rejects.toThrow('Moderator not found');\n    });\n\n    it('should return complete moderator details', async () => {\n      const detailedModerator = {\n        ...mockModerator,\n        recentActions: [\n          {\n            id: 'action_1',\n            type: 'post_moderation',\n            target: 'post_123',\n            action: 'approved',\n            timestamp: new Date(),\n            reason: 'Content appropriate',\n          },\n          {\n            id: 'action_2',\n            type: 'user_warning',\n            target: 'user_456',\n            action: 'warned',\n            timestamp: new Date(),\n            reason: 'Inappropriate language',\n          },\n        ],\n        managedCommunities: [\n          {\n            id: 'community_1',\n            name: 'Anxiety Support',\n            memberCount: 1250,\n            activeIssues: 3,\n          },\n          {\n            id: 'community_2',\n            name: 'Depression Recovery',\n            memberCount: 890,\n            activeIssues: 1,\n          },\n        ],\n      };\n      mockModeratorService.findOne.mockResolvedValue(detailedModerator);\n\n      const result = await controller.findOne(moderatorId);\n\n      expect(result.recentActions).toBeDefined();\n      expect(result.managedCommunities).toBeDefined();\n      expect(Array.isArray(result.recentActions)).toBe(true);\n      expect(Array.isArray(result.managedCommunities)).toBe(true);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database query failed');\n      mockModeratorService.findOne.mockRejectedValue(serviceError);\n\n      await expect(controller.findOne(moderatorId)).rejects.toThrow(HttpException);\n      await expect(controller.findOne(moderatorId)).rejects.toThrow('Failed to fetch moderator');\n    });\n\n    it('should preserve HttpExceptions from service layer', async () => {\n      const httpException = new HttpException('Access denied', HttpStatus.FORBIDDEN);\n      mockModeratorService.findOne.mockRejectedValue(httpException);\n\n      await expect(controller.findOne(moderatorId)).rejects.toThrow(httpException);\n    });\n  });\n\n  describe('POST /moderator', () => {\n    const createModeratorDto: Prisma.ModeratorCreateInput = {\n      userId: 'new_moderator_user_id',\n      role: 'content_moderator',\n      permissions: ['view_posts', 'moderate_posts'],\n      assignedCommunities: ['community_1'],\n      moderationLevel: 1,\n      isActive: true,\n      specializations: ['anxiety'],\n      languages: ['english'],\n      timezone: 'America/New_York',\n      workingHours: {\n        monday: { start: '09:00', end: '17:00' },\n        tuesday: { start: '09:00', end: '17:00' },\n        wednesday: { start: '09:00', end: '17:00' },\n        thursday: { start: '09:00', end: '17:00' },\n        friday: { start: '09:00', end: '17:00' },\n      },\n    };\n\n    it('should create moderator successfully', async () => {\n      const createdModerator = {\n        ...mockModerator,\n        ...createModeratorDto,\n        id: 'new_moderator_123456789',\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      };\n      mockModeratorService.create.mockResolvedValue(createdModerator);\n\n      const result = await controller.create(createModeratorDto);\n\n      expect(result).toEqual(createdModerator);\n      expect(result.userId).toBe(createModeratorDto.userId);\n      expect(result.role).toBe(createModeratorDto.role);\n      expect(moderatorService.create).toHaveBeenCalledWith(createModeratorDto);\n    });\n\n    it('should handle different moderator roles creation', async () => {\n      const roles = ['content_moderator', 'senior_moderator', 'community_manager', 'crisis_moderator'];\n      \n      for (const role of roles) {\n        const dto = { ...createModeratorDto, role };\n        const createdModerator = {\n          ...mockModerator,\n          ...dto,\n          id: `moderator_${role}_123`,\n        };\n        mockModeratorService.create.mockResolvedValue(createdModerator);\n\n        const result = await controller.create(dto);\n\n        expect(result.role).toBe(role);\n      }\n    });\n\n    it('should handle different moderation levels', async () => {\n      const levels = [1, 2, 3, 4, 5];\n      \n      for (const level of levels) {\n        const dto = { ...createModeratorDto, moderationLevel: level };\n        const createdModerator = {\n          ...mockModerator,\n          ...dto,\n          id: `moderator_level_${level}`,\n        };\n        mockModeratorService.create.mockResolvedValue(createdModerator);\n\n        const result = await controller.create(dto);\n\n        expect(result.moderationLevel).toBe(level);\n      }\n    });\n\n    it('should handle various permission combinations', async () => {\n      const permissionSets = [\n        ['view_posts'],\n        ['view_posts', 'moderate_posts'],\n        ['view_posts', 'moderate_posts', 'delete_posts'],\n        ['view_posts', 'moderate_posts', 'delete_posts', 'ban_users'],\n        ['view_posts', 'moderate_posts', 'manage_communities'],\n      ];\n\n      for (const permissions of permissionSets) {\n        const dto = { ...createModeratorDto, permissions };\n        const createdModerator = {\n          ...mockModerator,\n          ...dto,\n          id: `moderator_perm_${permissions.length}`,\n        };\n        mockModeratorService.create.mockResolvedValue(createdModerator);\n\n        const result = await controller.create(dto);\n\n        expect(result.permissions).toEqual(permissions);\n      }\n    });\n\n    it('should handle creation with multiple specializations', async () => {\n      const specializations = [\n        ['anxiety'],\n        ['anxiety', 'depression'],\n        ['anxiety', 'depression', 'trauma'],\n        ['mental-health', 'crisis-intervention', 'eating-disorders'],\n      ];\n\n      for (const specs of specializations) {\n        const dto = { ...createModeratorDto, specializations: specs };\n        const createdModerator = {\n          ...mockModerator,\n          ...dto,\n          id: `moderator_spec_${specs.length}`,\n        };\n        mockModeratorService.create.mockResolvedValue(createdModerator);\n\n        const result = await controller.create(dto);\n\n        expect(result.specializations).toEqual(specs);\n      }\n    });\n\n    it('should handle creation errors', async () => {\n      const creationError = new Error('User already has moderator role');\n      mockModeratorService.create.mockRejectedValue(creationError);\n\n      await expect(controller.create(createModeratorDto)).rejects.toThrow(HttpException);\n      await expect(controller.create(createModeratorDto)).rejects.toThrow('Failed to create moderator');\n    });\n\n    it('should handle validation errors', async () => {\n      const validationError = new Error('Invalid permission level');\n      mockModeratorService.create.mockRejectedValue(validationError);\n\n      await expect(controller.create(createModeratorDto)).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('PUT /moderator/:id', () => {\n    const moderatorId = 'moderator_123456789';\n    const updateModeratorDto: Prisma.ModeratorUpdateInput = {\n      role: 'senior_moderator',\n      permissions: ['view_posts', 'moderate_posts', 'delete_posts', 'ban_users'],\n      moderationLevel: 3,\n      assignedCommunities: ['community_1', 'community_2', 'community_3'],\n      specializations: ['anxiety', 'depression', 'trauma'],\n    };\n\n    it('should update moderator successfully', async () => {\n      const updatedModerator = {\n        ...mockModerator,\n        ...updateModeratorDto,\n        updatedAt: new Date(),\n      };\n      mockModeratorService.update.mockResolvedValue(updatedModerator);\n\n      const result = await controller.update(moderatorId, updateModeratorDto);\n\n      expect(result).toEqual(updatedModerator);\n      expect(result.role).toBe(updateModeratorDto.role);\n      expect(result.moderationLevel).toBe(updateModeratorDto.moderationLevel);\n      expect(moderatorService.update).toHaveBeenCalledWith(moderatorId, updateModeratorDto);\n    });\n\n    it('should handle partial updates', async () => {\n      const partialUpdate = { moderationLevel: 4 };\n      const partiallyUpdatedModerator = {\n        ...mockModerator,\n        moderationLevel: 4,\n        updatedAt: new Date(),\n      };\n      mockModeratorService.update.mockResolvedValue(partiallyUpdatedModerator);\n\n      const result = await controller.update(moderatorId, partialUpdate);\n\n      expect(result.moderationLevel).toBe(4);\n      expect(result.role).toBe(mockModerator.role); // unchanged\n    });\n\n    it('should handle role promotion updates', async () => {\n      const promotionUpdates = [\n        { role: 'senior_moderator', moderationLevel: 3 },\n        { role: 'community_manager', moderationLevel: 4 },\n        { role: 'crisis_moderator', moderationLevel: 5 },\n      ];\n\n      for (const promotion of promotionUpdates) {\n        const promotedModerator = {\n          ...mockModerator,\n          ...promotion,\n          updatedAt: new Date(),\n        };\n        mockModeratorService.update.mockResolvedValue(promotedModerator);\n\n        const result = await controller.update(moderatorId, promotion);\n\n        expect(result.role).toBe(promotion.role);\n        expect(result.moderationLevel).toBe(promotion.moderationLevel);\n      }\n    });\n\n    it('should handle permission updates', async () => {\n      const permissionUpdates = [\n        { permissions: ['view_posts'] },\n        { permissions: ['view_posts', 'moderate_posts'] },\n        { permissions: ['view_posts', 'moderate_posts', 'delete_posts'] },\n        { permissions: ['view_posts', 'moderate_posts', 'delete_posts', 'ban_users', 'manage_communities'] },\n      ];\n\n      for (const permUpdate of permissionUpdates) {\n        const updatedModerator = {\n          ...mockModerator,\n          ...permUpdate,\n          updatedAt: new Date(),\n        };\n        mockModeratorService.update.mockResolvedValue(updatedModerator);\n\n        const result = await controller.update(moderatorId, permUpdate);\n\n        expect(result.permissions).toEqual(permUpdate.permissions);\n      }\n    });\n\n    it('should handle moderator not found', async () => {\n      const notFoundError = new Error('Moderator not found');\n      mockModeratorService.update.mockRejectedValue(notFoundError);\n\n      await expect(controller.update('non-existent-id', updateModeratorDto)).rejects.toThrow(HttpException);\n      await expect(controller.update('non-existent-id', updateModeratorDto)).rejects.toThrow('Failed to update moderator');\n    });\n\n    it('should handle active status changes', async () => {\n      const statusChanges = [\n        { isActive: false }, // deactivate\n        { isActive: true },  // reactivate\n      ];\n\n      for (const statusChange of statusChanges) {\n        const statusUpdatedModerator = {\n          ...mockModerator,\n          ...statusChange,\n          updatedAt: new Date(),\n        };\n        mockModeratorService.update.mockResolvedValue(statusUpdatedModerator);\n\n        const result = await controller.update(moderatorId, statusChange);\n\n        expect(result.isActive).toBe(statusChange.isActive);\n      }\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database update failed');\n      mockModeratorService.update.mockRejectedValue(serviceError);\n\n      await expect(controller.update(moderatorId, updateModeratorDto)).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('DELETE /moderator/:id', () => {\n    const moderatorId = 'moderator_123456789';\n\n    it('should delete moderator successfully', async () => {\n      mockModeratorService.remove.mockResolvedValue(mockModerator);\n\n      const result = await controller.remove(moderatorId);\n\n      expect(result).toEqual(mockModerator);\n      expect(moderatorService.remove).toHaveBeenCalledWith(moderatorId);\n    });\n\n    it('should handle moderator not found', async () => {\n      const notFoundError = new Error('Moderator not found');\n      mockModeratorService.remove.mockRejectedValue(notFoundError);\n\n      await expect(controller.remove('non-existent-id')).rejects.toThrow(HttpException);\n      await expect(controller.remove('non-existent-id')).rejects.toThrow('Failed to delete moderator');\n    });\n\n    it('should handle deletion with active assignments', async () => {\n      const activeAssignmentError = new Error('Cannot delete moderator with active assignments');\n      mockModeratorService.remove.mockRejectedValue(activeAssignmentError);\n\n      await expect(controller.remove(moderatorId)).rejects.toThrow(HttpException);\n    });\n\n    it('should return deleted moderator data', async () => {\n      const deletedModerator = {\n        ...mockModerator,\n        isActive: false,\n        deletedAt: new Date(),\n      };\n      mockModeratorService.remove.mockResolvedValue(deletedModerator);\n\n      const result = await controller.remove(moderatorId);\n\n      expect(result).toEqual(deletedModerator);\n      expect(result.id).toBe(moderatorId);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database transaction failed');\n      mockModeratorService.remove.mockRejectedValue(serviceError);\n\n      await expect(controller.remove(moderatorId)).rejects.toThrow(HttpException);\n      await expect(controller.remove(moderatorId)).rejects.toThrow('Failed to delete moderator');\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle service unavailable scenarios', async () => {\n      const serviceError = new Error('Service temporarily unavailable');\n      mockModeratorService.findAll.mockRejectedValue(serviceError);\n\n      await expect(controller.findAll()).rejects.toThrow(HttpException);\n    });\n\n    it('should handle database connection errors', async () => {\n      const dbError = new Error('Database connection failed');\n      mockModeratorService.findOne.mockRejectedValue(dbError);\n\n      await expect(controller.findOne('moderator_123')).rejects.toThrow(HttpException);\n    });\n\n    it('should handle validation errors', async () => {\n      const validationError = new Error('Invalid moderator data');\n      mockModeratorService.create.mockRejectedValue(validationError);\n\n      await expect(controller.create({} as any)).rejects.toThrow(HttpException);\n    });\n\n    it('should provide meaningful error messages', async () => {\n      const specificError = new Error('User is already a moderator');\n      mockModeratorService.create.mockRejectedValue(specificError);\n\n      try {\n        await controller.create({} as any);\n      } catch (error) {\n        expect(error).toBeInstanceOf(HttpException);\n        expect(error.message).toContain('Failed to create moderator');\n        expect(error.message).toContain('User is already a moderator');\n      }\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted moderator list response', async () => {\n      mockModeratorService.findAll.mockResolvedValue(mockModeratorsList);\n\n      const result = await controller.findAll();\n\n      expect(Array.isArray(result)).toBe(true);\n      result.forEach((moderator) => {\n        TestAssertions.expectValidEntity(moderator, ['id', 'userId', 'role', 'permissions']);\n        expect(typeof moderator.moderationLevel).toBe('number');\n        expect(typeof moderator.isActive).toBe('boolean');\n        expect(Array.isArray(moderator.permissions)).toBe(true);\n        expect(Array.isArray(moderator.assignedCommunities)).toBe(true);\n      });\n    });\n\n    it('should return properly formatted single moderator response', async () => {\n      mockModeratorService.findOne.mockResolvedValue(mockModerator);\n\n      const result = await controller.findOne('moderator_123');\n\n      TestAssertions.expectValidEntity(result, ['id', 'userId', 'role', 'permissions']);\n      expect(result.createdAt).toBeInstanceOf(Date);\n      expect(result.updatedAt).toBeInstanceOf(Date);\n      expect(result.metrics).toBeDefined();\n      expect(typeof result.metrics.totalActions).toBe('number');\n      expect(typeof result.metrics.averageResponseTime).toBe('number');\n    });\n\n    it('should validate moderator permissions format', async () => {\n      mockModeratorService.findOne.mockResolvedValue(mockModerator);\n\n      const result = await controller.findOne('moderator_123');\n\n      expect(Array.isArray(result.permissions)).toBe(true);\n      result.permissions.forEach((permission) => {\n        expect(typeof permission).toBe('string');\n        expect(permission.length).toBeGreaterThan(0);\n      });\n    });\n\n    it('should validate moderator metrics format', async () => {\n      mockModeratorService.findOne.mockResolvedValue(mockModerator);\n\n      const result = await controller.findOne('moderator_123');\n\n      expect(result.metrics).toBeDefined();\n      expect(typeof result.metrics.totalActions).toBe('number');\n      expect(typeof result.metrics.postsModerated).toBe('number');\n      expect(typeof result.metrics.usersWarned).toBe('number');\n      expect(typeof result.metrics.usersBanned).toBe('number');\n      expect(typeof result.metrics.averageResponseTime).toBe('number');\n      expect(result.metrics.totalActions).toBeGreaterThanOrEqual(0);\n      expect(result.metrics.averageResponseTime).toBeGreaterThanOrEqual(0);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete moderator lifecycle', async () => {\n      // Create moderator\n      const createDto: Prisma.ModeratorCreateInput = {\n        userId: 'new_user_123',\n        role: 'content_moderator',\n        permissions: ['view_posts', 'moderate_posts'],\n        assignedCommunities: ['community_1'],\n        moderationLevel: 1,\n        isActive: true,\n        specializations: ['anxiety'],\n        languages: ['english'],\n        timezone: 'America/New_York',\n      };\n      const createdModerator = { ...mockModerator, ...createDto, id: 'new_moderator_123' };\n      mockModeratorService.create.mockResolvedValue(createdModerator);\n      const createResult = await controller.create(createDto);\n      expect(createResult.role).toBe('content_moderator');\n\n      // Update moderator (promotion)\n      const updateDto = { role: 'senior_moderator', moderationLevel: 3 };\n      const updatedModerator = { ...createdModerator, ...updateDto };\n      mockModeratorService.update.mockResolvedValue(updatedModerator);\n      const updateResult = await controller.update(createdModerator.id, updateDto);\n      expect(updateResult.role).toBe('senior_moderator');\n      expect(updateResult.moderationLevel).toBe(3);\n\n      // Get moderator details\n      mockModeratorService.findOne.mockResolvedValue(updatedModerator);\n      const getResult = await controller.findOne(createdModerator.id);\n      expect(getResult).toEqual(updatedModerator);\n\n      // Remove moderator\n      mockModeratorService.remove.mockResolvedValue(updatedModerator);\n      const removeResult = await controller.remove(createdModerator.id);\n      expect(removeResult).toEqual(updatedModerator);\n    });\n\n    it('should handle moderator permission progression', async () => {\n      // Start with basic permissions\n      const basicModerator = {\n        ...mockModerator,\n        permissions: ['view_posts'],\n        moderationLevel: 1,\n      };\n      mockModeratorService.findOne.mockResolvedValue(basicModerator);\n      const basic = await controller.findOne('moderator_123');\n      expect(basic.permissions).toEqual(['view_posts']);\n\n      // Upgrade to moderate permissions\n      const moderateUpdate = { permissions: ['view_posts', 'moderate_posts'] };\n      const moderateModerator = { ...basicModerator, ...moderateUpdate };\n      mockModeratorService.update.mockResolvedValue(moderateModerator);\n      const moderate = await controller.update('moderator_123', moderateUpdate);\n      expect(moderate.permissions).toContain('moderate_posts');\n\n      // Upgrade to full permissions\n      const fullUpdate = { permissions: ['view_posts', 'moderate_posts', 'delete_posts', 'ban_users'] };\n      const fullModerator = { ...moderateModerator, ...fullUpdate };\n      mockModeratorService.update.mockResolvedValue(fullModerator);\n      const full = await controller.update('moderator_123', fullUpdate);\n      expect(full.permissions).toContain('ban_users');\n    });\n  });\n});"],"version":3}