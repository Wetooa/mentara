0843e1edba2b9f5947bc9db35d2d6143
"use strict";
/**
 * Comprehensive Test Suite for ClientRequestController
 * Tests all client request management endpoints with security, validation, and error handling
 */
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const jwt_auth_guard_1 = require("../../auth/guards/jwt-auth.guard");
const client_request_controller_1 = require("./client-request.controller");
const client_request_service_1 = require("../services/client-request.service");
const enhanced_test_helpers_1 = require("../../test-utils/enhanced-test-helpers");
const index_1 = require("../../test-utils/index");
describe('ClientRequestController', () => {
    let controller;
    let clientRequestService;
    let module;
    // Mock ClientRequestService
    const mockClientRequestService = {
        sendTherapistRequest: jest.fn(),
        sendMultipleTherapistRequests: jest.fn(),
        getClientRequests: jest.fn(),
        cancelRequest: jest.fn(),
        getClientRequestStatistics: jest.fn(),
        expireStaleRequests: jest.fn(),
    };
    // Mock JwtAuthGuard
    const mockJwtAuthGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    // Test IDs
    const validTherapistId = '12345678-1234-1234-1234-123456789012'; // 36 chars UUID format
    const validRequestId = '87654321-4321-4321-4321-210987654321'; // 36 chars UUID format
    // Test data
    const mockTherapistRequest = {
        id: validRequestId,
        clientId: index_1.TEST_USER_IDS.CLIENT,
        therapistId: index_1.TEST_USER_IDS.THERAPIST,
        status: 'PENDING',
        priority: 'NORMAL',
        message: 'I would like to schedule a session',
        requestedAt: new Date(),
        respondedAt: null,
        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days from now
        createdAt: new Date(),
        updatedAt: new Date(),
    };
    const mockRequestStatistics = {
        totalSent: 5,
        pending: 2,
        accepted: 1,
        declined: 1,
        expired: 1,
        cancelled: 0,
        withdrawn: 0,
    };
    const mockPaginatedRequests = {
        requests: [mockTherapistRequest],
        pagination: {
            page: 1,
            limit: 10,
            totalCount: 1,
            totalPages: 1,
            hasNext: false,
            hasPrev: false,
        },
    };
    beforeEach(async () => {
        module = await testing_1.Test.createTestingModule({
            controllers: [client_request_controller_1.ClientRequestController],
            providers: [
                {
                    provide: client_request_service_1.ClientRequestService,
                    useValue: mockClientRequestService,
                },
            ],
        })
            .overrideGuard(jwt_auth_guard_1.JwtAuthGuard)
            .useValue(mockJwtAuthGuard)
            .compile();
        controller = module.get(client_request_controller_1.ClientRequestController);
        clientRequestService = module.get(client_request_service_1.ClientRequestService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('Controller Initialization', () => {
        it('should be defined', () => {
            expect(controller).toBeDefined();
        });
        it('should have clientRequestService injected', () => {
            expect(clientRequestService).toBeDefined();
        });
    });
    describe('Security Guards', () => {
        it('should be protected by JwtAuthGuard', () => {
            const guards = Reflect.getMetadata('__guards__', client_request_controller_1.ClientRequestController);
            expect(guards).toContain(jwt_auth_guard_1.JwtAuthGuard);
        });
        it('should have proper route decorators', () => {
            const controllerMetadata = Reflect.getMetadata('path', client_request_controller_1.ClientRequestController);
            expect(controllerMetadata).toBe('client/requests');
        });
    });
    describe('POST /client/requests/therapist/:therapistId', () => {
        const requestDto = {
            message: 'I would like to schedule a session',
            priority: 'NORMAL',
            preferredTimes: ['morning', 'afternoon'],
        };
        it('should send therapist request successfully', async () => {
            mockClientRequestService.sendTherapistRequest.mockResolvedValue(mockTherapistRequest);
            const result = await controller.sendTherapistRequest(validTherapistId, requestDto, index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockTherapistRequest);
            expect(clientRequestService.sendTherapistRequest).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, validTherapistId, requestDto);
        });
        it('should validate therapist ID format', async () => {
            const invalidTherapistId = 'invalid-id';
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.sendTherapistRequest(invalidTherapistId, requestDto, index_1.TEST_USER_IDS.CLIENT), common_1.BadRequestException, 'Invalid therapist ID format');
        });
        it('should handle empty therapist ID', async () => {
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.sendTherapistRequest('', requestDto, index_1.TEST_USER_IDS.CLIENT), common_1.BadRequestException, 'Invalid therapist ID format');
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Therapist not found');
            mockClientRequestService.sendTherapistRequest.mockRejectedValue(serviceError);
            await expect(controller.sendTherapistRequest(validTherapistId, requestDto, index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);
        });
    });
    describe('POST /client/requests/therapists/bulk', () => {
        const bulkRequestDto = {
            therapistIds: [validTherapistId, '11111111-2222-3333-4444-555555555555'],
            message: 'I would like to schedule sessions',
            priority: 'NORMAL',
            preferredTimes: ['morning'],
        };
        it('should send multiple therapist requests successfully', async () => {
            const bulkResult = {
                success: true,
                sentRequests: 2,
                failedRequests: 0,
                results: [mockTherapistRequest],
            };
            mockClientRequestService.sendMultipleTherapistRequests.mockResolvedValue(bulkResult);
            const result = await controller.sendMultipleTherapistRequests(bulkRequestDto, index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(bulkResult);
            expect(clientRequestService.sendMultipleTherapistRequests).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, bulkRequestDto);
        });
        it('should handle service errors for bulk requests', async () => {
            const serviceError = new Error('Some requests failed');
            mockClientRequestService.sendMultipleTherapistRequests.mockRejectedValue(serviceError);
            await expect(controller.sendMultipleTherapistRequests(bulkRequestDto, index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);
        });
    });
    describe('GET /client/requests', () => {
        const filters = {
            page: 1,
            limit: 10,
            sortBy: 'requestedAt',
            sortOrder: 'desc',
        };
        it('should get client requests with filters', async () => {
            mockClientRequestService.getClientRequests.mockResolvedValue(mockPaginatedRequests);
            const result = await controller.getMyRequests(filters, index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockPaginatedRequests);
            expect(clientRequestService.getClientRequests).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, filters);
        });
        it('should handle empty filters', async () => {
            const emptyFilters = {};
            mockClientRequestService.getClientRequests.mockResolvedValue(mockPaginatedRequests);
            const result = await controller.getMyRequests(emptyFilters, index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockPaginatedRequests);
            expect(clientRequestService.getClientRequests).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, emptyFilters);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Database connection failed');
            mockClientRequestService.getClientRequests.mockRejectedValue(serviceError);
            await expect(controller.getMyRequests(filters, index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);
        });
    });
    describe('GET /client/requests/:id', () => {
        it('should get request details successfully', async () => {
            mockClientRequestService.getClientRequests.mockResolvedValue(mockPaginatedRequests);
            const result = await controller.getRequestDetails(validRequestId, index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual({
                success: true,
                request: mockTherapistRequest,
            });
            expect(clientRequestService.getClientRequests).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, {
                page: 1,
                limit: 1,
                sortBy: 'requestedAt',
                sortOrder: 'desc',
            });
        });
        it('should validate request ID format', async () => {
            const invalidRequestId = 'invalid-id';
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getRequestDetails(invalidRequestId, index_1.TEST_USER_IDS.CLIENT), common_1.BadRequestException, 'Invalid request ID format');
        });
        it('should handle request not found', async () => {
            mockClientRequestService.getClientRequests.mockResolvedValue({
                requests: [],
                pagination: { page: 1, limit: 1, totalCount: 0, totalPages: 0, hasNext: false, hasPrev: false },
            });
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getRequestDetails(validRequestId, index_1.TEST_USER_IDS.CLIENT), common_1.NotFoundException, 'Request with ID 87654321-4321-4321-4321-210987654321 not found or not accessible');
        });
        it('should handle empty request ID', async () => {
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getRequestDetails('', index_1.TEST_USER_IDS.CLIENT), common_1.BadRequestException, 'Invalid request ID format');
        });
    });
    describe('PUT /client/requests/:id/cancel', () => {
        const cancelDto = {
            reason: 'Changed my mind',
        };
        it('should cancel request successfully', async () => {
            const cancelResult = {
                success: true,
                message: 'Request cancelled successfully',
                request: { ...mockTherapistRequest, status: 'CANCELLED' },
            };
            mockClientRequestService.cancelRequest.mockResolvedValue(cancelResult);
            const result = await controller.cancelRequest(validRequestId, cancelDto, index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(cancelResult);
            expect(clientRequestService.cancelRequest).toHaveBeenCalledWith(validRequestId, index_1.TEST_USER_IDS.CLIENT, cancelDto.reason);
        });
        it('should validate request ID format', async () => {
            const invalidRequestId = 'invalid-id';
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.cancelRequest(invalidRequestId, cancelDto, index_1.TEST_USER_IDS.CLIENT), common_1.BadRequestException, 'Invalid request ID format');
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Request cannot be cancelled');
            mockClientRequestService.cancelRequest.mockRejectedValue(serviceError);
            await expect(controller.cancelRequest(validRequestId, cancelDto, index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);
        });
    });
    describe('GET /client/requests/statistics', () => {
        it('should get request statistics successfully', async () => {
            mockClientRequestService.getClientRequestStatistics.mockResolvedValue(mockRequestStatistics);
            const result = await controller.getRequestStatistics(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockRequestStatistics);
            expect(clientRequestService.getClientRequestStatistics).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Statistics calculation failed');
            mockClientRequestService.getClientRequestStatistics.mockRejectedValue(serviceError);
            await expect(controller.getRequestStatistics(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);
        });
    });
    describe('GET /client/requests/pending/count', () => {
        it('should get pending requests count successfully', async () => {
            mockClientRequestService.getClientRequestStatistics.mockResolvedValue(mockRequestStatistics);
            const result = await controller.getPendingRequestsCount(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual({
                success: true,
                pendingCount: 2,
                totalSent: 5,
            });
            expect(clientRequestService.getClientRequestStatistics).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Statistics calculation failed');
            mockClientRequestService.getClientRequestStatistics.mockRejectedValue(serviceError);
            await expect(controller.getPendingRequestsCount(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);
        });
    });
    describe('GET /client/requests/recent', () => {
        it('should get recent requests successfully', async () => {
            mockClientRequestService.getClientRequests.mockResolvedValue(mockPaginatedRequests);
            const result = await controller.getRecentRequests(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual({
                success: true,
                recentRequests: [mockTherapistRequest],
                hasMore: false,
            });
            expect(clientRequestService.getClientRequests).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, {
                page: 1,
                limit: 5,
                sortBy: 'requestedAt',
                sortOrder: 'desc',
            });
        });
        it('should indicate when there are more requests', async () => {
            const mockPaginatedWithMore = {
                ...mockPaginatedRequests,
                pagination: { ...mockPaginatedRequests.pagination, totalCount: 10 },
            };
            mockClientRequestService.getClientRequests.mockResolvedValue(mockPaginatedWithMore);
            const result = await controller.getRecentRequests(index_1.TEST_USER_IDS.CLIENT);
            expect(result.hasMore).toBe(true);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Database query failed');
            mockClientRequestService.getClientRequests.mockRejectedValue(serviceError);
            await expect(controller.getRecentRequests(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);
        });
    });
    describe('PUT /client/requests/expire-stale', () => {
        it('should expire stale requests successfully', async () => {
            const expireResult = {
                success: true,
                expiredCount: 3,
                message: '3 stale requests expired',
            };
            mockClientRequestService.expireStaleRequests.mockResolvedValue(expireResult);
            const result = await controller.expireStaleRequests(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(expireResult);
            expect(clientRequestService.expireStaleRequests).toHaveBeenCalled();
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Expiration process failed');
            mockClientRequestService.expireStaleRequests.mockRejectedValue(serviceError);
            await expect(controller.expireStaleRequests(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);
        });
    });
    describe('GET /client/requests/therapist/:therapistId/status', () => {
        it('should get request status with therapist when active request exists', async () => {
            mockClientRequestService.getClientRequests.mockResolvedValue(mockPaginatedRequests);
            const result = await controller.getRequestStatusWithTherapist(validTherapistId, index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual({
                success: true,
                hasActiveRequest: true,
                latestRequest: {
                    id: mockTherapistRequest.id,
                    status: mockTherapistRequest.status,
                    requestedAt: mockTherapistRequest.requestedAt,
                    respondedAt: mockTherapistRequest.respondedAt,
                    expiresAt: mockTherapistRequest.expiresAt,
                },
                canSendNewRequest: false,
            });
            expect(clientRequestService.getClientRequests).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, {
                therapistId: validTherapistId,
                page: 1,
                limit: 1,
                sortBy: 'requestedAt',
                sortOrder: 'desc',
            });
        });
        it('should handle no active request with therapist', async () => {
            mockClientRequestService.getClientRequests.mockResolvedValue({
                requests: [],
                pagination: { page: 1, limit: 1, totalCount: 0, totalPages: 0, hasNext: false, hasPrev: false },
            });
            const result = await controller.getRequestStatusWithTherapist(validTherapistId, index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual({
                success: true,
                hasActiveRequest: false,
                latestRequest: null,
                canSendNewRequest: true,
            });
        });
        it('should validate therapist ID format', async () => {
            const invalidTherapistId = 'invalid-id';
            await enhanced_test_helpers_1.TestAssertions.expectToThrowNestException(() => controller.getRequestStatusWithTherapist(invalidTherapistId, index_1.TEST_USER_IDS.CLIENT), common_1.BadRequestException, 'Invalid therapist ID format');
        });
        it('should handle declined request allowing new request', async () => {
            const declinedRequest = { ...mockTherapistRequest, status: 'DECLINED' };
            mockClientRequestService.getClientRequests.mockResolvedValue({
                requests: [declinedRequest],
                pagination: { page: 1, limit: 1, totalCount: 1, totalPages: 1, hasNext: false, hasPrev: false },
            });
            const result = await controller.getRequestStatusWithTherapist(validTherapistId, index_1.TEST_USER_IDS.CLIENT);
            expect(result.canSendNewRequest).toBe(true);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Database query failed');
            mockClientRequestService.getClientRequests.mockRejectedValue(serviceError);
            await expect(controller.getRequestStatusWithTherapist(validTherapistId, index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);
        });
    });
    describe('GET /client/requests/filters/options', () => {
        it('should get filter options successfully', async () => {
            const result = await controller.getFilterOptions(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual({
                success: true,
                filterOptions: {
                    statuses: ['PENDING', 'ACCEPTED', 'DECLINED', 'EXPIRED', 'CANCELLED', 'WITHDRAWN'],
                    priorities: ['LOW', 'NORMAL', 'HIGH', 'URGENT'],
                    sortOptions: [
                        { value: 'requestedAt', label: 'Request Date' },
                        { value: 'respondedAt', label: 'Response Date' },
                        { value: 'priority', label: 'Priority' },
                        { value: 'status', label: 'Status' },
                    ],
                    sortOrders: [
                        { value: 'desc', label: 'Newest First' },
                        { value: 'asc', label: 'Oldest First' },
                    ],
                },
            });
        });
        it('should return consistent filter options', async () => {
            const result1 = await controller.getFilterOptions(index_1.TEST_USER_IDS.CLIENT);
            const result2 = await controller.getFilterOptions('another-client-id');
            expect(result1).toEqual(result2);
        });
    });
    describe('Integration Testing', () => {
        it('should handle complete request workflow', async () => {
            // Step 1: Send therapist request
            mockClientRequestService.sendTherapistRequest.mockResolvedValue(mockTherapistRequest);
            const requestResult = await controller.sendTherapistRequest(validTherapistId, { message: 'Test message', priority: 'NORMAL', preferredTimes: ['morning'] }, index_1.TEST_USER_IDS.CLIENT);
            expect(requestResult).toEqual(mockTherapistRequest);
            // Step 2: Get request details
            mockClientRequestService.getClientRequests.mockResolvedValue(mockPaginatedRequests);
            const detailsResult = await controller.getRequestDetails(validRequestId, index_1.TEST_USER_IDS.CLIENT);
            expect(detailsResult.success).toBe(true);
            // Step 3: Check statistics
            mockClientRequestService.getClientRequestStatistics.mockResolvedValue(mockRequestStatistics);
            const statsResult = await controller.getRequestStatistics(index_1.TEST_USER_IDS.CLIENT);
            expect(statsResult).toEqual(mockRequestStatistics);
            // Step 4: Check status with therapist
            const statusResult = await controller.getRequestStatusWithTherapist(validTherapistId, index_1.TEST_USER_IDS.CLIENT);
            expect(statusResult.hasActiveRequest).toBe(true);
            // Step 5: Cancel request
            const cancelResult = {
                success: true,
                message: 'Request cancelled successfully',
                request: { ...mockTherapistRequest, status: 'CANCELLED' },
            };
            mockClientRequestService.cancelRequest.mockResolvedValue(cancelResult);
            const canceledResult = await controller.cancelRequest(validRequestId, { reason: 'Changed my mind' }, index_1.TEST_USER_IDS.CLIENT);
            expect(canceledResult).toEqual(cancelResult);
        });
        it('should handle bulk request workflow', async () => {
            // Step 1: Send multiple requests
            const bulkResult = {
                success: true,
                sentRequests: 2,
                failedRequests: 0,
                results: [mockTherapistRequest],
            };
            mockClientRequestService.sendMultipleTherapistRequests.mockResolvedValue(bulkResult);
            const bulkRequestResult = await controller.sendMultipleTherapistRequests({
                therapistIds: [validTherapistId, '99999999-8888-7777-6666-555555555555'],
                message: 'Bulk message',
                priority: 'HIGH',
                preferredTimes: ['morning', 'afternoon'],
            }, index_1.TEST_USER_IDS.CLIENT);
            expect(bulkRequestResult).toEqual(bulkResult);
            // Step 2: Get all requests
            mockClientRequestService.getClientRequests.mockResolvedValue(mockPaginatedRequests);
            const allRequestsResult = await controller.getMyRequests({ page: 1, limit: 10, sortBy: 'requestedAt', sortOrder: 'desc' }, index_1.TEST_USER_IDS.CLIENT);
            expect(allRequestsResult).toEqual(mockPaginatedRequests);
            // Step 3: Get recent requests
            const recentResult = await controller.getRecentRequests(index_1.TEST_USER_IDS.CLIENT);
            expect(recentResult.success).toBe(true);
            expect(recentResult.recentRequests).toEqual([mockTherapistRequest]);
        });
    });
    describe('Error Handling', () => {
        it('should handle service unavailable scenarios', async () => {
            const serviceError = new Error('Service temporarily unavailable');
            mockClientRequestService.sendTherapistRequest.mockRejectedValue(serviceError);
            await expect(controller.sendTherapistRequest(validTherapistId, { message: 'Test', priority: 'NORMAL', preferredTimes: [] }, index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);
        });
        it('should handle concurrent access issues', async () => {
            const concurrencyError = new Error('Request already exists');
            mockClientRequestService.sendTherapistRequest.mockRejectedValue(concurrencyError);
            await expect(controller.sendTherapistRequest(validTherapistId, { message: 'Test', priority: 'NORMAL', preferredTimes: [] }, index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(concurrencyError);
        });
        it('should handle malformed request data', async () => {
            const malformedDto = { invalid: 'data' };
            mockClientRequestService.sendTherapistRequest.mockResolvedValue(mockTherapistRequest);
            const result = await controller.sendTherapistRequest(validTherapistId, malformedDto, index_1.TEST_USER_IDS.CLIENT);
            expect(clientRequestService.sendTherapistRequest).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, validTherapistId, malformedDto);
        });
    });
    describe('Response Format Validation', () => {
        it('should return properly formatted request response', async () => {
            mockClientRequestService.sendTherapistRequest.mockResolvedValue(mockTherapistRequest);
            const result = await controller.sendTherapistRequest(validTherapistId, { message: 'Test', priority: 'NORMAL', preferredTimes: [] }, index_1.TEST_USER_IDS.CLIENT);
            enhanced_test_helpers_1.TestAssertions.expectValidEntity(result, ['id', 'clientId', 'therapistId', 'status']);
        });
        it('should return properly formatted statistics response', async () => {
            mockClientRequestService.getClientRequestStatistics.mockResolvedValue(mockRequestStatistics);
            const result = await controller.getRequestStatistics(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('totalSent');
            expect(result).toHaveProperty('pending');
            expect(result).toHaveProperty('accepted');
            expect(result).toHaveProperty('declined');
            expect(typeof result.totalSent).toBe('number');
            expect(typeof result.pending).toBe('number');
        });
        it('should return properly formatted success responses', async () => {
            mockClientRequestService.getClientRequests.mockResolvedValue(mockPaginatedRequests);
            const result = await controller.getRequestDetails(validRequestId, index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('success');
            expect(result).toHaveProperty('request');
            expect(result.success).toBe(true);
        });
        it('should return properly formatted filter options response', async () => {
            const result = await controller.getFilterOptions(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('success');
            expect(result).toHaveProperty('filterOptions');
            expect(result.success).toBe(true);
            expect(result.filterOptions).toHaveProperty('statuses');
            expect(result.filterOptions).toHaveProperty('priorities');
            expect(result.filterOptions).toHaveProperty('sortOptions');
            expect(result.filterOptions).toHaveProperty('sortOrders');
            expect(Array.isArray(result.filterOptions.statuses)).toBe(true);
            expect(Array.isArray(result.filterOptions.priorities)).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2NsaWVudC9jb250cm9sbGVycy9jbGllbnQtcmVxdWVzdC5jb250cm9sbGVyLnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCw2Q0FBc0Q7QUFDdEQsMkNBQW9GO0FBQ3BGLHFFQUFnRTtBQUNoRSwyRUFBc0U7QUFDdEUsK0VBQTBFO0FBRTFFLGtGQUF3RztBQUN4RyxrREFBb0U7QUFFcEUsUUFBUSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtJQUN2QyxJQUFJLFVBQW1DLENBQUM7SUFDeEMsSUFBSSxvQkFBMEMsQ0FBQztJQUMvQyxJQUFJLE1BQXFCLENBQUM7SUFFMUIsNEJBQTRCO0lBQzVCLE1BQU0sd0JBQXdCLEdBQUc7UUFDL0Isb0JBQW9CLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUMvQiw2QkFBNkIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3hDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDNUIsYUFBYSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDeEIsMEJBQTBCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNyQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQy9CLENBQUM7SUFFRixvQkFBb0I7SUFDcEIsTUFBTSxnQkFBZ0IsR0FBRztRQUN2QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUM7S0FDN0MsQ0FBQztJQUVGLFdBQVc7SUFDWCxNQUFNLGdCQUFnQixHQUFHLHNDQUFzQyxDQUFDLENBQUMsdUJBQXVCO0lBQ3hGLE1BQU0sY0FBYyxHQUFHLHNDQUFzQyxDQUFDLENBQUMsdUJBQXVCO0lBRXRGLFlBQVk7SUFDWixNQUFNLG9CQUFvQixHQUFHO1FBQzNCLEVBQUUsRUFBRSxjQUFjO1FBQ2xCLFFBQVEsRUFBRSxxQkFB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Q0FBQztRQUVILEVBQUUsQ0FBQywwREFBMEQsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN4RSxNQUFNLE1BQU0sR0FBRyxNQUFNLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRXZFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUMvQyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN4RCxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMxRCxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUMzRCxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMxRCxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2hFLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy9jbGllbnQvY29udHJvbGxlcnMvY2xpZW50LXJlcXVlc3QuY29udHJvbGxlci5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSBUZXN0IFN1aXRlIGZvciBDbGllbnRSZXF1ZXN0Q29udHJvbGxlclxuICogVGVzdHMgYWxsIGNsaWVudCByZXF1ZXN0IG1hbmFnZW1lbnQgZW5kcG9pbnRzIHdpdGggc2VjdXJpdHksIHZhbGlkYXRpb24sIGFuZCBlcnJvciBoYW5kbGluZ1xuICovXG5cbmltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgSHR0cFN0YXR1cywgQmFkUmVxdWVzdEV4Y2VwdGlvbiwgTm90Rm91bmRFeGNlcHRpb24gfSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBKd3RBdXRoR3VhcmQgfSBmcm9tICcuLi8uLi9hdXRoL2d1YXJkcy9qd3QtYXV0aC5ndWFyZCc7XG5pbXBvcnQgeyBDbGllbnRSZXF1ZXN0Q29udHJvbGxlciB9IGZyb20gJy4vY2xpZW50LXJlcXVlc3QuY29udHJvbGxlcic7XG5pbXBvcnQgeyBDbGllbnRSZXF1ZXN0U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2NsaWVudC1yZXF1ZXN0LnNlcnZpY2UnO1xuaW1wb3J0IHsgU2VjdXJpdHlHdWFyZFRlc3RVdGlscywgUm9sZUJhc2VkVGVzdFV0aWxzIH0gZnJvbSAnLi4vLi4vdGVzdC11dGlscy9hdXRoLXRlc3RpbmctaGVscGVycyc7XG5pbXBvcnQgeyBNb2NrQnVpbGRlciwgVGVzdERhdGFHZW5lcmF0b3IsIFRlc3RBc3NlcnRpb25zIH0gZnJvbSAnLi4vLi4vdGVzdC11dGlscy9lbmhhbmNlZC10ZXN0LWhlbHBlcnMnO1xuaW1wb3J0IHsgVEVTVF9VU0VSX0lEUywgVEVTVF9FTUFJTFMgfSBmcm9tICcuLi8uLi90ZXN0LXV0aWxzL2luZGV4JztcblxuZGVzY3JpYmUoJ0NsaWVudFJlcXVlc3RDb250cm9sbGVyJywgKCkgPT4ge1xuICBsZXQgY29udHJvbGxlcjogQ2xpZW50UmVxdWVzdENvbnRyb2xsZXI7XG4gIGxldCBjbGllbnRSZXF1ZXN0U2VydmljZTogQ2xpZW50UmVxdWVzdFNlcnZpY2U7XG4gIGxldCBtb2R1bGU6IFRlc3RpbmdNb2R1bGU7XG5cbiAgLy8gTW9jayBDbGllbnRSZXF1ZXN0U2VydmljZVxuICBjb25zdCBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2UgPSB7XG4gICAgc2VuZFRoZXJhcGlzdFJlcXVlc3Q6IGplc3QuZm4oKSxcbiAgICBzZW5kTXVsdGlwbGVUaGVyYXBpc3RSZXF1ZXN0czogamVzdC5mbigpLFxuICAgIGdldENsaWVudFJlcXVlc3RzOiBqZXN0LmZuKCksXG4gICAgY2FuY2VsUmVxdWVzdDogamVzdC5mbigpLFxuICAgIGdldENsaWVudFJlcXVlc3RTdGF0aXN0aWNzOiBqZXN0LmZuKCksXG4gICAgZXhwaXJlU3RhbGVSZXF1ZXN0czogamVzdC5mbigpLFxuICB9O1xuXG4gIC8vIE1vY2sgSnd0QXV0aEd1YXJkXG4gIGNvbnN0IG1vY2tKd3RBdXRoR3VhcmQgPSB7XG4gICAgY2FuQWN0aXZhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSksXG4gIH07XG5cbiAgLy8gVGVzdCBJRHNcbiAgY29uc3QgdmFsaWRUaGVyYXBpc3RJZCA9ICcxMjM0NTY3OC0xMjM0LTEyMzQtMTIzNC0xMjM0NTY3ODkwMTInOyAvLyAzNiBjaGFycyBVVUlEIGZvcm1hdFxuICBjb25zdCB2YWxpZFJlcXVlc3RJZCA9ICc4NzY1NDMyMS00MzIxLTQzMjEtNDMyMS0yMTA5ODc2NTQzMjEnOyAvLyAzNiBjaGFycyBVVUlEIGZvcm1hdFxuXG4gIC8vIFRlc3QgZGF0YVxuICBjb25zdCBtb2NrVGhlcmFwaXN0UmVxdWVzdCA9IHtcbiAgICBpZDogdmFsaWRSZXF1ZXN0SWQsXG4gICAgY2xpZW50SWQ6IFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgIHRoZXJhcGlzdElkOiBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICBzdGF0dXM6ICdQRU5ESU5HJyxcbiAgICBwcmlvcml0eTogJ05PUk1BTCcsXG4gICAgbWVzc2FnZTogJ0kgd291bGQgbGlrZSB0byBzY2hlZHVsZSBhIHNlc3Npb24nLFxuICAgIHJlcXVlc3RlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHJlc3BvbmRlZEF0OiBudWxsLFxuICAgIGV4cGlyZXNBdDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSwgLy8gNyBkYXlzIGZyb20gbm93XG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgfTtcblxuICBjb25zdCBtb2NrUmVxdWVzdFN0YXRpc3RpY3MgPSB7XG4gICAgdG90YWxTZW50OiA1LFxuICAgIHBlbmRpbmc6IDIsXG4gICAgYWNjZXB0ZWQ6IDEsXG4gICAgZGVjbGluZWQ6IDEsXG4gICAgZXhwaXJlZDogMSxcbiAgICBjYW5jZWxsZWQ6IDAsXG4gICAgd2l0aGRyYXduOiAwLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tQYWdpbmF0ZWRSZXF1ZXN0cyA9IHtcbiAgICByZXF1ZXN0czogW21vY2tUaGVyYXBpc3RSZXF1ZXN0XSxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBwYWdlOiAxLFxuICAgICAgbGltaXQ6IDEwLFxuICAgICAgdG90YWxDb3VudDogMSxcbiAgICAgIHRvdGFsUGFnZXM6IDEsXG4gICAgICBoYXNOZXh0OiBmYWxzZSxcbiAgICAgIGhhc1ByZXY6IGZhbHNlLFxuICAgIH0sXG4gIH07XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgbW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIGNvbnRyb2xsZXJzOiBbQ2xpZW50UmVxdWVzdENvbnRyb2xsZXJdLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBDbGllbnRSZXF1ZXN0U2VydmljZSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja0NsaWVudFJlcXVlc3RTZXJ2aWNlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KVxuICAgICAgLm92ZXJyaWRlR3VhcmQoSnd0QXV0aEd1YXJkKVxuICAgICAgLnVzZVZhbHVlKG1vY2tKd3RBdXRoR3VhcmQpXG4gICAgICAuY29tcGlsZSgpO1xuXG4gICAgY29udHJvbGxlciA9IG1vZHVsZS5nZXQ8Q2xpZW50UmVxdWVzdENvbnRyb2xsZXI+KENsaWVudFJlcXVlc3RDb250cm9sbGVyKTtcbiAgICBjbGllbnRSZXF1ZXN0U2VydmljZSA9IG1vZHVsZS5nZXQ8Q2xpZW50UmVxdWVzdFNlcnZpY2U+KENsaWVudFJlcXVlc3RTZXJ2aWNlKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbnRyb2xsZXIgSW5pdGlhbGl6YXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBiZSBkZWZpbmVkJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGNvbnRyb2xsZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgY2xpZW50UmVxdWVzdFNlcnZpY2UgaW5qZWN0ZWQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoY2xpZW50UmVxdWVzdFNlcnZpY2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZWN1cml0eSBHdWFyZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBiZSBwcm90ZWN0ZWQgYnkgSnd0QXV0aEd1YXJkJywgKCkgPT4ge1xuICAgICAgY29uc3QgZ3VhcmRzID0gUmVmbGVjdC5nZXRNZXRhZGF0YSgnX19ndWFyZHNfXycsIENsaWVudFJlcXVlc3RDb250cm9sbGVyKTtcbiAgICAgIGV4cGVjdChndWFyZHMpLnRvQ29udGFpbihKd3RBdXRoR3VhcmQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciByb3V0ZSBkZWNvcmF0b3JzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29udHJvbGxlck1ldGFkYXRhID0gUmVmbGVjdC5nZXRNZXRhZGF0YSgncGF0aCcsIENsaWVudFJlcXVlc3RDb250cm9sbGVyKTtcbiAgICAgIGV4cGVjdChjb250cm9sbGVyTWV0YWRhdGEpLnRvQmUoJ2NsaWVudC9yZXF1ZXN0cycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUE9TVCAvY2xpZW50L3JlcXVlc3RzL3RoZXJhcGlzdC86dGhlcmFwaXN0SWQnLCAoKSA9PiB7XG4gICAgY29uc3QgcmVxdWVzdER0byA9IHtcbiAgICAgIG1lc3NhZ2U6ICdJIHdvdWxkIGxpa2UgdG8gc2NoZWR1bGUgYSBzZXNzaW9uJyxcbiAgICAgIHByaW9yaXR5OiAnTk9STUFMJyBhcyBjb25zdCxcbiAgICAgIHByZWZlcnJlZFRpbWVzOiBbJ21vcm5pbmcnLCAnYWZ0ZXJub29uJ10sXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgc2VuZCB0aGVyYXBpc3QgcmVxdWVzdCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2Uuc2VuZFRoZXJhcGlzdFJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RoZXJhcGlzdFJlcXVlc3QpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnNlbmRUaGVyYXBpc3RSZXF1ZXN0KFxuICAgICAgICB2YWxpZFRoZXJhcGlzdElkLFxuICAgICAgICByZXF1ZXN0RHRvLFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1RoZXJhcGlzdFJlcXVlc3QpO1xuICAgICAgZXhwZWN0KGNsaWVudFJlcXVlc3RTZXJ2aWNlLnNlbmRUaGVyYXBpc3RSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgIHZhbGlkVGhlcmFwaXN0SWQsXG4gICAgICAgIHJlcXVlc3REdG8sXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSB0aGVyYXBpc3QgSUQgZm9ybWF0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZFRoZXJhcGlzdElkID0gJ2ludmFsaWQtaWQnO1xuXG4gICAgICBhd2FpdCBUZXN0QXNzZXJ0aW9ucy5leHBlY3RUb1Rocm93TmVzdEV4Y2VwdGlvbihcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5zZW5kVGhlcmFwaXN0UmVxdWVzdChpbnZhbGlkVGhlcmFwaXN0SWQsIHJlcXVlc3REdG8sIFRFU1RfVVNFUl9JRFMuQ0xJRU5UKSxcbiAgICAgICAgQmFkUmVxdWVzdEV4Y2VwdGlvbixcbiAgICAgICAgJ0ludmFsaWQgdGhlcmFwaXN0IElEIGZvcm1hdCcsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgdGhlcmFwaXN0IElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgVGVzdEFzc2VydGlvbnMuZXhwZWN0VG9UaHJvd05lc3RFeGNlcHRpb24oXG4gICAgICAgICgpID0+IGNvbnRyb2xsZXIuc2VuZFRoZXJhcGlzdFJlcXVlc3QoJycsIHJlcXVlc3REdG8sIFRFU1RfVVNFUl9JRFMuQ0xJRU5UKSxcbiAgICAgICAgQmFkUmVxdWVzdEV4Y2VwdGlvbixcbiAgICAgICAgJ0ludmFsaWQgdGhlcmFwaXN0IElEIGZvcm1hdCcsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ1RoZXJhcGlzdCBub3QgZm91bmQnKTtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5zZW5kVGhlcmFwaXN0UmVxdWVzdC5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuc2VuZFRoZXJhcGlzdFJlcXVlc3QodmFsaWRUaGVyYXBpc3RJZCwgcmVxdWVzdER0bywgVEVTVF9VU0VSX0lEUy5DTElFTlQpLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coc2VydmljZUVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QgL2NsaWVudC9yZXF1ZXN0cy90aGVyYXBpc3RzL2J1bGsnLCAoKSA9PiB7XG4gICAgY29uc3QgYnVsa1JlcXVlc3REdG8gPSB7XG4gICAgICB0aGVyYXBpc3RJZHM6IFt2YWxpZFRoZXJhcGlzdElkLCAnMTExMTExMTEtMjIyMi0zMzMzLTQ0NDQtNTU1NTU1NTU1NTU1J10sXG4gICAgICBtZXNzYWdlOiAnSSB3b3VsZCBsaWtlIHRvIHNjaGVkdWxlIHNlc3Npb25zJyxcbiAgICAgIHByaW9yaXR5OiAnTk9STUFMJyBhcyBjb25zdCxcbiAgICAgIHByZWZlcnJlZFRpbWVzOiBbJ21vcm5pbmcnXSxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBzZW5kIG11bHRpcGxlIHRoZXJhcGlzdCByZXF1ZXN0cyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBidWxrUmVzdWx0ID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBzZW50UmVxdWVzdHM6IDIsXG4gICAgICAgIGZhaWxlZFJlcXVlc3RzOiAwLFxuICAgICAgICByZXN1bHRzOiBbbW9ja1RoZXJhcGlzdFJlcXVlc3RdLFxuICAgICAgfTtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5zZW5kTXVsdGlwbGVUaGVyYXBpc3RSZXF1ZXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShidWxrUmVzdWx0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5zZW5kTXVsdGlwbGVUaGVyYXBpc3RSZXF1ZXN0cyhcbiAgICAgICAgYnVsa1JlcXVlc3REdG8sXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChidWxrUmVzdWx0KTtcbiAgICAgIGV4cGVjdChjbGllbnRSZXF1ZXN0U2VydmljZS5zZW5kTXVsdGlwbGVUaGVyYXBpc3RSZXF1ZXN0cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgICBidWxrUmVxdWVzdER0byxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycyBmb3IgYnVsayByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2VFcnJvciA9IG5ldyBFcnJvcignU29tZSByZXF1ZXN0cyBmYWlsZWQnKTtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5zZW5kTXVsdGlwbGVUaGVyYXBpc3RSZXF1ZXN0cy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuc2VuZE11bHRpcGxlVGhlcmFwaXN0UmVxdWVzdHMoYnVsa1JlcXVlc3REdG8sIFRFU1RfVVNFUl9JRFMuQ0xJRU5UKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHNlcnZpY2VFcnJvcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2NsaWVudC9yZXF1ZXN0cycsICgpID0+IHtcbiAgICBjb25zdCBmaWx0ZXJzID0ge1xuICAgICAgcGFnZTogMSxcbiAgICAgIGxpbWl0OiAxMCxcbiAgICAgIHNvcnRCeTogJ3JlcXVlc3RlZEF0JyxcbiAgICAgIHNvcnRPcmRlcjogJ2Rlc2MnLFxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIGdldCBjbGllbnQgcmVxdWVzdHMgd2l0aCBmaWx0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudFJlcXVlc3RTZXJ2aWNlLmdldENsaWVudFJlcXVlc3RzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQYWdpbmF0ZWRSZXF1ZXN0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0TXlSZXF1ZXN0cyhmaWx0ZXJzLCBURVNUX1VTRVJfSURTLkNMSUVOVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1BhZ2luYXRlZFJlcXVlc3RzKTtcbiAgICAgIGV4cGVjdChjbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgICBmaWx0ZXJzLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGZpbHRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlbXB0eUZpbHRlcnMgPSB7fTtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUGFnaW5hdGVkUmVxdWVzdHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldE15UmVxdWVzdHMoZW1wdHlGaWx0ZXJzLCBURVNUX1VTRVJfSURTLkNMSUVOVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1BhZ2luYXRlZFJlcXVlc3RzKTtcbiAgICAgIGV4cGVjdChjbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgICBlbXB0eUZpbHRlcnMsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2UuZ2V0Q2xpZW50UmVxdWVzdHMubW9ja1JlamVjdGVkVmFsdWUoc2VydmljZUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmdldE15UmVxdWVzdHMoZmlsdGVycywgVEVTVF9VU0VSX0lEUy5DTElFTlQpLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coc2VydmljZUVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvY2xpZW50L3JlcXVlc3RzLzppZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCByZXF1ZXN0IGRldGFpbHMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudFJlcXVlc3RTZXJ2aWNlLmdldENsaWVudFJlcXVlc3RzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQYWdpbmF0ZWRSZXF1ZXN0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UmVxdWVzdERldGFpbHModmFsaWRSZXF1ZXN0SWQsIFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHJlcXVlc3Q6IG1vY2tUaGVyYXBpc3RSZXF1ZXN0LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QoY2xpZW50UmVxdWVzdFNlcnZpY2UuZ2V0Q2xpZW50UmVxdWVzdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAge1xuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgbGltaXQ6IDEsXG4gICAgICAgICAgc29ydEJ5OiAncmVxdWVzdGVkQXQnLFxuICAgICAgICAgIHNvcnRPcmRlcjogJ2Rlc2MnLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcmVxdWVzdCBJRCBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkUmVxdWVzdElkID0gJ2ludmFsaWQtaWQnO1xuXG4gICAgICBhd2FpdCBUZXN0QXNzZXJ0aW9ucy5leHBlY3RUb1Rocm93TmVzdEV4Y2VwdGlvbihcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5nZXRSZXF1ZXN0RGV0YWlscyhpbnZhbGlkUmVxdWVzdElkLCBURVNUX1VTRVJfSURTLkNMSUVOVCksXG4gICAgICAgIEJhZFJlcXVlc3RFeGNlcHRpb24sXG4gICAgICAgICdJbnZhbGlkIHJlcXVlc3QgSUQgZm9ybWF0JyxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByZXF1ZXN0IG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHJlcXVlc3RzOiBbXSxcbiAgICAgICAgcGFnaW5hdGlvbjogeyBwYWdlOiAxLCBsaW1pdDogMSwgdG90YWxDb3VudDogMCwgdG90YWxQYWdlczogMCwgaGFzTmV4dDogZmFsc2UsIGhhc1ByZXY6IGZhbHNlIH0sXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgVGVzdEFzc2VydGlvbnMuZXhwZWN0VG9UaHJvd05lc3RFeGNlcHRpb24oXG4gICAgICAgICgpID0+IGNvbnRyb2xsZXIuZ2V0UmVxdWVzdERldGFpbHModmFsaWRSZXF1ZXN0SWQsIFRFU1RfVVNFUl9JRFMuQ0xJRU5UKSxcbiAgICAgICAgTm90Rm91bmRFeGNlcHRpb24sXG4gICAgICAgICdSZXF1ZXN0IHdpdGggSUQgODc2NTQzMjEtNDMyMS00MzIxLTQzMjEtMjEwOTg3NjU0MzIxIG5vdCBmb3VuZCBvciBub3QgYWNjZXNzaWJsZScsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgcmVxdWVzdCBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IFRlc3RBc3NlcnRpb25zLmV4cGVjdFRvVGhyb3dOZXN0RXhjZXB0aW9uKFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmdldFJlcXVlc3REZXRhaWxzKCcnLCBURVNUX1VTRVJfSURTLkNMSUVOVCksXG4gICAgICAgIEJhZFJlcXVlc3RFeGNlcHRpb24sXG4gICAgICAgICdJbnZhbGlkIHJlcXVlc3QgSUQgZm9ybWF0JyxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQVVQgL2NsaWVudC9yZXF1ZXN0cy86aWQvY2FuY2VsJywgKCkgPT4ge1xuICAgIGNvbnN0IGNhbmNlbER0byA9IHtcbiAgICAgIHJlYXNvbjogJ0NoYW5nZWQgbXkgbWluZCcsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgY2FuY2VsIHJlcXVlc3Qgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2FuY2VsUmVzdWx0ID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnUmVxdWVzdCBjYW5jZWxsZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgcmVxdWVzdDogeyAuLi5tb2NrVGhlcmFwaXN0UmVxdWVzdCwgc3RhdHVzOiAnQ0FOQ0VMTEVEJyB9LFxuICAgICAgfTtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5jYW5jZWxSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKGNhbmNlbFJlc3VsdCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuY2FuY2VsUmVxdWVzdChcbiAgICAgICAgdmFsaWRSZXF1ZXN0SWQsXG4gICAgICAgIGNhbmNlbER0byxcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGNhbmNlbFJlc3VsdCk7XG4gICAgICBleHBlY3QoY2xpZW50UmVxdWVzdFNlcnZpY2UuY2FuY2VsUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIHZhbGlkUmVxdWVzdElkLFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAgY2FuY2VsRHRvLnJlYXNvbixcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHJlcXVlc3QgSUQgZm9ybWF0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZFJlcXVlc3RJZCA9ICdpbnZhbGlkLWlkJztcblxuICAgICAgYXdhaXQgVGVzdEFzc2VydGlvbnMuZXhwZWN0VG9UaHJvd05lc3RFeGNlcHRpb24oXG4gICAgICAgICgpID0+IGNvbnRyb2xsZXIuY2FuY2VsUmVxdWVzdChpbnZhbGlkUmVxdWVzdElkLCBjYW5jZWxEdG8sIFRFU1RfVVNFUl9JRFMuQ0xJRU5UKSxcbiAgICAgICAgQmFkUmVxdWVzdEV4Y2VwdGlvbixcbiAgICAgICAgJ0ludmFsaWQgcmVxdWVzdCBJRCBmb3JtYXQnLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdSZXF1ZXN0IGNhbm5vdCBiZSBjYW5jZWxsZWQnKTtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5jYW5jZWxSZXF1ZXN0Lm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5jYW5jZWxSZXF1ZXN0KHZhbGlkUmVxdWVzdElkLCBjYW5jZWxEdG8sIFRFU1RfVVNFUl9JRFMuQ0xJRU5UKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHNlcnZpY2VFcnJvcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2NsaWVudC9yZXF1ZXN0cy9zdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2V0IHJlcXVlc3Qgc3RhdGlzdGljcyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2UuZ2V0Q2xpZW50UmVxdWVzdFN0YXRpc3RpY3MubW9ja1Jlc29sdmVkVmFsdWUobW9ja1JlcXVlc3RTdGF0aXN0aWNzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRSZXF1ZXN0U3RhdGlzdGljcyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1JlcXVlc3RTdGF0aXN0aWNzKTtcbiAgICAgIGV4cGVjdChjbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0U3RhdGlzdGljcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdTdGF0aXN0aWNzIGNhbGN1bGF0aW9uIGZhaWxlZCcpO1xuICAgICAgbW9ja0NsaWVudFJlcXVlc3RTZXJ2aWNlLmdldENsaWVudFJlcXVlc3RTdGF0aXN0aWNzLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRSZXF1ZXN0U3RhdGlzdGljcyhURVNUX1VTRVJfSURTLkNMSUVOVCksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhzZXJ2aWNlRXJyb3IpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9jbGllbnQvcmVxdWVzdHMvcGVuZGluZy9jb3VudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCBwZW5kaW5nIHJlcXVlc3RzIGNvdW50IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0U3RhdGlzdGljcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVxdWVzdFN0YXRpc3RpY3MpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFBlbmRpbmdSZXF1ZXN0c0NvdW50KFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHBlbmRpbmdDb3VudDogMixcbiAgICAgICAgdG90YWxTZW50OiA1LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QoY2xpZW50UmVxdWVzdFNlcnZpY2UuZ2V0Q2xpZW50UmVxdWVzdFN0YXRpc3RpY3MpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2VFcnJvciA9IG5ldyBFcnJvcignU3RhdGlzdGljcyBjYWxjdWxhdGlvbiBmYWlsZWQnKTtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0U3RhdGlzdGljcy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0UGVuZGluZ1JlcXVlc3RzQ291bnQoVEVTVF9VU0VSX0lEUy5DTElFTlQpLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coc2VydmljZUVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvY2xpZW50L3JlcXVlc3RzL3JlY2VudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCByZWNlbnQgcmVxdWVzdHMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudFJlcXVlc3RTZXJ2aWNlLmdldENsaWVudFJlcXVlc3RzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQYWdpbmF0ZWRSZXF1ZXN0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UmVjZW50UmVxdWVzdHMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgcmVjZW50UmVxdWVzdHM6IFttb2NrVGhlcmFwaXN0UmVxdWVzdF0sXG4gICAgICAgIGhhc01vcmU6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QoY2xpZW50UmVxdWVzdFNlcnZpY2UuZ2V0Q2xpZW50UmVxdWVzdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAge1xuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgbGltaXQ6IDUsXG4gICAgICAgICAgc29ydEJ5OiAncmVxdWVzdGVkQXQnLFxuICAgICAgICAgIHNvcnRPcmRlcjogJ2Rlc2MnLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5kaWNhdGUgd2hlbiB0aGVyZSBhcmUgbW9yZSByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQYWdpbmF0ZWRXaXRoTW9yZSA9IHtcbiAgICAgICAgLi4ubW9ja1BhZ2luYXRlZFJlcXVlc3RzLFxuICAgICAgICBwYWdpbmF0aW9uOiB7IC4uLm1vY2tQYWdpbmF0ZWRSZXF1ZXN0cy5wYWdpbmF0aW9uLCB0b3RhbENvdW50OiAxMCB9LFxuICAgICAgfTtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUGFnaW5hdGVkV2l0aE1vcmUpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFJlY2VudFJlcXVlc3RzKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5oYXNNb3JlKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIHF1ZXJ5IGZhaWxlZCcpO1xuICAgICAgbW9ja0NsaWVudFJlcXVlc3RTZXJ2aWNlLmdldENsaWVudFJlcXVlc3RzLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRSZWNlbnRSZXF1ZXN0cyhURVNUX1VTRVJfSURTLkNMSUVOVCksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhzZXJ2aWNlRXJyb3IpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUFVUIC9jbGllbnQvcmVxdWVzdHMvZXhwaXJlLXN0YWxlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZXhwaXJlIHN0YWxlIHJlcXVlc3RzIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGV4cGlyZVJlc3VsdCA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZXhwaXJlZENvdW50OiAzLFxuICAgICAgICBtZXNzYWdlOiAnMyBzdGFsZSByZXF1ZXN0cyBleHBpcmVkJyxcbiAgICAgIH07XG4gICAgICBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2UuZXhwaXJlU3RhbGVSZXF1ZXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShleHBpcmVSZXN1bHQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmV4cGlyZVN0YWxlUmVxdWVzdHMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGV4cGlyZVJlc3VsdCk7XG4gICAgICBleHBlY3QoY2xpZW50UmVxdWVzdFNlcnZpY2UuZXhwaXJlU3RhbGVSZXF1ZXN0cykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ0V4cGlyYXRpb24gcHJvY2VzcyBmYWlsZWQnKTtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5leHBpcmVTdGFsZVJlcXVlc3RzLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5leHBpcmVTdGFsZVJlcXVlc3RzKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHNlcnZpY2VFcnJvcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2NsaWVudC9yZXF1ZXN0cy90aGVyYXBpc3QvOnRoZXJhcGlzdElkL3N0YXR1cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCByZXF1ZXN0IHN0YXR1cyB3aXRoIHRoZXJhcGlzdCB3aGVuIGFjdGl2ZSByZXF1ZXN0IGV4aXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUGFnaW5hdGVkUmVxdWVzdHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFJlcXVlc3RTdGF0dXNXaXRoVGhlcmFwaXN0KFxuICAgICAgICB2YWxpZFRoZXJhcGlzdElkLFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBoYXNBY3RpdmVSZXF1ZXN0OiB0cnVlLFxuICAgICAgICBsYXRlc3RSZXF1ZXN0OiB7XG4gICAgICAgICAgaWQ6IG1vY2tUaGVyYXBpc3RSZXF1ZXN0LmlkLFxuICAgICAgICAgIHN0YXR1czogbW9ja1RoZXJhcGlzdFJlcXVlc3Quc3RhdHVzLFxuICAgICAgICAgIHJlcXVlc3RlZEF0OiBtb2NrVGhlcmFwaXN0UmVxdWVzdC5yZXF1ZXN0ZWRBdCxcbiAgICAgICAgICByZXNwb25kZWRBdDogbW9ja1RoZXJhcGlzdFJlcXVlc3QucmVzcG9uZGVkQXQsXG4gICAgICAgICAgZXhwaXJlc0F0OiBtb2NrVGhlcmFwaXN0UmVxdWVzdC5leHBpcmVzQXQsXG4gICAgICAgIH0sXG4gICAgICAgIGNhblNlbmROZXdSZXF1ZXN0OiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGNsaWVudFJlcXVlc3RTZXJ2aWNlLmdldENsaWVudFJlcXVlc3RzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgIHtcbiAgICAgICAgICB0aGVyYXBpc3RJZDogdmFsaWRUaGVyYXBpc3RJZCxcbiAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgIGxpbWl0OiAxLFxuICAgICAgICAgIHNvcnRCeTogJ3JlcXVlc3RlZEF0JyxcbiAgICAgICAgICBzb3J0T3JkZXI6ICdkZXNjJyxcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBubyBhY3RpdmUgcmVxdWVzdCB3aXRoIHRoZXJhcGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHJlcXVlc3RzOiBbXSxcbiAgICAgICAgcGFnaW5hdGlvbjogeyBwYWdlOiAxLCBsaW1pdDogMSwgdG90YWxDb3VudDogMCwgdG90YWxQYWdlczogMCwgaGFzTmV4dDogZmFsc2UsIGhhc1ByZXY6IGZhbHNlIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRSZXF1ZXN0U3RhdHVzV2l0aFRoZXJhcGlzdChcbiAgICAgICAgdmFsaWRUaGVyYXBpc3RJZCxcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgaGFzQWN0aXZlUmVxdWVzdDogZmFsc2UsXG4gICAgICAgIGxhdGVzdFJlcXVlc3Q6IG51bGwsXG4gICAgICAgIGNhblNlbmROZXdSZXF1ZXN0OiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHRoZXJhcGlzdCBJRCBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkVGhlcmFwaXN0SWQgPSAnaW52YWxpZC1pZCc7XG5cbiAgICAgIGF3YWl0IFRlc3RBc3NlcnRpb25zLmV4cGVjdFRvVGhyb3dOZXN0RXhjZXB0aW9uKFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmdldFJlcXVlc3RTdGF0dXNXaXRoVGhlcmFwaXN0KGludmFsaWRUaGVyYXBpc3RJZCwgVEVTVF9VU0VSX0lEUy5DTElFTlQpLFxuICAgICAgICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxuICAgICAgICAnSW52YWxpZCB0aGVyYXBpc3QgSUQgZm9ybWF0JyxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkZWNsaW5lZCByZXF1ZXN0IGFsbG93aW5nIG5ldyByZXF1ZXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGVjbGluZWRSZXF1ZXN0ID0geyAuLi5tb2NrVGhlcmFwaXN0UmVxdWVzdCwgc3RhdHVzOiAnREVDTElORUQnIH07XG4gICAgICBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2UuZ2V0Q2xpZW50UmVxdWVzdHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICByZXF1ZXN0czogW2RlY2xpbmVkUmVxdWVzdF0sXG4gICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDEsIHRvdGFsQ291bnQ6IDEsIHRvdGFsUGFnZXM6IDEsIGhhc05leHQ6IGZhbHNlLCBoYXNQcmV2OiBmYWxzZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UmVxdWVzdFN0YXR1c1dpdGhUaGVyYXBpc3QoXG4gICAgICAgIHZhbGlkVGhlcmFwaXN0SWQsXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jYW5TZW5kTmV3UmVxdWVzdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBxdWVyeSBmYWlsZWQnKTtcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0cy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0UmVxdWVzdFN0YXR1c1dpdGhUaGVyYXBpc3QodmFsaWRUaGVyYXBpc3RJZCwgVEVTVF9VU0VSX0lEUy5DTElFTlQpLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coc2VydmljZUVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvY2xpZW50L3JlcXVlc3RzL2ZpbHRlcnMvb3B0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCBmaWx0ZXIgb3B0aW9ucyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldEZpbHRlck9wdGlvbnMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZmlsdGVyT3B0aW9uczoge1xuICAgICAgICAgIHN0YXR1c2VzOiBbJ1BFTkRJTkcnLCAnQUNDRVBURUQnLCAnREVDTElORUQnLCAnRVhQSVJFRCcsICdDQU5DRUxMRUQnLCAnV0lUSERSQVdOJ10sXG4gICAgICAgICAgcHJpb3JpdGllczogWydMT1cnLCAnTk9STUFMJywgJ0hJR0gnLCAnVVJHRU5UJ10sXG4gICAgICAgICAgc29ydE9wdGlvbnM6IFtcbiAgICAgICAgICAgIHsgdmFsdWU6ICdyZXF1ZXN0ZWRBdCcsIGxhYmVsOiAnUmVxdWVzdCBEYXRlJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ3Jlc3BvbmRlZEF0JywgbGFiZWw6ICdSZXNwb25zZSBEYXRlJyB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ3ByaW9yaXR5JywgbGFiZWw6ICdQcmlvcml0eScgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdzdGF0dXMnLCBsYWJlbDogJ1N0YXR1cycgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHNvcnRPcmRlcnM6IFtcbiAgICAgICAgICAgIHsgdmFsdWU6ICdkZXNjJywgbGFiZWw6ICdOZXdlc3QgRmlyc3QnIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiAnYXNjJywgbGFiZWw6ICdPbGRlc3QgRmlyc3QnIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29uc2lzdGVudCBmaWx0ZXIgb3B0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdDEgPSBhd2FpdCBjb250cm9sbGVyLmdldEZpbHRlck9wdGlvbnMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgICAgY29uc3QgcmVzdWx0MiA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0RmlsdGVyT3B0aW9ucygnYW5vdGhlci1jbGllbnQtaWQnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdDEpLnRvRXF1YWwocmVzdWx0Mik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiBUZXN0aW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlIHJlcXVlc3Qgd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTdGVwIDE6IFNlbmQgdGhlcmFwaXN0IHJlcXVlc3RcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5zZW5kVGhlcmFwaXN0UmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGhlcmFwaXN0UmVxdWVzdCk7XG4gICAgICBjb25zdCByZXF1ZXN0UmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5zZW5kVGhlcmFwaXN0UmVxdWVzdChcbiAgICAgICAgdmFsaWRUaGVyYXBpc3RJZCxcbiAgICAgICAgeyBtZXNzYWdlOiAnVGVzdCBtZXNzYWdlJywgcHJpb3JpdHk6ICdOT1JNQUwnLCBwcmVmZXJyZWRUaW1lczogWydtb3JuaW5nJ10gfSxcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJlcXVlc3RSZXN1bHQpLnRvRXF1YWwobW9ja1RoZXJhcGlzdFJlcXVlc3QpO1xuXG4gICAgICAvLyBTdGVwIDI6IEdldCByZXF1ZXN0IGRldGFpbHNcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUGFnaW5hdGVkUmVxdWVzdHMpO1xuICAgICAgY29uc3QgZGV0YWlsc1Jlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UmVxdWVzdERldGFpbHModmFsaWRSZXF1ZXN0SWQsIFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICAgIGV4cGVjdChkZXRhaWxzUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFN0ZXAgMzogQ2hlY2sgc3RhdGlzdGljc1xuICAgICAgbW9ja0NsaWVudFJlcXVlc3RTZXJ2aWNlLmdldENsaWVudFJlcXVlc3RTdGF0aXN0aWNzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXF1ZXN0U3RhdGlzdGljcyk7XG4gICAgICBjb25zdCBzdGF0c1Jlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UmVxdWVzdFN0YXRpc3RpY3MoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgICAgZXhwZWN0KHN0YXRzUmVzdWx0KS50b0VxdWFsKG1vY2tSZXF1ZXN0U3RhdGlzdGljcyk7XG5cbiAgICAgIC8vIFN0ZXAgNDogQ2hlY2sgc3RhdHVzIHdpdGggdGhlcmFwaXN0XG4gICAgICBjb25zdCBzdGF0dXNSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFJlcXVlc3RTdGF0dXNXaXRoVGhlcmFwaXN0KFxuICAgICAgICB2YWxpZFRoZXJhcGlzdElkLFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICk7XG4gICAgICBleHBlY3Qoc3RhdHVzUmVzdWx0Lmhhc0FjdGl2ZVJlcXVlc3QpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFN0ZXAgNTogQ2FuY2VsIHJlcXVlc3RcbiAgICAgIGNvbnN0IGNhbmNlbFJlc3VsdCA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ1JlcXVlc3QgY2FuY2VsbGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgIHJlcXVlc3Q6IHsgLi4ubW9ja1RoZXJhcGlzdFJlcXVlc3QsIHN0YXR1czogJ0NBTkNFTExFRCcgfSxcbiAgICAgIH07XG4gICAgICBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2UuY2FuY2VsUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZShjYW5jZWxSZXN1bHQpO1xuICAgICAgY29uc3QgY2FuY2VsZWRSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNhbmNlbFJlcXVlc3QoXG4gICAgICAgIHZhbGlkUmVxdWVzdElkLFxuICAgICAgICB7IHJlYXNvbjogJ0NoYW5nZWQgbXkgbWluZCcgfSxcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICApO1xuICAgICAgZXhwZWN0KGNhbmNlbGVkUmVzdWx0KS50b0VxdWFsKGNhbmNlbFJlc3VsdCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBidWxrIHJlcXVlc3Qgd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTdGVwIDE6IFNlbmQgbXVsdGlwbGUgcmVxdWVzdHNcbiAgICAgIGNvbnN0IGJ1bGtSZXN1bHQgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHNlbnRSZXF1ZXN0czogMixcbiAgICAgICAgZmFpbGVkUmVxdWVzdHM6IDAsXG4gICAgICAgIHJlc3VsdHM6IFttb2NrVGhlcmFwaXN0UmVxdWVzdF0sXG4gICAgICB9O1xuICAgICAgbW9ja0NsaWVudFJlcXVlc3RTZXJ2aWNlLnNlbmRNdWx0aXBsZVRoZXJhcGlzdFJlcXVlc3RzLm1vY2tSZXNvbHZlZFZhbHVlKGJ1bGtSZXN1bHQpO1xuICAgICAgY29uc3QgYnVsa1JlcXVlc3RSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnNlbmRNdWx0aXBsZVRoZXJhcGlzdFJlcXVlc3RzKFxuICAgICAgICB7XG4gICAgICAgICAgdGhlcmFwaXN0SWRzOiBbdmFsaWRUaGVyYXBpc3RJZCwgJzk5OTk5OTk5LTg4ODgtNzc3Ny02NjY2LTU1NTU1NTU1NTU1NSddLFxuICAgICAgICAgIG1lc3NhZ2U6ICdCdWxrIG1lc3NhZ2UnLFxuICAgICAgICAgIHByaW9yaXR5OiAnSElHSCcsXG4gICAgICAgICAgcHJlZmVycmVkVGltZXM6IFsnbW9ybmluZycsICdhZnRlcm5vb24nXSxcbiAgICAgICAgfSxcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICApO1xuICAgICAgZXhwZWN0KGJ1bGtSZXF1ZXN0UmVzdWx0KS50b0VxdWFsKGJ1bGtSZXN1bHQpO1xuXG4gICAgICAvLyBTdGVwIDI6IEdldCBhbGwgcmVxdWVzdHNcbiAgICAgIG1vY2tDbGllbnRSZXF1ZXN0U2VydmljZS5nZXRDbGllbnRSZXF1ZXN0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUGFnaW5hdGVkUmVxdWVzdHMpO1xuICAgICAgY29uc3QgYWxsUmVxdWVzdHNSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldE15UmVxdWVzdHMoXG4gICAgICAgIHsgcGFnZTogMSwgbGltaXQ6IDEwLCBzb3J0Qnk6ICdyZXF1ZXN0ZWRBdCcsIHNvcnRPcmRlcjogJ2Rlc2MnIH0sXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChhbGxSZXF1ZXN0c1Jlc3VsdCkudG9FcXVhbChtb2NrUGFnaW5hdGVkUmVxdWVzdHMpO1xuXG4gICAgICAvLyBTdGVwIDM6IEdldCByZWNlbnQgcmVxdWVzdHNcbiAgICAgIGNvbnN0IHJlY2VudFJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UmVjZW50UmVxdWVzdHMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgICAgZXhwZWN0KHJlY2VudFJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlY2VudFJlc3VsdC5yZWNlbnRSZXF1ZXN0cykudG9FcXVhbChbbW9ja1RoZXJhcGlzdFJlcXVlc3RdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgdW5hdmFpbGFibGUgc2NlbmFyaW9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdTZXJ2aWNlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlJyk7XG4gICAgICBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2Uuc2VuZFRoZXJhcGlzdFJlcXVlc3QubW9ja1JlamVjdGVkVmFsdWUoc2VydmljZUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLnNlbmRUaGVyYXBpc3RSZXF1ZXN0KFxuICAgICAgICAgIHZhbGlkVGhlcmFwaXN0SWQsXG4gICAgICAgICAgeyBtZXNzYWdlOiAnVGVzdCcsIHByaW9yaXR5OiAnTk9STUFMJywgcHJlZmVycmVkVGltZXM6IFtdIH0sXG4gICAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgICksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhzZXJ2aWNlRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCBhY2Nlc3MgaXNzdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29uY3VycmVuY3lFcnJvciA9IG5ldyBFcnJvcignUmVxdWVzdCBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgbW9ja0NsaWVudFJlcXVlc3RTZXJ2aWNlLnNlbmRUaGVyYXBpc3RSZXF1ZXN0Lm1vY2tSZWplY3RlZFZhbHVlKGNvbmN1cnJlbmN5RXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuc2VuZFRoZXJhcGlzdFJlcXVlc3QoXG4gICAgICAgICAgdmFsaWRUaGVyYXBpc3RJZCxcbiAgICAgICAgICB7IG1lc3NhZ2U6ICdUZXN0JywgcHJpb3JpdHk6ICdOT1JNQUwnLCBwcmVmZXJyZWRUaW1lczogW10gfSxcbiAgICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAgKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KGNvbmN1cnJlbmN5RXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIHJlcXVlc3QgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGZvcm1lZER0byA9IHsgaW52YWxpZDogJ2RhdGEnIH07XG4gICAgICBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2Uuc2VuZFRoZXJhcGlzdFJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RoZXJhcGlzdFJlcXVlc3QpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnNlbmRUaGVyYXBpc3RSZXF1ZXN0KFxuICAgICAgICB2YWxpZFRoZXJhcGlzdElkLFxuICAgICAgICBtYWxmb3JtZWREdG8gYXMgYW55LFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChjbGllbnRSZXF1ZXN0U2VydmljZS5zZW5kVGhlcmFwaXN0UmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgICB2YWxpZFRoZXJhcGlzdElkLFxuICAgICAgICBtYWxmb3JtZWREdG8sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVzcG9uc2UgRm9ybWF0IFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvcGVybHkgZm9ybWF0dGVkIHJlcXVlc3QgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2Uuc2VuZFRoZXJhcGlzdFJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RoZXJhcGlzdFJlcXVlc3QpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnNlbmRUaGVyYXBpc3RSZXF1ZXN0KFxuICAgICAgICB2YWxpZFRoZXJhcGlzdElkLFxuICAgICAgICB7IG1lc3NhZ2U6ICdUZXN0JywgcHJpb3JpdHk6ICdOT1JNQUwnLCBwcmVmZXJyZWRUaW1lczogW10gfSxcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICApO1xuXG4gICAgICBUZXN0QXNzZXJ0aW9ucy5leHBlY3RWYWxpZEVudGl0eShyZXN1bHQsIFsnaWQnLCAnY2xpZW50SWQnLCAndGhlcmFwaXN0SWQnLCAnc3RhdHVzJ10pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvcGVybHkgZm9ybWF0dGVkIHN0YXRpc3RpY3MgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50UmVxdWVzdFNlcnZpY2UuZ2V0Q2xpZW50UmVxdWVzdFN0YXRpc3RpY3MubW9ja1Jlc29sdmVkVmFsdWUobW9ja1JlcXVlc3RTdGF0aXN0aWNzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRSZXF1ZXN0U3RhdGlzdGljcyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbFNlbnQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdwZW5kaW5nJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnYWNjZXB0ZWQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdkZWNsaW5lZCcpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQudG90YWxTZW50KS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnBlbmRpbmcpLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvcGVybHkgZm9ybWF0dGVkIHN1Y2Nlc3MgcmVzcG9uc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudFJlcXVlc3RTZXJ2aWNlLmdldENsaWVudFJlcXVlc3RzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQYWdpbmF0ZWRSZXF1ZXN0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UmVxdWVzdERldGFpbHModmFsaWRSZXF1ZXN0SWQsIFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N1Y2Nlc3MnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdyZXF1ZXN0Jyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBwcm9wZXJseSBmb3JtYXR0ZWQgZmlsdGVyIG9wdGlvbnMgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldEZpbHRlck9wdGlvbnMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnc3VjY2VzcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2ZpbHRlck9wdGlvbnMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZmlsdGVyT3B0aW9ucykudG9IYXZlUHJvcGVydHkoJ3N0YXR1c2VzJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmZpbHRlck9wdGlvbnMpLnRvSGF2ZVByb3BlcnR5KCdwcmlvcml0aWVzJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmZpbHRlck9wdGlvbnMpLnRvSGF2ZVByb3BlcnR5KCdzb3J0T3B0aW9ucycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5maWx0ZXJPcHRpb25zKS50b0hhdmVQcm9wZXJ0eSgnc29ydE9yZGVycycpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LmZpbHRlck9wdGlvbnMuc3RhdHVzZXMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LmZpbHRlck9wdGlvbnMucHJpb3JpdGllcykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9