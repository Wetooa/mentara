{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/therapist/therapist-recommendation.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/therapist/therapist-recommendation.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { TherapistRecommendationService } from './therapist-recommendation.service';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport { InternalServerErrorException } from '@nestjs/common';\nimport { TherapistRecommendationRequest } from 'mentara-commons';\n\ndescribe('TherapistRecommendationService', () => {\n  let service: TherapistRecommendationService;\n  let prismaService: any;\n\n  // Mock data\n  const mockUser = {\n    userId: 'user-123',\n    id: 'client-123',\n    firstName: 'John',\n    lastName: 'Doe',\n    email: 'john.doe@example.com',\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    updatedAt: new Date('2024-01-15T00:00:00Z'),\n  };\n\n  const mockPreAssessment = {\n    id: 'assessment-123',\n    userId: 'user-123',\n    questionnaires: ['anxiety', 'depression', 'stress'],\n    severityLevels: {\n      anxiety: 'Moderate',\n      depression: 'Mild',\n      stress: 'Moderately Severe',\n    },\n    responses: {\n      anxiety: [2, 3, 2, 3, 2, 1, 2],\n      depression: [1, 2, 1, 2, 1, 0, 1],\n      stress: [4, 3, 4, 3, 4, 4, 3],\n    },\n    scores: {\n      anxiety: 15,\n      depression: 8,\n      stress: 25,\n    },\n    recommendations: ['CBT', 'Mindfulness', 'Stress Management'],\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    updatedAt: new Date('2024-01-15T00:00:00Z'),\n  };\n\n  const mockClientWithAssessment = {\n    ...mockUser,\n    preAssessment: mockPreAssessment,\n  };\n\n  const mockTherapist1 = {\n    userId: 'therapist-1',\n    id: 'therapist-1',\n    bio: 'Experienced therapist specializing in anxiety and depression',\n    expertise: ['anxiety', 'depression'],\n    hourlyRate: 100,\n    yearsOfExperience: 5,\n    province: 'Ontario',\n    status: 'approved',\n    practiceStartDate: new Date('2019-01-01T00:00:00Z'),\n    approaches: ['CBT', 'DBT'],\n    languages: ['English', 'French'],\n    acceptTypes: ['individual', 'couples'],\n    sessionLength: '50 minutes',\n    createdAt: new Date('2024-01-10T00:00:00Z'),\n    user: {\n      id: 'therapist-user-1',\n      firstName: 'Dr. Sarah',\n      lastName: 'Wilson',\n      email: 'sarah.wilson@example.com',\n      avatarUrl: 'https://example.com/avatar1.jpg',\n    },\n  };\n\n  const mockTherapist2 = {\n    userId: 'therapist-2',\n    id: 'therapist-2',\n    bio: 'Specialist in trauma and PTSD treatment',\n    expertise: ['trauma', 'ptsd', 'anxiety'],\n    hourlyRate: 120,\n    yearsOfExperience: 8,\n    province: 'Ontario',\n    status: 'approved',\n    practiceStartDate: new Date('2016-01-01T00:00:00Z'),\n    approaches: ['EMDR', 'CBT'],\n    languages: ['English'],\n    acceptTypes: ['individual'],\n    sessionLength: '60 minutes',\n    createdAt: new Date('2024-01-08T00:00:00Z'),\n    user: {\n      id: 'therapist-user-2',\n      firstName: 'Dr. Michael',\n      lastName: 'Johnson',\n      email: 'michael.johnson@example.com',\n      avatarUrl: 'https://example.com/avatar2.jpg',\n    },\n  };\n\n  const mockTherapist3 = {\n    userId: 'therapist-3',\n    id: 'therapist-3',\n    bio: 'General practice therapist',\n    expertise: ['general', 'wellness'],\n    hourlyRate: 80,\n    yearsOfExperience: 3,\n    province: 'Quebec',\n    status: 'approved',\n    practiceStartDate: new Date('2021-01-01T00:00:00Z'),\n    approaches: ['Humanistic', 'Integrative'],\n    languages: ['English', 'French'],\n    acceptTypes: ['individual', 'group'],\n    sessionLength: '45 minutes',\n    createdAt: new Date('2024-01-12T00:00:00Z'),\n    user: {\n      id: 'therapist-user-3',\n      firstName: 'Dr. Emma',\n      lastName: 'Brown',\n      email: 'emma.brown@example.com',\n      avatarUrl: 'https://example.com/avatar3.jpg',\n    },\n  };\n\n  const mockRequest: TherapistRecommendationRequest = {\n    userId: 'user-123',\n    limit: 10,\n    includeInactive: false,\n    province: 'Ontario',\n    maxHourlyRate: 150,\n  };\n\n  beforeEach(async () => {\n    const mockPrismaService = {\n      client: {\n        findUnique: jest.fn(),\n      },\n      therapist: {\n        findMany: jest.fn(),\n      },\n    };\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        TherapistRecommendationService,\n        {\n          provide: PrismaService,\n          useValue: mockPrismaService,\n        },\n      ],\n    }).compile();\n\n    service = module.get<TherapistRecommendationService>(\n      TherapistRecommendationService,\n    );\n    prismaService = module.get(PrismaService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('getRecommendedTherapists', () => {\n    beforeEach(() => {\n      prismaService.client.findUnique.mockResolvedValue(\n        mockClientWithAssessment,\n      );\n      prismaService.therapist.findMany.mockResolvedValue([\n        mockTherapist1,\n        mockTherapist2,\n        mockTherapist3,\n      ]);\n    });\n\n    it('should return therapist recommendations successfully', async () => {\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(prismaService.client.findUnique).toHaveBeenCalledWith({\n        where: { userId: mockRequest.userId },\n        include: { preAssessment: true },\n      });\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith({\n        where: {\n          status: 'approved',\n          province: mockRequest.province,\n          hourlyRate: { lte: mockRequest.maxHourlyRate },\n        },\n        orderBy: { createdAt: 'desc' },\n        take: mockRequest.limit,\n        include: { user: true },\n      });\n\n      expect(result).toEqual({\n        totalCount: 3,\n        userConditions: ['anxiety', 'depression', 'stress'],\n        therapists: expect.arrayContaining([\n          expect.objectContaining({\n            ...mockTherapist1,\n            matchScore: expect.any(Number),\n          }),\n          expect.objectContaining({\n            ...mockTherapist2,\n            matchScore: expect.any(Number),\n          }),\n          expect.objectContaining({\n            ...mockTherapist3,\n            matchScore: expect.any(Number),\n          }),\n        ]),\n        matchCriteria: {\n          primaryConditions: ['stress'],\n          secondaryConditions: ['anxiety', 'depression'],\n          severityLevels: mockPreAssessment.severityLevels,\n        },\n        page: 1,\n        pageSize: mockRequest.limit,\n      });\n    });\n\n    it('should sort therapists by match score descending', async () => {\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      const scores = result.therapists.map((t: any) => t.matchScore);\n      const sortedScores = [...scores].sort((a, b) => b - a);\n\n      expect(scores).toEqual(sortedScores);\n    });\n\n    it('should handle request without optional filters', async () => {\n      const minimalRequest = { userId: 'user-123' };\n\n      await service.getRecommendedTherapists(minimalRequest);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith({\n        where: { status: 'approved' },\n        orderBy: { createdAt: 'desc' },\n        take: 10,\n        include: { user: true },\n      });\n    });\n\n    it('should apply province filter when provided', async () => {\n      const requestWithProvince = { ...mockRequest, province: 'Quebec' };\n\n      await service.getRecommendedTherapists(requestWithProvince);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            province: 'Quebec',\n          }),\n        }),\n      );\n    });\n\n    it('should apply max hourly rate filter when provided', async () => {\n      const requestWithRate = { ...mockRequest, maxHourlyRate: 90 };\n\n      await service.getRecommendedTherapists(requestWithRate);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            hourlyRate: { lte: 90 },\n          }),\n        }),\n      );\n    });\n\n    it('should use default limit when not provided', async () => {\n      const requestWithoutLimit = { userId: 'user-123' };\n\n      await service.getRecommendedTherapists(requestWithoutLimit);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          take: 10,\n        }),\n      );\n    });\n\n    it('should throw InternalServerErrorException when user not found', async () => {\n      prismaService.client.findUnique.mockResolvedValue(null);\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow('User not found');\n    });\n\n    it('should throw InternalServerErrorException when user has no pre-assessment', async () => {\n      prismaService.client.findUnique.mockResolvedValue({\n        ...mockUser,\n        preAssessment: null,\n      });\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow('No pre-assessment found for user');\n    });\n\n    it('should handle empty therapist results', async () => {\n      prismaService.therapist.findMany.mockResolvedValue([]);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result).toEqual({\n        totalCount: 0,\n        userConditions: ['anxiety', 'depression', 'stress'],\n        therapists: [],\n        matchCriteria: {\n          primaryConditions: ['stress'],\n          secondaryConditions: ['anxiety', 'depression'],\n          severityLevels: mockPreAssessment.severityLevels,\n        },\n        page: 1,\n        pageSize: mockRequest.limit,\n      });\n    });\n\n    it('should handle database errors gracefully', async () => {\n      prismaService.client.findUnique.mockRejectedValue(\n        new Error('Database connection failed'),\n      );\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle therapists with no expertise', async () => {\n      const therapistWithoutExpertise = {\n        ...mockTherapist1,\n        expertise: null,\n      };\n\n      prismaService.therapist.findMany.mockResolvedValue([\n        therapistWithoutExpertise,\n      ]);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.therapists[0]).toHaveProperty('matchScore');\n      expect(result.therapists[0].matchScore).toBeGreaterThanOrEqual(0);\n    });\n\n    it('should handle therapists with empty expertise array', async () => {\n      const therapistWithEmptyExpertise = {\n        ...mockTherapist1,\n        expertise: [],\n      };\n\n      prismaService.therapist.findMany.mockResolvedValue([\n        therapistWithEmptyExpertise,\n      ]);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.therapists[0]).toHaveProperty('matchScore');\n      expect(result.therapists[0].matchScore).toBeGreaterThanOrEqual(0);\n    });\n\n    it('should handle pre-assessment with no questionnaires', async () => {\n      const clientWithEmptyAssessment = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          questionnaires: [],\n          severityLevels: {},\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(\n        clientWithEmptyAssessment,\n      );\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.userConditions).toEqual([]);\n      expect(result.matchCriteria.primaryConditions).toEqual([]);\n      expect(result.matchCriteria.secondaryConditions).toEqual([]);\n    });\n\n    it('should handle pre-assessment with null questionnaires', async () => {\n      const clientWithNullQuestionnaires = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          questionnaires: null,\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(\n        clientWithNullQuestionnaires,\n      );\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle different severity levels correctly', async () => {\n      const clientWithVariedSeverity = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          questionnaires: ['anxiety', 'depression', 'stress', 'trauma'],\n          severityLevels: {\n            anxiety: 'Severe',\n            depression: 'Minimal',\n            stress: 'Moderate',\n            trauma: 'Clinical',\n          },\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(\n        clientWithVariedSeverity,\n      );\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.matchCriteria.primaryConditions).toContain('anxiety');\n      expect(result.matchCriteria.primaryConditions).toContain('trauma');\n      expect(result.matchCriteria.secondaryConditions).toContain('stress');\n      expect(result.matchCriteria.primaryConditions).not.toContain(\n        'depression',\n      );\n      expect(result.matchCriteria.secondaryConditions).not.toContain(\n        'depression',\n      );\n    });\n\n    it('should calculate match scores correctly for expertise matching', async () => {\n      const therapistWithMatchingExpertise = {\n        ...mockTherapist1,\n        expertise: ['anxiety', 'depression'],\n      };\n\n      const therapistWithoutMatchingExpertise = {\n        ...mockTherapist2,\n        expertise: ['trauma', 'ptsd'],\n      };\n\n      prismaService.therapist.findMany.mockResolvedValue([\n        therapistWithMatchingExpertise,\n        therapistWithoutMatchingExpertise,\n      ]);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      const matchingTherapist = result.therapists.find(\n        (t: any) => t.userId === 'therapist-1',\n      );\n      const nonMatchingTherapist = result.therapists.find(\n        (t: any) => t.userId === 'therapist-2',\n      );\n\n      expect(matchingTherapist.matchScore).toBeGreaterThan(\n        nonMatchingTherapist.matchScore,\n      );\n    });\n\n    it('should calculate years of experience correctly', async () => {\n      const currentYear = new Date().getFullYear();\n      const therapistWithRecentStart = {\n        ...mockTherapist1,\n        practiceStartDate: new Date(`${currentYear - 2}-01-01`),\n        yearsOfExperience: 2,\n      };\n\n      const therapistWithOldStart = {\n        ...mockTherapist2,\n        practiceStartDate: new Date(`${currentYear - 10}-01-01`),\n        yearsOfExperience: 10,\n      };\n\n      prismaService.therapist.findMany.mockResolvedValue([\n        therapistWithRecentStart,\n        therapistWithOldStart,\n      ]);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      const recentTherapist = result.therapists.find(\n        (t: any) => t.userId === 'therapist-1',\n      );\n      const experiencedTherapist = result.therapists.find(\n        (t: any) => t.userId === 'therapist-2',\n      );\n\n      expect(experiencedTherapist.matchScore).toBeGreaterThan(\n        recentTherapist.matchScore,\n      );\n    });\n\n    it('should handle therapists with no yearsOfExperience field', async () => {\n      const therapistWithoutYearsField = {\n        ...mockTherapist1,\n        yearsOfExperience: null,\n      };\n\n      prismaService.therapist.findMany.mockResolvedValue([\n        therapistWithoutYearsField,\n      ]);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.therapists[0]).toHaveProperty('matchScore');\n      expect(result.therapists[0].matchScore).toBeGreaterThanOrEqual(0);\n    });\n\n    it('should handle future practice start dates', async () => {\n      const futureDate = new Date();\n      futureDate.setFullYear(futureDate.getFullYear() + 1);\n\n      const therapistWithFutureStart = {\n        ...mockTherapist1,\n        practiceStartDate: futureDate,\n      };\n\n      prismaService.therapist.findMany.mockResolvedValue([\n        therapistWithFutureStart,\n      ]);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.therapists[0]).toHaveProperty('matchScore');\n      expect(result.therapists[0].matchScore).toBeGreaterThanOrEqual(0);\n    });\n\n    it('should handle malformed severity levels', async () => {\n      const clientWithMalformedSeverity = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          questionnaires: ['anxiety', 'depression'],\n          severityLevels: {\n            anxiety: 'Invalid Severity',\n            depression: null,\n          },\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(\n        clientWithMalformedSeverity,\n      );\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      // Only anxiety has a severity value (even if invalid), depression is null so gets filtered out\n      expect(result.userConditions).toEqual(['anxiety']);\n      // Invalid severity gets default weight of 1, which is not >= 2, so no secondary conditions\n      expect(result.matchCriteria.primaryConditions).toEqual([]);\n      expect(result.matchCriteria.secondaryConditions).toEqual([]);\n    });\n\n    it('should handle very large datasets efficiently', async () => {\n      const manyTherapists = Array(100)\n        .fill(null)\n        .map((_, i) => ({\n          ...mockTherapist1,\n          userId: `therapist-${i}`,\n          id: `therapist-${i}`,\n          expertise: i % 2 === 0 ? ['anxiety'] : ['depression'],\n          user: {\n            ...mockTherapist1.user,\n            id: `therapist-user-${i}`,\n          },\n        }));\n\n      prismaService.therapist.findMany.mockResolvedValue(manyTherapists);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.therapists).toHaveLength(100);\n      expect(result.totalCount).toBe(100);\n    });\n\n    it('should handle concurrent requests', async () => {\n      const requests = Array(5)\n        .fill(null)\n        .map(() => service.getRecommendedTherapists(mockRequest));\n\n      const results = await Promise.all(requests);\n\n      expect(results).toHaveLength(5);\n      results.forEach((result) => {\n        expect(result).toHaveProperty('therapists');\n        expect(result).toHaveProperty('totalCount');\n      });\n    });\n\n    it('should handle edge case severity levels', async () => {\n      const clientWithEdgeCaseSeverity = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          questionnaires: ['anxiety', 'depression', 'stress'],\n          severityLevels: {\n            anxiety: 'None',\n            depression: 'Subthreshold',\n            stress: 'Extreme',\n          },\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(\n        clientWithEdgeCaseSeverity,\n      );\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.matchCriteria.primaryConditions).toContain('stress');\n      expect(result.matchCriteria.secondaryConditions).toContain('depression');\n      expect(result.matchCriteria.primaryConditions).not.toContain('anxiety');\n      expect(result.matchCriteria.secondaryConditions).not.toContain('anxiety');\n    });\n\n    it('should handle null severity levels', async () => {\n      const clientWithNullSeverity = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          severityLevels: null,\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(clientWithNullSeverity);\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle malformed request parameters', async () => {\n      const malformedRequest = {\n        userId: 'user-123',\n        limit: -1,\n        maxHourlyRate: 'invalid',\n      } as any;\n\n      // The service doesn't validate request parameters, so it won't throw\n      const result = await service.getRecommendedTherapists(malformedRequest);\n\n      expect(result).toHaveProperty('therapists');\n      expect(result.pageSize).toBe(-1);\n    });\n\n    it('should handle string numeric values in request', async () => {\n      const requestWithStringNumbers = {\n        userId: 'user-123',\n        limit: '5' as any,\n        maxHourlyRate: '100' as any,\n      };\n\n      // Should not throw error and handle conversion\n      const result = await service.getRecommendedTherapists(\n        requestWithStringNumbers,\n      );\n\n      expect(result).toHaveProperty('therapists');\n      expect(result.pageSize).toBe('5');\n    });\n\n    it('should handle therapists with null or undefined fields', async () => {\n      const therapistWithNullFields = {\n        ...mockTherapist1,\n        expertise: null,\n        yearsOfExperience: undefined,\n        practiceStartDate: null,\n        hourlyRate: undefined,\n      };\n\n      prismaService.therapist.findMany.mockResolvedValue([\n        therapistWithNullFields,\n      ]);\n\n      // This will throw because practiceStartDate is null and calculateYearsOfExperience tries to call getFullYear on null\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle empty request object', async () => {\n      const emptyRequest = {} as any;\n\n      // For empty request, we need to mock client.findUnique to return null for undefined userId\n      prismaService.client.findUnique.mockResolvedValue(null);\n\n      // Empty request will cause userId to be undefined, which will cause user not found error\n      await expect(\n        service.getRecommendedTherapists(emptyRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle assessment with mixed data types', async () => {\n      const clientWithMixedData = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          questionnaires: ['anxiety', 'depression', 123 as any],\n          severityLevels: {\n            anxiety: 'Moderate',\n            depression: 'Mild',\n            123: 'Invalid',\n          },\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(clientWithMixedData);\n\n      // Should handle gracefully without throwing\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.userConditions).toContain('anxiety');\n      expect(result.userConditions).toContain('depression');\n    });\n\n    it('should maintain consistent scoring across multiple calls', async () => {\n      const results = await Promise.all([\n        service.getRecommendedTherapists(mockRequest),\n        service.getRecommendedTherapists(mockRequest),\n        service.getRecommendedTherapists(mockRequest),\n      ]);\n\n      const scores1 = results[0].therapists.map((t: any) => t.matchScore);\n      const scores2 = results[1].therapists.map((t: any) => t.matchScore);\n      const scores3 = results[2].therapists.map((t: any) => t.matchScore);\n\n      expect(scores1).toEqual(scores2);\n      expect(scores2).toEqual(scores3);\n    });\n\n    it('should handle non-Error exceptions', async () => {\n      const nonErrorException = { message: 'Custom error', code: 500 };\n      prismaService.client.findUnique.mockRejectedValue(nonErrorException);\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle assessment with duplicate questionnaires', async () => {\n      const clientWithDuplicates = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          questionnaires: ['anxiety', 'depression', 'anxiety', 'depression'],\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(clientWithDuplicates);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.userConditions).toContain('anxiety');\n      expect(result.userConditions).toContain('depression');\n    });\n\n    it('should handle very old practice start dates', async () => {\n      const therapistWithVeryOldStart = {\n        ...mockTherapist1,\n        practiceStartDate: new Date('1980-01-01'),\n        yearsOfExperience: 44,\n      };\n\n      prismaService.therapist.findMany.mockResolvedValue([\n        therapistWithVeryOldStart,\n      ]);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.therapists[0]).toHaveProperty('matchScore');\n      expect(result.therapists[0].matchScore).toBeGreaterThan(0);\n    });\n\n    it('should handle zero and negative hourly rates', async () => {\n      const therapistWithZeroRate = {\n        ...mockTherapist1,\n        hourlyRate: 0,\n      };\n\n      const therapistWithNegativeRate = {\n        ...mockTherapist2,\n        hourlyRate: -50,\n      };\n\n      prismaService.therapist.findMany.mockResolvedValue([\n        therapistWithZeroRate,\n        therapistWithNegativeRate,\n      ]);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.therapists).toHaveLength(2);\n      expect(result.therapists[0]).toHaveProperty('matchScore');\n      expect(result.therapists[1]).toHaveProperty('matchScore');\n    });\n\n    it('should handle assessment with special characters in questionnaire names', async () => {\n      const clientWithSpecialChars = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          questionnaires: [\n            'anxiety-disorder',\n            'depression_scale',\n            'stress/trauma',\n          ],\n          severityLevels: {\n            'anxiety-disorder': 'Moderate',\n            depression_scale: 'Mild',\n            'stress/trauma': 'Severe',\n          },\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(clientWithSpecialChars);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.userConditions).toContain('anxiety-disorder');\n      expect(result.userConditions).toContain('depression_scale');\n      expect(result.userConditions).toContain('stress/trauma');\n    });\n\n    it('should handle extremely large limit values', async () => {\n      const requestWithLargeLimit = {\n        ...mockRequest,\n        limit: 999999,\n      };\n\n      const result = await service.getRecommendedTherapists(\n        requestWithLargeLimit,\n      );\n\n      expect(result.pageSize).toBe(999999);\n    });\n\n    it('should handle zero limit value', async () => {\n      const requestWithZeroLimit = {\n        ...mockRequest,\n        limit: 0,\n      };\n\n      const result =\n        await service.getRecommendedTherapists(requestWithZeroLimit);\n\n      expect(result.pageSize).toBe(0);\n    });\n\n    it('should handle Unicode characters in user conditions', async () => {\n      const clientWithUnicode = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          questionnaires: ['ansiedad', 'depresin', 'estrs'],\n          severityLevels: {\n            ansiedad: 'Moderado',\n            depresin: 'Leve',\n            estrs: 'Severo',\n          },\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(clientWithUnicode);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.userConditions).toContain('ansiedad');\n      expect(result.userConditions).toContain('depresin');\n      expect(result.userConditions).toContain('estrs');\n    });\n\n    it('should handle assessment with very long questionnaire names', async () => {\n      const longName = 'a'.repeat(1000);\n      const clientWithLongNames = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          questionnaires: [longName, 'short'],\n          severityLevels: {\n            [longName]: 'Moderate',\n            short: 'Mild',\n          },\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(clientWithLongNames);\n\n      const result = await service.getRecommendedTherapists(mockRequest);\n\n      expect(result.userConditions).toContain(longName);\n      expect(result.userConditions).toContain('short');\n    });\n  });\n\n  describe('Error handling and edge cases', () => {\n    it('should handle database timeout errors', async () => {\n      prismaService.client.findUnique.mockRejectedValue(\n        new Error('Connection timeout'),\n      );\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle network errors', async () => {\n      prismaService.client.findUnique.mockRejectedValue(\n        new Error('Network error'),\n      );\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle memory errors gracefully', async () => {\n      prismaService.client.findUnique.mockRejectedValue(\n        new Error('Out of memory'),\n      );\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle JSON parsing errors in severity levels', async () => {\n      const clientWithInvalidJson = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          severityLevels: 'invalid json string' as any,\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(clientWithInvalidJson);\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle circular reference errors', async () => {\n      const circularObj: any = {};\n      circularObj.self = circularObj;\n\n      const clientWithCircularRef = {\n        ...mockUser,\n        preAssessment: {\n          ...mockPreAssessment,\n          severityLevels: circularObj,\n        },\n      };\n\n      prismaService.client.findUnique.mockResolvedValue(clientWithCircularRef);\n\n      await expect(\n        service.getRecommendedTherapists(mockRequest),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n});\n"],"version":3}