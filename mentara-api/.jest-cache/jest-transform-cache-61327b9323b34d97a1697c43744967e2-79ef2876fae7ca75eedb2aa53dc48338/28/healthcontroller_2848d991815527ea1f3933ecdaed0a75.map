{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/health/health.controller.ts","mappings":";;;;;;;;;;;;;AAAA,2CAA4E;AAC5E,qDAAiD;AACjD,0EAA6D;AAGtD,IAAM,gBAAgB,GAAtB,MAAM,gBAAgB;IACE;IAA7B,YAA6B,aAA4B;QAA5B,kBAAa,GAAb,aAAa,CAAe;IAAG,CAAC;IAIvD,AAAN,KAAK,CAAC,SAAS;QACb,OAAO,IAAI,CAAC,aAAa,CAAC,cAAc,EAAE,CAAC;IAC7C,CAAC;IAGK,AAAN,KAAK,CAAC,iBAAiB;QACrB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC;QAE5D,IAAI,MAAM,CAAC,MAAM,KAAK,OAAO,EAAE,CAAC;YAC9B,MAAM,IAAI,sBAAa,CAAC,MAAM,EAAE,mBAAU,CAAC,mBAAmB,CAAC,CAAC;QAClE,CAAC;QAED,OAAO,MAAM,CAAC;IAChB,CAAC;IAIK,AAAN,KAAK,CAAC,iBAAiB;QACrB,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC;QAE9D,IAAI,QAAQ,CAAC,MAAM,KAAK,cAAc,EAAE,CAAC;YACvC,MAAM,IAAI,sBAAa,CAAC,QAAQ,EAAE,mBAAU,CAAC,mBAAmB,CAAC,CAAC;QACpE,CAAC;QAED,OAAO,QAAQ,CAAC;IAClB,CAAC;IAIK,AAAN,KAAK,CAAC,iBAAiB;QACrB,OAAO,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC;IAChD,CAAC;IAIK,AAAN,KAAK,CAAC,gBAAgB;QACpB,OAAO,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,CAAC;IAC/C,CAAC;IAIK,AAAN,KAAK,CAAC,kBAAkB;QACtB,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,kBAAkB,EAAE,CAAC;QAE/D,IAAI,QAAQ,CAAC,MAAM,KAAK,WAAW,EAAE,CAAC;YACpC,MAAM,IAAI,sBAAa,CAAC,QAAQ,EAAE,mBAAU,CAAC,mBAAmB,CAAC,CAAC;QACpE,CAAC;QAED,OAAO,QAAQ,CAAC;IAClB,CAAC;IAGK,AAAN,KAAK,CAAC,cAAc;QAClB,OAAO,IAAI,CAAC,aAAa,CAAC,uBAAuB,EAAE,CAAC;IACtD,CAAC;CACF,CAAA;AA5DY,4CAAgB;AAKrB;IAFL,IAAA,yBAAM,GAAE;IACR,IAAA,YAAG,GAAE;;;;iDAGL;AAGK;IADL,IAAA,yBAAM,GAAE;;;;yDASR;AAIK;IAFL,IAAA,yBAAM,GAAE;IACR,IAAA,YAAG,EAAC,UAAU,CAAC;;;;yDASf;AAIK;IAFL,IAAA,yBAAM,GAAE;IACR,IAAA,YAAG,EAAC,UAAU,CAAC;;;;yDAGf;AAIK;IAFL,IAAA,yBAAM,GAAE;IACR,IAAA,YAAG,EAAC,QAAQ,CAAC;;;;wDAGb;AAIK;IAFL,IAAA,yBAAM,GAAE;IACR,IAAA,YAAG,EAAC,WAAW,CAAC;;;;0DAShB;AAGK;IADL,IAAA,YAAG,EAAC,OAAO,CAAC;;;;sDAGZ;2BA3DU,gBAAgB;IAD5B,IAAA,mBAAU,EAAC,QAAQ,CAAC;yDAEyB,8BAAa,oBAAb,8BAAa;GAD9C,gBAAgB,CA4D5B","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/health/health.controller.ts"],"sourcesContent":["import { Controller, Get, HttpStatus, HttpException } from '@nestjs/common';\nimport { HealthService } from './health.service';\nimport { Public } from '../auth/decorators/public.decorator';\n\n@Controller('health')\nexport class HealthController {\n  constructor(private readonly healthService: HealthService) {}\n\n  @Public()\n  @Get()\n  async getHealth() {\n    return this.healthService.getBasicHealth();\n  }\n\n  @Public()\n  async getDetailedHealth() {\n    const health = await this.healthService.getDetailedHealth();\n\n    if (health.status === 'error') {\n      throw new HttpException(health, HttpStatus.SERVICE_UNAVAILABLE);\n    }\n\n    return health;\n  }\n\n  @Public()\n  @Get('database')\n  async getDatabaseHealth() {\n    const dbHealth = await this.healthService.getDatabaseHealth();\n\n    if (dbHealth.status === 'disconnected') {\n      throw new HttpException(dbHealth, HttpStatus.SERVICE_UNAVAILABLE);\n    }\n\n    return dbHealth;\n  }\n\n  @Public()\n  @Get('services')\n  async getServicesHealth() {\n    return this.healthService.getServicesHealth();\n  }\n\n  @Public()\n  @Get('system')\n  async getSystemMetrics() {\n    return this.healthService.getSystemMetrics();\n  }\n\n  @Public()\n  @Get('websocket')\n  async getWebSocketHealth() {\n    const wsHealth = await this.healthService.getWebSocketHealth();\n    \n    if (wsHealth.status === 'unhealthy') {\n      throw new HttpException(wsHealth, HttpStatus.SERVICE_UNAVAILABLE);\n    }\n    \n    return wsHealth;\n  }\n\n  @Get('admin')\n  async getAdminHealth() {\n    return this.healthService.getAdminHealthDashboard();\n  }\n}\n"],"version":3}