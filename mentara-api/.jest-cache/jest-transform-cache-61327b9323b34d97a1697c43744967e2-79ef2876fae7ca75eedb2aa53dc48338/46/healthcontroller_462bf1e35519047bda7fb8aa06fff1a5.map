{"version":3,"names":["cov_1lu7ukhanw","actualCoverage","common_1","s","require","health_service_1","public_decorator_1","HealthController","healthService","constructor","f","getHealth","getBasicHealth","getDetailedHealth","health","status","b","HttpException","HttpStatus","SERVICE_UNAVAILABLE","getDatabaseHealth","dbHealth","getServicesHealth","getSystemMetrics","getAdminHealth","getAdminHealthDashboard","exports","__decorate","Public","Get","Controller","HealthService","_a","Object"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/health/health.controller.ts"],"sourcesContent":["import { Controller, Get, HttpStatus, HttpException } from '@nestjs/common';\nimport { HealthService } from './health.service';\nimport { Public } from '../auth/decorators/public.decorator';\n\n@Controller('health')\nexport class HealthController {\n  constructor(private readonly healthService: HealthService) {}\n\n  @Public()\n  @Get()\n  async getHealth() {\n    return this.healthService.getBasicHealth();\n  }\n\n  @Public()\n  async getDetailedHealth() {\n    const health = await this.healthService.getDetailedHealth();\n\n    if (health.status === 'error') {\n      throw new HttpException(health, HttpStatus.SERVICE_UNAVAILABLE);\n    }\n\n    return health;\n  }\n\n  @Public()\n  @Get('database')\n  async getDatabaseHealth() {\n    const dbHealth = await this.healthService.getDatabaseHealth();\n\n    if (dbHealth.status === 'disconnected') {\n      throw new HttpException(dbHealth, HttpStatus.SERVICE_UNAVAILABLE);\n    }\n\n    return dbHealth;\n  }\n\n  @Public()\n  @Get('services')\n  async getServicesHealth() {\n    return this.healthService.getServicesHealth();\n  }\n\n  @Public()\n  @Get('system')\n  async getSystemMetrics() {\n    return this.healthService.getSystemMetrics();\n  }\n\n  @Get('admin')\n  async getAdminHealth() {\n    return this.healthService.getAdminHealthDashboard();\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}