{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/pre-assessment/pre-assessment.utils.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/pre-assessment/pre-assessment.utils.ts"],"sourcesContent":["// Utility functions for pre-assessment scoring\n// Based on the frontend questionnaire structure\n\nexport interface QuestionnaireScore {\n  score: number;\n  severity: string;\n}\n\nexport interface QuestionnaireScores {\n  [questionnaireName: string]: QuestionnaireScore;\n}\n\ninterface SeverityLevel {\n  range: [number, number];\n  label: string;\n}\n\ninterface QuestionnaireConfig {\n  scoreMapping: Record<number, number>;\n  reverseScoredQuestions?: number[];\n  severityLevels: Record<string, SeverityLevel>;\n}\n\n// Questionnaire scoring configurations\nconst QUESTIONNAIRE_SCORING: Record<string, QuestionnaireConfig> = {\n  Stress: {\n    scoreMapping: { 0: 4, 1: 3, 2: 2, 3: 1, 4: 0 },\n    reverseScoredQuestions: [3, 4, 6, 7],\n    severityLevels: {\n      low: { range: [0, 13], label: 'Low Stress' },\n      moderate: { range: [14, 26], label: 'Moderate Stress' },\n      high: { range: [27, 40], label: 'High Perceived Stress' },\n    },\n  },\n  Anxiety: {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3 },\n    severityLevels: {\n      minimal: { range: [0, 4], label: 'Minimal Anxiety' },\n      mild: { range: [5, 9], label: 'Mild Anxiety' },\n      moderate: { range: [10, 14], label: 'Moderate Anxiety' },\n      severe: { range: [15, 21], label: 'Severe Anxiety' },\n    },\n  },\n  Depression: {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3 },\n    severityLevels: {\n      minimal: { range: [0, 4], label: 'Minimal Depression' },\n      mild: { range: [5, 9], label: 'Mild Depression' },\n      moderate: { range: [10, 14], label: 'Moderate Depression' },\n      moderatelySevere: {\n        range: [15, 19],\n        label: 'Moderately Severe Depression',\n      },\n      severe: { range: [20, 27], label: 'Severe Depression' },\n    },\n  },\n  Insomnia: {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 },\n    severityLevels: {\n      none: { range: [0, 7], label: 'No clinically significant insomnia' },\n      subthreshold: { range: [8, 14], label: 'Subthreshold insomnia' },\n      moderate: {\n        range: [15, 21],\n        label: 'Clinical insomnia (moderate severity)',\n      },\n      severe: { range: [22, 28], label: 'Clinical insomnia (severe)' },\n    },\n  },\n  Panic: {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 },\n    severityLevels: {\n      none: { range: [0, 7], label: 'No panic disorder' },\n      mild: { range: [8, 15], label: 'Mild panic disorder' },\n      moderate: { range: [16, 23], label: 'Moderate panic disorder' },\n      severe: { range: [24, 40], label: 'Severe panic disorder' },\n    },\n  },\n  'Bipolar disorder (BD)': {\n    scoreMapping: { 0: 0, 1: 1, 2: 2 },\n    severityLevels: {\n      negative: { range: [0, 6], label: 'Negative for bipolar disorder' },\n      positive: { range: [7, 13], label: 'Positive for bipolar disorder' },\n    },\n  },\n  'Obsessive compulsive disorder (OCD)': {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 },\n    severityLevels: {\n      subclinical: { range: [0, 20], label: 'Subclinical' },\n      mild: { range: [21, 40], label: 'Mild' },\n      moderate: { range: [41, 60], label: 'Moderate' },\n      severe: { range: [61, 80], label: 'Severe' },\n      extreme: { range: [81, 100], label: 'Extreme' },\n    },\n  },\n  'Post-traumatic stress disorder (PTSD)': {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 },\n    severityLevels: {\n      none: { range: [0, 10], label: 'None to minimal' },\n      mild: { range: [11, 20], label: 'Mild' },\n      moderate: { range: [21, 30], label: 'Moderate' },\n      severe: { range: [31, 40], label: 'Severe' },\n      extreme: { range: [41, 80], label: 'Extreme' },\n    },\n  },\n  'Social anxiety': {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 },\n    severityLevels: {\n      minimal: { range: [0, 20], label: 'Minimal or No Social Phobia' },\n      mild: { range: [21, 30], label: 'Mild Social Phobia' },\n      moderate: { range: [31, 40], label: 'Moderate Social Phobia' },\n      severe: { range: [41, 50], label: 'Severe Social Phobia' },\n      verySevere: { range: [51, 68], label: 'Very Severe Social Phobia' },\n    },\n  },\n  Phobia: {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 },\n    severityLevels: {\n      none: { range: [0, 20], label: 'No significant phobia' },\n      mild: { range: [21, 40], label: 'Mild phobia' },\n      moderate: { range: [41, 60], label: 'Moderate phobia' },\n      severe: { range: [61, 80], label: 'Severe phobia' },\n      extreme: { range: [81, 100], label: 'Extreme phobia' },\n    },\n  },\n  Burnout: {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 },\n    severityLevels: {\n      low: { range: [0, 30], label: 'Low burnout' },\n      moderate: { range: [31, 50], label: 'Moderate burnout' },\n      high: { range: [51, 70], label: 'High burnout' },\n      severe: { range: [71, 100], label: 'Severe burnout' },\n    },\n  },\n  'Binge eating / Eating disorders': {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 },\n    severityLevels: {\n      none: { range: [0, 17], label: 'No binge eating' },\n      mild: { range: [18, 26], label: 'Mild binge eating' },\n      moderate: { range: [27, 46], label: 'Moderate binge eating' },\n      severe: { range: [47, 100], label: 'Severe binge eating' },\n    },\n  },\n  'ADD / ADHD': {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 },\n    severityLevels: {\n      none: { range: [0, 16], label: 'No ADHD symptoms' },\n      mild: { range: [17, 23], label: 'Mild ADHD symptoms' },\n      moderate: { range: [24, 30], label: 'Moderate ADHD symptoms' },\n      severe: { range: [31, 36], label: 'Severe ADHD symptoms' },\n    },\n  },\n  'Substance or Alcohol Use Issues': {\n    scoreMapping: { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 },\n    severityLevels: {\n      none: { range: [0, 7], label: 'No significant alcohol use' },\n      mild: { range: [8, 15], label: 'Mild alcohol use' },\n      moderate: { range: [16, 19], label: 'Moderate alcohol use' },\n      severe: { range: [20, 40], label: 'Severe alcohol use' },\n    },\n  },\n};\n\nexport function calculateQuestionnaireScore(\n  questionnaireName: string,\n  answers: number[],\n): QuestionnaireScore {\n  const config = QUESTIONNAIRE_SCORING[questionnaireName];\n  if (!config) {\n    return { score: 0, severity: 'Unknown questionnaire' };\n  }\n\n  let score = 0;\n\n  // Calculate score based on answers\n  for (let i = 0; i < answers.length; i++) {\n    const answer = answers[i];\n    if (answer === -1 || answer === undefined) continue; // Skip unanswered questions\n\n    let questionScore = config.scoreMapping[answer] || 0;\n\n    // Handle reverse scoring for specific questionnaires\n    if (\n      questionnaireName === 'Stress' &&\n      (config as any).reverseScoredQuestions.includes(i)\n    ) {\n      questionScore = 4 - questionScore; // Reverse the score\n    }\n\n    score += questionScore;\n  }\n\n  // Determine severity level\n  let severity = 'Unknown severity';\n  for (const [, range] of Object.entries(config.severityLevels)) {\n    if (score >= (range as any).range[0] && score <= (range as any).range[1]) {\n      severity = range.label;\n      break;\n    }\n  }\n\n  return { score, severity };\n}\n\nexport function calculateAllScores(\n  questionnaires: string[],\n  answers: number[][],\n): QuestionnaireScores {\n  const scores: QuestionnaireScores = {};\n\n  for (let i = 0; i < questionnaires.length; i++) {\n    const questionnaireName = questionnaires[i];\n    const questionnaireAnswers = answers[i];\n\n    if (questionnaireAnswers && questionnaireAnswers.length > 0) {\n      scores[questionnaireName] = calculateQuestionnaireScore(\n        questionnaireName,\n        questionnaireAnswers,\n      );\n    }\n  }\n\n  return scores;\n}\n\nexport function generateSeverityLevels(\n  scores: QuestionnaireScores,\n): Record<string, string> {\n  const severityLevels: Record<string, string> = {};\n\n  for (const [questionnaireName, scoreData] of Object.entries(scores)) {\n    severityLevels[questionnaireName] = scoreData.severity;\n  }\n\n  return severityLevels;\n}\n"],"version":3}