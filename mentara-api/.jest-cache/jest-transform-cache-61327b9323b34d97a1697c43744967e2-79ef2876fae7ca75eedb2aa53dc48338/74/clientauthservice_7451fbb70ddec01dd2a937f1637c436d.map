{"version":3,"names":["cov_1tiu4tf2jx","actualCoverage","common_1","s","require","prisma_client_provider_1","token_service_1","email_service_1","email_verification_service_1","bcrypt","ClientAuthService","prisma","tokenService","emailService","emailVerificationService","constructor","f","registerClient","registerDto","existingUser","user","findUnique","where","email","b","BadRequestException","hashedPassword","hash","password","result","$transaction","tx","create","data","firstName","lastName","middleName","undefined","birthDate","Date","address","avatarUrl","role","emailVerified","client","userId","id","hasSeenTherapistRecommendations","preAssessment","preassessmentAnswers","length","clientId","answers","questionnaires","answerMatrix","scores","severityLevels","aiEstimate","isProcessed","token","generateToken","sendVerificationEmail","tokens","accessToken","refreshToken","expiresIn","message","loginClient","ipAddress","userAgent","findFirst","include","UnauthorizedException","lockoutUntil","isPasswordValid","compare","handleFailedLogin","update","failedLoginCount","lastLoginAt","getClientProfile","select","createdAt","assignedTherapists","therapist","dateOfBirth","toISOString","phoneNumber","profileComplete","therapistId","getFirstSignInStatus","profileCompleted","assessmentCompleted","completedSteps","push","isFirstSignIn","hasSeenRecommendations","isOnboardingComplete","nextStep","markRecommendationsSeen","success","verifyRegistrationOtp","otpCode","verifyEmail","status","resendRegistrationOtp","resendVerificationEmail","newFailedCount","maxAttempts","lockoutDuration","updateData","now","exports","__decorate","Injectable","PrismaService","_a","Object","_b","TokenService","_c","EmailService","_d","EmailVerificationService"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/services/client-auth.service.ts"],"sourcesContent":["import {\n  Injectable,\n  UnauthorizedException,\n  BadRequestException,\n} from '@nestjs/common';\nimport type { RegisterClientDto, EmailResponse } from '../types';\nimport { PrismaService } from '../../providers/prisma-client.provider';\nimport { TokenService } from './token.service';\nimport { EmailService } from '../../email/email.service';\nimport { EmailVerificationService } from './email-verification.service';\nimport * as bcrypt from 'bcrypt';\n\n@Injectable()\nexport class ClientAuthService {\n  constructor(\n    private readonly prisma: PrismaService,\n    private readonly tokenService: TokenService,\n    private readonly emailService: EmailService,\n    private readonly emailVerificationService: EmailVerificationService,\n  ) {}\n\n  async registerClient(registerDto: RegisterClientDto) {\n    // Check if user already exists\n    const existingUser = await this.prisma.user.findUnique({\n      where: { email: registerDto.email },\n    });\n\n    if (existingUser) {\n      throw new BadRequestException('User with this email already exists');\n    }\n\n    // Hash password\n    const hashedPassword = await bcrypt.hash(registerDto.password, 12);\n\n    // Create user and client profile in transaction\n    const result = await this.prisma.$transaction(async (tx) => {\n      const user = await tx.user.create({\n        data: {\n          email: registerDto.email,\n          password: hashedPassword,\n          firstName: registerDto.firstName,\n          lastName: registerDto.lastName,\n          middleName: registerDto.middleName || undefined,\n          birthDate: registerDto.birthDate\n            ? new Date(registerDto.birthDate)\n            : undefined,\n          address: registerDto.address || undefined,\n          avatarUrl: registerDto.avatarUrl || undefined,\n          role: 'client',\n          emailVerified: false,\n        },\n      });\n\n      const client = await tx.client.create({\n        data: {\n          userId: user.id,\n          hasSeenTherapistRecommendations:\n            registerDto.hasSeenTherapistRecommendations || false,\n        },\n      });\n\n      // Create preassessment record if answers are provided\n      let preAssessment: any = null;\n      if (\n        registerDto.preassessmentAnswers &&\n        registerDto.preassessmentAnswers.length > 0\n      ) {\n        preAssessment = await tx.preAssessment.create({\n          data: {\n            clientId: user.id,\n            answers: registerDto.preassessmentAnswers,\n            questionnaires: [], // Empty until processed\n            answerMatrix: [], // Empty until processed\n            scores: {}, // Empty until processed\n            severityLevels: {}, // Empty until processed\n            aiEstimate: {}, // Empty until processed\n            isProcessed: false, // Will be processed later\n          },\n        });\n      }\n\n      return { user, client, preAssessment };\n    });\n\n    // Generate single token\n    const { token } = await this.tokenService.generateToken(\n      result.user.id,\n      result.user.email,\n      result.user.role,\n    );\n\n    // Send verification email using EmailVerificationService\n    await this.emailVerificationService.sendVerificationEmail(result.user.id);\n\n    return {\n      user: result.user,\n      tokens: { accessToken: token, refreshToken: token, expiresIn: 0 }, // For backward compatibility\n      message: result.preAssessment\n        ? 'Client registration and pre-assessment data saved successfully. Please check your email for the verification code.'\n        : 'Client registration successful. Please check your email for the verification code.',\n    };\n  }\n\n  async loginClient(\n    email: string,\n    password: string,\n    ipAddress?: string,\n    userAgent?: string,\n  ) {\n    // Find user with client role\n    const user = await this.prisma.user.findFirst({\n      where: {\n        email,\n        role: 'client',\n      },\n      include: {\n        client: true,\n      },\n    });\n\n    if (!user) {\n      throw new UnauthorizedException('Invalid credentials');\n    }\n\n    // Check if account is locked\n    if (user.lockoutUntil && user.lockoutUntil > new Date()) {\n      throw new UnauthorizedException(\n        'Account is temporarily locked due to failed login attempts',\n      );\n    }\n\n    // Verify password\n    if (!user.password) {\n      throw new UnauthorizedException('Account setup incomplete');\n    }\n    const isPasswordValid = await bcrypt.compare(password, user.password);\n    if (!isPasswordValid) {\n      // Increment failed login count\n      await this.handleFailedLogin(user.id);\n      throw new UnauthorizedException('Invalid credentials');\n    }\n\n    // Reset failed login count and update last login\n    await this.prisma.user.update({\n      where: { id: user.id },\n      data: {\n        failedLoginCount: 0,\n        lockoutUntil: null,\n        lastLoginAt: new Date(),\n      },\n    });\n\n    // Generate single token\n    const { token } = await this.tokenService.generateToken(\n      user.id,\n      user.email,\n      user.role,\n    );\n\n    return {\n      user,\n      tokens: { accessToken: token, refreshToken: token, expiresIn: 0 }, // For backward compatibility\n    };\n  }\n\n  async getClientProfile(userId: string) {\n    const user = await this.prisma.user.findUnique({\n      where: { id: userId },\n      select: {\n        id: true,\n        email: true,\n        firstName: true,\n        lastName: true,\n        birthDate: true,\n        createdAt: true,\n        role: true,\n        client: {\n          include: {\n            assignedTherapists: {\n              include: {\n                therapist: {\n                  include: {\n                    user: {\n                      select: {\n                        id: true,\n                        firstName: true,\n                        lastName: true,\n                        email: true,\n                        avatarUrl: true,\n                      },\n                    },\n                  },\n                },\n              },\n            },\n          },\n        },\n      },\n    });\n\n    if (!user || user.role !== 'client') {\n      throw new UnauthorizedException('Client not found');\n    }\n\n    // Return in the expected ClientProfileResponse format\n    return {\n      id: user.id,\n      email: user.email,\n      firstName: user.firstName || '',\n      lastName: user.lastName || '',\n      role: 'client' as const,\n      dateOfBirth: user.birthDate ? user.birthDate.toISOString() : undefined,\n      phoneNumber: undefined, // Phone number not stored in User model for clients\n      profileComplete: !!(user.firstName && user.lastName && user.birthDate),\n      therapistId:\n        user.client?.assignedTherapists?.[0]?.therapist?.user?.id || undefined,\n      createdAt: user.createdAt.toISOString(),\n      hasSeenTherapistRecommendations: user.client?.hasSeenTherapistRecommendations || false,\n    };\n  }\n\n  async getFirstSignInStatus(userId: string) {\n    const user = await this.prisma.user.findUnique({\n      where: { id: userId },\n      include: {\n        client: {\n          select: {\n            hasSeenTherapistRecommendations: true,\n          },\n        },\n      },\n    });\n\n    if (!user || !user.client) {\n      throw new UnauthorizedException('Client not found');\n    }\n\n    // Return in the expected OnboardingStatusResponse format\n    const profileCompleted = !!(user.firstName && user.lastName && user.birthDate);\n    const assessmentCompleted = false; // TODO: implement assessment completion check\n    const completedSteps: string[] = [];\n    \n    if (profileCompleted) completedSteps.push('profile');\n    if (user.client.hasSeenTherapistRecommendations) completedSteps.push('recommendations');\n    if (assessmentCompleted) completedSteps.push('assessment');\n    \n    return {\n      isFirstSignIn: !user.lastLoginAt,\n      hasSeenRecommendations: user.client.hasSeenTherapistRecommendations,\n      profileCompleted,\n      assessmentCompleted,\n      isOnboardingComplete: profileCompleted && user.client.hasSeenTherapistRecommendations && assessmentCompleted,\n      completedSteps,\n      nextStep: !profileCompleted ? 'profile' : !user.client.hasSeenTherapistRecommendations ? 'recommendations' : !assessmentCompleted ? 'assessment' : undefined,\n    };\n  }\n\n  async markRecommendationsSeen(userId: string) {\n    const client = await this.prisma.client.findUnique({\n      where: { userId },\n    });\n\n    if (!client) {\n      throw new UnauthorizedException('Client not found');\n    }\n\n    await this.prisma.client.update({\n      where: { userId },\n      data: {\n        hasSeenTherapistRecommendations: true,\n      },\n    });\n\n    // Return in the expected SuccessResponse format\n    return {\n      success: true,\n      message: 'Recommendations marked as seen',\n    };\n  }\n\n  async verifyRegistrationOtp(\n    email: string,\n    otpCode: string,\n  ): Promise<EmailResponse> {\n    if (!otpCode || !email) {\n      throw new BadRequestException('Email and OTP code are required');\n    }\n\n    // First verify the user exists and has client role\n    const user = await this.prisma.user.findFirst({\n      where: {\n        email,\n        role: 'client',\n      },\n    });\n\n    if (!user) {\n      throw new BadRequestException('Invalid email');\n    }\n\n    // Use EmailVerificationService to verify the OTP\n    const result = await this.emailVerificationService.verifyEmail(otpCode);\n    \n    if (result.success) {\n      // Update emailVerified flag for client\n      await this.prisma.user.update({\n        where: { id: user.id },\n        data: {\n          emailVerified: true,\n        },\n      });\n    }\n\n    return {\n      success: result.success,\n      status: result.success ? 'success' : 'error',\n      message: result.message,\n    };\n  }\n\n  async resendRegistrationOtp(email: string): Promise<EmailResponse> {\n    if (!email) {\n      throw new BadRequestException('Email is required');\n    }\n\n    // Find user with client role\n    const user = await this.prisma.user.findFirst({\n      where: {\n        email,\n        role: 'client',\n      },\n      select: {\n        id: true,\n        email: true,\n        firstName: true,\n        emailVerified: true,\n      },\n    });\n\n    if (!user) {\n      // Don't reveal if email exists for security, but return success\n      return {\n        success: true,\n        status: 'success',\n        message:\n          'If an account with this email exists, a new verification code has been sent.',\n      };\n    }\n\n    if (user.emailVerified) {\n      throw new BadRequestException('Email already verified');\n    }\n\n    // Use EmailVerificationService to resend verification email\n    await this.emailVerificationService.resendVerificationEmail(email);\n\n    return {\n      success: true,\n      status: 'success',\n      message: 'A new verification code has been sent to your email.',\n    };\n  }\n\n  private async handleFailedLogin(userId: string) {\n    const user = await this.prisma.user.findUnique({\n      where: { id: userId },\n      select: { failedLoginCount: true },\n    });\n\n    const newFailedCount = (user?.failedLoginCount || 0) + 1;\n    const maxAttempts = 5;\n    const lockoutDuration = 30 * 60 * 1000; // 30 minutes\n\n    const updateData: any = {\n      failedLoginCount: newFailedCount,\n    };\n\n    if (newFailedCount >= maxAttempts) {\n      updateData.lockoutUntil = new Date(Date.now() + lockoutDuration);\n    }\n\n    await this.prisma.user.update({\n      where: { id: userId },\n      data: updateData,\n    });\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}