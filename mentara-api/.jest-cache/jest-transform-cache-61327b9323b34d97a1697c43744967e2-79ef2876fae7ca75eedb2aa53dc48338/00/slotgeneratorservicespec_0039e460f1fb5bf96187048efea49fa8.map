{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/booking/services/slot-generator.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/booking/services/slot-generator.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { SlotGeneratorService, TimeSlot, SlotGenerationConfig } from './slot-generator.service';\nimport { PrismaService } from '../../providers/prisma-client.provider';\nimport { BadRequestException } from '@nestjs/common';\n\ndescribe('SlotGeneratorService', () => {\n  let service: SlotGeneratorService;\n  let prismaService: jest.Mocked<PrismaService>;\n\n  const mockTherapistAvailability = {\n    id: 'availability-123',\n    therapistId: 'therapist-123',\n    dayOfWeek: 1, // Monday\n    startTime: '09:00',\n    endTime: '17:00',\n    isAvailable: true,\n    notes: 'Available for sessions',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  const mockExistingMeeting = {\n    id: 'meeting-123',\n    therapistId: 'therapist-123',\n    clientId: 'client-123',\n    startTime: new Date('2024-01-15T10:00:00Z'),\n    endTime: new Date('2024-01-15T11:00:00Z'),\n    duration: 60,\n    status: 'SCHEDULED',\n    title: 'Therapy Session',\n    description: 'Regular therapy session',\n    meetingType: 'video',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  const mockSlotGenerationConfig: SlotGenerationConfig = {\n    slotInterval: 30,\n    maxAdvanceBooking: 90,\n    minAdvanceBooking: 2,\n  };\n\n  beforeEach(async () => {\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        SlotGeneratorService,\n        {\n          provide: PrismaService,\n          useValue: {\n            therapistAvailability: {\n              findMany: jest.fn(),\n            },\n            meeting: {\n              findMany: jest.fn(),\n            },\n          },\n        },\n      ],\n    }).compile();\n\n    service = module.get<SlotGeneratorService>(SlotGeneratorService);\n    prismaService = module.get(PrismaService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('generateAvailableSlots', () => {\n    it('should generate available slots for a therapist', async () => {\n      const targetDate = '2024-01-15'; // Monday\n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      expect(result.length).toBeGreaterThan(0);\n      expect(result[0]).toHaveProperty('startTime');\n      expect(result[0]).toHaveProperty('availableDurations');\n      expect(result[0].availableDurations).toBeInstanceOf(Array);\n      expect(result[0].availableDurations.length).toBeGreaterThan(0);\n    });\n\n    it('should return empty array when therapist has no availability', async () => {\n      const targetDate = '2024-01-15';\n      prismaService.therapistAvailability.findMany.mockResolvedValue([]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toEqual([]);\n    });\n\n    it('should exclude slots that conflict with existing meetings', async () => {\n      const targetDate = '2024-01-15'; // Monday\n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([mockExistingMeeting]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      // Should have slots but not at the conflicting time\n      expect(result).toBeInstanceOf(Array);\n      const conflictingSlot = result.find(slot => \n        new Date(slot.startTime).getTime() === mockExistingMeeting.startTime.getTime()\n      );\n      expect(conflictingSlot).toBeUndefined();\n    });\n\n    it('should apply custom slot generation config', async () => {\n      const targetDate = '2024-01-15';\n      const customConfig: Partial<SlotGenerationConfig> = {\n        slotInterval: 60,\n        maxAdvanceBooking: 30,\n        minAdvanceBooking: 1,\n      };\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate, customConfig);\n\n      expect(result).toBeInstanceOf(Array);\n      // With 60-minute intervals, should have fewer slots than default 30-minute intervals\n    });\n\n    it('should sort slots by start time', async () => {\n      const targetDate = '2024-01-15';\n      const multipleAvailability = [\n        { ...mockTherapistAvailability, startTime: '14:00', endTime: '16:00' },\n        { ...mockTherapistAvailability, startTime: '09:00', endTime: '11:00' },\n      ];\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue(multipleAvailability);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      if (result.length > 1) {\n        for (let i = 1; i < result.length; i++) {\n          expect(new Date(result[i].startTime).getTime()).toBeGreaterThanOrEqual(\n            new Date(result[i - 1].startTime).getTime()\n          );\n        }\n      }\n    });\n\n    it('should validate booking date is within allowed range', async () => {\n      const pastDate = new Date();\n      pastDate.setDate(pastDate.getDate() - 1);\n      const pastDateStr = pastDate.toISOString().split('T')[0];\n\n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      await expect(\n        service.generateAvailableSlots('therapist-123', pastDateStr)\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should reject dates too far in advance', async () => {\n      const farFutureDate = new Date();\n      farFutureDate.setDate(farFutureDate.getDate() + 100);\n      const farFutureDateStr = farFutureDate.toISOString().split('T')[0];\n\n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      await expect(\n        service.generateAvailableSlots('therapist-123', farFutureDateStr)\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle multiple availability windows', async () => {\n      const targetDate = '2024-01-15';\n      const multipleWindows = [\n        { ...mockTherapistAvailability, startTime: '09:00', endTime: '12:00' },\n        { ...mockTherapistAvailability, startTime: '14:00', endTime: '17:00' },\n      ];\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue(multipleWindows);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      expect(result.length).toBeGreaterThan(0);\n    });\n\n    it('should handle availability on different days of week', async () => {\n      const sundayDate = '2024-01-14'; // Sunday\n      const sundayAvailability = { ...mockTherapistAvailability, dayOfWeek: 0 };\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([sundayAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', sundayDate);\n\n      expect(result).toBeInstanceOf(Array);\n      expect(prismaService.therapistAvailability.findMany).toHaveBeenCalledWith({\n        where: {\n          therapistId: 'therapist-123',\n          dayOfWeek: 0,\n          isAvailable: true,\n        },\n        orderBy: { startTime: 'asc' },\n      });\n    });\n  });\n\n  describe('isSlotAvailable', () => {\n    it('should return true for available slot', async () => {\n      const startTime = new Date('2024-01-15T10:00:00Z');\n      const duration = 60;\n      \n      prismaService.therapistAvailability.findFirst.mockResolvedValue(mockTherapistAvailability);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.isSlotAvailable('therapist-123', startTime, duration);\n\n      expect(result).toBe(true);\n    });\n\n    it('should return false when therapist has no availability', async () => {\n      const startTime = new Date('2024-01-15T10:00:00Z');\n      const duration = 60;\n      \n      prismaService.therapistAvailability.findFirst.mockResolvedValue(null);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.isSlotAvailable('therapist-123', startTime, duration);\n\n      expect(result).toBe(false);\n    });\n\n    it('should return false when slot is outside availability window', async () => {\n      const startTime = new Date('2024-01-15T08:00:00Z'); // Before availability starts\n      const duration = 60;\n      \n      prismaService.therapistAvailability.findFirst.mockResolvedValue(mockTherapistAvailability);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.isSlotAvailable('therapist-123', startTime, duration);\n\n      expect(result).toBe(false);\n    });\n\n    it('should return false when slot extends beyond availability window', async () => {\n      const startTime = new Date('2024-01-15T16:30:00Z'); // Would end at 17:30, beyond availability\n      const duration = 60;\n      \n      prismaService.therapistAvailability.findFirst.mockResolvedValue(mockTherapistAvailability);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.isSlotAvailable('therapist-123', startTime, duration);\n\n      expect(result).toBe(false);\n    });\n\n    it('should return false when slot conflicts with existing meeting', async () => {\n      const startTime = new Date('2024-01-15T10:30:00Z'); // Overlaps with existing meeting\n      const duration = 60;\n      \n      prismaService.therapistAvailability.findFirst.mockResolvedValue(mockTherapistAvailability);\n      prismaService.meeting.findMany.mockResolvedValue([mockExistingMeeting]);\n\n      const result = await service.isSlotAvailable('therapist-123', startTime, duration);\n\n      expect(result).toBe(false);\n    });\n\n    it('should check for exact day of week match', async () => {\n      const tuesdayStartTime = new Date('2024-01-16T10:00:00Z'); // Tuesday\n      const duration = 60;\n      \n      prismaService.therapistAvailability.findFirst.mockResolvedValue(null);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.isSlotAvailable('therapist-123', tuesdayStartTime, duration);\n\n      expect(result).toBe(false);\n      expect(prismaService.therapistAvailability.findFirst).toHaveBeenCalledWith({\n        where: {\n          therapistId: 'therapist-123',\n          dayOfWeek: 2, // Tuesday\n          isAvailable: true,\n        },\n      });\n    });\n\n    it('should handle edge cases with exact time boundaries', async () => {\n      const startTime = new Date('2024-01-15T09:00:00Z'); // Exactly at start\n      const duration = 60;\n      \n      prismaService.therapistAvailability.findFirst.mockResolvedValue(mockTherapistAvailability);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.isSlotAvailable('therapist-123', startTime, duration);\n\n      expect(result).toBe(true);\n    });\n\n    it('should handle different durations', async () => {\n      const startTime = new Date('2024-01-15T10:00:00Z');\n      const longDuration = 120; // 2 hours\n      \n      prismaService.therapistAvailability.findFirst.mockResolvedValue(mockTherapistAvailability);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.isSlotAvailable('therapist-123', startTime, longDuration);\n\n      expect(result).toBe(true);\n    });\n  });\n\n  describe('private methods and edge cases', () => {\n    it('should handle time creation correctly', async () => {\n      const targetDate = '2024-01-15';\n      const availabilityWithSpecificTimes = {\n        ...mockTherapistAvailability,\n        startTime: '09:30',\n        endTime: '16:45',\n      };\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([availabilityWithSpecificTimes]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      // Should generate slots starting from 09:30\n      if (result.length > 0) {\n        const firstSlot = new Date(result[0].startTime);\n        expect(firstSlot.getHours()).toBe(9);\n        expect(firstSlot.getMinutes()).toBe(30);\n      }\n    });\n\n    it('should handle overlapping meetings correctly', async () => {\n      const targetDate = '2024-01-15';\n      const overlappingMeetings = [\n        {\n          ...mockExistingMeeting,\n          startTime: new Date('2024-01-15T10:00:00Z'),\n          endTime: new Date('2024-01-15T11:00:00Z'),\n        },\n        {\n          ...mockExistingMeeting,\n          id: 'meeting-456',\n          startTime: new Date('2024-01-15T10:45:00Z'),\n          endTime: new Date('2024-01-15T11:45:00Z'),\n        },\n      ];\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue(overlappingMeetings);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      // Should exclude slots that overlap with either meeting\n    });\n\n    it('should filter durations based on remaining availability', async () => {\n      const targetDate = '2024-01-15';\n      const shortAvailability = {\n        ...mockTherapistAvailability,\n        startTime: '16:00',\n        endTime: '16:45', // Only 45 minutes available\n      };\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([shortAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      if (result.length > 0) {\n        // Should not include 60, 90, or 120 minute durations\n        const lastSlot = result[result.length - 1];\n        const longDurations = lastSlot.availableDurations.filter(d => d.duration > 45);\n        expect(longDurations).toHaveLength(0);\n      }\n    });\n\n    it('should handle meetings with different statuses', async () => {\n      const targetDate = '2024-01-15';\n      const mixedStatusMeetings = [\n        { ...mockExistingMeeting, status: 'SCHEDULED' },\n        { ...mockExistingMeeting, id: 'meeting-456', status: 'CONFIRMED', startTime: new Date('2024-01-15T11:00:00Z') },\n        { ...mockExistingMeeting, id: 'meeting-789', status: 'CANCELLED', startTime: new Date('2024-01-15T12:00:00Z') },\n      ];\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue(mixedStatusMeetings);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      expect(prismaService.meeting.findMany).toHaveBeenCalledWith({\n        where: {\n          therapistId: 'therapist-123',\n          startTime: { gte: expect.any(Date), lte: expect.any(Date) },\n          status: { in: ['SCHEDULED', 'CONFIRMED'] },\n        },\n        orderBy: { startTime: 'asc' },\n      });\n    });\n\n    it('should handle day boundaries correctly', async () => {\n      const targetDate = '2024-01-15';\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(prismaService.meeting.findMany).toHaveBeenCalledWith({\n        where: {\n          therapistId: 'therapist-123',\n          startTime: { \n            gte: new Date('2024-01-15T00:00:00.000Z'), \n            lte: new Date('2024-01-15T23:59:59.999Z') \n          },\n          status: { in: ['SCHEDULED', 'CONFIRMED'] },\n        },\n        orderBy: { startTime: 'asc' },\n      });\n    });\n\n    it('should handle timezone considerations', async () => {\n      const targetDate = '2024-01-15';\n      const utcMeeting = {\n        ...mockExistingMeeting,\n        startTime: new Date('2024-01-15T15:00:00Z'), // 3 PM UTC\n        endTime: new Date('2024-01-15T16:00:00Z'),\n      };\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([utcMeeting]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      // Should properly handle UTC times\n    });\n  });\n\n  describe('error handling and validation', () => {\n    it('should validate minimum advance booking time', async () => {\n      const tooSoonDate = new Date();\n      tooSoonDate.setHours(tooSoonDate.getHours() + 1); // Only 1 hour advance\n      const tooSoonDateStr = tooSoonDate.toISOString().split('T')[0];\n\n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      await expect(\n        service.generateAvailableSlots('therapist-123', tooSoonDateStr)\n      ).rejects.toThrow(BadRequestException);\n      await expect(\n        service.generateAvailableSlots('therapist-123', tooSoonDateStr)\n      ).rejects.toThrow('at least 2 hours in advance');\n    });\n\n    it('should validate maximum advance booking time', async () => {\n      const tooFarDate = new Date();\n      tooFarDate.setDate(tooFarDate.getDate() + 100); // 100 days advance\n      const tooFarDateStr = tooFarDate.toISOString().split('T')[0];\n\n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      await expect(\n        service.generateAvailableSlots('therapist-123', tooFarDateStr)\n      ).rejects.toThrow(BadRequestException);\n      await expect(\n        service.generateAvailableSlots('therapist-123', tooFarDateStr)\n      ).rejects.toThrow('up to 90 days in advance');\n    });\n\n    it('should handle custom validation config', async () => {\n      const customDate = new Date();\n      customDate.setHours(customDate.getHours() + 0.5); // 30 minutes advance\n      const customDateStr = customDate.toISOString().split('T')[0];\n      \n      const customConfig: Partial<SlotGenerationConfig> = {\n        minAdvanceBooking: 0.25, // 15 minutes\n        maxAdvanceBooking: 7,    // 7 days\n      };\n\n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      await expect(\n        service.generateAvailableSlots('therapist-123', customDateStr, customConfig)\n      ).resolves.toBeInstanceOf(Array);\n    });\n\n    it('should handle database errors gracefully', async () => {\n      const targetDate = '2024-01-15';\n      \n      prismaService.therapistAvailability.findMany.mockRejectedValue(new Error('Database connection failed'));\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      await expect(\n        service.generateAvailableSlots('therapist-123', targetDate)\n      ).rejects.toThrow('Database connection failed');\n    });\n\n    it('should handle invalid date strings', async () => {\n      const invalidDate = 'invalid-date';\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      await expect(\n        service.generateAvailableSlots('therapist-123', invalidDate)\n      ).rejects.toThrow();\n    });\n  });\n\n  describe('integration tests', () => {\n    it('should generate realistic slot schedule', async () => {\n      const targetDate = '2024-01-15'; // Monday\n      const fullDayAvailability = {\n        ...mockTherapistAvailability,\n        startTime: '08:00',\n        endTime: '18:00',\n      };\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([fullDayAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      expect(result.length).toBeGreaterThan(10); // Should have many slots in a 10-hour day\n      \n      // Check that each slot has proper structure\n      result.forEach(slot => {\n        expect(slot).toHaveProperty('startTime');\n        expect(slot).toHaveProperty('availableDurations');\n        expect(slot.availableDurations).toBeInstanceOf(Array);\n        expect(slot.availableDurations.length).toBeGreaterThan(0);\n        \n        // Check duration structure\n        slot.availableDurations.forEach(duration => {\n          expect(duration).toHaveProperty('id');\n          expect(duration).toHaveProperty('name');\n          expect(duration).toHaveProperty('duration');\n          expect(typeof duration.duration).toBe('number');\n        });\n      });\n    });\n\n    it('should handle complex scheduling with multiple conflicts', async () => {\n      const targetDate = '2024-01-15';\n      const complexMeetings = [\n        {\n          ...mockExistingMeeting,\n          startTime: new Date('2024-01-15T09:00:00Z'),\n          endTime: new Date('2024-01-15T10:00:00Z'),\n        },\n        {\n          ...mockExistingMeeting,\n          id: 'meeting-456',\n          startTime: new Date('2024-01-15T11:30:00Z'),\n          endTime: new Date('2024-01-15T12:30:00Z'),\n        },\n        {\n          ...mockExistingMeeting,\n          id: 'meeting-789',\n          startTime: new Date('2024-01-15T14:00:00Z'),\n          endTime: new Date('2024-01-15T15:30:00Z'),\n        },\n      ];\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([mockTherapistAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue(complexMeetings);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      // Should have gaps between meetings available\n      const slotsAt10AM = result.filter(slot => {\n        const slotTime = new Date(slot.startTime);\n        return slotTime.getHours() === 10 && slotTime.getMinutes() === 0;\n      });\n      expect(slotsAt10AM.length).toBeGreaterThan(0);\n    });\n\n    it('should handle edge cases with availability boundaries', async () => {\n      const targetDate = '2024-01-15';\n      const edgeCaseAvailability = {\n        ...mockTherapistAvailability,\n        startTime: '09:15',\n        endTime: '17:45',\n      };\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue([edgeCaseAvailability]);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      if (result.length > 0) {\n        const firstSlot = new Date(result[0].startTime);\n        expect(firstSlot.getHours()).toBe(9);\n        expect(firstSlot.getMinutes()).toBe(15);\n      }\n    });\n\n    it('should handle performance with many availability windows', async () => {\n      const targetDate = '2024-01-15';\n      const manyWindows = Array.from({ length: 10 }, (_, i) => ({\n        ...mockTherapistAvailability,\n        id: `availability-${i}`,\n        startTime: `${9 + i}:00`,\n        endTime: `${10 + i}:00`,\n      }));\n      \n      prismaService.therapistAvailability.findMany.mockResolvedValue(manyWindows);\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.generateAvailableSlots('therapist-123', targetDate);\n\n      expect(result).toBeInstanceOf(Array);\n      expect(result.length).toBeGreaterThan(0);\n    });\n  });\n});"],"version":3}