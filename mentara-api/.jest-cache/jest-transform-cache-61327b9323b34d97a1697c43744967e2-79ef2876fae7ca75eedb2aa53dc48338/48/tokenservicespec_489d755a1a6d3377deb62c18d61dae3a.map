{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/services/token.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/services/token.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { JwtService } from '@nestjs/jwt';\nimport { TokenService, TokenPair } from './token.service';\nimport { PrismaService } from '../../providers/prisma-client.provider';\nimport { UnauthorizedException } from '@nestjs/common';\nimport * as crypto from 'crypto';\nimport * as bcrypt from 'bcrypt';\n\njest.mock('crypto');\njest.mock('bcrypt');\n\ndescribe('TokenService', () => {\n  let service: TokenService;\n  let jwtService: jest.Mocked<JwtService>;\n  let prismaService: jest.Mocked<PrismaService>;\n\n  const mockUser = {\n    id: 'user-123',\n    email: 'test@example.com',\n    firstName: 'John',\n    lastName: 'Doe',\n    role: 'client',\n    emailVerified: true,\n    deactivatedAt: null,\n    lockoutUntil: null,\n    failedLoginCount: 0,\n    lastLoginAt: null,\n  };\n\n  const mockRefreshToken = {\n    id: 'token-123',\n    token: 'hashed-token',\n    userId: 'user-123',\n    expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\n    createdAt: new Date(),\n    lastActivity: new Date(),\n    revokedAt: null,\n    ipAddress: '192.168.1.1',\n    userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\n    deviceName: 'Windows PC',\n    location: 'Unknown Location',\n    user: mockUser,\n  };\n\n  const mockJwtPayload = {\n    sub: 'user-123',\n    email: 'test@example.com',\n    role: 'client',\n    iat: Math.floor(Date.now() / 1000),\n    exp: Math.floor(Date.now() / 1000) + 3600,\n  };\n\n  beforeEach(async () => {\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        TokenService,\n        {\n          provide: JwtService,\n          useValue: {\n            sign: jest.fn(),\n            verify: jest.fn(),\n          },\n        },\n        {\n          provide: PrismaService,\n          useValue: {\n            refreshToken: {\n              create: jest.fn(),\n              findUnique: jest.fn(),\n              findFirst: jest.fn(),\n              findMany: jest.fn(),\n              update: jest.fn(),\n              updateMany: jest.fn(),\n              delete: jest.fn(),\n              deleteMany: jest.fn(),\n            },\n            user: {\n              findUnique: jest.fn(),\n              update: jest.fn(),\n            },\n          },\n        },\n      ],\n    }).compile();\n\n    service = module.get<TokenService>(TokenService);\n    jwtService = module.get(JwtService);\n    prismaService = module.get(PrismaService);\n\n    // Setup crypto mock\n    (crypto.randomBytes as jest.Mock).mockImplementation((size: number) => {\n      return Buffer.from('a'.repeat(size * 2), 'hex');\n    });\n\n    (crypto.createHash as jest.Mock).mockImplementation(() => ({\n      update: jest.fn().mockReturnThis(),\n      digest: jest.fn().mockReturnValue('mocked-hash'),\n    }));\n\n    // Setup bcrypt mock\n    (bcrypt.hash as jest.Mock).mockResolvedValue('hashed-password');\n    (bcrypt.compare as jest.Mock).mockResolvedValue(true);\n\n    // Setup environment variables\n    process.env.JWT_EXPIRES_IN = '1h';\n    process.env.JWT_REFRESH_EXPIRES_IN = '7d';\n    process.env.BCRYPT_SALT_ROUNDS = '12';\n    process.env.MAX_LOGIN_ATTEMPTS = '5';\n    process.env.LOCKOUT_DURATION_MINUTES = '15';\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('generateTokenPair', () => {\n    it('should generate access and refresh tokens successfully', async () => {\n      const expectedTokenPair = {\n        accessToken: 'access-token',\n        refreshToken: 'refresh-token',\n        expiresIn: '1h',\n      };\n\n      jwtService.sign.mockReturnValue('access-token');\n      prismaService.refreshToken.create.mockResolvedValue(mockRefreshToken);\n\n      const result = await service.generateTokenPair(\n        'user-123',\n        'test@example.com',\n        'client',\n        '192.168.1.1',\n        'Mozilla/5.0',\n      );\n\n      expect(result).toEqual(expectedTokenPair);\n      expect(jwtService.sign).toHaveBeenCalledWith(\n        {\n          sub: 'user-123',\n          email: 'test@example.com',\n          role: 'client',\n        },\n        { expiresIn: '1h' },\n      );\n      expect(prismaService.refreshToken.create).toHaveBeenCalled();\n    });\n\n    it('should generate token pair with default expiration when env not set', async () => {\n      delete process.env.JWT_EXPIRES_IN;\n      jwtService.sign.mockReturnValue('access-token');\n      prismaService.refreshToken.create.mockResolvedValue(mockRefreshToken);\n\n      const result = await service.generateTokenPair(\n        'user-123',\n        'test@example.com',\n        'client',\n      );\n\n      expect(result.expiresIn).toBe('1h');\n    });\n  });\n\n  describe('refreshAccessToken', () => {\n    it('should refresh access token successfully', async () => {\n      const refreshToken = 'refresh-token';\n      const newTokenPair = {\n        accessToken: 'new-access-token',\n        refreshToken: 'new-refresh-token',\n        expiresIn: '1h',\n      };\n\n      prismaService.refreshToken.findUnique.mockResolvedValue(mockRefreshToken);\n      prismaService.refreshToken.update.mockResolvedValue(mockRefreshToken);\n      jwtService.sign.mockReturnValue('new-access-token');\n      prismaService.refreshToken.create.mockResolvedValue({\n        ...mockRefreshToken,\n        token: 'new-hashed-token',\n      });\n\n      const result = await service.refreshAccessToken(\n        refreshToken,\n        '192.168.1.1',\n        'Mozilla/5.0',\n      );\n\n      expect(result).toEqual(newTokenPair);\n      expect(prismaService.refreshToken.update).toHaveBeenCalledWith({\n        where: { id: mockRefreshToken.id },\n        data: { revokedAt: expect.any(Date) },\n      });\n    });\n\n    it('should throw UnauthorizedException for invalid refresh token', async () => {\n      const refreshToken = 'invalid-token';\n      prismaService.refreshToken.findUnique.mockResolvedValue(null);\n\n      await expect(\n        service.refreshAccessToken(refreshToken),\n      ).rejects.toThrow(UnauthorizedException);\n    });\n\n    it('should throw UnauthorizedException for expired refresh token', async () => {\n      const refreshToken = 'expired-token';\n      const expiredToken = {\n        ...mockRefreshToken,\n        expiresAt: new Date(Date.now() - 1000),\n      };\n\n      prismaService.refreshToken.findUnique.mockResolvedValue(expiredToken);\n      prismaService.refreshToken.delete.mockResolvedValue(expiredToken);\n\n      await expect(\n        service.refreshAccessToken(refreshToken),\n      ).rejects.toThrow(UnauthorizedException);\n\n      expect(prismaService.refreshToken.delete).toHaveBeenCalledWith({\n        where: { id: expiredToken.id },\n      });\n    });\n\n    it('should throw UnauthorizedException for revoked refresh token', async () => {\n      const refreshToken = 'revoked-token';\n      const revokedToken = {\n        ...mockRefreshToken,\n        revokedAt: new Date(),\n      };\n\n      prismaService.refreshToken.findUnique.mockResolvedValue(revokedToken);\n\n      await expect(\n        service.refreshAccessToken(refreshToken),\n      ).rejects.toThrow(UnauthorizedException);\n    });\n\n    it('should throw UnauthorizedException for deactivated user', async () => {\n      const refreshToken = 'valid-token';\n      const tokenWithDeactivatedUser = {\n        ...mockRefreshToken,\n        user: { ...mockUser, deactivatedAt: new Date() },\n      };\n\n      prismaService.refreshToken.findUnique.mockResolvedValue(tokenWithDeactivatedUser);\n\n      await expect(\n        service.refreshAccessToken(refreshToken),\n      ).rejects.toThrow(UnauthorizedException);\n    });\n  });\n\n  describe('revokeRefreshToken', () => {\n    it('should revoke refresh token successfully', async () => {\n      const refreshToken = 'refresh-token';\n      prismaService.refreshToken.updateMany.mockResolvedValue({ count: 1 });\n\n      await service.revokeRefreshToken(refreshToken);\n\n      expect(prismaService.refreshToken.updateMany).toHaveBeenCalledWith({\n        where: {\n          token: 'mocked-hash',\n          revokedAt: null,\n        },\n        data: { revokedAt: expect.any(Date) },\n      });\n    });\n  });\n\n  describe('revokeAllUserTokens', () => {\n    it('should revoke all user tokens successfully', async () => {\n      const userId = 'user-123';\n      prismaService.refreshToken.updateMany.mockResolvedValue({ count: 3 });\n\n      await service.revokeAllUserTokens(userId);\n\n      expect(prismaService.refreshToken.updateMany).toHaveBeenCalledWith({\n        where: {\n          userId,\n          revokedAt: null,\n        },\n        data: { revokedAt: expect.any(Date) },\n      });\n    });\n  });\n\n  describe('cleanupExpiredTokens', () => {\n    it('should clean up expired and revoked tokens', async () => {\n      prismaService.refreshToken.deleteMany.mockResolvedValue({ count: 5 });\n\n      await service.cleanupExpiredTokens();\n\n      expect(prismaService.refreshToken.deleteMany).toHaveBeenCalledWith({\n        where: {\n          OR: [\n            { expiresAt: { lt: expect.any(Date) } },\n            { revokedAt: { not: null } },\n          ],\n        },\n      });\n    });\n  });\n\n  describe('hashPassword', () => {\n    it('should hash password successfully', async () => {\n      const password = 'password123';\n      const hashedPassword = 'hashed-password';\n      (bcrypt.hash as jest.Mock).mockResolvedValue(hashedPassword);\n\n      const result = await service.hashPassword(password);\n\n      expect(result).toBe(hashedPassword);\n      expect(bcrypt.hash).toHaveBeenCalledWith(password, 12);\n    });\n\n    it('should use default salt rounds when env not set', async () => {\n      delete process.env.BCRYPT_SALT_ROUNDS;\n      const password = 'password123';\n\n      await service.hashPassword(password);\n\n      expect(bcrypt.hash).toHaveBeenCalledWith(password, 12);\n    });\n  });\n\n  describe('comparePassword', () => {\n    it('should compare password successfully', async () => {\n      const password = 'password123';\n      const hashedPassword = 'hashed-password';\n      (bcrypt.compare as jest.Mock).mockResolvedValue(true);\n\n      const result = await service.comparePassword(password, hashedPassword);\n\n      expect(result).toBe(true);\n      expect(bcrypt.compare).toHaveBeenCalledWith(password, hashedPassword);\n    });\n\n    it('should return false for invalid password', async () => {\n      const password = 'wrong-password';\n      const hashedPassword = 'hashed-password';\n      (bcrypt.compare as jest.Mock).mockResolvedValue(false);\n\n      const result = await service.comparePassword(password, hashedPassword);\n\n      expect(result).toBe(false);\n    });\n  });\n\n  describe('generateEmailVerificationToken', () => {\n    it('should generate email verification token successfully', async () => {\n      const result = await service.generateEmailVerificationToken();\n\n      expect(result).toEqual({\n        token: expect.any(String),\n        hashedToken: 'mocked-hash',\n        expiresAt: expect.any(Date),\n      });\n      expect(crypto.randomBytes).toHaveBeenCalledWith(32);\n    });\n  });\n\n  describe('generatePasswordResetToken', () => {\n    it('should generate password reset token successfully', async () => {\n      const result = await service.generatePasswordResetToken();\n\n      expect(result).toEqual({\n        token: expect.any(String),\n        hashedToken: 'mocked-hash',\n        expiresAt: expect.any(Date),\n      });\n      expect(crypto.randomBytes).toHaveBeenCalledWith(32);\n    });\n  });\n\n  describe('checkAccountLockout', () => {\n    it('should return false for non-locked account', async () => {\n      const userId = 'user-123';\n      prismaService.user.findUnique.mockResolvedValue({\n        lockoutUntil: null,\n        failedLoginCount: 2,\n      });\n\n      const result = await service.checkAccountLockout(userId);\n\n      expect(result).toBe(false);\n    });\n\n    it('should return true for locked account', async () => {\n      const userId = 'user-123';\n      prismaService.user.findUnique.mockResolvedValue({\n        lockoutUntil: new Date(Date.now() + 10 * 60 * 1000),\n        failedLoginCount: 5,\n      });\n\n      const result = await service.checkAccountLockout(userId);\n\n      expect(result).toBe(true);\n    });\n\n    it('should clear expired lockout', async () => {\n      const userId = 'user-123';\n      prismaService.user.findUnique.mockResolvedValue({\n        lockoutUntil: new Date(Date.now() - 1000),\n        failedLoginCount: 5,\n      });\n      prismaService.user.update.mockResolvedValue(mockUser);\n\n      const result = await service.checkAccountLockout(userId);\n\n      expect(result).toBe(false);\n      expect(prismaService.user.update).toHaveBeenCalledWith({\n        where: { id: userId },\n        data: {\n          lockoutUntil: null,\n          failedLoginCount: 0,\n        },\n      });\n    });\n\n    it('should return false for non-existent user', async () => {\n      const userId = 'non-existent';\n      prismaService.user.findUnique.mockResolvedValue(null);\n\n      const result = await service.checkAccountLockout(userId);\n\n      expect(result).toBe(false);\n    });\n  });\n\n  describe('handleFailedLogin', () => {\n    it('should increment failed login count', async () => {\n      const userId = 'user-123';\n      prismaService.user.findUnique.mockResolvedValue({\n        failedLoginCount: 2,\n      });\n      prismaService.user.update.mockResolvedValue(mockUser);\n\n      await service.handleFailedLogin(userId);\n\n      expect(prismaService.user.update).toHaveBeenCalledWith({\n        where: { id: userId },\n        data: { failedLoginCount: 3 },\n      });\n    });\n\n    it('should lock account after max failed attempts', async () => {\n      const userId = 'user-123';\n      prismaService.user.findUnique.mockResolvedValue({\n        failedLoginCount: 4,\n      });\n      prismaService.user.update.mockResolvedValue(mockUser);\n\n      await service.handleFailedLogin(userId);\n\n      expect(prismaService.user.update).toHaveBeenCalledWith({\n        where: { id: userId },\n        data: {\n          failedLoginCount: 5,\n          lockoutUntil: expect.any(Date),\n        },\n      });\n    });\n\n    it('should handle non-existent user gracefully', async () => {\n      const userId = 'non-existent';\n      prismaService.user.findUnique.mockResolvedValue(null);\n\n      await expect(service.handleFailedLogin(userId)).resolves.not.toThrow();\n    });\n  });\n\n  describe('resetFailedLoginCount', () => {\n    it('should reset failed login count and update last login', async () => {\n      const userId = 'user-123';\n      prismaService.user.update.mockResolvedValue(mockUser);\n\n      await service.resetFailedLoginCount(userId);\n\n      expect(prismaService.user.update).toHaveBeenCalledWith({\n        where: { id: userId },\n        data: {\n          failedLoginCount: 0,\n          lockoutUntil: null,\n          lastLoginAt: expect.any(Date),\n        },\n      });\n    });\n  });\n\n  describe('validateToken', () => {\n    it('should validate token successfully', async () => {\n      jwtService.verify.mockReturnValue(mockJwtPayload);\n\n      const result = await service.validateToken('valid-token');\n\n      expect(result).toEqual({\n        valid: true,\n        payload: mockJwtPayload,\n        expires: expect.any(String),\n      });\n    });\n\n    it('should return invalid for expired token', async () => {\n      const expiredPayload = {\n        ...mockJwtPayload,\n        exp: Math.floor(Date.now() / 1000) - 1000,\n      };\n      jwtService.verify.mockReturnValue(expiredPayload);\n\n      const result = await service.validateToken('expired-token');\n\n      expect(result).toEqual({\n        valid: false,\n        error: 'Token has expired',\n      });\n    });\n\n    it('should return invalid for malformed token', async () => {\n      jwtService.verify.mockImplementation(() => {\n        throw new Error('Invalid token');\n      });\n\n      const result = await service.validateToken('invalid-token');\n\n      expect(result).toEqual({\n        valid: false,\n        error: 'Invalid token',\n      });\n    });\n  });\n\n  describe('getSessionInfo', () => {\n    it('should return session info successfully', async () => {\n      prismaService.refreshToken.findUnique.mockResolvedValue(mockRefreshToken);\n\n      const result = await service.getSessionInfo('refresh-token');\n\n      expect(result).toEqual({\n        sessionId: mockRefreshToken.id,\n        createdAt: mockRefreshToken.createdAt.toISOString(),\n        lastActivity: mockRefreshToken.lastActivity.toISOString(),\n        device: mockRefreshToken.deviceName,\n        location: mockRefreshToken.location,\n        ipAddress: mockRefreshToken.ipAddress,\n        userAgent: mockRefreshToken.userAgent,\n      });\n    });\n\n    it('should return null for invalid session', async () => {\n      prismaService.refreshToken.findUnique.mockResolvedValue(null);\n\n      const result = await service.getSessionInfo('invalid-token');\n\n      expect(result).toBeNull();\n    });\n\n    it('should return null for expired session', async () => {\n      const expiredSession = {\n        ...mockRefreshToken,\n        expiresAt: new Date(Date.now() - 1000),\n      };\n      prismaService.refreshToken.findUnique.mockResolvedValue(expiredSession);\n\n      const result = await service.getSessionInfo('expired-token');\n\n      expect(result).toBeNull();\n    });\n  });\n\n  describe('getActiveSessions', () => {\n    it('should return active sessions for user', async () => {\n      const sessions = [mockRefreshToken];\n      prismaService.refreshToken.findMany.mockResolvedValue(sessions);\n\n      const result = await service.getActiveSessions('user-123');\n\n      expect(result.sessions).toHaveLength(1);\n      expect(result.sessions[0]).toEqual({\n        id: mockRefreshToken.id,\n        device: mockRefreshToken.deviceName,\n        location: mockRefreshToken.location,\n        lastActivity: mockRefreshToken.lastActivity.toISOString(),\n        isCurrent: false,\n        ipAddress: mockRefreshToken.ipAddress,\n        userAgent: mockRefreshToken.userAgent,\n        createdAt: mockRefreshToken.createdAt.toISOString(),\n      });\n    });\n\n    it('should mark current session correctly', async () => {\n      const sessions = [mockRefreshToken];\n      prismaService.refreshToken.findMany.mockResolvedValue(sessions);\n\n      const result = await service.getActiveSessions('user-123', 'current-token');\n\n      expect(result.sessions[0].isCurrent).toBe(true);\n    });\n  });\n\n  describe('terminateSession', () => {\n    it('should terminate session successfully', async () => {\n      const sessionId = 'session-123';\n      const userId = 'user-123';\n      prismaService.refreshToken.findFirst.mockResolvedValue(mockRefreshToken);\n      prismaService.refreshToken.update.mockResolvedValue(mockRefreshToken);\n\n      const result = await service.terminateSession(sessionId, userId);\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Session terminated successfully',\n      });\n      expect(prismaService.refreshToken.update).toHaveBeenCalledWith({\n        where: { id: sessionId },\n        data: { revokedAt: expect.any(Date) },\n      });\n    });\n\n    it('should handle non-existent session', async () => {\n      const sessionId = 'non-existent';\n      const userId = 'user-123';\n      prismaService.refreshToken.findFirst.mockResolvedValue(null);\n\n      const result = await service.terminateSession(sessionId, userId);\n\n      expect(result).toEqual({\n        success: false,\n        message: 'Session not found or already terminated',\n      });\n    });\n  });\n\n  describe('terminateOtherSessions', () => {\n    it('should terminate other sessions successfully', async () => {\n      const userId = 'user-123';\n      prismaService.refreshToken.updateMany.mockResolvedValue({ count: 2 });\n\n      const result = await service.terminateOtherSessions(userId);\n\n      expect(result).toEqual({\n        success: true,\n        terminatedCount: 2,\n        message: '2 sessions terminated successfully',\n      });\n    });\n\n    it('should exclude current session when provided', async () => {\n      const userId = 'user-123';\n      const currentToken = 'current-token';\n      prismaService.refreshToken.updateMany.mockResolvedValue({ count: 1 });\n\n      const result = await service.terminateOtherSessions(userId, currentToken);\n\n      expect(result.terminatedCount).toBe(1);\n      expect(prismaService.refreshToken.updateMany).toHaveBeenCalledWith({\n        where: {\n          userId,\n          revokedAt: null,\n          token: { not: 'mocked-hash' },\n        },\n        data: { revokedAt: expect.any(Date) },\n      });\n    });\n  });\n\n  describe('updateSessionActivity', () => {\n    it('should update session activity successfully', async () => {\n      const refreshToken = 'refresh-token';\n      prismaService.refreshToken.updateMany.mockResolvedValue({ count: 1 });\n\n      await service.updateSessionActivity(refreshToken);\n\n      expect(prismaService.refreshToken.updateMany).toHaveBeenCalledWith({\n        where: {\n          token: 'mocked-hash',\n          revokedAt: null,\n        },\n        data: {\n          lastActivity: expect.any(Date),\n        },\n      });\n    });\n  });\n\n  describe('extractDeviceInfo', () => {\n    it('should extract Android device info', () => {\n      const userAgent = 'Mozilla/5.0 (Linux; Android 10; SM-G973F) AppleWebKit/537.36';\n      const result = (service as any).extractDeviceInfo(userAgent);\n      expect(result).toBe('Android Device');\n    });\n\n    it('should extract iPhone device info', () => {\n      const userAgent = 'Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1 like Mac OS X) AppleWebKit/605.1.15';\n      const result = (service as any).extractDeviceInfo(userAgent);\n      expect(result).toBe('iPhone');\n    });\n\n    it('should extract Windows PC info', () => {\n      const userAgent = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36';\n      const result = (service as any).extractDeviceInfo(userAgent);\n      expect(result).toBe('Windows PC');\n    });\n\n    it('should extract Mac info', () => {\n      const userAgent = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36';\n      const result = (service as any).extractDeviceInfo(userAgent);\n      expect(result).toBe('Mac');\n    });\n\n    it('should return Unknown Device for undefined userAgent', () => {\n      const result = (service as any).extractDeviceInfo(undefined);\n      expect(result).toBe('Unknown Device');\n    });\n  });\n\n  describe('getLocationFromIP', () => {\n    it('should return Local for localhost IP', async () => {\n      const result = await (service as any).getLocationFromIP('127.0.0.1');\n      expect(result).toBe('Local');\n    });\n\n    it('should return Local for IPv6 localhost', async () => {\n      const result = await (service as any).getLocationFromIP('::1');\n      expect(result).toBe('Local');\n    });\n\n    it('should return Unknown Location for other IPs', async () => {\n      const result = await (service as any).getLocationFromIP('192.168.1.1');\n      expect(result).toBe('Unknown Location');\n    });\n\n    it('should return Unknown Location for undefined IP', async () => {\n      const result = await (service as any).getLocationFromIP(undefined);\n      expect(result).toBe('Local');\n    });\n  });\n});"],"version":3}