{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/audit-logs/audit-logs.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/audit-logs/audit-logs.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { AuditLogsService } from './audit-logs.service';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport {\n  AuditAction,\n  EventSeverity,\n  SystemEventType,\n  DataClassification,\n} from '@prisma/client';\nimport { createMockPrismaService, TEST_USER_IDS } from '../test-utils';\n\ndescribe('AuditLogsService', () => {\n  let service: AuditLogsService;\n  let prismaService: jest.Mocked<PrismaService>;\n\n  beforeEach(async () => {\n    const mockPrisma = createMockPrismaService();\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        AuditLogsService,\n        {\n          provide: PrismaService,\n          useValue: mockPrisma,\n        },\n      ],\n    }).compile();\n\n    service = module.get<AuditLogsService>(AuditLogsService);\n    prismaService = module.get(PrismaService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('createAuditLog', () => {\n    const mockAuditData = {\n      action: AuditAction.USER_LOGIN,\n      entity: 'User',\n      entityId: TEST_USER_IDS.CLIENT,\n      userId: TEST_USER_IDS.CLIENT,\n      description: 'User logged in',\n      ipAddress: '192.168.1.1',\n      userAgent: 'Mozilla/5.0',\n    };\n\n    const mockUser = {\n      id: TEST_USER_IDS.CLIENT,\n      firstName: 'John',\n      lastName: 'Doe',\n      email: 'john@example.com',\n      role: 'client',\n    };\n\n    it('should successfully create an audit log', async () => {\n      const expectedResult = {\n        id: 'audit-log-id',\n        ...mockAuditData,\n        createdAt: new Date(),\n        user: mockUser,\n      };\n\n      (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n        expectedResult,\n      );\n\n      const result = await service.createAuditLog(mockAuditData);\n\n      expect(result).toEqual(expectedResult);\n      expect(prismaService.auditLog.create).toHaveBeenCalledWith({\n        data: mockAuditData,\n        include: {\n          user: {\n            select: {\n              id: true,\n              firstName: true,\n              lastName: true,\n              email: true,\n              role: true,\n            },\n          },\n        },\n      });\n    });\n\n    it('should create audit log without optional fields', async () => {\n      const minimalData = {\n        action: AuditAction.USER_LOGOUT,\n        entity: 'User',\n        entityId: TEST_USER_IDS.CLIENT,\n      };\n\n      const expectedResult = {\n        id: 'audit-log-id',\n        ...minimalData,\n        createdAt: new Date(),\n        user: null,\n      };\n\n      (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n        expectedResult,\n      );\n\n      const result = await service.createAuditLog(minimalData);\n\n      expect(result).toEqual(expectedResult);\n      expect(prismaService.auditLog.create).toHaveBeenCalledWith({\n        data: minimalData,\n        include: {\n          user: {\n            select: {\n              id: true,\n              firstName: true,\n              lastName: true,\n              email: true,\n              role: true,\n            },\n          },\n        },\n      });\n    });\n\n    it('should handle audit log with old and new values', async () => {\n      const auditDataWithChanges = {\n        ...mockAuditData,\n        action: AuditAction.USER_UPDATE_PROFILE,\n        oldValues: { name: 'Old Name' },\n        newValues: { name: 'New Name' },\n        metadata: { sessionId: 'session-123' },\n      };\n\n      const expectedResult = {\n        id: 'audit-log-id',\n        ...auditDataWithChanges,\n        createdAt: new Date(),\n        user: mockUser,\n      };\n\n      (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n        expectedResult,\n      );\n\n      const result = await service.createAuditLog(auditDataWithChanges);\n\n      expect(result).toEqual(expectedResult);\n      expect(prismaService.auditLog.create).toHaveBeenCalledWith({\n        data: auditDataWithChanges,\n        include: expect.any(Object),\n      });\n    });\n  });\n\n  describe('findAuditLogs', () => {\n    const mockAuditLogs = [\n      {\n        id: 'audit-1',\n        action: AuditAction.USER_LOGIN,\n        entity: 'User',\n        entityId: TEST_USER_IDS.CLIENT,\n        createdAt: new Date(),\n        user: {\n          id: TEST_USER_IDS.CLIENT,\n          firstName: 'John',\n          lastName: 'Doe',\n          email: 'john@example.com',\n          role: 'client',\n        },\n      },\n      {\n        id: 'audit-2',\n        action: AuditAction.USER_LOGOUT,\n        entity: 'User',\n        entityId: TEST_USER_IDS.CLIENT,\n        createdAt: new Date(),\n        user: {\n          id: TEST_USER_IDS.CLIENT,\n          firstName: 'John',\n          lastName: 'Doe',\n          email: 'john@example.com',\n          role: 'client',\n        },\n      },\n    ];\n\n    it('should return all audit logs when no filters provided', async () => {\n      (prismaService.auditLog.findMany as jest.Mock).mockResolvedValue(\n        mockAuditLogs,\n      );\n\n      const result = await service.findAuditLogs();\n\n      expect(result).toEqual(mockAuditLogs);\n      expect(prismaService.auditLog.findMany).toHaveBeenCalledWith({\n        where: {},\n        include: {\n          user: {\n            select: {\n              id: true,\n              firstName: true,\n              lastName: true,\n              email: true,\n              role: true,\n            },\n          },\n        },\n        orderBy: { createdAt: 'desc' },\n        take: 100,\n      });\n    });\n\n    it('should filter audit logs by user ID', async () => {\n      (prismaService.auditLog.findMany as jest.Mock).mockResolvedValue([\n        mockAuditLogs[0],\n      ]);\n\n      const result = await service.findAuditLogs(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual([mockAuditLogs[0]]);\n      expect(prismaService.auditLog.findMany).toHaveBeenCalledWith({\n        where: { userId: TEST_USER_IDS.CLIENT },\n        include: expect.any(Object),\n        orderBy: { createdAt: 'desc' },\n        take: 100,\n      });\n    });\n\n    it('should filter audit logs by multiple criteria', async () => {\n      const startDate = new Date('2024-01-01');\n      const endDate = new Date('2024-01-31');\n\n      (prismaService.auditLog.findMany as jest.Mock).mockResolvedValue(\n        mockAuditLogs,\n      );\n\n      await service.findAuditLogs(\n        TEST_USER_IDS.CLIENT,\n        AuditAction.USER_LOGIN,\n        'User',\n        TEST_USER_IDS.CLIENT,\n        startDate,\n        endDate,\n        50,\n      );\n\n      expect(prismaService.auditLog.findMany).toHaveBeenCalledWith({\n        where: {\n          userId: TEST_USER_IDS.CLIENT,\n          action: AuditAction.USER_LOGIN,\n          entity: 'User',\n          entityId: TEST_USER_IDS.CLIENT,\n          createdAt: {\n            gte: startDate,\n            lte: endDate,\n          },\n        },\n        include: expect.any(Object),\n        orderBy: { createdAt: 'desc' },\n        take: 50,\n      });\n    });\n\n    it('should handle date range filters correctly', async () => {\n      const startDate = new Date('2024-01-01');\n\n      (prismaService.auditLog.findMany as jest.Mock).mockResolvedValue(\n        mockAuditLogs,\n      );\n\n      await service.findAuditLogs(\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        startDate,\n      );\n\n      expect(prismaService.auditLog.findMany).toHaveBeenCalledWith({\n        where: {\n          createdAt: { gte: startDate },\n        },\n        include: expect.any(Object),\n        orderBy: { createdAt: 'desc' },\n        take: 100,\n      });\n    });\n  });\n\n  describe('createSystemEvent', () => {\n    const mockSystemEventData = {\n      eventType: SystemEventType.THIRD_PARTY_API_ERROR,\n      severity: EventSeverity.ERROR,\n      title: 'API Error',\n      description: 'Third party API failed',\n      component: 'PaymentService',\n      metadata: { errorCode: 500 },\n      errorCode: 'PAY_001',\n      stackTrace: 'Error stack trace',\n    };\n\n    it('should successfully create a system event', async () => {\n      const expectedResult = {\n        id: 'system-event-id',\n        ...mockSystemEventData,\n        createdAt: new Date(),\n        isResolved: false,\n      };\n\n      (prismaService.systemEvent.create as jest.Mock).mockResolvedValue(\n        expectedResult,\n      );\n\n      const result = await service.createSystemEvent(mockSystemEventData);\n\n      expect(result).toEqual(expectedResult);\n      expect(prismaService.systemEvent.create).toHaveBeenCalledWith({\n        data: mockSystemEventData,\n      });\n    });\n\n    it('should create system event with minimal required fields', async () => {\n      const minimalData = {\n        eventType: SystemEventType.SERVICE_START,\n        severity: EventSeverity.INFO,\n        title: 'App Started',\n        description: 'Application started successfully',\n      };\n\n      const expectedResult = {\n        id: 'system-event-id',\n        ...minimalData,\n        createdAt: new Date(),\n        isResolved: false,\n      };\n\n      (prismaService.systemEvent.create as jest.Mock).mockResolvedValue(\n        expectedResult,\n      );\n\n      const result = await service.createSystemEvent(minimalData);\n\n      expect(result).toEqual(expectedResult);\n      expect(prismaService.systemEvent.create).toHaveBeenCalledWith({\n        data: minimalData,\n      });\n    });\n  });\n\n  describe('findSystemEvents', () => {\n    const mockSystemEvents = [\n      {\n        id: 'event-1',\n        eventType: SystemEventType.THIRD_PARTY_API_ERROR,\n        severity: EventSeverity.ERROR,\n        title: 'API Error',\n        description: 'Payment API failed',\n        createdAt: new Date(),\n        isResolved: false,\n      },\n      {\n        id: 'event-2',\n        eventType: SystemEventType.SERVICE_START,\n        severity: EventSeverity.INFO,\n        title: 'App Started',\n        description: 'Application started',\n        createdAt: new Date(),\n        isResolved: true,\n      },\n    ];\n\n    it('should return all system events when no filters provided', async () => {\n      (prismaService.systemEvent.findMany as jest.Mock).mockResolvedValue(\n        mockSystemEvents,\n      );\n\n      const result = await service.findSystemEvents();\n\n      expect(result).toEqual(mockSystemEvents);\n      expect(prismaService.systemEvent.findMany).toHaveBeenCalledWith({\n        where: {},\n        orderBy: { createdAt: 'desc' },\n        take: 100,\n      });\n    });\n\n    it('should filter system events by multiple criteria', async () => {\n      const startDate = new Date('2024-01-01');\n      const endDate = new Date('2024-01-31');\n\n      (prismaService.systemEvent.findMany as jest.Mock).mockResolvedValue([\n        mockSystemEvents[0],\n      ]);\n\n      await service.findSystemEvents(\n        SystemEventType.THIRD_PARTY_API_ERROR,\n        EventSeverity.ERROR,\n        'PaymentService',\n        false,\n        startDate,\n        endDate,\n        50,\n      );\n\n      expect(prismaService.systemEvent.findMany).toHaveBeenCalledWith({\n        where: {\n          eventType: SystemEventType.THIRD_PARTY_API_ERROR,\n          severity: EventSeverity.ERROR,\n          component: 'PaymentService',\n          isResolved: false,\n          createdAt: {\n            gte: startDate,\n            lte: endDate,\n          },\n        },\n        orderBy: { createdAt: 'desc' },\n        take: 50,\n      });\n    });\n\n    it('should handle boolean filter for isResolved', async () => {\n      (prismaService.systemEvent.findMany as jest.Mock).mockResolvedValue([\n        mockSystemEvents[1],\n      ]);\n\n      await service.findSystemEvents(undefined, undefined, undefined, true);\n\n      expect(prismaService.systemEvent.findMany).toHaveBeenCalledWith({\n        where: { isResolved: true },\n        orderBy: { createdAt: 'desc' },\n        take: 100,\n      });\n    });\n  });\n\n  describe('resolveSystemEvent', () => {\n    it('should successfully resolve a system event', async () => {\n      const resolvedEvent = {\n        id: 'event-id',\n        isResolved: true,\n        resolvedAt: new Date(),\n        resolvedBy: TEST_USER_IDS.ADMIN,\n        resolution: 'Fixed API endpoint',\n      };\n\n      (prismaService.systemEvent.update as jest.Mock).mockResolvedValue(\n        resolvedEvent,\n      );\n\n      const result = await service.resolveSystemEvent(\n        'event-id',\n        TEST_USER_IDS.ADMIN,\n        'Fixed API endpoint',\n      );\n\n      expect(result).toEqual(resolvedEvent);\n      expect(prismaService.systemEvent.update).toHaveBeenCalledWith({\n        where: { id: 'event-id' },\n        data: {\n          isResolved: true,\n          resolvedAt: expect.any(Date),\n          resolvedBy: TEST_USER_IDS.ADMIN,\n          resolution: 'Fixed API endpoint',\n        },\n      });\n    });\n  });\n\n  describe('createDataChangeLog', () => {\n    const mockDataChangeData = {\n      tableName: 'users',\n      recordId: TEST_USER_IDS.CLIENT,\n      operation: 'UPDATE' as const,\n      changedFields: ['firstName', 'lastName'],\n      oldData: { firstName: 'Old', lastName: 'Name' },\n      newData: { firstName: 'New', lastName: 'Name' },\n      changedBy: TEST_USER_IDS.ADMIN,\n      reason: 'Profile update',\n      dataClass: DataClassification.CONFIDENTIAL,\n    };\n\n    it('should successfully create a data change log', async () => {\n      const expectedResult = {\n        id: 'data-change-id',\n        ...mockDataChangeData,\n        createdAt: new Date(),\n      };\n\n      (prismaService.dataChangeLog.create as jest.Mock).mockResolvedValue(\n        expectedResult,\n      );\n\n      const result = await service.createDataChangeLog(mockDataChangeData);\n\n      expect(result).toEqual(expectedResult);\n      expect(prismaService.dataChangeLog.create).toHaveBeenCalledWith({\n        data: mockDataChangeData,\n      });\n    });\n\n    it('should default to INTERNAL data classification when not provided', async () => {\n      const dataWithoutClass = {\n        tableName: 'users',\n        recordId: TEST_USER_IDS.CLIENT,\n        operation: 'INSERT' as const,\n      };\n\n      const expectedResult = {\n        id: 'data-change-id',\n        ...dataWithoutClass,\n        dataClass: DataClassification.INTERNAL,\n        createdAt: new Date(),\n      };\n\n      (prismaService.dataChangeLog.create as jest.Mock).mockResolvedValue(\n        expectedResult,\n      );\n\n      const result = await service.createDataChangeLog(dataWithoutClass);\n\n      expect(result).toEqual(expectedResult);\n      expect(prismaService.dataChangeLog.create).toHaveBeenCalledWith({\n        data: {\n          ...dataWithoutClass,\n          dataClass: DataClassification.INTERNAL,\n        },\n      });\n    });\n  });\n\n  describe('findDataChangeLogs', () => {\n    const mockDataChangeLogs = [\n      {\n        id: 'change-1',\n        tableName: 'users',\n        recordId: TEST_USER_IDS.CLIENT,\n        operation: 'UPDATE',\n        createdAt: new Date(),\n      },\n      {\n        id: 'change-2',\n        tableName: 'meetings',\n        recordId: 'meeting-id',\n        operation: 'INSERT',\n        createdAt: new Date(),\n      },\n    ];\n\n    it('should return all data change logs when no filters provided', async () => {\n      (prismaService.dataChangeLog.findMany as jest.Mock).mockResolvedValue(\n        mockDataChangeLogs,\n      );\n\n      const result = await service.findDataChangeLogs();\n\n      expect(result).toEqual(mockDataChangeLogs);\n      expect(prismaService.dataChangeLog.findMany).toHaveBeenCalledWith({\n        where: {},\n        orderBy: { createdAt: 'desc' },\n        take: 100,\n      });\n    });\n\n    it('should filter data change logs by table name and operation', async () => {\n      (prismaService.dataChangeLog.findMany as jest.Mock).mockResolvedValue([\n        mockDataChangeLogs[0],\n      ]);\n\n      await service.findDataChangeLogs('users', undefined, 'UPDATE');\n\n      expect(prismaService.dataChangeLog.findMany).toHaveBeenCalledWith({\n        where: {\n          tableName: 'users',\n          operation: 'UPDATE',\n        },\n        orderBy: { createdAt: 'desc' },\n        take: 100,\n      });\n    });\n  });\n\n  describe('Helper Methods', () => {\n    describe('logUserLogin', () => {\n      it('should create user login audit log', async () => {\n        const expectedResult = {\n          id: 'audit-id',\n          action: AuditAction.USER_LOGIN,\n          entity: 'User',\n          entityId: TEST_USER_IDS.CLIENT,\n          userId: TEST_USER_IDS.CLIENT,\n          description: 'User logged in',\n          ipAddress: '192.168.1.1',\n          userAgent: 'Mozilla/5.0',\n        };\n\n        (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n          expectedResult,\n        );\n\n        const result = await service.logUserLogin(\n          TEST_USER_IDS.CLIENT,\n          '192.168.1.1',\n          'Mozilla/5.0',\n        );\n\n        expect(result).toEqual(expectedResult);\n        expect(prismaService.auditLog.create).toHaveBeenCalledWith({\n          data: {\n            action: AuditAction.USER_LOGIN,\n            entity: 'User',\n            entityId: TEST_USER_IDS.CLIENT,\n            userId: TEST_USER_IDS.CLIENT,\n            description: 'User logged in',\n            ipAddress: '192.168.1.1',\n            userAgent: 'Mozilla/5.0',\n          },\n          include: expect.any(Object),\n        });\n      });\n    });\n\n    describe('logUserLogout', () => {\n      it('should create user logout audit log', async () => {\n        const expectedResult = {\n          id: 'audit-id',\n          action: AuditAction.USER_LOGOUT,\n          entity: 'User',\n          entityId: TEST_USER_IDS.CLIENT,\n          userId: TEST_USER_IDS.CLIENT,\n          description: 'User logged out',\n        };\n\n        (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n          expectedResult,\n        );\n\n        const result = await service.logUserLogout(TEST_USER_IDS.CLIENT);\n\n        expect(result).toEqual(expectedResult);\n      });\n    });\n\n    describe('logProfileUpdate', () => {\n      it('should create profile update audit log', async () => {\n        const oldValues = { firstName: 'Old' };\n        const newValues = { firstName: 'New' };\n\n        const expectedResult = {\n          id: 'audit-id',\n          action: AuditAction.USER_UPDATE_PROFILE,\n          entity: 'User',\n          entityId: TEST_USER_IDS.CLIENT,\n          userId: TEST_USER_IDS.CLIENT,\n          oldValues,\n          newValues,\n          description: 'User updated profile',\n        };\n\n        (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n          expectedResult,\n        );\n\n        const result = await service.logProfileUpdate(\n          TEST_USER_IDS.CLIENT,\n          oldValues,\n          newValues,\n        );\n\n        expect(result).toEqual(expectedResult);\n      });\n    });\n\n    describe('logTherapistApplicationSubmit', () => {\n      it('should create therapist application submit audit log', async () => {\n        const applicationData = { specializations: ['anxiety', 'depression'] };\n\n        const expectedResult = {\n          id: 'audit-id',\n          action: AuditAction.THERAPIST_APPLICATION_SUBMIT,\n          entity: 'Therapist',\n          entityId: TEST_USER_IDS.THERAPIST,\n          userId: TEST_USER_IDS.THERAPIST,\n          newValues: applicationData,\n          description: 'Therapist application submitted',\n        };\n\n        (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n          expectedResult,\n        );\n\n        const result = await service.logTherapistApplicationSubmit(\n          TEST_USER_IDS.THERAPIST,\n          applicationData,\n        );\n\n        expect(result).toEqual(expectedResult);\n      });\n    });\n\n    describe('logTherapistApplicationReview', () => {\n      it('should create therapist application approval audit log', async () => {\n        const expectedResult = {\n          id: 'audit-id',\n          action: AuditAction.THERAPIST_APPLICATION_APPROVE,\n          entity: 'Therapist',\n          entityId: TEST_USER_IDS.THERAPIST,\n          userId: TEST_USER_IDS.ADMIN,\n          oldValues: { status: 'pending' },\n          newValues: { status: 'approved' },\n          description: 'Therapist application approved',\n        };\n\n        (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n          expectedResult,\n        );\n\n        const result = await service.logTherapistApplicationReview(\n          TEST_USER_IDS.THERAPIST,\n          TEST_USER_IDS.ADMIN,\n          'approved',\n          'pending',\n        );\n\n        expect(result).toEqual(expectedResult);\n      });\n\n      it('should create therapist application rejection audit log', async () => {\n        const expectedResult = {\n          id: 'audit-id',\n          action: AuditAction.THERAPIST_APPLICATION_REJECT,\n          entity: 'Therapist',\n          entityId: TEST_USER_IDS.THERAPIST,\n          userId: TEST_USER_IDS.ADMIN,\n          oldValues: { status: 'pending' },\n          newValues: { status: 'rejected' },\n          description: 'Therapist application rejected',\n        };\n\n        (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n          expectedResult,\n        );\n\n        const result = await service.logTherapistApplicationReview(\n          TEST_USER_IDS.THERAPIST,\n          TEST_USER_IDS.ADMIN,\n          'rejected',\n          'pending',\n        );\n\n        expect(result).toEqual(expectedResult);\n      });\n    });\n\n    describe('logMeetingCreate', () => {\n      it('should create meeting creation audit log', async () => {\n        const meetingData = { title: 'Therapy Session', duration: 60 };\n\n        const expectedResult = {\n          id: 'audit-id',\n          action: AuditAction.MEETING_CREATE,\n          entity: 'Meeting',\n          entityId: 'meeting-id',\n          userId: TEST_USER_IDS.CLIENT,\n          newValues: meetingData,\n          description: 'Meeting created',\n        };\n\n        (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n          expectedResult,\n        );\n\n        const result = await service.logMeetingCreate(\n          'meeting-id',\n          TEST_USER_IDS.CLIENT,\n          meetingData,\n        );\n\n        expect(result).toEqual(expectedResult);\n      });\n    });\n\n    describe('logMeetingUpdate', () => {\n      it('should create meeting update audit log', async () => {\n        const oldValues = { title: 'Old Title' };\n        const newValues = { title: 'New Title' };\n\n        const expectedResult = {\n          id: 'audit-id',\n          action: AuditAction.MEETING_UPDATE,\n          entity: 'Meeting',\n          entityId: 'meeting-id',\n          userId: TEST_USER_IDS.THERAPIST,\n          oldValues,\n          newValues,\n          description: 'Meeting updated',\n        };\n\n        (prismaService.auditLog.create as jest.Mock).mockResolvedValue(\n          expectedResult,\n        );\n\n        const result = await service.logMeetingUpdate(\n          'meeting-id',\n          TEST_USER_IDS.THERAPIST,\n          oldValues,\n          newValues,\n        );\n\n        expect(result).toEqual(expectedResult);\n      });\n    });\n\n    describe('logSystemError', () => {\n      it('should create system error event', async () => {\n        const error = new Error('Payment failed');\n        error.name = 'PaymentError';\n        error.stack = 'Error stack trace';\n\n        const expectedResult = {\n          id: 'system-event-id',\n          eventType: SystemEventType.THIRD_PARTY_API_ERROR,\n          severity: EventSeverity.ERROR,\n          title: 'Error in PaymentService',\n          description: 'Payment failed',\n          component: 'PaymentService',\n          metadata: {\n            sessionId: 'session-123',\n            errorName: 'PaymentError',\n          },\n          stackTrace: 'Error stack trace',\n        };\n\n        (prismaService.systemEvent.create as jest.Mock).mockResolvedValue(\n          expectedResult,\n        );\n\n        const result = await service.logSystemError('PaymentService', error, {\n          sessionId: 'session-123',\n        });\n\n        expect(result).toEqual(expectedResult);\n        expect(prismaService.systemEvent.create).toHaveBeenCalledWith({\n          data: {\n            eventType: SystemEventType.THIRD_PARTY_API_ERROR,\n            severity: EventSeverity.ERROR,\n            title: 'Error in PaymentService',\n            description: 'Payment failed',\n            component: 'PaymentService',\n            metadata: {\n              sessionId: 'session-123',\n              errorName: 'PaymentError',\n            },\n            stackTrace: 'Error stack trace',\n          },\n        });\n      });\n    });\n  });\n\n  describe('getAuditStatistics', () => {\n    const mockStats = {\n      totalLogs: 150,\n      actionStats: [\n        { action: AuditAction.USER_LOGIN, _count: { action: 50 } },\n        { action: AuditAction.USER_LOGOUT, _count: { action: 45 } },\n      ],\n      entityStats: [\n        { entity: 'User', _count: { entity: 80 } },\n        { entity: 'Meeting', _count: { entity: 70 } },\n      ],\n      topUsers: [\n        { userId: TEST_USER_IDS.CLIENT, _count: { userId: 25 } },\n        { userId: TEST_USER_IDS.THERAPIST, _count: { userId: 20 } },\n      ],\n    };\n\n    it('should return audit statistics without date filters', async () => {\n      (prismaService.auditLog.count as jest.Mock).mockResolvedValue(150);\n      (prismaService.auditLog.groupBy as jest.Mock)\n        .mockResolvedValueOnce(mockStats.actionStats)\n        .mockResolvedValueOnce(mockStats.entityStats)\n        .mockResolvedValueOnce(mockStats.topUsers);\n\n      const result = await service.getAuditStatistics();\n\n      expect(result).toEqual({\n        totalLogs: 150,\n        actionStats: mockStats.actionStats,\n        entityStats: mockStats.entityStats,\n        topUsers: mockStats.topUsers,\n      });\n\n      expect(prismaService.auditLog.count).toHaveBeenCalledWith({ where: {} });\n      expect(prismaService.auditLog.groupBy as jest.Mock).toHaveBeenCalledTimes(\n        3,\n      );\n    });\n\n    it('should return audit statistics with date filters', async () => {\n      const startDate = new Date('2024-01-01');\n      const endDate = new Date('2024-01-31');\n\n      (prismaService.auditLog.count as jest.Mock).mockResolvedValue(75);\n      (prismaService.auditLog.groupBy as jest.Mock)\n        .mockResolvedValueOnce(mockStats.actionStats)\n        .mockResolvedValueOnce(mockStats.entityStats)\n        .mockResolvedValueOnce(mockStats.topUsers);\n\n      const result = await service.getAuditStatistics(startDate, endDate);\n\n      expect(result.totalLogs).toBe(75);\n\n      const expectedWhere = {\n        createdAt: { gte: startDate, lte: endDate },\n      };\n\n      expect(prismaService.auditLog.count).toHaveBeenCalledWith({\n        where: expectedWhere,\n      });\n      expect(prismaService.auditLog.groupBy as jest.Mock).toHaveBeenCalledWith({\n        by: ['action'],\n        where: expectedWhere,\n        _count: { action: true },\n      });\n    });\n\n    it('should handle errors in statistics calculation', async () => {\n      (prismaService.auditLog.count as jest.Mock).mockRejectedValue(\n        new Error('Database error'),\n      );\n\n      await expect(service.getAuditStatistics()).rejects.toThrow(\n        'Database error',\n      );\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle database errors in createAuditLog', async () => {\n      const mockAuditData = {\n        action: AuditAction.USER_LOGIN,\n        entity: 'User',\n        entityId: TEST_USER_IDS.CLIENT,\n      };\n\n      (prismaService.auditLog.create as jest.Mock).mockRejectedValue(\n        new Error('Database connection failed'),\n      );\n\n      await expect(service.createAuditLog(mockAuditData)).rejects.toThrow(\n        'Database connection failed',\n      );\n    });\n\n    it('should handle database errors in findAuditLogs', async () => {\n      (prismaService.auditLog.findMany as jest.Mock).mockRejectedValue(\n        new Error('Query timeout'),\n      );\n\n      await expect(service.findAuditLogs()).rejects.toThrow('Query timeout');\n    });\n\n    it('should handle database errors in system events', async () => {\n      const systemEventData = {\n        eventType: SystemEventType.SERVICE_START,\n        severity: EventSeverity.INFO,\n        title: 'Test Event',\n        description: 'Test Description',\n      };\n\n      (prismaService.systemEvent.create as jest.Mock).mockRejectedValue(\n        new Error('Constraint violation'),\n      );\n\n      await expect(service.createSystemEvent(systemEventData)).rejects.toThrow(\n        'Constraint violation',\n      );\n    });\n  });\n});\n"],"version":3}