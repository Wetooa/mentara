{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/admin/admin.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/admin/admin.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { AdminService } from './admin.service';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport { CreateAdminDto, UpdateAdminDto } from './dto/admin.dto';\nimport { NotFoundException, ConflictException } from '@nestjs/common';\nimport { Prisma } from '@prisma/client';\n\ndescribe('AdminService', () => {\n  let service: AdminService;\n  let prismaService: any;\n\n  // Mock data\n  const mockUser = {\n    id: 'user-123',\n    email: 'admin@example.com',\n    firstName: 'John',\n    lastName: 'Admin',\n    role: 'admin',\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    updatedAt: new Date('2024-01-15T00:00:00Z'),\n  };\n\n  const mockAdmin = {\n    userId: 'admin-123',\n    permissions: ['MANAGE_USERS', 'MANAGE_THERAPISTS', 'MANAGE_CONTENT'],\n    adminLevel: 'admin',\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    updatedAt: new Date('2024-01-15T00:00:00Z'),\n  };\n\n  const mockCreateAdminDto: CreateAdminDto = {\n    userId: 'user-123',\n    permissions: ['MANAGE_USERS', 'MANAGE_THERAPISTS'],\n    adminLevel: 'admin',\n  };\n\n  const mockUpdateAdminDto: UpdateAdminDto = {\n    permissions: ['MANAGE_USERS', 'MANAGE_THERAPISTS', 'MANAGE_CONTENT'],\n    adminLevel: 'super_admin',\n  };\n\n  beforeEach(async () => {\n    const mockPrismaService = {\n      admin: {\n        findMany: jest.fn(),\n        findUnique: jest.fn(),\n        create: jest.fn(),\n        update: jest.fn(),\n        delete: jest.fn(),\n      },\n      user: {\n        findUnique: jest.fn(),\n      },\n    };\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        AdminService,\n        {\n          provide: PrismaService,\n          useValue: mockPrismaService,\n        },\n      ],\n    }).compile();\n\n    service = module.get<AdminService>(AdminService);\n    prismaService = module.get(PrismaService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('findAll', () => {\n    beforeEach(() => {\n      prismaService.admin.findMany.mockResolvedValue([mockAdmin]);\n    });\n\n    it('should find all admins successfully', async () => {\n      const result = await service.findAll();\n\n      expect(prismaService.admin.findMany).toHaveBeenCalledWith({\n        orderBy: { createdAt: 'desc' },\n      });\n      expect(result).toEqual([\n        {\n          userId: mockAdmin.userId,\n          permissions: mockAdmin.permissions,\n          adminLevel: mockAdmin.adminLevel,\n          createdAt: mockAdmin.createdAt,\n          updatedAt: mockAdmin.updatedAt,\n        },\n      ]);\n    });\n\n    it('should return empty array when no admins exist', async () => {\n      prismaService.admin.findMany.mockResolvedValue([]);\n\n      const result = await service.findAll();\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle database errors', async () => {\n      prismaService.admin.findMany.mockRejectedValue(\n        new Error('Database error'),\n      );\n\n      await expect(service.findAll()).rejects.toThrow('Database error');\n    });\n\n    it('should handle many admins efficiently', async () => {\n      const manyAdmins = Array(100)\n        .fill(mockAdmin)\n        .map((admin, i) => ({\n          ...admin,\n          userId: `admin-${i}`,\n        }));\n      prismaService.admin.findMany.mockResolvedValue(manyAdmins);\n\n      const result = await service.findAll();\n\n      expect(result).toHaveLength(100);\n      expect(prismaService.admin.findMany).toHaveBeenCalledTimes(1);\n    });\n\n    it('should sort admins by creation date descending', async () => {\n      await service.findAll();\n\n      expect(prismaService.admin.findMany).toHaveBeenCalledWith({\n        orderBy: { createdAt: 'desc' },\n      });\n    });\n  });\n\n  describe('findOne', () => {\n    beforeEach(() => {\n      prismaService.admin.findUnique.mockResolvedValue(mockAdmin);\n    });\n\n    it('should find admin by userId successfully', async () => {\n      const result = await service.findOne('admin-123');\n\n      expect(prismaService.admin.findUnique).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n      });\n      expect(result).toEqual({\n        userId: mockAdmin.userId,\n        permissions: mockAdmin.permissions,\n        adminLevel: mockAdmin.adminLevel,\n        createdAt: mockAdmin.createdAt,\n        updatedAt: mockAdmin.updatedAt,\n      });\n    });\n\n    it('should return null when admin not found', async () => {\n      prismaService.admin.findUnique.mockResolvedValue(null);\n\n      const result = await service.findOne('nonexistent');\n\n      expect(result).toBeNull();\n    });\n\n    it('should handle database errors', async () => {\n      prismaService.admin.findUnique.mockRejectedValue(\n        new Error('Database error'),\n      );\n\n      await expect(service.findOne('admin-123')).rejects.toThrow(\n        'Database error',\n      );\n    });\n\n    it('should handle empty string userId', async () => {\n      await service.findOne('');\n\n      expect(prismaService.admin.findUnique).toHaveBeenCalledWith({\n        where: { userId: '' },\n      });\n    });\n\n    it('should handle special characters in userId', async () => {\n      const specialUserId = 'admin-123@domain.com';\n\n      await service.findOne(specialUserId);\n\n      expect(prismaService.admin.findUnique).toHaveBeenCalledWith({\n        where: { userId: specialUserId },\n      });\n    });\n  });\n\n  describe('create', () => {\n    beforeEach(() => {\n      prismaService.user.findUnique.mockResolvedValue(mockUser);\n      prismaService.admin.findUnique.mockResolvedValue(null);\n      prismaService.admin.create.mockResolvedValue(mockAdmin);\n    });\n\n    it('should create admin successfully', async () => {\n      const result = await service.create(mockCreateAdminDto);\n\n      expect(prismaService.user.findUnique).toHaveBeenCalledWith({\n        where: { id: mockCreateAdminDto.userId },\n      });\n      expect(prismaService.admin.findUnique).toHaveBeenCalledWith({\n        where: { userId: mockCreateAdminDto.userId },\n      });\n      expect(prismaService.admin.create).toHaveBeenCalledWith({\n        data: {\n          userId: mockCreateAdminDto.userId,\n          permissions: mockCreateAdminDto.permissions,\n          adminLevel: mockCreateAdminDto.adminLevel,\n        },\n      });\n      expect(result).toEqual({\n        userId: mockAdmin.userId,\n        permissions: mockAdmin.permissions,\n        adminLevel: mockAdmin.adminLevel,\n        createdAt: mockAdmin.createdAt,\n        updatedAt: mockAdmin.updatedAt,\n      });\n    });\n\n    it('should throw NotFoundException when user does not exist', async () => {\n      prismaService.user.findUnique.mockResolvedValue(null);\n\n      await expect(service.create(mockCreateAdminDto)).rejects.toThrow(\n        new NotFoundException(\n          `User with ID ${mockCreateAdminDto.userId} not found`,\n        ),\n      );\n\n      expect(prismaService.admin.create).not.toHaveBeenCalled();\n    });\n\n    it('should throw ConflictException when admin already exists', async () => {\n      prismaService.admin.findUnique.mockResolvedValue(mockAdmin);\n\n      await expect(service.create(mockCreateAdminDto)).rejects.toThrow(\n        new ConflictException(\n          `User ${mockCreateAdminDto.userId} is already an admin`,\n        ),\n      );\n\n      expect(prismaService.admin.create).not.toHaveBeenCalled();\n    });\n\n    it('should handle database errors during creation', async () => {\n      prismaService.admin.create.mockRejectedValue(\n        new Error('Creation failed'),\n      );\n\n      await expect(service.create(mockCreateAdminDto)).rejects.toThrow(\n        'Creation failed',\n      );\n    });\n\n    it('should handle Prisma unique constraint violation', async () => {\n      const prismaError = new Prisma.PrismaClientKnownRequestError(\n        'Unique constraint violation',\n        { code: 'P2002', clientVersion: '4.0.0' },\n      );\n      prismaService.admin.create.mockRejectedValue(prismaError);\n\n      await expect(service.create(mockCreateAdminDto)).rejects.toThrow(\n        new ConflictException(\n          `User ${mockCreateAdminDto.userId} is already an admin`,\n        ),\n      );\n    });\n\n    it('should handle Prisma foreign key constraint violation', async () => {\n      const prismaError = new Prisma.PrismaClientKnownRequestError(\n        'Foreign key constraint violation',\n        { code: 'P2003', clientVersion: '4.0.0' },\n      );\n      prismaService.admin.create.mockRejectedValue(prismaError);\n\n      await expect(service.create(mockCreateAdminDto)).rejects.toThrow(\n        new NotFoundException(\n          `User with ID ${mockCreateAdminDto.userId} not found`,\n        ),\n      );\n    });\n\n    it('should create admin with minimal data', async () => {\n      const minimalData: CreateAdminDto = {\n        userId: 'user-123',\n      };\n\n      await service.create(minimalData);\n\n      expect(prismaService.admin.create).toHaveBeenCalledWith({\n        data: {\n          userId: minimalData.userId,\n          permissions: undefined,\n          adminLevel: 'admin',\n        },\n      });\n    });\n\n    it('should create admin with custom adminLevel', async () => {\n      const customData: CreateAdminDto = {\n        userId: 'user-123',\n        permissions: ['SUPER_ADMIN'],\n        adminLevel: 'super_admin',\n      };\n\n      await service.create(customData);\n\n      expect(prismaService.admin.create).toHaveBeenCalledWith({\n        data: {\n          userId: customData.userId,\n          permissions: customData.permissions,\n          adminLevel: customData.adminLevel,\n        },\n      });\n    });\n\n    it('should create admin with complex permissions array', async () => {\n      const complexData: CreateAdminDto = {\n        userId: 'user-123',\n        permissions: [\n          'MANAGE_USERS',\n          'MANAGE_THERAPISTS',\n          'MANAGE_CONTENT',\n          'MANAGE_BILLING',\n          'VIEW_ANALYTICS',\n          'MANAGE_COMMUNITIES',\n          'MODERATE_CONTENT',\n        ],\n        adminLevel: 'super_admin',\n      };\n\n      await service.create(complexData);\n\n      expect(prismaService.admin.create).toHaveBeenCalledWith({\n        data: {\n          userId: complexData.userId,\n          permissions: complexData.permissions,\n          adminLevel: complexData.adminLevel,\n        },\n      });\n    });\n  });\n\n  describe('update', () => {\n    beforeEach(() => {\n      prismaService.admin.update.mockResolvedValue({\n        ...mockAdmin,\n        ...mockUpdateAdminDto,\n      });\n    });\n\n    it('should update admin successfully', async () => {\n      const result = await service.update('admin-123', mockUpdateAdminDto);\n\n      expect(prismaService.admin.update).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n        data: {\n          permissions: mockUpdateAdminDto.permissions,\n          adminLevel: mockUpdateAdminDto.adminLevel,\n        },\n      });\n      expect(result).toEqual({\n        userId: mockAdmin.userId,\n        permissions: mockUpdateAdminDto.permissions,\n        adminLevel: mockUpdateAdminDto.adminLevel,\n        createdAt: mockAdmin.createdAt,\n        updatedAt: mockAdmin.updatedAt,\n      });\n    });\n\n    it('should handle update of non-existent admin', async () => {\n      const prismaError = new Prisma.PrismaClientKnownRequestError(\n        'Record not found',\n        { code: 'P2025', clientVersion: '4.0.0' },\n      );\n      prismaService.admin.update.mockRejectedValue(prismaError);\n\n      await expect(\n        service.update('nonexistent', mockUpdateAdminDto),\n      ).rejects.toThrow(\n        new NotFoundException('Admin with ID nonexistent not found'),\n      );\n    });\n\n    it('should handle database errors during update', async () => {\n      prismaService.admin.update.mockRejectedValue(new Error('Update failed'));\n\n      await expect(\n        service.update('admin-123', mockUpdateAdminDto),\n      ).rejects.toThrow('Update failed');\n    });\n\n    it('should handle partial updates', async () => {\n      const partialUpdate: UpdateAdminDto = {\n        permissions: ['MANAGE_USERS'],\n      };\n\n      await service.update('admin-123', partialUpdate);\n\n      expect(prismaService.admin.update).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n        data: {\n          permissions: partialUpdate.permissions,\n          adminLevel: undefined,\n        },\n      });\n    });\n\n    it('should handle empty permissions array', async () => {\n      const emptyPermissions: UpdateAdminDto = {\n        permissions: [],\n      };\n\n      await service.update('admin-123', emptyPermissions);\n\n      expect(prismaService.admin.update).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n        data: {\n          permissions: [],\n          adminLevel: undefined,\n        },\n      });\n    });\n\n    it('should handle adminLevel changes', async () => {\n      const levelChange: UpdateAdminDto = {\n        adminLevel: 'super_admin',\n      };\n\n      await service.update('admin-123', levelChange);\n\n      expect(prismaService.admin.update).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n        data: {\n          permissions: undefined,\n          adminLevel: 'super_admin',\n        },\n      });\n    });\n\n    it('should handle permission hierarchy updates', async () => {\n      const hierarchyUpdate: UpdateAdminDto = {\n        permissions: [\n          'VIEW_CONTENT',\n          'MODERATE_CONTENT',\n          'MANAGE_CONTENT',\n          'SUPER_ADMIN',\n        ],\n        adminLevel: 'super_admin',\n      };\n\n      await service.update('admin-123', hierarchyUpdate);\n\n      expect(prismaService.admin.update).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n        data: {\n          permissions: hierarchyUpdate.permissions,\n          adminLevel: hierarchyUpdate.adminLevel,\n        },\n      });\n    });\n  });\n\n  describe('remove', () => {\n    beforeEach(() => {\n      prismaService.admin.delete.mockResolvedValue(mockAdmin);\n    });\n\n    it('should remove admin successfully', async () => {\n      await service.remove('admin-123');\n\n      expect(prismaService.admin.delete).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n      });\n    });\n\n    it('should handle removal of non-existent admin', async () => {\n      const prismaError = new Prisma.PrismaClientKnownRequestError(\n        'Record not found',\n        { code: 'P2025', clientVersion: '4.0.0' },\n      );\n      prismaService.admin.delete.mockRejectedValue(prismaError);\n\n      await expect(service.remove('nonexistent')).rejects.toThrow(\n        new NotFoundException('Admin with ID nonexistent not found'),\n      );\n    });\n\n    it('should handle database errors during removal', async () => {\n      prismaService.admin.delete.mockRejectedValue(\n        new Error('Deletion failed'),\n      );\n\n      await expect(service.remove('admin-123')).rejects.toThrow(\n        'Deletion failed',\n      );\n    });\n\n    it('should handle concurrent deletion attempts', async () => {\n      prismaService.admin.delete\n        .mockResolvedValueOnce(mockAdmin)\n        .mockRejectedValueOnce(\n          new Prisma.PrismaClientKnownRequestError('Record not found', {\n            code: 'P2025',\n            clientVersion: '4.0.0',\n          }),\n        );\n\n      const promise1 = service.remove('admin-123');\n      const promise2 = service.remove('admin-123');\n\n      const results = await Promise.allSettled([promise1, promise2]);\n\n      expect(results[0].status).toBe('fulfilled');\n      expect(results[1].status).toBe('rejected');\n    });\n\n    it('should handle foreign key constraint violations', async () => {\n      const prismaError = new Prisma.PrismaClientKnownRequestError(\n        'Foreign key constraint violation',\n        { code: 'P2003', clientVersion: '4.0.0' },\n      );\n      prismaService.admin.delete.mockRejectedValue(prismaError);\n\n      await expect(service.remove('admin-123')).rejects.toThrow(\n        'Foreign key constraint violation',\n      );\n    });\n  });\n\n  describe('Edge cases and error handling', () => {\n    it('should handle concurrent operations on same admin', async () => {\n      prismaService.admin.findUnique.mockResolvedValue(mockAdmin);\n      prismaService.admin.update.mockResolvedValue(mockAdmin);\n      prismaService.admin.delete.mockResolvedValue(mockAdmin);\n\n      const promises = [\n        service.findOne('admin-123'),\n        service.update('admin-123', mockUpdateAdminDto),\n        service.remove('admin-123'),\n      ];\n\n      const results = await Promise.allSettled(promises);\n\n      expect(results[0].status).toBe('fulfilled');\n      expect(results[1].status).toBe('fulfilled');\n      expect(results[2].status).toBe('fulfilled');\n    });\n\n    it('should handle null data in operations', async () => {\n      const nullUpdate: UpdateAdminDto = {\n        permissions: null as any,\n        adminLevel: null as any,\n      };\n\n      prismaService.admin.update.mockResolvedValue(mockAdmin);\n\n      await service.update('admin-123', nullUpdate);\n\n      expect(prismaService.admin.update).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n        data: {\n          permissions: null,\n          adminLevel: null,\n        },\n      });\n    });\n\n    it('should handle undefined data in operations', async () => {\n      const undefinedUpdate: UpdateAdminDto = {\n        permissions: undefined,\n        adminLevel: undefined,\n      };\n\n      prismaService.admin.update.mockResolvedValue(mockAdmin);\n\n      await service.update('admin-123', undefinedUpdate);\n\n      expect(prismaService.admin.update).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n        data: {\n          permissions: undefined,\n          adminLevel: undefined,\n        },\n      });\n    });\n\n    it('should handle very large permissions arrays', async () => {\n      const largePermissions = Array(1000)\n        .fill('PERMISSION')\n        .map((p, i) => `${p}_${i}`);\n      const largeUpdate: UpdateAdminDto = {\n        permissions: largePermissions,\n      };\n\n      prismaService.admin.update.mockResolvedValue({\n        ...mockAdmin,\n        permissions: largePermissions,\n      });\n\n      await service.update('admin-123', largeUpdate);\n\n      expect(prismaService.admin.update).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n        data: {\n          permissions: largePermissions,\n          adminLevel: undefined,\n        },\n      });\n    });\n\n    it('should handle malformed admin data', async () => {\n      const malformedData = {\n        userId: null,\n        permissions: 'not_an_array',\n        adminLevel: 123,\n        createdAt: 'invalid_date',\n      };\n      prismaService.admin.findMany.mockResolvedValue([malformedData]);\n\n      const result = await service.findAll();\n\n      expect(result).toEqual([\n        {\n          userId: null,\n          permissions: 'not_an_array',\n          adminLevel: 123,\n          createdAt: 'invalid_date',\n          updatedAt: undefined,\n        },\n      ]);\n    });\n\n    it('should handle database connection timeouts', async () => {\n      prismaService.admin.findMany.mockRejectedValue(\n        new Error('Connection timeout'),\n      );\n\n      await expect(service.findAll()).rejects.toThrow('Connection timeout');\n    });\n\n    it('should handle special Unicode characters in userIds', async () => {\n      const unicodeUserId = 'admin-ðŸ”’-âˆ†âˆ‘Â©';\n\n      await service.findOne(unicodeUserId);\n\n      expect(prismaService.admin.findUnique).toHaveBeenCalledWith({\n        where: { userId: unicodeUserId },\n      });\n    });\n\n    it('should handle very long userIds', async () => {\n      const longUserId = 'admin-' + 'a'.repeat(1000);\n\n      await service.findOne(longUserId);\n\n      expect(prismaService.admin.findUnique).toHaveBeenCalledWith({\n        where: { userId: longUserId },\n      });\n    });\n  });\n\n  describe('Performance and scaling', () => {\n    it('should handle bulk admin creation efficiently', async () => {\n      const bulkCreatePromises = Array(50)\n        .fill(mockCreateAdminDto)\n        .map((data, i) => {\n          prismaService.user.findUnique.mockResolvedValueOnce(mockUser);\n          prismaService.admin.findUnique.mockResolvedValueOnce(null);\n          prismaService.admin.create.mockResolvedValueOnce({\n            ...mockAdmin,\n            userId: `admin-${i}`,\n          });\n          return service.create({\n            ...data,\n            userId: `user-${i}`,\n          });\n        });\n\n      const results = await Promise.all(bulkCreatePromises);\n\n      expect(results).toHaveLength(50);\n      expect(prismaService.admin.create).toHaveBeenCalledTimes(50);\n    });\n\n    it('should handle bulk admin updates efficiently', async () => {\n      const bulkUpdatePromises = Array(50)\n        .fill(mockUpdateAdminDto)\n        .map((data, i) => {\n          prismaService.admin.update.mockResolvedValueOnce({\n            ...mockAdmin,\n            userId: `admin-${i}`,\n          });\n          return service.update(`admin-${i}`, data);\n        });\n\n      const results = await Promise.all(bulkUpdatePromises);\n\n      expect(results).toHaveLength(50);\n      expect(prismaService.admin.update).toHaveBeenCalledTimes(50);\n    });\n\n    it('should handle system with many admins', async () => {\n      const manyAdmins = Array(200)\n        .fill(mockAdmin)\n        .map((admin, i) => ({\n          ...admin,\n          userId: `admin-${i}`,\n          adminLevel: i < 10 ? 'super_admin' : 'admin',\n        }));\n\n      prismaService.admin.findMany.mockResolvedValue(manyAdmins);\n\n      const result = await service.findAll();\n\n      expect(result).toHaveLength(200);\n      expect(\n        result.filter((admin) => admin.adminLevel === 'super_admin'),\n      ).toHaveLength(10);\n    });\n\n    it('should handle admin with extensive permissions', async () => {\n      const extensivePermissions = [\n        'MANAGE_USERS',\n        'MANAGE_THERAPISTS',\n        'MANAGE_CONTENT',\n        'MANAGE_BILLING',\n        'VIEW_ANALYTICS',\n        'MANAGE_COMMUNITIES',\n        'MODERATE_CONTENT',\n        'MANAGE_REPORTS',\n        'EXPORT_DATA',\n        'MANAGE_INTEGRATIONS',\n        'CONFIGURE_SETTINGS',\n        'MANAGE_NOTIFICATIONS',\n        'VIEW_AUDIT_LOGS',\n        'MANAGE_PERMISSIONS',\n        'SUPER_ADMIN',\n      ];\n\n      const extensiveAdminData: CreateAdminDto = {\n        userId: 'super-admin',\n        permissions: extensivePermissions,\n        adminLevel: 'super_admin',\n      };\n\n      prismaService.user.findUnique.mockResolvedValue(mockUser);\n      prismaService.admin.findUnique.mockResolvedValue(null);\n      prismaService.admin.create.mockResolvedValue({\n        ...mockAdmin,\n        userId: 'super-admin',\n        permissions: extensivePermissions,\n        adminLevel: 'super_admin',\n      });\n\n      await service.create(extensiveAdminData);\n\n      expect(prismaService.admin.create).toHaveBeenCalledWith({\n        data: {\n          userId: extensiveAdminData.userId,\n          permissions: extensivePermissions,\n          adminLevel: 'super_admin',\n        },\n      });\n    });\n\n    it('should handle rapid successive operations', async () => {\n      const userId = 'rapid-ops-admin';\n      const createDto = {\n        ...mockCreateAdminDto,\n        userId: userId,\n      };\n\n      prismaService.user.findUnique.mockResolvedValue(mockUser);\n      prismaService.admin.findUnique\n        .mockResolvedValueOnce(null) // First check in create\n        .mockResolvedValueOnce(mockAdmin) // First findOne\n        .mockResolvedValueOnce(mockAdmin); // Second findOne\n      prismaService.admin.create.mockResolvedValue(mockAdmin);\n      prismaService.admin.update.mockResolvedValue(mockAdmin);\n      prismaService.admin.delete.mockResolvedValue(mockAdmin);\n\n      // Simulate rapid succession of operations\n      await service.create(createDto);\n      await service.findOne(userId);\n      await service.update(userId, mockUpdateAdminDto);\n      await service.findOne(userId);\n      await service.remove(userId);\n\n      expect(prismaService.admin.create).toHaveBeenCalledTimes(1);\n      expect(prismaService.admin.findUnique).toHaveBeenCalledTimes(3); // Once in create check, twice in findOne\n      expect(prismaService.admin.update).toHaveBeenCalledTimes(1);\n      expect(prismaService.admin.delete).toHaveBeenCalledTimes(1);\n    });\n  });\n\n  describe('Business logic validation', () => {\n    it('should handle admin level hierarchy transitions', async () => {\n      // Start as basic admin\n      const basicAdmin: UpdateAdminDto = {\n        permissions: ['VIEW_USERS', 'VIEW_CONTENT'],\n        adminLevel: 'admin',\n      };\n\n      // Promote to super admin\n      const superAdmin: UpdateAdminDto = {\n        permissions: ['MANAGE_USERS', 'MANAGE_CONTENT', 'SUPER_ADMIN'],\n        adminLevel: 'super_admin',\n      };\n\n      // Demote back to admin\n      const demotedAdmin: UpdateAdminDto = {\n        permissions: ['VIEW_USERS'],\n        adminLevel: 'admin',\n      };\n\n      prismaService.admin.update\n        .mockResolvedValueOnce({ ...mockAdmin, ...basicAdmin })\n        .mockResolvedValueOnce({ ...mockAdmin, ...superAdmin })\n        .mockResolvedValueOnce({ ...mockAdmin, ...demotedAdmin });\n\n      await service.update('admin-123', basicAdmin);\n      await service.update('admin-123', superAdmin);\n      await service.update('admin-123', demotedAdmin);\n\n      expect(prismaService.admin.update).toHaveBeenCalledTimes(3);\n    });\n\n    it('should handle permission validation scenarios', async () => {\n      const validPermissions = [\n        'MANAGE_USERS',\n        'MANAGE_THERAPISTS',\n        'MANAGE_CONTENT',\n        'MANAGE_BILLING',\n        'VIEW_ANALYTICS',\n      ];\n\n      const permissionUpdate: UpdateAdminDto = {\n        permissions: validPermissions,\n      };\n\n      prismaService.admin.update.mockResolvedValue({\n        ...mockAdmin,\n        permissions: validPermissions,\n      });\n\n      await service.update('admin-123', permissionUpdate);\n\n      expect(prismaService.admin.update).toHaveBeenCalledWith({\n        where: { userId: 'admin-123' },\n        data: {\n          permissions: validPermissions,\n          adminLevel: undefined,\n        },\n      });\n    });\n\n    it('should handle temporary admin assignments', async () => {\n      const temporaryAdminData: CreateAdminDto = {\n        userId: 'temp-admin',\n        permissions: ['VIEW_ANALYTICS'],\n        adminLevel: 'admin',\n      };\n\n      prismaService.user.findUnique.mockResolvedValue(mockUser);\n      prismaService.admin.findUnique.mockResolvedValue(null);\n      prismaService.admin.create.mockResolvedValue({\n        ...mockAdmin,\n        userId: 'temp-admin',\n        permissions: ['VIEW_ANALYTICS'],\n      });\n\n      // Create temporary admin\n      await service.create(temporaryAdminData);\n\n      // Later remove\n      await service.remove('temp-admin');\n\n      expect(prismaService.admin.create).toHaveBeenCalledWith({\n        data: {\n          userId: temporaryAdminData.userId,\n          permissions: temporaryAdminData.permissions,\n          adminLevel: temporaryAdminData.adminLevel,\n        },\n      });\n      expect(prismaService.admin.delete).toHaveBeenCalledWith({\n        where: { userId: 'temp-admin' },\n      });\n    });\n\n    it('should handle admin role transitions with audit', async () => {\n      // This simulates a complete admin lifecycle\n      const newAdminData: CreateAdminDto = {\n        userId: 'lifecycle-admin',\n        permissions: ['VIEW_USERS'],\n        adminLevel: 'admin',\n      };\n\n      const promotionUpdate: UpdateAdminDto = {\n        permissions: ['VIEW_USERS', 'MANAGE_USERS', 'MANAGE_CONTENT'],\n        adminLevel: 'senior_admin',\n      };\n\n      const finalPromotionUpdate: UpdateAdminDto = {\n        permissions: ['SUPER_ADMIN'],\n        adminLevel: 'super_admin',\n      };\n\n      prismaService.user.findUnique.mockResolvedValue(mockUser);\n      prismaService.admin.findUnique.mockResolvedValue(null);\n      prismaService.admin.create.mockResolvedValue({\n        ...mockAdmin,\n        userId: 'lifecycle-admin',\n        permissions: ['VIEW_USERS'],\n      });\n      prismaService.admin.update\n        .mockResolvedValueOnce({ ...mockAdmin, ...promotionUpdate })\n        .mockResolvedValueOnce({ ...mockAdmin, ...finalPromotionUpdate });\n\n      await service.create(newAdminData);\n      await service.update('lifecycle-admin', promotionUpdate);\n      await service.update('lifecycle-admin', finalPromotionUpdate);\n\n      expect(prismaService.admin.create).toHaveBeenCalledTimes(1);\n      expect(prismaService.admin.update).toHaveBeenCalledTimes(2);\n    });\n  });\n});\n"],"version":3}