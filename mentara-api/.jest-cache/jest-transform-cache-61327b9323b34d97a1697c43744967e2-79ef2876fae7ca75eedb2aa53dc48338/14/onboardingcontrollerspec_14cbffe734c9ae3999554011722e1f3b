96dd7621bb68ee8d57a0cda243a20090
"use strict";
/**
 * Comprehensive Test Suite for OnboardingController
 * Tests user onboarding flow management and completion tracking
 */
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const onboarding_controller_1 = require("./onboarding.controller");
const onboarding_service_1 = require("./onboarding.service");
const jwt_auth_guard_1 = require("../auth/guards/jwt-auth.guard");
const admin_auth_guard_1 = require("../auth/guards/admin-auth.guard");
const index_1 = require("../test-utils/index");
describe('OnboardingController', () => {
    let controller;
    let onboardingService;
    let module;
    // Mock OnboardingService
    const mockOnboardingService = {
        getOnboardingStatus: jest.fn(),
        markStepCompleted: jest.fn(),
        validateOnboardingCompleteness: jest.fn(),
        getOnboardingInsights: jest.fn(),
    };
    // Mock Guards
    const mockJwtAuthGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    const mockAdminAuthGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    // Test data
    const mockOnboardingStatus = {
        userId: index_1.TEST_USER_IDS.CLIENT,
        isCompleted: false,
        completionPercentage: 60,
        steps: {
            profileSetup: {
                completed: true,
                completedAt: new Date('2024-02-10T10:00:00Z'),
                required: true,
            },
            preAssessment: {
                completed: true,
                completedAt: new Date('2024-02-11T14:00:00Z'),
                required: true,
            },
            therapistSelection: {
                completed: false,
                completedAt: null,
                required: true,
            },
            firstSession: {
                completed: false,
                completedAt: null,
                required: false,
            },
            communityJoin: {
                completed: false,
                completedAt: null,
                required: false,
            },
        },
        nextSteps: [
            {
                stepName: 'therapistSelection',
                title: 'Select Your Therapist',
                description: 'Browse and select a therapist that matches your needs',
                required: true,
                estimatedTime: 15,
            },
        ],
        startedAt: new Date('2024-02-10T09:00:00Z'),
        lastUpdatedAt: new Date('2024-02-11T14:30:00Z'),
    };
    const mockCompletedOnboardingStatus = {
        ...mockOnboardingStatus,
        isCompleted: true,
        completionPercentage: 100,
        steps: {
            ...mockOnboardingStatus.steps,
            therapistSelection: {
                completed: true,
                completedAt: new Date('2024-02-12T16:00:00Z'),
                required: true,
            },
            firstSession: {
                completed: true,
                completedAt: new Date('2024-02-13T10:00:00Z'),
                required: false,
            },
        },
        nextSteps: [],
        completedAt: new Date('2024-02-13T10:00:00Z'),
    };
    const mockValidationResult = {
        isValid: true,
        missingSteps: [],
        recommendations: [
            {
                stepName: 'communityJoin',
                priority: 'low',
                reason: 'Joining a community can provide additional support',
            },
        ],
    };
    const mockOnboardingInsights = {
        totalUsers: 15234,
        completedOnboarding: 12456,
        completionRate: 81.7,
        averageCompletionTime: 3.2, // days
        stepCompletionRates: {
            profileSetup: 98.5,
            preAssessment: 94.2,
            therapistSelection: 87.3,
            firstSession: 76.8,
            communityJoin: 45.2,
        },
        commonDropOffPoints: [
            {
                stepName: 'therapistSelection',
                dropOffRate: 12.7,
                commonReasons: ['Too many options', 'Pricing concerns', 'Availability issues'],
            },
            {
                stepName: 'firstSession',
                dropOffRate: 10.5,
                commonReasons: ['Scheduling conflicts', 'Technical issues', 'Changed mind'],
            },
        ],
        recentTrends: {
            weeklyCompletions: [45, 52, 48, 67, 59, 71, 63],
            improvementAreas: ['therapist matching', 'scheduling flow', 'pricing clarity'],
        },
    };
    beforeEach(async () => {
        module = await testing_1.Test.createTestingModule({
            controllers: [onboarding_controller_1.OnboardingController],
            providers: [
                {
                    provide: onboarding_service_1.OnboardingService,
                    useValue: mockOnboardingService,
                },
            ],
        })
            .overrideGuard(jwt_auth_guard_1.JwtAuthGuard)
            .useValue(mockJwtAuthGuard)
            .overrideGuard(admin_auth_guard_1.AdminAuthGuard)
            .useValue(mockAdminAuthGuard)
            .compile();
        controller = module.get(onboarding_controller_1.OnboardingController);
        onboardingService = module.get(onboarding_service_1.OnboardingService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('Controller Initialization', () => {
        it('should be defined', () => {
            expect(controller).toBeDefined();
        });
        it('should have onboardingService injected', () => {
            expect(onboardingService).toBeDefined();
        });
    });
    describe('Security Guards', () => {
        it('should be protected by JwtAuthGuard', () => {
            const guards = Reflect.getMetadata('__guards__', onboarding_controller_1.OnboardingController);
            expect(guards).toContain(jwt_auth_guard_1.JwtAuthGuard);
        });
        it('should have proper route decorators', () => {
            const controllerMetadata = Reflect.getMetadata('path', onboarding_controller_1.OnboardingController);
            expect(controllerMetadata).toBe('onboarding');
        });
        it('should require admin role for admin-only endpoints', () => {
            const adminOnlyMethods = ['getUserOnboardingStatus', 'getOnboardingInsights'];
            adminOnlyMethods.forEach(method => {
                const metadata = Reflect.getMetadata('roles', controller[method]);
                expect(metadata).toEqual(['admin']);
            });
        });
    });
    describe('GET /onboarding/status', () => {
        it('should get my onboarding status successfully', async () => {
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const result = await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockOnboardingStatus);
            expect(onboardingService.getOnboardingStatus).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Failed to retrieve onboarding status');
            mockOnboardingService.getOnboardingStatus.mockRejectedValue(serviceError);
            await expect(controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
            try {
                await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.HttpException);
                expect(error.getStatus()).toBe(common_1.HttpStatus.INTERNAL_SERVER_ERROR);
                expect(error.getMessage()).toContain('Failed to retrieve onboarding status');
            }
        });
        it('should validate onboarding status structure', async () => {
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const result = await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('userId');
            expect(result).toHaveProperty('isCompleted');
            expect(result).toHaveProperty('completionPercentage');
            expect(result).toHaveProperty('steps');
            expect(result).toHaveProperty('nextSteps');
            expect(result).toHaveProperty('startedAt');
            expect(result).toHaveProperty('lastUpdatedAt');
            expect(typeof result.isCompleted).toBe('boolean');
            expect(typeof result.completionPercentage).toBe('number');
            expect(result.completionPercentage).toBeGreaterThanOrEqual(0);
            expect(result.completionPercentage).toBeLessThanOrEqual(100);
            expect(Array.isArray(result.nextSteps)).toBe(true);
        });
        it('should handle completed onboarding status', async () => {
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockCompletedOnboardingStatus);
            const result = await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(result.isCompleted).toBe(true);
            expect(result.completionPercentage).toBe(100);
            expect(result.nextSteps).toHaveLength(0);
            expect(result.completedAt).toBeDefined();
        });
    });
    describe('GET /onboarding/status/:userId', () => {
        it('should get user onboarding status successfully as admin', async () => {
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const result = await controller.getUserOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockOnboardingStatus);
            expect(onboardingService.getOnboardingStatus).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT);
        });
        it('should handle service errors for admin requests', async () => {
            const serviceError = new Error('User not found');
            mockOnboardingService.getOnboardingStatus.mockRejectedValue(serviceError);
            await expect(controller.getUserOnboardingStatus(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
        });
        it('should pass through HTTP exceptions from service', async () => {
            const httpError = new common_1.HttpException('User not found', common_1.HttpStatus.NOT_FOUND);
            mockOnboardingService.getOnboardingStatus.mockRejectedValue(httpError);
            await expect(controller.getUserOnboardingStatus('nonexistent_user')).rejects.toThrow(httpError);
        });
        it('should handle different user IDs', async () => {
            const userIds = [index_1.TEST_USER_IDS.CLIENT, index_1.TEST_USER_IDS.THERAPIST, 'custom_user_123'];
            for (const userId of userIds) {
                mockOnboardingService.getOnboardingStatus.mockResolvedValue({
                    ...mockOnboardingStatus,
                    userId,
                });
                const result = await controller.getUserOnboardingStatus(userId);
                expect(result.userId).toBe(userId);
            }
        });
    });
    describe('POST /onboarding/complete-step/:stepName', () => {
        it('should complete step successfully', async () => {
            const updatedStatus = {
                ...mockOnboardingStatus,
                steps: {
                    ...mockOnboardingStatus.steps,
                    therapistSelection: {
                        completed: true,
                        completedAt: new Date('2024-02-12T16:00:00Z'),
                        required: true,
                    },
                },
                completionPercentage: 80,
            };
            mockOnboardingService.markStepCompleted.mockResolvedValue(updatedStatus);
            const result = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'therapistSelection');
            expect(result).toEqual(updatedStatus);
            expect(onboardingService.markStepCompleted).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, 'therapistSelection');
        });
        it('should handle different step names', async () => {
            const stepNames = [
                'profileSetup',
                'preAssessment',
                'therapistSelection',
                'firstSession',
                'communityJoin',
            ];
            for (const stepName of stepNames) {
                mockOnboardingService.markStepCompleted.mockResolvedValue({
                    ...mockOnboardingStatus,
                    steps: {
                        ...mockOnboardingStatus.steps,
                        [stepName]: {
                            completed: true,
                            completedAt: new Date(),
                            required: true,
                        },
                    },
                });
                const result = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, stepName);
                expect(result.steps[stepName].completed).toBe(true);
            }
        });
        it('should handle service errors during step completion', async () => {
            const serviceError = new Error('Invalid step name');
            mockOnboardingService.markStepCompleted.mockRejectedValue(serviceError);
            await expect(controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'invalidStep')).rejects.toThrow(common_1.HttpException);
            try {
                await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'invalidStep');
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.HttpException);
                expect(error.getStatus()).toBe(common_1.HttpStatus.INTERNAL_SERVER_ERROR);
                expect(error.getMessage()).toContain('Failed to complete onboarding step');
            }
        });
        it('should validate completion progress updates', async () => {
            const initialPercentage = mockOnboardingStatus.completionPercentage;
            const updatedStatus = {
                ...mockOnboardingStatus,
                completionPercentage: initialPercentage + 20,
            };
            mockOnboardingService.markStepCompleted.mockResolvedValue(updatedStatus);
            const result = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'therapistSelection');
            expect(result.completionPercentage).toBeGreaterThan(initialPercentage);
            expect(result.completionPercentage).toBeLessThanOrEqual(100);
        });
    });
    describe('GET /onboarding/validate', () => {
        it('should validate onboarding successfully', async () => {
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue(mockValidationResult);
            const result = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockValidationResult);
            expect(onboardingService.validateOnboardingCompleteness).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT);
        });
        it('should handle validation with missing steps', async () => {
            const validationWithMissingSteps = {
                isValid: false,
                missingSteps: ['therapistSelection', 'firstSession'],
                recommendations: [
                    {
                        stepName: 'therapistSelection',
                        priority: 'high',
                        reason: 'Required step for accessing therapy services',
                    },
                ],
            };
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue(validationWithMissingSteps);
            const result = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(result.isValid).toBe(false);
            expect(result.missingSteps).toHaveLength(2);
            expect(result.recommendations).toHaveLength(1);
        });
        it('should handle service errors during validation', async () => {
            const serviceError = new Error('Validation service unavailable');
            mockOnboardingService.validateOnboardingCompleteness.mockRejectedValue(serviceError);
            await expect(controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
            try {
                await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.HttpException);
                expect(error.getStatus()).toBe(common_1.HttpStatus.INTERNAL_SERVER_ERROR);
                expect(error.getMessage()).toContain('Failed to validate onboarding completeness');
            }
        });
        it('should validate response structure', async () => {
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue(mockValidationResult);
            const result = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('isValid');
            expect(result).toHaveProperty('missingSteps');
            expect(result).toHaveProperty('recommendations');
            expect(typeof result.isValid).toBe('boolean');
            expect(Array.isArray(result.missingSteps)).toBe(true);
            expect(Array.isArray(result.recommendations)).toBe(true);
        });
    });
    describe('GET /onboarding/insights', () => {
        it('should get onboarding insights successfully as admin', async () => {
            mockOnboardingService.getOnboardingInsights.mockResolvedValue(mockOnboardingInsights);
            const result = await controller.getOnboardingInsights();
            expect(result).toEqual(mockOnboardingInsights);
            expect(onboardingService.getOnboardingInsights).toHaveBeenCalled();
        });
        it('should handle service errors for insights', async () => {
            const serviceError = new Error('Analytics service unavailable');
            mockOnboardingService.getOnboardingInsights.mockRejectedValue(serviceError);
            await expect(controller.getOnboardingInsights()).rejects.toThrow(common_1.HttpException);
            try {
                await controller.getOnboardingInsights();
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.HttpException);
                expect(error.getStatus()).toBe(common_1.HttpStatus.INTERNAL_SERVER_ERROR);
                expect(error.getMessage()).toContain('Failed to retrieve onboarding insights');
            }
        });
        it('should validate insights structure', async () => {
            mockOnboardingService.getOnboardingInsights.mockResolvedValue(mockOnboardingInsights);
            const result = await controller.getOnboardingInsights();
            expect(result).toHaveProperty('totalUsers');
            expect(result).toHaveProperty('completedOnboarding');
            expect(result).toHaveProperty('completionRate');
            expect(result).toHaveProperty('averageCompletionTime');
            expect(result).toHaveProperty('stepCompletionRates');
            expect(result).toHaveProperty('commonDropOffPoints');
            expect(result).toHaveProperty('recentTrends');
            expect(typeof result.totalUsers).toBe('number');
            expect(typeof result.completionRate).toBe('number');
            expect(typeof result.averageCompletionTime).toBe('number');
            expect(typeof result.stepCompletionRates).toBe('object');
            expect(Array.isArray(result.commonDropOffPoints)).toBe(true);
            expect(Array.isArray(result.recentTrends.weeklyCompletions)).toBe(true);
            // Validate completion rate range
            expect(result.completionRate).toBeGreaterThanOrEqual(0);
            expect(result.completionRate).toBeLessThanOrEqual(100);
        });
        it('should validate step completion rates', async () => {
            mockOnboardingService.getOnboardingInsights.mockResolvedValue(mockOnboardingInsights);
            const result = await controller.getOnboardingInsights();
            const stepRates = result.stepCompletionRates;
            Object.values(stepRates).forEach(rate => {
                expect(typeof rate).toBe('number');
                expect(rate).toBeGreaterThanOrEqual(0);
                expect(rate).toBeLessThanOrEqual(100);
            });
        });
    });
    describe('Response Format Validation', () => {
        it('should return properly formatted onboarding status', async () => {
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const result = await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('userId');
            expect(result).toHaveProperty('isCompleted');
            expect(result).toHaveProperty('completionPercentage');
            expect(result).toHaveProperty('steps');
            expect(result).toHaveProperty('nextSteps');
            expect(result).toHaveProperty('startedAt');
            expect(result).toHaveProperty('lastUpdatedAt');
            expect(result.startedAt).toBeInstanceOf(Date);
            expect(result.lastUpdatedAt).toBeInstanceOf(Date);
            expect(typeof result.completionPercentage).toBe('number');
        });
        it('should return properly formatted validation result', async () => {
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue(mockValidationResult);
            const result = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('isValid');
            expect(result).toHaveProperty('missingSteps');
            expect(result).toHaveProperty('recommendations');
            expect(typeof result.isValid).toBe('boolean');
            expect(Array.isArray(result.missingSteps)).toBe(true);
            expect(Array.isArray(result.recommendations)).toBe(true);
        });
        it('should return properly formatted insights', async () => {
            mockOnboardingService.getOnboardingInsights.mockResolvedValue(mockOnboardingInsights);
            const result = await controller.getOnboardingInsights();
            expect(result).toHaveProperty('totalUsers');
            expect(result).toHaveProperty('completedOnboarding');
            expect(result).toHaveProperty('completionRate');
            expect(result).toHaveProperty('stepCompletionRates');
            expect(result).toHaveProperty('commonDropOffPoints');
            expect(typeof result.totalUsers).toBe('number');
            expect(typeof result.completionRate).toBe('number');
        });
    });
    describe('Error Handling', () => {
        it('should handle database connection errors', async () => {
            const dbError = new Error('Database connection failed');
            mockOnboardingService.getOnboardingStatus.mockRejectedValue(dbError);
            await expect(controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
        });
        it('should handle invalid user IDs', async () => {
            const invalidUserError = new Error('Invalid user ID format');
            mockOnboardingService.getOnboardingStatus.mockRejectedValue(invalidUserError);
            await expect(controller.getMyOnboardingStatus('invalid-user-id')).rejects.toThrow(common_1.HttpException);
        });
        it('should handle onboarding service unavailable', async () => {
            const serviceError = new Error('Onboarding service temporarily unavailable');
            mockOnboardingService.markStepCompleted.mockRejectedValue(serviceError);
            await expect(controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'profileSetup')).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('Integration Tests', () => {
        it('should handle complete onboarding workflow', async () => {
            // Get initial status
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const initialStatus = await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(initialStatus.isCompleted).toBe(false);
            // Complete a step
            const updatedStatus = {
                ...mockOnboardingStatus,
                completionPercentage: 80,
            };
            mockOnboardingService.markStepCompleted.mockResolvedValue(updatedStatus);
            const stepResult = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'therapistSelection');
            expect(stepResult.completionPercentage).toBeGreaterThan(initialStatus.completionPercentage);
            // Validate onboarding
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue(mockValidationResult);
            const validationResult = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(validationResult).toHaveProperty('isValid');
        });
        it('should handle admin insights workflow', async () => {
            // Get insights as admin
            mockOnboardingService.getOnboardingInsights.mockResolvedValue(mockOnboardingInsights);
            const insights = await controller.getOnboardingInsights();
            expect(insights.totalUsers).toBeGreaterThan(0);
            expect(insights.completionRate).toBeGreaterThan(0);
            // Get specific user status as admin
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const userStatus = await controller.getUserOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(userStatus.userId).toBe(index_1.TEST_USER_IDS.CLIENT);
        });
        it('should validate onboarding progression logic', async () => {
            // Test progression through multiple steps
            const steps = ['profileSetup', 'preAssessment', 'therapistSelection'];
            let currentPercentage = 0;
            for (let i = 0; i < steps.length; i++) {
                const newPercentage = Math.round(((i + 1) / steps.length) * 100);
                mockOnboardingService.markStepCompleted.mockResolvedValue({
                    ...mockOnboardingStatus,
                    completionPercentage: newPercentage,
                });
                const result = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, steps[i]);
                expect(result.completionPercentage).toBeGreaterThanOrEqual(currentPercentage);
                currentPercentage = result.completionPercentage;
            }
        });
        it('should handle edge cases in onboarding flow', async () => {
            // Test completing already completed step
            mockOnboardingService.markStepCompleted.mockResolvedValue(mockOnboardingStatus);
            const result = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'profileSetup');
            expect(result.steps.profileSetup.completed).toBe(true);
            // Test validation for completed onboarding
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue({
                isValid: true,
                missingSteps: [],
                recommendations: [],
            });
            const validation = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(validation.isValid).toBe(true);
            expect(validation.missingSteps).toHaveLength(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL29uYm9hcmRpbmcvb25ib2FyZGluZy5jb250cm9sbGVyLnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCw2Q0FBc0Q7QUFDdEQsMkNBQTJEO0FBQzNELG1FQUErRDtBQUMvRCw2REFBMkU7QUFDM0Usa0VBQTZEO0FBQzdELHNFQUFpRTtBQUdqRSwrQ0FBaUU7QUFFakUsUUFBUSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRTtJQUNwQyxJQUFJLFVBQWdDLENBQUM7SUFDckMsSUFBSSxpQkFBb0MsQ0FBQztJQUN6QyxJQUFJLE1BQXFCLENBQUM7SUFFMUIseUJBQXlCO0lBQ3pCLE1BQU0scUJBQXFCLEdBQUc7UUFDNUIsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUM5QixpQkFBaUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQzVCLDhCQUE4QixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDekMscUJBQXFCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNqQyxDQUFDO0lBRUYsY0FBYztJQUNkLE1BQU0sZ0JBQWdCLEdBQUc7UUFDdkIsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDO0tBQzdDLENBQUM7SUFFRixNQUFNLGtCQUFrQixHQUFHO1FBQ3pCLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQztLQUM3QyxDQUFDO0lBRUYsWUFBWTtJQUNaLE1BQU0sb0JBQW9CLEdBQXFCO1FBQzdDLE1BQU0sRUFBRSxxQkFBYSxDQUFDLE1BQU07UUFDNUIsV0FBVyxFQUFFLEtBQUs7UUFDbEIsb0JBQW9CLEVBQUUsRUFBRTtRQUN4QixLQUFLLEVBQUU7WUFDTCxZQUFZLEVBQUU7Z0JBQ1osU0FBUyxFQUFFLElBQUk7Z0JBQ2YsV0FB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RUFBRSxjQUFjLENBQUMsQ0FBQztZQUNuRixNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRXZELDJDQUEyQztZQUMzQyxxQkFBcUIsQ0FBQyw4QkFBOEIsQ0FBQyxpQkFBaUIsQ0FBQztnQkFDckUsT0FBTyxFQUFFLElBQUk7Z0JBQ2IsWUFBWSxFQUFFLEVBQUU7Z0JBQ2hCLGVBQWUsRUFBRSxFQUFFO2FBQ3BCLENBQUMsQ0FBQztZQUNILE1BQU0sVUFBVSxHQUFHLE1BQU0sVUFBVSxDQUFDLGtCQUFrQixDQUFDLHFCQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDN0UsTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy9vbmJvYXJkaW5nL29uYm9hcmRpbmcuY29udHJvbGxlci5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSBUZXN0IFN1aXRlIGZvciBPbmJvYXJkaW5nQ29udHJvbGxlclxuICogVGVzdHMgdXNlciBvbmJvYXJkaW5nIGZsb3cgbWFuYWdlbWVudCBhbmQgY29tcGxldGlvbiB0cmFja2luZ1xuICovXG5cbmltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgSHR0cEV4Y2VwdGlvbiwgSHR0cFN0YXR1cyB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IE9uYm9hcmRpbmdDb250cm9sbGVyIH0gZnJvbSAnLi9vbmJvYXJkaW5nLmNvbnRyb2xsZXInO1xuaW1wb3J0IHsgT25ib2FyZGluZ1NlcnZpY2UsIE9uYm9hcmRpbmdTdGF0dXMgfSBmcm9tICcuL29uYm9hcmRpbmcuc2VydmljZSc7XG5pbXBvcnQgeyBKd3RBdXRoR3VhcmQgfSBmcm9tICcuLi9hdXRoL2d1YXJkcy9qd3QtYXV0aC5ndWFyZCc7XG5pbXBvcnQgeyBBZG1pbkF1dGhHdWFyZCB9IGZyb20gJy4uL2F1dGgvZ3VhcmRzL2FkbWluLWF1dGguZ3VhcmQnO1xuaW1wb3J0IHsgU2VjdXJpdHlHdWFyZFRlc3RVdGlscywgUm9sZUJhc2VkVGVzdFV0aWxzIH0gZnJvbSAnLi4vdGVzdC11dGlscy9hdXRoLXRlc3RpbmctaGVscGVycyc7XG5pbXBvcnQgeyBNb2NrQnVpbGRlciwgVGVzdERhdGFHZW5lcmF0b3IsIFRlc3RBc3NlcnRpb25zIH0gZnJvbSAnLi4vdGVzdC11dGlscy9lbmhhbmNlZC10ZXN0LWhlbHBlcnMnO1xuaW1wb3J0IHsgVEVTVF9VU0VSX0lEUywgVEVTVF9FTUFJTFMgfSBmcm9tICcuLi90ZXN0LXV0aWxzL2luZGV4JztcblxuZGVzY3JpYmUoJ09uYm9hcmRpbmdDb250cm9sbGVyJywgKCkgPT4ge1xuICBsZXQgY29udHJvbGxlcjogT25ib2FyZGluZ0NvbnRyb2xsZXI7XG4gIGxldCBvbmJvYXJkaW5nU2VydmljZTogT25ib2FyZGluZ1NlcnZpY2U7XG4gIGxldCBtb2R1bGU6IFRlc3RpbmdNb2R1bGU7XG5cbiAgLy8gTW9jayBPbmJvYXJkaW5nU2VydmljZVxuICBjb25zdCBtb2NrT25ib2FyZGluZ1NlcnZpY2UgPSB7XG4gICAgZ2V0T25ib2FyZGluZ1N0YXR1czogamVzdC5mbigpLFxuICAgIG1hcmtTdGVwQ29tcGxldGVkOiBqZXN0LmZuKCksXG4gICAgdmFsaWRhdGVPbmJvYXJkaW5nQ29tcGxldGVuZXNzOiBqZXN0LmZuKCksXG4gICAgZ2V0T25ib2FyZGluZ0luc2lnaHRzOiBqZXN0LmZuKCksXG4gIH07XG5cbiAgLy8gTW9jayBHdWFyZHNcbiAgY29uc3QgbW9ja0p3dEF1dGhHdWFyZCA9IHtcbiAgICBjYW5BY3RpdmF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKSxcbiAgfTtcblxuICBjb25zdCBtb2NrQWRtaW5BdXRoR3VhcmQgPSB7XG4gICAgY2FuQWN0aXZhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSksXG4gIH07XG5cbiAgLy8gVGVzdCBkYXRhXG4gIGNvbnN0IG1vY2tPbmJvYXJkaW5nU3RhdHVzOiBPbmJvYXJkaW5nU3RhdHVzID0ge1xuICAgIHVzZXJJZDogVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxuICAgIGNvbXBsZXRpb25QZXJjZW50YWdlOiA2MCxcbiAgICBzdGVwczoge1xuICAgICAgcHJvZmlsZVNldHVwOiB7XG4gICAgICAgIGNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAyLTEwVDEwOjAwOjAwWicpLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBwcmVBc3Nlc3NtZW50OiB7XG4gICAgICAgIGNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAyLTExVDE0OjAwOjAwWicpLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICB0aGVyYXBpc3RTZWxlY3Rpb246IHtcbiAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICAgICAgY29tcGxldGVkQXQ6IG51bGwsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIGZpcnN0U2Vzc2lvbjoge1xuICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgICBjb21wbGV0ZWRBdDogbnVsbCxcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGNvbW11bml0eUpvaW46IHtcbiAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICAgICAgY29tcGxldGVkQXQ6IG51bGwsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBuZXh0U3RlcHM6IFtcbiAgICAgIHtcbiAgICAgICAgc3RlcE5hbWU6ICd0aGVyYXBpc3RTZWxlY3Rpb24nLFxuICAgICAgICB0aXRsZTogJ1NlbGVjdCBZb3VyIFRoZXJhcGlzdCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQnJvd3NlIGFuZCBzZWxlY3QgYSB0aGVyYXBpc3QgdGhhdCBtYXRjaGVzIHlvdXIgbmVlZHMnLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZXN0aW1hdGVkVGltZTogMTUsXG4gICAgICB9LFxuICAgIF0sXG4gICAgc3RhcnRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMi0xMFQwOTowMDowMFonKSxcbiAgICBsYXN0VXBkYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMi0xMVQxNDozMDowMFonKSxcbiAgfTtcblxuICBjb25zdCBtb2NrQ29tcGxldGVkT25ib2FyZGluZ1N0YXR1czogT25ib2FyZGluZ1N0YXR1cyA9IHtcbiAgICAuLi5tb2NrT25ib2FyZGluZ1N0YXR1cyxcbiAgICBpc0NvbXBsZXRlZDogdHJ1ZSxcbiAgICBjb21wbGV0aW9uUGVyY2VudGFnZTogMTAwLFxuICAgIHN0ZXBzOiB7XG4gICAgICAuLi5tb2NrT25ib2FyZGluZ1N0YXR1cy5zdGVwcyxcbiAgICAgIHRoZXJhcGlzdFNlbGVjdGlvbjoge1xuICAgICAgICBjb21wbGV0ZWQ6IHRydWUsXG4gICAgICAgIGNvbXBsZXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMi0xMlQxNjowMDowMFonKSxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgZmlyc3RTZXNzaW9uOiB7XG4gICAgICAgIGNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAyLTEzVDEwOjAwOjAwWicpLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbmV4dFN0ZXBzOiBbXSxcbiAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDItMTNUMTA6MDA6MDBaJyksXG4gIH07XG5cbiAgY29uc3QgbW9ja1ZhbGlkYXRpb25SZXN1bHQgPSB7XG4gICAgaXNWYWxpZDogdHJ1ZSxcbiAgICBtaXNzaW5nU3RlcHM6IFtdLFxuICAgIHJlY29tbWVuZGF0aW9uczogW1xuICAgICAge1xuICAgICAgICBzdGVwTmFtZTogJ2NvbW11bml0eUpvaW4nLFxuICAgICAgICBwcmlvcml0eTogJ2xvdycsXG4gICAgICAgIHJlYXNvbjogJ0pvaW5pbmcgYSBjb21tdW5pdHkgY2FuIHByb3ZpZGUgYWRkaXRpb25hbCBzdXBwb3J0JyxcbiAgICAgIH0sXG4gICAgXSxcbiAgfTtcblxuICBjb25zdCBtb2NrT25ib2FyZGluZ0luc2lnaHRzID0ge1xuICAgIHRvdGFsVXNlcnM6IDE1MjM0LFxuICAgIGNvbXBsZXRlZE9uYm9hcmRpbmc6IDEyNDU2LFxuICAgIGNvbXBsZXRpb25SYXRlOiA4MS43LFxuICAgIGF2ZXJhZ2VDb21wbGV0aW9uVGltZTogMy4yLCAvLyBkYXlzXG4gICAgc3RlcENvbXBsZXRpb25SYXRlczoge1xuICAgICAgcHJvZmlsZVNldHVwOiA5OC41LFxuICAgICAgcHJlQXNzZXNzbWVudDogOTQuMixcbiAgICAgIHRoZXJhcGlzdFNlbGVjdGlvbjogODcuMyxcbiAgICAgIGZpcnN0U2Vzc2lvbjogNzYuOCxcbiAgICAgIGNvbW11bml0eUpvaW46IDQ1LjIsXG4gICAgfSxcbiAgICBjb21tb25Ecm9wT2ZmUG9pbnRzOiBbXG4gICAgICB7XG4gICAgICAgIHN0ZXBOYW1lOiAndGhlcmFwaXN0U2VsZWN0aW9uJyxcbiAgICAgICAgZHJvcE9mZlJhdGU6IDEyLjcsXG4gICAgICAgIGNvbW1vblJlYXNvbnM6IFsnVG9vIG1hbnkgb3B0aW9ucycsICdQcmljaW5nIGNvbmNlcm5zJywgJ0F2YWlsYWJpbGl0eSBpc3N1ZXMnXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHN0ZXBOYW1lOiAnZmlyc3RTZXNzaW9uJyxcbiAgICAgICAgZHJvcE9mZlJhdGU6IDEwLjUsXG4gICAgICAgIGNvbW1vblJlYXNvbnM6IFsnU2NoZWR1bGluZyBjb25mbGljdHMnLCAnVGVjaG5pY2FsIGlzc3VlcycsICdDaGFuZ2VkIG1pbmQnXSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICByZWNlbnRUcmVuZHM6IHtcbiAgICAgIHdlZWtseUNvbXBsZXRpb25zOiBbNDUsIDUyLCA0OCwgNjcsIDU5LCA3MSwgNjNdLFxuICAgICAgaW1wcm92ZW1lbnRBcmVhczogWyd0aGVyYXBpc3QgbWF0Y2hpbmcnLCAnc2NoZWR1bGluZyBmbG93JywgJ3ByaWNpbmcgY2xhcml0eSddLFxuICAgIH0sXG4gIH07XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgbW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIGNvbnRyb2xsZXJzOiBbT25ib2FyZGluZ0NvbnRyb2xsZXJdLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBPbmJvYXJkaW5nU2VydmljZSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja09uYm9hcmRpbmdTZXJ2aWNlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KVxuICAgICAgLm92ZXJyaWRlR3VhcmQoSnd0QXV0aEd1YXJkKVxuICAgICAgLnVzZVZhbHVlKG1vY2tKd3RBdXRoR3VhcmQpXG4gICAgICAub3ZlcnJpZGVHdWFyZChBZG1pbkF1dGhHdWFyZClcbiAgICAgIC51c2VWYWx1ZShtb2NrQWRtaW5BdXRoR3VhcmQpXG4gICAgICAuY29tcGlsZSgpO1xuXG4gICAgY29udHJvbGxlciA9IG1vZHVsZS5nZXQ8T25ib2FyZGluZ0NvbnRyb2xsZXI+KE9uYm9hcmRpbmdDb250cm9sbGVyKTtcbiAgICBvbmJvYXJkaW5nU2VydmljZSA9IG1vZHVsZS5nZXQ8T25ib2FyZGluZ1NlcnZpY2U+KE9uYm9hcmRpbmdTZXJ2aWNlKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbnRyb2xsZXIgSW5pdGlhbGl6YXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBiZSBkZWZpbmVkJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGNvbnRyb2xsZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgb25ib2FyZGluZ1NlcnZpY2UgaW5qZWN0ZWQnLCAoKSA9PiB7XG4gICAgICBleHBlY3Qob25ib2FyZGluZ1NlcnZpY2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZWN1cml0eSBHdWFyZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBiZSBwcm90ZWN0ZWQgYnkgSnd0QXV0aEd1YXJkJywgKCkgPT4ge1xuICAgICAgY29uc3QgZ3VhcmRzID0gUmVmbGVjdC5nZXRNZXRhZGF0YSgnX19ndWFyZHNfXycsIE9uYm9hcmRpbmdDb250cm9sbGVyKTtcbiAgICAgIGV4cGVjdChndWFyZHMpLnRvQ29udGFpbihKd3RBdXRoR3VhcmQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciByb3V0ZSBkZWNvcmF0b3JzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29udHJvbGxlck1ldGFkYXRhID0gUmVmbGVjdC5nZXRNZXRhZGF0YSgncGF0aCcsIE9uYm9hcmRpbmdDb250cm9sbGVyKTtcbiAgICAgIGV4cGVjdChjb250cm9sbGVyTWV0YWRhdGEpLnRvQmUoJ29uYm9hcmRpbmcnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSBhZG1pbiByb2xlIGZvciBhZG1pbi1vbmx5IGVuZHBvaW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFkbWluT25seU1ldGhvZHMgPSBbJ2dldFVzZXJPbmJvYXJkaW5nU3RhdHVzJywgJ2dldE9uYm9hcmRpbmdJbnNpZ2h0cyddO1xuICAgICAgYWRtaW5Pbmx5TWV0aG9kcy5mb3JFYWNoKG1ldGhvZCA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gUmVmbGVjdC5nZXRNZXRhZGF0YSgncm9sZXMnLCBjb250cm9sbGVyW21ldGhvZF0pO1xuICAgICAgICBleHBlY3QobWV0YWRhdGEpLnRvRXF1YWwoWydhZG1pbiddKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9vbmJvYXJkaW5nL3N0YXR1cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCBteSBvbmJvYXJkaW5nIHN0YXR1cyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ1N0YXR1cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ1N0YXR1cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0TXlPbmJvYXJkaW5nU3RhdHVzKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrT25ib2FyZGluZ1N0YXR1cyk7XG4gICAgICBleHBlY3Qob25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ0ZhaWxlZCB0byByZXRyaWV2ZSBvbmJvYXJkaW5nIHN0YXR1cycpO1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdTdGF0dXMubW9ja1JlamVjdGVkVmFsdWUoc2VydmljZUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmdldE15T25ib2FyZGluZ1N0YXR1cyhURVNUX1VTRVJfSURTLkNMSUVOVClcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEh0dHBFeGNlcHRpb24pO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBjb250cm9sbGVyLmdldE15T25ib2FyZGluZ1N0YXR1cyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKEh0dHBFeGNlcHRpb24pO1xuICAgICAgICBleHBlY3QoZXJyb3IuZ2V0U3RhdHVzKCkpLnRvQmUoSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IpO1xuICAgICAgICBleHBlY3QoZXJyb3IuZ2V0TWVzc2FnZSgpKS50b0NvbnRhaW4oJ0ZhaWxlZCB0byByZXRyaWV2ZSBvbmJvYXJkaW5nIHN0YXR1cycpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBvbmJvYXJkaW5nIHN0YXR1cyBzdHJ1Y3R1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ1N0YXR1cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ1N0YXR1cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0TXlPbmJvYXJkaW5nU3RhdHVzKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3VzZXJJZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2lzQ29tcGxldGVkJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnY29tcGxldGlvblBlcmNlbnRhZ2UnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdGVwcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ25leHRTdGVwcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0YXJ0ZWRBdCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2xhc3RVcGRhdGVkQXQnKTtcblxuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuaXNDb21wbGV0ZWQpLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmNvbXBsZXRpb25QZXJjZW50YWdlKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29tcGxldGlvblBlcmNlbnRhZ2UpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRpb25QZXJjZW50YWdlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQubmV4dFN0ZXBzKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlZCBvbmJvYXJkaW5nIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nU3RhdHVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb21wbGV0ZWRPbmJvYXJkaW5nU3RhdHVzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRNeU9uYm9hcmRpbmdTdGF0dXMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzQ29tcGxldGVkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGV0aW9uUGVyY2VudGFnZSkudG9CZSgxMDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5uZXh0U3RlcHMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29tcGxldGVkQXQpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL29uYm9hcmRpbmcvc3RhdHVzLzp1c2VySWQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgdXNlciBvbmJvYXJkaW5nIHN0YXR1cyBzdWNjZXNzZnVsbHkgYXMgYWRtaW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ1N0YXR1cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ1N0YXR1cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VXNlck9uYm9hcmRpbmdTdGF0dXMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tPbmJvYXJkaW5nU3RhdHVzKTtcbiAgICAgIGV4cGVjdChvbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycyBmb3IgYWRtaW4gcmVxdWVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ1N0YXR1cy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0VXNlck9uYm9hcmRpbmdTdGF0dXMoVEVTVF9VU0VSX0lEUy5DTElFTlQpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcGFzcyB0aHJvdWdoIEhUVFAgZXhjZXB0aW9ucyBmcm9tIHNlcnZpY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBodHRwRXJyb3IgPSBuZXcgSHR0cEV4Y2VwdGlvbignVXNlciBub3QgZm91bmQnLCBIdHRwU3RhdHVzLk5PVF9GT1VORCk7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ1N0YXR1cy5tb2NrUmVqZWN0ZWRWYWx1ZShodHRwRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0VXNlck9uYm9hcmRpbmdTdGF0dXMoJ25vbmV4aXN0ZW50X3VzZXInKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coaHR0cEVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCB1c2VyIElEcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJJZHMgPSBbVEVTVF9VU0VSX0lEUy5DTElFTlQsIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULCAnY3VzdG9tX3VzZXJfMTIzJ107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgdXNlcklkIG9mIHVzZXJJZHMpIHtcbiAgICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdTdGF0dXMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIC4uLm1vY2tPbmJvYXJkaW5nU3RhdHVzLFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRVc2VyT25ib2FyZGluZ1N0YXR1cyh1c2VySWQpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnVzZXJJZCkudG9CZSh1c2VySWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUE9TVCAvb25ib2FyZGluZy9jb21wbGV0ZS1zdGVwLzpzdGVwTmFtZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvbXBsZXRlIHN0ZXAgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlZFN0YXR1cyA9IHtcbiAgICAgICAgLi4ubW9ja09uYm9hcmRpbmdTdGF0dXMsXG4gICAgICAgIHN0ZXBzOiB7XG4gICAgICAgICAgLi4ubW9ja09uYm9hcmRpbmdTdGF0dXMuc3RlcHMsXG4gICAgICAgICAgdGhlcmFwaXN0U2VsZWN0aW9uOiB7XG4gICAgICAgICAgICBjb21wbGV0ZWQ6IHRydWUsXG4gICAgICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDItMTJUMTY6MDA6MDBaJyksXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0aW9uUGVyY2VudGFnZTogODAsXG4gICAgICB9O1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLm1hcmtTdGVwQ29tcGxldGVkLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRTdGF0dXMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNvbXBsZXRlU3RlcChURVNUX1VTRVJfSURTLkNMSUVOVCwgJ3RoZXJhcGlzdFNlbGVjdGlvbicpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHVwZGF0ZWRTdGF0dXMpO1xuICAgICAgZXhwZWN0KG9uYm9hcmRpbmdTZXJ2aWNlLm1hcmtTdGVwQ29tcGxldGVkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgICd0aGVyYXBpc3RTZWxlY3Rpb24nXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGlmZmVyZW50IHN0ZXAgbmFtZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGVwTmFtZXMgPSBbXG4gICAgICAgICdwcm9maWxlU2V0dXAnLFxuICAgICAgICAncHJlQXNzZXNzbWVudCcsXG4gICAgICAgICd0aGVyYXBpc3RTZWxlY3Rpb24nLFxuICAgICAgICAnZmlyc3RTZXNzaW9uJyxcbiAgICAgICAgJ2NvbW11bml0eUpvaW4nLFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBzdGVwTmFtZSBvZiBzdGVwTmFtZXMpIHtcbiAgICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLm1hcmtTdGVwQ29tcGxldGVkLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAuLi5tb2NrT25ib2FyZGluZ1N0YXR1cyxcbiAgICAgICAgICBzdGVwczoge1xuICAgICAgICAgICAgLi4ubW9ja09uYm9hcmRpbmdTdGF0dXMuc3RlcHMsXG4gICAgICAgICAgICBbc3RlcE5hbWVdOiB7XG4gICAgICAgICAgICAgIGNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNvbXBsZXRlU3RlcChURVNUX1VTRVJfSURTLkNMSUVOVCwgc3RlcE5hbWUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnN0ZXBzW3N0ZXBOYW1lXS5jb21wbGV0ZWQpLnRvQmUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycyBkdXJpbmcgc3RlcCBjb21wbGV0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdJbnZhbGlkIHN0ZXAgbmFtZScpO1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLm1hcmtTdGVwQ29tcGxldGVkLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5jb21wbGV0ZVN0ZXAoVEVTVF9VU0VSX0lEUy5DTElFTlQsICdpbnZhbGlkU3RlcCcpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY29udHJvbGxlci5jb21wbGV0ZVN0ZXAoVEVTVF9VU0VSX0lEUy5DTElFTlQsICdpbnZhbGlkU3RlcCcpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihIdHRwRXhjZXB0aW9uKTtcbiAgICAgICAgZXhwZWN0KGVycm9yLmdldFN0YXR1cygpKS50b0JlKEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SKTtcbiAgICAgICAgZXhwZWN0KGVycm9yLmdldE1lc3NhZ2UoKSkudG9Db250YWluKCdGYWlsZWQgdG8gY29tcGxldGUgb25ib2FyZGluZyBzdGVwJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNvbXBsZXRpb24gcHJvZ3Jlc3MgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxQZXJjZW50YWdlID0gbW9ja09uYm9hcmRpbmdTdGF0dXMuY29tcGxldGlvblBlcmNlbnRhZ2U7XG4gICAgICBjb25zdCB1cGRhdGVkU3RhdHVzID0ge1xuICAgICAgICAuLi5tb2NrT25ib2FyZGluZ1N0YXR1cyxcbiAgICAgICAgY29tcGxldGlvblBlcmNlbnRhZ2U6IGluaXRpYWxQZXJjZW50YWdlICsgMjAsXG4gICAgICB9O1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLm1hcmtTdGVwQ29tcGxldGVkLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRTdGF0dXMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNvbXBsZXRlU3RlcChURVNUX1VTRVJfSURTLkNMSUVOVCwgJ3RoZXJhcGlzdFNlbGVjdGlvbicpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRpb25QZXJjZW50YWdlKS50b0JlR3JlYXRlclRoYW4oaW5pdGlhbFBlcmNlbnRhZ2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGV0aW9uUGVyY2VudGFnZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9vbmJvYXJkaW5nL3ZhbGlkYXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgb25ib2FyZGluZyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UudmFsaWRhdGVPbmJvYXJkaW5nQ29tcGxldGVuZXNzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tWYWxpZGF0aW9uUmVzdWx0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci52YWxpZGF0ZU9uYm9hcmRpbmcoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tWYWxpZGF0aW9uUmVzdWx0KTtcbiAgICAgIGV4cGVjdChvbmJvYXJkaW5nU2VydmljZS52YWxpZGF0ZU9uYm9hcmRpbmdDb21wbGV0ZW5lc3MpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHZhbGlkYXRpb24gd2l0aCBtaXNzaW5nIHN0ZXBzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbldpdGhNaXNzaW5nU3RlcHMgPSB7XG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICBtaXNzaW5nU3RlcHM6IFsndGhlcmFwaXN0U2VsZWN0aW9uJywgJ2ZpcnN0U2Vzc2lvbiddLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdGVwTmFtZTogJ3RoZXJhcGlzdFNlbGVjdGlvbicsXG4gICAgICAgICAgICBwcmlvcml0eTogJ2hpZ2gnLFxuICAgICAgICAgICAgcmVhc29uOiAnUmVxdWlyZWQgc3RlcCBmb3IgYWNjZXNzaW5nIHRoZXJhcHkgc2VydmljZXMnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLnZhbGlkYXRlT25ib2FyZGluZ0NvbXBsZXRlbmVzcy5tb2NrUmVzb2x2ZWRWYWx1ZSh2YWxpZGF0aW9uV2l0aE1pc3NpbmdTdGVwcyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudmFsaWRhdGVPbmJvYXJkaW5nKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWlzc2luZ1N0ZXBzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0LnJlY29tbWVuZGF0aW9ucykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMgZHVyaW5nIHZhbGlkYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ1ZhbGlkYXRpb24gc2VydmljZSB1bmF2YWlsYWJsZScpO1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLnZhbGlkYXRlT25ib2FyZGluZ0NvbXBsZXRlbmVzcy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIudmFsaWRhdGVPbmJvYXJkaW5nKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coSHR0cEV4Y2VwdGlvbik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNvbnRyb2xsZXIudmFsaWRhdGVPbmJvYXJkaW5nKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGV4cGVjdChlcnJvcikudG9CZUluc3RhbmNlT2YoSHR0cEV4Y2VwdGlvbik7XG4gICAgICAgIGV4cGVjdChlcnJvci5nZXRTdGF0dXMoKSkudG9CZShIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUik7XG4gICAgICAgIGV4cGVjdChlcnJvci5nZXRNZXNzYWdlKCkpLnRvQ29udGFpbignRmFpbGVkIHRvIHZhbGlkYXRlIG9uYm9hcmRpbmcgY29tcGxldGVuZXNzJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHJlc3BvbnNlIHN0cnVjdHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS52YWxpZGF0ZU9uYm9hcmRpbmdDb21wbGV0ZW5lc3MubW9ja1Jlc29sdmVkVmFsdWUobW9ja1ZhbGlkYXRpb25SZXN1bHQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnZhbGlkYXRlT25ib2FyZGluZyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdpc1ZhbGlkJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnbWlzc2luZ1N0ZXBzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgncmVjb21tZW5kYXRpb25zJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5pc1ZhbGlkKS50b0JlKCdib29sZWFuJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQubWlzc2luZ1N0ZXBzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5yZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9vbmJvYXJkaW5nL2luc2lnaHRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2V0IG9uYm9hcmRpbmcgaW5zaWdodHMgc3VjY2Vzc2Z1bGx5IGFzIGFkbWluJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdJbnNpZ2h0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ0luc2lnaHRzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRPbmJvYXJkaW5nSW5zaWdodHMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrT25ib2FyZGluZ0luc2lnaHRzKTtcbiAgICAgIGV4cGVjdChvbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nSW5zaWdodHMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzIGZvciBpbnNpZ2h0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2VFcnJvciA9IG5ldyBFcnJvcignQW5hbHl0aWNzIHNlcnZpY2UgdW5hdmFpbGFibGUnKTtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nSW5zaWdodHMubW9ja1JlamVjdGVkVmFsdWUoc2VydmljZUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmdldE9uYm9hcmRpbmdJbnNpZ2h0cygpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY29udHJvbGxlci5nZXRPbmJvYXJkaW5nSW5zaWdodHMoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGV4cGVjdChlcnJvcikudG9CZUluc3RhbmNlT2YoSHR0cEV4Y2VwdGlvbik7XG4gICAgICAgIGV4cGVjdChlcnJvci5nZXRTdGF0dXMoKSkudG9CZShIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUik7XG4gICAgICAgIGV4cGVjdChlcnJvci5nZXRNZXNzYWdlKCkpLnRvQ29udGFpbignRmFpbGVkIHRvIHJldHJpZXZlIG9uYm9hcmRpbmcgaW5zaWdodHMnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgaW5zaWdodHMgc3RydWN0dXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdJbnNpZ2h0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ0luc2lnaHRzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRPbmJvYXJkaW5nSW5zaWdodHMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3RvdGFsVXNlcnMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb21wbGV0ZWRPbmJvYXJkaW5nJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnY29tcGxldGlvblJhdGUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdhdmVyYWdlQ29tcGxldGlvblRpbWUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdGVwQ29tcGxldGlvblJhdGVzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnY29tbW9uRHJvcE9mZlBvaW50cycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3JlY2VudFRyZW5kcycpO1xuXG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC50b3RhbFVzZXJzKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmNvbXBsZXRpb25SYXRlKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmF2ZXJhZ2VDb21wbGV0aW9uVGltZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5zdGVwQ29tcGxldGlvblJhdGVzKS50b0JlKCdvYmplY3QnKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5jb21tb25Ecm9wT2ZmUG9pbnRzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5yZWNlbnRUcmVuZHMud2Vla2x5Q29tcGxldGlvbnMpKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBjb21wbGV0aW9uIHJhdGUgcmFuZ2VcbiAgICAgIGV4cGVjdChyZXN1bHQuY29tcGxldGlvblJhdGUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRpb25SYXRlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHN0ZXAgY29tcGxldGlvbiByYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nSW5zaWdodHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja09uYm9hcmRpbmdJbnNpZ2h0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0T25ib2FyZGluZ0luc2lnaHRzKCk7XG5cbiAgICAgIGNvbnN0IHN0ZXBSYXRlcyA9IHJlc3VsdC5zdGVwQ29tcGxldGlvblJhdGVzO1xuICAgICAgT2JqZWN0LnZhbHVlcyhzdGVwUmF0ZXMpLmZvckVhY2gocmF0ZSA9PiB7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcmF0ZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICAgIGV4cGVjdChyYXRlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgICBleHBlY3QocmF0ZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZXNwb25zZSBGb3JtYXQgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBwcm9wZXJseSBmb3JtYXR0ZWQgb25ib2FyZGluZyBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ1N0YXR1cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ1N0YXR1cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0TXlPbmJvYXJkaW5nU3RhdHVzKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3VzZXJJZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2lzQ29tcGxldGVkJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnY29tcGxldGlvblBlcmNlbnRhZ2UnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdGVwcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ25leHRTdGVwcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0YXJ0ZWRBdCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2xhc3RVcGRhdGVkQXQnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGFydGVkQXQpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5sYXN0VXBkYXRlZEF0KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmNvbXBsZXRpb25QZXJjZW50YWdlKS50b0JlKCdudW1iZXInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHByb3Blcmx5IGZvcm1hdHRlZCB2YWxpZGF0aW9uIHJlc3VsdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS52YWxpZGF0ZU9uYm9hcmRpbmdDb21wbGV0ZW5lc3MubW9ja1Jlc29sdmVkVmFsdWUobW9ja1ZhbGlkYXRpb25SZXN1bHQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnZhbGlkYXRlT25ib2FyZGluZyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdpc1ZhbGlkJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnbWlzc2luZ1N0ZXBzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgncmVjb21tZW5kYXRpb25zJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5pc1ZhbGlkKS50b0JlKCdib29sZWFuJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQubWlzc2luZ1N0ZXBzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5yZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvcGVybHkgZm9ybWF0dGVkIGluc2lnaHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdJbnNpZ2h0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ0luc2lnaHRzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRPbmJvYXJkaW5nSW5zaWdodHMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3RvdGFsVXNlcnMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb21wbGV0ZWRPbmJvYXJkaW5nJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnY29tcGxldGlvblJhdGUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdGVwQ29tcGxldGlvblJhdGVzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnY29tbW9uRHJvcE9mZlBvaW50cycpO1xuXG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC50b3RhbFVzZXJzKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmNvbXBsZXRpb25SYXRlKS50b0JlKCdudW1iZXInKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGJFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nU3RhdHVzLm1vY2tSZWplY3RlZFZhbHVlKGRiRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0TXlPbmJvYXJkaW5nU3RhdHVzKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coSHR0cEV4Y2VwdGlvbik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIHVzZXIgSURzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZFVzZXJFcnJvciA9IG5ldyBFcnJvcignSW52YWxpZCB1c2VyIElEIGZvcm1hdCcpO1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdTdGF0dXMubW9ja1JlamVjdGVkVmFsdWUoaW52YWxpZFVzZXJFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRNeU9uYm9hcmRpbmdTdGF0dXMoJ2ludmFsaWQtdXNlci1pZCcpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG9uYm9hcmRpbmcgc2VydmljZSB1bmF2YWlsYWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2VFcnJvciA9IG5ldyBFcnJvcignT25ib2FyZGluZyBzZXJ2aWNlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlJyk7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UubWFya1N0ZXBDb21wbGV0ZWQubW9ja1JlamVjdGVkVmFsdWUoc2VydmljZUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmNvbXBsZXRlU3RlcChURVNUX1VTRVJfSURTLkNMSUVOVCwgJ3Byb2ZpbGVTZXR1cCcpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlIG9uYm9hcmRpbmcgd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBHZXQgaW5pdGlhbCBzdGF0dXNcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nU3RhdHVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tPbmJvYXJkaW5nU3RhdHVzKTtcbiAgICAgIGNvbnN0IGluaXRpYWxTdGF0dXMgPSBhd2FpdCBjb250cm9sbGVyLmdldE15T25ib2FyZGluZ1N0YXR1cyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICBleHBlY3QoaW5pdGlhbFN0YXR1cy5pc0NvbXBsZXRlZCkudG9CZShmYWxzZSk7XG5cbiAgICAgIC8vIENvbXBsZXRlIGEgc3RlcFxuICAgICAgY29uc3QgdXBkYXRlZFN0YXR1cyA9IHtcbiAgICAgICAgLi4ubW9ja09uYm9hcmRpbmdTdGF0dXMsXG4gICAgICAgIGNvbXBsZXRpb25QZXJjZW50YWdlOiA4MCxcbiAgICAgIH07XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UubWFya1N0ZXBDb21wbGV0ZWQubW9ja1Jlc29sdmVkVmFsdWUodXBkYXRlZFN0YXR1cyk7XG4gICAgICBjb25zdCBzdGVwUmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5jb21wbGV0ZVN0ZXAoVEVTVF9VU0VSX0lEUy5DTElFTlQsICd0aGVyYXBpc3RTZWxlY3Rpb24nKTtcbiAgICAgIGV4cGVjdChzdGVwUmVzdWx0LmNvbXBsZXRpb25QZXJjZW50YWdlKS50b0JlR3JlYXRlclRoYW4oaW5pdGlhbFN0YXR1cy5jb21wbGV0aW9uUGVyY2VudGFnZSk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIG9uYm9hcmRpbmdcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS52YWxpZGF0ZU9uYm9hcmRpbmdDb21wbGV0ZW5lc3MubW9ja1Jlc29sdmVkVmFsdWUobW9ja1ZhbGlkYXRpb25SZXN1bHQpO1xuICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudmFsaWRhdGVPbmJvYXJkaW5nKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uUmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnaXNWYWxpZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYWRtaW4gaW5zaWdodHMgd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBHZXQgaW5zaWdodHMgYXMgYWRtaW5cbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nSW5zaWdodHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja09uYm9hcmRpbmdJbnNpZ2h0cyk7XG4gICAgICBjb25zdCBpbnNpZ2h0cyA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0T25ib2FyZGluZ0luc2lnaHRzKCk7XG4gICAgICBleHBlY3QoaW5zaWdodHMudG90YWxVc2VycykudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGluc2lnaHRzLmNvbXBsZXRpb25SYXRlKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgIC8vIEdldCBzcGVjaWZpYyB1c2VyIHN0YXR1cyBhcyBhZG1pblxuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdTdGF0dXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja09uYm9hcmRpbmdTdGF0dXMpO1xuICAgICAgY29uc3QgdXNlclN0YXR1cyA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VXNlck9uYm9hcmRpbmdTdGF0dXMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgICAgZXhwZWN0KHVzZXJTdGF0dXMudXNlcklkKS50b0JlKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgb25ib2FyZGluZyBwcm9ncmVzc2lvbiBsb2dpYycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgcHJvZ3Jlc3Npb24gdGhyb3VnaCBtdWx0aXBsZSBzdGVwc1xuICAgICAgY29uc3Qgc3RlcHMgPSBbJ3Byb2ZpbGVTZXR1cCcsICdwcmVBc3Nlc3NtZW50JywgJ3RoZXJhcGlzdFNlbGVjdGlvbiddO1xuICAgICAgbGV0IGN1cnJlbnRQZXJjZW50YWdlID0gMDtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBuZXdQZXJjZW50YWdlID0gTWF0aC5yb3VuZCgoKGkgKyAxKSAvIHN0ZXBzLmxlbmd0aCkgKiAxMDApO1xuICAgICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UubWFya1N0ZXBDb21wbGV0ZWQubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIC4uLm1vY2tPbmJvYXJkaW5nU3RhdHVzLFxuICAgICAgICAgIGNvbXBsZXRpb25QZXJjZW50YWdlOiBuZXdQZXJjZW50YWdlLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNvbXBsZXRlU3RlcChURVNUX1VTRVJfSURTLkNMSUVOVCwgc3RlcHNbaV0pO1xuICAgICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRpb25QZXJjZW50YWdlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKGN1cnJlbnRQZXJjZW50YWdlKTtcbiAgICAgICAgY3VycmVudFBlcmNlbnRhZ2UgPSByZXN1bHQuY29tcGxldGlvblBlcmNlbnRhZ2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlZGdlIGNhc2VzIGluIG9uYm9hcmRpbmcgZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgY29tcGxldGluZyBhbHJlYWR5IGNvbXBsZXRlZCBzdGVwXG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UubWFya1N0ZXBDb21wbGV0ZWQubW9ja1Jlc29sdmVkVmFsdWUobW9ja09uYm9hcmRpbmdTdGF0dXMpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5jb21wbGV0ZVN0ZXAoVEVTVF9VU0VSX0lEUy5DTElFTlQsICdwcm9maWxlU2V0dXAnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RlcHMucHJvZmlsZVNldHVwLmNvbXBsZXRlZCkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gVGVzdCB2YWxpZGF0aW9uIGZvciBjb21wbGV0ZWQgb25ib2FyZGluZ1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLnZhbGlkYXRlT25ib2FyZGluZ0NvbXBsZXRlbmVzcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgIG1pc3NpbmdTdGVwczogW10sXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogW10sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBjb250cm9sbGVyLnZhbGlkYXRlT25ib2FyZGluZyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5pc1ZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb24ubWlzc2luZ1N0ZXBzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9