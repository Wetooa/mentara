{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/test-utils/integration-tests/cross-model-relationships.integration.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/test-utils/integration-tests/cross-model-relationships.integration.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { INestApplication } from '@nestjs/common';\nimport { PrismaService } from '../../providers/prisma-client.provider';\nimport { DatabaseTestSetup } from '../database-test.setup';\nimport { TestDataGenerator } from '../enhanced-test-helpers';\n\n/**\n * Cross-Model Relationship Integration Tests\n * \n * Comprehensive testing of complex relationships across all 18 Prisma models\n * to ensure data integrity, referential consistency, and proper cascade behavior.\n */\ndescribe('Cross-Model Relationships Integration', () => {\n  let app: INestApplication;\n  let prisma: PrismaService;\n  let moduleRef: TestingModule;\n\n  beforeAll(async () => {\n    // Setup test database\n    prisma = await DatabaseTestSetup.setupTestDatabase();\n\n    moduleRef = await Test.createTestingModule({\n      providers: [\n        {\n          provide: PrismaService,\n          useValue: prisma,\n        },\n      ],\n    }).compile();\n\n    app = moduleRef.createNestApplication();\n    await app.init();\n  });\n\n  afterEach(async () => {\n    // Clean database after each test\n    await DatabaseTestSetup.cleanupDatabase();\n  });\n\n  afterAll(async () => {\n    await DatabaseTestSetup.stopContainer();\n    await app.close();\n    await moduleRef.close();\n  });\n\n  describe('User â†’ Client â†’ Therapist Assignment Workflow', () => {\n    it('should create complete user-client-therapist relationship chain', async () => {\n      // 1. Create client user\n      const clientUser = await prisma.user.create({\n        data: {\n          id: 'client-user-123',\n          email: 'client@test.com',\n          firstName: 'Test',\n          lastName: 'Client',\n          role: 'client',\n          isActive: true,\n          emailVerified: true,\n        },\n      });\n\n      // 2. Create client profile\n      const client = await prisma.client.create({\n        data: {\n          userId: clientUser.id,\n          hasSeenTherapistRecommendations: false,\n        },\n      });\n\n      // 3. Create therapist user\n      const therapistUser = await prisma.user.create({\n        data: {\n          id: 'therapist-user-123',\n          email: 'therapist@test.com',\n          firstName: 'Dr. Test',\n          lastName: 'Therapist',\n          role: 'therapist',\n          isActive: true,\n          emailVerified: true,\n        },\n      });\n\n      // 4. Create therapist profile\n      const therapist = await prisma.therapist.create({\n        data: {\n          userId: therapistUser.id,\n          mobile: '+1234567890',\n          province: 'Ontario',\n          providerType: 'Clinical Psychologist',\n          professionalLicenseType: 'Licensed',\n          isPRCLicensed: 'yes',\n          prcLicenseNumber: 'PRC123456',\n          practiceStartDate: new Date('2020-01-01'),\n          yearsOfExperience: 5,\n          areasOfExpertise: ['Anxiety', 'Depression'],\n          assessmentTools: ['PHQ-9', 'GAD-7'],\n          therapeuticApproachesUsedList: ['CBT', 'DBT'],\n          languagesOffered: ['English'],\n          providedOnlineTherapyBefore: true,\n          comfortableUsingVideoConferencing: true,\n          preferredSessionLength: [60],\n          acceptTypes: ['Individual'],\n          status: 'approved',\n          hourlyRate: 150,\n          expirationDateOfLicense: new Date('2025-01-01'),\n          compliesWithDataPrivacyAct: true,\n          willingToAbideByPlatformGuidelines: true,\n          treatmentSuccessRates: {},\n          sessionLength: '60 minutes',\n        },\n      });\n\n      // 5. Create client-therapist assignment\n      const assignment = await prisma.clientTherapist.create({\n        data: {\n          clientId: client.userId,\n          therapistId: therapist.userId,\n          notes: 'Initial assignment for anxiety treatment',\n        },\n      });\n\n      // 6. Verify complete relationship chain\n      const completeRelationship = await prisma.user.findUnique({\n        where: { id: clientUser.id },\n        include: {\n          client: {\n            include: {\n              assignedTherapists: {\n                include: {\n                  therapist: {\n                    include: {\n                      user: true,\n                    },\n                  },\n                },\n              },\n            },\n          },\n        },\n      });\n\n      // Assertions\n      expect(completeRelationship).toBeTruthy();\n      expect(completeRelationship?.client).toBeTruthy();\n      expect(completeRelationship?.client?.assignedTherapists).toHaveLength(1);\n      expect(completeRelationship?.client?.assignedTherapists[0].therapist.user.email).toBe('therapist@test.com');\n      expect(assignment.notes).toBe('Initial assignment for anxiety treatment');\n    });\n\n    it('should handle cascade deletion properly', async () => {\n      // Create test data\n      const user = await prisma.user.create({\n        data: TestDataGenerator.createUser({ role: 'client' }),\n      });\n\n      const client = await prisma.client.create({\n        data: {\n          userId: user.id,\n          hasSeenTherapistRecommendations: false,\n        },\n      });\n\n      // Create client medical history\n      const medicalHistory = await prisma.clientMedicalHistory.create({\n        data: {\n          clientId: client.userId,\n          condition: 'Anxiety Disorder',\n          notes: 'Diagnosed in 2020',\n        },\n      });\n\n      // Create client preferences\n      const preference = await prisma.clientPreference.create({\n        data: {\n          clientId: client.userId,\n          key: 'preferred_session_time',\n          value: 'morning',\n        },\n      });\n\n      // Delete user - should cascade to client and related records\n      await prisma.user.delete({\n        where: { id: user.id },\n      });\n\n      // Verify cascade deletion\n      const deletedClient = await prisma.client.findUnique({\n        where: { userId: user.id },\n      });\n      const deletedHistory = await prisma.clientMedicalHistory.findUnique({\n        where: { id: medicalHistory.id },\n      });\n      const deletedPreference = await prisma.clientPreference.findUnique({\n        where: { id: preference.id },\n      });\n\n      expect(deletedClient).toBeNull();\n      expect(deletedHistory).toBeNull();\n      expect(deletedPreference).toBeNull();\n    });\n  });\n\n  describe('Conversation â†’ Message â†’ Reactions Messaging Flow', () => {\n    it('should create complete messaging workflow with reactions', async () => {\n      // 1. Create participants\n      const user1 = await prisma.user.create({\n        data: TestDataGenerator.createUser({\n          id: 'user-1',\n          email: 'user1@test.com',\n          firstName: 'Alice',\n        }),\n      });\n\n      const user2 = await prisma.user.create({\n        data: TestDataGenerator.createUser({\n          id: 'user-2',\n          email: 'user2@test.com',\n          firstName: 'Bob',\n        }),\n      });\n\n      // 2. Create conversation\n      const conversation = await prisma.conversation.create({\n        data: {\n          type: 'DIRECT',\n          isActive: true,\n        },\n      });\n\n      // 3. Add participants\n      await prisma.conversationParticipant.createMany({\n        data: [\n          {\n            conversationId: conversation.id,\n            userId: user1.id,\n            role: 'MEMBER',\n          },\n          {\n            conversationId: conversation.id,\n            userId: user2.id,\n            role: 'MEMBER',\n          },\n        ],\n      });\n\n      // 4. Create messages\n      const message1 = await prisma.message.create({\n        data: {\n          conversationId: conversation.id,\n          senderId: user1.id,\n          content: 'Hello, how are you today?',\n          messageType: 'TEXT',\n        },\n      });\n\n      const message2 = await prisma.message.create({\n        data: {\n          conversationId: conversation.id,\n          senderId: user2.id,\n          content: 'I am doing well, thank you!',\n          messageType: 'TEXT',\n          replyToId: message1.id,\n        },\n      });\n\n      // 5. Add message reactions\n      const reaction1 = await prisma.messageReaction.create({\n        data: {\n          messageId: message1.id,\n          userId: user2.id,\n          emoji: 'ðŸ‘',\n        },\n      });\n\n      const reaction2 = await prisma.messageReaction.create({\n        data: {\n          messageId: message2.id,\n          userId: user1.id,\n          emoji: 'ðŸ˜Š',\n        },\n      });\n\n      // 6. Add read receipts\n      await prisma.messageReadReceipt.createMany({\n        data: [\n          {\n            messageId: message1.id,\n            userId: user2.id,\n          },\n          {\n            messageId: message2.id,\n            userId: user1.id,\n          },\n        ],\n      });\n\n      // 7. Update conversation last message time\n      await prisma.conversation.update({\n        where: { id: conversation.id },\n        data: { lastMessageAt: new Date() },\n      });\n\n      // Verify complete messaging flow\n      const completeConversation = await prisma.conversation.findUnique({\n        where: { id: conversation.id },\n        include: {\n          participants: {\n            include: {\n              user: true,\n            },\n          },\n          messages: {\n            include: {\n              reactions: {\n                include: {\n                  user: true,\n                },\n              },\n              readReceipts: {\n                include: {\n                  user: true,\n                },\n              },\n              replyTo: true,\n              replies: true,\n            },\n            orderBy: {\n              createdAt: 'asc',\n            },\n          },\n        },\n      });\n\n      // Assertions\n      expect(completeConversation).toBeTruthy();\n      expect(completeConversation?.participants).toHaveLength(2);\n      expect(completeConversation?.messages).toHaveLength(2);\n      expect(completeConversation?.messages[0].reactions).toHaveLength(1);\n      expect(completeConversation?.messages[1].reactions).toHaveLength(1);\n      expect(completeConversation?.messages[0].readReceipts).toHaveLength(1);\n      expect(completeConversation?.messages[1].readReceipts).toHaveLength(1);\n      expect(completeConversation?.messages[1].replyToId).toBe(message1.id);\n      expect(completeConversation?.lastMessageAt).toBeTruthy();\n    });\n\n    it('should handle user blocking in messaging workflow', async () => {\n      // Create users\n      const blocker = await prisma.user.create({\n        data: TestDataGenerator.createUser({\n          id: 'blocker-user',\n          email: 'blocker@test.com',\n        }),\n      });\n\n      const blocked = await prisma.user.create({\n        data: TestDataGenerator.createUser({\n          id: 'blocked-user',\n          email: 'blocked@test.com',\n        }),\n      });\n\n      // Create conversation and messages\n      const conversation = await prisma.conversation.create({\n        data: {\n          type: 'DIRECT',\n          participants: {\n            create: [\n              { userId: blocker.id, role: 'MEMBER' },\n              { userId: blocked.id, role: 'MEMBER' },\n            ],\n          },\n        },\n      });\n\n      const message = await prisma.message.create({\n        data: {\n          conversationId: conversation.id,\n          senderId: blocked.id,\n          content: 'Hello there!',\n          messageType: 'TEXT',\n        },\n      });\n\n      // Block user\n      const userBlock = await prisma.userBlock.create({\n        data: {\n          blockerId: blocker.id,\n          blockedId: blocked.id,\n          reason: 'Inappropriate behavior',\n        },\n      });\n\n      // Verify blocking relationship\n      const blockingUser = await prisma.user.findUnique({\n        where: { id: blocker.id },\n        include: {\n          blocking: {\n            include: {\n              blocked: true,\n            },\n          },\n        },\n      });\n\n      const blockedUser = await prisma.user.findUnique({\n        where: { id: blocked.id },\n        include: {\n          blockedBy: {\n            include: {\n              blocker: true,\n            },\n          },\n        },\n      });\n\n      expect(blockingUser?.blocking).toHaveLength(1);\n      expect(blockingUser?.blocking[0].blockedId).toBe(blocked.id);\n      expect(blockedUser?.blockedBy).toHaveLength(1);\n      expect(blockedUser?.blockedBy[0].blockerId).toBe(blocker.id);\n      expect(userBlock.reason).toBe('Inappropriate behavior');\n    });\n  });\n\n  describe('Meeting â†’ SessionLog â†’ Review Lifecycle', () => {\n    it('should create complete session lifecycle with reviews', async () => {\n      // Setup users\n      const clientUser = await prisma.user.create({\n        data: TestDataGenerator.createUser({\n          id: 'session-client',\n          role: 'client',\n        }),\n      });\n\n      const therapistUser = await prisma.user.create({\n        data: TestDataGenerator.createUser({\n          id: 'session-therapist',\n          role: 'therapist',\n        }),\n      });\n\n      const client = await prisma.client.create({\n        data: {\n          userId: clientUser.id,\n          hasSeenTherapistRecommendations: true,\n        },\n      });\n\n      const therapist = await prisma.therapist.create({\n        data: {\n          userId: therapistUser.id,\n          mobile: '+1234567890',\n          province: 'Ontario',\n          providerType: 'Clinical Psychologist',\n          professionalLicenseType: 'Licensed',\n          isPRCLicensed: 'yes',\n          prcLicenseNumber: 'PRC123456',\n          practiceStartDate: new Date('2020-01-01'),\n          yearsOfExperience: 5,\n          areasOfExpertise: ['Depression'],\n          assessmentTools: ['PHQ-9'],\n          therapeuticApproachesUsedList: ['CBT'],\n          languagesOffered: ['English'],\n          providedOnlineTherapyBefore: true,\n          comfortableUsingVideoConferencing: true,\n          preferredSessionLength: [60],\n          acceptTypes: ['Individual'],\n          status: 'approved',\n          hourlyRate: 150,\n          expirationDateOfLicense: new Date('2025-01-01'),\n          compliesWithDataPrivacyAct: true,\n          willingToAbideByPlatformGuidelines: true,\n          treatmentSuccessRates: {},\n          sessionLength: '60 minutes',\n        },\n      });\n\n      // Create meeting\n      const meeting = await prisma.meeting.create({\n        data: {\n          clientId: client.userId,\n          therapistId: therapist.userId,\n          startTime: new Date('2024-12-01T10:00:00Z'),\n          duration: 60,\n          status: 'COMPLETED',\n          meetingType: 'video',\n          description: 'Initial therapy session',\n        },\n      });\n\n      // Create session log\n      const sessionLog = await prisma.sessionLog.create({\n        data: {\n          clientId: client.userId,\n          meetingId: meeting.id,\n          sessionDate: new Date('2024-12-01T10:00:00Z'),\n          duration: 60,\n          sessionType: 'Individual',\n          notes: 'Client showed good progress with anxiety management techniques',\n          mood: 'positive',\n          progress: 'good',\n        },\n      });\n\n      // Create review\n      const review = await prisma.review.create({\n        data: {\n          clientId: client.userId,\n          therapistId: therapist.userId,\n          rating: 5,\n          comment: 'Excellent therapist, very helpful and understanding',\n          isAnonymous: false,\n        },\n      });\n\n      // Verify complete lifecycle\n      const completeMeeting = await prisma.meeting.findUnique({\n        where: { id: meeting.id },\n        include: {\n          client: {\n            include: {\n              user: true,\n              sessionLogs: true,\n              reviews: true,\n            },\n          },\n          therapist: {\n            include: {\n              user: true,\n            },\n          },\n        },\n      });\n\n      const sessionWithReview = await prisma.sessionLog.findUnique({\n        where: { id: sessionLog.id },\n        include: {\n          client: {\n            include: {\n              reviews: {\n                where: {\n                  therapistId: therapist.userId,\n                },\n              },\n            },\n          },\n        },\n      });\n\n      // Assertions\n      expect(completeMeeting).toBeTruthy();\n      expect(completeMeeting?.status).toBe('COMPLETED');\n      expect(completeMeeting?.client?.sessionLogs).toHaveLength(1);\n      expect(completeMeeting?.client?.reviews).toHaveLength(1);\n      expect(sessionWithReview?.notes).toContain('anxiety management');\n      expect(sessionWithReview?.client?.reviews[0].rating).toBe(5);\n    });\n  });\n\n  describe('User â†’ Notification â†’ AuditLog Activity Tracking', () => {\n    it('should create complete activity tracking workflow', async () => {\n      // Create user\n      const user = await prisma.user.create({\n        data: TestDataGenerator.createUser({\n          id: 'activity-user',\n          email: 'activity@test.com',\n        }),\n      });\n\n      // Create notification settings\n      const notificationSettings = await prisma.notificationSettings.create({\n        data: {\n          userId: user.id,\n          emailNotifications: true,\n          pushNotifications: true,\n          smsNotifications: false,\n          marketingEmails: false,\n        },\n      });\n\n      // Create notification\n      const notification = await prisma.notification.create({\n        data: {\n          userId: user.id,\n          type: 'meeting_reminder',\n          title: 'Upcoming Therapy Session',\n          message: 'You have a therapy session scheduled in 1 hour',\n          isRead: false,\n          priority: 'high',\n        },\n      });\n\n      // Create audit log\n      const auditLog = await prisma.auditLog.create({\n        data: {\n          userId: user.id,\n          action: 'USER_LOGIN',\n          entity: 'User',\n          entityId: user.id,\n          details: {\n            ip: '192.168.1.1',\n            userAgent: 'Mozilla/5.0...',\n            timestamp: new Date().toISOString(),\n          },\n          severity: 'INFO',\n        },\n      });\n\n      // Create user activity\n      const userActivity = await prisma.userActivity.create({\n        data: {\n          userId: user.id,\n          activityType: 'page_view',\n          activityData: {\n            page: '/dashboard',\n            duration: 120,\n            interactions: ['button_click', 'scroll'],\n          },\n        },\n      });\n\n      // Verify complete activity tracking\n      const userWithActivities = await prisma.user.findUnique({\n        where: { id: user.id },\n        include: {\n          notificationSettings: true,\n          notifications: {\n            where: { isRead: false },\n          },\n          auditLogs: {\n            orderBy: { createdAt: 'desc' },\n          },\n          activities: {\n            orderBy: { createdAt: 'desc' },\n          },\n        },\n      });\n\n      // Assertions\n      expect(userWithActivities).toBeTruthy();\n      expect(userWithActivities?.notificationSettings?.emailNotifications).toBe(true);\n      expect(userWithActivities?.notifications).toHaveLength(1);\n      expect(userWithActivities?.notifications[0].type).toBe('meeting_reminder');\n      expect(userWithActivities?.auditLogs).toHaveLength(1);\n      expect(userWithActivities?.auditLogs[0].action).toBe('USER_LOGIN');\n      expect(userWithActivities?.activities).toHaveLength(1);\n      expect(userWithActivities?.activities[0].activityType).toBe('page_view');\n    });\n  });\n\n  describe('Community â†’ Post â†’ Comment â†’ Hearts Content Flow', () => {\n    it('should create complete community content interaction flow', async () => {\n      // Create users\n      const author = await prisma.user.create({\n        data: TestDataGenerator.createUser({\n          id: 'content-author',\n          email: 'author@test.com',\n        }),\n      });\n\n      const commenter = await prisma.user.create({\n        data: TestDataGenerator.createUser({\n          id: 'content-commenter',\n          email: 'commenter@test.com',\n        }),\n      });\n\n      // Create community\n      const community = await prisma.community.create({\n        data: {\n          name: 'Anxiety Support',\n          description: 'A supportive community for anxiety management',\n          isPrivate: false,\n          memberLimit: 100,\n        },\n      });\n\n      // Create room and room group\n      const roomGroup = await prisma.roomGroup.create({\n        data: {\n          communityId: community.id,\n          name: 'General Discussion',\n          description: 'General discussion topics',\n        },\n      });\n\n      const room = await prisma.room.create({\n        data: {\n          communityId: community.id,\n          roomGroupId: roomGroup.id,\n          name: 'Daily Check-ins',\n          description: 'Share your daily progress',\n          postingRole: 'MEMBER',\n        },\n      });\n\n      // Create memberships\n      await prisma.membership.createMany({\n        data: [\n          {\n            userId: author.id,\n            communityId: community.id,\n            role: 'MEMBER',\n            status: 'ACTIVE',\n          },\n          {\n            userId: commenter.id,\n            communityId: community.id,\n            role: 'MEMBER',\n            status: 'ACTIVE',\n          },\n        ],\n      });\n\n      // Create post\n      const post = await prisma.post.create({\n        data: {\n          authorId: author.id,\n          communityId: community.id,\n          roomId: room.id,\n          title: 'My anxiety journey',\n          content: 'Sharing my experience with anxiety management...',\n          type: 'TEXT',\n          isApproved: true,\n        },\n      });\n\n      // Create comment\n      const comment = await prisma.comment.create({\n        data: {\n          authorId: commenter.id,\n          postId: post.id,\n          content: 'Thank you for sharing, this is very helpful!',\n          isApproved: true,\n        },\n      });\n\n      // Create reply to comment\n      const reply = await prisma.reply.create({\n        data: {\n          authorId: author.id,\n          commentId: comment.id,\n          content: 'I appreciate your support!',\n          isApproved: true,\n        },\n      });\n\n      // Add hearts\n      const postHeart = await prisma.postHeart.create({\n        data: {\n          userId: commenter.id,\n          postId: post.id,\n        },\n      });\n\n      const commentHeart = await prisma.commentHeart.create({\n        data: {\n          userId: author.id,\n          commentId: comment.id,\n        },\n      });\n\n      const replyHeart = await prisma.replyHeart.create({\n        data: {\n          userId: commenter.id,\n          replyId: reply.id,\n        },\n      });\n\n      // Verify complete content flow\n      const completePost = await prisma.post.findUnique({\n        where: { id: post.id },\n        include: {\n          author: true,\n          community: true,\n          room: {\n            include: {\n              roomGroup: true,\n            },\n          },\n          comments: {\n            include: {\n              author: true,\n              replies: {\n                include: {\n                  author: true,\n                  hearts: {\n                    include: {\n                      user: true,\n                    },\n                  },\n                },\n              },\n              hearts: {\n                include: {\n                  user: true,\n                },\n              },\n            },\n          },\n          hearts: {\n            include: {\n              user: true,\n            },\n          },\n        },\n      });\n\n      // Assertions\n      expect(completePost).toBeTruthy();\n      expect(completePost?.hearts).toHaveLength(1);\n      expect(completePost?.comments).toHaveLength(1);\n      expect(completePost?.comments[0].hearts).toHaveLength(1);\n      expect(completePost?.comments[0].replies).toHaveLength(1);\n      expect(completePost?.comments[0].replies[0].hearts).toHaveLength(1);\n      expect(completePost?.room?.roomGroup?.name).toBe('General Discussion');\n    });\n  });\n\n  describe('Complex Transaction Scenarios', () => {\n    it('should handle complex multi-model transaction rollback', async () => {\n      const transactionTestFn = async () => {\n        return await prisma.$transaction(async (tx) => {\n          // Create user\n          const user = await tx.user.create({\n            data: TestDataGenerator.createUser({\n              email: 'transaction@test.com',\n            }),\n          });\n\n          // Create client\n          const client = await tx.client.create({\n            data: {\n              userId: user.id,\n              hasSeenTherapistRecommendations: false,\n            },\n          });\n\n          // Create notification settings\n          await tx.notificationSettings.create({\n            data: {\n              userId: user.id,\n              emailNotifications: true,\n              pushNotifications: true,\n            },\n          });\n\n          // Intentionally cause a constraint violation\n          await tx.user.create({\n            data: {\n              id: user.id, // Duplicate ID should cause error\n              email: 'duplicate@test.com',\n              firstName: 'Duplicate',\n              lastName: 'User',\n              role: 'client',\n            },\n          });\n\n          return { user, client };\n        });\n      };\n\n      // Transaction should fail and rollback\n      await expect(transactionTestFn()).rejects.toThrow();\n\n      // Verify no data was committed\n      const user = await prisma.user.findUnique({\n        where: { email: 'transaction@test.com' },\n      });\n      const client = await prisma.client.findFirst({\n        where: {\n          user: { email: 'transaction@test.com' },\n        },\n      });\n      const settings = await prisma.notificationSettings.findFirst({\n        where: {\n          user: { email: 'transaction@test.com' },\n        },\n      });\n\n      expect(user).toBeNull();\n      expect(client).toBeNull();\n      expect(settings).toBeNull();\n    });\n\n    it('should handle concurrent user creation correctly', async () => {\n      const concurrentUsers = Array.from({ length: 5 }, (_, i) => \n        prisma.user.create({\n          data: TestDataGenerator.createUser({\n            email: `concurrent-${i}@test.com`,\n            firstName: `User${i}`,\n          }),\n        })\n      );\n\n      const results = await Promise.allSettled(concurrentUsers);\n      const successful = results.filter(r => r.status === 'fulfilled').length;\n\n      expect(successful).toBe(5); // All should succeed with unique emails\n    });\n  });\n});"],"version":3}