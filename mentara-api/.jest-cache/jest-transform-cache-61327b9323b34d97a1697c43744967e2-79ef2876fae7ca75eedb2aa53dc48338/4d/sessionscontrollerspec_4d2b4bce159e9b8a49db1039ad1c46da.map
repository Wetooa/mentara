{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/sessions/sessions.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/sessions/sessions.controller.spec.ts"],"sourcesContent":["/**\n * Comprehensive Test Suite for SessionsController\n * Tests session management, activity tracking, therapy progress, and statistics\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { BadRequestException, NotFoundException } from '@nestjs/common';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { SessionsController } from './sessions.controller';\nimport { SessionsService } from './sessions.service';\nimport { SecurityGuardTestUtils, RoleBasedTestUtils } from '../test-utils/auth-testing-helpers';\nimport { MockBuilder, TestDataGenerator, TestAssertions } from '../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../test-utils/index';\n\ndescribe('SessionsController', () => {\n  let controller: SessionsController;\n  let sessionsService: SessionsService;\n  let module: TestingModule;\n\n  // Mock SessionsService\n  const mockSessionsService = {\n    createSessionLog: jest.fn(),\n    findAllSessions: jest.fn(),\n    findSession: jest.fn(),\n    updateSession: jest.fn(),\n    endSession: jest.fn(),\n    addSessionActivity: jest.fn(),\n    getSessionActivities: jest.fn(),\n    logUserActivity: jest.fn(),\n    getUserActivities: jest.fn(),\n    createTherapyProgress: jest.fn(),\n    getTherapyProgress: jest.fn(),\n    getSessionStatistics: jest.fn(),\n  };\n\n  // Mock JwtAuthGuard\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test data\n  const mockSessionLog = {\n    id: 'session_123456789',\n    clientId: TEST_USER_IDS.CLIENT,\n    therapistId: TEST_USER_IDS.THERAPIST,\n    sessionType: 'video',\n    status: 'completed',\n    startTime: new Date('2024-01-15T10:00:00Z'),\n    endTime: new Date('2024-01-15T10:50:00Z'),\n    duration: 50,\n    notes: 'Great progress on anxiety management techniques',\n    rating: 4,\n    quality: 5,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  const mockSessionActivity = {\n    id: 'activity_123456789',\n    sessionId: 'session_123456789',\n    activityType: 'discussion',\n    description: 'Discussed coping strategies for work stress',\n    duration: 20,\n    metadata: { topics: ['work stress', 'coping strategies'] },\n    createdAt: new Date(),\n  };\n\n  const mockUserActivity = {\n    id: 'user_activity_123456789',\n    userId: TEST_USER_IDS.CLIENT,\n    action: 'click',\n    page: '/dashboard',\n    component: 'session-card',\n    metadata: { sessionId: 'session_123456789' },\n    sessionId: 'session_123456789',\n    deviceInfo: { browser: 'Chrome', os: 'Windows' },\n    timestamp: new Date(),\n  };\n\n  const mockTherapyProgress = {\n    id: 'progress_123456789',\n    clientId: TEST_USER_IDS.CLIENT,\n    therapistId: TEST_USER_IDS.THERAPIST,\n    sessionId: 'session_123456789',\n    progressNotes: 'Client showed significant improvement in managing anxiety',\n    goalsAchieved: ['Practice mindfulness daily', 'Identify triggers'],\n    newGoals: ['Apply techniques in work situations', 'Build social connections'],\n    moodRating: 7,\n    progressRating: 8,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  const mockSessionStatistics = {\n    totalSessions: 25,\n    completedSessions: 22,\n    cancelledSessions: 3,\n    averageSessionDuration: 48.5,\n    averageSessionRating: 4.2,\n    sessionsByType: {\n      video: 18,\n      audio: 4,\n      chat: 2,\n      in_person: 1,\n    },\n    progressTrend: {\n      averageMoodRating: 6.8,\n      averageProgressRating: 7.2,\n      improvementPercentage: 15.5,\n    },\n    dateRange: {\n      startDate: new Date('2023-12-01T00:00:00Z'),\n      endDate: new Date('2024-01-31T23:59:59Z'),\n    },\n  };\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [SessionsController],\n      providers: [\n        {\n          provide: SessionsService,\n          useValue: mockSessionsService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .compile();\n\n    controller = module.get<SessionsController>(SessionsController);\n    sessionsService = module.get<SessionsService>(SessionsService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have sessionsService injected', () => {\n      expect(sessionsService).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', SessionsController);\n      expect(guards).toContain(JwtAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', SessionsController);\n      expect(controllerMetadata).toBe('sessions');\n    });\n  });\n\n  describe('Session Log Management', () => {\n    describe('POST /sessions/logs', () => {\n      const createSessionDto = {\n        clientId: TEST_USER_IDS.CLIENT,\n        therapistId: TEST_USER_IDS.THERAPIST,\n        sessionType: 'video' as const,\n        status: 'scheduled' as const,\n        startTime: '2024-01-15T10:00:00Z',\n        notes: 'Initial session for anxiety management',\n      };\n\n      it('should create session log successfully', async () => {\n        mockSessionsService.createSessionLog.mockResolvedValue(mockSessionLog);\n\n        const result = await controller.createSessionLog(\n          createSessionDto,\n          TEST_USER_IDS.THERAPIST,\n          'therapist'\n        );\n\n        expect(result).toEqual(mockSessionLog);\n        expect(sessionsService.createSessionLog).toHaveBeenCalledWith({\n          ...createSessionDto,\n          therapistId: TEST_USER_IDS.THERAPIST,\n        });\n      });\n\n      it('should override clientId for client users', async () => {\n        const clientDto = {\n          ...createSessionDto,\n          clientId: 'different-client-id',\n        };\n        mockSessionsService.createSessionLog.mockResolvedValue(mockSessionLog);\n\n        await controller.createSessionLog(\n          clientDto,\n          TEST_USER_IDS.CLIENT,\n          'client'\n        );\n\n        expect(sessionsService.createSessionLog).toHaveBeenCalledWith({\n          ...clientDto,\n          clientId: TEST_USER_IDS.CLIENT,\n        });\n      });\n\n      it('should override therapistId for therapist users', async () => {\n        const therapistDto = {\n          ...createSessionDto,\n          therapistId: 'different-therapist-id',\n        };\n        mockSessionsService.createSessionLog.mockResolvedValue(mockSessionLog);\n\n        await controller.createSessionLog(\n          therapistDto,\n          TEST_USER_IDS.THERAPIST,\n          'therapist'\n        );\n\n        expect(sessionsService.createSessionLog).toHaveBeenCalledWith({\n          ...therapistDto,\n          therapistId: TEST_USER_IDS.THERAPIST,\n        });\n      });\n\n      it('should handle service errors', async () => {\n        const serviceError = new Error('Session creation failed');\n        mockSessionsService.createSessionLog.mockRejectedValue(serviceError);\n\n        await expect(\n          controller.createSessionLog(createSessionDto, TEST_USER_IDS.THERAPIST, 'therapist')\n        ).rejects.toThrow(serviceError);\n      });\n    });\n\n    describe('GET /sessions/logs', () => {\n      const queryDto = {\n        status: 'completed' as const,\n        sessionType: 'video' as const,\n      };\n\n      it('should get sessions for therapist', async () => {\n        const mockSessions = [mockSessionLog];\n        mockSessionsService.findAllSessions.mockResolvedValue(mockSessions);\n\n        const result = await controller.findAllSessions(\n          'therapist',\n          TEST_USER_IDS.THERAPIST,\n          queryDto\n        );\n\n        expect(result).toEqual(mockSessions);\n        expect(sessionsService.findAllSessions).toHaveBeenCalledWith(\n          undefined,\n          TEST_USER_IDS.THERAPIST,\n          queryDto.status,\n          queryDto.sessionType\n        );\n      });\n\n      it('should get sessions for client', async () => {\n        const mockSessions = [mockSessionLog];\n        mockSessionsService.findAllSessions.mockResolvedValue(mockSessions);\n\n        const result = await controller.findAllSessions(\n          'client',\n          TEST_USER_IDS.CLIENT,\n          queryDto\n        );\n\n        expect(result).toEqual(mockSessions);\n        expect(sessionsService.findAllSessions).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          undefined,\n          queryDto.status,\n          queryDto.sessionType\n        );\n      });\n\n      it('should allow admin to filter by specific client and therapist', async () => {\n        const adminQuery = {\n          ...queryDto,\n          clientId: TEST_USER_IDS.CLIENT,\n          therapistId: TEST_USER_IDS.THERAPIST,\n        };\n        const mockSessions = [mockSessionLog];\n        mockSessionsService.findAllSessions.mockResolvedValue(mockSessions);\n\n        const result = await controller.findAllSessions(\n          'admin',\n          'admin-user-id',\n          adminQuery\n        );\n\n        expect(result).toEqual(mockSessions);\n        expect(sessionsService.findAllSessions).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          TEST_USER_IDS.THERAPIST,\n          queryDto.status,\n          queryDto.sessionType\n        );\n      });\n    });\n\n    describe('GET /sessions/logs/:id', () => {\n      it('should get session by id successfully', async () => {\n        mockSessionsService.findSession.mockResolvedValue(mockSessionLog);\n\n        const result = await controller.findSession('session_123456789');\n\n        expect(result).toEqual(mockSessionLog);\n        expect(sessionsService.findSession).toHaveBeenCalledWith('session_123456789');\n      });\n\n      it('should handle session not found', async () => {\n        const notFoundError = new NotFoundException('Session not found');\n        mockSessionsService.findSession.mockRejectedValue(notFoundError);\n\n        await expect(\n          controller.findSession('nonexistent-session')\n        ).rejects.toThrow(notFoundError);\n      });\n    });\n\n    describe('PATCH /sessions/logs/:id', () => {\n      const updateDto = {\n        status: 'completed' as const,\n        endTime: '2024-01-15T10:50:00Z',\n        notes: 'Session completed successfully',\n        rating: 5,\n        quality: 4,\n      };\n\n      it('should update session successfully', async () => {\n        const updatedSession = { ...mockSessionLog, ...updateDto };\n        mockSessionsService.updateSession.mockResolvedValue(updatedSession);\n\n        const result = await controller.updateSession('session_123456789', updateDto);\n\n        expect(result).toEqual(updatedSession);\n        expect(sessionsService.updateSession).toHaveBeenCalledWith(\n          'session_123456789',\n          updateDto\n        );\n      });\n\n      it('should handle partial updates', async () => {\n        const partialUpdate = { status: 'completed' as const };\n        const updatedSession = { ...mockSessionLog, ...partialUpdate };\n        mockSessionsService.updateSession.mockResolvedValue(updatedSession);\n\n        const result = await controller.updateSession('session_123456789', partialUpdate);\n\n        expect(result).toEqual(updatedSession);\n        expect(sessionsService.updateSession).toHaveBeenCalledWith(\n          'session_123456789',\n          partialUpdate\n        );\n      });\n    });\n\n    describe('POST /sessions/logs/:id/end', () => {\n      const endSessionDto = {\n        notes: 'Session ended with positive outcomes',\n        quality: 5,\n      };\n\n      it('should end session successfully', async () => {\n        const endedSession = {\n          ...mockSessionLog,\n          status: 'completed',\n          endTime: new Date(),\n          duration: 50,\n        };\n        mockSessionsService.endSession.mockResolvedValue(endedSession);\n\n        const result = await controller.endSession('session_123456789', endSessionDto);\n\n        expect(result).toEqual(endedSession);\n        expect(sessionsService.endSession).toHaveBeenCalledWith(\n          'session_123456789',\n          endSessionDto.notes,\n          endSessionDto.quality\n        );\n      });\n\n      it('should handle service errors', async () => {\n        const serviceError = new Error('Failed to end session');\n        mockSessionsService.endSession.mockRejectedValue(serviceError);\n\n        await expect(\n          controller.endSession('session_123456789', endSessionDto)\n        ).rejects.toThrow(serviceError);\n      });\n    });\n  });\n\n  describe('Session Activity Management', () => {\n    describe('POST /sessions/logs/:id/activities', () => {\n      const activityDto = {\n        activityType: 'discussion' as const,\n        description: 'Discussed anxiety management techniques',\n        duration: 25,\n        metadata: { topics: ['anxiety', 'coping strategies'] },\n      };\n\n      it('should add session activity successfully', async () => {\n        mockSessionsService.addSessionActivity.mockResolvedValue(mockSessionActivity);\n\n        const result = await controller.addSessionActivity('session_123456789', activityDto);\n\n        expect(result).toEqual(mockSessionActivity);\n        expect(sessionsService.addSessionActivity).toHaveBeenCalledWith(\n          'session_123456789',\n          activityDto.activityType,\n          activityDto.description,\n          activityDto.duration,\n          activityDto.metadata\n        );\n      });\n\n      it('should handle activity creation without optional fields', async () => {\n        const basicActivityDto = {\n          activityType: 'exercise' as const,\n          description: 'Breathing exercise',\n        };\n        mockSessionsService.addSessionActivity.mockResolvedValue(mockSessionActivity);\n\n        const result = await controller.addSessionActivity(\n          'session_123456789',\n          basicActivityDto\n        );\n\n        expect(result).toEqual(mockSessionActivity);\n        expect(sessionsService.addSessionActivity).toHaveBeenCalledWith(\n          'session_123456789',\n          basicActivityDto.activityType,\n          basicActivityDto.description,\n          undefined,\n          undefined\n        );\n      });\n    });\n\n    describe('GET /sessions/logs/:id/activities', () => {\n      it('should get session activities successfully', async () => {\n        const mockActivities = [mockSessionActivity];\n        mockSessionsService.getSessionActivities.mockResolvedValue(mockActivities);\n\n        const result = await controller.getSessionActivities('session_123456789');\n\n        expect(result).toEqual(mockActivities);\n        expect(sessionsService.getSessionActivities).toHaveBeenCalledWith('session_123456789');\n      });\n\n      it('should handle empty activities list', async () => {\n        mockSessionsService.getSessionActivities.mockResolvedValue([]);\n\n        const result = await controller.getSessionActivities('session_123456789');\n\n        expect(result).toEqual([]);\n      });\n    });\n  });\n\n  describe('User Activity Tracking', () => {\n    describe('POST /sessions/user-activities', () => {\n      const userActivityDto = {\n        action: 'click' as const,\n        page: '/dashboard',\n        component: 'session-card',\n        metadata: { sessionId: 'session_123456789' },\n        sessionId: 'session_123456789',\n        deviceInfo: { browser: 'Chrome', os: 'Windows' },\n      };\n\n      it('should log user activity successfully', async () => {\n        mockSessionsService.logUserActivity.mockResolvedValue(mockUserActivity);\n\n        const result = await controller.logUserActivity(\n          userActivityDto,\n          TEST_USER_IDS.CLIENT\n        );\n\n        expect(result).toEqual(mockUserActivity);\n        expect(sessionsService.logUserActivity).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          userActivityDto.action,\n          userActivityDto.page,\n          userActivityDto.component,\n          userActivityDto.metadata,\n          userActivityDto.sessionId,\n          userActivityDto.deviceInfo\n        );\n      });\n\n      it('should handle minimal user activity data', async () => {\n        const minimalActivityDto = {\n          action: 'view' as const,\n        };\n        mockSessionsService.logUserActivity.mockResolvedValue(mockUserActivity);\n\n        const result = await controller.logUserActivity(\n          minimalActivityDto,\n          TEST_USER_IDS.CLIENT\n        );\n\n        expect(result).toEqual(mockUserActivity);\n        expect(sessionsService.logUserActivity).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          minimalActivityDto.action,\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n          undefined\n        );\n      });\n    });\n\n    describe('GET /sessions/user-activities', () => {\n      const queryDto = {\n        action: 'click' as const,\n        startDate: '2024-01-01T00:00:00Z',\n        endDate: '2024-01-31T23:59:59Z',\n      };\n\n      it('should get user activities successfully', async () => {\n        const mockActivities = [mockUserActivity];\n        mockSessionsService.getUserActivities.mockResolvedValue(mockActivities);\n\n        const result = await controller.getUserActivities(TEST_USER_IDS.CLIENT, queryDto);\n\n        expect(result).toEqual(mockActivities);\n        expect(sessionsService.getUserActivities).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          queryDto.action,\n          new Date(queryDto.startDate),\n          new Date(queryDto.endDate)\n        );\n      });\n\n      it('should handle queries without filters', async () => {\n        const mockActivities = [mockUserActivity];\n        mockSessionsService.getUserActivities.mockResolvedValue(mockActivities);\n\n        const result = await controller.getUserActivities(TEST_USER_IDS.CLIENT, {});\n\n        expect(result).toEqual(mockActivities);\n        expect(sessionsService.getUserActivities).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          undefined,\n          undefined,\n          undefined\n        );\n      });\n    });\n  });\n\n  describe('Therapy Progress Management', () => {\n    describe('POST /sessions/therapy-progress', () => {\n      const progressDto = {\n        clientId: TEST_USER_IDS.CLIENT,\n        therapistId: TEST_USER_IDS.THERAPIST,\n        sessionId: 'session_123456789',\n        progressNotes: 'Client showed significant improvement',\n        goalsAchieved: ['Practice mindfulness daily'],\n        newGoals: ['Apply techniques in work situations'],\n        moodRating: 7,\n        progressRating: 8,\n      };\n\n      it('should create therapy progress for therapist', async () => {\n        mockSessionsService.createTherapyProgress.mockResolvedValue(mockTherapyProgress);\n\n        const result = await controller.createTherapyProgress(\n          progressDto,\n          'therapist',\n          TEST_USER_IDS.THERAPIST\n        );\n\n        expect(result).toEqual(mockTherapyProgress);\n        expect(sessionsService.createTherapyProgress).toHaveBeenCalledWith({\n          ...progressDto,\n          therapistId: TEST_USER_IDS.THERAPIST,\n        });\n      });\n\n      it('should allow admin to create progress for any therapist', async () => {\n        mockSessionsService.createTherapyProgress.mockResolvedValue(mockTherapyProgress);\n\n        const result = await controller.createTherapyProgress(\n          progressDto,\n          'admin',\n          'admin-user-id'\n        );\n\n        expect(result).toEqual(mockTherapyProgress);\n        expect(sessionsService.createTherapyProgress).toHaveBeenCalledWith(progressDto);\n      });\n\n      it('should handle minimal progress data', async () => {\n        const minimalProgressDto = {\n          clientId: TEST_USER_IDS.CLIENT,\n          progressNotes: 'Session completed',\n        };\n        mockSessionsService.createTherapyProgress.mockResolvedValue(mockTherapyProgress);\n\n        const result = await controller.createTherapyProgress(\n          minimalProgressDto,\n          'therapist',\n          TEST_USER_IDS.THERAPIST\n        );\n\n        expect(result).toEqual(mockTherapyProgress);\n        expect(sessionsService.createTherapyProgress).toHaveBeenCalledWith({\n          ...minimalProgressDto,\n          therapistId: TEST_USER_IDS.THERAPIST,\n        });\n      });\n    });\n\n    describe('GET /sessions/therapy-progress', () => {\n      const queryDto = {\n        startDate: '2024-01-01T00:00:00Z',\n        endDate: '2024-01-31T23:59:59Z',\n      };\n\n      it('should get therapy progress for client', async () => {\n        const mockProgress = [mockTherapyProgress];\n        mockSessionsService.getTherapyProgress.mockResolvedValue(mockProgress);\n\n        const result = await controller.getTherapyProgress(\n          'client',\n          TEST_USER_IDS.CLIENT,\n          queryDto\n        );\n\n        expect(result).toEqual(mockProgress);\n        expect(sessionsService.getTherapyProgress).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          undefined,\n          new Date(queryDto.startDate),\n          new Date(queryDto.endDate)\n        );\n      });\n\n      it('should get therapy progress for therapist', async () => {\n        const mockProgress = [mockTherapyProgress];\n        mockSessionsService.getTherapyProgress.mockResolvedValue(mockProgress);\n\n        const result = await controller.getTherapyProgress(\n          'therapist',\n          TEST_USER_IDS.THERAPIST,\n          queryDto\n        );\n\n        expect(result).toEqual(mockProgress);\n        expect(sessionsService.getTherapyProgress).toHaveBeenCalledWith(\n          undefined,\n          TEST_USER_IDS.THERAPIST,\n          new Date(queryDto.startDate),\n          new Date(queryDto.endDate)\n        );\n      });\n\n      it('should allow admin to filter by specific client and therapist', async () => {\n        const adminQuery = {\n          ...queryDto,\n          clientId: TEST_USER_IDS.CLIENT,\n          therapistId: TEST_USER_IDS.THERAPIST,\n        };\n        const mockProgress = [mockTherapyProgress];\n        mockSessionsService.getTherapyProgress.mockResolvedValue(mockProgress);\n\n        const result = await controller.getTherapyProgress(\n          'admin',\n          'admin-user-id',\n          adminQuery\n        );\n\n        expect(result).toEqual(mockProgress);\n        expect(sessionsService.getTherapyProgress).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          TEST_USER_IDS.THERAPIST,\n          new Date(queryDto.startDate),\n          new Date(queryDto.endDate)\n        );\n      });\n    });\n  });\n\n  describe('Session Statistics', () => {\n    describe('GET /sessions/statistics', () => {\n      const queryDto = {\n        clientId: TEST_USER_IDS.CLIENT,\n        therapistId: TEST_USER_IDS.THERAPIST,\n      };\n\n      it('should get session statistics for client', async () => {\n        mockSessionsService.getSessionStatistics.mockResolvedValue(mockSessionStatistics);\n\n        const result = await controller.getSessionStatistics(\n          'client',\n          TEST_USER_IDS.CLIENT,\n          {}\n        );\n\n        expect(result).toEqual(mockSessionStatistics);\n        expect(sessionsService.getSessionStatistics).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          undefined\n        );\n      });\n\n      it('should get session statistics for therapist', async () => {\n        mockSessionsService.getSessionStatistics.mockResolvedValue(mockSessionStatistics);\n\n        const result = await controller.getSessionStatistics(\n          'therapist',\n          TEST_USER_IDS.THERAPIST,\n          {}\n        );\n\n        expect(result).toEqual(mockSessionStatistics);\n        expect(sessionsService.getSessionStatistics).toHaveBeenCalledWith(\n          undefined,\n          TEST_USER_IDS.THERAPIST\n        );\n      });\n\n      it('should allow admin to get statistics for specific client and therapist', async () => {\n        mockSessionsService.getSessionStatistics.mockResolvedValue(mockSessionStatistics);\n\n        const result = await controller.getSessionStatistics(\n          'admin',\n          'admin-user-id',\n          queryDto\n        );\n\n        expect(result).toEqual(mockSessionStatistics);\n        expect(sessionsService.getSessionStatistics).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          TEST_USER_IDS.THERAPIST\n        );\n      });\n\n      it('should handle empty statistics', async () => {\n        const emptyStats = {\n          totalSessions: 0,\n          completedSessions: 0,\n          cancelledSessions: 0,\n          averageSessionDuration: 0,\n          averageSessionRating: 0,\n          sessionsByType: { video: 0, audio: 0, chat: 0, in_person: 0 },\n          progressTrend: {\n            averageMoodRating: 0,\n            averageProgressRating: 0,\n            improvementPercentage: 0,\n          },\n          dateRange: {\n            startDate: new Date(),\n            endDate: new Date(),\n          },\n        };\n        mockSessionsService.getSessionStatistics.mockResolvedValue(emptyStats);\n\n        const result = await controller.getSessionStatistics(\n          'client',\n          TEST_USER_IDS.CLIENT,\n          {}\n        );\n\n        expect(result).toEqual(emptyStats);\n        expect(result.totalSessions).toBe(0);\n      });\n    });\n  });\n\n  describe('Role-Based Access Control', () => {\n    describe('Client Role Restrictions', () => {\n      it('should automatically set clientId for client users in session creation', async () => {\n        const dto = {\n          clientId: 'different-client-id',\n          therapistId: TEST_USER_IDS.THERAPIST,\n          sessionType: 'video' as const,\n          status: 'scheduled' as const,\n        };\n        mockSessionsService.createSessionLog.mockResolvedValue(mockSessionLog);\n\n        await controller.createSessionLog(dto, TEST_USER_IDS.CLIENT, 'client');\n\n        expect(sessionsService.createSessionLog).toHaveBeenCalledWith({\n          ...dto,\n          clientId: TEST_USER_IDS.CLIENT,\n        });\n      });\n\n      it('should filter sessions by clientId for client users', async () => {\n        const queryDto = { status: 'completed' as const };\n        mockSessionsService.findAllSessions.mockResolvedValue([mockSessionLog]);\n\n        await controller.findAllSessions('client', TEST_USER_IDS.CLIENT, queryDto);\n\n        expect(sessionsService.findAllSessions).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          undefined,\n          queryDto.status,\n          undefined\n        );\n      });\n\n      it('should filter therapy progress by clientId for client users', async () => {\n        const queryDto = { startDate: '2024-01-01T00:00:00Z' };\n        mockSessionsService.getTherapyProgress.mockResolvedValue([mockTherapyProgress]);\n\n        await controller.getTherapyProgress('client', TEST_USER_IDS.CLIENT, queryDto);\n\n        expect(sessionsService.getTherapyProgress).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          undefined,\n          new Date(queryDto.startDate),\n          undefined\n        );\n      });\n    });\n\n    describe('Therapist Role Restrictions', () => {\n      it('should automatically set therapistId for therapist users in session creation', async () => {\n        const dto = {\n          clientId: TEST_USER_IDS.CLIENT,\n          therapistId: 'different-therapist-id',\n          sessionType: 'video' as const,\n          status: 'scheduled' as const,\n        };\n        mockSessionsService.createSessionLog.mockResolvedValue(mockSessionLog);\n\n        await controller.createSessionLog(dto, TEST_USER_IDS.THERAPIST, 'therapist');\n\n        expect(sessionsService.createSessionLog).toHaveBeenCalledWith({\n          ...dto,\n          therapistId: TEST_USER_IDS.THERAPIST,\n        });\n      });\n\n      it('should filter sessions by therapistId for therapist users', async () => {\n        const queryDto = { status: 'completed' as const };\n        mockSessionsService.findAllSessions.mockResolvedValue([mockSessionLog]);\n\n        await controller.findAllSessions('therapist', TEST_USER_IDS.THERAPIST, queryDto);\n\n        expect(sessionsService.findAllSessions).toHaveBeenCalledWith(\n          undefined,\n          TEST_USER_IDS.THERAPIST,\n          queryDto.status,\n          undefined\n        );\n      });\n\n      it('should automatically set therapistId for therapy progress creation', async () => {\n        const dto = {\n          clientId: TEST_USER_IDS.CLIENT,\n          therapistId: 'different-therapist-id',\n          progressNotes: 'Progress notes',\n        };\n        mockSessionsService.createTherapyProgress.mockResolvedValue(mockTherapyProgress);\n\n        await controller.createTherapyProgress(dto, 'therapist', TEST_USER_IDS.THERAPIST);\n\n        expect(sessionsService.createTherapyProgress).toHaveBeenCalledWith({\n          ...dto,\n          therapistId: TEST_USER_IDS.THERAPIST,\n        });\n      });\n    });\n\n    describe('Admin Role Privileges', () => {\n      it('should allow admin to access all sessions without filtering', async () => {\n        const queryDto = {\n          clientId: TEST_USER_IDS.CLIENT,\n          therapistId: TEST_USER_IDS.THERAPIST,\n          status: 'completed' as const,\n        };\n        mockSessionsService.findAllSessions.mockResolvedValue([mockSessionLog]);\n\n        await controller.findAllSessions('admin', 'admin-user-id', queryDto);\n\n        expect(sessionsService.findAllSessions).toHaveBeenCalledWith(\n          TEST_USER_IDS.CLIENT,\n          TEST_USER_IDS.THERAPIST,\n          queryDto.status,\n          undefined\n        );\n      });\n\n      it('should allow admin to create therapy progress for any therapist', async () => {\n        const dto = {\n          clientId: TEST_USER_IDS.CLIENT,\n          therapistId: TEST_USER_IDS.THERAPIST,\n          progressNotes: 'Admin-created progress notes',\n        };\n        mockSessionsService.createTherapyProgress.mockResolvedValue(mockTherapyProgress);\n\n        await controller.createTherapyProgress(dto, 'admin', 'admin-user-id');\n\n        expect(sessionsService.createTherapyProgress).toHaveBeenCalledWith(dto);\n      });\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle service unavailable scenarios', async () => {\n      const serviceError = new Error('Service temporarily unavailable');\n      mockSessionsService.findAllSessions.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.findAllSessions('client', TEST_USER_IDS.CLIENT, {})\n      ).rejects.toThrow(serviceError);\n    });\n\n    it('should handle invalid session data', async () => {\n      const validationError = new BadRequestException('Invalid session type');\n      mockSessionsService.createSessionLog.mockRejectedValue(validationError);\n\n      await expect(\n        controller.createSessionLog(\n          {\n            clientId: TEST_USER_IDS.CLIENT,\n            therapistId: TEST_USER_IDS.THERAPIST,\n            sessionType: 'invalid' as any,\n            status: 'scheduled' as const,\n          },\n          TEST_USER_IDS.THERAPIST,\n          'therapist'\n        )\n      ).rejects.toThrow(validationError);\n    });\n\n    it('should handle concurrent session updates', async () => {\n      const concurrencyError = new Error('Session is being updated by another process');\n      mockSessionsService.updateSession.mockRejectedValue(concurrencyError);\n\n      await expect(\n        controller.updateSession('session_123456789', { status: 'completed' })\n      ).rejects.toThrow(concurrencyError);\n    });\n\n    it('should handle database connection errors', async () => {\n      const dbError = new Error('Database connection failed');\n      mockSessionsService.getSessionStatistics.mockRejectedValue(dbError);\n\n      await expect(\n        controller.getSessionStatistics('client', TEST_USER_IDS.CLIENT, {})\n      ).rejects.toThrow(dbError);\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted session log', async () => {\n      mockSessionsService.createSessionLog.mockResolvedValue(mockSessionLog);\n\n      const result = await controller.createSessionLog(\n        {\n          clientId: TEST_USER_IDS.CLIENT,\n          therapistId: TEST_USER_IDS.THERAPIST,\n          sessionType: 'video',\n          status: 'scheduled',\n        },\n        TEST_USER_IDS.THERAPIST,\n        'therapist'\n      );\n\n      TestAssertions.expectValidEntity(result, ['id', 'clientId', 'therapistId', 'sessionType']);\n      expect(result.id).toBe(mockSessionLog.id);\n      expect(result.sessionType).toBe('video');\n    });\n\n    it('should return properly formatted session statistics', async () => {\n      mockSessionsService.getSessionStatistics.mockResolvedValue(mockSessionStatistics);\n\n      const result = await controller.getSessionStatistics(\n        'client',\n        TEST_USER_IDS.CLIENT,\n        {}\n      );\n\n      expect(typeof result.totalSessions).toBe('number');\n      expect(typeof result.averageSessionDuration).toBe('number');\n      expect(typeof result.averageSessionRating).toBe('number');\n      expect(typeof result.sessionsByType).toBe('object');\n      expect(typeof result.progressTrend).toBe('object');\n    });\n\n    it('should return properly formatted therapy progress', async () => {\n      mockSessionsService.createTherapyProgress.mockResolvedValue(mockTherapyProgress);\n\n      const result = await controller.createTherapyProgress(\n        {\n          clientId: TEST_USER_IDS.CLIENT,\n          progressNotes: 'Test progress notes',\n        },\n        'therapist',\n        TEST_USER_IDS.THERAPIST\n      );\n\n      TestAssertions.expectValidEntity(result, ['id', 'clientId', 'therapistId', 'progressNotes']);\n      expect(Array.isArray(result.goalsAchieved)).toBe(true);\n      expect(Array.isArray(result.newGoals)).toBe(true);\n      expect(typeof result.moodRating).toBe('number');\n      expect(typeof result.progressRating).toBe('number');\n    });\n\n    it('should return properly formatted user activities', async () => {\n      const mockActivities = [mockUserActivity];\n      mockSessionsService.getUserActivities.mockResolvedValue(mockActivities);\n\n      const result = await controller.getUserActivities(TEST_USER_IDS.CLIENT, {});\n\n      expect(Array.isArray(result)).toBe(true);\n      if (result.length > 0) {\n        TestAssertions.expectValidEntity(result[0], ['id', 'userId', 'action', 'timestamp']);\n        expect(['click', 'view', 'scroll', 'form_submit', 'navigation', 'other']).toContain(\n          result[0].action\n        );\n      }\n    });\n  });\n});"],"version":3}