{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/client/client.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/client/client.controller.spec.ts"],"sourcesContent":["/**\n * Comprehensive Test Suite for ClientController\n * Tests all client management endpoints with security, validation, and error handling\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { HttpException, HttpStatus } from '@nestjs/common';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { ClientController } from './client.controller';\nimport { ClientService } from './client.service';\nimport { SecurityGuardTestUtils, RoleBasedTestUtils } from '../test-utils/auth-testing-helpers';\nimport { MockBuilder, TestDataGenerator, TestAssertions } from '../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../test-utils/index';\n\ndescribe('ClientController', () => {\n  let controller: ClientController;\n  let clientService: ClientService;\n  let module: TestingModule;\n\n  // Mock ClientService\n  const mockClientService = {\n    getProfile: jest.fn(),\n    updateProfile: jest.fn(),\n    needsTherapistRecommendations: jest.fn(),\n    markTherapistRecommendationsSeen: jest.fn(),\n    getAssignedTherapist: jest.fn(),\n    assignTherapist: jest.fn(),\n    removeTherapist: jest.fn(),\n  };\n\n  // Mock JwtAuthGuard\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test data\n  const mockClientProfile = TestDataGenerator.createUser({\n    id: TEST_USER_IDS.CLIENT,\n    email: TEST_EMAILS.CLIENT,\n    role: 'client',\n    firstName: 'John',\n    lastName: 'Doe',\n  });\n\n  const mockTherapistRecommendation = {\n    id: TEST_USER_IDS.THERAPIST,\n    email: TEST_EMAILS.THERAPIST,\n    firstName: 'Dr. Jane',\n    lastName: 'Smith',\n    bio: 'Experienced therapist specializing in anxiety and depression',\n    providerType: 'Licensed Clinical Psychologist',\n    areasOfExpertise: ['anxiety', 'depression'],\n    hourlyRate: 150.0,\n    rating: 4.8,\n    reviewCount: 25,\n  };\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [ClientController],\n      providers: [\n        {\n          provide: ClientService,\n          useValue: mockClientService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .compile();\n\n    controller = module.get<ClientController>(ClientController);\n    clientService = module.get<ClientService>(ClientService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have clientService injected', () => {\n      expect(clientService).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', ClientController);\n      expect(guards).toContain(JwtAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', ClientController);\n      expect(controllerMetadata).toBe('client');\n    });\n  });\n\n  describe('GET /client/profile', () => {\n    it('should retrieve client profile successfully', async () => {\n      mockClientService.getProfile.mockResolvedValue(mockClientProfile);\n\n      const result = await controller.getProfile(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(mockClientProfile);\n      expect(clientService.getProfile).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should handle service errors with proper HTTP exceptions', async () => {\n      const serviceError = new Error('Database connection failed');\n      mockClientService.getProfile.mockRejectedValue(serviceError);\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.getProfile(TEST_USER_IDS.CLIENT),\n        HttpException,\n        'Failed to fetch client profile: Database connection failed',\n      );\n    });\n\n    it('should handle unknown errors gracefully', async () => {\n      mockClientService.getProfile.mockRejectedValue('Unknown error');\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.getProfile(TEST_USER_IDS.CLIENT),\n        HttpException,\n        'Failed to fetch client profile: Unknown error',\n      );\n    });\n  });\n\n  describe('PUT /client/profile', () => {\n    const updateData = {\n      firstName: 'Updated John',\n      lastName: 'Updated Doe',\n      bio: 'Updated bio',\n    };\n\n    it('should update client profile successfully', async () => {\n      const updatedProfile = { ...mockClientProfile, ...updateData };\n      mockClientService.updateProfile.mockResolvedValue(updatedProfile);\n\n      const result = await controller.updateProfile(TEST_USER_IDS.CLIENT, updateData);\n\n      expect(result).toEqual(updatedProfile);\n      expect(clientService.updateProfile).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT, updateData);\n    });\n\n    it('should handle service errors with proper HTTP exceptions', async () => {\n      const serviceError = new Error('Validation failed');\n      mockClientService.updateProfile.mockRejectedValue(serviceError);\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.updateProfile(TEST_USER_IDS.CLIENT, updateData),\n        HttpException,\n        'Failed to update client profile: Validation failed',\n      );\n    });\n\n    it('should validate required fields', async () => {\n      const invalidData = {};\n      const result = await controller.updateProfile(TEST_USER_IDS.CLIENT, invalidData);\n\n      expect(clientService.updateProfile).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT, invalidData);\n    });\n  });\n\n  describe('GET /client/needs-therapist-recommendations', () => {\n    it('should return true when client needs therapist recommendations', async () => {\n      mockClientService.needsTherapistRecommendations.mockResolvedValue(true);\n\n      const result = await controller.needsTherapistRecommendations(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual({ needsTherapistRecommendations: true });\n      expect(clientService.needsTherapistRecommendations).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should return false when client does not need therapist recommendations', async () => {\n      mockClientService.needsTherapistRecommendations.mockResolvedValue(false);\n\n      const result = await controller.needsTherapistRecommendations(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual({ needsTherapistRecommendations: false });\n    });\n\n    it('should handle service errors with proper HTTP exceptions', async () => {\n      const serviceError = new Error('Database query failed');\n      mockClientService.needsTherapistRecommendations.mockRejectedValue(serviceError);\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.needsTherapistRecommendations(TEST_USER_IDS.CLIENT),\n        HttpException,\n        'Failed to check therapist recommendations: Database query failed',\n      );\n    });\n  });\n\n  describe('PUT /client/mark-therapist-recommendations-seen', () => {\n    it('should mark therapist recommendations as seen successfully', async () => {\n      mockClientService.markTherapistRecommendationsSeen.mockResolvedValue(undefined);\n\n      const result = await controller.markTherapistRecommendationsSeen(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual({ success: true });\n      expect(clientService.markTherapistRecommendationsSeen).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should handle service errors with proper HTTP exceptions', async () => {\n      const serviceError = new Error('Update failed');\n      mockClientService.markTherapistRecommendationsSeen.mockRejectedValue(serviceError);\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.markTherapistRecommendationsSeen(TEST_USER_IDS.CLIENT),\n        HttpException,\n        'Failed to mark therapist recommendations as seen: Update failed',\n      );\n    });\n  });\n\n  describe('GET /client/therapist', () => {\n    it('should return assigned therapist when one exists', async () => {\n      mockClientService.getAssignedTherapist.mockResolvedValue(mockTherapistRecommendation);\n\n      const result = await controller.getAssignedTherapist(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual({ therapist: mockTherapistRecommendation });\n      expect(clientService.getAssignedTherapist).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should return null when no therapist is assigned', async () => {\n      mockClientService.getAssignedTherapist.mockResolvedValue(null);\n\n      const result = await controller.getAssignedTherapist(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual({ therapist: null });\n    });\n\n    it('should handle service errors with proper HTTP exceptions', async () => {\n      const serviceError = new Error('Database query failed');\n      mockClientService.getAssignedTherapist.mockRejectedValue(serviceError);\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.getAssignedTherapist(TEST_USER_IDS.CLIENT),\n        HttpException,\n        'Failed to fetch assigned therapist: Database query failed',\n      );\n    });\n  });\n\n  describe('POST /client/therapist', () => {\n    const assignData = { therapistId: TEST_USER_IDS.THERAPIST };\n\n    it('should assign therapist successfully', async () => {\n      mockClientService.assignTherapist.mockResolvedValue(mockTherapistRecommendation);\n\n      const result = await controller.assignTherapist(TEST_USER_IDS.CLIENT, assignData);\n\n      expect(result).toEqual({ therapist: mockTherapistRecommendation });\n      expect(clientService.assignTherapist).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT, assignData.therapistId);\n    });\n\n    it('should handle not found errors with 404 status', async () => {\n      const serviceError = new Error('Therapist not found');\n      mockClientService.assignTherapist.mockRejectedValue(serviceError);\n\n      let thrownError: any = null;\n      try {\n        await controller.assignTherapist(TEST_USER_IDS.CLIENT, assignData);\n      } catch (error) {\n        thrownError = error;\n      }\n\n      expect(thrownError).toBeInstanceOf(HttpException);\n      expect(thrownError.getStatus()).toBe(HttpStatus.NOT_FOUND);\n      expect(thrownError.message).toContain('Failed to assign therapist: Therapist not found');\n    });\n\n    it('should handle general service errors with 500 status', async () => {\n      const serviceError = new Error('Database connection failed');\n      mockClientService.assignTherapist.mockRejectedValue(serviceError);\n\n      let thrownError: any = null;\n      try {\n        await controller.assignTherapist(TEST_USER_IDS.CLIENT, assignData);\n      } catch (error) {\n        thrownError = error;\n      }\n\n      expect(thrownError).toBeInstanceOf(HttpException);\n      expect(thrownError.getStatus()).toBe(HttpStatus.INTERNAL_SERVER_ERROR);\n      expect(thrownError.message).toContain('Failed to assign therapist: Database connection failed');\n    });\n\n    it('should validate therapist assignment data', async () => {\n      const invalidData = { therapistId: '' };\n      mockClientService.assignTherapist.mockRejectedValue(new Error('Invalid therapist ID'));\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.assignTherapist(TEST_USER_IDS.CLIENT, invalidData),\n        HttpException,\n        'Failed to assign therapist: Invalid therapist ID',\n      );\n    });\n  });\n\n  describe('DELETE /client/therapist', () => {\n    it('should remove therapist successfully', async () => {\n      mockClientService.removeTherapist.mockResolvedValue(undefined);\n\n      const result = await controller.removeTherapist(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual({ success: true });\n      expect(clientService.removeTherapist).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should handle not found errors with 404 status', async () => {\n      const serviceError = new Error('Therapist assignment not found');\n      mockClientService.removeTherapist.mockRejectedValue(serviceError);\n\n      let thrownError: any = null;\n      try {\n        await controller.removeTherapist(TEST_USER_IDS.CLIENT);\n      } catch (error) {\n        thrownError = error;\n      }\n\n      expect(thrownError).toBeInstanceOf(HttpException);\n      expect(thrownError.getStatus()).toBe(HttpStatus.NOT_FOUND);\n      expect(thrownError.message).toContain('Failed to remove therapist: Therapist assignment not found');\n    });\n\n    it('should handle general service errors with 500 status', async () => {\n      const serviceError = new Error('Database update failed');\n      mockClientService.removeTherapist.mockRejectedValue(serviceError);\n\n      let thrownError: any = null;\n      try {\n        await controller.removeTherapist(TEST_USER_IDS.CLIENT);\n      } catch (error) {\n        thrownError = error;\n      }\n\n      expect(thrownError).toBeInstanceOf(HttpException);\n      expect(thrownError.getStatus()).toBe(HttpStatus.INTERNAL_SERVER_ERROR);\n      expect(thrownError.message).toContain('Failed to remove therapist: Database update failed');\n    });\n  });\n\n  describe('Integration Testing', () => {\n    it('should handle complete client workflow', async () => {\n      // Step 1: Get client profile\n      mockClientService.getProfile.mockResolvedValue(mockClientProfile);\n      const profile = await controller.getProfile(TEST_USER_IDS.CLIENT);\n      expect(profile).toEqual(mockClientProfile);\n\n      // Step 2: Check if needs therapist recommendations\n      mockClientService.needsTherapistRecommendations.mockResolvedValue(true);\n      const needsRecs = await controller.needsTherapistRecommendations(TEST_USER_IDS.CLIENT);\n      expect(needsRecs.needsTherapistRecommendations).toBe(true);\n\n      // Step 3: Assign therapist\n      mockClientService.assignTherapist.mockResolvedValue(mockTherapistRecommendation);\n      const assignResult = await controller.assignTherapist(TEST_USER_IDS.CLIENT, { therapistId: TEST_USER_IDS.THERAPIST });\n      expect(assignResult.therapist).toEqual(mockTherapistRecommendation);\n\n      // Step 4: Mark recommendations as seen\n      mockClientService.markTherapistRecommendationsSeen.mockResolvedValue(undefined);\n      const markResult = await controller.markTherapistRecommendationsSeen(TEST_USER_IDS.CLIENT);\n      expect(markResult.success).toBe(true);\n\n      // Step 5: Get assigned therapist\n      mockClientService.getAssignedTherapist.mockResolvedValue(mockTherapistRecommendation);\n      const assignedTherapist = await controller.getAssignedTherapist(TEST_USER_IDS.CLIENT);\n      expect(assignedTherapist.therapist).toEqual(mockTherapistRecommendation);\n\n      // Verify all service calls were made\n      expect(clientService.getProfile).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(clientService.needsTherapistRecommendations).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(clientService.assignTherapist).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT, TEST_USER_IDS.THERAPIST);\n      expect(clientService.markTherapistRecommendationsSeen).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(clientService.getAssignedTherapist).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should handle therapist reassignment workflow', async () => {\n      // Step 1: Remove current therapist\n      mockClientService.removeTherapist.mockResolvedValue(undefined);\n      const removeResult = await controller.removeTherapist(TEST_USER_IDS.CLIENT);\n      expect(removeResult.success).toBe(true);\n\n      // Step 2: Assign new therapist\n      const newTherapistId = 'new-therapist-id';\n      mockClientService.assignTherapist.mockResolvedValue(mockTherapistRecommendation);\n      const assignResult = await controller.assignTherapist(TEST_USER_IDS.CLIENT, { therapistId: newTherapistId });\n      expect(assignResult.therapist).toEqual(mockTherapistRecommendation);\n\n      // Verify service calls\n      expect(clientService.removeTherapist).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(clientService.assignTherapist).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT, newTherapistId);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle service unavailable scenarios', async () => {\n      const serviceError = new Error('Service temporarily unavailable');\n      mockClientService.getProfile.mockRejectedValue(serviceError);\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.getProfile(TEST_USER_IDS.CLIENT),\n        HttpException,\n        'Failed to fetch client profile: Service temporarily unavailable',\n      );\n    });\n\n    it('should handle concurrent access issues', async () => {\n      const concurrencyError = new Error('Resource is locked');\n      mockClientService.assignTherapist.mockRejectedValue(concurrencyError);\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.assignTherapist(TEST_USER_IDS.CLIENT, { therapistId: TEST_USER_IDS.THERAPIST }),\n        HttpException,\n        'Failed to assign therapist: Resource is locked',\n      );\n    });\n\n    it('should handle malformed request data', async () => {\n      const malformedData = { invalid: 'data' };\n      const result = await controller.updateProfile(TEST_USER_IDS.CLIENT, malformedData as any);\n\n      expect(clientService.updateProfile).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT, malformedData);\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted profile response', async () => {\n      mockClientService.getProfile.mockResolvedValue(mockClientProfile);\n\n      const result = await controller.getProfile(TEST_USER_IDS.CLIENT);\n\n      TestAssertions.expectValidEntity(result, ['id', 'email', 'firstName', 'lastName', 'role']);\n    });\n\n    it('should return properly formatted therapist assignment response', async () => {\n      mockClientService.assignTherapist.mockResolvedValue(mockTherapistRecommendation);\n\n      const result = await controller.assignTherapist(TEST_USER_IDS.CLIENT, { therapistId: TEST_USER_IDS.THERAPIST });\n\n      expect(result).toHaveProperty('therapist');\n      expect(result.therapist).toEqual(mockTherapistRecommendation);\n    });\n\n    it('should return properly formatted boolean responses', async () => {\n      mockClientService.needsTherapistRecommendations.mockResolvedValue(true);\n\n      const result = await controller.needsTherapistRecommendations(TEST_USER_IDS.CLIENT);\n\n      expect(result).toHaveProperty('needsTherapistRecommendations');\n      expect(typeof result.needsTherapistRecommendations).toBe('boolean');\n    });\n\n    it('should return properly formatted success responses', async () => {\n      mockClientService.markTherapistRecommendationsSeen.mockResolvedValue(undefined);\n\n      const result = await controller.markTherapistRecommendationsSeen(TEST_USER_IDS.CLIENT);\n\n      expect(result).toHaveProperty('success');\n      expect(result.success).toBe(true);\n    });\n  });\n});"],"version":3}