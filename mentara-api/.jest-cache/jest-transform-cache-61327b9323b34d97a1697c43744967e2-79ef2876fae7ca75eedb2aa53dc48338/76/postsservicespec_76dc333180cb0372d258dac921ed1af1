d18a71363d240d0da557719830b4dac9
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const posts_service_1 = require("./posts.service");
const prisma_client_provider_1 = require("../providers/prisma-client.provider");
describe('PostsService', () => {
    let service;
    let prismaService;
    // Test data constants
    const mockUserId = 'user-123';
    const mockPostId = 'post-123';
    const mockRoomId = 'room-123';
    const mockReportId = 'report-123';
    const mockUser = {
        id: mockUserId,
        firstName: 'Test',
        lastName: 'User',
        email: 'test@example.com',
        avatarUrl: 'https://example.com/avatar.jpg',
        role: 'client',
        isActive: true,
        emailVerified: true,
        createdAt: new Date(),
        updatedAt: new Date(),
        stripeCustomerId: null,
        deletedAt: null,
        lastActiveAt: new Date(),
        onboardingCompleted: true,
        googleId: null,
        microsoftId: null,
        emailVerificationToken: null,
        emailVerifiedAt: new Date(),
        passwordResetToken: null,
        passwordResetTokenExpiresAt: null,
        password: null,
    };
    const mockPost = {
        id: mockPostId,
        title: 'Test Post',
        content: 'This is a test post content',
        userId: mockUserId,
        roomId: mockRoomId,
        attachmentUrls: ['https://example.com/attachment1.jpg'],
        attachmentNames: ['attachment1.jpg'],
        attachmentSizes: [1024],
        isAnonymous: false,
        createdAt: new Date(),
        updatedAt: new Date(),
    };
    const mockPostWithIncludes = {
        ...mockPost,
        user: {
            id: mockUserId,
            firstName: 'Test',
            lastName: 'User',
            avatarUrl: 'https://example.com/avatar.jpg',
        },
        room: {
            id: mockRoomId,
            name: 'Test Room',
        },
        comments: [],
        hearts: [],
        _count: {
            comments: 0,
            hearts: 0,
        },
    };
    const mockComment = {
        id: 'comment-123',
        content: 'Test comment',
        userId: 'commenter-123',
        postId: mockPostId,
        parentId: null,
        createdAt: new Date(),
        updatedAt: new Date(),
        user: {
            id: 'commenter-123',
            firstName: 'Commenter',
            lastName: 'User',
            avatarUrl: 'https://example.com/commenter.jpg',
        },
        children: [],
        _count: {
            children: 0,
            hearts: 0,
        },
    };
    const mockHeart = {
        id: 'heart-123',
        postId: mockPostId,
        userId: mockUserId,
        createdAt: new Date(),
    };
    const mockReport = {
        id: mockReportId,
        postId: mockPostId,
        reporterId: 'reporter-123',
        reason: 'Inappropriate content',
        content: 'This post contains offensive material',
        status: 'pending',
        createdAt: new Date(),
        updatedAt: new Date(),
    };
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                posts_service_1.PostsService,
                {
                    provide: prisma_client_provider_1.PrismaService,
                    useValue: {
                        user: {
                            findUnique: jest.fn(),
                        },
                        post: {
                            findMany: jest.fn(),
                            findUnique: jest.fn(),
                            create: jest.fn(),
                            update: jest.fn(),
                            delete: jest.fn(),
                        },
                        postHeart: {
                            findUnique: jest.fn(),
                            create: jest.fn(),
                            delete: jest.fn(),
                        },
                        report: {
                            findFirst: jest.fn(),
                            create: jest.fn(),
                        },
                    },
                },
            ],
        }).compile();
        service = module.get(posts_service_1.PostsService);
        prismaService = module.get(prisma_client_provider_1.PrismaService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    // ===== USER MANAGEMENT TESTS =====
    describe('findUserById', () => {
        it('should find user by ID successfully', async () => {
            prismaService.user.findUnique.mockResolvedValue(mockUser);
            const result = await service.findUserById(mockUserId);
            expect(result).toEqual(mockUser);
            expect(prismaService.user.findUnique).toHaveBeenCalledWith({
                where: { id: mockUserId },
            });
        });
        it('should return null when user not found', async () => {
            prismaService.user.findUnique.mockResolvedValue(null);
            const result = await service.findUserById('non-existent-user');
            expect(result).toBeNull();
            expect(prismaService.user.findUnique).toHaveBeenCalledWith({
                where: { id: 'non-existent-user' },
            });
        });
        it('should handle database errors', async () => {
            const dbError = new Error('Database connection failed');
            prismaService.user.findUnique.mockRejectedValue(dbError);
            await expect(service.findUserById(mockUserId)).rejects.toThrow(dbError);
        });
    });
    // ===== POST RETRIEVAL TESTS =====
    describe('findAll', () => {
        it('should find all posts without userId', async () => {
            const mockPosts = [mockPostWithIncludes];
            prismaService.post.findMany.mockResolvedValue(mockPosts);
            const result = await service.findAll();
            expect(result).toEqual(mockPosts);
            expect(prismaService.post.findMany).toHaveBeenCalledWith({
                include: {
                    user: {
                        select: {
                            id: true,
                            firstName: true,
                            lastName: true,
                            avatarUrl: true,
                        },
                    },
                    room: {
                        select: {
                            id: true,
                            name: true,
                        },
                    },
                    comments: {
                        include: {
                            user: {
                                select: {
                                    id: true,
                                    firstName: true,
                                    lastName: true,
                                    avatarUrl: true,
                                },
                            },
                            children: {
                                include: {
                                    user: {
                                        select: {
                                            id: true,
                                            firstName: true,
                                            lastName: true,
                                            avatarUrl: true,
                                        },
                                    },
                                    _count: {
                                        select: {
                                            children: true,
                                            hearts: true,
                                        },
                                    },
                                },
                                orderBy: {
                                    createdAt: 'asc',
                                },
                            },
                        },
                        orderBy: {
                            createdAt: 'desc',
                        },
                    },
                    hearts: false,
                    _count: {
                        select: {
                            comments: true,
                            hearts: true,
                        },
                    },
                },
                orderBy: {
                    createdAt: 'desc',
                },
            });
        });
        it('should find all posts with userId (includes user hearts)', async () => {
            const mockPosts = [mockPostWithIncludes];
            prismaService.post.findMany.mockResolvedValue(mockPosts);
            const result = await service.findAll(mockUserId);
            expect(result).toEqual(mockPosts);
            expect(prismaService.post.findMany).toHaveBeenCalledWith({
                include: {
                    user: expect.any(Object),
                    room: expect.any(Object),
                    comments: expect.any(Object),
                    hearts: {
                        where: {
                            userId: mockUserId,
                        },
                    },
                    _count: expect.any(Object),
                },
                orderBy: {
                    createdAt: 'desc',
                },
            });
        });
        it('should return empty array when no posts exist', async () => {
            prismaService.post.findMany.mockResolvedValue([]);
            const result = await service.findAll();
            expect(result).toEqual([]);
        });
        it('should handle posts with comments and nested replies', async () => {
            const postWithComments = {
                ...mockPostWithIncludes,
                comments: [
                    {
                        ...mockComment,
                        children: [
                            {
                                id: 'reply-123',
                                content: 'Reply to comment',
                                userId: 'replier-123',
                                user: {
                                    id: 'replier-123',
                                    firstName: 'Replier',
                                    lastName: 'User',
                                    avatarUrl: null,
                                },
                                _count: { children: 0, hearts: 1 },
                            },
                        ],
                    },
                ],
                _count: { comments: 1, hearts: 2 },
            };
            prismaService.post.findMany.mockResolvedValue([postWithComments]);
            const result = await service.findAll();
            expect(result).toEqual([postWithComments]);
            expect(result[0].comments[0].children).toHaveLength(1);
        });
        it('should handle database errors', async () => {
            const dbError = new Error('Database query failed');
            prismaService.post.findMany.mockRejectedValue(dbError);
            await expect(service.findAll()).rejects.toThrow(dbError);
        });
    });
    describe('findOne', () => {
        it('should find single post by ID', async () => {
            prismaService.post.findUnique.mockResolvedValue(mockPostWithIncludes);
            const result = await service.findOne(mockPostId);
            expect(result).toEqual(mockPostWithIncludes);
            expect(prismaService.post.findUnique).toHaveBeenCalledWith({
                where: { id: mockPostId },
                include: expect.any(Object),
            });
        });
        it('should find single post by ID with userId for hearts', async () => {
            const postWithUserHeart = {
                ...mockPostWithIncludes,
                hearts: [mockHeart],
            };
            prismaService.post.findUnique.mockResolvedValue(postWithUserHeart);
            const result = await service.findOne(mockPostId, mockUserId);
            expect(result).toEqual(postWithUserHeart);
            expect(prismaService.post.findUnique).toHaveBeenCalledWith({
                where: { id: mockPostId },
                include: expect.objectContaining({
                    hearts: {
                        where: {
                            userId: mockUserId,
                        },
                    },
                }),
            });
        });
        it('should return null when post not found', async () => {
            prismaService.post.findUnique.mockResolvedValue(null);
            const result = await service.findOne('non-existent-post');
            expect(result).toBeNull();
        });
        it('should handle posts with complex comment structures', async () => {
            const complexPost = {
                ...mockPostWithIncludes,
                comments: [
                    {
                        ...mockComment,
                        children: [
                            {
                                id: 'nested-reply-1',
                                content: 'Nested reply 1',
                                userId: 'user-1',
                                user: { id: 'user-1', firstName: 'User', lastName: 'One', avatarUrl: null },
                                _count: { children: 0, hearts: 0 },
                            },
                            {
                                id: 'nested-reply-2',
                                content: 'Nested reply 2',
                                userId: 'user-2',
                                user: { id: 'user-2', firstName: 'User', lastName: 'Two', avatarUrl: null },
                                _count: { children: 0, hearts: 3 },
                            },
                        ],
                    },
                ],
            };
            prismaService.post.findUnique.mockResolvedValue(complexPost);
            const result = await service.findOne(mockPostId);
            expect(result).toEqual(complexPost);
            expect(result.comments[0].children).toHaveLength(2);
        });
    });
    // ===== POST CREATION TESTS =====
    describe('create', () => {
        it('should create post successfully without attachments', async () => {
            const createData = {
                title: 'New Post',
                content: 'This is a new post',
                user: { connect: { id: mockUserId } },
                room: { connect: { id: mockRoomId } },
            };
            const expectedPost = {
                ...mockPost,
                title: 'New Post',
                content: 'This is a new post',
                attachmentUrls: [],
                attachmentNames: [],
                attachmentSizes: [],
            };
            prismaService.post.create.mockResolvedValue(expectedPost);
            const result = await service.create(createData);
            expect(result).toEqual(expectedPost);
            expect(prismaService.post.create).toHaveBeenCalledWith({
                data: {
                    ...createData,
                    attachmentUrls: [],
                    attachmentNames: [],
                    attachmentSizes: [],
                },
                include: {
                    user: {
                        select: {
                            id: true,
                            firstName: true,
                            lastName: true,
                            avatarUrl: true,
                        },
                    },
                    room: {
                        select: {
                            id: true,
                            name: true,
                        },
                    },
                },
            });
        });
        it('should create post successfully with attachments', async () => {
            const createData = {
                title: 'Post with Attachments',
                content: 'This post has attachments',
                user: { connect: { id: mockUserId } },
                room: { connect: { id: mockRoomId } },
            };
            const attachmentUrls = ['https://example.com/file1.jpg', 'https://example.com/file2.pdf'];
            const attachmentNames = ['image.jpg', 'document.pdf'];
            const attachmentSizes = [1024, 2048];
            const expectedPost = {
                ...mockPost,
                title: 'Post with Attachments',
                content: 'This post has attachments',
                attachmentUrls,
                attachmentNames,
                attachmentSizes,
            };
            prismaService.post.create.mockResolvedValue(expectedPost);
            const result = await service.create(createData, attachmentUrls, attachmentNames, attachmentSizes);
            expect(result).toEqual(expectedPost);
            expect(prismaService.post.create).toHaveBeenCalledWith({
                data: {
                    ...createData,
                    attachmentUrls,
                    attachmentNames,
                    attachmentSizes,
                },
                include: expect.any(Object),
            });
        });
        it('should create anonymous post', async () => {
            const createData = {
                title: 'Anonymous Post',
                content: 'This is an anonymous post',
                isAnonymous: true,
                user: { connect: { id: mockUserId } },
                room: { connect: { id: mockRoomId } },
            };
            const expectedPost = {
                ...mockPost,
                title: 'Anonymous Post',
                content: 'This is an anonymous post',
                isAnonymous: true,
            };
            prismaService.post.create.mockResolvedValue(expectedPost);
            const result = await service.create(createData);
            expect(result).toEqual(expectedPost);
            expect(prismaService.post.create).toHaveBeenCalledWith(expect.objectContaining({
                data: expect.objectContaining({
                    isAnonymous: true,
                }),
            }));
        });
        it('should handle creation with empty content', async () => {
            const createData = {
                title: 'Title Only Post',
                content: '',
                user: { connect: { id: mockUserId } },
                room: { connect: { id: mockRoomId } },
            };
            const expectedPost = { ...mockPost, title: 'Title Only Post', content: '' };
            prismaService.post.create.mockResolvedValue(expectedPost);
            const result = await service.create(createData);
            expect(result).toEqual(expectedPost);
        });
        it('should handle database errors during creation', async () => {
            const createData = {
                title: 'New Post',
                content: 'Content',
                user: { connect: { id: mockUserId } },
                room: { connect: { id: mockRoomId } },
            };
            const dbError = new Error('Database constraint violation');
            prismaService.post.create.mockRejectedValue(dbError);
            await expect(service.create(createData)).rejects.toThrow(dbError);
        });
    });
    // ===== POST UPDATE TESTS =====
    describe('update', () => {
        const updateData = {
            title: 'Updated Title',
            content: 'Updated content',
        };
        it('should update post successfully', async () => {
            const existingPost = { userId: mockUserId };
            const updatedPost = { ...mockPostWithIncludes, ...updateData };
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            prismaService.post.update.mockResolvedValue(updatedPost);
            const result = await service.update(mockPostId, updateData, mockUserId);
            expect(result).toEqual(updatedPost);
            expect(prismaService.post.findUnique).toHaveBeenCalledWith({
                where: { id: mockPostId },
                select: { userId: true },
            });
            expect(prismaService.post.update).toHaveBeenCalledWith({
                where: { id: mockPostId },
                data: {
                    title: updateData.title,
                    content: updateData.content,
                },
                include: {
                    user: {
                        select: {
                            id: true,
                            firstName: true,
                            lastName: true,
                            avatarUrl: true,
                        },
                    },
                    room: {
                        select: {
                            id: true,
                            name: true,
                        },
                    },
                },
            });
        });
        it('should throw NotFoundException when post does not exist', async () => {
            prismaService.post.findUnique.mockResolvedValue(null);
            await expect(service.update(mockPostId, updateData, mockUserId)).rejects.toThrow(common_1.NotFoundException);
            await expect(service.update(mockPostId, updateData, mockUserId)).rejects.toThrow('Post not found');
            expect(prismaService.post.update).not.toHaveBeenCalled();
        });
        it('should throw ForbiddenException when user is not the owner', async () => {
            const existingPost = { userId: 'other-user-123' };
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            await expect(service.update(mockPostId, updateData, mockUserId)).rejects.toThrow(common_1.ForbiddenException);
            await expect(service.update(mockPostId, updateData, mockUserId)).rejects.toThrow('You can only edit your own posts');
            expect(prismaService.post.update).not.toHaveBeenCalled();
        });
        it('should update only provided fields', async () => {
            const partialUpdateData = { title: 'Only Title Updated' };
            const existingPost = { userId: mockUserId };
            const updatedPost = { ...mockPostWithIncludes, title: 'Only Title Updated' };
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            prismaService.post.update.mockResolvedValue(updatedPost);
            const result = await service.update(mockPostId, partialUpdateData, mockUserId);
            expect(result).toEqual(updatedPost);
            expect(prismaService.post.update).toHaveBeenCalledWith({
                where: { id: mockPostId },
                data: {
                    title: 'Only Title Updated',
                    content: undefined,
                },
                include: expect.any(Object),
            });
        });
        it('should handle database errors during update', async () => {
            const existingPost = { userId: mockUserId };
            const dbError = new Error('Database update failed');
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            prismaService.post.update.mockRejectedValue(dbError);
            await expect(service.update(mockPostId, updateData, mockUserId)).rejects.toThrow(dbError);
        });
        it('should handle empty update data', async () => {
            const emptyUpdateData = {};
            const existingPost = { userId: mockUserId };
            const updatedPost = mockPostWithIncludes;
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            prismaService.post.update.mockResolvedValue(updatedPost);
            const result = await service.update(mockPostId, emptyUpdateData, mockUserId);
            expect(result).toEqual(updatedPost);
            expect(prismaService.post.update).toHaveBeenCalledWith({
                where: { id: mockPostId },
                data: {
                    title: undefined,
                    content: undefined,
                },
                include: expect.any(Object),
            });
        });
    });
    // ===== POST DELETION TESTS =====
    describe('remove', () => {
        it('should delete post successfully', async () => {
            const existingPost = { userId: mockUserId };
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            prismaService.post.delete.mockResolvedValue(mockPost);
            const result = await service.remove(mockPostId, mockUserId);
            expect(result).toEqual(mockPost);
            expect(prismaService.post.findUnique).toHaveBeenCalledWith({
                where: { id: mockPostId },
                select: { userId: true },
            });
            expect(prismaService.post.delete).toHaveBeenCalledWith({
                where: { id: mockPostId },
            });
        });
        it('should throw NotFoundException when post does not exist', async () => {
            prismaService.post.findUnique.mockResolvedValue(null);
            await expect(service.remove(mockPostId, mockUserId)).rejects.toThrow(common_1.NotFoundException);
            await expect(service.remove(mockPostId, mockUserId)).rejects.toThrow('Post not found');
            expect(prismaService.post.delete).not.toHaveBeenCalled();
        });
        it('should throw ForbiddenException when user is not the owner', async () => {
            const existingPost = { userId: 'other-user-123' };
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            await expect(service.remove(mockPostId, mockUserId)).rejects.toThrow(common_1.ForbiddenException);
            await expect(service.remove(mockPostId, mockUserId)).rejects.toThrow('You can only delete your own posts');
            expect(prismaService.post.delete).not.toHaveBeenCalled();
        });
        it('should handle database errors during deletion', async () => {
            const existingPost = { userId: mockUserId };
            const dbError = new Error('Database deletion failed');
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            prismaService.post.delete.mockRejectedValue(dbError);
            await expect(service.remove(mockPostId, mockUserId)).rejects.toThrow(dbError);
        });
        it('should handle cascading deletion scenarios', async () => {
            const existingPost = { userId: mockUserId };
            const deletedPost = { ...mockPost, deletedAt: new Date() };
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            prismaService.post.delete.mockResolvedValue(deletedPost);
            const result = await service.remove(mockPostId, mockUserId);
            expect(result).toEqual(deletedPost);
        });
    });
    // ===== POSTS BY USER TESTS =====
    describe('findByUserId', () => {
        it('should find posts by user ID', async () => {
            const userPosts = [mockPostWithIncludes];
            prismaService.post.findMany.mockResolvedValue(userPosts);
            const result = await service.findByUserId(mockUserId);
            expect(result).toEqual(userPosts);
            expect(prismaService.post.findMany).toHaveBeenCalledWith({
                where: {
                    userId: mockUserId,
                },
                include: {
                    user: {
                        select: {
                            id: true,
                            firstName: true,
                            lastName: true,
                            avatarUrl: true,
                        },
                    },
                    room: {
                        select: {
                            id: true,
                            name: true,
                        },
                    },
                    _count: {
                        select: {
                            comments: true,
                            hearts: true,
                        },
                    },
                },
                orderBy: {
                    createdAt: 'desc',
                },
            });
        });
        it('should return empty array when user has no posts', async () => {
            prismaService.post.findMany.mockResolvedValue([]);
            const result = await service.findByUserId('user-with-no-posts');
            expect(result).toEqual([]);
        });
        it('should handle multiple posts from same user', async () => {
            const multiplePosts = [
                { ...mockPostWithIncludes, id: 'post-1', title: 'First Post' },
                { ...mockPostWithIncludes, id: 'post-2', title: 'Second Post' },
                { ...mockPostWithIncludes, id: 'post-3', title: 'Third Post' },
            ];
            prismaService.post.findMany.mockResolvedValue(multiplePosts);
            const result = await service.findByUserId(mockUserId);
            expect(result).toEqual(multiplePosts);
            expect(result).toHaveLength(3);
        });
        it('should handle database errors', async () => {
            const dbError = new Error('Database query failed');
            prismaService.post.findMany.mockRejectedValue(dbError);
            await expect(service.findByUserId(mockUserId)).rejects.toThrow(dbError);
        });
    });
    // ===== POSTS BY ROOM TESTS =====
    describe('findByRoomId', () => {
        it('should find posts by room ID without userId', async () => {
            const roomPosts = [mockPostWithIncludes];
            prismaService.post.findMany.mockResolvedValue(roomPosts);
            const result = await service.findByRoomId(mockRoomId);
            expect(result).toEqual(roomPosts);
            expect(prismaService.post.findMany).toHaveBeenCalledWith({
                where: {
                    roomId: mockRoomId,
                },
                include: {
                    user: expect.any(Object),
                    room: expect.any(Object),
                    comments: expect.any(Object),
                    hearts: false,
                    _count: expect.any(Object),
                },
                orderBy: {
                    createdAt: 'desc',
                },
            });
        });
        it('should find posts by room ID with userId for hearts', async () => {
            const roomPosts = [mockPostWithIncludes];
            prismaService.post.findMany.mockResolvedValue(roomPosts);
            const result = await service.findByRoomId(mockRoomId, mockUserId);
            expect(result).toEqual(roomPosts);
            expect(prismaService.post.findMany).toHaveBeenCalledWith({
                where: {
                    roomId: mockRoomId,
                },
                include: expect.objectContaining({
                    hearts: {
                        where: {
                            userId: mockUserId,
                        },
                    },
                }),
                orderBy: {
                    createdAt: 'desc',
                },
            });
        });
        it('should return empty array when room has no posts', async () => {
            prismaService.post.findMany.mockResolvedValue([]);
            const result = await service.findByRoomId('empty-room');
            expect(result).toEqual([]);
        });
        it('should handle posts with nested comments in room', async () => {
            const roomPostsWithComments = [
                {
                    ...mockPostWithIncludes,
                    comments: [
                        {
                            ...mockComment,
                            children: [
                                {
                                    id: 'nested-comment',
                                    content: 'Nested comment',
                                    userId: 'nested-user',
                                    user: { id: 'nested-user', firstName: 'Nested', lastName: 'User', avatarUrl: null },
                                    _count: { children: 0, hearts: 1 },
                                },
                            ],
                        },
                    ],
                },
            ];
            prismaService.post.findMany.mockResolvedValue(roomPostsWithComments);
            const result = await service.findByRoomId(mockRoomId);
            expect(result).toEqual(roomPostsWithComments);
            expect(result[0].comments[0].children).toHaveLength(1);
        });
    });
    // ===== HEART FUNCTIONALITY TESTS =====
    describe('heartPost', () => {
        it('should add heart when user has not hearted the post', async () => {
            prismaService.postHeart.findUnique.mockResolvedValue(null);
            prismaService.postHeart.create.mockResolvedValue(mockHeart);
            const result = await service.heartPost(mockPostId, mockUserId);
            expect(result).toEqual({ hearted: true });
            expect(prismaService.postHeart.findUnique).toHaveBeenCalledWith({
                where: {
                    postId_userId: {
                        postId: mockPostId,
                        userId: mockUserId,
                    },
                },
            });
            expect(prismaService.postHeart.create).toHaveBeenCalledWith({
                data: {
                    postId: mockPostId,
                    userId: mockUserId,
                },
            });
            expect(prismaService.postHeart.delete).not.toHaveBeenCalled();
        });
        it('should remove heart when user has already hearted the post', async () => {
            prismaService.postHeart.findUnique.mockResolvedValue(mockHeart);
            prismaService.postHeart.delete.mockResolvedValue(mockHeart);
            const result = await service.heartPost(mockPostId, mockUserId);
            expect(result).toEqual({ hearted: false });
            expect(prismaService.postHeart.findUnique).toHaveBeenCalledWith({
                where: {
                    postId_userId: {
                        postId: mockPostId,
                        userId: mockUserId,
                    },
                },
            });
            expect(prismaService.postHeart.delete).toHaveBeenCalledWith({
                where: {
                    postId_userId: {
                        postId: mockPostId,
                        userId: mockUserId,
                    },
                },
            });
            expect(prismaService.postHeart.create).not.toHaveBeenCalled();
        });
        it('should handle database errors during heart creation', async () => {
            const dbError = new Error('Database constraint violation');
            prismaService.postHeart.findUnique.mockResolvedValue(null);
            prismaService.postHeart.create.mockRejectedValue(dbError);
            await expect(service.heartPost(mockPostId, mockUserId)).rejects.toThrow(dbError);
        });
        it('should handle database errors during heart deletion', async () => {
            const dbError = new Error('Database deletion failed');
            prismaService.postHeart.findUnique.mockResolvedValue(mockHeart);
            prismaService.postHeart.delete.mockRejectedValue(dbError);
            await expect(service.heartPost(mockPostId, mockUserId)).rejects.toThrow(dbError);
        });
        it('should handle concurrent heart operations', async () => {
            // Simulate race condition where heart is created between find and create
            prismaService.postHeart.findUnique.mockResolvedValue(null);
            const duplicateError = new Error('Duplicate key constraint');
            prismaService.postHeart.create.mockRejectedValue(duplicateError);
            await expect(service.heartPost(mockPostId, mockUserId)).rejects.toThrow(duplicateError);
        });
    });
    describe('isPostHeartedByUser', () => {
        it('should return true when user has hearted the post', async () => {
            prismaService.postHeart.findUnique.mockResolvedValue(mockHeart);
            const result = await service.isPostHeartedByUser(mockPostId, mockUserId);
            expect(result).toBe(true);
            expect(prismaService.postHeart.findUnique).toHaveBeenCalledWith({
                where: {
                    postId_userId: {
                        postId: mockPostId,
                        userId: mockUserId,
                    },
                },
            });
        });
        it('should return false when user has not hearted the post', async () => {
            prismaService.postHeart.findUnique.mockResolvedValue(null);
            const result = await service.isPostHeartedByUser(mockPostId, mockUserId);
            expect(result).toBe(false);
        });
        it('should handle database errors', async () => {
            const dbError = new Error('Database query failed');
            prismaService.postHeart.findUnique.mockRejectedValue(dbError);
            await expect(service.isPostHeartedByUser(mockPostId, mockUserId)).rejects.toThrow(dbError);
        });
        it('should handle different user and post combinations', async () => {
            const testCases = [
                { postId: 'post-1', userId: 'user-1', hearted: true },
                { postId: 'post-1', userId: 'user-2', hearted: false },
                { postId: 'post-2', userId: 'user-1', hearted: false },
                { postId: 'post-2', userId: 'user-2', hearted: true },
            ];
            for (const testCase of testCases) {
                prismaService.postHeart.findUnique.mockResolvedValue(testCase.hearted ? { ...mockHeart, postId: testCase.postId, userId: testCase.userId } : null);
                const result = await service.isPostHeartedByUser(testCase.postId, testCase.userId);
                expect(result).toBe(testCase.hearted);
            }
        });
    });
    // ===== FILE ATTACHMENT TESTS =====
    describe('File attachment methods', () => {
        describe('attachFilesToPost', () => {
            it('should return stub implementation result', async () => {
                const result = await service.attachFilesToPost(mockPostId, ['file1', 'file2']);
                expect(result).toEqual({ count: 0 });
            });
            it('should handle custom purpose parameter', async () => {
                const result = await service.attachFilesToPost(mockPostId, ['file1'], 'DOCUMENT');
                expect(result).toEqual({ count: 0 });
            });
            it('should handle empty file IDs array', async () => {
                const result = await service.attachFilesToPost(mockPostId, []);
                expect(result).toEqual({ count: 0 });
            });
        });
        describe('getPostAttachments', () => {
            it('should return stub implementation result', async () => {
                const result = await service.getPostAttachments(mockPostId);
                expect(result).toEqual([]);
            });
        });
        describe('removePostAttachment', () => {
            it('should return stub implementation result', async () => {
                const result = await service.removePostAttachment(mockPostId, 'file-123');
                expect(result).toEqual({ count: 0 });
            });
        });
    });
    // ===== POST REPORTING TESTS =====
    describe('reportPost', () => {
        const reporterId = 'reporter-123';
        const reason = 'Inappropriate content';
        const content = 'This post contains offensive material';
        it('should report post successfully', async () => {
            prismaService.post.findUnique.mockResolvedValue(mockPost);
            prismaService.report.findFirst.mockResolvedValue(null);
            prismaService.report.create.mockResolvedValue(mockReport);
            const result = await service.reportPost(mockPostId, reporterId, reason, content);
            expect(result).toBe(mockReportId);
            expect(prismaService.post.findUnique).toHaveBeenCalledWith({
                where: { id: mockPostId },
            });
            expect(prismaService.report.findFirst).toHaveBeenCalledWith({
                where: {
                    postId: mockPostId,
                    reporterId,
                },
            });
            expect(prismaService.report.create).toHaveBeenCalledWith({
                data: {
                    postId: mockPostId,
                    reporterId,
                    reason,
                    content,
                    status: 'pending',
                },
            });
        });
        it('should report post without content', async () => {
            prismaService.post.findUnique.mockResolvedValue(mockPost);
            prismaService.report.findFirst.mockResolvedValue(null);
            const reportWithoutContent = { ...mockReport, content: undefined };
            prismaService.report.create.mockResolvedValue(reportWithoutContent);
            const result = await service.reportPost(mockPostId, reporterId, reason);
            expect(result).toBe(mockReportId);
            expect(prismaService.report.create).toHaveBeenCalledWith({
                data: {
                    postId: mockPostId,
                    reporterId,
                    reason,
                    content: undefined,
                    status: 'pending',
                },
            });
        });
        it('should throw NotFoundException when post does not exist', async () => {
            prismaService.post.findUnique.mockResolvedValue(null);
            await expect(service.reportPost(mockPostId, reporterId, reason)).rejects.toThrow(common_1.NotFoundException);
            await expect(service.reportPost(mockPostId, reporterId, reason)).rejects.toThrow('Post not found');
            expect(prismaService.report.findFirst).not.toHaveBeenCalled();
            expect(prismaService.report.create).not.toHaveBeenCalled();
        });
        it('should throw ForbiddenException when user already reported the post', async () => {
            prismaService.post.findUnique.mockResolvedValue(mockPost);
            prismaService.report.findFirst.mockResolvedValue(mockReport);
            await expect(service.reportPost(mockPostId, reporterId, reason)).rejects.toThrow(common_1.ForbiddenException);
            await expect(service.reportPost(mockPostId, reporterId, reason)).rejects.toThrow('You have already reported this post');
            expect(prismaService.report.create).not.toHaveBeenCalled();
        });
        it('should throw InternalServerErrorException for database errors', async () => {
            const dbError = new Error('Database connection failed');
            prismaService.post.findUnique.mockRejectedValue(dbError);
            await expect(service.reportPost(mockPostId, reporterId, reason)).rejects.toThrow(common_1.InternalServerErrorException);
            await expect(service.reportPost(mockPostId, reporterId, reason)).rejects.toThrow('Database connection failed');
        });
        it('should handle non-Error exceptions', async () => {
            const stringError = 'String error message';
            prismaService.post.findUnique.mockRejectedValue(stringError);
            await expect(service.reportPost(mockPostId, reporterId, reason)).rejects.toThrow(common_1.InternalServerErrorException);
        });
        it('should not wrap NotFoundException or ForbiddenException', async () => {
            // Test NotFoundException passthrough
            prismaService.post.findUnique.mockResolvedValue(mockPost);
            prismaService.report.findFirst.mockRejectedValue(new common_1.NotFoundException('Report not found'));
            await expect(service.reportPost(mockPostId, reporterId, reason)).rejects.toThrow(common_1.NotFoundException);
            // Test ForbiddenException passthrough
            prismaService.report.findFirst.mockRejectedValue(new common_1.ForbiddenException('Access denied'));
            await expect(service.reportPost(mockPostId, reporterId, reason)).rejects.toThrow(common_1.ForbiddenException);
        });
        it('should handle different reason types', async () => {
            const reasons = ['spam', 'harassment', 'misinformation', 'violence', 'other'];
            for (const testReason of reasons) {
                prismaService.post.findUnique.mockResolvedValue(mockPost);
                prismaService.report.findFirst.mockResolvedValue(null);
                const reportWithReason = { ...mockReport, reason: testReason };
                prismaService.report.create.mockResolvedValue(reportWithReason);
                const result = await service.reportPost(mockPostId, reporterId, testReason);
                expect(result).toBe(mockReportId);
                expect(prismaService.report.create).toHaveBeenCalledWith({
                    data: {
                        postId: mockPostId,
                        reporterId,
                        reason: testReason,
                        content: undefined,
                        status: 'pending',
                    },
                });
            }
        });
    });
    // ===== INTEGRATION TESTS =====
    describe('Integration scenarios', () => {
        it('should handle complete post lifecycle', async () => {
            // Create post
            const createData = {
                title: 'Lifecycle Test Post',
                content: 'This is a test post for lifecycle testing',
                user: { connect: { id: mockUserId } },
                room: { connect: { id: mockRoomId } },
            };
            prismaService.post.create.mockResolvedValue(mockPostWithIncludes);
            const createdPost = await service.create(createData);
            expect(createdPost).toEqual(mockPostWithIncludes);
            // Update post
            const updateData = { title: 'Updated Lifecycle Post' };
            const existingPost = { userId: mockUserId };
            const updatedPost = { ...mockPostWithIncludes, title: 'Updated Lifecycle Post' };
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            prismaService.post.update.mockResolvedValue(updatedPost);
            const result = await service.update(mockPostId, updateData, mockUserId);
            expect(result.title).toBe('Updated Lifecycle Post');
            // Heart post
            prismaService.postHeart.findUnique.mockResolvedValue(null);
            prismaService.postHeart.create.mockResolvedValue(mockHeart);
            const heartResult = await service.heartPost(mockPostId, mockUserId);
            expect(heartResult.hearted).toBe(true);
            // Delete post
            prismaService.post.findUnique.mockResolvedValue({ userId: mockUserId });
            prismaService.post.delete.mockResolvedValue(mockPost);
            const deletedPost = await service.remove(mockPostId, mockUserId);
            expect(deletedPost).toEqual(mockPost);
        });
        it('should handle post with complex comment structure and hearts', async () => {
            const complexPost = {
                ...mockPostWithIncludes,
                comments: [
                    {
                        ...mockComment,
                        children: [
                            {
                                id: 'reply-1',
                                content: 'First reply',
                                userId: 'user-1',
                                user: { id: 'user-1', firstName: 'User', lastName: 'One', avatarUrl: null },
                                _count: { children: 0, hearts: 2 },
                            },
                        ],
                    },
                ],
                hearts: [mockHeart],
                _count: { comments: 1, hearts: 1 },
            };
            prismaService.post.findUnique.mockResolvedValue(complexPost);
            const result = await service.findOne(mockPostId, mockUserId);
            expect(result).toEqual(complexPost);
            expect(result.comments).toHaveLength(1);
            expect(result.comments[0].children).toHaveLength(1);
            expect(result.hearts).toHaveLength(1);
            expect(result._count.comments).toBe(1);
            expect(result._count.hearts).toBe(1);
        });
        it('should handle room-based post filtering and user interactions', async () => {
            const roomPosts = [
                { ...mockPostWithIncludes, id: 'post-1', title: 'Room Post 1' },
                { ...mockPostWithIncludes, id: 'post-2', title: 'Room Post 2' },
            ];
            prismaService.post.findMany.mockResolvedValue(roomPosts);
            const result = await service.findByRoomId(mockRoomId, mockUserId);
            expect(result).toEqual(roomPosts);
            expect(result).toHaveLength(2);
            // Verify room-specific querying was called with user heart filtering
            expect(prismaService.post.findMany).toHaveBeenCalledWith(expect.objectContaining({
                where: { roomId: mockRoomId },
                include: expect.objectContaining({
                    hearts: { where: { userId: mockUserId } },
                }),
            }));
        });
        it('should handle reporting workflow with validation', async () => {
            const reporterId = 'reporter-123';
            // Step 1: Report a post
            prismaService.post.findUnique.mockResolvedValue(mockPost);
            prismaService.report.findFirst.mockResolvedValue(null);
            prismaService.report.create.mockResolvedValue(mockReport);
            const reportId = await service.reportPost(mockPostId, reporterId, 'spam');
            expect(reportId).toBe(mockReportId);
            // Step 2: Try to report the same post again (should fail)
            prismaService.report.findFirst.mockResolvedValue(mockReport);
            await expect(service.reportPost(mockPostId, reporterId, 'spam')).rejects.toThrow(common_1.ForbiddenException);
        });
    });
    // ===== PERFORMANCE TESTS =====
    describe('Performance tests', () => {
        it('should handle large numbers of posts efficiently', async () => {
            const largeBatchSize = 100;
            const largeBatch = Array.from({ length: largeBatchSize }, (_, i) => ({
                ...mockPostWithIncludes,
                id: `post-${i}`,
                title: `Post ${i}`,
            }));
            prismaService.post.findMany.mockResolvedValue(largeBatch);
            const startTime = Date.now();
            const result = await service.findAll();
            const endTime = Date.now();
            expect(result).toHaveLength(largeBatchSize);
            expect(endTime - startTime).toBeLessThan(100); // Should be fast since it's just a mocked call
        });
        it('should handle concurrent heart operations', async () => {
            const concurrentOperations = 10;
            const heartPromises = Array.from({ length: concurrentOperations }, (_, i) => {
                const userId = `user-${i}`;
                prismaService.postHeart.findUnique.mockResolvedValue(null);
                prismaService.postHeart.create.mockResolvedValue({ ...mockHeart, userId });
                return service.heartPost(mockPostId, userId);
            });
            const results = await Promise.all(heartPromises);
            expect(results).toHaveLength(concurrentOperations);
            expect(results.every(r => r.hearted === true)).toBe(true);
        });
        it('should handle batch post operations efficiently', async () => {
            const batchSize = 50;
            const promises = Array.from({ length: batchSize }, (_, i) => {
                const postId = `post-${i}`;
                const userId = `user-${i}`;
                prismaService.post.findUnique.mockResolvedValue({ ...mockPostWithIncludes, id: postId });
                return service.findOne(postId, userId);
            });
            const startTime = Date.now();
            const results = await Promise.all(promises);
            const endTime = Date.now();
            expect(results).toHaveLength(batchSize);
            expect(endTime - startTime).toBeLessThan(200);
        });
    });
    // ===== ERROR HANDLING AND EDGE CASES =====
    describe('Error handling and edge cases', () => {
        it('should handle null and undefined inputs gracefully', async () => {
            // Test findUserById with null
            expect(service.findUserById(null)).rejects.toBeDefined();
            // Test findOne with undefined
            expect(service.findOne(undefined)).rejects.toBeDefined();
            // Test heartPost with empty strings
            prismaService.postHeart.findUnique.mockResolvedValue(null);
            expect(service.heartPost('', '')).rejects.toBeDefined();
        });
        it('should handle database connection failures', async () => {
            const connectionError = new Error('ECONNREFUSED');
            prismaService.post.findMany.mockRejectedValue(connectionError);
            await expect(service.findAll()).rejects.toThrow(connectionError);
        });
        it('should handle transaction rollback scenarios', async () => {
            const transactionError = new Error('Transaction rollback');
            prismaService.post.create.mockRejectedValue(transactionError);
            const createData = {
                title: 'Test',
                content: 'Test',
                user: { connect: { id: mockUserId } },
                room: { connect: { id: mockRoomId } },
            };
            await expect(service.create(createData)).rejects.toThrow(transactionError);
        });
        it('should handle posts with missing relationships', async () => {
            const orphanedPost = {
                ...mockPost,
                user: null,
                room: null,
            };
            prismaService.post.findUnique.mockResolvedValue(orphanedPost);
            const result = await service.findOne(mockPostId);
            expect(result).toEqual(orphanedPost);
        });
        it('should handle malformed data gracefully', async () => {
            const malformedPost = {
                id: mockPostId,
                title: null,
                content: undefined,
                userId: '',
                roomId: null,
            };
            prismaService.post.findUnique.mockResolvedValue(malformedPost);
            const result = await service.findOne(mockPostId);
            expect(result).toEqual(malformedPost);
        });
        it('should handle very long content gracefully', async () => {
            const longContent = 'A'.repeat(10000);
            const createData = {
                title: 'Long Content Post',
                content: longContent,
                user: { connect: { id: mockUserId } },
                room: { connect: { id: mockRoomId } },
            };
            const postWithLongContent = { ...mockPost, content: longContent };
            prismaService.post.create.mockResolvedValue(postWithLongContent);
            const result = await service.create(createData);
            expect(result.content).toHaveLength(10000);
        });
        it('should handle empty string inputs', async () => {
            const createData = {
                title: '',
                content: '',
                user: { connect: { id: mockUserId } },
                room: { connect: { id: mockRoomId } },
            };
            const emptyPost = { ...mockPost, title: '', content: '' };
            prismaService.post.create.mockResolvedValue(emptyPost);
            const result = await service.create(createData);
            expect(result.title).toBe('');
            expect(result.content).toBe('');
        });
        it('should handle concurrent update and delete operations', async () => {
            const existingPost = { userId: mockUserId };
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            // Simulate concurrent update
            const updatePromise = service.update(mockPostId, { title: 'Updated' }, mockUserId);
            prismaService.post.update.mockResolvedValue(mockPostWithIncludes);
            // Simulate concurrent delete
            const deletePromise = service.remove(mockPostId, mockUserId);
            prismaService.post.delete.mockResolvedValue(mockPost);
            // Both operations should proceed without interference in this implementation
            const [updateResult, deleteResult] = await Promise.all([updatePromise, deletePromise]);
            expect(updateResult).toBeDefined();
            expect(deleteResult).toBeDefined();
        });
    });
    // ===== SECURITY TESTS =====
    describe('Security considerations', () => {
        it('should prevent unauthorized post updates', async () => {
            const existingPost = { userId: 'other-user' };
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            await expect(service.update(mockPostId, { title: 'Hacked!' }, 'malicious-user')).rejects.toThrow(common_1.ForbiddenException);
            expect(prismaService.post.update).not.toHaveBeenCalled();
        });
        it('should prevent unauthorized post deletions', async () => {
            const existingPost = { userId: 'other-user' };
            prismaService.post.findUnique.mockResolvedValue(existingPost);
            await expect(service.remove(mockPostId, 'malicious-user')).rejects.toThrow(common_1.ForbiddenException);
            expect(prismaService.post.delete).not.toHaveBeenCalled();
        });
        it('should handle potential injection attacks in content', async () => {
            const maliciousContent = "<script>alert('xss')</script>";
            const createData = {
                title: 'Normal Title',
                content: maliciousContent,
                user: { connect: { id: mockUserId } },
                room: { connect: { id: mockRoomId } },
            };
            const postWithMaliciousContent = { ...mockPost, content: maliciousContent };
            prismaService.post.create.mockResolvedValue(postWithMaliciousContent);
            // Service should accept the content as-is (sanitization happens at presentation layer)
            const result = await service.create(createData);
            expect(result.content).toBe(maliciousContent);
        });
        it('should prevent duplicate reporting abuse', async () => {
            prismaService.post.findUnique.mockResolvedValue(mockPost);
            prismaService.report.findFirst.mockResolvedValue(mockReport);
            await expect(service.reportPost(mockPostId, 'reporter-123', 'spam')).rejects.toThrow(common_1.ForbiddenException);
            expect(prismaService.report.create).not.toHaveBeenCalled();
        });
        it('should validate post existence before operations', async () => {
            prismaService.post.findUnique.mockResolvedValue(null);
            // Update
            await expect(service.update('non-existent', { title: 'Update' }, mockUserId)).rejects.toThrow(common_1.NotFoundException);
            // Delete
            await expect(service.remove('non-existent', mockUserId)).rejects.toThrow(common_1.NotFoundException);
            // Report
            await expect(service.reportPost('non-existent', 'reporter', 'reason')).rejects.toThrow(common_1.NotFoundException);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL3Bvc3RzL3Bvc3RzLnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCwyQ0FBcUc7QUFDckcsbURBQStDO0FBQy9DLGdGQUFvRTtBQUlwRSxRQUFRLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRTtJQUM1QixJQUFJLE9BQXFCLENBQUM7SUFDMUIsSUFBSSxhQUF5QyxDQUFDO0lBRTlDLHNCQUFzQjtJQUN0QixNQUFNLFVBQVUsR0FBRyxVQUFVLENBQUM7SUFDOUIsTUFBTSxVQUFVLEdBQUcsVUFBVSxDQUFDO0lBQzlCLE1BQU0sVUFBVSxHQUFHLFVBQVUsQ0FBQztJQUM5QixNQUFNLFlBQVksR0FBRyxZQUFZLENBQUM7SUFFbEMsTUFBTSxRQUFRLEdBQVM7UUFDckIsRUFBRSxFQUFFLFVBQVU7UUFDZCxTQUFTLEVBQUUsTUFBTTtRQUNqQixRQUFRLEVBQUUsTUFBTTtRQUNoQixLQUFLLEVBQUUsa0JBQWtCO1FBQ3pCLFNBQVMsRUFBRSxnQ0FBZ0M7UUFDM0MsSUFBSSxFQUFFLFFBQVE7UUFDZCxRQUFRLEVBQUUsSUFBSTtRQUNkLGFBQWEsRUFBRSxJQUFJO1FBQ25CLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTtRQUNyQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7UUFDckIsZ0JBQWdCLEVBQUUsSUFBSTtRQUN0QixTQUFTLEVBQUUsSUFBSTtRQUNmLFlBQVksRUFBRSxJQUFJLElBQUksRUFBRTtRQUN4QixtQkFBbUIsRUFBRSxJQUFJO1FBQ3pCLFFBQVEsRUFBRSxJQUFJO1FBQ2QsV0FBVyxFQUFFLElBQUk7UUFDakIsc0JBQXNCLEVBQUUsSUFBSTtRQUM1QixlQUFlLEVBQUUsSUFBSSxJQUFJLEVBQUU7UUFDM0Isa0JBQWtCLEVBQUUsSUFBSTtRQUN4QiwyQkFBMkIsRUFBRSxJQUFJO1FBQ2pDLFFBQVEsRUFBRSxJQUFJO0tBQ2YsQ0FB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QUVGLFNBQVM7WUFDVCxNQUFNLE1BQU0sQ0FDVixPQUFPLENBQUMsVUFBVSxDQUFDLGNBQWMsRUFBRSxVQUFVLEVBQUUsUUFBUSxDQUFDLENBQ3pELENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQywwQkFBaUIsQ0FBQyxDQUFDO1FBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvcG9zdHMvcG9zdHMuc2VydmljZS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgTm90Rm91bmRFeGNlcHRpb24sIEZvcmJpZGRlbkV4Y2VwdGlvbiwgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbiB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IFBvc3RzU2VydmljZSB9IGZyb20gJy4vcG9zdHMuc2VydmljZSc7XG5pbXBvcnQgeyBQcmlzbWFTZXJ2aWNlIH0gZnJvbSAnLi4vcHJvdmlkZXJzL3ByaXNtYS1jbGllbnQucHJvdmlkZXInO1xuaW1wb3J0IHsgUG9zdCwgVXNlciwgUHJpc21hIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuaW1wb3J0IHR5cGUgeyBQb3N0VXBkYXRlSW5wdXREdG8gfSBmcm9tICcuL3R5cGVzJztcblxuZGVzY3JpYmUoJ1Bvc3RzU2VydmljZScsICgpID0+IHtcbiAgbGV0IHNlcnZpY2U6IFBvc3RzU2VydmljZTtcbiAgbGV0IHByaXNtYVNlcnZpY2U6IGplc3QuTW9ja2VkPFByaXNtYVNlcnZpY2U+O1xuXG4gIC8vIFRlc3QgZGF0YSBjb25zdGFudHNcbiAgY29uc3QgbW9ja1VzZXJJZCA9ICd1c2VyLTEyMyc7XG4gIGNvbnN0IG1vY2tQb3N0SWQgPSAncG9zdC0xMjMnO1xuICBjb25zdCBtb2NrUm9vbUlkID0gJ3Jvb20tMTIzJztcbiAgY29uc3QgbW9ja1JlcG9ydElkID0gJ3JlcG9ydC0xMjMnO1xuXG4gIGNvbnN0IG1vY2tVc2VyOiBVc2VyID0ge1xuICAgIGlkOiBtb2NrVXNlcklkLFxuICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgIGxhc3ROYW1lOiAnVXNlcicsXG4gICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICBhdmF0YXJVcmw6ICdodHRwczovL2V4YW1wbGUuY29tL2F2YXRhci5qcGcnLFxuICAgIHJvbGU6ICdjbGllbnQnLFxuICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgIGVtYWlsVmVyaWZpZWQ6IHRydWUsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICBzdHJpcGVDdXN0b21lcklkOiBudWxsLFxuICAgIGRlbGV0ZWRBdDogbnVsbCxcbiAgICBsYXN0QWN0aXZlQXQ6IG5ldyBEYXRlKCksXG4gICAgb25ib2FyZGluZ0NvbXBsZXRlZDogdHJ1ZSxcbiAgICBnb29nbGVJZDogbnVsbCxcbiAgICBtaWNyb3NvZnRJZDogbnVsbCxcbiAgICBlbWFpbFZlcmlmaWNhdGlvblRva2VuOiBudWxsLFxuICAgIGVtYWlsVmVyaWZpZWRBdDogbmV3IERhdGUoKSxcbiAgICBwYXNzd29yZFJlc2V0VG9rZW46IG51bGwsXG4gICAgcGFzc3dvcmRSZXNldFRva2VuRXhwaXJlc0F0OiBudWxsLFxuICAgIHBhc3N3b3JkOiBudWxsLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tQb3N0OiBQb3N0ID0ge1xuICAgIGlkOiBtb2NrUG9zdElkLFxuICAgIHRpdGxlOiAnVGVzdCBQb3N0JyxcbiAgICBjb250ZW50OiAnVGhpcyBpcyBhIHRlc3QgcG9zdCBjb250ZW50JyxcbiAgICB1c2VySWQ6IG1vY2tVc2VySWQsXG4gICAgcm9vbUlkOiBtb2NrUm9vbUlkLFxuICAgIGF0dGFjaG1lbnRVcmxzOiBbJ2h0dHBzOi8vZXhhbXBsZS5jb20vYXR0YWNobWVudDEuanBnJ10sXG4gICAgYXR0YWNobWVudE5hbWVzOiBbJ2F0dGFjaG1lbnQxLmpwZyddLFxuICAgIGF0dGFjaG1lbnRTaXplczogWzEwMjRdLFxuICAgIGlzQW5vbnltb3VzOiBmYWxzZSxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tQb3N0V2l0aEluY2x1ZGVzID0ge1xuICAgIC4uLm1vY2tQb3N0LFxuICAgIHVzZXI6IHtcbiAgICAgIGlkOiBtb2NrVXNlcklkLFxuICAgICAgZmlyc3ROYW1lOiAnVGVzdCcsXG4gICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgYXZhdGFyVXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9hdmF0YXIuanBnJyxcbiAgICB9LFxuICAgIHJvb206IHtcbiAgICAgIGlkOiBtb2NrUm9vbUlkLFxuICAgICAgbmFtZTogJ1Rlc3QgUm9vbScsXG4gICAgfSxcbiAgICBjb21tZW50czogW10sXG4gICAgaGVhcnRzOiBbXSxcbiAgICBfY291bnQ6IHtcbiAgICAgIGNvbW1lbnRzOiAwLFxuICAgICAgaGVhcnRzOiAwLFxuICAgIH0sXG4gIH07XG5cbiAgY29uc3QgbW9ja0NvbW1lbnQgPSB7XG4gICAgaWQ6ICdjb21tZW50LTEyMycsXG4gICAgY29udGVudDogJ1Rlc3QgY29tbWVudCcsXG4gICAgdXNlcklkOiAnY29tbWVudGVyLTEyMycsXG4gICAgcG9zdElkOiBtb2NrUG9zdElkLFxuICAgIHBhcmVudElkOiBudWxsLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgdXNlcjoge1xuICAgICAgaWQ6ICdjb21tZW50ZXItMTIzJyxcbiAgICAgIGZpcnN0TmFtZTogJ0NvbW1lbnRlcicsXG4gICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgYXZhdGFyVXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9jb21tZW50ZXIuanBnJyxcbiAgICB9LFxuICAgIGNoaWxkcmVuOiBbXSxcbiAgICBfY291bnQ6IHtcbiAgICAgIGNoaWxkcmVuOiAwLFxuICAgICAgaGVhcnRzOiAwLFxuICAgIH0sXG4gIH07XG5cbiAgY29uc3QgbW9ja0hlYXJ0ID0ge1xuICAgIGlkOiAnaGVhcnQtMTIzJyxcbiAgICBwb3N0SWQ6IG1vY2tQb3N0SWQsXG4gICAgdXNlcklkOiBtb2NrVXNlcklkLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgfTtcblxuICBjb25zdCBtb2NrUmVwb3J0ID0ge1xuICAgIGlkOiBtb2NrUmVwb3J0SWQsXG4gICAgcG9zdElkOiBtb2NrUG9zdElkLFxuICAgIHJlcG9ydGVySWQ6ICdyZXBvcnRlci0xMjMnLFxuICAgIHJlYXNvbjogJ0luYXBwcm9wcmlhdGUgY29udGVudCcsXG4gICAgY29udGVudDogJ1RoaXMgcG9zdCBjb250YWlucyBvZmZlbnNpdmUgbWF0ZXJpYWwnLFxuICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gIH07XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9kdWxlOiBUZXN0aW5nTW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICBQb3N0c1NlcnZpY2UsXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBQcmlzbWFTZXJ2aWNlLFxuICAgICAgICAgIHVzZVZhbHVlOiB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIGZpbmRVbmlxdWU6IGplc3QuZm4oKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb3N0OiB7XG4gICAgICAgICAgICAgIGZpbmRNYW55OiBqZXN0LmZuKCksXG4gICAgICAgICAgICAgIGZpbmRVbmlxdWU6IGplc3QuZm4oKSxcbiAgICAgICAgICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gICAgICAgICAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgICAgICAgICAgICBkZWxldGU6IGplc3QuZm4oKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb3N0SGVhcnQ6IHtcbiAgICAgICAgICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxuICAgICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICAgICAgICAgICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwb3J0OiB7XG4gICAgICAgICAgICAgIGZpbmRGaXJzdDogamVzdC5mbigpLFxuICAgICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSkuY29tcGlsZSgpO1xuXG4gICAgc2VydmljZSA9IG1vZHVsZS5nZXQ8UG9zdHNTZXJ2aWNlPihQb3N0c1NlcnZpY2UpO1xuICAgIHByaXNtYVNlcnZpY2UgPSBtb2R1bGUuZ2V0KFByaXNtYVNlcnZpY2UpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICAvLyA9PT09PSBVU0VSIE1BTkFHRU1FTlQgVEVTVFMgPT09PT1cblxuICBkZXNjcmliZSgnZmluZFVzZXJCeUlkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZmluZCB1c2VyIGJ5IElEIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIHByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kVXNlckJ5SWQobW9ja1VzZXJJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1VzZXIpO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBtb2NrVXNlcklkIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIG51bGwgd2hlbiB1c2VyIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHByaXNtYVNlcnZpY2UudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRVc2VyQnlJZCgnbm9uLWV4aXN0ZW50LXVzZXInKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnVzZXIuZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogJ25vbi1leGlzdGVudC11c2VyJyB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkYkVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgcHJpc21hU2VydmljZS51c2VyLmZpbmRVbmlxdWUubW9ja1JlamVjdGVkVmFsdWUoZGJFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRVc2VyQnlJZChtb2NrVXNlcklkKSkucmVqZWN0cy50b1Rocm93KGRiRXJyb3IpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PSBQT1NUIFJFVFJJRVZBTCBURVNUUyA9PT09PVxuXG4gIGRlc2NyaWJlKCdmaW5kQWxsJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZmluZCBhbGwgcG9zdHMgd2l0aG91dCB1c2VySWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9zdHMgPSBbbW9ja1Bvc3RXaXRoSW5jbHVkZXNdO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQb3N0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZEFsbCgpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tQb3N0cyk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0LmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGF2YXRhclVybDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICByb29tOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29tbWVudHM6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGF2YXRhclVybDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjaGlsZHJlbjoge1xuICAgICAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgIGF2YXRhclVybDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgaGVhcnRzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogJ2FzYycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcmRlckJ5OiB7XG4gICAgICAgICAgICAgIGNyZWF0ZWRBdDogJ2Rlc2MnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhlYXJ0czogZmFsc2UsXG4gICAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgY29tbWVudHM6IHRydWUsXG4gICAgICAgICAgICAgIGhlYXJ0czogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgIGNyZWF0ZWRBdDogJ2Rlc2MnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbmQgYWxsIHBvc3RzIHdpdGggdXNlcklkIChpbmNsdWRlcyB1c2VyIGhlYXJ0cyknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9zdHMgPSBbbW9ja1Bvc3RXaXRoSW5jbHVkZXNdO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQb3N0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZEFsbChtb2NrVXNlcklkKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrUG9zdHMpO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucG9zdC5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdXNlcjogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICAgIHJvb206IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgICBjb21tZW50czogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICAgIGhlYXJ0czoge1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgdXNlcklkOiBtb2NrVXNlcklkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIF9jb3VudDogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiAnZGVzYycsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IHdoZW4gbm8gcG9zdHMgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRBbGwoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwb3N0cyB3aXRoIGNvbW1lbnRzIGFuZCBuZXN0ZWQgcmVwbGllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBvc3RXaXRoQ29tbWVudHMgPSB7XG4gICAgICAgIC4uLm1vY2tQb3N0V2l0aEluY2x1ZGVzLFxuICAgICAgICBjb21tZW50czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLm1vY2tDb21tZW50LFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAncmVwbHktMTIzJyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnUmVwbHkgdG8gY29tbWVudCcsXG4gICAgICAgICAgICAgICAgdXNlcklkOiAncmVwbGllci0xMjMnLFxuICAgICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICAgIGlkOiAncmVwbGllci0xMjMnLFxuICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAnUmVwbGllcicsXG4gICAgICAgICAgICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICAgICAgICAgICAgYXZhdGFyVXJsOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgX2NvdW50OiB7IGNoaWxkcmVuOiAwLCBoZWFydHM6IDEgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgX2NvdW50OiB7IGNvbW1lbnRzOiAxLCBoZWFydHM6IDIgfSxcbiAgICAgIH07XG5cbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbcG9zdFdpdGhDb21tZW50c10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRBbGwoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbcG9zdFdpdGhDb21tZW50c10pO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb21tZW50c1swXS5jaGlsZHJlbikudG9IYXZlTGVuZ3RoKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGJFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgcXVlcnkgZmFpbGVkJyk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkubW9ja1JlamVjdGVkVmFsdWUoZGJFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRBbGwoKSkucmVqZWN0cy50b1Rocm93KGRiRXJyb3IpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZmluZE9uZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGZpbmQgc2luZ2xlIHBvc3QgYnkgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUG9zdFdpdGhJbmNsdWRlcyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZE9uZShtb2NrUG9zdElkKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrUG9zdFdpdGhJbmNsdWRlcyk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IG1vY2tQb3N0SWQgfSxcbiAgICAgICAgaW5jbHVkZTogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbmQgc2luZ2xlIHBvc3QgYnkgSUQgd2l0aCB1c2VySWQgZm9yIGhlYXJ0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBvc3RXaXRoVXNlckhlYXJ0ID0ge1xuICAgICAgICAuLi5tb2NrUG9zdFdpdGhJbmNsdWRlcyxcbiAgICAgICAgaGVhcnRzOiBbbW9ja0hlYXJ0XSxcbiAgICAgIH07XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShwb3N0V2l0aFVzZXJIZWFydCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZE9uZShtb2NrUG9zdElkLCBtb2NrVXNlcklkKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChwb3N0V2l0aFVzZXJIZWFydCk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IG1vY2tQb3N0SWQgfSxcbiAgICAgICAgaW5jbHVkZTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGhlYXJ0czoge1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgdXNlcklkOiBtb2NrVXNlcklkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCB3aGVuIHBvc3Qgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZE9uZSgnbm9uLWV4aXN0ZW50LXBvc3QnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBvc3RzIHdpdGggY29tcGxleCBjb21tZW50IHN0cnVjdHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wbGV4UG9zdCA9IHtcbiAgICAgICAgLi4ubW9ja1Bvc3RXaXRoSW5jbHVkZXMsXG4gICAgICAgIGNvbW1lbnRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgLi4ubW9ja0NvbW1lbnQsXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICduZXN0ZWQtcmVwbHktMScsXG4gICAgICAgICAgICAgICAgY29udGVudDogJ05lc3RlZCByZXBseSAxJyxcbiAgICAgICAgICAgICAgICB1c2VySWQ6ICd1c2VyLTEnLFxuICAgICAgICAgICAgICAgIHVzZXI6IHsgaWQ6ICd1c2VyLTEnLCBmaXJzdE5hbWU6ICdVc2VyJywgbGFzdE5hbWU6ICdPbmUnLCBhdmF0YXJVcmw6IG51bGwgfSxcbiAgICAgICAgICAgICAgICBfY291bnQ6IHsgY2hpbGRyZW46IDAsIGhlYXJ0czogMCB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICduZXN0ZWQtcmVwbHktMicsXG4gICAgICAgICAgICAgICAgY29udGVudDogJ05lc3RlZCByZXBseSAyJyxcbiAgICAgICAgICAgICAgICB1c2VySWQ6ICd1c2VyLTInLFxuICAgICAgICAgICAgICAgIHVzZXI6IHsgaWQ6ICd1c2VyLTInLCBmaXJzdE5hbWU6ICdVc2VyJywgbGFzdE5hbWU6ICdUd28nLCBhdmF0YXJVcmw6IG51bGwgfSxcbiAgICAgICAgICAgICAgICBfY291bnQ6IHsgY2hpbGRyZW46IDAsIGhlYXJ0czogMyB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUoY29tcGxleFBvc3QpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRPbmUobW9ja1Bvc3RJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoY29tcGxleFBvc3QpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb21tZW50c1swXS5jaGlsZHJlbikudG9IYXZlTGVuZ3RoKDIpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PSBQT1NUIENSRUFUSU9OIFRFU1RTID09PT09XG5cbiAgZGVzY3JpYmUoJ2NyZWF0ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBwb3N0IHN1Y2Nlc3NmdWxseSB3aXRob3V0IGF0dGFjaG1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3JlYXRlRGF0YTogUHJpc21hLlBvc3RDcmVhdGVJbnB1dCA9IHtcbiAgICAgICAgdGl0bGU6ICdOZXcgUG9zdCcsXG4gICAgICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGEgbmV3IHBvc3QnLFxuICAgICAgICB1c2VyOiB7IGNvbm5lY3Q6IHsgaWQ6IG1vY2tVc2VySWQgfSB9LFxuICAgICAgICByb29tOiB7IGNvbm5lY3Q6IHsgaWQ6IG1vY2tSb29tSWQgfSB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRQb3N0ID0ge1xuICAgICAgICAuLi5tb2NrUG9zdCxcbiAgICAgICAgdGl0bGU6ICdOZXcgUG9zdCcsXG4gICAgICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGEgbmV3IHBvc3QnLFxuICAgICAgICBhdHRhY2htZW50VXJsczogW10sXG4gICAgICAgIGF0dGFjaG1lbnROYW1lczogW10sXG4gICAgICAgIGF0dGFjaG1lbnRTaXplczogW10sXG4gICAgICB9O1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKGV4cGVjdGVkUG9zdCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlKGNyZWF0ZURhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGV4cGVjdGVkUG9zdCk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0LmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4uY3JlYXRlRGF0YSxcbiAgICAgICAgICBhdHRhY2htZW50VXJsczogW10sXG4gICAgICAgICAgYXR0YWNobWVudE5hbWVzOiBbXSxcbiAgICAgICAgICBhdHRhY2htZW50U2l6ZXM6IFtdLFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICBhdmF0YXJVcmw6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcm9vbToge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBwb3N0IHN1Y2Nlc3NmdWxseSB3aXRoIGF0dGFjaG1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3JlYXRlRGF0YTogUHJpc21hLlBvc3RDcmVhdGVJbnB1dCA9IHtcbiAgICAgICAgdGl0bGU6ICdQb3N0IHdpdGggQXR0YWNobWVudHMnLFxuICAgICAgICBjb250ZW50OiAnVGhpcyBwb3N0IGhhcyBhdHRhY2htZW50cycsXG4gICAgICAgIHVzZXI6IHsgY29ubmVjdDogeyBpZDogbW9ja1VzZXJJZCB9IH0sXG4gICAgICAgIHJvb206IHsgY29ubmVjdDogeyBpZDogbW9ja1Jvb21JZCB9IH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBhdHRhY2htZW50VXJscyA9IFsnaHR0cHM6Ly9leGFtcGxlLmNvbS9maWxlMS5qcGcnLCAnaHR0cHM6Ly9leGFtcGxlLmNvbS9maWxlMi5wZGYnXTtcbiAgICAgIGNvbnN0IGF0dGFjaG1lbnROYW1lcyA9IFsnaW1hZ2UuanBnJywgJ2RvY3VtZW50LnBkZiddO1xuICAgICAgY29uc3QgYXR0YWNobWVudFNpemVzID0gWzEwMjQsIDIwNDhdO1xuXG4gICAgICBjb25zdCBleHBlY3RlZFBvc3QgPSB7XG4gICAgICAgIC4uLm1vY2tQb3N0LFxuICAgICAgICB0aXRsZTogJ1Bvc3Qgd2l0aCBBdHRhY2htZW50cycsXG4gICAgICAgIGNvbnRlbnQ6ICdUaGlzIHBvc3QgaGFzIGF0dGFjaG1lbnRzJyxcbiAgICAgICAgYXR0YWNobWVudFVybHMsXG4gICAgICAgIGF0dGFjaG1lbnROYW1lcyxcbiAgICAgICAgYXR0YWNobWVudFNpemVzLFxuICAgICAgfTtcblxuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShleHBlY3RlZFBvc3QpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNyZWF0ZShjcmVhdGVEYXRhLCBhdHRhY2htZW50VXJscywgYXR0YWNobWVudE5hbWVzLCBhdHRhY2htZW50U2l6ZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGV4cGVjdGVkUG9zdCk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0LmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4uY3JlYXRlRGF0YSxcbiAgICAgICAgICBhdHRhY2htZW50VXJscyxcbiAgICAgICAgICBhdHRhY2htZW50TmFtZXMsXG4gICAgICAgICAgYXR0YWNobWVudFNpemVzLFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGFub255bW91cyBwb3N0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3JlYXRlRGF0YTogUHJpc21hLlBvc3RDcmVhdGVJbnB1dCA9IHtcbiAgICAgICAgdGl0bGU6ICdBbm9ueW1vdXMgUG9zdCcsXG4gICAgICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGFuIGFub255bW91cyBwb3N0JyxcbiAgICAgICAgaXNBbm9ueW1vdXM6IHRydWUsXG4gICAgICAgIHVzZXI6IHsgY29ubmVjdDogeyBpZDogbW9ja1VzZXJJZCB9IH0sXG4gICAgICAgIHJvb206IHsgY29ubmVjdDogeyBpZDogbW9ja1Jvb21JZCB9IH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBleHBlY3RlZFBvc3QgPSB7XG4gICAgICAgIC4uLm1vY2tQb3N0LFxuICAgICAgICB0aXRsZTogJ0Fub255bW91cyBQb3N0JyxcbiAgICAgICAgY29udGVudDogJ1RoaXMgaXMgYW4gYW5vbnltb3VzIHBvc3QnLFxuICAgICAgICBpc0Fub255bW91czogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoZXhwZWN0ZWRQb3N0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jcmVhdGUoY3JlYXRlRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoZXhwZWN0ZWRQb3N0KTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGRhdGE6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIGlzQW5vbnltb3VzOiB0cnVlLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjcmVhdGlvbiB3aXRoIGVtcHR5IGNvbnRlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjcmVhdGVEYXRhOiBQcmlzbWEuUG9zdENyZWF0ZUlucHV0ID0ge1xuICAgICAgICB0aXRsZTogJ1RpdGxlIE9ubHkgUG9zdCcsXG4gICAgICAgIGNvbnRlbnQ6ICcnLFxuICAgICAgICB1c2VyOiB7IGNvbm5lY3Q6IHsgaWQ6IG1vY2tVc2VySWQgfSB9LFxuICAgICAgICByb29tOiB7IGNvbm5lY3Q6IHsgaWQ6IG1vY2tSb29tSWQgfSB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRQb3N0ID0geyAuLi5tb2NrUG9zdCwgdGl0bGU6ICdUaXRsZSBPbmx5IFBvc3QnLCBjb250ZW50OiAnJyB9O1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShleHBlY3RlZFBvc3QpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNyZWF0ZShjcmVhdGVEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChleHBlY3RlZFBvc3QpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzIGR1cmluZyBjcmVhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNyZWF0ZURhdGE6IFByaXNtYS5Qb3N0Q3JlYXRlSW5wdXQgPSB7XG4gICAgICAgIHRpdGxlOiAnTmV3IFBvc3QnLFxuICAgICAgICBjb250ZW50OiAnQ29udGVudCcsXG4gICAgICAgIHVzZXI6IHsgY29ubmVjdDogeyBpZDogbW9ja1VzZXJJZCB9IH0sXG4gICAgICAgIHJvb206IHsgY29ubmVjdDogeyBpZDogbW9ja1Jvb21JZCB9IH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBkYkVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBjb25zdHJhaW50IHZpb2xhdGlvbicpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmNyZWF0ZS5tb2NrUmVqZWN0ZWRWYWx1ZShkYkVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuY3JlYXRlKGNyZWF0ZURhdGEpKS5yZWplY3RzLnRvVGhyb3coZGJFcnJvcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vID09PT09IFBPU1QgVVBEQVRFIFRFU1RTID09PT09XG5cbiAgZGVzY3JpYmUoJ3VwZGF0ZScsICgpID0+IHtcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBQb3N0VXBkYXRlSW5wdXREdG8gPSB7XG4gICAgICB0aXRsZTogJ1VwZGF0ZWQgVGl0bGUnLFxuICAgICAgY29udGVudDogJ1VwZGF0ZWQgY29udGVudCcsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHBvc3Qgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmdQb3N0ID0geyB1c2VySWQ6IG1vY2tVc2VySWQgfTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQb3N0ID0geyAuLi5tb2NrUG9zdFdpdGhJbmNsdWRlcywgLi4udXBkYXRlRGF0YSB9O1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShleGlzdGluZ1Bvc3QpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LnVwZGF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkUG9zdCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UudXBkYXRlKG1vY2tQb3N0SWQsIHVwZGF0ZURhdGEsIG1vY2tVc2VySWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHVwZGF0ZWRQb3N0KTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogbW9ja1Bvc3RJZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgdXNlcklkOiB0cnVlIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBtb2NrUG9zdElkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0aXRsZTogdXBkYXRlRGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiB1cGRhdGVEYXRhLmNvbnRlbnQsXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGF2YXRhclVybDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICByb29tOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgTm90Rm91bmRFeGNlcHRpb24gd2hlbiBwb3N0IGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnVwZGF0ZShtb2NrUG9zdElkLCB1cGRhdGVEYXRhLCBtb2NrVXNlcklkKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBOb3RGb3VuZEV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS51cGRhdGUobW9ja1Bvc3RJZCwgdXBkYXRlRGF0YSwgbW9ja1VzZXJJZCkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ1Bvc3Qgbm90IGZvdW5kJyxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QudXBkYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBGb3JiaWRkZW5FeGNlcHRpb24gd2hlbiB1c2VyIGlzIG5vdCB0aGUgb3duZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBleGlzdGluZ1Bvc3QgPSB7IHVzZXJJZDogJ290aGVyLXVzZXItMTIzJyB9O1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUoZXhpc3RpbmdQb3N0KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudXBkYXRlKG1vY2tQb3N0SWQsIHVwZGF0ZURhdGEsIG1vY2tVc2VySWQpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEZvcmJpZGRlbkV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS51cGRhdGUobW9ja1Bvc3RJZCwgdXBkYXRlRGF0YSwgbW9ja1VzZXJJZCkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ1lvdSBjYW4gb25seSBlZGl0IHlvdXIgb3duIHBvc3RzJyxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QudXBkYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgb25seSBwcm92aWRlZCBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJ0aWFsVXBkYXRlRGF0YSA9IHsgdGl0bGU6ICdPbmx5IFRpdGxlIFVwZGF0ZWQnIH07XG4gICAgICBjb25zdCBleGlzdGluZ1Bvc3QgPSB7IHVzZXJJZDogbW9ja1VzZXJJZCB9O1xuICAgICAgY29uc3QgdXBkYXRlZFBvc3QgPSB7IC4uLm1vY2tQb3N0V2l0aEluY2x1ZGVzLCB0aXRsZTogJ09ubHkgVGl0bGUgVXBkYXRlZCcgfTtcblxuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUoZXhpc3RpbmdQb3N0KTtcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUodXBkYXRlZFBvc3QpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnVwZGF0ZShtb2NrUG9zdElkLCBwYXJ0aWFsVXBkYXRlRGF0YSwgbW9ja1VzZXJJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwodXBkYXRlZFBvc3QpO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucG9zdC51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IG1vY2tQb3N0SWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHRpdGxlOiAnT25seSBUaXRsZSBVcGRhdGVkJyxcbiAgICAgICAgICBjb250ZW50OiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzIGR1cmluZyB1cGRhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBleGlzdGluZ1Bvc3QgPSB7IHVzZXJJZDogbW9ja1VzZXJJZCB9O1xuICAgICAgY29uc3QgZGJFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgdXBkYXRlIGZhaWxlZCcpO1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShleGlzdGluZ1Bvc3QpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LnVwZGF0ZS5tb2NrUmVqZWN0ZWRWYWx1ZShkYkVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudXBkYXRlKG1vY2tQb3N0SWQsIHVwZGF0ZURhdGEsIG1vY2tVc2VySWQpKS5yZWplY3RzLnRvVGhyb3coZGJFcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB1cGRhdGUgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVtcHR5VXBkYXRlRGF0YSA9IHt9O1xuICAgICAgY29uc3QgZXhpc3RpbmdQb3N0ID0geyB1c2VySWQ6IG1vY2tVc2VySWQgfTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQb3N0ID0gbW9ja1Bvc3RXaXRoSW5jbHVkZXM7XG5cbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKGV4aXN0aW5nUG9zdCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QudXBkYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRQb3N0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS51cGRhdGUobW9ja1Bvc3RJZCwgZW1wdHlVcGRhdGVEYXRhLCBtb2NrVXNlcklkKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh1cGRhdGVkUG9zdCk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0LnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogbW9ja1Bvc3RJZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdGl0bGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBjb250ZW50OiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PSBQT1NUIERFTEVUSU9OIFRFU1RTID09PT09XG5cbiAgZGVzY3JpYmUoJ3JlbW92ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRlbGV0ZSBwb3N0IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nUG9zdCA9IHsgdXNlcklkOiBtb2NrVXNlcklkIH07XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShleGlzdGluZ1Bvc3QpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmRlbGV0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUG9zdCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UucmVtb3ZlKG1vY2tQb3N0SWQsIG1vY2tVc2VySWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tQb3N0KTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogbW9ja1Bvc3RJZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgdXNlcklkOiB0cnVlIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QuZGVsZXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBtb2NrUG9zdElkIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgTm90Rm91bmRFeGNlcHRpb24gd2hlbiBwb3N0IGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlbW92ZShtb2NrUG9zdElkLCBtb2NrVXNlcklkKSkucmVqZWN0cy50b1Rocm93KE5vdEZvdW5kRXhjZXB0aW9uKTtcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlbW92ZShtb2NrUG9zdElkLCBtb2NrVXNlcklkKSkucmVqZWN0cy50b1Rocm93KCdQb3N0IG5vdCBmb3VuZCcpO1xuXG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0LmRlbGV0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgRm9yYmlkZGVuRXhjZXB0aW9uIHdoZW4gdXNlciBpcyBub3QgdGhlIG93bmVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmdQb3N0ID0geyB1c2VySWQ6ICdvdGhlci11c2VyLTEyMycgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKGV4aXN0aW5nUG9zdCk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlbW92ZShtb2NrUG9zdElkLCBtb2NrVXNlcklkKSkucmVqZWN0cy50b1Rocm93KEZvcmJpZGRlbkV4Y2VwdGlvbik7XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5yZW1vdmUobW9ja1Bvc3RJZCwgbW9ja1VzZXJJZCkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ1lvdSBjYW4gb25seSBkZWxldGUgeW91ciBvd24gcG9zdHMnLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucG9zdC5kZWxldGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMgZHVyaW5nIGRlbGV0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmdQb3N0ID0geyB1c2VySWQ6IG1vY2tVc2VySWQgfTtcbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGRlbGV0aW9uIGZhaWxlZCcpO1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShleGlzdGluZ1Bvc3QpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmRlbGV0ZS5tb2NrUmVqZWN0ZWRWYWx1ZShkYkVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVtb3ZlKG1vY2tQb3N0SWQsIG1vY2tVc2VySWQpKS5yZWplY3RzLnRvVGhyb3coZGJFcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjYXNjYWRpbmcgZGVsZXRpb24gc2NlbmFyaW9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmdQb3N0ID0geyB1c2VySWQ6IG1vY2tVc2VySWQgfTtcbiAgICAgIGNvbnN0IGRlbGV0ZWRQb3N0ID0geyAuLi5tb2NrUG9zdCwgZGVsZXRlZEF0OiBuZXcgRGF0ZSgpIH07XG5cbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKGV4aXN0aW5nUG9zdCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZGVsZXRlLm1vY2tSZXNvbHZlZFZhbHVlKGRlbGV0ZWRQb3N0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5yZW1vdmUobW9ja1Bvc3RJZCwgbW9ja1VzZXJJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoZGVsZXRlZFBvc3QpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PSBQT1NUUyBCWSBVU0VSIFRFU1RTID09PT09XG5cbiAgZGVzY3JpYmUoJ2ZpbmRCeVVzZXJJZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGZpbmQgcG9zdHMgYnkgdXNlciBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJQb3N0cyA9IFttb2NrUG9zdFdpdGhJbmNsdWRlc107XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUodXNlclBvc3RzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kQnlVc2VySWQobW9ja1VzZXJJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwodXNlclBvc3RzKTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICB1c2VySWQ6IG1vY2tVc2VySWQsXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGF2YXRhclVybDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICByb29tOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgY29tbWVudHM6IHRydWUsXG4gICAgICAgICAgICAgIGhlYXJ0czogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgIGNyZWF0ZWRBdDogJ2Rlc2MnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSB3aGVuIHVzZXIgaGFzIG5vIHBvc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kQnlVc2VySWQoJ3VzZXItd2l0aC1uby1wb3N0cycpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIHBvc3RzIGZyb20gc2FtZSB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbXVsdGlwbGVQb3N0cyA9IFtcbiAgICAgICAgeyAuLi5tb2NrUG9zdFdpdGhJbmNsdWRlcywgaWQ6ICdwb3N0LTEnLCB0aXRsZTogJ0ZpcnN0IFBvc3QnIH0sXG4gICAgICAgIHsgLi4ubW9ja1Bvc3RXaXRoSW5jbHVkZXMsIGlkOiAncG9zdC0yJywgdGl0bGU6ICdTZWNvbmQgUG9zdCcgfSxcbiAgICAgICAgeyAuLi5tb2NrUG9zdFdpdGhJbmNsdWRlcywgaWQ6ICdwb3N0LTMnLCB0aXRsZTogJ1RoaXJkIFBvc3QnIH0sXG4gICAgICBdO1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUobXVsdGlwbGVQb3N0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZEJ5VXNlcklkKG1vY2tVc2VySWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG11bHRpcGxlUG9zdHMpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGJFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgcXVlcnkgZmFpbGVkJyk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkubW9ja1JlamVjdGVkVmFsdWUoZGJFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRCeVVzZXJJZChtb2NrVXNlcklkKSkucmVqZWN0cy50b1Rocm93KGRiRXJyb3IpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PSBQT1NUUyBCWSBST09NIFRFU1RTID09PT09XG5cbiAgZGVzY3JpYmUoJ2ZpbmRCeVJvb21JZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGZpbmQgcG9zdHMgYnkgcm9vbSBJRCB3aXRob3V0IHVzZXJJZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJvb21Qb3N0cyA9IFttb2NrUG9zdFdpdGhJbmNsdWRlc107XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUocm9vbVBvc3RzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kQnlSb29tSWQobW9ja1Jvb21JZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwocm9vbVBvc3RzKTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICByb29tSWQ6IG1vY2tSb29tSWQsXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgICAgcm9vbTogZXhwZWN0LmFueShPYmplY3QpLFxuICAgICAgICAgIGNvbW1lbnRzOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgICAgaGVhcnRzOiBmYWxzZSxcbiAgICAgICAgICBfY291bnQ6IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgIGNyZWF0ZWRBdDogJ2Rlc2MnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbmQgcG9zdHMgYnkgcm9vbSBJRCB3aXRoIHVzZXJJZCBmb3IgaGVhcnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgcm9vbVBvc3RzID0gW21vY2tQb3N0V2l0aEluY2x1ZGVzXTtcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShyb29tUG9zdHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRCeVJvb21JZChtb2NrUm9vbUlkLCBtb2NrVXNlcklkKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChyb29tUG9zdHMpO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucG9zdC5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHJvb21JZDogbW9ja1Jvb21JZCxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGhlYXJ0czoge1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgdXNlcklkOiBtb2NrVXNlcklkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgIGNyZWF0ZWRBdDogJ2Rlc2MnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSB3aGVuIHJvb20gaGFzIG5vIHBvc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kQnlSb29tSWQoJ2VtcHR5LXJvb20nKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwb3N0cyB3aXRoIG5lc3RlZCBjb21tZW50cyBpbiByb29tJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgcm9vbVBvc3RzV2l0aENvbW1lbnRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgLi4ubW9ja1Bvc3RXaXRoSW5jbHVkZXMsXG4gICAgICAgICAgY29tbWVudHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgLi4ubW9ja0NvbW1lbnQsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgaWQ6ICduZXN0ZWQtY29tbWVudCcsXG4gICAgICAgICAgICAgICAgICBjb250ZW50OiAnTmVzdGVkIGNvbW1lbnQnLFxuICAgICAgICAgICAgICAgICAgdXNlcklkOiAnbmVzdGVkLXVzZXInLFxuICAgICAgICAgICAgICAgICAgdXNlcjogeyBpZDogJ25lc3RlZC11c2VyJywgZmlyc3ROYW1lOiAnTmVzdGVkJywgbGFzdE5hbWU6ICdVc2VyJywgYXZhdGFyVXJsOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgICBfY291bnQ6IHsgY2hpbGRyZW46IDAsIGhlYXJ0czogMSB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUocm9vbVBvc3RzV2l0aENvbW1lbnRzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kQnlSb29tSWQobW9ja1Jvb21JZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwocm9vbVBvc3RzV2l0aENvbW1lbnRzKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29tbWVudHNbMF0uY2hpbGRyZW4pLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gPT09PT0gSEVBUlQgRlVOQ1RJT05BTElUWSBURVNUUyA9PT09PVxuXG4gIGRlc2NyaWJlKCdoZWFydFBvc3QnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhZGQgaGVhcnQgd2hlbiB1c2VyIGhhcyBub3QgaGVhcnRlZCB0aGUgcG9zdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdEhlYXJ0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3RIZWFydC5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0hlYXJ0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5oZWFydFBvc3QobW9ja1Bvc3RJZCwgbW9ja1VzZXJJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoeyBoZWFydGVkOiB0cnVlIH0pO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucG9zdEhlYXJ0LmZpbmRVbmlxdWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBwb3N0SWRfdXNlcklkOiB7XG4gICAgICAgICAgICBwb3N0SWQ6IG1vY2tQb3N0SWQsXG4gICAgICAgICAgICB1c2VySWQ6IG1vY2tVc2VySWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucG9zdEhlYXJ0LmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcG9zdElkOiBtb2NrUG9zdElkLFxuICAgICAgICAgIHVzZXJJZDogbW9ja1VzZXJJZCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucG9zdEhlYXJ0LmRlbGV0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVtb3ZlIGhlYXJ0IHdoZW4gdXNlciBoYXMgYWxyZWFkeSBoZWFydGVkIHRoZSBwb3N0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrSGVhcnQpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuZGVsZXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tIZWFydCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuaGVhcnRQb3N0KG1vY2tQb3N0SWQsIG1vY2tVc2VySWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHsgaGVhcnRlZDogZmFsc2UgfSk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0SGVhcnQuZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHBvc3RJZF91c2VySWQ6IHtcbiAgICAgICAgICAgIHBvc3RJZDogbW9ja1Bvc3RJZCxcbiAgICAgICAgICAgIHVzZXJJZDogbW9ja1VzZXJJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0SGVhcnQuZGVsZXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcG9zdElkX3VzZXJJZDoge1xuICAgICAgICAgICAgcG9zdElkOiBtb2NrUG9zdElkLFxuICAgICAgICAgICAgdXNlcklkOiBtb2NrVXNlcklkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3RIZWFydC5jcmVhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMgZHVyaW5nIGhlYXJ0IGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGJFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgY29uc3RyYWludCB2aW9sYXRpb24nKTtcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdEhlYXJ0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3RIZWFydC5jcmVhdGUubW9ja1JlamVjdGVkVmFsdWUoZGJFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmhlYXJ0UG9zdChtb2NrUG9zdElkLCBtb2NrVXNlcklkKSkucmVqZWN0cy50b1Rocm93KGRiRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzIGR1cmluZyBoZWFydCBkZWxldGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGRlbGV0aW9uIGZhaWxlZCcpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrSGVhcnQpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuZGVsZXRlLm1vY2tSZWplY3RlZFZhbHVlKGRiRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5oZWFydFBvc3QobW9ja1Bvc3RJZCwgbW9ja1VzZXJJZCkpLnJlamVjdHMudG9UaHJvdyhkYkVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgaGVhcnQgb3BlcmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNpbXVsYXRlIHJhY2UgY29uZGl0aW9uIHdoZXJlIGhlYXJ0IGlzIGNyZWF0ZWQgYmV0d2VlbiBmaW5kIGFuZCBjcmVhdGVcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdEhlYXJ0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBjb25zdCBkdXBsaWNhdGVFcnJvciA9IG5ldyBFcnJvcignRHVwbGljYXRlIGtleSBjb25zdHJhaW50Jyk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3RIZWFydC5jcmVhdGUubW9ja1JlamVjdGVkVmFsdWUoZHVwbGljYXRlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5oZWFydFBvc3QobW9ja1Bvc3RJZCwgbW9ja1VzZXJJZCkpLnJlamVjdHMudG9UaHJvdyhkdXBsaWNhdGVFcnJvcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpc1Bvc3RIZWFydGVkQnlVc2VyJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgd2hlbiB1c2VyIGhhcyBoZWFydGVkIHRoZSBwb3N0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrSGVhcnQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmlzUG9zdEhlYXJ0ZWRCeVVzZXIobW9ja1Bvc3RJZCwgbW9ja1VzZXJJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0SGVhcnQuZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHBvc3RJZF91c2VySWQ6IHtcbiAgICAgICAgICAgIHBvc3RJZDogbW9ja1Bvc3RJZCxcbiAgICAgICAgICAgIHVzZXJJZDogbW9ja1VzZXJJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIHVzZXIgaGFzIG5vdCBoZWFydGVkIHRoZSBwb3N0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5pc1Bvc3RIZWFydGVkQnlVc2VyKG1vY2tQb3N0SWQsIG1vY2tVc2VySWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIHF1ZXJ5IGZhaWxlZCcpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuZmluZFVuaXF1ZS5tb2NrUmVqZWN0ZWRWYWx1ZShkYkVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuaXNQb3N0SGVhcnRlZEJ5VXNlcihtb2NrUG9zdElkLCBtb2NrVXNlcklkKSkucmVqZWN0cy50b1Rocm93KGRiRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGlmZmVyZW50IHVzZXIgYW5kIHBvc3QgY29tYmluYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdENhc2VzID0gW1xuICAgICAgICB7IHBvc3RJZDogJ3Bvc3QtMScsIHVzZXJJZDogJ3VzZXItMScsIGhlYXJ0ZWQ6IHRydWUgfSxcbiAgICAgICAgeyBwb3N0SWQ6ICdwb3N0LTEnLCB1c2VySWQ6ICd1c2VyLTInLCBoZWFydGVkOiBmYWxzZSB9LFxuICAgICAgICB7IHBvc3RJZDogJ3Bvc3QtMicsIHVzZXJJZDogJ3VzZXItMScsIGhlYXJ0ZWQ6IGZhbHNlIH0sXG4gICAgICAgIHsgcG9zdElkOiAncG9zdC0yJywgdXNlcklkOiAndXNlci0yJywgaGVhcnRlZDogdHJ1ZSB9LFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCB0ZXN0Q2FzZSBvZiB0ZXN0Q2FzZXMpIHtcbiAgICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShcbiAgICAgICAgICB0ZXN0Q2FzZS5oZWFydGVkID8geyAuLi5tb2NrSGVhcnQsIHBvc3RJZDogdGVzdENhc2UucG9zdElkLCB1c2VySWQ6IHRlc3RDYXNlLnVzZXJJZCB9IDogbnVsbCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmlzUG9zdEhlYXJ0ZWRCeVVzZXIodGVzdENhc2UucG9zdElkLCB0ZXN0Q2FzZS51c2VySWQpO1xuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRlc3RDYXNlLmhlYXJ0ZWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PSBGSUxFIEFUVEFDSE1FTlQgVEVTVFMgPT09PT1cblxuICBkZXNjcmliZSgnRmlsZSBhdHRhY2htZW50IG1ldGhvZHMnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ2F0dGFjaEZpbGVzVG9Qb3N0JywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gc3R1YiBpbXBsZW1lbnRhdGlvbiByZXN1bHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuYXR0YWNoRmlsZXNUb1Bvc3QobW9ja1Bvc3RJZCwgWydmaWxlMScsICdmaWxlMiddKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHsgY291bnQ6IDAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgY3VzdG9tIHB1cnBvc2UgcGFyYW1ldGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmF0dGFjaEZpbGVzVG9Qb3N0KG1vY2tQb3N0SWQsIFsnZmlsZTEnXSwgJ0RPQ1VNRU5UJyk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7IGNvdW50OiAwIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGZpbGUgSURzIGFycmF5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmF0dGFjaEZpbGVzVG9Qb3N0KG1vY2tQb3N0SWQsIFtdKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHsgY291bnQ6IDAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdnZXRQb3N0QXR0YWNobWVudHMnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBzdHViIGltcGxlbWVudGF0aW9uIHJlc3VsdCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRQb3N0QXR0YWNobWVudHMobW9ja1Bvc3RJZCk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdyZW1vdmVQb3N0QXR0YWNobWVudCcsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHN0dWIgaW1wbGVtZW50YXRpb24gcmVzdWx0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnJlbW92ZVBvc3RBdHRhY2htZW50KG1vY2tQb3N0SWQsICdmaWxlLTEyMycpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoeyBjb3VudDogMCB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PSBQT1NUIFJFUE9SVElORyBURVNUUyA9PT09PVxuXG4gIGRlc2NyaWJlKCdyZXBvcnRQb3N0JywgKCkgPT4ge1xuICAgIGNvbnN0IHJlcG9ydGVySWQgPSAncmVwb3J0ZXItMTIzJztcbiAgICBjb25zdCByZWFzb24gPSAnSW5hcHByb3ByaWF0ZSBjb250ZW50JztcbiAgICBjb25zdCBjb250ZW50ID0gJ1RoaXMgcG9zdCBjb250YWlucyBvZmZlbnNpdmUgbWF0ZXJpYWwnO1xuXG4gICAgaXQoJ3Nob3VsZCByZXBvcnQgcG9zdCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUG9zdCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnJlcG9ydC5maW5kRmlyc3QubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnJlcG9ydC5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1JlcG9ydCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCByZXBvcnRlcklkLCByZWFzb24sIGNvbnRlbnQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKG1vY2tSZXBvcnRJZCk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IG1vY2tQb3N0SWQgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucmVwb3J0LmZpbmRGaXJzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHBvc3RJZDogbW9ja1Bvc3RJZCxcbiAgICAgICAgICByZXBvcnRlcklkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5yZXBvcnQuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBwb3N0SWQ6IG1vY2tQb3N0SWQsXG4gICAgICAgICAgcmVwb3J0ZXJJZCxcbiAgICAgICAgICByZWFzb24sXG4gICAgICAgICAgY29udGVudCxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXBvcnQgcG9zdCB3aXRob3V0IGNvbnRlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUG9zdCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnJlcG9ydC5maW5kRmlyc3QubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBjb25zdCByZXBvcnRXaXRob3V0Q29udGVudCA9IHsgLi4ubW9ja1JlcG9ydCwgY29udGVudDogdW5kZWZpbmVkIH07XG4gICAgICBwcmlzbWFTZXJ2aWNlLnJlcG9ydC5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUocmVwb3J0V2l0aG91dENvbnRlbnQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnJlcG9ydFBvc3QobW9ja1Bvc3RJZCwgcmVwb3J0ZXJJZCwgcmVhc29uKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShtb2NrUmVwb3J0SWQpO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucmVwb3J0LmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcG9zdElkOiBtb2NrUG9zdElkLFxuICAgICAgICAgIHJlcG9ydGVySWQsXG4gICAgICAgICAgcmVhc29uLFxuICAgICAgICAgIGNvbnRlbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBOb3RGb3VuZEV4Y2VwdGlvbiB3aGVuIHBvc3QgZG9lcyBub3QgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCByZXBvcnRlcklkLCByZWFzb24pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIE5vdEZvdW5kRXhjZXB0aW9uLFxuICAgICAgKTtcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlcG9ydFBvc3QobW9ja1Bvc3RJZCwgcmVwb3J0ZXJJZCwgcmVhc29uKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnUG9zdCBub3QgZm91bmQnLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UucmVwb3J0LmZpbmRGaXJzdCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnJlcG9ydC5jcmVhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IEZvcmJpZGRlbkV4Y2VwdGlvbiB3aGVuIHVzZXIgYWxyZWFkeSByZXBvcnRlZCB0aGUgcG9zdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQb3N0KTtcbiAgICAgIHByaXNtYVNlcnZpY2UucmVwb3J0LmZpbmRGaXJzdC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVwb3J0KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCByZXBvcnRlcklkLCByZWFzb24pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEZvcmJpZGRlbkV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5yZXBvcnRQb3N0KG1vY2tQb3N0SWQsIHJlcG9ydGVySWQsIHJlYXNvbikpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ1lvdSBoYXZlIGFscmVhZHkgcmVwb3J0ZWQgdGhpcyBwb3N0JyxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnJlcG9ydC5jcmVhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IEludGVybmFsU2VydmVyRXJyb3JFeGNlcHRpb24gZm9yIGRhdGFiYXNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVqZWN0ZWRWYWx1ZShkYkVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCByZXBvcnRlcklkLCByZWFzb24pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEludGVybmFsU2VydmVyRXJyb3JFeGNlcHRpb24sXG4gICAgICApO1xuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCByZXBvcnRlcklkLCByZWFzb24pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbm9uLUVycm9yIGV4Y2VwdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdHJpbmdFcnJvciA9ICdTdHJpbmcgZXJyb3IgbWVzc2FnZSc7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVqZWN0ZWRWYWx1ZShzdHJpbmdFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlcG9ydFBvc3QobW9ja1Bvc3RJZCwgcmVwb3J0ZXJJZCwgcmVhc29uKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHdyYXAgTm90Rm91bmRFeGNlcHRpb24gb3IgRm9yYmlkZGVuRXhjZXB0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCBOb3RGb3VuZEV4Y2VwdGlvbiBwYXNzdGhyb3VnaFxuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Bvc3QpO1xuICAgICAgcHJpc21hU2VydmljZS5yZXBvcnQuZmluZEZpcnN0Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBOb3RGb3VuZEV4Y2VwdGlvbignUmVwb3J0IG5vdCBmb3VuZCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCByZXBvcnRlcklkLCByZWFzb24pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIE5vdEZvdW5kRXhjZXB0aW9uLFxuICAgICAgKTtcblxuICAgICAgLy8gVGVzdCBGb3JiaWRkZW5FeGNlcHRpb24gcGFzc3Rocm91Z2hcbiAgICAgIHByaXNtYVNlcnZpY2UucmVwb3J0LmZpbmRGaXJzdC5tb2NrUmVqZWN0ZWRWYWx1ZShcbiAgICAgICAgbmV3IEZvcmJpZGRlbkV4Y2VwdGlvbignQWNjZXNzIGRlbmllZCcpLFxuICAgICAgKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCByZXBvcnRlcklkLCByZWFzb24pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEZvcmJpZGRlbkV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkaWZmZXJlbnQgcmVhc29uIHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVhc29ucyA9IFsnc3BhbScsICdoYXJhc3NtZW50JywgJ21pc2luZm9ybWF0aW9uJywgJ3Zpb2xlbmNlJywgJ290aGVyJ107XG5cbiAgICAgIGZvciAoY29uc3QgdGVzdFJlYXNvbiBvZiByZWFzb25zKSB7XG4gICAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQb3N0KTtcbiAgICAgICAgcHJpc21hU2VydmljZS5yZXBvcnQuZmluZEZpcnN0Lm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgICBjb25zdCByZXBvcnRXaXRoUmVhc29uID0geyAuLi5tb2NrUmVwb3J0LCByZWFzb246IHRlc3RSZWFzb24gfTtcbiAgICAgICAgcHJpc21hU2VydmljZS5yZXBvcnQuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHJlcG9ydFdpdGhSZWFzb24pO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCByZXBvcnRlcklkLCB0ZXN0UmVhc29uKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKG1vY2tSZXBvcnRJZCk7XG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnJlcG9ydC5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBwb3N0SWQ6IG1vY2tQb3N0SWQsXG4gICAgICAgICAgICByZXBvcnRlcklkLFxuICAgICAgICAgICAgcmVhc29uOiB0ZXN0UmVhc29uLFxuICAgICAgICAgICAgY29udGVudDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vID09PT09IElOVEVHUkFUSU9OIFRFU1RTID09PT09XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHNjZW5hcmlvcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZSBwb3N0IGxpZmVjeWNsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBwb3N0XG4gICAgICBjb25zdCBjcmVhdGVEYXRhOiBQcmlzbWEuUG9zdENyZWF0ZUlucHV0ID0ge1xuICAgICAgICB0aXRsZTogJ0xpZmVjeWNsZSBUZXN0IFBvc3QnLFxuICAgICAgICBjb250ZW50OiAnVGhpcyBpcyBhIHRlc3QgcG9zdCBmb3IgbGlmZWN5Y2xlIHRlc3RpbmcnLFxuICAgICAgICB1c2VyOiB7IGNvbm5lY3Q6IHsgaWQ6IG1vY2tVc2VySWQgfSB9LFxuICAgICAgICByb29tOiB7IGNvbm5lY3Q6IHsgaWQ6IG1vY2tSb29tSWQgfSB9LFxuICAgICAgfTtcblxuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUG9zdFdpdGhJbmNsdWRlcyk7XG5cbiAgICAgIGNvbnN0IGNyZWF0ZWRQb3N0ID0gYXdhaXQgc2VydmljZS5jcmVhdGUoY3JlYXRlRGF0YSk7XG4gICAgICBleHBlY3QoY3JlYXRlZFBvc3QpLnRvRXF1YWwobW9ja1Bvc3RXaXRoSW5jbHVkZXMpO1xuXG4gICAgICAvLyBVcGRhdGUgcG9zdFxuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHsgdGl0bGU6ICdVcGRhdGVkIExpZmVjeWNsZSBQb3N0JyB9O1xuICAgICAgY29uc3QgZXhpc3RpbmdQb3N0ID0geyB1c2VySWQ6IG1vY2tVc2VySWQgfTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQb3N0ID0geyAuLi5tb2NrUG9zdFdpdGhJbmNsdWRlcywgdGl0bGU6ICdVcGRhdGVkIExpZmVjeWNsZSBQb3N0JyB9O1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShleGlzdGluZ1Bvc3QpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LnVwZGF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkUG9zdCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UudXBkYXRlKG1vY2tQb3N0SWQsIHVwZGF0ZURhdGEsIG1vY2tVc2VySWQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC50aXRsZSkudG9CZSgnVXBkYXRlZCBMaWZlY3ljbGUgUG9zdCcpO1xuXG4gICAgICAvLyBIZWFydCBwb3N0XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3RIZWFydC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tIZWFydCk7XG5cbiAgICAgIGNvbnN0IGhlYXJ0UmVzdWx0ID0gYXdhaXQgc2VydmljZS5oZWFydFBvc3QobW9ja1Bvc3RJZCwgbW9ja1VzZXJJZCk7XG4gICAgICBleHBlY3QoaGVhcnRSZXN1bHQuaGVhcnRlZCkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gRGVsZXRlIHBvc3RcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKHsgdXNlcklkOiBtb2NrVXNlcklkIH0pO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmRlbGV0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUG9zdCk7XG5cbiAgICAgIGNvbnN0IGRlbGV0ZWRQb3N0ID0gYXdhaXQgc2VydmljZS5yZW1vdmUobW9ja1Bvc3RJZCwgbW9ja1VzZXJJZCk7XG4gICAgICBleHBlY3QoZGVsZXRlZFBvc3QpLnRvRXF1YWwobW9ja1Bvc3QpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcG9zdCB3aXRoIGNvbXBsZXggY29tbWVudCBzdHJ1Y3R1cmUgYW5kIGhlYXJ0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBsZXhQb3N0ID0ge1xuICAgICAgICAuLi5tb2NrUG9zdFdpdGhJbmNsdWRlcyxcbiAgICAgICAgY29tbWVudHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi5tb2NrQ29tbWVudCxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogJ3JlcGx5LTEnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdGaXJzdCByZXBseScsXG4gICAgICAgICAgICAgICAgdXNlcklkOiAndXNlci0xJyxcbiAgICAgICAgICAgICAgICB1c2VyOiB7IGlkOiAndXNlci0xJywgZmlyc3ROYW1lOiAnVXNlcicsIGxhc3ROYW1lOiAnT25lJywgYXZhdGFyVXJsOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgX2NvdW50OiB7IGNoaWxkcmVuOiAwLCBoZWFydHM6IDIgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgaGVhcnRzOiBbbW9ja0hlYXJ0XSxcbiAgICAgICAgX2NvdW50OiB7IGNvbW1lbnRzOiAxLCBoZWFydHM6IDEgfSxcbiAgICAgIH07XG5cbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKGNvbXBsZXhQb3N0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kT25lKG1vY2tQb3N0SWQsIG1vY2tVc2VySWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGNvbXBsZXhQb3N0KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29tbWVudHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29tbWVudHNbMF0uY2hpbGRyZW4pLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaGVhcnRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0Ll9jb3VudC5jb21tZW50cykudG9CZSgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuX2NvdW50LmhlYXJ0cykudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJvb20tYmFzZWQgcG9zdCBmaWx0ZXJpbmcgYW5kIHVzZXIgaW50ZXJhY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgcm9vbVBvc3RzID0gW1xuICAgICAgICB7IC4uLm1vY2tQb3N0V2l0aEluY2x1ZGVzLCBpZDogJ3Bvc3QtMScsIHRpdGxlOiAnUm9vbSBQb3N0IDEnIH0sXG4gICAgICAgIHsgLi4ubW9ja1Bvc3RXaXRoSW5jbHVkZXMsIGlkOiAncG9zdC0yJywgdGl0bGU6ICdSb29tIFBvc3QgMicgfSxcbiAgICAgIF07XG5cbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShyb29tUG9zdHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRCeVJvb21JZChtb2NrUm9vbUlkLCBtb2NrVXNlcklkKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChyb29tUG9zdHMpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDIpO1xuXG4gICAgICAvLyBWZXJpZnkgcm9vbS1zcGVjaWZpYyBxdWVyeWluZyB3YXMgY2FsbGVkIHdpdGggdXNlciBoZWFydCBmaWx0ZXJpbmdcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgd2hlcmU6IHsgcm9vbUlkOiBtb2NrUm9vbUlkIH0sXG4gICAgICAgICAgaW5jbHVkZTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgaGVhcnRzOiB7IHdoZXJlOiB7IHVzZXJJZDogbW9ja1VzZXJJZCB9IH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJlcG9ydGluZyB3b3JrZmxvdyB3aXRoIHZhbGlkYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXBvcnRlcklkID0gJ3JlcG9ydGVyLTEyMyc7XG5cbiAgICAgIC8vIFN0ZXAgMTogUmVwb3J0IGEgcG9zdFxuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Bvc3QpO1xuICAgICAgcHJpc21hU2VydmljZS5yZXBvcnQuZmluZEZpcnN0Lm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgcHJpc21hU2VydmljZS5yZXBvcnQuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXBvcnQpO1xuXG4gICAgICBjb25zdCByZXBvcnRJZCA9IGF3YWl0IHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCByZXBvcnRlcklkLCAnc3BhbScpO1xuICAgICAgZXhwZWN0KHJlcG9ydElkKS50b0JlKG1vY2tSZXBvcnRJZCk7XG5cbiAgICAgIC8vIFN0ZXAgMjogVHJ5IHRvIHJlcG9ydCB0aGUgc2FtZSBwb3N0IGFnYWluIChzaG91bGQgZmFpbClcbiAgICAgIHByaXNtYVNlcnZpY2UucmVwb3J0LmZpbmRGaXJzdC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVwb3J0KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCByZXBvcnRlcklkLCAnc3BhbScpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEZvcmJpZGRlbkV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vID09PT09IFBFUkZPUk1BTkNFIFRFU1RTID09PT09XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIHRlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxhcmdlIG51bWJlcnMgb2YgcG9zdHMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZUJhdGNoU2l6ZSA9IDEwMDtcbiAgICAgIGNvbnN0IGxhcmdlQmF0Y2ggPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBsYXJnZUJhdGNoU2l6ZSB9LCAoXywgaSkgPT4gKHtcbiAgICAgICAgLi4ubW9ja1Bvc3RXaXRoSW5jbHVkZXMsXG4gICAgICAgIGlkOiBgcG9zdC0ke2l9YCxcbiAgICAgICAgdGl0bGU6IGBQb3N0ICR7aX1gLFxuICAgICAgfSkpO1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUobGFyZ2VCYXRjaCk7XG5cbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRBbGwoKTtcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgobGFyZ2VCYXRjaFNpemUpO1xuICAgICAgZXhwZWN0KGVuZFRpbWUgLSBzdGFydFRpbWUpLnRvQmVMZXNzVGhhbigxMDApOyAvLyBTaG91bGQgYmUgZmFzdCBzaW5jZSBpdCdzIGp1c3QgYSBtb2NrZWQgY2FsbFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCBoZWFydCBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29uY3VycmVudE9wZXJhdGlvbnMgPSAxMDtcbiAgICAgIGNvbnN0IGhlYXJ0UHJvbWlzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjb25jdXJyZW50T3BlcmF0aW9ucyB9LCAoXywgaSkgPT4ge1xuICAgICAgICBjb25zdCB1c2VySWQgPSBgdXNlci0ke2l9YDtcbiAgICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICAgICAgcHJpc21hU2VydmljZS5wb3N0SGVhcnQuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHsgLi4ubW9ja0hlYXJ0LCB1c2VySWQgfSk7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlLmhlYXJ0UG9zdChtb2NrUG9zdElkLCB1c2VySWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChoZWFydFByb21pc2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aChjb25jdXJyZW50T3BlcmF0aW9ucyk7XG4gICAgICBleHBlY3QocmVzdWx0cy5ldmVyeShyID0+IHIuaGVhcnRlZCA9PT0gdHJ1ZSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBiYXRjaCBwb3N0IG9wZXJhdGlvbnMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBiYXRjaFNpemUgPSA1MDtcbiAgICAgIGNvbnN0IHByb21pc2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogYmF0Y2hTaXplIH0sIChfLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IHBvc3RJZCA9IGBwb3N0LSR7aX1gO1xuICAgICAgICBjb25zdCB1c2VySWQgPSBgdXNlci0ke2l9YDtcbiAgICAgICAgXG4gICAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKHsgLi4ubW9ja1Bvc3RXaXRoSW5jbHVkZXMsIGlkOiBwb3N0SWQgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2VydmljZS5maW5kT25lKHBvc3RJZCwgdXNlcklkKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKGJhdGNoU2l6ZSk7XG4gICAgICBleHBlY3QoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9CZUxlc3NUaGFuKDIwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vID09PT09IEVSUk9SIEhBTkRMSU5HIEFORCBFREdFIENBU0VTID09PT09XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIGhhbmRsaW5nIGFuZCBlZGdlIGNhc2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwgYW5kIHVuZGVmaW5lZCBpbnB1dHMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgZmluZFVzZXJCeUlkIHdpdGggbnVsbFxuICAgICAgZXhwZWN0KHNlcnZpY2UuZmluZFVzZXJCeUlkKG51bGwgYXMgYW55KSkucmVqZWN0cy50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAvLyBUZXN0IGZpbmRPbmUgd2l0aCB1bmRlZmluZWRcbiAgICAgIGV4cGVjdChzZXJ2aWNlLmZpbmRPbmUodW5kZWZpbmVkIGFzIGFueSkpLnJlamVjdHMudG9CZURlZmluZWQoKTtcblxuICAgICAgLy8gVGVzdCBoZWFydFBvc3Qgd2l0aCBlbXB0eSBzdHJpbmdzXG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3RIZWFydC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgZXhwZWN0KHNlcnZpY2UuaGVhcnRQb3N0KCcnLCAnJykpLnJlamVjdHMudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uRXJyb3IgPSBuZXcgRXJyb3IoJ0VDT05OUkVGVVNFRCcpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRNYW55Lm1vY2tSZWplY3RlZFZhbHVlKGNvbm5lY3Rpb25FcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRBbGwoKSkucmVqZWN0cy50b1Rocm93KGNvbm5lY3Rpb25FcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB0cmFuc2FjdGlvbiByb2xsYmFjayBzY2VuYXJpb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkVycm9yID0gbmV3IEVycm9yKCdUcmFuc2FjdGlvbiByb2xsYmFjaycpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmNyZWF0ZS5tb2NrUmVqZWN0ZWRWYWx1ZSh0cmFuc2FjdGlvbkVycm9yKTtcblxuICAgICAgY29uc3QgY3JlYXRlRGF0YTogUHJpc21hLlBvc3RDcmVhdGVJbnB1dCA9IHtcbiAgICAgICAgdGl0bGU6ICdUZXN0JyxcbiAgICAgICAgY29udGVudDogJ1Rlc3QnLFxuICAgICAgICB1c2VyOiB7IGNvbm5lY3Q6IHsgaWQ6IG1vY2tVc2VySWQgfSB9LFxuICAgICAgICByb29tOiB7IGNvbm5lY3Q6IHsgaWQ6IG1vY2tSb29tSWQgfSB9LFxuICAgICAgfTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuY3JlYXRlKGNyZWF0ZURhdGEpKS5yZWplY3RzLnRvVGhyb3codHJhbnNhY3Rpb25FcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwb3N0cyB3aXRoIG1pc3NpbmcgcmVsYXRpb25zaGlwcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9ycGhhbmVkUG9zdCA9IHtcbiAgICAgICAgLi4ubW9ja1Bvc3QsXG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIHJvb206IG51bGwsXG4gICAgICB9O1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShvcnBoYW5lZFBvc3QpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRPbmUobW9ja1Bvc3RJZCk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG9ycGhhbmVkUG9zdCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgZGF0YSBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWFsZm9ybWVkUG9zdCA9IHtcbiAgICAgICAgaWQ6IG1vY2tQb3N0SWQsXG4gICAgICAgIHRpdGxlOiBudWxsLFxuICAgICAgICBjb250ZW50OiB1bmRlZmluZWQsXG4gICAgICAgIHVzZXJJZDogJycsXG4gICAgICAgIHJvb21JZDogbnVsbCxcbiAgICAgIH07XG5cbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1hbGZvcm1lZFBvc3QpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRPbmUobW9ja1Bvc3RJZCk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1hbGZvcm1lZFBvc3QpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsb25nIGNvbnRlbnQgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxvbmdDb250ZW50ID0gJ0EnLnJlcGVhdCgxMDAwMCk7XG4gICAgICBjb25zdCBjcmVhdGVEYXRhOiBQcmlzbWEuUG9zdENyZWF0ZUlucHV0ID0ge1xuICAgICAgICB0aXRsZTogJ0xvbmcgQ29udGVudCBQb3N0JyxcbiAgICAgICAgY29udGVudDogbG9uZ0NvbnRlbnQsXG4gICAgICAgIHVzZXI6IHsgY29ubmVjdDogeyBpZDogbW9ja1VzZXJJZCB9IH0sXG4gICAgICAgIHJvb206IHsgY29ubmVjdDogeyBpZDogbW9ja1Jvb21JZCB9IH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwb3N0V2l0aExvbmdDb250ZW50ID0geyAuLi5tb2NrUG9zdCwgY29udGVudDogbG9uZ0NvbnRlbnQgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUocG9zdFdpdGhMb25nQ29udGVudCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlKGNyZWF0ZURhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb250ZW50KS50b0hhdmVMZW5ndGgoMTAwMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgc3RyaW5nIGlucHV0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNyZWF0ZURhdGE6IFByaXNtYS5Qb3N0Q3JlYXRlSW5wdXQgPSB7XG4gICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgY29udGVudDogJycsXG4gICAgICAgIHVzZXI6IHsgY29ubmVjdDogeyBpZDogbW9ja1VzZXJJZCB9IH0sXG4gICAgICAgIHJvb206IHsgY29ubmVjdDogeyBpZDogbW9ja1Jvb21JZCB9IH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBlbXB0eVBvc3QgPSB7IC4uLm1vY2tQb3N0LCB0aXRsZTogJycsIGNvbnRlbnQ6ICcnIH07XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKGVtcHR5UG9zdCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlKGNyZWF0ZURhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC50aXRsZSkudG9CZSgnJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbnRlbnQpLnRvQmUoJycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCB1cGRhdGUgYW5kIGRlbGV0ZSBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmdQb3N0ID0geyB1c2VySWQ6IG1vY2tVc2VySWQgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKGV4aXN0aW5nUG9zdCk7XG5cbiAgICAgIC8vIFNpbXVsYXRlIGNvbmN1cnJlbnQgdXBkYXRlXG4gICAgICBjb25zdCB1cGRhdGVQcm9taXNlID0gc2VydmljZS51cGRhdGUobW9ja1Bvc3RJZCwgeyB0aXRsZTogJ1VwZGF0ZWQnIH0sIG1vY2tVc2VySWQpO1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LnVwZGF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUG9zdFdpdGhJbmNsdWRlcyk7XG5cbiAgICAgIC8vIFNpbXVsYXRlIGNvbmN1cnJlbnQgZGVsZXRlXG4gICAgICBjb25zdCBkZWxldGVQcm9taXNlID0gc2VydmljZS5yZW1vdmUobW9ja1Bvc3RJZCwgbW9ja1VzZXJJZCk7XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZGVsZXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQb3N0KTtcblxuICAgICAgLy8gQm90aCBvcGVyYXRpb25zIHNob3VsZCBwcm9jZWVkIHdpdGhvdXQgaW50ZXJmZXJlbmNlIGluIHRoaXMgaW1wbGVtZW50YXRpb25cbiAgICAgIGNvbnN0IFt1cGRhdGVSZXN1bHQsIGRlbGV0ZVJlc3VsdF0gPSBhd2FpdCBQcm9taXNlLmFsbChbdXBkYXRlUHJvbWlzZSwgZGVsZXRlUHJvbWlzZV0pO1xuXG4gICAgICBleHBlY3QodXBkYXRlUmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRlbGV0ZVJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gPT09PT0gU0VDVVJJVFkgVEVTVFMgPT09PT1cblxuICBkZXNjcmliZSgnU2VjdXJpdHkgY29uc2lkZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IHVuYXV0aG9yaXplZCBwb3N0IHVwZGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBleGlzdGluZ1Bvc3QgPSB7IHVzZXJJZDogJ290aGVyLXVzZXInIH07XG4gICAgICBwcmlzbWFTZXJ2aWNlLnBvc3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShleGlzdGluZ1Bvc3QpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHNlcnZpY2UudXBkYXRlKG1vY2tQb3N0SWQsIHsgdGl0bGU6ICdIYWNrZWQhJyB9LCAnbWFsaWNpb3VzLXVzZXInKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEZvcmJpZGRlbkV4Y2VwdGlvbik7XG5cbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnBvc3QudXBkYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IHVuYXV0aG9yaXplZCBwb3N0IGRlbGV0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nUG9zdCA9IHsgdXNlcklkOiAnb3RoZXItdXNlcicgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKGV4aXN0aW5nUG9zdCk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlbW92ZShtb2NrUG9zdElkLCAnbWFsaWNpb3VzLXVzZXInKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBGb3JiaWRkZW5FeGNlcHRpb24sXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5wb3N0LmRlbGV0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBvdGVudGlhbCBpbmplY3Rpb24gYXR0YWNrcyBpbiBjb250ZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWFsaWNpb3VzQ29udGVudCA9IFwiPHNjcmlwdD5hbGVydCgneHNzJyk8L3NjcmlwdD5cIjtcbiAgICAgIGNvbnN0IGNyZWF0ZURhdGE6IFByaXNtYS5Qb3N0Q3JlYXRlSW5wdXQgPSB7XG4gICAgICAgIHRpdGxlOiAnTm9ybWFsIFRpdGxlJyxcbiAgICAgICAgY29udGVudDogbWFsaWNpb3VzQ29udGVudCxcbiAgICAgICAgdXNlcjogeyBjb25uZWN0OiB7IGlkOiBtb2NrVXNlcklkIH0gfSxcbiAgICAgICAgcm9vbTogeyBjb25uZWN0OiB7IGlkOiBtb2NrUm9vbUlkIH0gfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHBvc3RXaXRoTWFsaWNpb3VzQ29udGVudCA9IHsgLi4ubW9ja1Bvc3QsIGNvbnRlbnQ6IG1hbGljaW91c0NvbnRlbnQgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UucG9zdC5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUocG9zdFdpdGhNYWxpY2lvdXNDb250ZW50KTtcblxuICAgICAgLy8gU2VydmljZSBzaG91bGQgYWNjZXB0IHRoZSBjb250ZW50IGFzLWlzIChzYW5pdGl6YXRpb24gaGFwcGVucyBhdCBwcmVzZW50YXRpb24gbGF5ZXIpXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNyZWF0ZShjcmVhdGVEYXRhKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGVudCkudG9CZShtYWxpY2lvdXNDb250ZW50KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJldmVudCBkdXBsaWNhdGUgcmVwb3J0aW5nIGFidXNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Bvc3QpO1xuICAgICAgcHJpc21hU2VydmljZS5yZXBvcnQuZmluZEZpcnN0Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXBvcnQpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHNlcnZpY2UucmVwb3J0UG9zdChtb2NrUG9zdElkLCAncmVwb3J0ZXItMTIzJywgJ3NwYW0nKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEZvcmJpZGRlbkV4Y2VwdGlvbik7XG5cbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLnJlcG9ydC5jcmVhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHBvc3QgZXhpc3RlbmNlIGJlZm9yZSBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5wb3N0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIC8vIFVwZGF0ZVxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZXJ2aWNlLnVwZGF0ZSgnbm9uLWV4aXN0ZW50JywgeyB0aXRsZTogJ1VwZGF0ZScgfSwgbW9ja1VzZXJJZCksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhOb3RGb3VuZEV4Y2VwdGlvbik7XG5cbiAgICAgIC8vIERlbGV0ZVxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVtb3ZlKCdub24tZXhpc3RlbnQnLCBtb2NrVXNlcklkKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBOb3RGb3VuZEV4Y2VwdGlvbixcbiAgICAgICk7XG5cbiAgICAgIC8vIFJlcG9ydFxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZXJ2aWNlLnJlcG9ydFBvc3QoJ25vbi1leGlzdGVudCcsICdyZXBvcnRlcicsICdyZWFzb24nKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KE5vdEZvdW5kRXhjZXB0aW9uKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=