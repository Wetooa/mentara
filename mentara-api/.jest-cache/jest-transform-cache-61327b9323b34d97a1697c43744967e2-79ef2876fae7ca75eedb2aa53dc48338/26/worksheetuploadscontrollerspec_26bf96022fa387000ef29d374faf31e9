2ea963c92fadd7cdf4834d7205d7aa44
"use strict";
/**
 * Comprehensive Test Suite for WorksheetUploadsController
 * Tests file upload functionality for worksheet materials and submissions
 */
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const worksheet_uploads_controller_1 = require("./worksheet-uploads.controller");
const prisma_client_provider_1 = require("../providers/prisma-client.provider");
const supabase_storage_service_1 = require("../common/services/supabase-storage.service");
const index_1 = require("../test-utils/index");
describe('WorksheetUploadsController', () => {
    let controller;
    let prismaService;
    let supabaseStorageService;
    let module;
    // Mock PrismaService
    const mockPrismaService = {
        worksheet: {
            findUnique: jest.fn(),
            update: jest.fn(),
        },
    };
    // Mock SupabaseStorageService
    const mockSupabaseStorageService = {
        validateFile: jest.fn(),
        uploadFile: jest.fn(),
        deleteFile: jest.fn(),
        getFileUrl: jest.fn(),
    };
    // Mock static method
    const mockGetSupportedBuckets = jest.fn().mockReturnValue({
        WORKSHEETS: 'worksheets',
        MATERIALS: 'materials',
        SUBMISSIONS: 'submissions',
    });
    // Test data
    const mockWorksheet = {
        id: 'worksheet_123456789',
        title: 'Anxiety Management Worksheet',
        description: 'Weekly exercises for managing anxiety',
        content: 'Complete the following exercises...',
        status: 'assigned',
        clientId: index_1.TEST_USER_IDS.CLIENT,
        therapistId: index_1.TEST_USER_IDS.THERAPIST,
        materialUrls: [],
        materialNames: [],
        materialSizes: [],
        submissionUrls: [],
        submissionNames: [],
        submissionSizes: [],
        createdAt: new Date(),
        updatedAt: new Date(),
    };
    const mockFile = {
        fieldname: 'file',
        originalname: 'worksheet-material.pdf',
        encoding: '7bit',
        mimetype: 'application/pdf',
        buffer: Buffer.from('fake pdf content'),
        size: 1024000,
    };
    const mockUploadResult = {
        filename: 'unique-filename-123.pdf',
        url: 'https://storage.example.com/worksheets/unique-filename-123.pdf',
        size: 1024000,
        contentType: 'application/pdf',
    };
    const mockValidation = {
        isValid: true,
        error: null,
    };
    beforeEach(async () => {
        // Mock the static method
        jest.spyOn(supabase_storage_service_1.SupabaseStorageService, 'getSupportedBuckets').mockImplementation(mockGetSupportedBuckets);
        module = await testing_1.Test.createTestingModule({
            controllers: [worksheet_uploads_controller_1.WorksheetUploadsController],
            providers: [
                {
                    provide: prisma_client_provider_1.PrismaService,
                    useValue: mockPrismaService,
                },
                {
                    provide: supabase_storage_service_1.SupabaseStorageService,
                    useValue: mockSupabaseStorageService,
                },
            ],
        }).compile();
        controller = module.get(worksheet_uploads_controller_1.WorksheetUploadsController);
        prismaService = module.get(prisma_client_provider_1.PrismaService);
        supabaseStorageService = module.get(supabase_storage_service_1.SupabaseStorageService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('Controller Initialization', () => {
        it('should be defined', () => {
            expect(controller).toBeDefined();
        });
        it('should have all services injected', () => {
            expect(prismaService).toBeDefined();
            expect(supabaseStorageService).toBeDefined();
        });
    });
    describe('POST /worksheets/upload', () => {
        beforeEach(() => {
            mockPrismaService.worksheet.findUnique.mockResolvedValue(mockWorksheet);
            mockSupabaseStorageService.validateFile.mockReturnValue(mockValidation);
            mockSupabaseStorageService.uploadFile.mockResolvedValue(mockUploadResult);
            mockPrismaService.worksheet.update.mockResolvedValue({
                ...mockWorksheet,
                materialUrls: [mockUploadResult.url],
                materialNames: [mockFile.originalname],
                materialSizes: [mockFile.size],
            });
        });
        describe('Material Upload', () => {
            it('should upload material file successfully', async () => {
                const result = await controller.uploadFile(mockFile, 'worksheet_123456789', 'material');
                expect(result).toEqual({
                    id: mockUploadResult.filename,
                    filename: mockFile.originalname,
                    url: mockUploadResult.url,
                    fileSize: mockFile.size,
                    fileType: mockFile.mimetype,
                });
                expect(prismaService.worksheet.findUnique).toHaveBeenCalledWith({
                    where: { id: 'worksheet_123456789' },
                });
                expect(supabaseStorageService.validateFile).toHaveBeenCalledWith(mockFile, 5 * 1024 * 1024, [
                    'application/pdf',
                    'application/msword',
                    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                    'text/plain',
                    'image/jpeg',
                    'image/png',
                ]);
                expect(supabaseStorageService.uploadFile).toHaveBeenCalledWith(mockFile, 'worksheets');
                expect(prismaService.worksheet.update).toHaveBeenCalledWith({
                    where: { id: 'worksheet_123456789' },
                    data: {
                        materialUrls: { push: mockUploadResult.url },
                        materialNames: { push: mockFile.originalname },
                        materialSizes: { push: mockFile.size },
                    },
                });
            });
            it('should handle PDF file upload', async () => {
                const pdfFile = {
                    ...mockFile,
                    originalname: 'guide.pdf',
                    mimetype: 'application/pdf',
                };
                const result = await controller.uploadFile(pdfFile, 'worksheet_123456789', 'material');
                expect(result.filename).toBe('guide.pdf');
                expect(result.fileType).toBe('application/pdf');
            });
            it('should handle DOCX file upload', async () => {
                const docxFile = {
                    ...mockFile,
                    originalname: 'template.docx',
                    mimetype: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                };
                const result = await controller.uploadFile(docxFile, 'worksheet_123456789', 'material');
                expect(result.filename).toBe('template.docx');
                expect(result.fileType).toBe('application/vnd.openxmlformats-officedocument.wordprocessingml.document');
            });
            it('should handle image file upload', async () => {
                const imageFile = {
                    ...mockFile,
                    originalname: 'diagram.png',
                    mimetype: 'image/png',
                };
                const result = await controller.uploadFile(imageFile, 'worksheet_123456789', 'material');
                expect(result.filename).toBe('diagram.png');
                expect(result.fileType).toBe('image/png');
            });
        });
        describe('Submission Upload', () => {
            it('should upload submission file successfully', async () => {
                const submissionUpdate = {
                    ...mockWorksheet,
                    submissionUrls: [mockUploadResult.url],
                    submissionNames: [mockFile.originalname],
                    submissionSizes: [mockFile.size],
                };
                mockPrismaService.worksheet.update.mockResolvedValue(submissionUpdate);
                const result = await controller.uploadFile(mockFile, 'worksheet_123456789', 'submission');
                expect(result).toEqual({
                    id: mockUploadResult.filename,
                    filename: mockFile.originalname,
                    url: mockUploadResult.url,
                    fileSize: mockFile.size,
                    fileType: mockFile.mimetype,
                });
                expect(prismaService.worksheet.update).toHaveBeenCalledWith({
                    where: { id: 'worksheet_123456789' },
                    data: {
                        submissionUrls: { push: mockUploadResult.url },
                        submissionNames: { push: mockFile.originalname },
                        submissionSizes: { push: mockFile.size },
                    },
                });
            });
            it('should handle text file submissions', async () => {
                const textFile = {
                    ...mockFile,
                    originalname: 'notes.txt',
                    mimetype: 'text/plain',
                };
                const result = await controller.uploadFile(textFile, 'worksheet_123456789', 'submission');
                expect(result.filename).toBe('notes.txt');
                expect(result.fileType).toBe('text/plain');
            });
        });
        describe('Input Validation', () => {
            it('should throw error when no file is uploaded', async () => {
                await expect(controller.uploadFile(null, 'worksheet_123456789', 'material')).rejects.toThrow(new common_1.BadRequestException('No file uploaded'));
            });
            it('should throw error when worksheetId is missing', async () => {
                await expect(controller.uploadFile(mockFile, '', 'material')).rejects.toThrow(new common_1.BadRequestException('Worksheet ID is required'));
                await expect(controller.uploadFile(mockFile, null, 'material')).rejects.toThrow(new common_1.BadRequestException('Worksheet ID is required'));
            });
            it('should throw error when type is missing', async () => {
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', '')).rejects.toThrow(new common_1.BadRequestException('Type must be either "material" or "submission"'));
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', null)).rejects.toThrow(new common_1.BadRequestException('Type must be either "material" or "submission"'));
            });
            it('should throw error when type is invalid', async () => {
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', 'invalid')).rejects.toThrow(new common_1.BadRequestException('Type must be either "material" or "submission"'));
            });
        });
        describe('Worksheet Validation', () => {
            it('should throw error when worksheet does not exist', async () => {
                mockPrismaService.worksheet.findUnique.mockResolvedValue(null);
                await expect(controller.uploadFile(mockFile, 'nonexistent-worksheet', 'material')).rejects.toThrow(new common_1.BadRequestException('Worksheet with ID nonexistent-worksheet not found'));
            });
            it('should handle database errors during worksheet lookup', async () => {
                const dbError = new Error('Database connection failed');
                mockPrismaService.worksheet.findUnique.mockRejectedValue(dbError);
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', 'material')).rejects.toThrow(common_1.HttpException);
            });
        });
        describe('File Validation', () => {
            it('should reject files that fail validation', async () => {
                const invalidValidation = {
                    isValid: false,
                    error: 'File size exceeds limit',
                };
                mockSupabaseStorageService.validateFile.mockReturnValue(invalidValidation);
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', 'material')).rejects.toThrow(new common_1.BadRequestException('File validation failed: File size exceeds limit'));
            });
            it('should reject unsupported file types', async () => {
                const unsupportedValidation = {
                    isValid: false,
                    error: 'Unsupported file type',
                };
                mockSupabaseStorageService.validateFile.mockReturnValue(unsupportedValidation);
                const unsupportedFile = {
                    ...mockFile,
                    originalname: 'malware.exe',
                    mimetype: 'application/x-executable',
                };
                await expect(controller.uploadFile(unsupportedFile, 'worksheet_123456789', 'material')).rejects.toThrow(new common_1.BadRequestException('File validation failed: Unsupported file type'));
            });
            it('should reject files that are too large', async () => {
                const oversizedValidation = {
                    isValid: false,
                    error: 'File size exceeds 5MB limit',
                };
                mockSupabaseStorageService.validateFile.mockReturnValue(oversizedValidation);
                const largeFile = {
                    ...mockFile,
                    size: 10 * 1024 * 1024, // 10MB
                };
                await expect(controller.uploadFile(largeFile, 'worksheet_123456789', 'material')).rejects.toThrow(new common_1.BadRequestException('File validation failed: File size exceeds 5MB limit'));
            });
            it('should validate against correct mime types', async () => {
                await controller.uploadFile(mockFile, 'worksheet_123456789', 'material');
                expect(supabaseStorageService.validateFile).toHaveBeenCalledWith(mockFile, 5 * 1024 * 1024, // 5MB limit
                [
                    'application/pdf',
                    'application/msword',
                    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                    'text/plain',
                    'image/jpeg',
                    'image/png',
                ]);
            });
        });
        describe('Storage Upload', () => {
            it('should handle storage upload errors', async () => {
                const uploadError = new Error('Storage service unavailable');
                mockSupabaseStorageService.uploadFile.mockRejectedValue(uploadError);
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', 'material')).rejects.toThrow(common_1.HttpException);
            });
            it('should upload to correct bucket', async () => {
                await controller.uploadFile(mockFile, 'worksheet_123456789', 'material');
                expect(supabaseStorageService.uploadFile).toHaveBeenCalledWith(mockFile, 'worksheets');
            });
            it('should handle storage bucket configuration errors', async () => {
                mockGetSupportedBuckets.mockReturnValue({});
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', 'material')).rejects.toThrow(common_1.HttpException);
            });
        });
        describe('Database Updates', () => {
            it('should handle database update errors for materials', async () => {
                const updateError = new Error('Database update failed');
                mockPrismaService.worksheet.update.mockRejectedValue(updateError);
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', 'material')).rejects.toThrow(common_1.HttpException);
            });
            it('should handle database update errors for submissions', async () => {
                const updateError = new Error('Database update failed');
                mockPrismaService.worksheet.update.mockRejectedValue(updateError);
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', 'submission')).rejects.toThrow(common_1.HttpException);
            });
            it('should update material arrays correctly', async () => {
                await controller.uploadFile(mockFile, 'worksheet_123456789', 'material');
                expect(prismaService.worksheet.update).toHaveBeenCalledWith({
                    where: { id: 'worksheet_123456789' },
                    data: {
                        materialUrls: { push: mockUploadResult.url },
                        materialNames: { push: mockFile.originalname },
                        materialSizes: { push: mockFile.size },
                    },
                });
            });
            it('should update submission arrays correctly', async () => {
                await controller.uploadFile(mockFile, 'worksheet_123456789', 'submission');
                expect(prismaService.worksheet.update).toHaveBeenCalledWith({
                    where: { id: 'worksheet_123456789' },
                    data: {
                        submissionUrls: { push: mockUploadResult.url },
                        submissionNames: { push: mockFile.originalname },
                        submissionSizes: { push: mockFile.size },
                    },
                });
            });
        });
        describe('Response Format', () => {
            it('should return properly formatted response', async () => {
                const result = await controller.uploadFile(mockFile, 'worksheet_123456789', 'material');
                expect(result).toHaveProperty('id');
                expect(result).toHaveProperty('filename');
                expect(result).toHaveProperty('url');
                expect(result).toHaveProperty('fileSize');
                expect(result).toHaveProperty('fileType');
                expect(result.id).toBe(mockUploadResult.filename);
                expect(result.filename).toBe(mockFile.originalname);
                expect(result.url).toBe(mockUploadResult.url);
                expect(result.fileSize).toBe(mockFile.size);
                expect(result.fileType).toBe(mockFile.mimetype);
            });
            it('should maintain filename integrity', async () => {
                const specialFile = {
                    ...mockFile,
                    originalname: 'special-chars-file_name (1).pdf',
                };
                const result = await controller.uploadFile(specialFile, 'worksheet_123456789', 'material');
                expect(result.filename).toBe('special-chars-file_name (1).pdf');
            });
            it('should handle unicode filenames', async () => {
                const unicodeFile = {
                    ...mockFile,
                    originalname: 'مستند-عربي.pdf',
                };
                const result = await controller.uploadFile(unicodeFile, 'worksheet_123456789', 'material');
                expect(result.filename).toBe('مستند-عربي.pdf');
            });
        });
        describe('Error Handling', () => {
            it('should preserve BadRequestException errors', async () => {
                const badRequestError = new common_1.BadRequestException('Custom validation error');
                mockSupabaseStorageService.validateFile.mockImplementation(() => {
                    throw badRequestError;
                });
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', 'material')).rejects.toThrow(badRequestError);
            });
            it('should wrap other errors in HttpException', async () => {
                const genericError = new Error('Unexpected error');
                mockSupabaseStorageService.uploadFile.mockRejectedValue(genericError);
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', 'material')).rejects.toThrow(common_1.HttpException);
                try {
                    await controller.uploadFile(mockFile, 'worksheet_123456789', 'material');
                }
                catch (error) {
                    expect(error).toBeInstanceOf(common_1.HttpException);
                    expect(error.message).toContain('Failed to upload file: Unexpected error');
                }
            });
            it('should handle errors without error message', async () => {
                const nonErrorObject = 'string error';
                mockSupabaseStorageService.uploadFile.mockRejectedValue(nonErrorObject);
                await expect(controller.uploadFile(mockFile, 'worksheet_123456789', 'material')).rejects.toThrow(common_1.HttpException);
                try {
                    await controller.uploadFile(mockFile, 'worksheet_123456789', 'material');
                }
                catch (error) {
                    expect(error).toBeInstanceOf(common_1.HttpException);
                    expect(error.message).toContain('Failed to upload file: Unknown error');
                }
            });
        });
        describe('Multiple File Types', () => {
            const fileTypes = [
                {
                    name: 'PDF document',
                    file: { ...mockFile, originalname: 'document.pdf', mimetype: 'application/pdf' },
                },
                {
                    name: 'Word document',
                    file: { ...mockFile, originalname: 'document.docx', mimetype: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' },
                },
                {
                    name: 'Text file',
                    file: { ...mockFile, originalname: 'notes.txt', mimetype: 'text/plain' },
                },
                {
                    name: 'JPEG image',
                    file: { ...mockFile, originalname: 'image.jpg', mimetype: 'image/jpeg' },
                },
                {
                    name: 'PNG image',
                    file: { ...mockFile, originalname: 'diagram.png', mimetype: 'image/png' },
                },
            ];
            fileTypes.forEach(({ name, file }) => {
                it(`should handle ${name} upload correctly`, async () => {
                    const result = await controller.uploadFile(file, 'worksheet_123456789', 'material');
                    expect(result.filename).toBe(file.originalname);
                    expect(result.fileType).toBe(file.mimetype);
                });
            });
        });
        describe('Integration Scenarios', () => {
            it('should handle complete upload workflow', async () => {
                const result = await controller.uploadFile(mockFile, 'worksheet_123456789', 'material');
                // Verify the complete flow
                expect(prismaService.worksheet.findUnique).toHaveBeenCalledTimes(1);
                expect(supabaseStorageService.validateFile).toHaveBeenCalledTimes(1);
                expect(supabaseStorageService.uploadFile).toHaveBeenCalledTimes(1);
                expect(prismaService.worksheet.update).toHaveBeenCalledTimes(1);
                // Verify result format
                expect(result).toEqual({
                    id: mockUploadResult.filename,
                    filename: mockFile.originalname,
                    url: mockUploadResult.url,
                    fileSize: mockFile.size,
                    fileType: mockFile.mimetype,
                });
            });
            it('should handle concurrent uploads gracefully', async () => {
                const promises = Array(3).fill(null).map(() => controller.uploadFile(mockFile, 'worksheet_123456789', 'material'));
                const results = await Promise.all(promises);
                expect(results).toHaveLength(3);
                results.forEach(result => {
                    expect(result.filename).toBe(mockFile.originalname);
                });
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL3dvcmtzaGVldHMvd29ya3NoZWV0LXVwbG9hZHMuY29udHJvbGxlci5zcGVjLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBRUgsNkNBQXNEO0FBQ3RELDJDQUFvRTtBQUNwRSxpRkFBNEU7QUFDNUUsZ0ZBQW9FO0FBQ3BFLDBGQUFxRjtBQUdyRiwrQ0FBaUU7QUFFakUsUUFBUSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsRUFBRTtJQUMxQyxJQUFJLFVBQXNDLENBQUM7SUFDM0MsSUFBSSxhQUE0QixDQUFDO0lBQ2pDLElBQUksc0JBQThDLENBQUM7SUFDbkQsSUFBSSxNQUFxQixDQUFDO0lBRTFCLHFCQUFxQjtJQUNyQixNQUFNLGlCQUFpQixHQUFHO1FBQ3hCLFNBQVMsRUFBRTtZQUNULFVBQVUsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ3JCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ2xCO0tBQ0YsQ0FBQztJQUVGLDhCQUE4QjtJQUM5QixNQUFNLDBCQUEwQixHQUFHO1FBQ2pDLFlBQVksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3ZCLFVBQVUsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3JCLFVBQVUsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3JCLFVBQVUsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQ3RCLENBQUM7SUFFRixxQkFBcUI7SUFDckIsTUFBTSx1QkFBdUIsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDO1FBQ3hELFVBQVUsRUFBRSxZQUFZO1FBQ3hCLFNBQVMsRUFBRSxXQUFXO1FBQ3RCLFdBQVcsRUFBRSxhQUFhO0tBQzNCLENBQUMsQ0FBQztJQUVILFlBQVk7SUFDWixNQUFNLGFBQWEsR0FBRztRQUNwQixFQUFFLEVBQUUscUJBQXFCO1FBQ3pCLEtBQUssRUFBRSw4QkFB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LENBQUMsQ0FBQztZQUVILEVBQUUsQ0FBQyw2Q0FBNkMsRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDM0QsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQzVDLFVBQVUsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLHFCQUFxQixFQUFFLFVBQVUsQ0FBQyxDQUNuRSxDQUFDO2dCQUVGLE1BQU0sT0FBTyxHQUFHLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFFNUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDaEMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtvQkFDdkIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUN0RCxDQUFDLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy93b3Jrc2hlZXRzL3dvcmtzaGVldC11cGxvYWRzLmNvbnRyb2xsZXIuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbXByZWhlbnNpdmUgVGVzdCBTdWl0ZSBmb3IgV29ya3NoZWV0VXBsb2Fkc0NvbnRyb2xsZXJcbiAqIFRlc3RzIGZpbGUgdXBsb2FkIGZ1bmN0aW9uYWxpdHkgZm9yIHdvcmtzaGVldCBtYXRlcmlhbHMgYW5kIHN1Ym1pc3Npb25zXG4gKi9cblxuaW1wb3J0IHsgVGVzdCwgVGVzdGluZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGVzdGluZyc7XG5pbXBvcnQgeyBCYWRSZXF1ZXN0RXhjZXB0aW9uLCBIdHRwRXhjZXB0aW9uIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgV29ya3NoZWV0VXBsb2Fkc0NvbnRyb2xsZXIgfSBmcm9tICcuL3dvcmtzaGVldC11cGxvYWRzLmNvbnRyb2xsZXInO1xuaW1wb3J0IHsgUHJpc21hU2VydmljZSB9IGZyb20gJy4uL3Byb3ZpZGVycy9wcmlzbWEtY2xpZW50LnByb3ZpZGVyJztcbmltcG9ydCB7IFN1cGFiYXNlU3RvcmFnZVNlcnZpY2UgfSBmcm9tICcuLi9jb21tb24vc2VydmljZXMvc3VwYWJhc2Utc3RvcmFnZS5zZXJ2aWNlJztcbmltcG9ydCB7IFNlY3VyaXR5R3VhcmRUZXN0VXRpbHMsIFJvbGVCYXNlZFRlc3RVdGlscyB9IGZyb20gJy4uL3Rlc3QtdXRpbHMvYXV0aC10ZXN0aW5nLWhlbHBlcnMnO1xuaW1wb3J0IHsgTW9ja0J1aWxkZXIsIFRlc3REYXRhR2VuZXJhdG9yLCBUZXN0QXNzZXJ0aW9ucyB9IGZyb20gJy4uL3Rlc3QtdXRpbHMvZW5oYW5jZWQtdGVzdC1oZWxwZXJzJztcbmltcG9ydCB7IFRFU1RfVVNFUl9JRFMsIFRFU1RfRU1BSUxTIH0gZnJvbSAnLi4vdGVzdC11dGlscy9pbmRleCc7XG5cbmRlc2NyaWJlKCdXb3Jrc2hlZXRVcGxvYWRzQ29udHJvbGxlcicsICgpID0+IHtcbiAgbGV0IGNvbnRyb2xsZXI6IFdvcmtzaGVldFVwbG9hZHNDb250cm9sbGVyO1xuICBsZXQgcHJpc21hU2VydmljZTogUHJpc21hU2VydmljZTtcbiAgbGV0IHN1cGFiYXNlU3RvcmFnZVNlcnZpY2U6IFN1cGFiYXNlU3RvcmFnZVNlcnZpY2U7XG4gIGxldCBtb2R1bGU6IFRlc3RpbmdNb2R1bGU7XG5cbiAgLy8gTW9jayBQcmlzbWFTZXJ2aWNlXG4gIGNvbnN0IG1vY2tQcmlzbWFTZXJ2aWNlID0ge1xuICAgIHdvcmtzaGVldDoge1xuICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxuICAgICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgfSxcbiAgfTtcblxuICAvLyBNb2NrIFN1cGFiYXNlU3RvcmFnZVNlcnZpY2VcbiAgY29uc3QgbW9ja1N1cGFiYXNlU3RvcmFnZVNlcnZpY2UgPSB7XG4gICAgdmFsaWRhdGVGaWxlOiBqZXN0LmZuKCksXG4gICAgdXBsb2FkRmlsZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZUZpbGU6IGplc3QuZm4oKSxcbiAgICBnZXRGaWxlVXJsOiBqZXN0LmZuKCksXG4gIH07XG5cbiAgLy8gTW9jayBzdGF0aWMgbWV0aG9kXG4gIGNvbnN0IG1vY2tHZXRTdXBwb3J0ZWRCdWNrZXRzID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgV09SS1NIRUVUUzogJ3dvcmtzaGVldHMnLFxuICAgIE1BVEVSSUFMUzogJ21hdGVyaWFscycsXG4gICAgU1VCTUlTU0lPTlM6ICdzdWJtaXNzaW9ucycsXG4gIH0pO1xuXG4gIC8vIFRlc3QgZGF0YVxuICBjb25zdCBtb2NrV29ya3NoZWV0ID0ge1xuICAgIGlkOiAnd29ya3NoZWV0XzEyMzQ1Njc4OScsXG4gICAgdGl0bGU6ICdBbnhpZXR5IE1hbmFnZW1lbnQgV29ya3NoZWV0JyxcbiAgICBkZXNjcmlwdGlvbjogJ1dlZWtseSBleGVyY2lzZXMgZm9yIG1hbmFnaW5nIGFueGlldHknLFxuICAgIGNvbnRlbnQ6ICdDb21wbGV0ZSB0aGUgZm9sbG93aW5nIGV4ZXJjaXNlcy4uLicsXG4gICAgc3RhdHVzOiAnYXNzaWduZWQnLFxuICAgIGNsaWVudElkOiBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICB0aGVyYXBpc3RJZDogVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgbWF0ZXJpYWxVcmxzOiBbXSxcbiAgICBtYXRlcmlhbE5hbWVzOiBbXSxcbiAgICBtYXRlcmlhbFNpemVzOiBbXSxcbiAgICBzdWJtaXNzaW9uVXJsczogW10sXG4gICAgc3VibWlzc2lvbk5hbWVzOiBbXSxcbiAgICBzdWJtaXNzaW9uU2l6ZXM6IFtdLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gIH07XG5cbiAgY29uc3QgbW9ja0ZpbGUgPSB7XG4gICAgZmllbGRuYW1lOiAnZmlsZScsXG4gICAgb3JpZ2luYWxuYW1lOiAnd29ya3NoZWV0LW1hdGVyaWFsLnBkZicsXG4gICAgZW5jb2Rpbmc6ICc3Yml0JyxcbiAgICBtaW1ldHlwZTogJ2FwcGxpY2F0aW9uL3BkZicsXG4gICAgYnVmZmVyOiBCdWZmZXIuZnJvbSgnZmFrZSBwZGYgY29udGVudCcpLFxuICAgIHNpemU6IDEwMjQwMDAsXG4gIH0gYXMgRXhwcmVzcy5NdWx0ZXIuRmlsZTtcblxuICBjb25zdCBtb2NrVXBsb2FkUmVzdWx0ID0ge1xuICAgIGZpbGVuYW1lOiAndW5pcXVlLWZpbGVuYW1lLTEyMy5wZGYnLFxuICAgIHVybDogJ2h0dHBzOi8vc3RvcmFnZS5leGFtcGxlLmNvbS93b3Jrc2hlZXRzL3VuaXF1ZS1maWxlbmFtZS0xMjMucGRmJyxcbiAgICBzaXplOiAxMDI0MDAwLFxuICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vcGRmJyxcbiAgfTtcblxuICBjb25zdCBtb2NrVmFsaWRhdGlvbiA9IHtcbiAgICBpc1ZhbGlkOiB0cnVlLFxuICAgIGVycm9yOiBudWxsLFxuICB9O1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIC8vIE1vY2sgdGhlIHN0YXRpYyBtZXRob2RcbiAgICBqZXN0LnNweU9uKFN1cGFiYXNlU3RvcmFnZVNlcnZpY2UsICdnZXRTdXBwb3J0ZWRCdWNrZXRzJykubW9ja0ltcGxlbWVudGF0aW9uKFxuICAgICAgbW9ja0dldFN1cHBvcnRlZEJ1Y2tldHNcbiAgICApO1xuXG4gICAgbW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIGNvbnRyb2xsZXJzOiBbV29ya3NoZWV0VXBsb2Fkc0NvbnRyb2xsZXJdLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBQcmlzbWFTZXJ2aWNlLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrUHJpc21hU2VydmljZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IFN1cGFiYXNlU3RvcmFnZVNlcnZpY2UsXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tTdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KS5jb21waWxlKCk7XG5cbiAgICBjb250cm9sbGVyID0gbW9kdWxlLmdldDxXb3Jrc2hlZXRVcGxvYWRzQ29udHJvbGxlcj4oV29ya3NoZWV0VXBsb2Fkc0NvbnRyb2xsZXIpO1xuICAgIHByaXNtYVNlcnZpY2UgPSBtb2R1bGUuZ2V0PFByaXNtYVNlcnZpY2U+KFByaXNtYVNlcnZpY2UpO1xuICAgIHN1cGFiYXNlU3RvcmFnZVNlcnZpY2UgPSBtb2R1bGUuZ2V0PFN1cGFiYXNlU3RvcmFnZVNlcnZpY2U+KFN1cGFiYXNlU3RvcmFnZVNlcnZpY2UpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29udHJvbGxlciBJbml0aWFsaXphdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGJlIGRlZmluZWQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoY29udHJvbGxlcikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBhbGwgc2VydmljZXMgaW5qZWN0ZWQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUE9TVCAvd29ya3NoZWV0cy91cGxvYWQnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrUHJpc21hU2VydmljZS53b3Jrc2hlZXQuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrV29ya3NoZWV0KTtcbiAgICAgIG1vY2tTdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLnZhbGlkYXRlRmlsZS5tb2NrUmV0dXJuVmFsdWUobW9ja1ZhbGlkYXRpb24pO1xuICAgICAgbW9ja1N1cGFiYXNlU3RvcmFnZVNlcnZpY2UudXBsb2FkRmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXBsb2FkUmVzdWx0KTtcbiAgICAgIG1vY2tQcmlzbWFTZXJ2aWNlLndvcmtzaGVldC51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAuLi5tb2NrV29ya3NoZWV0LFxuICAgICAgICBtYXRlcmlhbFVybHM6IFttb2NrVXBsb2FkUmVzdWx0LnVybF0sXG4gICAgICAgIG1hdGVyaWFsTmFtZXM6IFttb2NrRmlsZS5vcmlnaW5hbG5hbWVdLFxuICAgICAgICBtYXRlcmlhbFNpemVzOiBbbW9ja0ZpbGUuc2l6ZV0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdNYXRlcmlhbCBVcGxvYWQnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHVwbG9hZCBtYXRlcmlhbCBmaWxlIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGxvYWRGaWxlKFxuICAgICAgICAgIG1vY2tGaWxlLFxuICAgICAgICAgICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyxcbiAgICAgICAgICAnbWF0ZXJpYWwnXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgICAgaWQ6IG1vY2tVcGxvYWRSZXN1bHQuZmlsZW5hbWUsXG4gICAgICAgICAgZmlsZW5hbWU6IG1vY2tGaWxlLm9yaWdpbmFsbmFtZSxcbiAgICAgICAgICB1cmw6IG1vY2tVcGxvYWRSZXN1bHQudXJsLFxuICAgICAgICAgIGZpbGVTaXplOiBtb2NrRmlsZS5zaXplLFxuICAgICAgICAgIGZpbGVUeXBlOiBtb2NrRmlsZS5taW1ldHlwZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2Uud29ya3NoZWV0LmZpbmRVbmlxdWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogJ3dvcmtzaGVldF8xMjM0NTY3ODknIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdChzdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLnZhbGlkYXRlRmlsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgbW9ja0ZpbGUsXG4gICAgICAgICAgNSAqIDEwMjQgKiAxMDI0LFxuICAgICAgICAgIFtcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9wZGYnLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL21zd29yZCcsXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnLFxuICAgICAgICAgICAgJ3RleHQvcGxhaW4nLFxuICAgICAgICAgICAgJ2ltYWdlL2pwZWcnLFxuICAgICAgICAgICAgJ2ltYWdlL3BuZycsXG4gICAgICAgICAgXVxuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChzdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLnVwbG9hZEZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIG1vY2tGaWxlLFxuICAgICAgICAgICd3b3Jrc2hlZXRzJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLndvcmtzaGVldC51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogJ3dvcmtzaGVldF8xMjM0NTY3ODknIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbWF0ZXJpYWxVcmxzOiB7IHB1c2g6IG1vY2tVcGxvYWRSZXN1bHQudXJsIH0sXG4gICAgICAgICAgICBtYXRlcmlhbE5hbWVzOiB7IHB1c2g6IG1vY2tGaWxlLm9yaWdpbmFsbmFtZSB9LFxuICAgICAgICAgICAgbWF0ZXJpYWxTaXplczogeyBwdXNoOiBtb2NrRmlsZS5zaXplIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgUERGIGZpbGUgdXBsb2FkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBwZGZGaWxlID0ge1xuICAgICAgICAgIC4uLm1vY2tGaWxlLFxuICAgICAgICAgIG9yaWdpbmFsbmFtZTogJ2d1aWRlLnBkZicsXG4gICAgICAgICAgbWltZXR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBsb2FkRmlsZShcbiAgICAgICAgICBwZGZGaWxlLFxuICAgICAgICAgICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyxcbiAgICAgICAgICAnbWF0ZXJpYWwnXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdC5maWxlbmFtZSkudG9CZSgnZ3VpZGUucGRmJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZmlsZVR5cGUpLnRvQmUoJ2FwcGxpY2F0aW9uL3BkZicpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIERPQ1ggZmlsZSB1cGxvYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGRvY3hGaWxlID0ge1xuICAgICAgICAgIC4uLm1vY2tGaWxlLFxuICAgICAgICAgIG9yaWdpbmFsbmFtZTogJ3RlbXBsYXRlLmRvY3gnLFxuICAgICAgICAgIG1pbWV0eXBlOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBsb2FkRmlsZShcbiAgICAgICAgICBkb2N4RmlsZSxcbiAgICAgICAgICAnd29ya3NoZWV0XzEyMzQ1Njc4OScsXG4gICAgICAgICAgJ21hdGVyaWFsJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZmlsZW5hbWUpLnRvQmUoJ3RlbXBsYXRlLmRvY3gnKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5maWxlVHlwZSkudG9CZSgnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbWFnZSBmaWxlIHVwbG9hZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaW1hZ2VGaWxlID0ge1xuICAgICAgICAgIC4uLm1vY2tGaWxlLFxuICAgICAgICAgIG9yaWdpbmFsbmFtZTogJ2RpYWdyYW0ucG5nJyxcbiAgICAgICAgICBtaW1ldHlwZTogJ2ltYWdlL3BuZycsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGxvYWRGaWxlKFxuICAgICAgICAgIGltYWdlRmlsZSxcbiAgICAgICAgICAnd29ya3NoZWV0XzEyMzQ1Njc4OScsXG4gICAgICAgICAgJ21hdGVyaWFsJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZmlsZW5hbWUpLnRvQmUoJ2RpYWdyYW0ucG5nJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZmlsZVR5cGUpLnRvQmUoJ2ltYWdlL3BuZycpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnU3VibWlzc2lvbiBVcGxvYWQnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHVwbG9hZCBzdWJtaXNzaW9uIGZpbGUgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzdWJtaXNzaW9uVXBkYXRlID0ge1xuICAgICAgICAgIC4uLm1vY2tXb3Jrc2hlZXQsXG4gICAgICAgICAgc3VibWlzc2lvblVybHM6IFttb2NrVXBsb2FkUmVzdWx0LnVybF0sXG4gICAgICAgICAgc3VibWlzc2lvbk5hbWVzOiBbbW9ja0ZpbGUub3JpZ2luYWxuYW1lXSxcbiAgICAgICAgICBzdWJtaXNzaW9uU2l6ZXM6IFttb2NrRmlsZS5zaXplXSxcbiAgICAgICAgfTtcbiAgICAgICAgbW9ja1ByaXNtYVNlcnZpY2Uud29ya3NoZWV0LnVwZGF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShzdWJtaXNzaW9uVXBkYXRlKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnVwbG9hZEZpbGUoXG4gICAgICAgICAgbW9ja0ZpbGUsXG4gICAgICAgICAgJ3dvcmtzaGVldF8xMjM0NTY3ODknLFxuICAgICAgICAgICdzdWJtaXNzaW9uJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICAgIGlkOiBtb2NrVXBsb2FkUmVzdWx0LmZpbGVuYW1lLFxuICAgICAgICAgIGZpbGVuYW1lOiBtb2NrRmlsZS5vcmlnaW5hbG5hbWUsXG4gICAgICAgICAgdXJsOiBtb2NrVXBsb2FkUmVzdWx0LnVybCxcbiAgICAgICAgICBmaWxlU2l6ZTogbW9ja0ZpbGUuc2l6ZSxcbiAgICAgICAgICBmaWxlVHlwZTogbW9ja0ZpbGUubWltZXR5cGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLndvcmtzaGVldC51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogJ3dvcmtzaGVldF8xMjM0NTY3ODknIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgc3VibWlzc2lvblVybHM6IHsgcHVzaDogbW9ja1VwbG9hZFJlc3VsdC51cmwgfSxcbiAgICAgICAgICAgIHN1Ym1pc3Npb25OYW1lczogeyBwdXNoOiBtb2NrRmlsZS5vcmlnaW5hbG5hbWUgfSxcbiAgICAgICAgICAgIHN1Ym1pc3Npb25TaXplczogeyBwdXNoOiBtb2NrRmlsZS5zaXplIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgdGV4dCBmaWxlIHN1Ym1pc3Npb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0ZXh0RmlsZSA9IHtcbiAgICAgICAgICAuLi5tb2NrRmlsZSxcbiAgICAgICAgICBvcmlnaW5hbG5hbWU6ICdub3Rlcy50eHQnLFxuICAgICAgICAgIG1pbWV0eXBlOiAndGV4dC9wbGFpbicsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGxvYWRGaWxlKFxuICAgICAgICAgIHRleHRGaWxlLFxuICAgICAgICAgICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyxcbiAgICAgICAgICAnc3VibWlzc2lvbidcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0LmZpbGVuYW1lKS50b0JlKCdub3Rlcy50eHQnKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5maWxlVHlwZSkudG9CZSgndGV4dC9wbGFpbicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnSW5wdXQgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBubyBmaWxlIGlzIHVwbG9hZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgY29udHJvbGxlci51cGxvYWRGaWxlKG51bGwgYXMgYW55LCAnd29ya3NoZWV0XzEyMzQ1Njc4OScsICdtYXRlcmlhbCcpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdObyBmaWxlIHVwbG9hZGVkJykpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiB3b3Jrc2hlZXRJZCBpcyBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgY29udHJvbGxlci51cGxvYWRGaWxlKG1vY2tGaWxlLCAnJywgJ21hdGVyaWFsJylcbiAgICAgICAgKS5yZWplY3RzLnRvVGhyb3cobmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oJ1dvcmtzaGVldCBJRCBpcyByZXF1aXJlZCcpKTtcblxuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgY29udHJvbGxlci51cGxvYWRGaWxlKG1vY2tGaWxlLCBudWxsIGFzIGFueSwgJ21hdGVyaWFsJylcbiAgICAgICAgKS5yZWplY3RzLnRvVGhyb3cobmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oJ1dvcmtzaGVldCBJRCBpcyByZXF1aXJlZCcpKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gdHlwZSBpcyBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgY29udHJvbGxlci51cGxvYWRGaWxlKG1vY2tGaWxlLCAnd29ya3NoZWV0XzEyMzQ1Njc4OScsICcnIGFzIGFueSlcbiAgICAgICAgKS5yZWplY3RzLnRvVGhyb3cobmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oJ1R5cGUgbXVzdCBiZSBlaXRoZXIgXCJtYXRlcmlhbFwiIG9yIFwic3VibWlzc2lvblwiJykpO1xuXG4gICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICBjb250cm9sbGVyLnVwbG9hZEZpbGUobW9ja0ZpbGUsICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JywgbnVsbCBhcyBhbnkpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdUeXBlIG11c3QgYmUgZWl0aGVyIFwibWF0ZXJpYWxcIiBvciBcInN1Ym1pc3Npb25cIicpKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gdHlwZSBpcyBpbnZhbGlkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgY29udHJvbGxlci51cGxvYWRGaWxlKG1vY2tGaWxlLCAnd29ya3NoZWV0XzEyMzQ1Njc4OScsICdpbnZhbGlkJyBhcyBhbnkpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdUeXBlIG11c3QgYmUgZWl0aGVyIFwibWF0ZXJpYWxcIiBvciBcInN1Ym1pc3Npb25cIicpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1dvcmtzaGVldCBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciB3aGVuIHdvcmtzaGVldCBkb2VzIG5vdCBleGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja1ByaXNtYVNlcnZpY2Uud29ya3NoZWV0LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ25vbmV4aXN0ZW50LXdvcmtzaGVldCcsICdtYXRlcmlhbCcpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdXb3Jrc2hlZXQgd2l0aCBJRCBub25leGlzdGVudC13b3Jrc2hlZXQgbm90IGZvdW5kJykpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIGVycm9ycyBkdXJpbmcgd29ya3NoZWV0IGxvb2t1cCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZGJFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgbW9ja1ByaXNtYVNlcnZpY2Uud29ya3NoZWV0LmZpbmRVbmlxdWUubW9ja1JlamVjdGVkVmFsdWUoZGJFcnJvcik7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCAnbWF0ZXJpYWwnKVxuICAgICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0ZpbGUgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IGZpbGVzIHRoYXQgZmFpbCB2YWxpZGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBpbnZhbGlkVmFsaWRhdGlvbiA9IHtcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0ZpbGUgc2l6ZSBleGNlZWRzIGxpbWl0JyxcbiAgICAgICAgfTtcbiAgICAgICAgbW9ja1N1cGFiYXNlU3RvcmFnZVNlcnZpY2UudmFsaWRhdGVGaWxlLm1vY2tSZXR1cm5WYWx1ZShpbnZhbGlkVmFsaWRhdGlvbik7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCAnbWF0ZXJpYWwnKVxuICAgICAgICApLnJlamVjdHMudG9UaHJvdyhuZXcgQmFkUmVxdWVzdEV4Y2VwdGlvbignRmlsZSB2YWxpZGF0aW9uIGZhaWxlZDogRmlsZSBzaXplIGV4Y2VlZHMgbGltaXQnKSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZWplY3QgdW5zdXBwb3J0ZWQgZmlsZSB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdW5zdXBwb3J0ZWRWYWxpZGF0aW9uID0ge1xuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnVW5zdXBwb3J0ZWQgZmlsZSB0eXBlJyxcbiAgICAgICAgfTtcbiAgICAgICAgbW9ja1N1cGFiYXNlU3RvcmFnZVNlcnZpY2UudmFsaWRhdGVGaWxlLm1vY2tSZXR1cm5WYWx1ZSh1bnN1cHBvcnRlZFZhbGlkYXRpb24pO1xuXG4gICAgICAgIGNvbnN0IHVuc3VwcG9ydGVkRmlsZSA9IHtcbiAgICAgICAgICAuLi5tb2NrRmlsZSxcbiAgICAgICAgICBvcmlnaW5hbG5hbWU6ICdtYWx3YXJlLmV4ZScsXG4gICAgICAgICAgbWltZXR5cGU6ICdhcHBsaWNhdGlvbi94LWV4ZWN1dGFibGUnLFxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICBjb250cm9sbGVyLnVwbG9hZEZpbGUodW5zdXBwb3J0ZWRGaWxlLCAnd29ya3NoZWV0XzEyMzQ1Njc4OScsICdtYXRlcmlhbCcpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdGaWxlIHZhbGlkYXRpb24gZmFpbGVkOiBVbnN1cHBvcnRlZCBmaWxlIHR5cGUnKSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZWplY3QgZmlsZXMgdGhhdCBhcmUgdG9vIGxhcmdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBvdmVyc2l6ZWRWYWxpZGF0aW9uID0ge1xuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnRmlsZSBzaXplIGV4Y2VlZHMgNU1CIGxpbWl0JyxcbiAgICAgICAgfTtcbiAgICAgICAgbW9ja1N1cGFiYXNlU3RvcmFnZVNlcnZpY2UudmFsaWRhdGVGaWxlLm1vY2tSZXR1cm5WYWx1ZShvdmVyc2l6ZWRWYWxpZGF0aW9uKTtcblxuICAgICAgICBjb25zdCBsYXJnZUZpbGUgPSB7XG4gICAgICAgICAgLi4ubW9ja0ZpbGUsXG4gICAgICAgICAgc2l6ZTogMTAgKiAxMDI0ICogMTAyNCwgLy8gMTBNQlxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICBjb250cm9sbGVyLnVwbG9hZEZpbGUobGFyZ2VGaWxlLCAnd29ya3NoZWV0XzEyMzQ1Njc4OScsICdtYXRlcmlhbCcpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdGaWxlIHZhbGlkYXRpb24gZmFpbGVkOiBGaWxlIHNpemUgZXhjZWVkcyA1TUIgbGltaXQnKSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhZ2FpbnN0IGNvcnJlY3QgbWltZSB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgY29udHJvbGxlci51cGxvYWRGaWxlKG1vY2tGaWxlLCAnd29ya3NoZWV0XzEyMzQ1Njc4OScsICdtYXRlcmlhbCcpO1xuXG4gICAgICAgIGV4cGVjdChzdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLnZhbGlkYXRlRmlsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgbW9ja0ZpbGUsXG4gICAgICAgICAgNSAqIDEwMjQgKiAxMDI0LCAvLyA1TUIgbGltaXRcbiAgICAgICAgICBbXG4gICAgICAgICAgICAnYXBwbGljYXRpb24vcGRmJyxcbiAgICAgICAgICAgICdhcHBsaWNhdGlvbi9tc3dvcmQnLFxuICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50JyxcbiAgICAgICAgICAgICd0ZXh0L3BsYWluJyxcbiAgICAgICAgICAgICdpbWFnZS9qcGVnJyxcbiAgICAgICAgICAgICdpbWFnZS9wbmcnLFxuICAgICAgICAgIF1cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1N0b3JhZ2UgVXBsb2FkJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3RvcmFnZSB1cGxvYWQgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB1cGxvYWRFcnJvciA9IG5ldyBFcnJvcignU3RvcmFnZSBzZXJ2aWNlIHVuYXZhaWxhYmxlJyk7XG4gICAgICAgIG1vY2tTdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLnVwbG9hZEZpbGUubW9ja1JlamVjdGVkVmFsdWUodXBsb2FkRXJyb3IpO1xuXG4gICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICBjb250cm9sbGVyLnVwbG9hZEZpbGUobW9ja0ZpbGUsICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JywgJ21hdGVyaWFsJylcbiAgICAgICAgKS5yZWplY3RzLnRvVGhyb3coSHR0cEV4Y2VwdGlvbik7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB1cGxvYWQgdG8gY29ycmVjdCBidWNrZXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCAnbWF0ZXJpYWwnKTtcblxuICAgICAgICBleHBlY3Qoc3VwYWJhc2VTdG9yYWdlU2VydmljZS51cGxvYWRGaWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBtb2NrRmlsZSxcbiAgICAgICAgICAnd29ya3NoZWV0cydcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBzdG9yYWdlIGJ1Y2tldCBjb25maWd1cmF0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja0dldFN1cHBvcnRlZEJ1Y2tldHMubW9ja1JldHVyblZhbHVlKHt9KTtcblxuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgY29udHJvbGxlci51cGxvYWRGaWxlKG1vY2tGaWxlLCAnd29ya3NoZWV0XzEyMzQ1Njc4OScsICdtYXRlcmlhbCcpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KEh0dHBFeGNlcHRpb24pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnRGF0YWJhc2UgVXBkYXRlcycsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGFiYXNlIHVwZGF0ZSBlcnJvcnMgZm9yIG1hdGVyaWFscycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBmYWlsZWQnKTtcbiAgICAgICAgbW9ja1ByaXNtYVNlcnZpY2Uud29ya3NoZWV0LnVwZGF0ZS5tb2NrUmVqZWN0ZWRWYWx1ZSh1cGRhdGVFcnJvcik7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCAnbWF0ZXJpYWwnKVxuICAgICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSB1cGRhdGUgZXJyb3JzIGZvciBzdWJtaXNzaW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBmYWlsZWQnKTtcbiAgICAgICAgbW9ja1ByaXNtYVNlcnZpY2Uud29ya3NoZWV0LnVwZGF0ZS5tb2NrUmVqZWN0ZWRWYWx1ZSh1cGRhdGVFcnJvcik7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCAnc3VibWlzc2lvbicpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KEh0dHBFeGNlcHRpb24pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdXBkYXRlIG1hdGVyaWFsIGFycmF5cyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCAnbWF0ZXJpYWwnKTtcblxuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS53b3Jrc2hlZXQudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6ICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyB9LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIG1hdGVyaWFsVXJsczogeyBwdXNoOiBtb2NrVXBsb2FkUmVzdWx0LnVybCB9LFxuICAgICAgICAgICAgbWF0ZXJpYWxOYW1lczogeyBwdXNoOiBtb2NrRmlsZS5vcmlnaW5hbG5hbWUgfSxcbiAgICAgICAgICAgIG1hdGVyaWFsU2l6ZXM6IHsgcHVzaDogbW9ja0ZpbGUuc2l6ZSB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgdXBkYXRlIHN1Ym1pc3Npb24gYXJyYXlzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgY29udHJvbGxlci51cGxvYWRGaWxlKG1vY2tGaWxlLCAnd29ya3NoZWV0XzEyMzQ1Njc4OScsICdzdWJtaXNzaW9uJyk7XG5cbiAgICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2Uud29ya3NoZWV0LnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiAnd29ya3NoZWV0XzEyMzQ1Njc4OScgfSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzdWJtaXNzaW9uVXJsczogeyBwdXNoOiBtb2NrVXBsb2FkUmVzdWx0LnVybCB9LFxuICAgICAgICAgICAgc3VibWlzc2lvbk5hbWVzOiB7IHB1c2g6IG1vY2tGaWxlLm9yaWdpbmFsbmFtZSB9LFxuICAgICAgICAgICAgc3VibWlzc2lvblNpemVzOiB7IHB1c2g6IG1vY2tGaWxlLnNpemUgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1Jlc3BvbnNlIEZvcm1hdCcsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHByb3Blcmx5IGZvcm1hdHRlZCByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGxvYWRGaWxlKFxuICAgICAgICAgIG1vY2tGaWxlLFxuICAgICAgICAgICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyxcbiAgICAgICAgICAnbWF0ZXJpYWwnXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2lkJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdmaWxlbmFtZScpO1xuICAgICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgndXJsJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdmaWxlU2l6ZScpO1xuICAgICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnZmlsZVR5cGUnKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0LmlkKS50b0JlKG1vY2tVcGxvYWRSZXN1bHQuZmlsZW5hbWUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmZpbGVuYW1lKS50b0JlKG1vY2tGaWxlLm9yaWdpbmFsbmFtZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQudXJsKS50b0JlKG1vY2tVcGxvYWRSZXN1bHQudXJsKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5maWxlU2l6ZSkudG9CZShtb2NrRmlsZS5zaXplKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5maWxlVHlwZSkudG9CZShtb2NrRmlsZS5taW1ldHlwZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBtYWludGFpbiBmaWxlbmFtZSBpbnRlZ3JpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNwZWNpYWxGaWxlID0ge1xuICAgICAgICAgIC4uLm1vY2tGaWxlLFxuICAgICAgICAgIG9yaWdpbmFsbmFtZTogJ3NwZWNpYWwtY2hhcnMtZmlsZV9uYW1lICgxKS5wZGYnLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBsb2FkRmlsZShcbiAgICAgICAgICBzcGVjaWFsRmlsZSxcbiAgICAgICAgICAnd29ya3NoZWV0XzEyMzQ1Njc4OScsXG4gICAgICAgICAgJ21hdGVyaWFsJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZmlsZW5hbWUpLnRvQmUoJ3NwZWNpYWwtY2hhcnMtZmlsZV9uYW1lICgxKS5wZGYnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmljb2RlIGZpbGVuYW1lcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdW5pY29kZUZpbGUgPSB7XG4gICAgICAgICAgLi4ubW9ja0ZpbGUsXG4gICAgICAgICAgb3JpZ2luYWxuYW1lOiAn2YXYs9iq2YbYry3Yudix2KjZii5wZGYnLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBsb2FkRmlsZShcbiAgICAgICAgICB1bmljb2RlRmlsZSxcbiAgICAgICAgICAnd29ya3NoZWV0XzEyMzQ1Njc4OScsXG4gICAgICAgICAgJ21hdGVyaWFsJ1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZmlsZW5hbWUpLnRvQmUoJ9mF2LPYqtmG2K8t2LnYsdio2YoucGRmJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgcHJlc2VydmUgQmFkUmVxdWVzdEV4Y2VwdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZFJlcXVlc3RFcnJvciA9IG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdDdXN0b20gdmFsaWRhdGlvbiBlcnJvcicpO1xuICAgICAgICBtb2NrU3VwYWJhc2VTdG9yYWdlU2VydmljZS52YWxpZGF0ZUZpbGUubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgICB0aHJvdyBiYWRSZXF1ZXN0RXJyb3I7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICBjb250cm9sbGVyLnVwbG9hZEZpbGUobW9ja0ZpbGUsICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JywgJ21hdGVyaWFsJylcbiAgICAgICAgKS5yZWplY3RzLnRvVGhyb3coYmFkUmVxdWVzdEVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHdyYXAgb3RoZXIgZXJyb3JzIGluIEh0dHBFeGNlcHRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGdlbmVyaWNFcnJvciA9IG5ldyBFcnJvcignVW5leHBlY3RlZCBlcnJvcicpO1xuICAgICAgICBtb2NrU3VwYWJhc2VTdG9yYWdlU2VydmljZS51cGxvYWRGaWxlLm1vY2tSZWplY3RlZFZhbHVlKGdlbmVyaWNFcnJvcik7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCAnbWF0ZXJpYWwnKVxuICAgICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCAnbWF0ZXJpYWwnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKEh0dHBFeGNlcHRpb24pO1xuICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0ZhaWxlZCB0byB1cGxvYWQgZmlsZTogVW5leHBlY3RlZCBlcnJvcicpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZXJyb3JzIHdpdGhvdXQgZXJyb3IgbWVzc2FnZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3Qgbm9uRXJyb3JPYmplY3QgPSAnc3RyaW5nIGVycm9yJztcbiAgICAgICAgbW9ja1N1cGFiYXNlU3RvcmFnZVNlcnZpY2UudXBsb2FkRmlsZS5tb2NrUmVqZWN0ZWRWYWx1ZShub25FcnJvck9iamVjdCk7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCAnbWF0ZXJpYWwnKVxuICAgICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGNvbnRyb2xsZXIudXBsb2FkRmlsZShtb2NrRmlsZSwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCAnbWF0ZXJpYWwnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKEh0dHBFeGNlcHRpb24pO1xuICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0ZhaWxlZCB0byB1cGxvYWQgZmlsZTogVW5rbm93biBlcnJvcicpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdNdWx0aXBsZSBGaWxlIFR5cGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZmlsZVR5cGVzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ1BERiBkb2N1bWVudCcsXG4gICAgICAgICAgZmlsZTogeyAuLi5tb2NrRmlsZSwgb3JpZ2luYWxuYW1lOiAnZG9jdW1lbnQucGRmJywgbWltZXR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnV29yZCBkb2N1bWVudCcsXG4gICAgICAgICAgZmlsZTogeyAuLi5tb2NrRmlsZSwgb3JpZ2luYWxuYW1lOiAnZG9jdW1lbnQuZG9jeCcsIG1pbWV0eXBlOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnVGV4dCBmaWxlJyxcbiAgICAgICAgICBmaWxlOiB7IC4uLm1vY2tGaWxlLCBvcmlnaW5hbG5hbWU6ICdub3Rlcy50eHQnLCBtaW1ldHlwZTogJ3RleHQvcGxhaW4nIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnSlBFRyBpbWFnZScsXG4gICAgICAgICAgZmlsZTogeyAuLi5tb2NrRmlsZSwgb3JpZ2luYWxuYW1lOiAnaW1hZ2UuanBnJywgbWltZXR5cGU6ICdpbWFnZS9qcGVnJyB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ1BORyBpbWFnZScsXG4gICAgICAgICAgZmlsZTogeyAuLi5tb2NrRmlsZSwgb3JpZ2luYWxuYW1lOiAnZGlhZ3JhbS5wbmcnLCBtaW1ldHlwZTogJ2ltYWdlL3BuZycgfSxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGZpbGVUeXBlcy5mb3JFYWNoKCh7IG5hbWUsIGZpbGUgfSkgPT4ge1xuICAgICAgICBpdChgc2hvdWxkIGhhbmRsZSAke25hbWV9IHVwbG9hZCBjb3JyZWN0bHlgLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGxvYWRGaWxlKFxuICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyxcbiAgICAgICAgICAgICdtYXRlcmlhbCdcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5maWxlbmFtZSkudG9CZShmaWxlLm9yaWdpbmFsbmFtZSk7XG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5maWxlVHlwZSkudG9CZShmaWxlLm1pbWV0eXBlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiBTY2VuYXJpb3MnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZSB1cGxvYWQgd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBsb2FkRmlsZShcbiAgICAgICAgICBtb2NrRmlsZSxcbiAgICAgICAgICAnd29ya3NoZWV0XzEyMzQ1Njc4OScsXG4gICAgICAgICAgJ21hdGVyaWFsJ1xuICAgICAgICApO1xuXG4gICAgICAgIC8vIFZlcmlmeSB0aGUgY29tcGxldGUgZmxvd1xuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS53b3Jrc2hlZXQuZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgICBleHBlY3Qoc3VwYWJhc2VTdG9yYWdlU2VydmljZS52YWxpZGF0ZUZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgICAgZXhwZWN0KHN1cGFiYXNlU3RvcmFnZVNlcnZpY2UudXBsb2FkRmlsZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgICBleHBlY3QocHJpc21hU2VydmljZS53b3Jrc2hlZXQudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHJlc3VsdCBmb3JtYXRcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgICAgaWQ6IG1vY2tVcGxvYWRSZXN1bHQuZmlsZW5hbWUsXG4gICAgICAgICAgZmlsZW5hbWU6IG1vY2tGaWxlLm9yaWdpbmFsbmFtZSxcbiAgICAgICAgICB1cmw6IG1vY2tVcGxvYWRSZXN1bHQudXJsLFxuICAgICAgICAgIGZpbGVTaXplOiBtb2NrRmlsZS5zaXplLFxuICAgICAgICAgIGZpbGVUeXBlOiBtb2NrRmlsZS5taW1ldHlwZSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCB1cGxvYWRzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gQXJyYXkoMykuZmlsbChudWxsKS5tYXAoKCkgPT5cbiAgICAgICAgICBjb250cm9sbGVyLnVwbG9hZEZpbGUobW9ja0ZpbGUsICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JywgJ21hdGVyaWFsJylcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHRzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICAgIHJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4ge1xuICAgICAgICAgIGV4cGVjdChyZXN1bHQuZmlsZW5hbWUpLnRvQmUobW9ja0ZpbGUub3JpZ2luYWxuYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=