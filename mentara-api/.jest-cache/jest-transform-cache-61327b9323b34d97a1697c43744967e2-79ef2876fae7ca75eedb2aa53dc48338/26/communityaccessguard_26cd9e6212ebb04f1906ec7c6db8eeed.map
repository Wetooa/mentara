{"version":3,"names":["cov_7z05tfttn","actualCoverage","common_1","s","require","core_1","prisma_client_provider_1","RequireCommunityMembership","f","SetMetadata","exports","RequireRoomAccess","RequirePostingRole","RequireCommunityModerator","CommunityAccessGuard","reflector","prisma","constructor","canActivate","context","request","switchToHttp","getRequest","userId","b","user","ForbiddenException","requiresCommunityMembership","getAllAndOverride","getHandler","getClass","communityId","extractCommunityId","validateCommunityMembership","requiresRoomAccess","roomId","extractRoomId","validateRoomAccess","requiresPostingRole","validatePostingPermission","requiresCommunityModerator","validateCommunityModerator","params","body","room","findUnique","where","id","include","roomGroup","community","postId","path","includes","post","select","commentId","comment","membership","findFirst","memberships","NotFoundException","role","isCommunityModerator","moderatorCommunity","moderatorId","userRole","requiredRole","postingRole","roleHierarchy","member","moderator","admin","userRoleLevel","requiredRoleLevel","getUserCommunityRole","canModerate","__decorate","Injectable","Reflector","_a","Object","_b","PrismaService"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/guards/community-access.guard.ts"],"sourcesContent":["import {\n  Injectable,\n  CanActivate,\n  ExecutionContext,\n  ForbiddenException,\n  BadRequestException,\n  NotFoundException,\n  SetMetadata,\n} from '@nestjs/common';\nimport { Reflector } from '@nestjs/core';\nimport { PrismaService } from 'src/providers/prisma-client.provider';\n\n// Decorator for requiring community membership\nexport const RequireCommunityMembership = () =>\n  SetMetadata('require_community_membership', true);\n\n// Decorator for requiring room access (community membership + room visibility)\nexport const RequireRoomAccess = () => SetMetadata('require_room_access', true);\n\n// Decorator for requiring posting permission in room\nexport const RequirePostingRole = () =>\n  SetMetadata('require_posting_role', true);\n\n// Decorator for requiring moderator role in community context\nexport const RequireCommunityModerator = () =>\n  SetMetadata('require_community_moderator', true);\n\n@Injectable()\nexport class CommunityAccessGuard implements CanActivate {\n  constructor(\n    private reflector: Reflector,\n    private prisma: PrismaService,\n  ) {}\n\n  async canActivate(context: ExecutionContext): Promise<boolean> {\n    const request = context.switchToHttp().getRequest();\n    const userId = request.userId || request.user?.userId;\n\n    if (!userId) {\n      throw new ForbiddenException('User not authenticated');\n    }\n\n    // Check if community membership is required\n    const requiresCommunityMembership =\n      this.reflector.getAllAndOverride<boolean>(\n        'require_community_membership',\n        [context.getHandler(), context.getClass()],\n      );\n\n    if (requiresCommunityMembership) {\n      const communityId = await this.extractCommunityId(request);\n      if (communityId) {\n        await this.validateCommunityMembership(userId, communityId);\n      }\n    }\n\n    // Check if room access is required\n    const requiresRoomAccess = this.reflector.getAllAndOverride<boolean>(\n      'require_room_access',\n      [context.getHandler(), context.getClass()],\n    );\n\n    if (requiresRoomAccess) {\n      const roomId = await this.extractRoomId(request);\n      if (roomId) {\n        await this.validateRoomAccess(userId, roomId);\n      }\n    }\n\n    // Check if posting role is required\n    const requiresPostingRole = this.reflector.getAllAndOverride<boolean>(\n      'require_posting_role',\n      [context.getHandler(), context.getClass()],\n    );\n\n    if (requiresPostingRole) {\n      const roomId = await this.extractRoomId(request);\n      if (roomId) {\n        await this.validatePostingPermission(userId, roomId);\n      }\n    }\n\n    // Check if community moderator role is required\n    const requiresCommunityModerator =\n      this.reflector.getAllAndOverride<boolean>('require_community_moderator', [\n        context.getHandler(),\n        context.getClass(),\n      ]);\n\n    if (requiresCommunityModerator) {\n      const communityId = await this.extractCommunityId(request);\n      if (communityId) {\n        await this.validateCommunityModerator(userId, communityId);\n      }\n    }\n\n    return true;\n  }\n\n  private async extractCommunityId(request: any): Promise<string | null> {\n    // Direct community ID from params\n    if (request.params?.communityId) {\n      return request.params.communityId;\n    }\n\n    // Community ID from body\n    if (request.body?.communityId) {\n      return request.body.communityId;\n    }\n\n    // Extract from room ID\n    const roomId = request.params?.roomId || request.body?.roomId;\n    if (roomId) {\n      const room = await this.prisma.room.findUnique({\n        where: { id: roomId },\n        include: {\n          roomGroup: {\n            include: {\n              community: true,\n            },\n          },\n        },\n      });\n      return room?.roomGroup?.community?.id || null;\n    }\n\n    // Extract from post ID\n    const postId =\n      request.params?.id || request.params?.postId || request.body?.postId;\n    if (postId && request.path.includes('post')) {\n      const post = await this.prisma.post.findUnique({\n        where: { id: postId },\n        include: {\n          room: {\n            include: {\n              roomGroup: {\n                include: {\n                  community: true,\n                },\n              },\n            },\n          },\n        },\n      });\n      return post?.room?.roomGroup?.community?.id || null;\n    }\n\n    return null;\n  }\n\n  private async extractRoomId(request: any): Promise<string | null> {\n    // Direct room ID from params\n    if (request.params?.roomId) {\n      return request.params.roomId;\n    }\n\n    // Room ID from body\n    if (request.body?.roomId) {\n      return request.body.roomId;\n    }\n\n    // Extract from post ID\n    const postId =\n      request.params?.id || request.params?.postId || request.body?.postId;\n    if (postId && request.path.includes('post')) {\n      const post = await this.prisma.post.findUnique({\n        where: { id: postId },\n        select: { roomId: true },\n      });\n      return post?.roomId || null;\n    }\n\n    // Extract from comment ID\n    const commentId = request.params?.id || request.params?.commentId;\n    if (commentId && request.path.includes('comment')) {\n      const comment = await this.prisma.comment.findUnique({\n        where: { id: commentId },\n        include: {\n          post: {\n            select: { roomId: true },\n          },\n        },\n      });\n      return comment?.post?.roomId || null;\n    }\n\n    return null;\n  }\n\n  private async validateCommunityMembership(\n    userId: string,\n    communityId: string,\n  ): Promise<void> {\n    const membership = await this.prisma.membership.findFirst({\n      where: {\n        userId,\n        communityId,\n      },\n    });\n\n    if (!membership) {\n      throw new ForbiddenException(\n        'You must be a member of this community to access this resource',\n      );\n    }\n  }\n\n  private async validateRoomAccess(\n    userId: string,\n    roomId: string,\n  ): Promise<void> {\n    const room = await this.prisma.room.findUnique({\n      where: { id: roomId },\n      include: {\n        roomGroup: {\n          include: {\n            community: {\n              include: {\n                memberships: {\n                  where: { userId },\n                },\n              },\n            },\n          },\n        },\n      },\n    });\n\n    if (!room) {\n      throw new NotFoundException('Room not found');\n    }\n\n    const membership = room.roomGroup.community.memberships[0];\n    if (!membership) {\n      throw new ForbiddenException(\n        'You must be a member of this community to access this room',\n      );\n    }\n\n    // Additional room-level access checks can be added here if needed\n    // For now, community membership grants access to all rooms within the community\n  }\n\n  private async validatePostingPermission(\n    userId: string,\n    roomId: string,\n  ): Promise<void> {\n    const room = await this.prisma.room.findUnique({\n      where: { id: roomId },\n      include: {\n        roomGroup: {\n          include: {\n            community: {\n              include: {\n                memberships: {\n                  where: { userId },\n                },\n              },\n            },\n          },\n        },\n      },\n    });\n\n    if (!room) {\n      throw new NotFoundException('Room not found');\n    }\n\n    const membership = room.roomGroup.community.memberships[0];\n    if (!membership) {\n      throw new ForbiddenException(\n        'You must be a member of this community to post',\n      );\n    }\n\n    // Check room posting role requirements\n    // Get user's global role and check if they're a community moderator\n    const user = await this.prisma.user.findUnique({\n      where: { id: userId },\n      select: { role: true },\n    });\n\n    const isCommunityModerator = await this.prisma.moderatorCommunity.findFirst({\n      where: {\n        moderatorId: userId,\n        communityId: room.roomGroup.community.id,\n      },\n    });\n\n    // Determine effective user role in this community\n    let userRole = 'member'; // Default role for community members\n    if (user?.role === 'admin') {\n      userRole = 'admin';\n    } else if (isCommunityModerator || user?.role === 'moderator') {\n      userRole = 'moderator';\n    }\n\n    const requiredRole = room.postingRole;\n\n    // Define role hierarchy\n    const roleHierarchy = {\n      member: 0,\n      moderator: 1,\n      admin: 2,\n    };\n\n    const userRoleLevel =\n      roleHierarchy[userRole as keyof typeof roleHierarchy] ?? -1;\n    const requiredRoleLevel =\n      roleHierarchy[requiredRole as keyof typeof roleHierarchy] ?? 0;\n\n    if (userRoleLevel < requiredRoleLevel) {\n      throw new ForbiddenException(\n        `You need ${requiredRole} role or higher to post in this room`,\n      );\n    }\n  }\n\n  private async validateCommunityModerator(\n    userId: string,\n    communityId: string,\n  ): Promise<void> {\n    // Check if user is a global admin\n    const user = await this.prisma.user.findUnique({\n      where: { id: userId },\n      select: { role: true },\n    });\n\n    if (user?.role === 'admin') {\n      return; // Global admins have access to all communities\n    }\n\n    // Check if user is assigned as a moderator for this specific community\n    const moderatorCommunity = await this.prisma.moderatorCommunity.findFirst({\n      where: {\n        moderatorId: userId,\n        communityId,\n      },\n    });\n\n    if (!moderatorCommunity) {\n      throw new ForbiddenException(\n        'You must be a moderator or admin of this community',\n      );\n    }\n  }\n\n  // Helper method to get user's role in a community\n  async getUserCommunityRole(\n    userId: string,\n    communityId: string,\n  ): Promise<string | null> {\n    // Check if user is a member of the community\n    const membership = await this.prisma.membership.findFirst({\n      where: {\n        userId,\n        communityId,\n      },\n    });\n\n    if (!membership) {\n      return null; // User is not a member\n    }\n\n    // Get user's global role\n    const user = await this.prisma.user.findUnique({\n      where: { id: userId },\n      select: { role: true },\n    });\n\n    // Check if user is assigned as a moderator for this specific community\n    const moderatorCommunity = await this.prisma.moderatorCommunity.findFirst({\n      where: {\n        moderatorId: userId,\n        communityId,\n      },\n    });\n\n    // Determine effective role in this community\n    if (user?.role === 'admin') {\n      return 'admin';\n    } else if (moderatorCommunity || user?.role === 'moderator') {\n      return 'moderator';\n    } else {\n      return 'member'; // Default role for community members\n    }\n  }\n\n  // Helper method to check if user can perform moderation actions\n  async canModerate(userId: string, communityId: string): Promise<boolean> {\n    try {\n      await this.validateCommunityModerator(userId, communityId);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}