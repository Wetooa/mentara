{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/notifications/notifications.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/notifications/notifications.controller.spec.ts"],"sourcesContent":["/**\n * Comprehensive Test Suite for NotificationsController\n * Tests notification management, settings, and specialized notification creation\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { BadRequestException, NotFoundException, HttpException, HttpStatus } from '@nestjs/common';\nimport { NotificationsController } from './notifications.controller';\nimport { NotificationsService } from './notifications.service';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { ZodValidationPipe } from '../common/pipes/zod-validation.pipe';\nimport { NotificationType, NotificationPriority } from '@prisma/client';\nimport { SecurityGuardTestUtils, RoleBasedTestUtils } from '../test-utils/auth-testing-helpers';\nimport { MockBuilder, TestDataGenerator, TestAssertions } from '../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../test-utils/index';\n\ndescribe('NotificationsController', () => {\n  let controller: NotificationsController;\n  let notificationsService: NotificationsService;\n  let module: TestingModule;\n\n  // Mock NotificationsService\n  const mockNotificationsService = {\n    create: jest.fn(),\n    findAll: jest.fn(),\n    findOne: jest.fn(),\n    getUnreadCount: jest.fn(),\n    getNotificationSettings: jest.fn(),\n    updateNotificationSettings: jest.fn(),\n    markAsRead: jest.fn(),\n    markAllAsRead: jest.fn(),\n    delete: jest.fn(),\n    createAppointmentReminder: jest.fn(),\n    createMessageNotification: jest.fn(),\n    createWorksheetAssignedNotification: jest.fn(),\n    createTherapistApplicationNotification: jest.fn(),\n    createReviewRequestNotification: jest.fn(),\n    createCommunityPostNotification: jest.fn(),\n  };\n\n  // Mock JwtAuthGuard\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test data\n  const mockNotification = {\n    id: 'notification_123456789',\n    title: 'Test Notification',\n    message: 'This is a test notification',\n    type: NotificationType.APPOINTMENT_REMINDER,\n    priority: NotificationPriority.MEDIUM,\n    userId: TEST_USER_IDS.CLIENT,\n    isRead: false,\n    data: { appointmentId: 'appointment_123' },\n    actionUrl: '/appointments/appointment_123',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    scheduledFor: null,\n    sentAt: null,\n  };\n\n  const mockNotificationsList = [\n    mockNotification,\n    {\n      ...mockNotification,\n      id: 'notification_987654321',\n      title: 'Another Notification',\n      type: NotificationType.MESSAGE,\n      isRead: true,\n    },\n  ];\n\n  const mockNotificationSettings = {\n    id: 'settings_123456789',\n    userId: TEST_USER_IDS.CLIENT,\n    emailAppointmentReminders: true,\n    emailNewMessages: true,\n    emailWorksheetUpdates: true,\n    emailSystemUpdates: false,\n    emailMarketing: false,\n    pushAppointmentReminders: true,\n    pushNewMessages: true,\n    pushWorksheetUpdates: true,\n    pushSystemUpdates: true,\n    inAppMessages: true,\n    inAppUpdates: true,\n    quietHoursEnabled: false,\n    quietHoursStart: null,\n    quietHoursEnd: null,\n    quietHoursTimezone: 'UTC',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [NotificationsController],\n      providers: [\n        {\n          provide: NotificationsService,\n          useValue: mockNotificationsService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .compile();\n\n    controller = module.get<NotificationsController>(NotificationsController);\n    notificationsService = module.get<NotificationsService>(NotificationsService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have notificationsService injected', () => {\n      expect(notificationsService).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', NotificationsController);\n      expect(guards).toContain(JwtAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', NotificationsController);\n      expect(controllerMetadata).toBe('notifications');\n    });\n  });\n\n  describe('POST /notifications', () => {\n    const createNotificationDto = {\n      title: 'Test Notification',\n      message: 'This is a test notification',\n      type: NotificationType.APPOINTMENT_REMINDER,\n      priority: NotificationPriority.HIGH,\n      data: { key: 'value' },\n      actionUrl: '/test',\n      scheduledFor: '2024-02-15T10:00:00Z',\n    };\n\n    it('should create notification successfully', async () => {\n      mockNotificationsService.create.mockResolvedValue(mockNotification);\n\n      const result = await controller.create(createNotificationDto, TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(mockNotification);\n      expect(notificationsService.create).toHaveBeenCalledWith({\n        ...createNotificationDto,\n        userId: TEST_USER_IDS.CLIENT,\n        scheduledFor: new Date('2024-02-15T10:00:00Z'),\n      });\n    });\n\n    it('should create notification without optional fields', async () => {\n      const minimalDto = {\n        title: 'Minimal Notification',\n        message: 'Minimal message',\n        type: NotificationType.SYSTEM,\n      };\n      mockNotificationsService.create.mockResolvedValue(mockNotification);\n\n      const result = await controller.create(minimalDto, TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(mockNotification);\n      expect(notificationsService.create).toHaveBeenCalledWith({\n        ...minimalDto,\n        userId: TEST_USER_IDS.CLIENT,\n        scheduledFor: undefined,\n      });\n    });\n\n    it('should handle invalid scheduledFor date', async () => {\n      const invalidDto = {\n        ...createNotificationDto,\n        scheduledFor: 'invalid-date',\n      };\n\n      await expect(controller.create(invalidDto, TEST_USER_IDS.CLIENT)).rejects.toThrow();\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database error');\n      mockNotificationsService.create.mockRejectedValue(serviceError);\n\n      await expect(controller.create(createNotificationDto, TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);\n    });\n\n    it('should handle all notification types', async () => {\n      const notificationTypes = Object.values(NotificationType);\n      \n      for (const type of notificationTypes) {\n        const dto = { ...createNotificationDto, type };\n        mockNotificationsService.create.mockResolvedValue({ ...mockNotification, type });\n\n        const result = await controller.create(dto, TEST_USER_IDS.CLIENT);\n\n        expect(result.type).toBe(type);\n      }\n    });\n\n    it('should handle all priority levels', async () => {\n      const priorityLevels = Object.values(NotificationPriority);\n      \n      for (const priority of priorityLevels) {\n        const dto = { ...createNotificationDto, priority };\n        mockNotificationsService.create.mockResolvedValue({ ...mockNotification, priority });\n\n        const result = await controller.create(dto, TEST_USER_IDS.CLIENT);\n\n        expect(result.priority).toBe(priority);\n      }\n    });\n  });\n\n  describe('GET /notifications', () => {\n    const mockQuery = {\n      isRead: false,\n      type: NotificationType.APPOINTMENT_REMINDER,\n      priority: NotificationPriority.HIGH,\n    };\n\n    it('should get all notifications with filters', async () => {\n      mockNotificationsService.findAll.mockResolvedValue(mockNotificationsList);\n\n      const result = await controller.findAll(TEST_USER_IDS.CLIENT, mockQuery);\n\n      expect(result).toEqual(mockNotificationsList);\n      expect(notificationsService.findAll).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        mockQuery.isRead,\n        mockQuery.type,\n        mockQuery.priority,\n      );\n    });\n\n    it('should get all notifications without filters', async () => {\n      const emptyQuery = {};\n      mockNotificationsService.findAll.mockResolvedValue(mockNotificationsList);\n\n      const result = await controller.findAll(TEST_USER_IDS.CLIENT, emptyQuery);\n\n      expect(result).toEqual(mockNotificationsList);\n      expect(notificationsService.findAll).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        undefined,\n        undefined,\n        undefined,\n      );\n    });\n\n    it('should handle empty results', async () => {\n      mockNotificationsService.findAll.mockResolvedValue([]);\n\n      const result = await controller.findAll(TEST_USER_IDS.CLIENT, mockQuery);\n\n      expect(result).toEqual([]);\n      expect(result).toHaveLength(0);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database connection failed');\n      mockNotificationsService.findAll.mockRejectedValue(serviceError);\n\n      await expect(controller.findAll(TEST_USER_IDS.CLIENT, mockQuery)).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /notifications/unread-count', () => {\n    it('should get unread count successfully', async () => {\n      const unreadCount = { count: 5 };\n      mockNotificationsService.getUnreadCount.mockResolvedValue(unreadCount);\n\n      const result = await controller.getUnreadCount(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(unreadCount);\n      expect(notificationsService.getUnreadCount).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should handle zero unread count', async () => {\n      const unreadCount = { count: 0 };\n      mockNotificationsService.getUnreadCount.mockResolvedValue(unreadCount);\n\n      const result = await controller.getUnreadCount(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(unreadCount);\n      expect(result.count).toBe(0);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database error');\n      mockNotificationsService.getUnreadCount.mockRejectedValue(serviceError);\n\n      await expect(controller.getUnreadCount(TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /notifications/settings', () => {\n    it('should get notification settings successfully', async () => {\n      mockNotificationsService.getNotificationSettings.mockResolvedValue(mockNotificationSettings);\n\n      const result = await controller.getNotificationSettings(TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(mockNotificationSettings);\n      expect(notificationsService.getNotificationSettings).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should handle user with no settings', async () => {\n      mockNotificationsService.getNotificationSettings.mockResolvedValue(null);\n\n      const result = await controller.getNotificationSettings(TEST_USER_IDS.CLIENT);\n\n      expect(result).toBeNull();\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database error');\n      mockNotificationsService.getNotificationSettings.mockRejectedValue(serviceError);\n\n      await expect(controller.getNotificationSettings(TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('PATCH /notifications/settings', () => {\n    const settingsUpdateDto = {\n      emailAppointmentReminders: false,\n      emailNewMessages: true,\n      pushAppointmentReminders: true,\n      inAppMessages: false,\n      quietHoursEnabled: true,\n      quietHoursStart: '22:00',\n      quietHoursEnd: '08:00',\n      quietHoursTimezone: 'America/New_York',\n    };\n\n    it('should update notification settings successfully', async () => {\n      const updatedSettings = { ...mockNotificationSettings, ...settingsUpdateDto };\n      mockNotificationsService.updateNotificationSettings.mockResolvedValue(updatedSettings);\n\n      const result = await controller.updateNotificationSettings(settingsUpdateDto, TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(updatedSettings);\n      expect(notificationsService.updateNotificationSettings).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        settingsUpdateDto,\n      );\n    });\n\n    it('should update partial settings', async () => {\n      const partialDto = { emailAppointmentReminders: false };\n      const updatedSettings = { ...mockNotificationSettings, ...partialDto };\n      mockNotificationsService.updateNotificationSettings.mockResolvedValue(updatedSettings);\n\n      const result = await controller.updateNotificationSettings(partialDto, TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(updatedSettings);\n      expect(notificationsService.updateNotificationSettings).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        partialDto,\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Settings update failed');\n      mockNotificationsService.updateNotificationSettings.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.updateNotificationSettings(settingsUpdateDto, TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /notifications/:id', () => {\n    const notificationId = 'notification_123456789';\n\n    it('should get notification by id successfully', async () => {\n      mockNotificationsService.findOne.mockResolvedValue(mockNotification);\n\n      const result = await controller.findOne(notificationId);\n\n      expect(result).toEqual(mockNotification);\n      expect(notificationsService.findOne).toHaveBeenCalledWith(notificationId);\n    });\n\n    it('should handle notification not found', async () => {\n      mockNotificationsService.findOne.mockResolvedValue(null);\n\n      const result = await controller.findOne('non-existent-id');\n\n      expect(result).toBeNull();\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database error');\n      mockNotificationsService.findOne.mockRejectedValue(serviceError);\n\n      await expect(controller.findOne(notificationId)).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('PATCH /notifications/:id/read', () => {\n    const notificationId = 'notification_123456789';\n\n    it('should mark notification as read successfully', async () => {\n      const readNotification = { ...mockNotification, isRead: true };\n      mockNotificationsService.markAsRead.mockResolvedValue(readNotification);\n\n      const result = await controller.markAsRead(notificationId);\n\n      expect(result).toEqual(readNotification);\n      expect(notificationsService.markAsRead).toHaveBeenCalledWith(notificationId);\n    });\n\n    it('should handle notification not found', async () => {\n      const notFoundError = new NotFoundException('Notification not found');\n      mockNotificationsService.markAsRead.mockRejectedValue(notFoundError);\n\n      await expect(controller.markAsRead('non-existent-id')).rejects.toThrow(notFoundError);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database error');\n      mockNotificationsService.markAsRead.mockRejectedValue(serviceError);\n\n      await expect(controller.markAsRead(notificationId)).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('PATCH /notifications/mark-all-read', () => {\n    it('should mark all notifications as read successfully', async () => {\n      const result = { count: 5 };\n      mockNotificationsService.markAllAsRead.mockResolvedValue(result);\n\n      const response = await controller.markAllAsRead(TEST_USER_IDS.CLIENT);\n\n      expect(response).toEqual(result);\n      expect(notificationsService.markAllAsRead).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should handle no notifications to mark', async () => {\n      const result = { count: 0 };\n      mockNotificationsService.markAllAsRead.mockResolvedValue(result);\n\n      const response = await controller.markAllAsRead(TEST_USER_IDS.CLIENT);\n\n      expect(response).toEqual(result);\n      expect(response.count).toBe(0);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database error');\n      mockNotificationsService.markAllAsRead.mockRejectedValue(serviceError);\n\n      await expect(controller.markAllAsRead(TEST_USER_IDS.CLIENT)).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('DELETE /notifications/:id', () => {\n    const notificationId = 'notification_123456789';\n\n    it('should delete notification successfully', async () => {\n      mockNotificationsService.delete.mockResolvedValue(mockNotification);\n\n      const result = await controller.remove(notificationId);\n\n      expect(result).toEqual(mockNotification);\n      expect(notificationsService.delete).toHaveBeenCalledWith(notificationId);\n    });\n\n    it('should handle notification not found', async () => {\n      const notFoundError = new NotFoundException('Notification not found');\n      mockNotificationsService.delete.mockRejectedValue(notFoundError);\n\n      await expect(controller.remove('non-existent-id')).rejects.toThrow(notFoundError);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database error');\n      mockNotificationsService.delete.mockRejectedValue(serviceError);\n\n      await expect(controller.remove(notificationId)).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('POST /notifications/appointment-reminder', () => {\n    const appointmentReminderDto = {\n      appointmentId: 'appointment_123456789',\n      appointmentTime: '2024-02-15T10:00:00Z',\n      therapistName: 'Dr. Sarah Smith',\n    };\n\n    it('should create appointment reminder successfully', async () => {\n      const reminderNotification = {\n        ...mockNotification,\n        type: NotificationType.APPOINTMENT_REMINDER,\n        data: { appointmentId: appointmentReminderDto.appointmentId },\n      };\n      mockNotificationsService.createAppointmentReminder.mockResolvedValue(reminderNotification);\n\n      const result = await controller.createAppointmentReminder(appointmentReminderDto, TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(reminderNotification);\n      expect(notificationsService.createAppointmentReminder).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        appointmentReminderDto.appointmentId,\n        new Date(appointmentReminderDto.appointmentTime),\n        appointmentReminderDto.therapistName,\n      );\n    });\n\n    it('should handle invalid appointment time', async () => {\n      const invalidDto = { ...appointmentReminderDto, appointmentTime: 'invalid-date' };\n\n      await expect(\n        controller.createAppointmentReminder(invalidDto, TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow();\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Failed to create reminder');\n      mockNotificationsService.createAppointmentReminder.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.createAppointmentReminder(appointmentReminderDto, TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('POST /notifications/message-notification', () => {\n    const messageNotificationDto = {\n      senderId: TEST_USER_IDS.THERAPIST,\n      senderName: 'Dr. John Doe',\n      conversationId: 'conversation_123456789',\n    };\n\n    it('should create message notification successfully', async () => {\n      const messageNotification = {\n        ...mockNotification,\n        type: NotificationType.MESSAGE,\n        data: { conversationId: messageNotificationDto.conversationId },\n      };\n      mockNotificationsService.createMessageNotification.mockResolvedValue(messageNotification);\n\n      const result = await controller.createMessageNotification(messageNotificationDto, TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(messageNotification);\n      expect(notificationsService.createMessageNotification).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        messageNotificationDto.senderId,\n        messageNotificationDto.senderName,\n        messageNotificationDto.conversationId,\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Failed to create message notification');\n      mockNotificationsService.createMessageNotification.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.createMessageNotification(messageNotificationDto, TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('POST /notifications/worksheet-assigned', () => {\n    const worksheetNotificationDto = {\n      worksheetId: 'worksheet_123456789',\n      worksheetTitle: 'Anxiety Management Worksheet',\n      therapistName: 'Dr. Sarah Smith',\n    };\n\n    it('should create worksheet assigned notification successfully', async () => {\n      const worksheetNotification = {\n        ...mockNotification,\n        type: NotificationType.WORKSHEET_ASSIGNED,\n        data: { worksheetId: worksheetNotificationDto.worksheetId },\n      };\n      mockNotificationsService.createWorksheetAssignedNotification.mockResolvedValue(worksheetNotification);\n\n      const result = await controller.createWorksheetAssignedNotification(\n        worksheetNotificationDto,\n        TEST_USER_IDS.CLIENT\n      );\n\n      expect(result).toEqual(worksheetNotification);\n      expect(notificationsService.createWorksheetAssignedNotification).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        worksheetNotificationDto.worksheetId,\n        worksheetNotificationDto.worksheetTitle,\n        worksheetNotificationDto.therapistName,\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Failed to create worksheet notification');\n      mockNotificationsService.createWorksheetAssignedNotification.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.createWorksheetAssignedNotification(worksheetNotificationDto, TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('POST /notifications/therapist-application', () => {\n    it('should create therapist application approved notification', async () => {\n      const approvedDto = { status: 'approved' as const };\n      const applicationNotification = {\n        ...mockNotification,\n        type: NotificationType.THERAPIST_APPLICATION,\n        title: 'Application Approved',\n      };\n      mockNotificationsService.createTherapistApplicationNotification.mockResolvedValue(applicationNotification);\n\n      const result = await controller.createTherapistApplicationNotification(approvedDto, TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual(applicationNotification);\n      expect(notificationsService.createTherapistApplicationNotification).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        'approved',\n      );\n    });\n\n    it('should create therapist application rejected notification', async () => {\n      const rejectedDto = { status: 'rejected' as const };\n      const applicationNotification = {\n        ...mockNotification,\n        type: NotificationType.THERAPIST_APPLICATION,\n        title: 'Application Rejected',\n      };\n      mockNotificationsService.createTherapistApplicationNotification.mockResolvedValue(applicationNotification);\n\n      const result = await controller.createTherapistApplicationNotification(rejectedDto, TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual(applicationNotification);\n      expect(notificationsService.createTherapistApplicationNotification).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        'rejected',\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Failed to create application notification');\n      mockNotificationsService.createTherapistApplicationNotification.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.createTherapistApplicationNotification({ status: 'approved' }, TEST_USER_IDS.THERAPIST)\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('POST /notifications/review-request', () => {\n    const reviewRequestDto = {\n      therapistId: TEST_USER_IDS.THERAPIST,\n      therapistName: 'Dr. John Doe',\n      sessionId: 'session_123456789',\n    };\n\n    it('should create review request notification successfully', async () => {\n      const reviewNotification = {\n        ...mockNotification,\n        type: NotificationType.REVIEW_REQUEST,\n        data: { sessionId: reviewRequestDto.sessionId },\n      };\n      mockNotificationsService.createReviewRequestNotification.mockResolvedValue(reviewNotification);\n\n      const result = await controller.createReviewRequestNotification(reviewRequestDto, TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(reviewNotification);\n      expect(notificationsService.createReviewRequestNotification).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        reviewRequestDto.therapistId,\n        reviewRequestDto.therapistName,\n        reviewRequestDto.sessionId,\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Failed to create review request');\n      mockNotificationsService.createReviewRequestNotification.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.createReviewRequestNotification(reviewRequestDto, TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('POST /notifications/community-post', () => {\n    const communityPostDto = {\n      postId: 'post_123456789',\n      communityName: 'Anxiety Support',\n      authorName: 'Anonymous User',\n    };\n\n    it('should create community post notification successfully', async () => {\n      const communityNotification = {\n        ...mockNotification,\n        type: NotificationType.COMMUNITY_POST,\n        data: { postId: communityPostDto.postId },\n      };\n      mockNotificationsService.createCommunityPostNotification.mockResolvedValue(communityNotification);\n\n      const result = await controller.createCommunityPostNotification(communityPostDto, TEST_USER_IDS.CLIENT);\n\n      expect(result).toEqual(communityNotification);\n      expect(notificationsService.createCommunityPostNotification).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        communityPostDto.postId,\n        communityPostDto.communityName,\n        communityPostDto.authorName,\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Failed to create community post notification');\n      mockNotificationsService.createCommunityPostNotification.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.createCommunityPostNotification(communityPostDto, TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle service unavailable scenarios', async () => {\n      const serviceError = new Error('Service temporarily unavailable');\n      mockNotificationsService.findAll.mockRejectedValue(serviceError);\n\n      await expect(controller.findAll(TEST_USER_IDS.CLIENT, {})).rejects.toThrow(serviceError);\n    });\n\n    it('should handle database connection errors', async () => {\n      const dbError = new Error('Database connection failed');\n      mockNotificationsService.getUnreadCount.mockRejectedValue(dbError);\n\n      await expect(controller.getUnreadCount(TEST_USER_IDS.CLIENT)).rejects.toThrow(dbError);\n    });\n\n    it('should handle validation errors', async () => {\n      const validationError = new BadRequestException('Invalid notification data');\n      mockNotificationsService.create.mockRejectedValue(validationError);\n\n      await expect(\n        controller.create(\n          {\n            title: '',\n            message: '',\n            type: NotificationType.SYSTEM,\n          },\n          TEST_USER_IDS.CLIENT\n        )\n      ).rejects.toThrow(validationError);\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted notification response', async () => {\n      mockNotificationsService.findOne.mockResolvedValue(mockNotification);\n\n      const result = await controller.findOne('notification_123');\n\n      TestAssertions.expectValidEntity(result, ['id', 'title', 'message', 'type', 'userId']);\n      expect(result.id).toBe(mockNotification.id);\n      expect(result.type).toBe(NotificationType.APPOINTMENT_REMINDER);\n      expect(result.priority).toBe(NotificationPriority.MEDIUM);\n      expect(typeof result.isRead).toBe('boolean');\n    });\n\n    it('should return properly formatted notifications list response', async () => {\n      mockNotificationsService.findAll.mockResolvedValue(mockNotificationsList);\n\n      const result = await controller.findAll(TEST_USER_IDS.CLIENT, {});\n\n      expect(Array.isArray(result)).toBe(true);\n      expect(result).toHaveLength(2);\n      result.forEach((notification) => {\n        TestAssertions.expectValidEntity(notification, ['id', 'title', 'message', 'type', 'userId']);\n        expect(typeof notification.isRead).toBe('boolean');\n      });\n    });\n\n    it('should return properly formatted settings response', async () => {\n      mockNotificationsService.getNotificationSettings.mockResolvedValue(mockNotificationSettings);\n\n      const result = await controller.getNotificationSettings(TEST_USER_IDS.CLIENT);\n\n      TestAssertions.expectValidEntity(result, ['id', 'userId']);\n      expect(typeof result.emailAppointmentReminders).toBe('boolean');\n      expect(typeof result.pushNewMessages).toBe('boolean');\n      expect(typeof result.inAppMessages).toBe('boolean');\n      expect(typeof result.quietHoursEnabled).toBe('boolean');\n    });\n\n    it('should return properly formatted unread count response', async () => {\n      const unreadCount = { count: 3 };\n      mockNotificationsService.getUnreadCount.mockResolvedValue(unreadCount);\n\n      const result = await controller.getUnreadCount(TEST_USER_IDS.CLIENT);\n\n      expect(result).toHaveProperty('count');\n      expect(typeof result.count).toBe('number');\n      expect(result.count).toBeGreaterThanOrEqual(0);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete notification workflow', async () => {\n      // Create notification\n      mockNotificationsService.create.mockResolvedValue(mockNotification);\n      const createResult = await controller.create(\n        {\n          title: 'Test Notification',\n          message: 'Test message',\n          type: NotificationType.SYSTEM,\n        },\n        TEST_USER_IDS.CLIENT\n      );\n      expect(createResult).toBeDefined();\n\n      // Get notification\n      mockNotificationsService.findOne.mockResolvedValue(createResult);\n      const getResult = await controller.findOne(createResult.id);\n      expect(getResult).toEqual(createResult);\n\n      // Mark as read\n      const readNotification = { ...createResult, isRead: true };\n      mockNotificationsService.markAsRead.mockResolvedValue(readNotification);\n      const markReadResult = await controller.markAsRead(createResult.id);\n      expect(markReadResult.isRead).toBe(true);\n\n      // Delete notification\n      mockNotificationsService.delete.mockResolvedValue(readNotification);\n      const deleteResult = await controller.remove(createResult.id);\n      expect(deleteResult).toEqual(readNotification);\n    });\n\n    it('should handle settings management workflow', async () => {\n      // Get current settings\n      mockNotificationsService.getNotificationSettings.mockResolvedValue(mockNotificationSettings);\n      const currentSettings = await controller.getNotificationSettings(TEST_USER_IDS.CLIENT);\n      expect(currentSettings).toBeDefined();\n\n      // Update settings\n      const updateData = { emailAppointmentReminders: false, pushNewMessages: true };\n      const updatedSettings = { ...currentSettings, ...updateData };\n      mockNotificationsService.updateNotificationSettings.mockResolvedValue(updatedSettings);\n      const updateResult = await controller.updateNotificationSettings(updateData, TEST_USER_IDS.CLIENT);\n      expect(updateResult.emailAppointmentReminders).toBe(false);\n      expect(updateResult.pushNewMessages).toBe(true);\n    });\n  });\n});"],"version":3}