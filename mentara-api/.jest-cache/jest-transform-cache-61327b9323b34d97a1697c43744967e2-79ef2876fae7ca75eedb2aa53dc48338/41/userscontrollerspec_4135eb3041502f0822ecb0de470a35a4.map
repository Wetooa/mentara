{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/users/users.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/users/users.controller.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { \n  HttpException, \n  HttpStatus, \n  ForbiddenException, \n  Logger \n} from '@nestjs/common';\nimport { UsersController } from './users.controller';\nimport { UsersService } from './users.service';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { AdminAuthGuard } from '../auth/guards/admin-auth.guard';\nimport { SupabaseStorageService } from '../common/services/supabase-storage.service';\nimport { RoleUtils } from '../utils/role-utils';\nimport { ZodValidationPipe } from '../common/pipes/zod-validation.pipe';\nimport {\n  SecurityGuardTestUtils,\n  RoleBasedTestUtils,\n} from '../test-utils/auth-testing-helpers';\nimport {\n  MockBuilder,\n  TestDataGenerator,\n  TestAssertions,\n} from '../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../test-utils/index';\n\ndescribe('UsersController', () => {\n  let controller: UsersController;\n  let usersService: UsersService;\n  let supabaseStorageService: SupabaseStorageService;\n  let roleUtils: RoleUtils;\n  let mockJwtAuthGuard: jest.Mocked<JwtAuthGuard>;\n  let mockAdminAuthGuard: jest.Mocked<AdminAuthGuard>;\n\n  // Test data constants\n  const mockUser = {\n    id: TEST_USER_IDS.CLIENT,\n    email: TEST_EMAILS.CLIENT,\n    firstName: 'John',\n    lastName: 'Doe',\n    role: 'client',\n    bio: 'User bio',\n    avatarUrl: 'https://example.com/avatar.jpg',\n    coverImageUrl: 'https://example.com/cover.jpg',\n    phoneNumber: '+1234567890',\n    timezone: 'America/New_York',\n    language: 'en',\n    theme: 'light',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    emailVerified: true,\n    profileComplete: true,\n    isActive: true,\n  };\n\n  const mockAdminUser = {\n    id: TEST_USER_IDS.ADMIN,\n    email: TEST_EMAILS.ADMIN,\n    firstName: 'Admin',\n    lastName: 'User',\n    role: 'admin',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    emailVerified: true,\n    profileComplete: true,\n    isActive: true,\n  };\n\n  const mockUsers = [mockUser, mockAdminUser];\n\n  const mockFile = {\n    fieldname: 'avatar',\n    originalname: 'avatar.jpg',\n    encoding: '7bit',\n    mimetype: 'image/jpeg',\n    size: 1024,\n    buffer: Buffer.from('test file content'),\n  } as Express.Multer.File;\n\n  const mockUploadResult = {\n    url: 'https://example.com/uploaded-avatar.jpg',\n    filename: 'avatar.jpg',\n    size: 1024,\n  };\n\n  beforeEach(async () => {\n    // Create mock services\n    const mockUsersService = {\n      findAll: jest.fn(),\n      findAllIncludeInactive: jest.fn(),\n      findOne: jest.fn(),\n      findOneIncludeInactive: jest.fn(),\n      update: jest.fn(),\n      remove: jest.fn(),\n      deactivate: jest.fn(),\n      reactivate: jest.fn(),\n    };\n\n    const mockSupabaseStorageService = {\n      validateFile: jest.fn(),\n      uploadFile: jest.fn(),\n      getSupportedBuckets: jest.fn(),\n    };\n\n    const mockRoleUtils = {\n      isUserAdmin: jest.fn(),\n    };\n\n    mockJwtAuthGuard = {\n      canActivate: jest.fn().mockReturnValue(true),\n    } as any;\n\n    mockAdminAuthGuard = {\n      canActivate: jest.fn().mockReturnValue(true),\n    } as any;\n\n    // Add static method mock\n    SupabaseStorageService.getSupportedBuckets = jest.fn().mockReturnValue({\n      USER_PROFILES: 'user-profiles',\n    });\n\n    const module: TestingModule = await Test.createTestingModule({\n      controllers: [UsersController],\n      providers: [\n        {\n          provide: UsersService,\n          useValue: mockUsersService,\n        },\n        {\n          provide: SupabaseStorageService,\n          useValue: mockSupabaseStorageService,\n        },\n        {\n          provide: RoleUtils,\n          useValue: mockRoleUtils,\n        },\n        {\n          provide: Logger,\n          useValue: {\n            log: jest.fn(),\n            error: jest.fn(),\n            warn: jest.fn(),\n            debug: jest.fn(),\n          },\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .overrideGuard(AdminAuthGuard)\n      .useValue(mockAdminAuthGuard)\n      .compile();\n\n    controller = module.get<UsersController>(UsersController);\n    usersService = module.get<UsersService>(UsersService);\n    supabaseStorageService = module.get<SupabaseStorageService>(SupabaseStorageService);\n    roleUtils = module.get<RoleUtils>(RoleUtils);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('findAll', () => {\n    it('should return all users for admin', async () => {\n      // Arrange\n      jest.spyOn(usersService, 'findAll').mockResolvedValue(mockUsers);\n\n      // Act\n      const result = await controller.findAll(TEST_USER_IDS.ADMIN);\n\n      // Assert\n      expect(usersService.findAll).toHaveBeenCalled();\n      expect(result).toEqual(mockUsers);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(usersService, 'findAll').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.findAll(TEST_USER_IDS.ADMIN)).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('findAllIncludeInactive', () => {\n    it('should return all users including inactive for admin', async () => {\n      const mockUsers = [\n        TestDataGenerator.createUser({ isActive: true }),\n        TestDataGenerator.createUser({ isActive: false }),\n      ];\n\n      usersService.findAllIncludeInactive.mockResolvedValue(mockUsers as any);\n\n      const result = await controller.findAllIncludeInactive(\n        TEST_USER_IDS.ADMIN,\n      );\n\n      expect(usersService.findAllIncludeInactive).toHaveBeenCalled();\n      expect(result).toEqual(mockUsers);\n    });\n\n    it('should handle service errors when fetching all users', async () => {\n      usersService.findAllIncludeInactive.mockRejectedValue(\n        new Error('Database connection failed'),\n      );\n\n      await expect(\n        controller.findAllIncludeInactive(TEST_USER_IDS.ADMIN),\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('findOne', () => {\n    const mockUser = TestDataGenerator.createUser({ id: TEST_USER_IDS.CLIENT });\n\n    it('should allow user to view their own profile', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.findOne.mockResolvedValue(mockUser as any);\n\n      const result = await controller.findOne(\n        { id: TEST_USER_IDS.CLIENT },\n        TEST_USER_IDS.CLIENT,\n      );\n\n      expect(roleUtils.isUserAdmin).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(usersService.findOne).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(result).toEqual(mockUser);\n    });\n\n    it('should allow admin to view any user profile', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(true);\n      usersService.findOneIncludeInactive.mockResolvedValue(mockUser as any);\n\n      const result = await controller.findOne(\n        { id: TEST_USER_IDS.CLIENT },\n        TEST_USER_IDS.ADMIN,\n      );\n\n      expect(roleUtils.isUserAdmin).toHaveBeenCalledWith(TEST_USER_IDS.ADMIN);\n      expect(usersService.findOneIncludeInactive).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n      );\n      expect(result).toEqual(mockUser);\n    });\n\n    it('should throw ForbiddenException when non-admin tries to view other user', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n\n      await expect(\n        controller.findOne({ id: TEST_USER_IDS.THERAPIST }, TEST_USER_IDS.CLIENT),\n      ).rejects.toThrow(ForbiddenException);\n\n      expect(usersService.findOne).not.toHaveBeenCalled();\n    });\n\n    it('should throw HttpException when user not found', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.findOne.mockResolvedValue(null);\n\n      await expect(\n        controller.findOne({ id: TEST_USER_IDS.CLIENT }, TEST_USER_IDS.CLIENT),\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('update', () => {\n    const updateData = {\n      firstName: 'Updated',\n      lastName: 'Name',\n      bio: 'Updated bio',\n    };\n\n    it('should allow user to update their own profile', async () => {\n      const updatedUser = { ...TestDataGenerator.createUser(), ...updateData };\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.update.mockResolvedValue(updatedUser as any);\n\n      const result = await controller.update(\n        { id: TEST_USER_IDS.CLIENT },\n        updateData,\n        TEST_USER_IDS.CLIENT,\n      );\n\n      expect(roleUtils.isUserAdmin).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(usersService.update).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        updateData,\n      );\n      expect(result).toEqual(updatedUser);\n    });\n\n    it('should allow admin to update any user with all fields', async () => {\n      const adminUpdateData = {\n        firstName: 'Admin Updated',\n        role: 'moderator',\n        isActive: false,\n      };\n      const updatedUser = {\n        ...TestDataGenerator.createUser(),\n        ...adminUpdateData,\n      };\n\n      roleUtils.isUserAdmin.mockResolvedValue(true);\n      usersService.update.mockResolvedValue(updatedUser as any);\n\n      const result = await controller.update(\n        { id: TEST_USER_IDS.CLIENT },\n        adminUpdateData,\n        TEST_USER_IDS.ADMIN,\n      );\n\n      expect(usersService.update).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        adminUpdateData,\n      );\n      expect(result).toEqual(updatedUser);\n    });\n\n    it('should sanitize non-admin updates to allowed fields only', async () => {\n      const unauthorizedData = {\n        firstName: 'John',\n        role: 'admin', // Should be filtered out\n        isActive: false, // Should be filtered out\n        bio: 'New bio',\n      };\n      const sanitizedData = {\n        firstName: 'John',\n        bio: 'New bio',\n      };\n      const updatedUser = {\n        ...TestDataGenerator.createUser(),\n        ...sanitizedData,\n      };\n\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.update.mockResolvedValue(updatedUser as any);\n\n      const result = await controller.update(\n        { id: TEST_USER_IDS.CLIENT },\n        unauthorizedData,\n        TEST_USER_IDS.CLIENT,\n      );\n\n      expect(usersService.update).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        sanitizedData,\n      );\n      expect(result).toEqual(updatedUser);\n    });\n\n    it('should throw ForbiddenException when non-admin tries to update other user', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n\n      await expect(\n        controller.update(\n          { id: TEST_USER_IDS.THERAPIST },\n          updateData,\n          TEST_USER_IDS.CLIENT,\n        ),\n      ).rejects.toThrow(ForbiddenException);\n\n      expect(usersService.update).not.toHaveBeenCalled();\n    });\n  });\n\n  describe('remove', () => {\n    it('should allow user to deactivate their own account', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.remove.mockResolvedValue({} as any);\n\n      const result = await controller.remove(\n        { id: TEST_USER_IDS.CLIENT },\n        TEST_USER_IDS.CLIENT,\n      );\n\n      expect(roleUtils.isUserAdmin).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(usersService.remove).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(result).toEqual({\n        message: 'User account deactivated successfully',\n      });\n    });\n\n    it('should allow admin to deactivate any user account', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(true);\n      usersService.remove.mockResolvedValue({} as any);\n\n      const result = await controller.remove(\n        { id: TEST_USER_IDS.CLIENT },\n        TEST_USER_IDS.ADMIN,\n      );\n\n      expect(usersService.remove).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(result).toEqual({\n        message: 'User account deactivated successfully',\n      });\n    });\n\n    it('should throw ForbiddenException when non-admin tries to deactivate other user', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n\n      await expect(\n        controller.remove({ id: TEST_USER_IDS.THERAPIST }, TEST_USER_IDS.CLIENT),\n      ).rejects.toThrow(ForbiddenException);\n\n      expect(usersService.remove).not.toHaveBeenCalled();\n    });\n  });\n\n  describe('deactivateUser (admin only)', () => {\n    it('should allow admin to deactivate user with reason', async () => {\n      const deactivationBody = { reason: 'Policy violation' };\n      usersService.deactivate.mockResolvedValue({} as any);\n\n      const result = await controller.deactivateUser(\n        { id: TEST_USER_IDS.CLIENT },\n        deactivationBody,\n        TEST_USER_IDS.ADMIN,\n      );\n\n      expect(usersService.deactivate).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        'Policy violation',\n        TEST_USER_IDS.ADMIN,\n      );\n      expect(result).toEqual({\n        message: 'User account deactivated by administrator',\n      });\n    });\n\n    it('should handle deactivation without reason', async () => {\n      const deactivationBody = {};\n      usersService.deactivate.mockResolvedValue({} as any);\n\n      const result = await controller.deactivateUser(\n        { id: TEST_USER_IDS.CLIENT },\n        deactivationBody,\n        TEST_USER_IDS.ADMIN,\n      );\n\n      expect(usersService.deactivate).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        undefined,\n        TEST_USER_IDS.ADMIN,\n      );\n      expect(result).toEqual({\n        message: 'User account deactivated by administrator',\n      });\n    });\n\n    it('should handle service errors during deactivation', async () => {\n      const deactivationBody = { reason: 'Test reason' };\n      usersService.deactivate.mockRejectedValue(new Error('Service error'));\n\n      await expect(\n        controller.deactivateUser(\n          { id: TEST_USER_IDS.CLIENT },\n          deactivationBody,\n          TEST_USER_IDS.ADMIN,\n        ),\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('reactivateUser (admin only)', () => {\n    it('should allow admin to reactivate user', async () => {\n      usersService.reactivate.mockResolvedValue({} as any);\n\n      const result = await controller.reactivateUser(\n        { id: TEST_USER_IDS.CLIENT },\n        TEST_USER_IDS.ADMIN,\n      );\n\n      expect(usersService.reactivate).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n      );\n      expect(result).toEqual({\n        message: 'User account reactivated successfully',\n      });\n    });\n\n    it('should handle service errors during reactivation', async () => {\n      usersService.reactivate.mockRejectedValue(\n        new Error('Reactivation failed'),\n      );\n\n      await expect(\n        controller.reactivateUser({ id: TEST_USER_IDS.CLIENT }, TEST_USER_IDS.ADMIN),\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('error handling', () => {\n    it('should preserve ForbiddenException from service layer', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(true);\n      usersService.findOneIncludeInactive.mockRejectedValue(\n        new ForbiddenException('Access denied'),\n      );\n\n      await expect(\n        controller.findOne({ id: TEST_USER_IDS.CLIENT }, TEST_USER_IDS.ADMIN),\n      ).rejects.toThrow(ForbiddenException);\n    });\n\n    it('should wrap generic errors in HttpException', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.findOne.mockRejectedValue(new Error('Generic error'));\n\n      await expect(\n        controller.findOne({ id: TEST_USER_IDS.CLIENT }, TEST_USER_IDS.CLIENT),\n      ).rejects.toThrow(HttpException);\n    });\n\n    it('should handle role utils errors gracefully', async () => {\n      roleUtils.isUserAdmin.mockRejectedValue(new Error('Role check failed'));\n\n      await expect(\n        controller.findOne({ id: TEST_USER_IDS.CLIENT }, TEST_USER_IDS.CLIENT),\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('authorization edge cases', () => {\n    it('should handle empty update data for non-admin', async () => {\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.update.mockResolvedValue(\n        TestDataGenerator.createUser() as any,\n      );\n\n      await controller.update({ id: TEST_USER_IDS.CLIENT }, {}, TEST_USER_IDS.CLIENT);\n\n      expect(usersService.update).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        {},\n      );\n    });\n\n    it('should handle mixed allowed and disallowed fields for non-admin', async () => {\n      const mixedData = {\n        firstName: 'John', // Allowed\n        lastName: 'Doe', // Allowed\n        role: 'admin', // Not allowed\n        bio: 'New bio', // Allowed\n        isActive: false, // Not allowed\n        avatarUrl: 'http://example.com/avatar.jpg', // Allowed\n      };\n      const expectedSanitizedData = {\n        firstName: 'John',\n        lastName: 'Doe',\n        bio: 'New bio',\n        avatarUrl: 'http://example.com/avatar.jpg',\n      };\n\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.update.mockResolvedValue(\n        TestDataGenerator.createUser() as any,\n      );\n\n      await controller.update(\n        { id: TEST_USER_IDS.CLIENT },\n        mixedData,\n        TEST_USER_IDS.CLIENT,\n      );\n\n      expect(usersService.update).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        expectedSanitizedData,\n      );\n    });\n  });\n\n  describe('File Upload Integration', () => {\n    it('should handle avatar upload successfully', async () => {\n      // Arrange\n      const mockFiles = {\n        avatar: [mockFile],\n      };\n      const updateData = {\n        firstName: 'John',\n        lastName: 'Doe',\n      };\n\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      supabaseStorageService.validateFile.mockReturnValue({ isValid: true });\n      supabaseStorageService.uploadFile.mockResolvedValue(mockUploadResult);\n      usersService.update.mockResolvedValue(\n        TestDataGenerator.createUser() as any,\n      );\n\n      // Act\n      await controller.update(\n        { id: TEST_USER_IDS.CLIENT },\n        updateData,\n        TEST_USER_IDS.CLIENT,\n        mockFiles,\n      );\n\n      // Assert\n      expect(supabaseStorageService.validateFile).toHaveBeenCalledWith(mockFile);\n      expect(supabaseStorageService.uploadFile).toHaveBeenCalledWith(\n        mockFile,\n        'user-profiles',\n      );\n      expect(usersService.update).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        {\n          ...updateData,\n          avatarUrl: mockUploadResult.url,\n        },\n      );\n    });\n\n    it('should handle cover image upload successfully', async () => {\n      // Arrange\n      const mockCoverFile = {\n        ...mockFile,\n        fieldname: 'cover',\n        originalname: 'cover.jpg',\n      };\n      const mockFiles = {\n        cover: [mockCoverFile],\n      };\n      const updateData = {\n        firstName: 'John',\n        lastName: 'Doe',\n      };\n\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      supabaseStorageService.validateFile.mockReturnValue({ isValid: true });\n      supabaseStorageService.uploadFile.mockResolvedValue(mockUploadResult);\n      usersService.update.mockResolvedValue(\n        TestDataGenerator.createUser() as any,\n      );\n\n      // Act\n      await controller.update(\n        { id: TEST_USER_IDS.CLIENT },\n        updateData,\n        TEST_USER_IDS.CLIENT,\n        mockFiles,\n      );\n\n      // Assert\n      expect(supabaseStorageService.validateFile).toHaveBeenCalledWith(mockCoverFile);\n      expect(supabaseStorageService.uploadFile).toHaveBeenCalledWith(\n        mockCoverFile,\n        'user-profiles',\n      );\n      expect(usersService.update).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        {\n          ...updateData,\n          coverImageUrl: mockUploadResult.url,\n        },\n      );\n    });\n\n    it('should handle multiple file uploads simultaneously', async () => {\n      // Arrange\n      const mockCoverFile = {\n        ...mockFile,\n        fieldname: 'cover',\n        originalname: 'cover.jpg',\n      };\n      const mockFiles = {\n        avatar: [mockFile],\n        cover: [mockCoverFile],\n      };\n      const updateData = {\n        firstName: 'John',\n        lastName: 'Doe',\n      };\n\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      supabaseStorageService.validateFile.mockReturnValue({ isValid: true });\n      supabaseStorageService.uploadFile.mockResolvedValue(mockUploadResult);\n      usersService.update.mockResolvedValue(\n        TestDataGenerator.createUser() as any,\n      );\n\n      // Act\n      await controller.update(\n        { id: TEST_USER_IDS.CLIENT },\n        updateData,\n        TEST_USER_IDS.CLIENT,\n        mockFiles,\n      );\n\n      // Assert\n      expect(supabaseStorageService.validateFile).toHaveBeenCalledTimes(2);\n      expect(supabaseStorageService.uploadFile).toHaveBeenCalledTimes(2);\n      expect(usersService.update).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        {\n          ...updateData,\n          avatarUrl: mockUploadResult.url,\n          coverImageUrl: mockUploadResult.url,\n        },\n      );\n    });\n\n    it('should handle file validation errors', async () => {\n      // Arrange\n      const mockFiles = {\n        avatar: [mockFile],\n      };\n      const updateData = {\n        firstName: 'John',\n        lastName: 'Doe',\n      };\n\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      supabaseStorageService.validateFile.mockReturnValue({\n        isValid: false,\n        error: 'File too large',\n      });\n\n      // Act & Assert\n      await expect(\n        controller.update(\n          { id: TEST_USER_IDS.CLIENT },\n          updateData,\n          TEST_USER_IDS.CLIENT,\n          mockFiles,\n        ),\n      ).rejects.toThrow('Avatar validation failed: File too large');\n    });\n\n    it('should handle file upload errors', async () => {\n      // Arrange\n      const mockFiles = {\n        avatar: [mockFile],\n      };\n      const updateData = {\n        firstName: 'John',\n        lastName: 'Doe',\n      };\n\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      supabaseStorageService.validateFile.mockReturnValue({ isValid: true });\n      supabaseStorageService.uploadFile.mockRejectedValue(new Error('Upload failed'));\n\n      // Act & Assert\n      await expect(\n        controller.update(\n          { id: TEST_USER_IDS.CLIENT },\n          updateData,\n          TEST_USER_IDS.CLIENT,\n          mockFiles,\n        ),\n      ).rejects.toThrow('Failed to update user: Upload failed');\n    });\n  });\n\n  describe('Security Tests', () => {\n    it('should validate input data through ZodValidationPipe', () => {\n      // This tests that the controller uses proper validation\n      const validationPipe = new ZodValidationPipe({} as any);\n      expect(validationPipe).toBeDefined();\n    });\n\n    it('should require authentication for all endpoints', () => {\n      // Test that all endpoints have JwtAuthGuard\n      const protectedMethods = ['findAll', 'findAllIncludeInactive', 'findOne', 'update', 'remove', 'deactivateUser', 'reactivateUser'];\n      \n      protectedMethods.forEach(method => {\n        const guards = Reflect.getMetadata('__guards__', UsersController.prototype[method as keyof UsersController]);\n        expect(guards).toBeDefined();\n      });\n    });\n\n    it('should enforce admin-only access for admin endpoints', () => {\n      // Test that admin endpoints have AdminAuthGuard\n      const adminMethods = ['findAll', 'findAllIncludeInactive', 'deactivateUser', 'reactivateUser'];\n      \n      adminMethods.forEach(method => {\n        const guards = Reflect.getMetadata('__guards__', controller[method as keyof UsersController]);\n        expect(guards).toBeDefined();\n      });\n    });\n\n    it('should handle JWT token validation', async () => {\n      // Test that JWT guard is properly applied\n      mockJwtAuthGuard.canActivate.mockReturnValue(false);\n      \n      // Mock the actual HTTP exception that would be thrown\n      const unauthorizedError = new Error('Unauthorized');\n      usersService.findAll.mockRejectedValue(unauthorizedError);\n      \n      await expect(controller.findAll(TEST_USER_IDS.ADMIN)).rejects.toThrow();\n    });\n\n    it('should handle admin authorization validation', async () => {\n      // Test that admin guard is properly applied\n      mockAdminAuthGuard.canActivate.mockReturnValue(false);\n      \n      // Mock the actual HTTP exception that would be thrown\n      const forbiddenError = new Error('Forbidden');\n      usersService.findAll.mockRejectedValue(forbiddenError);\n      \n      await expect(controller.findAll(TEST_USER_IDS.ADMIN)).rejects.toThrow();\n    });\n\n    it('should prevent unauthorized access to other user profiles', async () => {\n      // Test that users can only access their own profile\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      \n      await expect(\n        controller.findOne({ id: TEST_USER_IDS.THERAPIST }, TEST_USER_IDS.CLIENT),\n      ).rejects.toThrow(ForbiddenException);\n    });\n  });\n\n  describe('Role-based Access Control', () => {\n    it('should test role-based access for admin endpoints', async () => {\n      // Test that admin endpoints require admin role\n      await RoleBasedTestUtils.testWithRoles(\n        async (userId: string, role: string) => {\n          try {\n            await controller.findAll(userId);\n            return true;\n          } catch (error) {\n            return false;\n          }\n        },\n        {\n          client: false,\n          therapist: false,\n          admin: true,\n          moderator: false,\n        },\n      );\n    });\n\n    it('should validate user-specific functionality', async () => {\n      // Test that users can access their own profile\n      const userContext = MockBuilder.createAuthContext('client');\n      \n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.findOne.mockResolvedValue(mockUser as any);\n      \n      const result = await controller.findOne({ id: userContext.userId }, userContext.userId);\n      \n      expect(result).toBeDefined();\n      expect(result.id).toBe(userContext.userId);\n    });\n\n    it('should test field sanitization for non-admin users', async () => {\n      // Test that non-admin users cannot update sensitive fields\n      const sensitiveData = {\n        firstName: 'John',\n        role: 'admin', // Should be filtered out\n        isActive: false, // Should be filtered out\n        emailVerified: true, // Should be filtered out\n      };\n      \n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.update.mockResolvedValue(mockUser as any);\n      \n      await controller.update({ id: TEST_USER_IDS.CLIENT }, sensitiveData, TEST_USER_IDS.CLIENT);\n      \n      expect(usersService.update).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        { firstName: 'John' }, // Only allowed fields\n      );\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete user profile update workflow', async () => {\n      // Arrange\n      const updateData = {\n        firstName: 'Updated',\n        lastName: 'Name',\n        bio: 'Updated bio',\n        timezone: 'America/Los_Angeles',\n        language: 'en',\n        theme: 'dark',\n      };\n      const updatedUser = { ...mockUser, ...updateData };\n      \n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.update.mockResolvedValue(updatedUser as any);\n      \n      // Act\n      const result = await controller.update(\n        { id: TEST_USER_IDS.CLIENT },\n        updateData,\n        TEST_USER_IDS.CLIENT,\n      );\n      \n      // Assert\n      expect(result).toBeDefined();\n      expect(result.firstName).toBe('Updated');\n      expect(result.lastName).toBe('Name');\n      expect(result.bio).toBe('Updated bio');\n      expect(result.timezone).toBe('America/Los_Angeles');\n    });\n\n    it('should handle complete admin user management workflow', async () => {\n      // Arrange\n      roleUtils.isUserAdmin.mockResolvedValue(true);\n      usersService.findAll.mockResolvedValue(mockUsers as any);\n      usersService.findAllIncludeInactive.mockResolvedValue(mockUsers as any);\n      usersService.findOneIncludeInactive.mockResolvedValue(mockUser as any);\n      \n      // Act - Get all users\n      const allUsers = await controller.findAll(TEST_USER_IDS.ADMIN);\n      \n      // Act - Get all users including inactive\n      const allUsersIncludeInactive = await controller.findAllIncludeInactive(TEST_USER_IDS.ADMIN);\n      \n      // Act - View specific user\n      const specificUser = await controller.findOne({ id: TEST_USER_IDS.CLIENT }, TEST_USER_IDS.ADMIN);\n      \n      // Assert\n      expect(allUsers).toBeDefined();\n      expect(allUsers).toHaveLength(2);\n      \n      expect(allUsersIncludeInactive).toBeDefined();\n      expect(allUsersIncludeInactive).toHaveLength(2);\n      \n      expect(specificUser).toBeDefined();\n      expect(specificUser.id).toBe(TEST_USER_IDS.CLIENT);\n    });\n\n    it('should handle complete user deactivation workflow', async () => {\n      // Arrange\n      usersService.deactivate.mockResolvedValue({} as any);\n      \n      // Act\n      const result = await controller.deactivateUser(\n        { id: TEST_USER_IDS.CLIENT },\n        { reason: 'Policy violation' },\n        TEST_USER_IDS.ADMIN,\n      );\n      \n      // Assert\n      expect(result).toBeDefined();\n      expect(result.message).toBe('User account deactivated by administrator');\n      expect(usersService.deactivate).toHaveBeenCalledWith(\n        TEST_USER_IDS.CLIENT,\n        'Policy violation',\n        TEST_USER_IDS.ADMIN,\n      );\n    });\n\n    it('should handle complete user reactivation workflow', async () => {\n      // Arrange\n      usersService.reactivate.mockResolvedValue({} as any);\n      \n      // Act\n      const result = await controller.reactivateUser(\n        { id: TEST_USER_IDS.CLIENT },\n        TEST_USER_IDS.ADMIN,\n      );\n      \n      // Assert\n      expect(result).toBeDefined();\n      expect(result.message).toBe('User account reactivated successfully');\n      expect(usersService.reactivate).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n    });\n  });\n\n  describe('Data Validation', () => {\n    it('should validate user update data structure', () => {\n      // Test that we're using the correct DTO structure\n      const validUpdateData = {\n        firstName: 'John',\n        lastName: 'Doe',\n        bio: 'User bio',\n        avatarUrl: 'https://example.com/avatar.jpg',\n        coverImageUrl: 'https://example.com/cover.jpg',\n        phoneNumber: '+1234567890',\n        timezone: 'America/New_York',\n        language: 'en',\n        theme: 'light',\n      };\n      \n      // Verify all fields are defined\n      expect(validUpdateData.firstName).toBeDefined();\n      expect(validUpdateData.lastName).toBeDefined();\n      expect(validUpdateData.bio).toBeDefined();\n      expect(validUpdateData.avatarUrl).toBeDefined();\n      expect(validUpdateData.coverImageUrl).toBeDefined();\n      expect(validUpdateData.phoneNumber).toBeDefined();\n      expect(validUpdateData.timezone).toBeDefined();\n      expect(validUpdateData.language).toBeDefined();\n      expect(validUpdateData.theme).toBeDefined();\n    });\n\n    it('should validate deactivation data structure', () => {\n      // Test that we're using the correct DTO structure\n      const validDeactivationData = {\n        reason: 'Policy violation',\n      };\n      \n      // Verify all fields are defined\n      expect(validDeactivationData.reason).toBeDefined();\n    });\n\n    it('should validate user ID parameter structure', () => {\n      // Test that we're using the correct parameter structure\n      const validUserIdParam = {\n        id: TEST_USER_IDS.CLIENT,\n      };\n      \n      // Verify all fields are defined\n      expect(validUserIdParam.id).toBeDefined();\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return correctly formatted user list response', async () => {\n      // Arrange\n      roleUtils.isUserAdmin.mockResolvedValue(true);\n      usersService.findAll.mockResolvedValue(mockUsers as any);\n      \n      // Act\n      const result = await controller.findAll(TEST_USER_IDS.ADMIN);\n      \n      // Assert\n      expect(result).toBeInstanceOf(Array);\n      expect(result).toHaveLength(2);\n      \n      const user = result[0];\n      expect(user).toHaveProperty('id');\n      expect(user).toHaveProperty('email');\n      expect(user).toHaveProperty('firstName');\n      expect(user).toHaveProperty('lastName');\n      expect(user).toHaveProperty('role');\n      expect(user).toHaveProperty('createdAt');\n      expect(user).toHaveProperty('isActive');\n    });\n\n    it('should return correctly formatted user profile response', async () => {\n      // Arrange\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.findOne.mockResolvedValue(mockUser as any);\n      \n      // Act\n      const result = await controller.findOne({ id: TEST_USER_IDS.CLIENT }, TEST_USER_IDS.CLIENT);\n      \n      // Assert\n      expect(result).toHaveProperty('id');\n      expect(result).toHaveProperty('email');\n      expect(result).toHaveProperty('firstName');\n      expect(result).toHaveProperty('lastName');\n      expect(result).toHaveProperty('role');\n      expect(result).toHaveProperty('bio');\n      expect(result).toHaveProperty('avatarUrl');\n      expect(result).toHaveProperty('coverImageUrl');\n      expect(result).toHaveProperty('phoneNumber');\n      expect(result).toHaveProperty('timezone');\n      expect(result).toHaveProperty('language');\n      expect(result).toHaveProperty('theme');\n      expect(result).toHaveProperty('createdAt');\n      expect(result).toHaveProperty('updatedAt');\n    });\n\n    it('should return correctly formatted update response', async () => {\n      // Arrange\n      const updateData = {\n        firstName: 'Updated',\n        lastName: 'Name',\n      };\n      const updatedUser = { ...mockUser, ...updateData };\n      \n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.update.mockResolvedValue(updatedUser as any);\n      \n      // Act\n      const result = await controller.update(\n        { id: TEST_USER_IDS.CLIENT },\n        updateData,\n        TEST_USER_IDS.CLIENT,\n      );\n      \n      // Assert\n      expect(result).toHaveProperty('id');\n      expect(result).toHaveProperty('email');\n      expect(result).toHaveProperty('firstName');\n      expect(result).toHaveProperty('lastName');\n      expect(result.firstName).toBe('Updated');\n      expect(result.lastName).toBe('Name');\n    });\n\n    it('should return correctly formatted deactivation response', async () => {\n      // Arrange\n      roleUtils.isUserAdmin.mockResolvedValue(false);\n      usersService.remove.mockResolvedValue({} as any);\n      \n      // Act\n      const result = await controller.remove({ id: TEST_USER_IDS.CLIENT }, TEST_USER_IDS.CLIENT);\n      \n      // Assert\n      expect(result).toHaveProperty('message');\n      expect(result.message).toBe('User account deactivated successfully');\n    });\n\n    it('should return correctly formatted admin deactivation response', async () => {\n      // Arrange\n      usersService.deactivate.mockResolvedValue({} as any);\n      \n      // Act\n      const result = await controller.deactivateUser(\n        TEST_USER_IDS.CLIENT,\n        { reason: 'Policy violation' },\n        TEST_USER_IDS.ADMIN,\n      );\n      \n      // Assert\n      expect(result).toHaveProperty('message');\n      expect(result.message).toBe('User account deactivated by administrator');\n    });\n\n    it('should return correctly formatted reactivation response', async () => {\n      // Arrange\n      usersService.reactivate.mockResolvedValue({} as any);\n      \n      // Act\n      const result = await controller.reactivateUser(\n        { id: TEST_USER_IDS.CLIENT },\n        TEST_USER_IDS.ADMIN,\n      );\n      \n      // Assert\n      expect(result).toHaveProperty('message');\n      expect(result.message).toBe('User account reactivated successfully');\n    });\n  });\n});\n"],"version":3}