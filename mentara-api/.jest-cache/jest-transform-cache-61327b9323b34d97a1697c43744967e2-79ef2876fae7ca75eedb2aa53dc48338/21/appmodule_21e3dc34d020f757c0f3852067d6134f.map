{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/app.module.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/app.module.ts"],"sourcesContent":["import { Module, NestModule, MiddlewareConsumer } from '@nestjs/common';\nimport { ConfigModule } from '@nestjs/config';\nimport { EventEmitterModule } from '@nestjs/event-emitter';\nimport { ThrottlerModule, ThrottlerGuard } from '@nestjs/throttler';\nimport { APP_INTERCEPTOR, APP_FILTER, APP_GUARD } from '@nestjs/core';\nimport { AuthModule } from './auth/auth.module';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\nimport { UsersModule } from './users/users.module';\nimport { CommunitiesModule } from './communities/communities.module';\nimport { PostsModule } from './posts/posts.module';\nimport { CommentsModule } from './comments/comments.module';\nimport { TherapistModule } from './therapist/therapist.module';\nimport { WorksheetsModule } from './worksheets/worksheets.module';\nimport { PreAssessmentModule } from './pre-assessment/pre-assessment.module';\nimport { BookingModule } from './booking/booking.module';\nimport { ReviewsModule } from './reviews/reviews.module';\nimport { AdminModule } from './admin/admin.module';\nimport { ModeratorModule } from './moderator/moderator.module';\nimport { ClientModule } from './client/client.module';\nimport { MessagingModule } from './messaging/messaging.module';\nimport { MeetingsModule } from './meetings/meetings.module';\nimport { SessionsModule } from './sessions/sessions.module';\nimport { NotificationsModule } from './notifications/notifications.module';\nimport { AuditLogsModule } from './audit-logs/audit-logs.module';\nimport { BillingModule } from './billing/billing.module';\nimport { DashboardModule } from './dashboard/dashboard.module';\nimport { SearchModule } from './search/search.module';\nimport { AnalyticsModule } from './analytics/analytics.module';\nimport { OnboardingModule } from './onboarding/onboarding.module';\nimport { HealthModule } from './health/health.module';\nimport { PrismaService } from './providers/prisma-client.provider';\nimport { ResponseInterceptor } from './common/interceptors/response.interceptor';\nimport { HttpExceptionFilter } from './common/filters/http-exception.filter';\nimport { EventBusService } from './common/events/event-bus.service';\nimport { CommonModule } from './common/common.module';\nimport { JwtAuthGuard } from './auth/guards/jwt-auth.guard';\nimport { SecurityGuard } from './common/guards/security.guard';\nimport { SecurityHeadersMiddleware } from './common/middleware/security-headers.middleware';\nimport { RateLimitMiddleware } from './common/middleware/rate-limit.middleware';\nimport { JwtService } from '@nestjs/jwt';\n\n@Module({\n  imports: [\n    ConfigModule.forRoot(),\n    ThrottlerModule.forRoot([\n      {\n        ttl: 60000, // 1 minute\n        limit: 100, // 100 requests per minute per IP\n      },\n      {\n        name: 'auth',\n        ttl: 300000, // 5 minutes\n        limit: 10, // 10 auth attempts per 5 minutes per IP\n      },\n      {\n        name: 'upload',\n        ttl: 60000, // 1 minute\n        limit: 5, // 5 file uploads per minute per IP\n      },\n    ]),\n    EventEmitterModule.forRoot({\n      // Set this to `true` to use wildcards\n      wildcard: true,\n      // The delimiter used to segment namespaces\n      delimiter: '.',\n      // Disable throwing uncaught exceptions\n      ignoreErrors: false,\n      // Max listeners per event\n      maxListeners: 10,\n      // Show event name in memory leaks message when more than maximum amount of listeners\n      verboseMemoryLeak: false,\n    }),\n    CommonModule,\n    AuthModule,\n    UsersModule,\n    CommunitiesModule,\n    PostsModule,\n    CommentsModule,\n    TherapistModule,\n    WorksheetsModule,\n    PreAssessmentModule,\n    BookingModule,\n    ReviewsModule,\n    AdminModule,\n    ModeratorModule,\n    ClientModule,\n    MessagingModule,\n    MeetingsModule,\n    SessionsModule,\n    NotificationsModule,\n    AuditLogsModule,\n    BillingModule,\n    DashboardModule,\n    SearchModule,\n    AnalyticsModule,\n    OnboardingModule,\n    HealthModule,\n  ],\n  controllers: [AppController],\n  providers: [\n    AppService,\n    PrismaService,\n    EventBusService,\n    JwtService,\n    {\n      provide: APP_INTERCEPTOR,\n      useClass: ResponseInterceptor,\n    },\n    {\n      provide: APP_FILTER,\n      useClass: HttpExceptionFilter,\n    },\n    {\n      provide: APP_GUARD,\n      useClass: ThrottlerGuard,\n    },\n    {\n      provide: APP_GUARD,\n      useClass: JwtAuthGuard,\n    },\n    {\n      provide: APP_GUARD,\n      useClass: SecurityGuard,\n    },\n  ],\n})\nexport class AppModule implements NestModule {\n  configure(consumer: MiddlewareConsumer) {\n    consumer.apply(SecurityHeadersMiddleware).forRoutes('*');\n\n    consumer.apply(RateLimitMiddleware).forRoutes('*');\n  }\n}\n"],"version":3}