5fa9336edf6a349ef56a5cd779442176
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var TherapistRequestController_1;
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.TherapistRequestController = void 0;
const common_1 = require("@nestjs/common");
const jwt_auth_guard_1 = require("../../auth/guards/jwt-auth.guard");
const current_user_id_decorator_1 = require("../../auth/decorators/current-user-id.decorator");
const zod_validation_pipe_1 = require("../../common/pipes/zod-validation.pipe");
const mentara_commons_1 = require("mentara-commons");
const therapist_request_service_1 = require("../services/therapist-request.service");
const swagger_1 = require("@nestjs/swagger");
let TherapistRequestController = TherapistRequestController_1 = class TherapistRequestController {
    therapistRequestService;
    logger = new common_1.Logger(TherapistRequestController_1.name);
    constructor(therapistRequestService) {
        this.therapistRequestService = therapistRequestService;
    }
    async getClientRequests(filters, therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching client requests`);
        return this.therapistRequestService.getTherapistRequests(therapistId, filters);
    }
    async getPendingRequests(therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching pending requests`);
        const pendingRequests = await this.therapistRequestService.getTherapistRequests(therapistId, {
            status: 'PENDING',
            page: 1,
            limit: 50,
            sortBy: 'requestedAt',
            sortOrder: 'asc', // Oldest first for fairness
            includeExpired: false,
        });
        return {
            success: true,
            pendingRequests: pendingRequests.requests,
            totalPending: pendingRequests.pagination.totalCount,
            summary: pendingRequests.summary,
        };
    }
    async getHighPriorityRequests(therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching high priority requests`);
        const highPriorityRequests = await this.therapistRequestService.getTherapistRequests(therapistId, {
            status: 'PENDING',
            priority: 'HIGH',
            page: 1,
            limit: 20,
            sortBy: 'requestedAt',
            sortOrder: 'asc',
            includeExpired: false,
        });
        const urgentRequests = await this.therapistRequestService.getTherapistRequests(therapistId, {
            status: 'PENDING',
            priority: 'URGENT',
            page: 1,
            limit: 20,
            sortBy: 'requestedAt',
            sortOrder: 'asc',
            includeExpired: false,
        });
        return {
            success: true,
            highPriorityRequests: highPriorityRequests.requests,
            urgentRequests: urgentRequests.requests,
            totalHighPriority: highPriorityRequests.pagination.totalCount,
            totalUrgent: urgentRequests.pagination.totalCount,
        };
    }
    async getRequestDetails(requestId, therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching request details for ${requestId}`);
        // Validate request ID format
        if (!requestId || requestId.length !== 36) {
            throw new common_1.BadRequestException('Invalid request ID format');
        }
        const requests = await this.therapistRequestService.getTherapistRequests(therapistId, {
            page: 1,
            limit: 1,
            sortBy: 'requestedAt',
            sortOrder: 'desc',
            includeExpired: false,
        });
        const request = requests.requests.find((r) => r.id === requestId);
        if (!request) {
            throw new common_1.NotFoundException(`Request with ID ${requestId} not found or not accessible`);
        }
        return {
            success: true,
            request,
        };
    }
    async acceptRequest(requestId, responseDto, therapistId) {
        this.logger.log(`Therapist ${therapistId} accepting request ${requestId}`);
        // Validate request ID format
        if (!requestId || requestId.length !== 36) {
            throw new common_1.BadRequestException('Invalid request ID format');
        }
        return this.therapistRequestService.acceptClientRequest(requestId, therapistId, responseDto);
    }
    async declineRequest(requestId, responseDto, therapistId) {
        this.logger.log(`Therapist ${therapistId} declining request ${requestId}`);
        // Validate request ID format
        if (!requestId || requestId.length !== 36) {
            throw new common_1.BadRequestException('Invalid request ID format');
        }
        return this.therapistRequestService.declineClientRequest(requestId, therapistId, responseDto);
    }
    async performBulkAction(actionDto, therapistId) {
        this.logger.log(`Therapist ${therapistId} performing bulk ${actionDto.action} on ${actionDto.requestIds.length} requests`);
        return this.therapistRequestService.performBulkAction(therapistId, actionDto);
    }
    async getRequestStatistics(therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching request statistics`);
        return this.therapistRequestService.getTherapistRequestStatistics(therapistId);
    }
    async getRecentRequests(therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching recent requests`);
        const recentRequests = await this.therapistRequestService.getTherapistRequests(therapistId, {
            page: 1,
            limit: 10,
            sortBy: 'requestedAt',
            sortOrder: 'desc',
            includeExpired: false,
        });
        return {
            success: true,
            recentRequests: recentRequests.requests,
            hasMore: recentRequests.pagination.totalCount > 10,
            summary: recentRequests.summary,
        };
    }
    async getDashboardSummary(therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching dashboard summary`);
        const [statistics, pendingRequests, highPriorityRequests] = await Promise.all([
            this.therapistRequestService.getTherapistRequestStatistics(therapistId),
            this.therapistRequestService.getTherapistRequests(therapistId, {
                status: 'PENDING',
                page: 1,
                limit: 5,
                sortBy: 'requestedAt',
                sortOrder: 'asc',
                includeExpired: false,
            }),
            this.therapistRequestService.getTherapistRequests(therapistId, {
                status: 'PENDING',
                priority: 'HIGH',
                page: 1,
                limit: 3,
                sortBy: 'requestedAt',
                sortOrder: 'asc',
                includeExpired: false,
            }),
        ]);
        return {
            success: true,
            statistics,
            recentPendingRequests: pendingRequests.requests,
            highPriorityRequests: highPriorityRequests.requests,
            actionRequired: pendingRequests.pagination.totalCount > 0,
            hasUrgentRequests: highPriorityRequests.requests.some((req) => req.priority === 'URGENT'),
        };
    }
    async getClientRequestHistory(clientId, therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching request history for client ${clientId}`);
        // Validate client ID format
        if (!clientId || clientId.length !== 36) {
            throw new common_1.BadRequestException('Invalid client ID format');
        }
        const clientHistory = await this.therapistRequestService.getTherapistRequests(therapistId, {
            clientId,
            page: 1,
            limit: 50,
            sortBy: 'requestedAt',
            sortOrder: 'desc',
            includeExpired: true,
        });
        return {
            success: true,
            clientId,
            requestHistory: clientHistory.requests,
            totalRequests: clientHistory.pagination.totalCount,
            hasActiveRelationship: clientHistory.requests.some((req) => req.status === 'ACCEPTED'),
        };
    }
    async getFilterOptions(therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching filter options`);
        // Return available filter options for the frontend
        return {
            success: true,
            filterOptions: {
                statuses: [
                    'PENDING',
                    'ACCEPTED',
                    'DECLINED',
                    'EXPIRED',
                    'CANCELLED',
                    'WITHDRAWN',
                ],
                priorities: ['LOW', 'NORMAL', 'HIGH', 'URGENT'],
                sortOptions: [
                    { value: 'requestedAt', label: 'Request Date' },
                    { value: 'respondedAt', label: 'Response Date' },
                    { value: 'priority', label: 'Priority' },
                    { value: 'status', label: 'Status' },
                ],
                sortOrders: [
                    { value: 'desc', label: 'Newest First' },
                    { value: 'asc', label: 'Oldest First' },
                ],
                bulkActions: [
                    { value: 'accept', label: 'Accept Selected' },
                    { value: 'decline', label: 'Decline Selected' },
                    { value: 'mark_reviewed', label: 'Mark as Reviewed' },
                ],
            },
        };
    }
    async getPendingCount(therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching pending requests count`);
        const statistics = await this.therapistRequestService.getTherapistRequestStatistics(therapistId);
        return {
            success: true,
            pendingCount: statistics.pending,
            totalReceived: statistics.totalReceived,
            needsAttention: statistics.pending > 0,
        };
    }
    async getResponseTimeAnalytics(therapistId) {
        this.logger.log(`Therapist ${therapistId} fetching response time analytics`);
        const statistics = await this.therapistRequestService.getTherapistRequestStatistics(therapistId);
        // Get detailed response time breakdown
        const responseTimeBreakdown = {
            averageHours: statistics.averageResponseTime,
            performance: this.categorizeResponseTime(statistics.averageResponseTime),
            acceptanceRate: statistics.acceptanceRate,
            totalResponded: statistics.accepted + statistics.declined,
        };
        return {
            success: true,
            responseTimeAnalytics: responseTimeBreakdown,
            recommendations: this.getResponseTimeRecommendations(statistics.averageResponseTime, statistics.acceptanceRate),
        };
    }
    // ===== HELPER METHODS =====
    categorizeResponseTime(averageHours) {
        if (averageHours <= 2)
            return 'excellent';
        if (averageHours <= 6)
            return 'good';
        if (averageHours <= 24)
            return 'fair';
        return 'needs_improvement';
    }
    getResponseTimeRecommendations(averageHours, acceptanceRate) {
        const recommendations = [];
        if (averageHours > 24) {
            recommendations.push('Consider responding to client requests within 24 hours for better client experience');
        }
        if (acceptanceRate < 30) {
            recommendations.push('Your acceptance rate is low. Consider reviewing your availability and client preferences');
        }
        if (acceptanceRate > 80) {
            recommendations.push("Excellent acceptance rate! You're providing great accessibility to clients");
        }
        if (averageHours <= 6 && acceptanceRate > 60) {
            recommendations.push("You're doing great with both response time and acceptance rate!");
        }
        return recommendations;
    }
};
exports.TherapistRequestController = TherapistRequestController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get client requests',
        description: 'Retrieve get client requests',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, common_1.Query)(new zod_validation_pipe_1.ZodValidationPipe(mentara_commons_1.TherapistRequestFiltersDtoSchema))),
    __param(1, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getClientRequests", null);
__decorate([
    (0, common_1.Get)('pending'),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get pending requests',
        description: 'Retrieve get pending requests',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getPendingRequests", null);
__decorate([
    (0, common_1.Get)('priority'),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get high priority requests',
        description: 'Retrieve get high priority requests',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getHighPriorityRequests", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get request details',
        description: 'Retrieve get request details',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getRequestDetails", null);
__decorate([
    (0, common_1.Put)(':id/accept'),
    (0, swagger_1.ApiOperation)({
        summary: 'Update accept request',
        description: 'Update accept request',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Updated successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(mentara_commons_1.TherapistRequestResponseDtoSchema))),
    __param(2, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object, String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "acceptRequest", null);
__decorate([
    (0, common_1.Put)(':id/decline'),
    (0, swagger_1.ApiOperation)({
        summary: 'Update decline request',
        description: 'Update decline request',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Updated successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(mentara_commons_1.TherapistRequestResponseDtoSchema))),
    __param(2, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object, String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "declineRequest", null);
__decorate([
    (0, common_1.Post)('bulk-action'),
    (0, swagger_1.ApiOperation)({
        summary: 'Create perform bulk action',
        description: 'Create perform bulk action',
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Created successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(mentara_commons_1.BulkTherapistActionDtoSchema))),
    __param(1, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "performBulkAction", null);
__decorate([
    (0, common_1.Get)('statistics'),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get request statistics',
        description: 'Retrieve get request statistics',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getRequestStatistics", null);
__decorate([
    (0, common_1.Get)('recent'),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get recent requests',
        description: 'Retrieve get recent requests',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getRecentRequests", null);
__decorate([
    (0, common_1.Get)('dashboard/summary'),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get dashboard summary',
        description: 'Retrieve get dashboard summary',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getDashboardSummary", null);
__decorate([
    (0, common_1.Get)('client/:clientId/history'),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get client request history',
        description: 'Retrieve get client request history',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, common_1.Param)('clientId')),
    __param(1, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getClientRequestHistory", null);
__decorate([
    (0, common_1.Get)('filters/options'),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get filter options',
        description: 'Retrieve get filter options',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getFilterOptions", null);
__decorate([
    (0, common_1.Get)('count/pending'),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get pending count',
        description: 'Retrieve get pending count',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getPendingCount", null);
__decorate([
    (0, common_1.Get)('analytics/response-time'),
    (0, swagger_1.ApiOperation)({
        summary: 'Retrieve get response time analytics',
        description: 'Retrieve get response time analytics',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Retrieved successfully',
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Unauthorized' }),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], TherapistRequestController.prototype, "getResponseTimeAnalytics", null);
exports.TherapistRequestController = TherapistRequestController = TherapistRequestController_1 = __decorate([
    (0, swagger_1.ApiTags)('therapist-request'),
    (0, swagger_1.ApiBearerAuth)('JWT-auth'),
    (0, common_1.Controller)('therapist/requests'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __metadata("design:paramtypes", [typeof (_a = typeof therapist_request_service_1.TherapistRequestService !== "undefined" && therapist_request_service_1.TherapistRequestService) === "function" ? _a : Object])
], TherapistRequestController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL3RoZXJhcGlzdC9jb250cm9sbGVycy90aGVyYXBpc3QtcmVxdWVzdC5jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsMkNBY3dCO0FBQ3hCLHFFQUFnRTtBQUNoRSwrRkFBZ0Y7QUFDaEYsZ0ZBQTJFO0FBQzNFLHFEQU95QjtBQUN6QixxRkFBZ0Y7QUFDaEYsNkNBUXlCO0FBTWxCLElBQU0sMEJBQTBCLGtDQUFoQyxNQUFNLDBCQUEwQjtJQUlsQjtJQUhGLE1BQU0sR0FBRyxJQUFJLGVBQU0sQ0FBQyw0QkFBMEIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUV0RSxZQUNtQix1QkFBZ0Q7UUFBaEQsNEJBQXVCLEdBQXZCLHVCQUF1QixDQUF5QjtJQUNoRSxDQUFDO0lBZUUsQUFBTixLQUFLLENBQUMsaUJBQWlCLENBRXJCLE9BQW1DLEVBQ2xCLFdBQW1CO1FBRXBDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsV0FBVywyQkFBMkIsQ0FBQyxDQUFDO1FBQ3JFLE9BQU8sSUFBSSxDQUFDLHVCQUF1QixDQUFDLG9CQUFvQixDQUN0RCxXQUFXLEVBQ1gsT0FBTyxDQUNSLENBQUM7SUFDSixDQUFDO0lBZUssQUFBTixLQUFLLENBQUMsa0JBQWtCLENBQWtCLFdBQW1CO1FBQzNELElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsV0FBVyw0QkFBNEIsQ0FBQyxDQUFDO1FBRXRFLE1BQU0sZUFBZSxHQUNuQixNQUFNLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxvQkFBb0IsQ0FBQyxXQUFXLEVBQUU7WUFDbkUsTUFBTSxFQUFFLFNBQVM7WUFDakIsSUFBSSxFQUFFLENBQUM7WUFDUCxLQUFLLEVBQUUsRUFBRTtZQUNULE1BQU0sRUFBRSxhQUFhO1lBQ3JCLFNBQVMsRUFBRSxLQUFLLEVBQUUsNEJBQTRCO1lBQzlDLGNBQWMsRUFBRSxLQUFLO1NBQ3RCLENBQUMsQ0FBQztRQUVMLE9BQU87WUFDTCxPQUFPLEVBQUUsSUFBSTtZQUNiLGVBQWUsRUFBRSxlQUFlLENBQUMsUUFBUTtZQUN6QyxZQUFZLEVBQUUsZUFBZSxDQUFDLFVBQVUsQ0FBQyxVQUFVO1lBQ25ELE9BQU8sRUFBRSxlQUFlLENBQUMsT0FBTztTQUNqQyxDQUFDO0lBQ0osQ0FBQztJQWVLLEFBQU4sS0FBSyxDQUFDLHVCQUF1QixDQUFrQixXQUFtQjtRQUNoRSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLFdBQVcsa0NBQWtDLENBQUMsQ0FBQztRQUU1RSxNQUFNLG9CQUFvQixHQUN4QixNQUFNLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxvQkFBb0IsQ0FBQyxXQUFXLEVBQUU7WUFDbkUsTUFBTSxFQUFFLFNBQVM7WUFDakIsUUFBUSxFQUFFLE1BQU07WUFDaEIsSUFBSSxFQUFFLENBQUM7WUFDUCxLQUFLLEVBQUUsRUFBRTtZQUNULE1BQU0sRUFBRSxhQUFhO1lBQ3JCLFNBQVMsRUFBRSxLQUFLO1lBQ2hCLGNBQWMsRUFBRSxLQUFLO1NBQ3RCLENBQUMsQ0FBQztRQUVMLE1BQU0sY0FBYyxHQUNsQixNQUFNLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxvQkFBb0IsQ0FBQyxXQUFXLEVBQUU7WUFDbkUsTUFBTSxFQUFFLFNBQVM7WUFDakIsUUFBUSxFQUFFLFFBQVE7WUFDbEIsSUFBSSxFQUFFLENBQUM7WUFDUCxLQUFLLEVBQUUsRUFBRTtZQUNULE1BQU0sRUFBRSxhQUFhO1lBQ3JCLFNBQVMsRUFBRSxLQUFLO1lBQ2hCLGNBQWMsRUFBRSxLQUFLO1NBQ3RCLENBQUMsQ0FBQztRQUVMLE9BQU87WUFDTCxPQUFPLEVBQUUsSUFBSTtZQUNiLG9CQUFvQixFQUFFLG9CQUFvQixDQUFDLFFBQVE7WUFDbkQsY0FBYyxFQUFFLGNBQWMsQ0FBQyxRQUFRO1lBQ3ZDLGlCQUFpQixFQUFFLG9CQUFvQixDQUFDLFVBQVUsQ0FBQyxVQUFVO1lBQzdELFdBQVcsRUFBRSxjQUFjLENBQUMsVUFBVSxDQUFDLFVBQVU7U0FDbEQsQ0FBQztJQUNKLENBQUM7SUFlSyxBQUFOLEtBQUssQ0FBQyxpQkFBaUIsQ0FDUixTQUFpQixFQUNiLFdBQW1CO1FBRXBDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUNiLGFBQWEsV0FBVyxpQ0FBaUMsU0FBUyxFQUFFLENBQ3JFLENBQUM7UUFFRiw2QkFBNkI7UUFDN0IsSUFBSSxDQUFDLFNBQVMsSUFBSSxTQUFTLENBQUMsTUFBTSxLQUFLLEVBQUUsRUFBRSxDQUFDO1lBQzFDLE1BQU0sSUFBSSw0QkFBbUIsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBQzdELENBQUM7UUFFRCxNQUFNLFFBQVEsR0FBRyxNQUFNLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxvQkFBb0IsQ0FDdEUsV0FBVyxFQUNYO1lBQ0UsSUFBSSxFQUFFLENBQUM7WUFDUCxLQUFLLEVBQUUsQ0FBQztZQUNSLE1BQU0sRUFBRSxhQUFhO1lBQ3JCLFNBQVMsRUFBRSxNQUFNO1lBQ2pCLGNBQWMsRUFBRSxLQUFLO1NBQ3RCLENBQ0YsQ0FBQztRQUVGLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLFNBQVMsQ0FBQyxDQUFDO1FBRWxFLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNiLE1BQU0sSUFBSSwwQkFBaUIsQ0FDekIsbUJBQW1CLFNBQVMsOEJBQThCLENBQzNELENBQUM7UUFDSixDQUFDO1FBRUQsT0FBTztZQUNMLE9BQU8sRUFBRSxJQUFJO1lBQ2IsT0FBTztTQUNSLENBQUM7SUFDSixDQUFDO0lBZUssQUFBTixLQUFLLENBQUMsYUFBYSxDQUNKLFNBQWlCLEVBRTlCLFdBQXdDLEVBQ3ZCLFdBQW1CO1FBRXBDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsV0FBVyxzQkFBc0IsU0FBUyxFQUFFLENBQUMsQ0FBQztRQUUzRSw2QkFBNkI7UUFDN0IsSUFBSSxDQUFDLFNBQVMsSUFBSSxTQUFTLENBQUMsTUFBTSxLQUFLLEVBQUUsRUFBRSxDQUFDO1lBQzFDLE1BQU0sSUFBSSw0QkFBbUIsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBQzdELENBQUM7UUFFRCxPQUFPLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxtQkFBbUIsQ0FDckQsU0FBUyxFQUNULFdBQVcsRUFDWCxXQUFXLENBQ1osQ0FBQztJQUNKLENBQUM7SUFlSyxBQUFOLEtBQUssQ0FBQyxjQUFjLENBQ0wsU0FBaUIsRUFFOUIsV0FBd0MsRUFDdkIsV0FBbUI7UUFFcEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxXQUFXLHNCQUFzQixTQUFTLEVBQUUsQ0FBQyxDQUFDO1FBRTNFLDZCQUE2QjtRQUM3QixJQUFJLENBQUMsU0FBUyxJQUFJLFNBQVMsQ0FBQyxNQUFNLEtBQUssRUFBRSxFQUFFLENBQUM7WUFDMUMsTUFBTSxJQUFJLDRCQUFtQixDQUFDLDJCQUEyQixDQUFDLENBQUM7UUFDN0QsQ0FBQztRQUVELE9BQU8sSUFBSSxDQUFDLHVCQUF1QixDQUFDLG9CQUFvQixDQUN0RCxTQUFTLEVBQ1QsV0FBVyxFQUNYLFdBQVcsQ0FDWixDQUFDO0lBQ0osQ0FBQztJQWVLLEFBQU4sS0FBSyxDQUFDLGlCQUFpQixDQUVyQixTQUFpQyxFQUNoQixXQUFtQjtRQUVwQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FDYixhQUFhLFdBQVcsb0JBQW9CLFNBQVMsQ0FBQyxNQUFNLE9BQU8sU0FBUyxDQUFDLFVBQVUsQ0FBQyxNQUFNLFdBQVcsQ0FDMUcsQ0FBQztRQUNGLE9BQU8sSUFBSSxDQUFDLHVCQUF1QixDQUFDLGlCQUFpQixDQUNuRCxXQUFXLEVBQ1gsU0FBUyxDQUNWLENBQUM7SUFDSixDQUFDO0lBZUssQUFBTixLQUFLLENBQUMsb0JBQW9CLENBQWtCLFdBQW1CO1FBQzdELElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsV0FBVyw4QkFBOEIsQ0FBQyxDQUFDO1FBQ3hFLE9BQU8sSUFBSSxDQUFDLHVCQUF1QixDQUFDLDZCQUE2QixDQUMvRCxXQUFXLENBQ1osQ0FBQztJQUNKLENBQUM7SUFlSyxBQUFOLEtBQUssQ0FBQyxpQkFBaUIsQ0FBa0IsV0FBbUI7UUFDMUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxXQUFXLDJCQUEyQixDQUFDLENBQUM7UUFFckUsTUFBTSxjQUFjLEdBQ2xCLE1BQU0sSUFBSSxDQUFDLHVCQUF1QixDQUFDLG9CQUFvQixDQUFDLFdBQVcsRUFBRTtZQUNuRSxJQUFJLEVBQUUsQ0FBQztZQUNQLEtBQUssRUFBRSxFQUFFO1lBQ1QsTUFBTSxFQUFFLGFBQWE7WUFDckIsU0FBUyxFQUFFLE1BQU07WUFDakIsY0FBYyxFQUFFLEtBQUs7U0FDdEIsQ0FBQyxDQUFDO1FBRUwsT0FBTztZQUNMLE9BQU8sRUFBRSxJQUFJO1lBQ2IsY0FBYyxFQUFFLGNBQWMsQ0FBQyxRQUFRO1lBQ3ZDLE9BQU8sRUFBRSxjQUFjLENBQUMsVUFBVSxDQUFDLFVBQVUsR0FBRyxFQUFFO1lBQ2xELE9BQU8sRUFBRSxjQUFjLENBQUMsT0FBTztTQUNoQyxDQUFDO0lBQ0osQ0FBQztJQWVLLEFBQU4sS0FBSyxDQUFDLG1CQUFtQixDQUFrQixXQUFtQjtRQUM1RCxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLFdBQVcsNkJBQTZCLENBQUMsQ0FBQztRQUV2RSxNQUFNLENBQUMsVUFBVSxFQUFFLGVBQWUsRUFBRSxvQkFBb0IsQ0FBQyxHQUN2RCxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDaEIsSUFBSSxDQUFDLHVCQUF1QixDQUFDLDZCQUE2QixDQUFDLFdBQVcsQ0FBQztZQUN2RSxJQUFJLENBQUMsdUJBQXVCLENBQUMsb0JBQW9CLENBQUMsV0FBVyxFQUFFO2dCQUM3RCxNQUFNLEVBQUUsU0FBUztnQkFDakIsSUFBSSxFQUFFLENBQUM7Z0JBQ1AsS0FBSyxFQUFFLENBQUM7Z0JBQ1IsTUFBTSxFQUFFLGFBQWE7Z0JBQ3JCLFNBQVMsRUFBRSxLQUFLO2dCQUNoQixjQUFjLEVBQUUsS0FBSzthQUN0QixDQUFDO1lBQ0YsSUFBSSxDQUFDLHVCQUF1QixDQUFDLG9CQUFvQixDQUFDLFdBQVcsRUFBRTtnQkFDN0QsTUFBTSxFQUFFLFNBQVM7Z0JBQ2pCLFFBQVEsRUFBRSxNQUFNO2dCQUNoQixJQUFJLEVBQUUsQ0FBQztnQkFDUCxLQUFLLEVBQUUsQ0FBQztnQkFDUixNQUFNLEVBQUUsYUFBYTtnQkFDckIsU0FBUyxFQUFFLEtBQUs7Z0JBQ2hCLGNBQWMsRUFBRSxLQUFLO2FBQ3RCLENBQUM7U0FDSCxDQUFDLENBQUM7UUFFTCxPQUFPO1lBQ0wsT0FBTyxFQUFFLElBQUk7WUFDYixVQUFVO1lBQ1YscUJBQXFCLEVBQUUsZUFBZSxDQUFDLFFBQVE7WUFDL0Msb0JBQW9CLEVBQUUsb0JBQW9CLENBQUMsUUFBUTtZQUNuRCxjQUFjLEVBQUUsZUFBZSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEdBQUcsQ0FBQztZQUN6RCxpQkFBaUIsRUFBRSxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUNuRCxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxRQUFRLENBQ25DO1NBQ0YsQ0FBQztJQUNKLENBQUM7SUFlSyxBQUFOLEtBQUssQ0FBQyx1QkFBdUIsQ0FDUixRQUFnQixFQUNsQixXQUFtQjtRQUVwQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FDYixhQUFhLFdBQVcsd0NBQXdDLFFBQVEsRUFBRSxDQUMzRSxDQUFDO1FBRUYsNEJBQTRCO1FBQzVCLElBQUksQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLE1BQU0sS0FBSyxFQUFFLEVBQUUsQ0FBQztZQUN4QyxNQUFNLElBQUksNEJBQW1CLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUM1RCxDQUFDO1FBRUQsTUFBTSxhQUFhLEdBQ2pCLE1BQU0sSUFBSSxDQUFDLHVCQUF1QixDQUFDLG9CQUFvQixDQUFDLFdBQVcsRUFBRTtZQUNuRSxRQUFRO1lBQ1IsSUFBSSxFQUFFLENBQUM7WUFDUCxLQUFLLEVBQUUsRUFBRTtZQUNULE1BQU0sRUFBRSxhQUFhO1lBQ3JCLFNBQVMsRUFBRSxNQUFNO1lBQ2pCLGNBQWMsRUFBRSxJQUFJO1NBQ3JCLENBQUMsQ0FBQztRQUVMLE9BQU87WUFDTCxPQUFPLEVBQUUsSUFBSTtZQUNiLFFBQVE7WUFDUixjQUFjLEVBQUUsYUFBYSxDQUFDLFFBQVE7WUFDdEMsYUFBYSxFQUFFLGFBQWEsQ0FBQyxVQUFVLENBQUMsVUFBVTtZQUNsRCxxQkFBcUIsRUFBRSxhQUFhLENBQUMsUUFBUSxDQUFDLElBQUksQ0FDaEQsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEtBQUssVUFBVSxDQUNuQztTQUNGLENBQUM7SUFDSixDQUFDO0lBZUssQUFBTixLQUFLLENBQUMsZ0JBQWdCLENBQWtCLFdBQW1CO1FBQ3pELElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsV0FBVywwQkFBMEIsQ0FBQyxDQUFDO1FBRXBFLG1EQUFtRDtRQUNuRCxPQUFPO1lBQ0wsT0FBTyxFQUFFLElBQUk7WUFDYixhQUFhLEVBQUU7Z0JBQ2IsUUFBUSxFQUFFO29CQUNSLFNBQVM7b0JBQ1QsVUFBVTtvQkFDVixVQUFVO29CQUNWLFNBQVM7b0JBQ1QsV0FBVztvQkFDWCxXQUFXO2lCQUNaO2dCQUNELFVBQVUsRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsQ0FBQztnQkFDL0MsV0FBVyxFQUFFO29CQUNYLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFO29CQUMvQyxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUUsS0FBSyxFQUFFLGVBQWUsRUFBRTtvQkFDaEQsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUU7b0JBQ3hDLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFO2lCQUNyQztnQkFDRCxVQUFVLEVBQUU7b0JBQ1YsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUU7b0JBQ3hDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFO2lCQUN4QztnQkFDRCxXQUFXLEVBQUU7b0JBQ1gsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRTtvQkFDN0MsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxrQkFBa0IsRUFBRTtvQkFDL0MsRUFBRSxLQUFLLEVBQUUsZUFBZSxFQUFFLEtBQUssRUFBRSxrQkFBa0IsRUFBRTtpQkFDdEQ7YUFDRjtTQUNGLENBQUM7SUFDSixDQUFDO0lBZUssQUFBTixLQUFLLENBQUMsZUFBZSxDQUFrQixXQUFtQjtRQUN4RCxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLFdBQVcsa0NBQWtDLENBQUMsQ0FBQztRQUU1RSxNQUFNLFVBQVUsR0FDZCxNQUFNLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyw2QkFBNkIsQ0FDOUQsV0FBVyxDQUNaLENBQUM7UUFFSixPQUFPO1lBQ0wsT0FBTyxFQUFFLElBQUk7WUFDYixZQUFZLEVBQUUsVUFBVSxDQUFDLE9BQU87WUFDaEMsYUFBYSxFQUFFLFVBQVUsQ0FBQyxhQUFhO1lBQ3ZDLGNBQWMsRUFBRSxVQUFVLENBQUMsT0FBTyxHQUFHLENBQUM7U0FDdkMsQ0FBQztJQUNKLENBQUM7SUFlSyxBQUFOLEtBQUssQ0FBQyx3QkFBd0IsQ0FBa0IsV0FBbUI7UUFDakUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQ2IsYUFBYSxXQUFXLG1DQUFtQyxDQUM1RCxDQUFDO1FBRUYsTUFBTSxVQUFVLEdBQ2QsTUFBTSxJQUFJLENBQUMsdUJBQXVCLENBQUMsNkJBQTZCLENBQzlELFdBQVcsQ0FDWixDQUFDO1FBRUosdUNBQXVDO1FBQ3ZDLE1BQU0scUJBQXFCLEdBQUc7WUFDNUIsWUFBWSxFQUFFLFVBQVUsQ0FBQyxtQkFBbUI7WUFDNUMsV0FBVyxFQUFFLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLENBQUMsbUJBQW1CLENBQUM7WUFDeEUsY0FBYyxFQUFFLFVBQVUsQ0FBQyxjQUFjO1lBQ3pDLGNBQWMsRUFBRSxVQUFVLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQyxRQUFRO1NBQzFELENBQUM7UUFFRixPQUFPO1lBQ0wsT0FBTyxFQUFFLElBQUk7WUFDYixxQkFBcUIsRUFBRSxxQkFBcUI7WUFDNUMsZUFBZSxFQUFFLElBQUksQ0FBQyw4QkFBOEIsQ0FDbEQsVUFBVSxDQUFDLG1CQUFtQixFQUM5QixVQUFVLENBQUMsY0FBYyxDQUMxQjtTQUNGLENBQUM7SUFDSixDQUFDO0lBRUQsNkJBQTZCO0lBRXJCLHNCQUFzQixDQUFDLFlBQW9CO1FBQ2pELElBQUksWUFBWSxJQUFJLENBQUM7WUFBRSxPQUFPLFdBQVcsQ0FBQztRQUMxQyxJQUFJLFlBQVksSUFBSSxDQUFDO1lBQUUsT0FBTyxNQUFNLENBQUM7UUFDckMsSUFBSSxZQUFZLElBQUksRUFBRTtZQUFFLE9BQU8sTUFBTSxDQUFDO1FBQ3RDLE9BQU8sbUJBQW1CLENBQUM7SUFDN0IsQ0FBQztJQUVPLDhCQUE4QixDQUNwQyxZQUFvQixFQUNwQixjQUFzQjtRQUV0QixNQUFNLGVBQWUsR0FBYSxFQUFFLENBQUM7UUFFckMsSUFBSSxZQUFZLEdBQUcsRUFBRSxFQUFFLENBQUM7WUFDdEIsZUFBZSxDQUFDLElBQUksQ0FDbEIscUZBQXFGLENBQ3RGLENBQUM7UUFDSixDQUFDO1FBRUQsSUFBSSxjQUFjLEdBQUcsRUFBRSxFQUFFLENBQUM7WUFDeEIsZUFBZSxDQUFDLElBQUksQ0FDbEIsMEZBQTBGLENBQzNGLENBQUM7UUFDSixDQUFDO1FBRUQsSUFBSSxjQUFjLEdBQUcsRUFBRSxFQUFFLENBQUM7WUFDeEIsZUFBZSxDQUFDLElBQUksQ0FDbEIsNEVBQTRFLENBQzdFLENBQUM7UUFDSixDQUFDO1FBRUQsSUFBSSxZQUFZLElBQUksQ0FBQyxJQUFJLGNBQWMsR0FBRyxFQUFFLEVBQUUsQ0FBQztZQUM3QyxlQUFlLENBQUMsSUFBSSxDQUNsQixpRUFBaUUsQ0FDbEUsQ0FBQztRQUNKLENBQUM7UUFFRCxPQUFPLGVBQWUsQ0FBQztJQUN6QixDQUFDO0NBQ0YsQ0FBQTtBQXRqQlksZ0VBQTBCO0FBb0IvQjtJQWJMLElBQUEsWUFBRyxHQUFFO0lBQ0wsSUFBQSxzQkFBWSxFQUFDO1FBQ1osT0FBTyxFQUFFLDhCQUE4QjtRQUV2QyxXQUFXLEVBQUUsOEJBQThCO0tBQzVDLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUVYLFdBQVcsRUFBRSx3QkFBd0I7S0FDdEMsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxDQUFDO0lBQ3pELElBQUEsaUJBQVEsRUFBQyxtQkFBVSxDQUFDLEVBQUUsQ0FBQztJQUVyQixXQUFBLElBQUEsY0FBSyxFQUFDLElBQUksdUNBQWlCLENBQUMsa0RBQWdDLENBQUMsQ0FBQyxDQUFBO0lBRTlELFdBQUEsSUFBQSx5Q0FBYSxHQUFFLENBQUE7Ozs7bUVBT2pCO0FBZUs7SUFiTCxJQUFBLFlBQUcsRUFBQyxTQUFTLENBQUM7SUFDZCxJQUFBLHNCQUFZLEVBQUM7UUFDWixPQUFPLEVBQUUsK0JBQStCO1FBRXhDLFdBQVcsRUFBRSwrQkFBK0I7S0FDN0MsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQztRQUNYLE1BQU0sRUFBRSxHQUFHO1FBRVgsV0FBVyxFQUFFLHdCQUF3QjtLQUN0QyxDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLENBQUM7SUFDekQsSUFBQSxpQkFBUSxFQUFDLG1CQUFVLENBQUMsRUFBRSxDQUFDO0lBQ0UsV0FBQSxJQUFBLHlDQUFhLEdBQUUsQ0FBQTs7OztvRUFtQnhDO0FBZUs7SUFiTCxJQUFBLFlBQUcsRUFBQyxVQUFVLENBQUM7SUFDZixJQUFBLHNCQUFZLEVBQUM7UUFDWixPQUFPLEVBQUUscUNBQXFDO1FBRTlDLFdBQVcsRUFBRSxxQ0FBcUM7S0FDbkQsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQztRQUNYLE1BQU0sRUFBRSxHQUFHO1FBRVgsV0FBVyxFQUFFLHdCQUF3QjtLQUN0QyxDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLENBQUM7SUFDekQsSUFBQSxpQkFBUSxFQUFDLG1CQUFVLENBQUMsRUFBRSxDQUFDO0lBQ08sV0FBQSxJQUFBLHlDQUFhLEdBQUUsQ0FBQTs7Ozt5RUFnQzdDO0FBZUs7SUFiTCxJQUFBLFlBQUcsRUFBQyxLQUFLLENBQUM7SUFDVixJQUFBLHNCQUFZLEVBQUM7UUFDWixPQUFPLEVBQUUsOEJBQThCO1FBRXZDLFdBQVcsRUFBRSw4QkFBOEI7S0FDNUMsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQztRQUNYLE1BQU0sRUFBRSxHQUFHO1FBRVgsV0FBVyxFQUFFLHdCQUF3QjtLQUN0QyxDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLENBQUM7SUFDekQsSUFBQSxpQkFBUSxFQUFDLG1CQUFVLENBQUMsRUFBRSxDQUFDO0lBRXJCLFdBQUEsSUFBQSxjQUFLLEVBQUMsSUFBSSxDQUFDLENBQUE7SUFDWCxXQUFBLElBQUEseUNBQWEsR0FBRSxDQUFBOzs7O21FQWtDakI7QUFlSztJQWJMLElBQUEsWUFBRyxFQUFDLFlBQVksQ0FBQztJQUNqQixJQUFBLHNCQUFZLEVBQUM7UUFDWixPQUFPLEVBQUUsdUJBQXVCO1FBRWhDLFdBQVcsRUFBRSx1QkFBdUI7S0FDckMsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQztRQUNYLE1BQU0sRUFBRSxHQUFHO1FBRVgsV0FBVyxFQUFFLHNCQUFzQjtLQUNwQyxDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLENBQUM7SUFDekQsSUFBQSxpQkFBUSxFQUFDLG1CQUFVLENBQUMsRUFBRSxDQUFDO0lBRXJCLFdBQUEsSUFBQSxjQUFLLEVBQUMsSUFBSSxDQUFDLENBQUE7SUFDWCxXQUFBLElBQUEsYUFBSSxFQUFDLElBQUksdUNBQWlCLENBQUMsbURBQWlDLENBQUMsQ0FBQyxDQUFBO0lBRTlELFdBQUEsSUFBQSx5Q0FBYSxHQUFFLENBQUE7Ozs7K0RBY2pCO0FBZUs7SUFiTCxJQUFBLFlBQUcsRUFBQyxhQUFhLENBQUM7SUFDbEIsSUFBQSxzQkFBWSxFQUFDO1FBQ1osT0FBTyxFQUFFLHdCQUF3QjtRQUVqQyxXQUFXLEVBQUUsd0JBQXdCO0tBQ3RDLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUVYLFdBQVcsRUFBRSxzQkFBc0I7S0FDcEMsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxDQUFDO0lBQ3pELElBQUEsaUJBQVEsRUFBQyxtQkFBVSxDQUFDLEVBQUUsQ0FBQztJQUVyQixXQUFBLElBQUEsY0FBSyxFQUFDLElBQUksQ0FBQyxDQUFBO0lBQ1gsV0FBQSxJQUFBLGFBQUksRUFBQyxJQUFJLHVDQUFpQixDQUFDLG1EQUFpQyxDQUFDLENBQUMsQ0FBQTtJQUU5RCxXQUFBLElBQUEseUNBQWEsR0FBRSxDQUFBOzs7O2dFQWNqQjtBQWVLO0lBYkwsSUFBQSxhQUFJLEVBQUMsYUFBYSxDQUFDO0lBQ25CLElBQUEsc0JBQVksRUFBQztRQUNaLE9BQU8sRUFBRSw0QkFBNEI7UUFFckMsV0FBVyxFQUFFLDRCQUE0QjtLQUMxQyxDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFFWCxXQUFXLEVBQUUsc0JBQXNCO0tBQ3BDLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsQ0FBQztJQUN6RCxJQUFBLGlCQUFRLEVBQUMsbUJBQVUsQ0FBQyxFQUFFLENBQUM7SUFFckIsV0FBQSxJQUFBLGFBQUksRUFBQyxJQUFJLHVDQUFpQixDQUFDLDhDQUE0QixDQUFDLENBQUMsQ0FBQTtJQUV6RCxXQUFBLElBQUEseUNBQWEsR0FBRSxDQUFBOzs7O21FQVNqQjtBQWVLO0lBYkwsSUFBQSxZQUFHLEVBQUMsWUFBWSxDQUFDO0lBQ2pCLElBQUEsc0JBQVksRUFBQztRQUNaLE9BQU8sRUFBRSxpQ0FBaUM7UUFFMUMsV0FBVyxFQUFFLGlDQUFpQztLQUMvQyxDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFFWCxXQUFXLEVBQUUsd0JBQXdCO0tBQ3RDLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsQ0FBQztJQUN6RCxJQUFBLGlCQUFRLEVBQUMsbUJBQVUsQ0FBQyxFQUFFLENBQUM7SUFDSSxXQUFBLElBQUEseUNBQWEsR0FBRSxDQUFBOzs7O3NFQUsxQztBQWVLO0lBYkwsSUFBQSxZQUFHLEVBQUMsUUFBUSxDQUFDO0lBQ2IsSUFBQSxzQkFBWSxFQUFDO1FBQ1osT0FBTyxFQUFFLDhCQUE4QjtRQUV2QyxXQUFXLEVBQUUsOEJBQThCO0tBQzVDLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUVYLFdBQVcsRUFBRSx3QkFBd0I7S0FDdEMsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxDQUFDO0lBQ3pELElBQUEsaUJBQVEsRUFBQyxtQkFBVSxDQUFDLEVBQUUsQ0FBQztJQUNDLFdBQUEsSUFBQSx5Q0FBYSxHQUFFLENBQUE7Ozs7bUVBa0J2QztBQWVLO0lBYkwsSUFBQSxZQUFHLEVBQUMsbUJBQW1CLENBQUM7SUFDeEIsSUFBQSxzQkFBWSxFQUFDO1FBQ1osT0FBTyxFQUFFLGdDQUFnQztRQUV6QyxXQUFXLEVBQUUsZ0NBQWdDO0tBQzlDLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUVYLFdBQVcsRUFBRSx3QkFBd0I7S0FDdEMsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxDQUFDO0lBQ3pELElBQUEsaUJBQVEsRUFBQyxtQkFBVSxDQUFDLEVBQUUsQ0FBQztJQUNHLFdBQUEsSUFBQSx5Q0FBYSxHQUFFLENBQUE7Ozs7cUVBbUN6QztBQWVLO0lBYkwsSUFBQSxZQUFHLEVBQUMsMEJBQTBCLENBQUM7SUFDL0IsSUFBQSxzQkFBWSxFQUFDO1FBQ1osT0FBTyxFQUFFLHFDQUFxQztRQUU5QyxXQUFXLEVBQUUscUNBQXFDO0tBQ25ELENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUVYLFdBQVcsRUFBRSx3QkFBd0I7S0FDdEMsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxDQUFDO0lBQ3pELElBQUEsaUJBQVEsRUFBQyxtQkFBVSxDQUFDLEVBQUUsQ0FBQztJQUVyQixXQUFBLElBQUEsY0FBSyxFQUFDLFVBQVUsQ0FBQyxDQUFBO0lBQ2pCLFdBQUEsSUFBQSx5Q0FBYSxHQUFFLENBQUE7Ozs7eUVBOEJqQjtBQWVLO0lBYkwsSUFBQSxZQUFHLEVBQUMsaUJBQWlCLENBQUM7SUFDdEIsSUFBQSxzQkFBWSxFQUFDO1FBQ1osT0FBTyxFQUFFLDZCQUE2QjtRQUV0QyxXQUFXLEVBQUUsNkJBQTZCO0tBQzNDLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUVYLFdBQVcsRUFBRSx3QkFBd0I7S0FDdEMsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxDQUFDO0lBQ3pELElBQUEsaUJBQVEsRUFBQyxtQkFBVSxDQUFDLEVBQUUsQ0FBQztJQUNBLFdBQUEsSUFBQSx5Q0FBYSxHQUFFLENBQUE7Ozs7a0VBaUN0QztBQWVLO0lBYkwsSUFBQSxZQUFHLEVBQUMsZUFBZSxDQUFDO0lBQ3BCLElBQUEsc0JBQVksRUFBQztRQUNaLE9BQU8sRUFBRSw0QkFBNEI7UUFFckMsV0FBVyxFQUFFLDRCQUE0QjtLQUMxQyxDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFFWCxXQUFXLEVBQUUsd0JBQXdCO0tBQ3RDLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsQ0FBQztJQUN6RCxJQUFBLGlCQUFRLEVBQUMsbUJBQVUsQ0FBQyxFQUFFLENBQUM7SUFDRCxXQUFBLElBQUEseUNBQWEsR0FBRSxDQUFBOzs7O2lFQWNyQztBQWVLO0lBYkwsSUFBQSxZQUFHLEVBQUMseUJBQXlCLENBQUM7SUFDOUIsSUFBQSxzQkFBWSxFQUFDO1FBQ1osT0FBTyxFQUFFLHNDQUFzQztRQUUvQyxXQUFXLEVBQUUsc0NBQXNDO0tBQ3BELENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUVYLFdBQVcsRUFBRSx3QkFBd0I7S0FDdEMsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxDQUFDO0lBQ3pELElBQUEsaUJBQVEsRUFBQyxtQkFBVSxDQUFDLEVBQUUsQ0FBQztJQUNRLFdBQUEsSUFBQSx5Q0FBYSxHQUFFLENBQUE7Ozs7MEVBMEI5QztxQ0EzZ0JVLDBCQUEwQjtJQUp0QyxJQUFBLGlCQUFPLEVBQUMsbUJBQW1CLENBQUM7SUFDNUIsSUFBQSx1QkFBYSxFQUFDLFVBQVUsQ0FBQztJQUN6QixJQUFBLG1CQUFVLEVBQUMsb0JBQW9CLENBQUM7SUFDaEMsSUFBQSxrQkFBUyxFQUFDLDZCQUFZLENBQUM7eURBS3NCLG1EQUF1QixvQkFBdkIsbURBQXVCO0dBSnhELDBCQUEwQixDQXNqQnRDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy90aGVyYXBpc3QvY29udHJvbGxlcnMvdGhlcmFwaXN0LXJlcXVlc3QuY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb250cm9sbGVyLFxuICBHZXQsXG4gIFB1dCxcbiAgUG9zdCxcbiAgUGFyYW0sXG4gIEJvZHksXG4gIFF1ZXJ5LFxuICBVc2VHdWFyZHMsXG4gIEh0dHBDb2RlLFxuICBIdHRwU3RhdHVzLFxuICBMb2dnZXIsXG4gIE5vdEZvdW5kRXhjZXB0aW9uLFxuICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxufSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBKd3RBdXRoR3VhcmQgfSBmcm9tICcuLi8uLi9hdXRoL2d1YXJkcy9qd3QtYXV0aC5ndWFyZCc7XG5pbXBvcnQgeyBDdXJyZW50VXNlcklkIH0gZnJvbSAnLi4vLi4vYXV0aC9kZWNvcmF0b3JzL2N1cnJlbnQtdXNlci1pZC5kZWNvcmF0b3InO1xuaW1wb3J0IHsgWm9kVmFsaWRhdGlvblBpcGUgfSBmcm9tICcuLi8uLi9jb21tb24vcGlwZXMvem9kLXZhbGlkYXRpb24ucGlwZSc7XG5pbXBvcnQge1xuICBUaGVyYXBpc3RSZXF1ZXN0UmVzcG9uc2VEdG9TY2hlbWEsXG4gIFRoZXJhcGlzdFJlcXVlc3RGaWx0ZXJzRHRvU2NoZW1hLFxuICBCdWxrVGhlcmFwaXN0QWN0aW9uRHRvU2NoZW1hLFxuICB0eXBlIFRoZXJhcGlzdFJlcXVlc3RSZXNwb25zZUR0byxcbiAgdHlwZSBUaGVyYXBpc3RSZXF1ZXN0RmlsdGVyc0R0byxcbiAgdHlwZSBCdWxrVGhlcmFwaXN0QWN0aW9uRHRvLFxufSBmcm9tICdtZW50YXJhLWNvbW1vbnMnO1xuaW1wb3J0IHsgVGhlcmFwaXN0UmVxdWVzdFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy90aGVyYXBpc3QtcmVxdWVzdC5zZXJ2aWNlJztcbmltcG9ydCB7XG4gIEFwaVRhZ3MsXG4gIEFwaU9wZXJhdGlvbixcbiAgQXBpUmVzcG9uc2UsXG4gIEFwaUJvZHksXG4gIEFwaUJlYXJlckF1dGgsXG4gIEFwaVBhcmFtLFxuICBBcGlRdWVyeSxcbn0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcblxuQEFwaVRhZ3MoJ3RoZXJhcGlzdC1yZXF1ZXN0JylcbkBBcGlCZWFyZXJBdXRoKCdKV1QtYXV0aCcpXG5AQ29udHJvbGxlcigndGhlcmFwaXN0L3JlcXVlc3RzJylcbkBVc2VHdWFyZHMoSnd0QXV0aEd1YXJkKVxuZXhwb3J0IGNsYXNzIFRoZXJhcGlzdFJlcXVlc3RDb250cm9sbGVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXIgPSBuZXcgTG9nZ2VyKFRoZXJhcGlzdFJlcXVlc3RDb250cm9sbGVyLm5hbWUpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgdGhlcmFwaXN0UmVxdWVzdFNlcnZpY2U6IFRoZXJhcGlzdFJlcXVlc3RTZXJ2aWNlLFxuICApIHt9XG5cbiAgQEdldCgpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdSZXRyaWV2ZSBnZXQgY2xpZW50IHJlcXVlc3RzJyxcblxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmUgZ2V0IGNsaWVudCByZXF1ZXN0cycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG5cbiAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLk9LKVxuICBhc3luYyBnZXRDbGllbnRSZXF1ZXN0cyhcbiAgICBAUXVlcnkobmV3IFpvZFZhbGlkYXRpb25QaXBlKFRoZXJhcGlzdFJlcXVlc3RGaWx0ZXJzRHRvU2NoZW1hKSlcbiAgICBmaWx0ZXJzOiBUaGVyYXBpc3RSZXF1ZXN0RmlsdGVyc0R0byxcbiAgICBAQ3VycmVudFVzZXJJZCgpIHRoZXJhcGlzdElkOiBzdHJpbmcsXG4gICkge1xuICAgIHRoaXMubG9nZ2VyLmxvZyhgVGhlcmFwaXN0ICR7dGhlcmFwaXN0SWR9IGZldGNoaW5nIGNsaWVudCByZXF1ZXN0c2ApO1xuICAgIHJldHVybiB0aGlzLnRoZXJhcGlzdFJlcXVlc3RTZXJ2aWNlLmdldFRoZXJhcGlzdFJlcXVlc3RzKFxuICAgICAgdGhlcmFwaXN0SWQsXG4gICAgICBmaWx0ZXJzLFxuICAgICk7XG4gIH1cblxuICBAR2V0KCdwZW5kaW5nJylcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ1JldHJpZXZlIGdldCBwZW5kaW5nIHJlcXVlc3RzJyxcblxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmUgZ2V0IHBlbmRpbmcgcmVxdWVzdHMnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuXG4gICAgZGVzY3JpcHRpb246ICdSZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDEsIGRlc2NyaXB0aW9uOiAnVW5hdXRob3JpemVkJyB9KVxuICBASHR0cENvZGUoSHR0cFN0YXR1cy5PSylcbiAgYXN5bmMgZ2V0UGVuZGluZ1JlcXVlc3RzKEBDdXJyZW50VXNlcklkKCkgdGhlcmFwaXN0SWQ6IHN0cmluZykge1xuICAgIHRoaXMubG9nZ2VyLmxvZyhgVGhlcmFwaXN0ICR7dGhlcmFwaXN0SWR9IGZldGNoaW5nIHBlbmRpbmcgcmVxdWVzdHNgKTtcblxuICAgIGNvbnN0IHBlbmRpbmdSZXF1ZXN0cyA9XG4gICAgICBhd2FpdCB0aGlzLnRoZXJhcGlzdFJlcXVlc3RTZXJ2aWNlLmdldFRoZXJhcGlzdFJlcXVlc3RzKHRoZXJhcGlzdElkLCB7XG4gICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICBwYWdlOiAxLFxuICAgICAgICBsaW1pdDogNTAsXG4gICAgICAgIHNvcnRCeTogJ3JlcXVlc3RlZEF0JyxcbiAgICAgICAgc29ydE9yZGVyOiAnYXNjJywgLy8gT2xkZXN0IGZpcnN0IGZvciBmYWlybmVzc1xuICAgICAgICBpbmNsdWRlRXhwaXJlZDogZmFsc2UsXG4gICAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcGVuZGluZ1JlcXVlc3RzOiBwZW5kaW5nUmVxdWVzdHMucmVxdWVzdHMsXG4gICAgICB0b3RhbFBlbmRpbmc6IHBlbmRpbmdSZXF1ZXN0cy5wYWdpbmF0aW9uLnRvdGFsQ291bnQsXG4gICAgICBzdW1tYXJ5OiBwZW5kaW5nUmVxdWVzdHMuc3VtbWFyeSxcbiAgICB9O1xuICB9XG5cbiAgQEdldCgncHJpb3JpdHknKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnUmV0cmlldmUgZ2V0IGhpZ2ggcHJpb3JpdHkgcmVxdWVzdHMnLFxuXG4gICAgZGVzY3JpcHRpb246ICdSZXRyaWV2ZSBnZXQgaGlnaCBwcmlvcml0eSByZXF1ZXN0cycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG5cbiAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLk9LKVxuICBhc3luYyBnZXRIaWdoUHJpb3JpdHlSZXF1ZXN0cyhAQ3VycmVudFVzZXJJZCgpIHRoZXJhcGlzdElkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmxvZ2dlci5sb2coYFRoZXJhcGlzdCAke3RoZXJhcGlzdElkfSBmZXRjaGluZyBoaWdoIHByaW9yaXR5IHJlcXVlc3RzYCk7XG5cbiAgICBjb25zdCBoaWdoUHJpb3JpdHlSZXF1ZXN0cyA9XG4gICAgICBhd2FpdCB0aGlzLnRoZXJhcGlzdFJlcXVlc3RTZXJ2aWNlLmdldFRoZXJhcGlzdFJlcXVlc3RzKHRoZXJhcGlzdElkLCB7XG4gICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICBwcmlvcml0eTogJ0hJR0gnLFxuICAgICAgICBwYWdlOiAxLFxuICAgICAgICBsaW1pdDogMjAsXG4gICAgICAgIHNvcnRCeTogJ3JlcXVlc3RlZEF0JyxcbiAgICAgICAgc29ydE9yZGVyOiAnYXNjJyxcbiAgICAgICAgaW5jbHVkZUV4cGlyZWQ6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICBjb25zdCB1cmdlbnRSZXF1ZXN0cyA9XG4gICAgICBhd2FpdCB0aGlzLnRoZXJhcGlzdFJlcXVlc3RTZXJ2aWNlLmdldFRoZXJhcGlzdFJlcXVlc3RzKHRoZXJhcGlzdElkLCB7XG4gICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICBwcmlvcml0eTogJ1VSR0VOVCcsXG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIGxpbWl0OiAyMCxcbiAgICAgICAgc29ydEJ5OiAncmVxdWVzdGVkQXQnLFxuICAgICAgICBzb3J0T3JkZXI6ICdhc2MnLFxuICAgICAgICBpbmNsdWRlRXhwaXJlZDogZmFsc2UsXG4gICAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgaGlnaFByaW9yaXR5UmVxdWVzdHM6IGhpZ2hQcmlvcml0eVJlcXVlc3RzLnJlcXVlc3RzLFxuICAgICAgdXJnZW50UmVxdWVzdHM6IHVyZ2VudFJlcXVlc3RzLnJlcXVlc3RzLFxuICAgICAgdG90YWxIaWdoUHJpb3JpdHk6IGhpZ2hQcmlvcml0eVJlcXVlc3RzLnBhZ2luYXRpb24udG90YWxDb3VudCxcbiAgICAgIHRvdGFsVXJnZW50OiB1cmdlbnRSZXF1ZXN0cy5wYWdpbmF0aW9uLnRvdGFsQ291bnQsXG4gICAgfTtcbiAgfVxuXG4gIEBHZXQoJzppZCcpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdSZXRyaWV2ZSBnZXQgcmVxdWVzdCBkZXRhaWxzJyxcblxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmUgZ2V0IHJlcXVlc3QgZGV0YWlscycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG5cbiAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLk9LKVxuICBhc3luYyBnZXRSZXF1ZXN0RGV0YWlscyhcbiAgICBAUGFyYW0oJ2lkJykgcmVxdWVzdElkOiBzdHJpbmcsXG4gICAgQEN1cnJlbnRVc2VySWQoKSB0aGVyYXBpc3RJZDogc3RyaW5nLFxuICApIHtcbiAgICB0aGlzLmxvZ2dlci5sb2coXG4gICAgICBgVGhlcmFwaXN0ICR7dGhlcmFwaXN0SWR9IGZldGNoaW5nIHJlcXVlc3QgZGV0YWlscyBmb3IgJHtyZXF1ZXN0SWR9YCxcbiAgICApO1xuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWVzdCBJRCBmb3JtYXRcbiAgICBpZiAoIXJlcXVlc3RJZCB8fCByZXF1ZXN0SWQubGVuZ3RoICE9PSAzNikge1xuICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oJ0ludmFsaWQgcmVxdWVzdCBJRCBmb3JtYXQnKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXF1ZXN0cyA9IGF3YWl0IHRoaXMudGhlcmFwaXN0UmVxdWVzdFNlcnZpY2UuZ2V0VGhlcmFwaXN0UmVxdWVzdHMoXG4gICAgICB0aGVyYXBpc3RJZCxcbiAgICAgIHtcbiAgICAgICAgcGFnZTogMSxcbiAgICAgICAgbGltaXQ6IDEsXG4gICAgICAgIHNvcnRCeTogJ3JlcXVlc3RlZEF0JyxcbiAgICAgICAgc29ydE9yZGVyOiAnZGVzYycsXG4gICAgICAgIGluY2x1ZGVFeHBpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIGNvbnN0IHJlcXVlc3QgPSByZXF1ZXN0cy5yZXF1ZXN0cy5maW5kKChyKSA9PiByLmlkID09PSByZXF1ZXN0SWQpO1xuXG4gICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oXG4gICAgICAgIGBSZXF1ZXN0IHdpdGggSUQgJHtyZXF1ZXN0SWR9IG5vdCBmb3VuZCBvciBub3QgYWNjZXNzaWJsZWAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcmVxdWVzdCxcbiAgICB9O1xuICB9XG5cbiAgQFB1dCgnOmlkL2FjY2VwdCcpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdVcGRhdGUgYWNjZXB0IHJlcXVlc3QnLFxuXG4gICAgZGVzY3JpcHRpb246ICdVcGRhdGUgYWNjZXB0IHJlcXVlc3QnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuXG4gICAgZGVzY3JpcHRpb246ICdVcGRhdGVkIHN1Y2Nlc3NmdWxseScsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDAxLCBkZXNjcmlwdGlvbjogJ1VuYXV0aG9yaXplZCcgfSlcbiAgQEh0dHBDb2RlKEh0dHBTdGF0dXMuT0spXG4gIGFzeW5jIGFjY2VwdFJlcXVlc3QoXG4gICAgQFBhcmFtKCdpZCcpIHJlcXVlc3RJZDogc3RyaW5nLFxuICAgIEBCb2R5KG5ldyBab2RWYWxpZGF0aW9uUGlwZShUaGVyYXBpc3RSZXF1ZXN0UmVzcG9uc2VEdG9TY2hlbWEpKVxuICAgIHJlc3BvbnNlRHRvOiBUaGVyYXBpc3RSZXF1ZXN0UmVzcG9uc2VEdG8sXG4gICAgQEN1cnJlbnRVc2VySWQoKSB0aGVyYXBpc3RJZDogc3RyaW5nLFxuICApIHtcbiAgICB0aGlzLmxvZ2dlci5sb2coYFRoZXJhcGlzdCAke3RoZXJhcGlzdElkfSBhY2NlcHRpbmcgcmVxdWVzdCAke3JlcXVlc3RJZH1gKTtcblxuICAgIC8vIFZhbGlkYXRlIHJlcXVlc3QgSUQgZm9ybWF0XG4gICAgaWYgKCFyZXF1ZXN0SWQgfHwgcmVxdWVzdElkLmxlbmd0aCAhPT0gMzYpIHtcbiAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdJbnZhbGlkIHJlcXVlc3QgSUQgZm9ybWF0Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudGhlcmFwaXN0UmVxdWVzdFNlcnZpY2UuYWNjZXB0Q2xpZW50UmVxdWVzdChcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIHRoZXJhcGlzdElkLFxuICAgICAgcmVzcG9uc2VEdG8sXG4gICAgKTtcbiAgfVxuXG4gIEBQdXQoJzppZC9kZWNsaW5lJylcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ1VwZGF0ZSBkZWNsaW5lIHJlcXVlc3QnLFxuXG4gICAgZGVzY3JpcHRpb246ICdVcGRhdGUgZGVjbGluZSByZXF1ZXN0JyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcblxuICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlZCBzdWNjZXNzZnVsbHknLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLk9LKVxuICBhc3luYyBkZWNsaW5lUmVxdWVzdChcbiAgICBAUGFyYW0oJ2lkJykgcmVxdWVzdElkOiBzdHJpbmcsXG4gICAgQEJvZHkobmV3IFpvZFZhbGlkYXRpb25QaXBlKFRoZXJhcGlzdFJlcXVlc3RSZXNwb25zZUR0b1NjaGVtYSkpXG4gICAgcmVzcG9uc2VEdG86IFRoZXJhcGlzdFJlcXVlc3RSZXNwb25zZUR0byxcbiAgICBAQ3VycmVudFVzZXJJZCgpIHRoZXJhcGlzdElkOiBzdHJpbmcsXG4gICkge1xuICAgIHRoaXMubG9nZ2VyLmxvZyhgVGhlcmFwaXN0ICR7dGhlcmFwaXN0SWR9IGRlY2xpbmluZyByZXF1ZXN0ICR7cmVxdWVzdElkfWApO1xuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWVzdCBJRCBmb3JtYXRcbiAgICBpZiAoIXJlcXVlc3RJZCB8fCByZXF1ZXN0SWQubGVuZ3RoICE9PSAzNikge1xuICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oJ0ludmFsaWQgcmVxdWVzdCBJRCBmb3JtYXQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy50aGVyYXBpc3RSZXF1ZXN0U2VydmljZS5kZWNsaW5lQ2xpZW50UmVxdWVzdChcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIHRoZXJhcGlzdElkLFxuICAgICAgcmVzcG9uc2VEdG8sXG4gICAgKTtcbiAgfVxuXG4gIEBQb3N0KCdidWxrLWFjdGlvbicpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdDcmVhdGUgcGVyZm9ybSBidWxrIGFjdGlvbicsXG5cbiAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZSBwZXJmb3JtIGJ1bGsgYWN0aW9uJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMSxcblxuICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLk9LKVxuICBhc3luYyBwZXJmb3JtQnVsa0FjdGlvbihcbiAgICBAQm9keShuZXcgWm9kVmFsaWRhdGlvblBpcGUoQnVsa1RoZXJhcGlzdEFjdGlvbkR0b1NjaGVtYSkpXG4gICAgYWN0aW9uRHRvOiBCdWxrVGhlcmFwaXN0QWN0aW9uRHRvLFxuICAgIEBDdXJyZW50VXNlcklkKCkgdGhlcmFwaXN0SWQ6IHN0cmluZyxcbiAgKSB7XG4gICAgdGhpcy5sb2dnZXIubG9nKFxuICAgICAgYFRoZXJhcGlzdCAke3RoZXJhcGlzdElkfSBwZXJmb3JtaW5nIGJ1bGsgJHthY3Rpb25EdG8uYWN0aW9ufSBvbiAke2FjdGlvbkR0by5yZXF1ZXN0SWRzLmxlbmd0aH0gcmVxdWVzdHNgLFxuICAgICk7XG4gICAgcmV0dXJuIHRoaXMudGhlcmFwaXN0UmVxdWVzdFNlcnZpY2UucGVyZm9ybUJ1bGtBY3Rpb24oXG4gICAgICB0aGVyYXBpc3RJZCxcbiAgICAgIGFjdGlvbkR0byxcbiAgICApO1xuICB9XG5cbiAgQEdldCgnc3RhdGlzdGljcycpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdSZXRyaWV2ZSBnZXQgcmVxdWVzdCBzdGF0aXN0aWNzJyxcblxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmUgZ2V0IHJlcXVlc3Qgc3RhdGlzdGljcycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG5cbiAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLk9LKVxuICBhc3luYyBnZXRSZXF1ZXN0U3RhdGlzdGljcyhAQ3VycmVudFVzZXJJZCgpIHRoZXJhcGlzdElkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmxvZ2dlci5sb2coYFRoZXJhcGlzdCAke3RoZXJhcGlzdElkfSBmZXRjaGluZyByZXF1ZXN0IHN0YXRpc3RpY3NgKTtcbiAgICByZXR1cm4gdGhpcy50aGVyYXBpc3RSZXF1ZXN0U2VydmljZS5nZXRUaGVyYXBpc3RSZXF1ZXN0U3RhdGlzdGljcyhcbiAgICAgIHRoZXJhcGlzdElkLFxuICAgICk7XG4gIH1cblxuICBAR2V0KCdyZWNlbnQnKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnUmV0cmlldmUgZ2V0IHJlY2VudCByZXF1ZXN0cycsXG5cbiAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlIGdldCByZWNlbnQgcmVxdWVzdHMnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuXG4gICAgZGVzY3JpcHRpb246ICdSZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDEsIGRlc2NyaXB0aW9uOiAnVW5hdXRob3JpemVkJyB9KVxuICBASHR0cENvZGUoSHR0cFN0YXR1cy5PSylcbiAgYXN5bmMgZ2V0UmVjZW50UmVxdWVzdHMoQEN1cnJlbnRVc2VySWQoKSB0aGVyYXBpc3RJZDogc3RyaW5nKSB7XG4gICAgdGhpcy5sb2dnZXIubG9nKGBUaGVyYXBpc3QgJHt0aGVyYXBpc3RJZH0gZmV0Y2hpbmcgcmVjZW50IHJlcXVlc3RzYCk7XG5cbiAgICBjb25zdCByZWNlbnRSZXF1ZXN0cyA9XG4gICAgICBhd2FpdCB0aGlzLnRoZXJhcGlzdFJlcXVlc3RTZXJ2aWNlLmdldFRoZXJhcGlzdFJlcXVlc3RzKHRoZXJhcGlzdElkLCB7XG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIGxpbWl0OiAxMCxcbiAgICAgICAgc29ydEJ5OiAncmVxdWVzdGVkQXQnLFxuICAgICAgICBzb3J0T3JkZXI6ICdkZXNjJyxcbiAgICAgICAgaW5jbHVkZUV4cGlyZWQ6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHJlY2VudFJlcXVlc3RzOiByZWNlbnRSZXF1ZXN0cy5yZXF1ZXN0cyxcbiAgICAgIGhhc01vcmU6IHJlY2VudFJlcXVlc3RzLnBhZ2luYXRpb24udG90YWxDb3VudCA+IDEwLFxuICAgICAgc3VtbWFyeTogcmVjZW50UmVxdWVzdHMuc3VtbWFyeSxcbiAgICB9O1xuICB9XG5cbiAgQEdldCgnZGFzaGJvYXJkL3N1bW1hcnknKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnUmV0cmlldmUgZ2V0IGRhc2hib2FyZCBzdW1tYXJ5JyxcblxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmUgZ2V0IGRhc2hib2FyZCBzdW1tYXJ5JyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcblxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDAxLCBkZXNjcmlwdGlvbjogJ1VuYXV0aG9yaXplZCcgfSlcbiAgQEh0dHBDb2RlKEh0dHBTdGF0dXMuT0spXG4gIGFzeW5jIGdldERhc2hib2FyZFN1bW1hcnkoQEN1cnJlbnRVc2VySWQoKSB0aGVyYXBpc3RJZDogc3RyaW5nKSB7XG4gICAgdGhpcy5sb2dnZXIubG9nKGBUaGVyYXBpc3QgJHt0aGVyYXBpc3RJZH0gZmV0Y2hpbmcgZGFzaGJvYXJkIHN1bW1hcnlgKTtcblxuICAgIGNvbnN0IFtzdGF0aXN0aWNzLCBwZW5kaW5nUmVxdWVzdHMsIGhpZ2hQcmlvcml0eVJlcXVlc3RzXSA9XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMudGhlcmFwaXN0UmVxdWVzdFNlcnZpY2UuZ2V0VGhlcmFwaXN0UmVxdWVzdFN0YXRpc3RpY3ModGhlcmFwaXN0SWQpLFxuICAgICAgICB0aGlzLnRoZXJhcGlzdFJlcXVlc3RTZXJ2aWNlLmdldFRoZXJhcGlzdFJlcXVlc3RzKHRoZXJhcGlzdElkLCB7XG4gICAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICBsaW1pdDogNSxcbiAgICAgICAgICBzb3J0Qnk6ICdyZXF1ZXN0ZWRBdCcsXG4gICAgICAgICAgc29ydE9yZGVyOiAnYXNjJyxcbiAgICAgICAgICBpbmNsdWRlRXhwaXJlZDogZmFsc2UsXG4gICAgICAgIH0pLFxuICAgICAgICB0aGlzLnRoZXJhcGlzdFJlcXVlc3RTZXJ2aWNlLmdldFRoZXJhcGlzdFJlcXVlc3RzKHRoZXJhcGlzdElkLCB7XG4gICAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgICAgcHJpb3JpdHk6ICdISUdIJyxcbiAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgIGxpbWl0OiAzLFxuICAgICAgICAgIHNvcnRCeTogJ3JlcXVlc3RlZEF0JyxcbiAgICAgICAgICBzb3J0T3JkZXI6ICdhc2MnLFxuICAgICAgICAgIGluY2x1ZGVFeHBpcmVkOiBmYWxzZSxcbiAgICAgICAgfSksXG4gICAgICBdKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgc3RhdGlzdGljcyxcbiAgICAgIHJlY2VudFBlbmRpbmdSZXF1ZXN0czogcGVuZGluZ1JlcXVlc3RzLnJlcXVlc3RzLFxuICAgICAgaGlnaFByaW9yaXR5UmVxdWVzdHM6IGhpZ2hQcmlvcml0eVJlcXVlc3RzLnJlcXVlc3RzLFxuICAgICAgYWN0aW9uUmVxdWlyZWQ6IHBlbmRpbmdSZXF1ZXN0cy5wYWdpbmF0aW9uLnRvdGFsQ291bnQgPiAwLFxuICAgICAgaGFzVXJnZW50UmVxdWVzdHM6IGhpZ2hQcmlvcml0eVJlcXVlc3RzLnJlcXVlc3RzLnNvbWUoXG4gICAgICAgIChyZXEpID0+IHJlcS5wcmlvcml0eSA9PT0gJ1VSR0VOVCcsXG4gICAgICApLFxuICAgIH07XG4gIH1cblxuICBAR2V0KCdjbGllbnQvOmNsaWVudElkL2hpc3RvcnknKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnUmV0cmlldmUgZ2V0IGNsaWVudCByZXF1ZXN0IGhpc3RvcnknLFxuXG4gICAgZGVzY3JpcHRpb246ICdSZXRyaWV2ZSBnZXQgY2xpZW50IHJlcXVlc3QgaGlzdG9yeScsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG5cbiAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLk9LKVxuICBhc3luYyBnZXRDbGllbnRSZXF1ZXN0SGlzdG9yeShcbiAgICBAUGFyYW0oJ2NsaWVudElkJykgY2xpZW50SWQ6IHN0cmluZyxcbiAgICBAQ3VycmVudFVzZXJJZCgpIHRoZXJhcGlzdElkOiBzdHJpbmcsXG4gICkge1xuICAgIHRoaXMubG9nZ2VyLmxvZyhcbiAgICAgIGBUaGVyYXBpc3QgJHt0aGVyYXBpc3RJZH0gZmV0Y2hpbmcgcmVxdWVzdCBoaXN0b3J5IGZvciBjbGllbnQgJHtjbGllbnRJZH1gLFxuICAgICk7XG5cbiAgICAvLyBWYWxpZGF0ZSBjbGllbnQgSUQgZm9ybWF0XG4gICAgaWYgKCFjbGllbnRJZCB8fCBjbGllbnRJZC5sZW5ndGggIT09IDM2KSB7XG4gICAgICB0aHJvdyBuZXcgQmFkUmVxdWVzdEV4Y2VwdGlvbignSW52YWxpZCBjbGllbnQgSUQgZm9ybWF0Jyk7XG4gICAgfVxuXG4gICAgY29uc3QgY2xpZW50SGlzdG9yeSA9XG4gICAgICBhd2FpdCB0aGlzLnRoZXJhcGlzdFJlcXVlc3RTZXJ2aWNlLmdldFRoZXJhcGlzdFJlcXVlc3RzKHRoZXJhcGlzdElkLCB7XG4gICAgICAgIGNsaWVudElkLFxuICAgICAgICBwYWdlOiAxLFxuICAgICAgICBsaW1pdDogNTAsXG4gICAgICAgIHNvcnRCeTogJ3JlcXVlc3RlZEF0JyxcbiAgICAgICAgc29ydE9yZGVyOiAnZGVzYycsXG4gICAgICAgIGluY2x1ZGVFeHBpcmVkOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGNsaWVudElkLFxuICAgICAgcmVxdWVzdEhpc3Rvcnk6IGNsaWVudEhpc3RvcnkucmVxdWVzdHMsXG4gICAgICB0b3RhbFJlcXVlc3RzOiBjbGllbnRIaXN0b3J5LnBhZ2luYXRpb24udG90YWxDb3VudCxcbiAgICAgIGhhc0FjdGl2ZVJlbGF0aW9uc2hpcDogY2xpZW50SGlzdG9yeS5yZXF1ZXN0cy5zb21lKFxuICAgICAgICAocmVxKSA9PiByZXEuc3RhdHVzID09PSAnQUNDRVBURUQnLFxuICAgICAgKSxcbiAgICB9O1xuICB9XG5cbiAgQEdldCgnZmlsdGVycy9vcHRpb25zJylcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ1JldHJpZXZlIGdldCBmaWx0ZXIgb3B0aW9ucycsXG5cbiAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlIGdldCBmaWx0ZXIgb3B0aW9ucycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG5cbiAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdVbmF1dGhvcml6ZWQnIH0pXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLk9LKVxuICBhc3luYyBnZXRGaWx0ZXJPcHRpb25zKEBDdXJyZW50VXNlcklkKCkgdGhlcmFwaXN0SWQ6IHN0cmluZykge1xuICAgIHRoaXMubG9nZ2VyLmxvZyhgVGhlcmFwaXN0ICR7dGhlcmFwaXN0SWR9IGZldGNoaW5nIGZpbHRlciBvcHRpb25zYCk7XG5cbiAgICAvLyBSZXR1cm4gYXZhaWxhYmxlIGZpbHRlciBvcHRpb25zIGZvciB0aGUgZnJvbnRlbmRcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGZpbHRlck9wdGlvbnM6IHtcbiAgICAgICAgc3RhdHVzZXM6IFtcbiAgICAgICAgICAnUEVORElORycsXG4gICAgICAgICAgJ0FDQ0VQVEVEJyxcbiAgICAgICAgICAnREVDTElORUQnLFxuICAgICAgICAgICdFWFBJUkVEJyxcbiAgICAgICAgICAnQ0FOQ0VMTEVEJyxcbiAgICAgICAgICAnV0lUSERSQVdOJyxcbiAgICAgICAgXSxcbiAgICAgICAgcHJpb3JpdGllczogWydMT1cnLCAnTk9STUFMJywgJ0hJR0gnLCAnVVJHRU5UJ10sXG4gICAgICAgIHNvcnRPcHRpb25zOiBbXG4gICAgICAgICAgeyB2YWx1ZTogJ3JlcXVlc3RlZEF0JywgbGFiZWw6ICdSZXF1ZXN0IERhdGUnIH0sXG4gICAgICAgICAgeyB2YWx1ZTogJ3Jlc3BvbmRlZEF0JywgbGFiZWw6ICdSZXNwb25zZSBEYXRlJyB9LFxuICAgICAgICAgIHsgdmFsdWU6ICdwcmlvcml0eScsIGxhYmVsOiAnUHJpb3JpdHknIH0sXG4gICAgICAgICAgeyB2YWx1ZTogJ3N0YXR1cycsIGxhYmVsOiAnU3RhdHVzJyB9LFxuICAgICAgICBdLFxuICAgICAgICBzb3J0T3JkZXJzOiBbXG4gICAgICAgICAgeyB2YWx1ZTogJ2Rlc2MnLCBsYWJlbDogJ05ld2VzdCBGaXJzdCcgfSxcbiAgICAgICAgICB7IHZhbHVlOiAnYXNjJywgbGFiZWw6ICdPbGRlc3QgRmlyc3QnIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGJ1bGtBY3Rpb25zOiBbXG4gICAgICAgICAgeyB2YWx1ZTogJ2FjY2VwdCcsIGxhYmVsOiAnQWNjZXB0IFNlbGVjdGVkJyB9LFxuICAgICAgICAgIHsgdmFsdWU6ICdkZWNsaW5lJywgbGFiZWw6ICdEZWNsaW5lIFNlbGVjdGVkJyB9LFxuICAgICAgICAgIHsgdmFsdWU6ICdtYXJrX3Jldmlld2VkJywgbGFiZWw6ICdNYXJrIGFzIFJldmlld2VkJyB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgQEdldCgnY291bnQvcGVuZGluZycpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdSZXRyaWV2ZSBnZXQgcGVuZGluZyBjb3VudCcsXG5cbiAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlIGdldCBwZW5kaW5nIGNvdW50JyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcblxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDAxLCBkZXNjcmlwdGlvbjogJ1VuYXV0aG9yaXplZCcgfSlcbiAgQEh0dHBDb2RlKEh0dHBTdGF0dXMuT0spXG4gIGFzeW5jIGdldFBlbmRpbmdDb3VudChAQ3VycmVudFVzZXJJZCgpIHRoZXJhcGlzdElkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmxvZ2dlci5sb2coYFRoZXJhcGlzdCAke3RoZXJhcGlzdElkfSBmZXRjaGluZyBwZW5kaW5nIHJlcXVlc3RzIGNvdW50YCk7XG5cbiAgICBjb25zdCBzdGF0aXN0aWNzID1cbiAgICAgIGF3YWl0IHRoaXMudGhlcmFwaXN0UmVxdWVzdFNlcnZpY2UuZ2V0VGhlcmFwaXN0UmVxdWVzdFN0YXRpc3RpY3MoXG4gICAgICAgIHRoZXJhcGlzdElkLFxuICAgICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcGVuZGluZ0NvdW50OiBzdGF0aXN0aWNzLnBlbmRpbmcsXG4gICAgICB0b3RhbFJlY2VpdmVkOiBzdGF0aXN0aWNzLnRvdGFsUmVjZWl2ZWQsXG4gICAgICBuZWVkc0F0dGVudGlvbjogc3RhdGlzdGljcy5wZW5kaW5nID4gMCxcbiAgICB9O1xuICB9XG5cbiAgQEdldCgnYW5hbHl0aWNzL3Jlc3BvbnNlLXRpbWUnKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnUmV0cmlldmUgZ2V0IHJlc3BvbnNlIHRpbWUgYW5hbHl0aWNzJyxcblxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmUgZ2V0IHJlc3BvbnNlIHRpbWUgYW5hbHl0aWNzJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcblxuICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDAxLCBkZXNjcmlwdGlvbjogJ1VuYXV0aG9yaXplZCcgfSlcbiAgQEh0dHBDb2RlKEh0dHBTdGF0dXMuT0spXG4gIGFzeW5jIGdldFJlc3BvbnNlVGltZUFuYWx5dGljcyhAQ3VycmVudFVzZXJJZCgpIHRoZXJhcGlzdElkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmxvZ2dlci5sb2coXG4gICAgICBgVGhlcmFwaXN0ICR7dGhlcmFwaXN0SWR9IGZldGNoaW5nIHJlc3BvbnNlIHRpbWUgYW5hbHl0aWNzYCxcbiAgICApO1xuXG4gICAgY29uc3Qgc3RhdGlzdGljcyA9XG4gICAgICBhd2FpdCB0aGlzLnRoZXJhcGlzdFJlcXVlc3RTZXJ2aWNlLmdldFRoZXJhcGlzdFJlcXVlc3RTdGF0aXN0aWNzKFxuICAgICAgICB0aGVyYXBpc3RJZCxcbiAgICAgICk7XG5cbiAgICAvLyBHZXQgZGV0YWlsZWQgcmVzcG9uc2UgdGltZSBicmVha2Rvd25cbiAgICBjb25zdCByZXNwb25zZVRpbWVCcmVha2Rvd24gPSB7XG4gICAgICBhdmVyYWdlSG91cnM6IHN0YXRpc3RpY3MuYXZlcmFnZVJlc3BvbnNlVGltZSxcbiAgICAgIHBlcmZvcm1hbmNlOiB0aGlzLmNhdGVnb3JpemVSZXNwb25zZVRpbWUoc3RhdGlzdGljcy5hdmVyYWdlUmVzcG9uc2VUaW1lKSxcbiAgICAgIGFjY2VwdGFuY2VSYXRlOiBzdGF0aXN0aWNzLmFjY2VwdGFuY2VSYXRlLFxuICAgICAgdG90YWxSZXNwb25kZWQ6IHN0YXRpc3RpY3MuYWNjZXB0ZWQgKyBzdGF0aXN0aWNzLmRlY2xpbmVkLFxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHJlc3BvbnNlVGltZUFuYWx5dGljczogcmVzcG9uc2VUaW1lQnJlYWtkb3duLFxuICAgICAgcmVjb21tZW5kYXRpb25zOiB0aGlzLmdldFJlc3BvbnNlVGltZVJlY29tbWVuZGF0aW9ucyhcbiAgICAgICAgc3RhdGlzdGljcy5hdmVyYWdlUmVzcG9uc2VUaW1lLFxuICAgICAgICBzdGF0aXN0aWNzLmFjY2VwdGFuY2VSYXRlLFxuICAgICAgKSxcbiAgICB9O1xuICB9XG5cbiAgLy8gPT09PT0gSEVMUEVSIE1FVEhPRFMgPT09PT1cblxuICBwcml2YXRlIGNhdGVnb3JpemVSZXNwb25zZVRpbWUoYXZlcmFnZUhvdXJzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChhdmVyYWdlSG91cnMgPD0gMikgcmV0dXJuICdleGNlbGxlbnQnO1xuICAgIGlmIChhdmVyYWdlSG91cnMgPD0gNikgcmV0dXJuICdnb29kJztcbiAgICBpZiAoYXZlcmFnZUhvdXJzIDw9IDI0KSByZXR1cm4gJ2ZhaXInO1xuICAgIHJldHVybiAnbmVlZHNfaW1wcm92ZW1lbnQnO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRSZXNwb25zZVRpbWVSZWNvbW1lbmRhdGlvbnMoXG4gICAgYXZlcmFnZUhvdXJzOiBudW1iZXIsXG4gICAgYWNjZXB0YW5jZVJhdGU6IG51bWJlcixcbiAgKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChhdmVyYWdlSG91cnMgPiAyNCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgICdDb25zaWRlciByZXNwb25kaW5nIHRvIGNsaWVudCByZXF1ZXN0cyB3aXRoaW4gMjQgaG91cnMgZm9yIGJldHRlciBjbGllbnQgZXhwZXJpZW5jZScsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChhY2NlcHRhbmNlUmF0ZSA8IDMwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgJ1lvdXIgYWNjZXB0YW5jZSByYXRlIGlzIGxvdy4gQ29uc2lkZXIgcmV2aWV3aW5nIHlvdXIgYXZhaWxhYmlsaXR5IGFuZCBjbGllbnQgcHJlZmVyZW5jZXMnLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoYWNjZXB0YW5jZVJhdGUgPiA4MCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgIFwiRXhjZWxsZW50IGFjY2VwdGFuY2UgcmF0ZSEgWW91J3JlIHByb3ZpZGluZyBncmVhdCBhY2Nlc3NpYmlsaXR5IHRvIGNsaWVudHNcIixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGF2ZXJhZ2VIb3VycyA8PSA2ICYmIGFjY2VwdGFuY2VSYXRlID4gNjApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICBcIllvdSdyZSBkb2luZyBncmVhdCB3aXRoIGJvdGggcmVzcG9uc2UgdGltZSBhbmQgYWNjZXB0YW5jZSByYXRlIVwiLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=