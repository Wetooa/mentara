21db5fcbaa494d46904b9634d8be2ad8
"use strict";
/**
 * Comprehensive Test Suite for WorksheetsController
 * Tests worksheet management, file uploads, submissions, and analytics
 */
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const jwt_auth_guard_1 = require("../auth/guards/jwt-auth.guard");
const worksheets_controller_1 = require("./worksheets.controller");
const worksheets_service_1 = require("./worksheets.service");
const supabase_storage_service_1 = require("../common/services/supabase-storage.service");
const enhanced_test_helpers_1 = require("../test-utils/enhanced-test-helpers");
const index_1 = require("../test-utils/index");
describe('WorksheetsController', () => {
    let controller;
    let worksheetsService;
    let supabaseStorageService;
    let module;
    // Mock WorksheetsService
    const mockWorksheetsService = {
        findAll: jest.fn(),
        findById: jest.fn(),
        create: jest.fn(),
        update: jest.fn(),
        delete: jest.fn(),
        createSubmission: jest.fn(),
        getSubmissions: jest.fn(),
        updateSubmission: jest.fn(),
        deleteSubmission: jest.fn(),
        getWorksheetStats: jest.fn(),
        getTherapistWorksheets: jest.fn(),
        getClientWorksheets: jest.fn(),
        searchWorksheets: jest.fn(),
        getWorksheetAnalytics: jest.fn(),
    };
    // Mock SupabaseStorageService
    const mockSupabaseStorageService = {
        uploadFile: jest.fn(),
        uploadFiles: jest.fn(),
        deleteFile: jest.fn(),
        getFileUrl: jest.fn(),
    };
    // Mock JwtAuthGuard
    const mockJwtAuthGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    // Test data
    const mockWorksheet = {
        id: 'worksheet_123456789',
        title: 'Anxiety Management Worksheet',
        description: 'Weekly exercises for managing anxiety symptoms',
        content: 'Please complete the following mindfulness exercises...',
        status: 'assigned',
        clientId: index_1.TEST_USER_IDS.CLIENT,
        therapistId: index_1.TEST_USER_IDS.THERAPIST,
        dueDate: new Date('2024-02-01T00:00:00Z'),
        estimatedDuration: 45,
        difficulty: 'intermediate',
        tags: ['anxiety', 'mindfulness', 'coping'],
        materials: [
            {
                id: 'material_123',
                filename: 'anxiety-guide.pdf',
                url: 'https://storage.example.com/anxiety-guide.pdf',
                fileType: 'pdf',
                size: 1024000,
            },
        ],
        submissions: [
            {
                id: 'submission_123',
                content: 'I completed the breathing exercises and found them helpful...',
                submittedAt: new Date('2024-01-20T14:30:00Z'),
                score: 8,
                feedback: 'Great progress with the exercises!',
            },
        ],
        createdAt: new Date(),
        updatedAt: new Date(),
    };
    const mockWorksheetSubmission = {
        id: 'submission_123456789',
        worksheetId: 'worksheet_123456789',
        clientId: index_1.TEST_USER_IDS.CLIENT,
        content: 'I completed all the exercises as instructed. The breathing techniques were particularly helpful.',
        submittedAt: new Date(),
        score: 9,
        feedback: 'Excellent work! Your understanding of the techniques is clear.',
        therapistNotes: 'Client shows good engagement and understanding',
        attachments: [
            {
                id: 'attachment_123',
                filename: 'exercise-notes.pdf',
                url: 'https://storage.example.com/exercise-notes.pdf',
                fileType: 'pdf',
            },
        ],
        createdAt: new Date(),
        updatedAt: new Date(),
    };
    const mockWorksheetStats = {
        totalWorksheets: 25,
        assignedWorksheets: 8,
        inProgressWorksheets: 12,
        completedWorksheets: 5,
        overdueWorksheets: 3,
        averageCompletionTime: 48.5,
        completionRate: 76.2,
        averageScore: 7.8,
        popularTags: [
            { tag: 'anxiety', count: 15 },
            { tag: 'depression', count: 12 },
            { tag: 'mindfulness', count: 10 },
        ],
        weeklyProgress: [
            { week: '2024-01-15', completed: 3, assigned: 5 },
            { week: '2024-01-22', completed: 4, assigned: 6 },
            { week: '2024-01-29', completed: 2, assigned: 4 },
        ],
    };
    const mockFiles = [
        {
            fieldname: 'files',
            originalname: 'worksheet-material.pdf',
            mimetype: 'application/pdf',
            buffer: Buffer.from('fake pdf content'),
            size: 1024000,
        },
        {
            fieldname: 'files',
            originalname: 'exercise-template.docx',
            mimetype: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
            buffer: Buffer.from('fake docx content'),
            size: 512000,
        },
    ];
    beforeEach(async () => {
        module = await testing_1.Test.createTestingModule({
            controllers: [worksheets_controller_1.WorksheetsController],
            providers: [
                {
                    provide: worksheets_service_1.WorksheetsService,
                    useValue: mockWorksheetsService,
                },
                {
                    provide: supabase_storage_service_1.SupabaseStorageService,
                    useValue: mockSupabaseStorageService,
                },
            ],
        })
            .overrideGuard(jwt_auth_guard_1.JwtAuthGuard)
            .useValue(mockJwtAuthGuard)
            .compile();
        controller = module.get(worksheets_controller_1.WorksheetsController);
        worksheetsService = module.get(worksheets_service_1.WorksheetsService);
        supabaseStorageService = module.get(supabase_storage_service_1.SupabaseStorageService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('Controller Initialization', () => {
        it('should be defined', () => {
            expect(controller).toBeDefined();
        });
        it('should have all services injected', () => {
            expect(worksheetsService).toBeDefined();
            expect(supabaseStorageService).toBeDefined();
        });
    });
    describe('Security Guards', () => {
        it('should be protected by JwtAuthGuard', () => {
            const guards = Reflect.getMetadata('__guards__', worksheets_controller_1.WorksheetsController);
            expect(guards).toContain(jwt_auth_guard_1.JwtAuthGuard);
        });
        it('should have proper route decorators', () => {
            const controllerMetadata = Reflect.getMetadata('path', worksheets_controller_1.WorksheetsController);
            expect(controllerMetadata).toBe('worksheets');
        });
    });
    describe('GET /worksheets', () => {
        const queryParams = {
            userId: index_1.TEST_USER_IDS.CLIENT,
            therapistId: index_1.TEST_USER_IDS.THERAPIST,
            status: 'assigned',
            page: 1,
            limit: 10,
        };
        it('should get all worksheets successfully', async () => {
            const mockResponse = {
                worksheets: [mockWorksheet],
                totalCount: 1,
                page: 1,
                totalPages: 1,
            };
            mockWorksheetsService.findAll.mockResolvedValue(mockResponse);
            const result = await controller.findAll(index_1.TEST_USER_IDS.THERAPIST, queryParams);
            expect(result).toEqual(mockResponse);
            expect(worksheetsService.findAll).toHaveBeenCalledWith(queryParams.userId, queryParams.therapistId, queryParams.status);
        });
        it('should handle empty worksheets list', async () => {
            const emptyResponse = {
                worksheets: [],
                totalCount: 0,
                page: 1,
                totalPages: 0,
            };
            mockWorksheetsService.findAll.mockResolvedValue(emptyResponse);
            const result = await controller.findAll(index_1.TEST_USER_IDS.THERAPIST, {});
            expect(result).toEqual(emptyResponse);
            expect(result.worksheets).toHaveLength(0);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Database connection failed');
            mockWorksheetsService.findAll.mockRejectedValue(serviceError);
            await expect(controller.findAll(index_1.TEST_USER_IDS.THERAPIST, queryParams)).rejects.toThrow(serviceError);
        });
    });
    describe('GET /worksheets/:id', () => {
        it('should get worksheet by id successfully', async () => {
            mockWorksheetsService.findById.mockResolvedValue(mockWorksheet);
            const result = await controller.findById('worksheet_123456789');
            expect(result).toEqual(mockWorksheet);
            expect(worksheetsService.findById).toHaveBeenCalledWith('worksheet_123456789');
        });
        it('should handle worksheet not found', async () => {
            const notFoundError = new common_1.NotFoundException('Worksheet not found');
            mockWorksheetsService.findById.mockRejectedValue(notFoundError);
            await expect(controller.findById('nonexistent-worksheet')).rejects.toThrow(notFoundError);
        });
        it('should include materials and submissions in response', async () => {
            const worksheetWithDetails = {
                ...mockWorksheet,
                materials: mockWorksheet.materials,
                submissions: mockWorksheet.submissions,
            };
            mockWorksheetsService.findById.mockResolvedValue(worksheetWithDetails);
            const result = await controller.findById('worksheet_123456789');
            expect(result.materials).toBeDefined();
            expect(result.submissions).toBeDefined();
            expect(result.materials).toHaveLength(1);
            expect(result.submissions).toHaveLength(1);
        });
    });
    describe('POST /worksheets', () => {
        const createWorksheetDto = {
            title: 'New Anxiety Worksheet',
            description: 'Advanced exercises for anxiety management',
            content: 'Complete the following cognitive restructuring exercises...',
            clientId: index_1.TEST_USER_IDS.CLIENT,
            therapistId: index_1.TEST_USER_IDS.THERAPIST,
            dueDate: '2024-02-15T00:00:00Z',
            estimatedDuration: 60,
            difficulty: 'advanced',
            tags: ['anxiety', 'CBT', 'cognitive'],
        };
        it('should create worksheet without files successfully', async () => {
            const createdWorksheet = {
                ...mockWorksheet,
                ...createWorksheetDto,
                uploadedFiles: [],
            };
            mockWorksheetsService.create.mockResolvedValue(createdWorksheet);
            const result = await controller.create(index_1.TEST_USER_IDS.THERAPIST, createWorksheetDto, []);
            expect(result).toEqual(createdWorksheet);
            expect(worksheetsService.create).toHaveBeenCalledWith(createWorksheetDto, createWorksheetDto.clientId, createWorksheetDto.therapistId, []);
        });
        it('should create worksheet with files successfully', async () => {
            const uploadedFiles = [
                {
                    id: 'file_123',
                    filename: 'worksheet-material.pdf',
                    url: 'https://storage.example.com/worksheet-material.pdf',
                },
                {
                    id: 'file_124',
                    filename: 'exercise-template.docx',
                    url: 'https://storage.example.com/exercise-template.docx',
                },
            ];
            const createdWorksheet = {
                ...mockWorksheet,
                ...createWorksheetDto,
                uploadedFiles,
            };
            mockWorksheetsService.create.mockResolvedValue(createdWorksheet);
            const result = await controller.create(index_1.TEST_USER_IDS.THERAPIST, createWorksheetDto, mockFiles);
            expect(result).toEqual(createdWorksheet);
            expect(worksheetsService.create).toHaveBeenCalledWith(createWorksheetDto, createWorksheetDto.clientId, createWorksheetDto.therapistId, mockFiles);
        });
        it('should handle file upload errors', async () => {
            const uploadError = new common_1.BadRequestException('File upload failed');
            mockWorksheetsService.create.mockRejectedValue(uploadError);
            await expect(controller.create(index_1.TEST_USER_IDS.THERAPIST, createWorksheetDto, mockFiles)).rejects.toThrow(uploadError);
        });
        it('should validate required fields', async () => {
            const invalidDto = {
                title: '', // Empty title
                clientId: index_1.TEST_USER_IDS.CLIENT,
                therapistId: index_1.TEST_USER_IDS.THERAPIST,
            };
            const validationError = new common_1.BadRequestException('Title is required');
            mockWorksheetsService.create.mockRejectedValue(validationError);
            await expect(controller.create(index_1.TEST_USER_IDS.THERAPIST, invalidDto, [])).rejects.toThrow(validationError);
        });
        it('should handle maximum file limit', async () => {
            const tooManyFiles = Array(6).fill(mockFiles[0]); // 6 files exceeds limit of 5
            const limitError = new common_1.BadRequestException('Maximum 5 files allowed');
            mockWorksheetsService.create.mockRejectedValue(limitError);
            await expect(controller.create(index_1.TEST_USER_IDS.THERAPIST, createWorksheetDto, tooManyFiles)).rejects.toThrow(limitError);
        });
    });
    describe('PUT /worksheets/:id', () => {
        const updateWorksheetDto = {
            title: 'Updated Worksheet Title',
            description: 'Updated description with new exercises',
            content: 'Updated content with additional instructions...',
            status: 'in_progress',
            dueDate: '2024-02-20T00:00:00Z',
        };
        it('should update worksheet successfully', async () => {
            const updatedWorksheet = { ...mockWorksheet, ...updateWorksheetDto };
            mockWorksheetsService.update.mockResolvedValue(updatedWorksheet);
            const result = await controller.update(index_1.TEST_USER_IDS.THERAPIST, 'worksheet_123456789', updateWorksheetDto);
            expect(result).toEqual(updatedWorksheet);
            expect(worksheetsService.update).toHaveBeenCalledWith('worksheet_123456789', updateWorksheetDto);
        });
        it('should handle partial updates', async () => {
            const partialUpdate = { status: 'completed' };
            const updatedWorksheet = { ...mockWorksheet, ...partialUpdate };
            mockWorksheetsService.update.mockResolvedValue(updatedWorksheet);
            const result = await controller.update(index_1.TEST_USER_IDS.THERAPIST, 'worksheet_123456789', partialUpdate);
            expect(result).toEqual(updatedWorksheet);
            expect(worksheetsService.update).toHaveBeenCalledWith('worksheet_123456789', partialUpdate);
        });
        it('should handle worksheet not found', async () => {
            const notFoundError = new common_1.NotFoundException('Worksheet not found');
            mockWorksheetsService.update.mockRejectedValue(notFoundError);
            await expect(controller.update(index_1.TEST_USER_IDS.THERAPIST, 'nonexistent-worksheet', updateWorksheetDto)).rejects.toThrow(notFoundError);
        });
        it('should handle invalid status transitions', async () => {
            const invalidStatusError = new common_1.BadRequestException('Invalid status transition');
            mockWorksheetsService.update.mockRejectedValue(invalidStatusError);
            await expect(controller.update(index_1.TEST_USER_IDS.THERAPIST, 'worksheet_123456789', { status: 'invalid_status' })).rejects.toThrow(invalidStatusError);
        });
    });
    describe('DELETE /worksheets/:id', () => {
        it('should delete worksheet successfully', async () => {
            const deleteResponse = {
                success: true,
                message: 'Worksheet deleted successfully',
                deletedId: 'worksheet_123456789',
            };
            mockWorksheetsService.delete.mockResolvedValue(deleteResponse);
            const result = await controller.delete(index_1.TEST_USER_IDS.THERAPIST, 'worksheet_123456789');
            expect(result).toEqual(deleteResponse);
            expect(worksheetsService.delete).toHaveBeenCalledWith('worksheet_123456789');
        });
        it('should handle worksheet not found for deletion', async () => {
            const notFoundError = new common_1.NotFoundException('Worksheet not found');
            mockWorksheetsService.delete.mockRejectedValue(notFoundError);
            await expect(controller.delete(index_1.TEST_USER_IDS.THERAPIST, 'nonexistent-worksheet')).rejects.toThrow(notFoundError);
        });
        it('should handle deletion of worksheet with dependencies', async () => {
            const dependencyError = new common_1.BadRequestException('Cannot delete worksheet with existing submissions');
            mockWorksheetsService.delete.mockRejectedValue(dependencyError);
            await expect(controller.delete(index_1.TEST_USER_IDS.THERAPIST, 'worksheet_123456789')).rejects.toThrow(dependencyError);
        });
    });
    describe('Worksheet Submissions', () => {
        describe('POST /worksheets/submissions', () => {
            const createSubmissionDto = {
                worksheetId: 'worksheet_123456789',
                content: 'I completed all the exercises and found them very helpful.',
                clientNotes: 'The breathing exercises were particularly effective.',
                timeSpent: 45,
            };
            it('should create submission successfully', async () => {
                mockWorksheetsService.createSubmission.mockResolvedValue(mockWorksheetSubmission);
                const result = await controller.createSubmission(index_1.TEST_USER_IDS.CLIENT, createSubmissionDto);
                expect(result).toEqual(mockWorksheetSubmission);
                expect(worksheetsService.createSubmission).toHaveBeenCalledWith(createSubmissionDto);
            });
            it('should handle submission with attachments', async () => {
                const submissionWithAttachments = {
                    ...mockWorksheetSubmission,
                    attachments: mockWorksheetSubmission.attachments,
                };
                mockWorksheetsService.createSubmission.mockResolvedValue(submissionWithAttachments);
                const result = await controller.createSubmission(index_1.TEST_USER_IDS.CLIENT, createSubmissionDto);
                expect(result.attachments).toBeDefined();
                expect(result.attachments).toHaveLength(1);
            });
            it('should handle invalid worksheet id', async () => {
                const invalidError = new common_1.BadRequestException('Invalid worksheet ID');
                mockWorksheetsService.createSubmission.mockRejectedValue(invalidError);
                await expect(controller.createSubmission(index_1.TEST_USER_IDS.CLIENT, {
                    ...createSubmissionDto,
                    worksheetId: 'invalid-id',
                })).rejects.toThrow(invalidError);
            });
        });
        describe('GET /worksheets/:id/submissions', () => {
            it('should get all submissions for worksheet', async () => {
                const mockSubmissions = [mockWorksheetSubmission];
                mockWorksheetsService.getSubmissions.mockResolvedValue(mockSubmissions);
                const result = await controller.getSubmissions('worksheet_123456789');
                expect(result).toEqual(mockSubmissions);
                expect(worksheetsService.getSubmissions).toHaveBeenCalledWith('worksheet_123456789');
            });
            it('should handle empty submissions list', async () => {
                mockWorksheetsService.getSubmissions.mockResolvedValue([]);
                const result = await controller.getSubmissions('worksheet_123456789');
                expect(result).toEqual([]);
            });
        });
        describe('PUT /worksheets/submissions/:id', () => {
            const updateSubmissionDto = {
                content: 'Updated submission content with additional insights',
                score: 9,
                feedback: 'Excellent improvement shown in this submission',
                therapistNotes: 'Client demonstrates clear understanding of concepts',
            };
            it('should update submission successfully', async () => {
                const updatedSubmission = { ...mockWorksheetSubmission, ...updateSubmissionDto };
                mockWorksheetsService.updateSubmission.mockResolvedValue(updatedSubmission);
                const result = await controller.updateSubmission(index_1.TEST_USER_IDS.THERAPIST, 'submission_123456789', updateSubmissionDto);
                expect(result).toEqual(updatedSubmission);
                expect(worksheetsService.updateSubmission).toHaveBeenCalledWith('submission_123456789', updateSubmissionDto);
            });
            it('should handle submission not found', async () => {
                const notFoundError = new common_1.NotFoundException('Submission not found');
                mockWorksheetsService.updateSubmission.mockRejectedValue(notFoundError);
                await expect(controller.updateSubmission(index_1.TEST_USER_IDS.THERAPIST, 'nonexistent-submission', updateSubmissionDto)).rejects.toThrow(notFoundError);
            });
        });
        describe('DELETE /worksheets/submissions/:id', () => {
            it('should delete submission successfully', async () => {
                const deleteResponse = {
                    success: true,
                    message: 'Submission deleted successfully',
                    deletedId: 'submission_123456789',
                };
                mockWorksheetsService.deleteSubmission.mockResolvedValue(deleteResponse);
                const result = await controller.deleteSubmission(index_1.TEST_USER_IDS.CLIENT, 'submission_123456789');
                expect(result).toEqual(deleteResponse);
                expect(worksheetsService.deleteSubmission).toHaveBeenCalledWith('submission_123456789');
            });
        });
    });
    describe('Analytics and Statistics', () => {
        describe('GET /worksheets/stats', () => {
            it('should get worksheet statistics successfully', async () => {
                mockWorksheetsService.getWorksheetStats.mockResolvedValue(mockWorksheetStats);
                const result = await controller.getWorksheetStats(index_1.TEST_USER_IDS.THERAPIST);
                expect(result).toEqual(mockWorksheetStats);
                expect(worksheetsService.getWorksheetStats).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST);
            });
            it('should handle empty statistics', async () => {
                const emptyStats = {
                    totalWorksheets: 0,
                    assignedWorksheets: 0,
                    inProgressWorksheets: 0,
                    completedWorksheets: 0,
                    overdueWorksheets: 0,
                    averageCompletionTime: 0,
                    completionRate: 0,
                    averageScore: 0,
                    popularTags: [],
                    weeklyProgress: [],
                };
                mockWorksheetsService.getWorksheetStats.mockResolvedValue(emptyStats);
                const result = await controller.getWorksheetStats(index_1.TEST_USER_IDS.THERAPIST);
                expect(result).toEqual(emptyStats);
                expect(result.totalWorksheets).toBe(0);
            });
        });
        describe('GET /worksheets/analytics', () => {
            const analyticsQuery = {
                startDate: '2024-01-01T00:00:00Z',
                endDate: '2024-01-31T23:59:59Z',
                groupBy: 'week',
            };
            it('should get worksheet analytics successfully', async () => {
                const mockAnalytics = {
                    periodStats: {
                        totalAssigned: 50,
                        totalCompleted: 38,
                        totalInProgress: 8,
                        totalOverdue: 4,
                        completionRate: 76.0,
                        averageScore: 8.2,
                    },
                    timeline: [
                        { period: '2024-01-01', assigned: 12, completed: 9, inProgress: 2, overdue: 1 },
                        { period: '2024-01-08', assigned: 15, completed: 11, inProgress: 3, overdue: 1 },
                        { period: '2024-01-15', assigned: 13, completed: 10, inProgress: 2, overdue: 1 },
                        { period: '2024-01-22', assigned: 10, completed: 8, inProgress: 1, overdue: 1 },
                    ],
                    topPerformingClients: [
                        { clientId: index_1.TEST_USER_IDS.CLIENT, completionRate: 95.0, averageScore: 9.2 },
                    ],
                    categoryBreakdown: [
                        { category: 'anxiety', count: 18, completionRate: 82.0 },
                        { category: 'depression', count: 15, completionRate: 73.0 },
                        { category: 'mindfulness', count: 12, completionRate: 88.0 },
                    ],
                };
                mockWorksheetsService.getWorksheetAnalytics.mockResolvedValue(mockAnalytics);
                const result = await controller.getWorksheetAnalytics(index_1.TEST_USER_IDS.THERAPIST, analyticsQuery);
                expect(result).toEqual(mockAnalytics);
                expect(worksheetsService.getWorksheetAnalytics).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST, analyticsQuery);
            });
        });
    });
    describe('Search and Filtering', () => {
        describe('GET /worksheets/search', () => {
            const searchQuery = {
                query: 'anxiety management',
                tags: ['anxiety', 'CBT'],
                status: 'assigned',
                clientId: index_1.TEST_USER_IDS.CLIENT,
                page: 1,
                limit: 10,
            };
            it('should search worksheets successfully', async () => {
                const searchResults = {
                    worksheets: [mockWorksheet],
                    totalCount: 1,
                    page: 1,
                    totalPages: 1,
                    searchMetadata: {
                        query: searchQuery.query,
                        tags: searchQuery.tags,
                        resultsFound: 1,
                        searchTime: 45,
                    },
                };
                mockWorksheetsService.searchWorksheets.mockResolvedValue(searchResults);
                const result = await controller.searchWorksheets(index_1.TEST_USER_IDS.THERAPIST, searchQuery);
                expect(result).toEqual(searchResults);
                expect(worksheetsService.searchWorksheets).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST, searchQuery);
            });
            it('should handle empty search results', async () => {
                const emptyResults = {
                    worksheets: [],
                    totalCount: 0,
                    page: 1,
                    totalPages: 0,
                    searchMetadata: {
                        query: 'nonexistent term',
                        tags: [],
                        resultsFound: 0,
                        searchTime: 12,
                    },
                };
                mockWorksheetsService.searchWorksheets.mockResolvedValue(emptyResults);
                const result = await controller.searchWorksheets(index_1.TEST_USER_IDS.THERAPIST, {
                    query: 'nonexistent term',
                });
                expect(result).toEqual(emptyResults);
                expect(result.worksheets).toHaveLength(0);
            });
        });
    });
    describe('Error Handling', () => {
        it('should handle service unavailable scenarios', async () => {
            const serviceError = new Error('Service temporarily unavailable');
            mockWorksheetsService.findAll.mockRejectedValue(serviceError);
            await expect(controller.findAll(index_1.TEST_USER_IDS.THERAPIST, {})).rejects.toThrow(serviceError);
        });
        it('should handle file storage errors', async () => {
            const storageError = new Error('Storage service unavailable');
            mockWorksheetsService.create.mockRejectedValue(storageError);
            await expect(controller.create(index_1.TEST_USER_IDS.THERAPIST, {
                title: 'Test Worksheet',
                clientId: index_1.TEST_USER_IDS.CLIENT,
                therapistId: index_1.TEST_USER_IDS.THERAPIST,
            }, mockFiles)).rejects.toThrow(storageError);
        });
        it('should handle concurrent worksheet updates', async () => {
            const concurrencyError = new Error('Worksheet is being updated by another process');
            mockWorksheetsService.update.mockRejectedValue(concurrencyError);
            await expect(controller.update(index_1.TEST_USER_IDS.THERAPIST, 'worksheet_123456789', { title: 'Updated' })).rejects.toThrow(concurrencyError);
        });
        it('should handle database connection errors', async () => {
            const dbError = new Error('Database connection failed');
            mockWorksheetsService.getWorksheetStats.mockRejectedValue(dbError);
            await expect(controller.getWorksheetStats(index_1.TEST_USER_IDS.THERAPIST)).rejects.toThrow(dbError);
        });
    });
    describe('Response Format Validation', () => {
        it('should return properly formatted worksheet response', async () => {
            mockWorksheetsService.findById.mockResolvedValue(mockWorksheet);
            const result = await controller.findById('worksheet_123456789');
            enhanced_test_helpers_1.TestAssertions.expectValidEntity(result, ['id', 'title', 'description', 'status']);
            expect(result.id).toBe(mockWorksheet.id);
            expect(result.status).toBe('assigned');
            expect(Array.isArray(result.tags)).toBe(true);
            expect(Array.isArray(result.materials)).toBe(true);
            expect(Array.isArray(result.submissions)).toBe(true);
        });
        it('should return properly formatted submission response', async () => {
            mockWorksheetsService.createSubmission.mockResolvedValue(mockWorksheetSubmission);
            const result = await controller.createSubmission(index_1.TEST_USER_IDS.CLIENT, {
                worksheetId: 'worksheet_123456789',
                content: 'Test submission',
            });
            enhanced_test_helpers_1.TestAssertions.expectValidEntity(result, ['id', 'worksheetId', 'clientId', 'content']);
            expect(result.worksheetId).toBe('worksheet_123456789');
            expect(typeof result.score).toBe('number');
            expect(Array.isArray(result.attachments)).toBe(true);
        });
        it('should return properly formatted statistics response', async () => {
            mockWorksheetsService.getWorksheetStats.mockResolvedValue(mockWorksheetStats);
            const result = await controller.getWorksheetStats(index_1.TEST_USER_IDS.THERAPIST);
            expect(typeof result.totalWorksheets).toBe('number');
            expect(typeof result.completionRate).toBe('number');
            expect(typeof result.averageScore).toBe('number');
            expect(Array.isArray(result.popularTags)).toBe(true);
            expect(Array.isArray(result.weeklyProgress)).toBe(true);
        });
        it('should maintain data integrity for worksheet creation', async () => {
            const createDto = {
                title: 'Test Worksheet',
                description: 'Test description',
                clientId: index_1.TEST_USER_IDS.CLIENT,
                therapistId: index_1.TEST_USER_IDS.THERAPIST,
            };
            const createdWorksheet = { ...mockWorksheet, ...createDto };
            mockWorksheetsService.create.mockResolvedValue(createdWorksheet);
            const result = await controller.create(index_1.TEST_USER_IDS.THERAPIST, createDto, []);
            expect(result.title).toBe(createDto.title);
            expect(result.clientId).toBe(createDto.clientId);
            expect(result.therapistId).toBe(createDto.therapistId);
            expect(result.createdAt).toBeDefined();
            expect(result.updatedAt).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL3dvcmtzaGVldHMvd29ya3NoZWV0cy5jb250cm9sbGVyLnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCw2Q0FBc0Q7QUFDdEQsMkNBQXdFO0FBQ3hFLGtFQUE2RDtBQUM3RCxtRUFBK0Q7QUFDL0QsNkRBQXlEO0FBQ3pELDBGQUFxRjtBQUVyRiwrRUFBcUc7QUFDckcsK0NBQWlFO0FBRWpFLFFBQVEsQ0FBQyxzQkFBc0IsRUFBRSxHQUFHLEVBQUU7SUFDcEMsSUFBSSxVQUFnQyxDQUFDO0lBQ3JDLElBQUksaUJBQW9DLENBQUM7SUFDekMsSUFBSSxzQkFBOEMsQ0FBQztJQUNuRCxJQUFJLE1BQXFCLENBQUM7SUFFMUIseUJBQXlCO0lBQ3pCLE1BQU0scUJBQXFCLEdBQUc7UUFDNUIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbkIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUMzQixjQUFjLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUN6QixnQkFBZ0IsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQzNCLGdCQUFnQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDM0IsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUM1QixzQkFBc0IsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDOUIsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUMzQixxQkFBcUIs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QyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvd29ya3NoZWV0cy93b3Jrc2hlZXRzLmNvbnRyb2xsZXIuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbXByZWhlbnNpdmUgVGVzdCBTdWl0ZSBmb3IgV29ya3NoZWV0c0NvbnRyb2xsZXJcbiAqIFRlc3RzIHdvcmtzaGVldCBtYW5hZ2VtZW50LCBmaWxlIHVwbG9hZHMsIHN1Ym1pc3Npb25zLCBhbmQgYW5hbHl0aWNzXG4gKi9cblxuaW1wb3J0IHsgVGVzdCwgVGVzdGluZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGVzdGluZyc7XG5pbXBvcnQgeyBCYWRSZXF1ZXN0RXhjZXB0aW9uLCBOb3RGb3VuZEV4Y2VwdGlvbiB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IFdvcmtzaGVldHNDb250cm9sbGVyIH0gZnJvbSAnLi93b3Jrc2hlZXRzLmNvbnRyb2xsZXInO1xuaW1wb3J0IHsgV29ya3NoZWV0c1NlcnZpY2UgfSBmcm9tICcuL3dvcmtzaGVldHMuc2VydmljZSc7XG5pbXBvcnQgeyBTdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vY29tbW9uL3NlcnZpY2VzL3N1cGFiYXNlLXN0b3JhZ2Uuc2VydmljZSc7XG5pbXBvcnQgeyBTZWN1cml0eUd1YXJkVGVzdFV0aWxzLCBSb2xlQmFzZWRUZXN0VXRpbHMgfSBmcm9tICcuLi90ZXN0LXV0aWxzL2F1dGgtdGVzdGluZy1oZWxwZXJzJztcbmltcG9ydCB7IE1vY2tCdWlsZGVyLCBUZXN0RGF0YUdlbmVyYXRvciwgVGVzdEFzc2VydGlvbnMgfSBmcm9tICcuLi90ZXN0LXV0aWxzL2VuaGFuY2VkLXRlc3QtaGVscGVycyc7XG5pbXBvcnQgeyBURVNUX1VTRVJfSURTLCBURVNUX0VNQUlMUyB9IGZyb20gJy4uL3Rlc3QtdXRpbHMvaW5kZXgnO1xuXG5kZXNjcmliZSgnV29ya3NoZWV0c0NvbnRyb2xsZXInLCAoKSA9PiB7XG4gIGxldCBjb250cm9sbGVyOiBXb3Jrc2hlZXRzQ29udHJvbGxlcjtcbiAgbGV0IHdvcmtzaGVldHNTZXJ2aWNlOiBXb3Jrc2hlZXRzU2VydmljZTtcbiAgbGV0IHN1cGFiYXNlU3RvcmFnZVNlcnZpY2U6IFN1cGFiYXNlU3RvcmFnZVNlcnZpY2U7XG4gIGxldCBtb2R1bGU6IFRlc3RpbmdNb2R1bGU7XG5cbiAgLy8gTW9jayBXb3Jrc2hlZXRzU2VydmljZVxuICBjb25zdCBtb2NrV29ya3NoZWV0c1NlcnZpY2UgPSB7XG4gICAgZmluZEFsbDogamVzdC5mbigpLFxuICAgIGZpbmRCeUlkOiBqZXN0LmZuKCksXG4gICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gICAgY3JlYXRlU3VibWlzc2lvbjogamVzdC5mbigpLFxuICAgIGdldFN1Ym1pc3Npb25zOiBqZXN0LmZuKCksXG4gICAgdXBkYXRlU3VibWlzc2lvbjogamVzdC5mbigpLFxuICAgIGRlbGV0ZVN1Ym1pc3Npb246IGplc3QuZm4oKSxcbiAgICBnZXRXb3Jrc2hlZXRTdGF0czogamVzdC5mbigpLFxuICAgIGdldFRoZXJhcGlzdFdvcmtzaGVldHM6IGplc3QuZm4oKSxcbiAgICBnZXRDbGllbnRXb3Jrc2hlZXRzOiBqZXN0LmZuKCksXG4gICAgc2VhcmNoV29ya3NoZWV0czogamVzdC5mbigpLFxuICAgIGdldFdvcmtzaGVldEFuYWx5dGljczogamVzdC5mbigpLFxuICB9O1xuXG4gIC8vIE1vY2sgU3VwYWJhc2VTdG9yYWdlU2VydmljZVxuICBjb25zdCBtb2NrU3VwYWJhc2VTdG9yYWdlU2VydmljZSA9IHtcbiAgICB1cGxvYWRGaWxlOiBqZXN0LmZuKCksXG4gICAgdXBsb2FkRmlsZXM6IGplc3QuZm4oKSxcbiAgICBkZWxldGVGaWxlOiBqZXN0LmZuKCksXG4gICAgZ2V0RmlsZVVybDogamVzdC5mbigpLFxuICB9O1xuXG4gIC8vIE1vY2sgSnd0QXV0aEd1YXJkXG4gIGNvbnN0IG1vY2tKd3RBdXRoR3VhcmQgPSB7XG4gICAgY2FuQWN0aXZhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSksXG4gIH07XG5cbiAgLy8gVGVzdCBkYXRhXG4gIGNvbnN0IG1vY2tXb3Jrc2hlZXQgPSB7XG4gICAgaWQ6ICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyxcbiAgICB0aXRsZTogJ0FueGlldHkgTWFuYWdlbWVudCBXb3Jrc2hlZXQnLFxuICAgIGRlc2NyaXB0aW9uOiAnV2Vla2x5IGV4ZXJjaXNlcyBmb3IgbWFuYWdpbmcgYW54aWV0eSBzeW1wdG9tcycsXG4gICAgY29udGVudDogJ1BsZWFzZSBjb21wbGV0ZSB0aGUgZm9sbG93aW5nIG1pbmRmdWxuZXNzIGV4ZXJjaXNlcy4uLicsXG4gICAgc3RhdHVzOiAnYXNzaWduZWQnLFxuICAgIGNsaWVudElkOiBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICB0aGVyYXBpc3RJZDogVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgZHVlRGF0ZTogbmV3IERhdGUoJzIwMjQtMDItMDFUMDA6MDA6MDBaJyksXG4gICAgZXN0aW1hdGVkRHVyYXRpb246IDQ1LFxuICAgIGRpZmZpY3VsdHk6ICdpbnRlcm1lZGlhdGUnLFxuICAgIHRhZ3M6IFsnYW54aWV0eScsICdtaW5kZnVsbmVzcycsICdjb3BpbmcnXSxcbiAgICBtYXRlcmlhbHM6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdtYXRlcmlhbF8xMjMnLFxuICAgICAgICBmaWxlbmFtZTogJ2FueGlldHktZ3VpZGUucGRmJyxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9zdG9yYWdlLmV4YW1wbGUuY29tL2FueGlldHktZ3VpZGUucGRmJyxcbiAgICAgICAgZmlsZVR5cGU6ICdwZGYnLFxuICAgICAgICBzaXplOiAxMDI0MDAwLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHN1Ym1pc3Npb25zOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnc3VibWlzc2lvbl8xMjMnLFxuICAgICAgICBjb250ZW50OiAnSSBjb21wbGV0ZWQgdGhlIGJyZWF0aGluZyBleGVyY2lzZXMgYW5kIGZvdW5kIHRoZW0gaGVscGZ1bC4uLicsXG4gICAgICAgIHN1Ym1pdHRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0yMFQxNDozMDowMFonKSxcbiAgICAgICAgc2NvcmU6IDgsXG4gICAgICAgIGZlZWRiYWNrOiAnR3JlYXQgcHJvZ3Jlc3Mgd2l0aCB0aGUgZXhlcmNpc2VzIScsXG4gICAgICB9LFxuICAgIF0sXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgfTtcblxuICBjb25zdCBtb2NrV29ya3NoZWV0U3VibWlzc2lvbiA9IHtcbiAgICBpZDogJ3N1Ym1pc3Npb25fMTIzNDU2Nzg5JyxcbiAgICB3b3Jrc2hlZXRJZDogJ3dvcmtzaGVldF8xMjM0NTY3ODknLFxuICAgIGNsaWVudElkOiBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICBjb250ZW50OiAnSSBjb21wbGV0ZWQgYWxsIHRoZSBleGVyY2lzZXMgYXMgaW5zdHJ1Y3RlZC4gVGhlIGJyZWF0aGluZyB0ZWNobmlxdWVzIHdlcmUgcGFydGljdWxhcmx5IGhlbHBmdWwuJyxcbiAgICBzdWJtaXR0ZWRBdDogbmV3IERhdGUoKSxcbiAgICBzY29yZTogOSxcbiAgICBmZWVkYmFjazogJ0V4Y2VsbGVudCB3b3JrISBZb3VyIHVuZGVyc3RhbmRpbmcgb2YgdGhlIHRlY2huaXF1ZXMgaXMgY2xlYXIuJyxcbiAgICB0aGVyYXBpc3ROb3RlczogJ0NsaWVudCBzaG93cyBnb29kIGVuZ2FnZW1lbnQgYW5kIHVuZGVyc3RhbmRpbmcnLFxuICAgIGF0dGFjaG1lbnRzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnYXR0YWNobWVudF8xMjMnLFxuICAgICAgICBmaWxlbmFtZTogJ2V4ZXJjaXNlLW5vdGVzLnBkZicsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vc3RvcmFnZS5leGFtcGxlLmNvbS9leGVyY2lzZS1ub3Rlcy5wZGYnLFxuICAgICAgICBmaWxlVHlwZTogJ3BkZicsXG4gICAgICB9LFxuICAgIF0sXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgfTtcblxuICBjb25zdCBtb2NrV29ya3NoZWV0U3RhdHMgPSB7XG4gICAgdG90YWxXb3Jrc2hlZXRzOiAyNSxcbiAgICBhc3NpZ25lZFdvcmtzaGVldHM6IDgsXG4gICAgaW5Qcm9ncmVzc1dvcmtzaGVldHM6IDEyLFxuICAgIGNvbXBsZXRlZFdvcmtzaGVldHM6IDUsXG4gICAgb3ZlcmR1ZVdvcmtzaGVldHM6IDMsXG4gICAgYXZlcmFnZUNvbXBsZXRpb25UaW1lOiA0OC41LFxuICAgIGNvbXBsZXRpb25SYXRlOiA3Ni4yLFxuICAgIGF2ZXJhZ2VTY29yZTogNy44LFxuICAgIHBvcHVsYXJUYWdzOiBbXG4gICAgICB7IHRhZzogJ2FueGlldHknLCBjb3VudDogMTUgfSxcbiAgICAgIHsgdGFnOiAnZGVwcmVzc2lvbicsIGNvdW50OiAxMiB9LFxuICAgICAgeyB0YWc6ICdtaW5kZnVsbmVzcycsIGNvdW50OiAxMCB9LFxuICAgIF0sXG4gICAgd2Vla2x5UHJvZ3Jlc3M6IFtcbiAgICAgIHsgd2VlazogJzIwMjQtMDEtMTUnLCBjb21wbGV0ZWQ6IDMsIGFzc2lnbmVkOiA1IH0sXG4gICAgICB7IHdlZWs6ICcyMDI0LTAxLTIyJywgY29tcGxldGVkOiA0LCBhc3NpZ25lZDogNiB9LFxuICAgICAgeyB3ZWVrOiAnMjAyNC0wMS0yOScsIGNvbXBsZXRlZDogMiwgYXNzaWduZWQ6IDQgfSxcbiAgICBdLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tGaWxlcyA9IFtcbiAgICB7XG4gICAgICBmaWVsZG5hbWU6ICdmaWxlcycsXG4gICAgICBvcmlnaW5hbG5hbWU6ICd3b3Jrc2hlZXQtbWF0ZXJpYWwucGRmJyxcbiAgICAgIG1pbWV0eXBlOiAnYXBwbGljYXRpb24vcGRmJyxcbiAgICAgIGJ1ZmZlcjogQnVmZmVyLmZyb20oJ2Zha2UgcGRmIGNvbnRlbnQnKSxcbiAgICAgIHNpemU6IDEwMjQwMDAsXG4gICAgfSxcbiAgICB7XG4gICAgICBmaWVsZG5hbWU6ICdmaWxlcycsXG4gICAgICBvcmlnaW5hbG5hbWU6ICdleGVyY2lzZS10ZW1wbGF0ZS5kb2N4JyxcbiAgICAgIG1pbWV0eXBlOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnLFxuICAgICAgYnVmZmVyOiBCdWZmZXIuZnJvbSgnZmFrZSBkb2N4IGNvbnRlbnQnKSxcbiAgICAgIHNpemU6IDUxMjAwMCxcbiAgICB9LFxuICBdIGFzIEV4cHJlc3MuTXVsdGVyLkZpbGVbXTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBtb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgY29udHJvbGxlcnM6IFtXb3Jrc2hlZXRzQ29udHJvbGxlcl0sXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IFdvcmtzaGVldHNTZXJ2aWNlLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrV29ya3NoZWV0c1NlcnZpY2UsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBTdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrU3VwYWJhc2VTdG9yYWdlU2VydmljZSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSlcbiAgICAgIC5vdmVycmlkZUd1YXJkKEp3dEF1dGhHdWFyZClcbiAgICAgIC51c2VWYWx1ZShtb2NrSnd0QXV0aEd1YXJkKVxuICAgICAgLmNvbXBpbGUoKTtcblxuICAgIGNvbnRyb2xsZXIgPSBtb2R1bGUuZ2V0PFdvcmtzaGVldHNDb250cm9sbGVyPihXb3Jrc2hlZXRzQ29udHJvbGxlcik7XG4gICAgd29ya3NoZWV0c1NlcnZpY2UgPSBtb2R1bGUuZ2V0PFdvcmtzaGVldHNTZXJ2aWNlPihXb3Jrc2hlZXRzU2VydmljZSk7XG4gICAgc3VwYWJhc2VTdG9yYWdlU2VydmljZSA9IG1vZHVsZS5nZXQ8U3VwYWJhc2VTdG9yYWdlU2VydmljZT4oU3VwYWJhc2VTdG9yYWdlU2VydmljZSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb250cm9sbGVyIEluaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYmUgZGVmaW5lZCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChjb250cm9sbGVyKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGFsbCBzZXJ2aWNlcyBpbmplY3RlZCcsICgpID0+IHtcbiAgICAgIGV4cGVjdCh3b3Jrc2hlZXRzU2VydmljZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VjdXJpdHkgR3VhcmRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYmUgcHJvdGVjdGVkIGJ5IEp3dEF1dGhHdWFyZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGd1YXJkcyA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoJ19fZ3VhcmRzX18nLCBXb3Jrc2hlZXRzQ29udHJvbGxlcik7XG4gICAgICBleHBlY3QoZ3VhcmRzKS50b0NvbnRhaW4oSnd0QXV0aEd1YXJkKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBwcm9wZXIgcm91dGUgZGVjb3JhdG9ycycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXJNZXRhZGF0YSA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoJ3BhdGgnLCBXb3Jrc2hlZXRzQ29udHJvbGxlcik7XG4gICAgICBleHBlY3QoY29udHJvbGxlck1ldGFkYXRhKS50b0JlKCd3b3Jrc2hlZXRzJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL3dvcmtzaGVldHMnLCAoKSA9PiB7XG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XG4gICAgICB1c2VySWQ6IFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgdGhlcmFwaXN0SWQ6IFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgc3RhdHVzOiAnYXNzaWduZWQnLFxuICAgICAgcGFnZTogMSxcbiAgICAgIGxpbWl0OiAxMCxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgYWxsIHdvcmtzaGVldHMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICB3b3Jrc2hlZXRzOiBbbW9ja1dvcmtzaGVldF0sXG4gICAgICAgIHRvdGFsQ291bnQ6IDEsXG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIHRvdGFsUGFnZXM6IDEsXG4gICAgICB9O1xuICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLmZpbmRBbGwubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jlc3BvbnNlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5maW5kQWxsKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULCBxdWVyeVBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1Jlc3BvbnNlKTtcbiAgICAgIGV4cGVjdCh3b3Jrc2hlZXRzU2VydmljZS5maW5kQWxsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgcXVlcnlQYXJhbXMudXNlcklkLFxuICAgICAgICBxdWVyeVBhcmFtcy50aGVyYXBpc3RJZCxcbiAgICAgICAgcXVlcnlQYXJhbXMuc3RhdHVzXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgd29ya3NoZWV0cyBsaXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZW1wdHlSZXNwb25zZSA9IHtcbiAgICAgICAgd29ya3NoZWV0czogW10sXG4gICAgICAgIHRvdGFsQ291bnQ6IDAsXG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIHRvdGFsUGFnZXM6IDAsXG4gICAgICB9O1xuICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLmZpbmRBbGwubW9ja1Jlc29sdmVkVmFsdWUoZW1wdHlSZXNwb25zZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZmluZEFsbChURVNUX1VTRVJfSURTLlRIRVJBUElTVCwge30pO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGVtcHR5UmVzcG9uc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC53b3Jrc2hlZXRzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2VFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5maW5kQWxsLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5maW5kQWxsKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULCBxdWVyeVBhcmFtcylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHNlcnZpY2VFcnJvcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL3dvcmtzaGVldHMvOmlkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2V0IHdvcmtzaGVldCBieSBpZCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtzaGVldCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZmluZEJ5SWQoJ3dvcmtzaGVldF8xMjM0NTY3ODknKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrV29ya3NoZWV0KTtcbiAgICAgIGV4cGVjdCh3b3Jrc2hlZXRzU2VydmljZS5maW5kQnlJZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3dvcmtzaGVldF8xMjM0NTY3ODknKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHdvcmtzaGVldCBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBub3RGb3VuZEVycm9yID0gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCdXb3Jrc2hlZXQgbm90IGZvdW5kJyk7XG4gICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuZmluZEJ5SWQubW9ja1JlamVjdGVkVmFsdWUobm90Rm91bmRFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5maW5kQnlJZCgnbm9uZXhpc3RlbnQtd29ya3NoZWV0JylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KG5vdEZvdW5kRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIG1hdGVyaWFscyBhbmQgc3VibWlzc2lvbnMgaW4gcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB3b3Jrc2hlZXRXaXRoRGV0YWlscyA9IHtcbiAgICAgICAgLi4ubW9ja1dvcmtzaGVldCxcbiAgICAgICAgbWF0ZXJpYWxzOiBtb2NrV29ya3NoZWV0Lm1hdGVyaWFscyxcbiAgICAgICAgc3VibWlzc2lvbnM6IG1vY2tXb3Jrc2hlZXQuc3VibWlzc2lvbnMsXG4gICAgICB9O1xuICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKHdvcmtzaGVldFdpdGhEZXRhaWxzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5maW5kQnlJZCgnd29ya3NoZWV0XzEyMzQ1Njc4OScpO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lm1hdGVyaWFscykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VibWlzc2lvbnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0Lm1hdGVyaWFscykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWJtaXNzaW9ucykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUE9TVCAvd29ya3NoZWV0cycsICgpID0+IHtcbiAgICBjb25zdCBjcmVhdGVXb3Jrc2hlZXREdG8gPSB7XG4gICAgICB0aXRsZTogJ05ldyBBbnhpZXR5IFdvcmtzaGVldCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ0FkdmFuY2VkIGV4ZXJjaXNlcyBmb3IgYW54aWV0eSBtYW5hZ2VtZW50JyxcbiAgICAgIGNvbnRlbnQ6ICdDb21wbGV0ZSB0aGUgZm9sbG93aW5nIGNvZ25pdGl2ZSByZXN0cnVjdHVyaW5nIGV4ZXJjaXNlcy4uLicsXG4gICAgICBjbGllbnRJZDogVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICB0aGVyYXBpc3RJZDogVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICBkdWVEYXRlOiAnMjAyNC0wMi0xNVQwMDowMDowMFonLFxuICAgICAgZXN0aW1hdGVkRHVyYXRpb246IDYwLFxuICAgICAgZGlmZmljdWx0eTogJ2FkdmFuY2VkJyxcbiAgICAgIHRhZ3M6IFsnYW54aWV0eScsICdDQlQnLCAnY29nbml0aXZlJ10sXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIHdvcmtzaGVldCB3aXRob3V0IGZpbGVzIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNyZWF0ZWRXb3Jrc2hlZXQgPSB7XG4gICAgICAgIC4uLm1vY2tXb3Jrc2hlZXQsXG4gICAgICAgIC4uLmNyZWF0ZVdvcmtzaGVldER0byxcbiAgICAgICAgdXBsb2FkZWRGaWxlczogW10sXG4gICAgICB9O1xuICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShjcmVhdGVkV29ya3NoZWV0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5jcmVhdGUoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgICBjcmVhdGVXb3Jrc2hlZXREdG8sXG4gICAgICAgIFtdXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGNyZWF0ZWRXb3Jrc2hlZXQpO1xuICAgICAgZXhwZWN0KHdvcmtzaGVldHNTZXJ2aWNlLmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGNyZWF0ZVdvcmtzaGVldER0byxcbiAgICAgICAgY3JlYXRlV29ya3NoZWV0RHRvLmNsaWVudElkLFxuICAgICAgICBjcmVhdGVXb3Jrc2hlZXREdG8udGhlcmFwaXN0SWQsXG4gICAgICAgIFtdXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgd29ya3NoZWV0IHdpdGggZmlsZXMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXBsb2FkZWRGaWxlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZmlsZV8xMjMnLFxuICAgICAgICAgIGZpbGVuYW1lOiAnd29ya3NoZWV0LW1hdGVyaWFsLnBkZicsXG4gICAgICAgICAgdXJsOiAnaHR0cHM6Ly9zdG9yYWdlLmV4YW1wbGUuY29tL3dvcmtzaGVldC1tYXRlcmlhbC5wZGYnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdmaWxlXzEyNCcsXG4gICAgICAgICAgZmlsZW5hbWU6ICdleGVyY2lzZS10ZW1wbGF0ZS5kb2N4JyxcbiAgICAgICAgICB1cmw6ICdodHRwczovL3N0b3JhZ2UuZXhhbXBsZS5jb20vZXhlcmNpc2UtdGVtcGxhdGUuZG9jeCcsXG4gICAgICAgIH0sXG4gICAgICBdO1xuICAgICAgY29uc3QgY3JlYXRlZFdvcmtzaGVldCA9IHtcbiAgICAgICAgLi4ubW9ja1dvcmtzaGVldCxcbiAgICAgICAgLi4uY3JlYXRlV29ya3NoZWV0RHRvLFxuICAgICAgICB1cGxvYWRlZEZpbGVzLFxuICAgICAgfTtcbiAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoY3JlYXRlZFdvcmtzaGVldCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuY3JlYXRlKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgY3JlYXRlV29ya3NoZWV0RHRvLFxuICAgICAgICBtb2NrRmlsZXNcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoY3JlYXRlZFdvcmtzaGVldCk7XG4gICAgICBleHBlY3Qod29ya3NoZWV0c1NlcnZpY2UuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgY3JlYXRlV29ya3NoZWV0RHRvLFxuICAgICAgICBjcmVhdGVXb3Jrc2hlZXREdG8uY2xpZW50SWQsXG4gICAgICAgIGNyZWF0ZVdvcmtzaGVldER0by50aGVyYXBpc3RJZCxcbiAgICAgICAgbW9ja0ZpbGVzXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsZSB1cGxvYWQgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXBsb2FkRXJyb3IgPSBuZXcgQmFkUmVxdWVzdEV4Y2VwdGlvbignRmlsZSB1cGxvYWQgZmFpbGVkJyk7XG4gICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuY3JlYXRlLm1vY2tSZWplY3RlZFZhbHVlKHVwbG9hZEVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmNyZWF0ZShURVNUX1VTRVJfSURTLlRIRVJBUElTVCwgY3JlYXRlV29ya3NoZWV0RHRvLCBtb2NrRmlsZXMpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyh1cGxvYWRFcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREdG8gPSB7XG4gICAgICAgIHRpdGxlOiAnJywgLy8gRW1wdHkgdGl0bGVcbiAgICAgICAgY2xpZW50SWQ6IFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgICB0aGVyYXBpc3RJZDogVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9yID0gbmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oJ1RpdGxlIGlzIHJlcXVpcmVkJyk7XG4gICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuY3JlYXRlLm1vY2tSZWplY3RlZFZhbHVlKHZhbGlkYXRpb25FcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5jcmVhdGUoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsIGludmFsaWREdG8gYXMgYW55LCBbXSlcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHZhbGlkYXRpb25FcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYXhpbXVtIGZpbGUgbGltaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b29NYW55RmlsZXMgPSBBcnJheSg2KS5maWxsKG1vY2tGaWxlc1swXSk7IC8vIDYgZmlsZXMgZXhjZWVkcyBsaW1pdCBvZiA1XG4gICAgICBjb25zdCBsaW1pdEVycm9yID0gbmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oJ01heGltdW0gNSBmaWxlcyBhbGxvd2VkJyk7XG4gICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuY3JlYXRlLm1vY2tSZWplY3RlZFZhbHVlKGxpbWl0RXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuY3JlYXRlKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULCBjcmVhdGVXb3Jrc2hlZXREdG8sIHRvb01hbnlGaWxlcylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KGxpbWl0RXJyb3IpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUFVUIC93b3Jrc2hlZXRzLzppZCcsICgpID0+IHtcbiAgICBjb25zdCB1cGRhdGVXb3Jrc2hlZXREdG8gPSB7XG4gICAgICB0aXRsZTogJ1VwZGF0ZWQgV29ya3NoZWV0IFRpdGxlJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlZCBkZXNjcmlwdGlvbiB3aXRoIG5ldyBleGVyY2lzZXMnLFxuICAgICAgY29udGVudDogJ1VwZGF0ZWQgY29udGVudCB3aXRoIGFkZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zLi4uJyxcbiAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyBhcyBjb25zdCxcbiAgICAgIGR1ZURhdGU6ICcyMDI0LTAyLTIwVDAwOjAwOjAwWicsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHdvcmtzaGVldCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVkV29ya3NoZWV0ID0geyAuLi5tb2NrV29ya3NoZWV0LCAuLi51cGRhdGVXb3Jrc2hlZXREdG8gfTtcbiAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUodXBkYXRlZFdvcmtzaGVldCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBkYXRlKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgJ3dvcmtzaGVldF8xMjM0NTY3ODknLFxuICAgICAgICB1cGRhdGVXb3Jrc2hlZXREdG9cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwodXBkYXRlZFdvcmtzaGVldCk7XG4gICAgICBleHBlY3Qod29ya3NoZWV0c1NlcnZpY2UudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ3dvcmtzaGVldF8xMjM0NTY3ODknLFxuICAgICAgICB1cGRhdGVXb3Jrc2hlZXREdG9cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwYXJ0aWFsIHVwZGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJ0aWFsVXBkYXRlID0geyBzdGF0dXM6ICdjb21wbGV0ZWQnIGFzIGNvbnN0IH07XG4gICAgICBjb25zdCB1cGRhdGVkV29ya3NoZWV0ID0geyAuLi5tb2NrV29ya3NoZWV0LCAuLi5wYXJ0aWFsVXBkYXRlIH07XG4gICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UudXBkYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRXb3Jrc2hlZXQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnVwZGF0ZShcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyxcbiAgICAgICAgcGFydGlhbFVwZGF0ZVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh1cGRhdGVkV29ya3NoZWV0KTtcbiAgICAgIGV4cGVjdCh3b3Jrc2hlZXRzU2VydmljZS51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnd29ya3NoZWV0XzEyMzQ1Njc4OScsXG4gICAgICAgIHBhcnRpYWxVcGRhdGVcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB3b3Jrc2hlZXQgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgbm90Rm91bmRFcnJvciA9IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbignV29ya3NoZWV0IG5vdCBmb3VuZCcpO1xuICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLnVwZGF0ZS5tb2NrUmVqZWN0ZWRWYWx1ZShub3RGb3VuZEVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLnVwZGF0ZShURVNUX1VTRVJfSURTLlRIRVJBUElTVCwgJ25vbmV4aXN0ZW50LXdvcmtzaGVldCcsIHVwZGF0ZVdvcmtzaGVldER0bylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KG5vdEZvdW5kRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBzdGF0dXMgdHJhbnNpdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkU3RhdHVzRXJyb3IgPSBuZXcgQmFkUmVxdWVzdEV4Y2VwdGlvbignSW52YWxpZCBzdGF0dXMgdHJhbnNpdGlvbicpO1xuICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLnVwZGF0ZS5tb2NrUmVqZWN0ZWRWYWx1ZShpbnZhbGlkU3RhdHVzRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIudXBkYXRlKFxuICAgICAgICAgIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgICAgICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyxcbiAgICAgICAgICB7IHN0YXR1czogJ2ludmFsaWRfc3RhdHVzJyBhcyBhbnkgfVxuICAgICAgICApXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhpbnZhbGlkU3RhdHVzRXJyb3IpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnREVMRVRFIC93b3Jrc2hlZXRzLzppZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRlbGV0ZSB3b3Jrc2hlZXQgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGVsZXRlUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdXb3Jrc2hlZXQgZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkZWxldGVkSWQ6ICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyxcbiAgICAgIH07XG4gICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuZGVsZXRlLm1vY2tSZXNvbHZlZFZhbHVlKGRlbGV0ZVJlc3BvbnNlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5kZWxldGUoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsICd3b3Jrc2hlZXRfMTIzNDU2Nzg5Jyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoZGVsZXRlUmVzcG9uc2UpO1xuICAgICAgZXhwZWN0KHdvcmtzaGVldHNTZXJ2aWNlLmRlbGV0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3dvcmtzaGVldF8xMjM0NTY3ODknKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHdvcmtzaGVldCBub3QgZm91bmQgZm9yIGRlbGV0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgbm90Rm91bmRFcnJvciA9IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbignV29ya3NoZWV0IG5vdCBmb3VuZCcpO1xuICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLmRlbGV0ZS5tb2NrUmVqZWN0ZWRWYWx1ZShub3RGb3VuZEVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmRlbGV0ZShURVNUX1VTRVJfSURTLlRIRVJBUElTVCwgJ25vbmV4aXN0ZW50LXdvcmtzaGVldCcpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhub3RGb3VuZEVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRlbGV0aW9uIG9mIHdvcmtzaGVldCB3aXRoIGRlcGVuZGVuY2llcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRlcGVuZGVuY3lFcnJvciA9IG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKFxuICAgICAgICAnQ2Fubm90IGRlbGV0ZSB3b3Jrc2hlZXQgd2l0aCBleGlzdGluZyBzdWJtaXNzaW9ucydcbiAgICAgICk7XG4gICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuZGVsZXRlLm1vY2tSZWplY3RlZFZhbHVlKGRlcGVuZGVuY3lFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5kZWxldGUoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KGRlcGVuZGVuY3lFcnJvcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdXb3Jrc2hlZXQgU3VibWlzc2lvbnMnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ1BPU1QgL3dvcmtzaGVldHMvc3VibWlzc2lvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjcmVhdGVTdWJtaXNzaW9uRHRvID0ge1xuICAgICAgICB3b3Jrc2hlZXRJZDogJ3dvcmtzaGVldF8xMjM0NTY3ODknLFxuICAgICAgICBjb250ZW50OiAnSSBjb21wbGV0ZWQgYWxsIHRoZSBleGVyY2lzZXMgYW5kIGZvdW5kIHRoZW0gdmVyeSBoZWxwZnVsLicsXG4gICAgICAgIGNsaWVudE5vdGVzOiAnVGhlIGJyZWF0aGluZyBleGVyY2lzZXMgd2VyZSBwYXJ0aWN1bGFybHkgZWZmZWN0aXZlLicsXG4gICAgICAgIHRpbWVTcGVudDogNDUsXG4gICAgICB9O1xuXG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBzdWJtaXNzaW9uIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLmNyZWF0ZVN1Ym1pc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtzaGVldFN1Ym1pc3Npb24pO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuY3JlYXRlU3VibWlzc2lvbihcbiAgICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAgICBjcmVhdGVTdWJtaXNzaW9uRHRvXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrV29ya3NoZWV0U3VibWlzc2lvbik7XG4gICAgICAgIGV4cGVjdCh3b3Jrc2hlZXRzU2VydmljZS5jcmVhdGVTdWJtaXNzaW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjcmVhdGVTdWJtaXNzaW9uRHRvKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBzdWJtaXNzaW9uIHdpdGggYXR0YWNobWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHN1Ym1pc3Npb25XaXRoQXR0YWNobWVudHMgPSB7XG4gICAgICAgICAgLi4ubW9ja1dvcmtzaGVldFN1Ym1pc3Npb24sXG4gICAgICAgICAgYXR0YWNobWVudHM6IG1vY2tXb3Jrc2hlZXRTdWJtaXNzaW9uLmF0dGFjaG1lbnRzLFxuICAgICAgICB9O1xuICAgICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuY3JlYXRlU3VibWlzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZShzdWJtaXNzaW9uV2l0aEF0dGFjaG1lbnRzKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNyZWF0ZVN1Ym1pc3Npb24oXG4gICAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgICAgY3JlYXRlU3VibWlzc2lvbkR0b1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQuYXR0YWNobWVudHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuYXR0YWNobWVudHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIHdvcmtzaGVldCBpZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaW52YWxpZEVycm9yID0gbmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oJ0ludmFsaWQgd29ya3NoZWV0IElEJyk7XG4gICAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5jcmVhdGVTdWJtaXNzaW9uLm1vY2tSZWplY3RlZFZhbHVlKGludmFsaWRFcnJvcik7XG5cbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIGNvbnRyb2xsZXIuY3JlYXRlU3VibWlzc2lvbihURVNUX1VTRVJfSURTLkNMSUVOVCwge1xuICAgICAgICAgICAgLi4uY3JlYXRlU3VibWlzc2lvbkR0byxcbiAgICAgICAgICAgIHdvcmtzaGVldElkOiAnaW52YWxpZC1pZCcsXG4gICAgICAgICAgfSlcbiAgICAgICAgKS5yZWplY3RzLnRvVGhyb3coaW52YWxpZEVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0dFVCAvd29ya3NoZWV0cy86aWQvc3VibWlzc2lvbnMnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIGdldCBhbGwgc3VibWlzc2lvbnMgZm9yIHdvcmtzaGVldCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgbW9ja1N1Ym1pc3Npb25zID0gW21vY2tXb3Jrc2hlZXRTdWJtaXNzaW9uXTtcbiAgICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLmdldFN1Ym1pc3Npb25zLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tTdWJtaXNzaW9ucyk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRTdWJtaXNzaW9ucygnd29ya3NoZWV0XzEyMzQ1Njc4OScpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1N1Ym1pc3Npb25zKTtcbiAgICAgICAgZXhwZWN0KHdvcmtzaGVldHNTZXJ2aWNlLmdldFN1Ym1pc3Npb25zKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnd29ya3NoZWV0XzEyMzQ1Njc4OScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHN1Ym1pc3Npb25zIGxpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5nZXRTdWJtaXNzaW9ucy5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRTdWJtaXNzaW9ucygnd29ya3NoZWV0XzEyMzQ1Njc4OScpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW10pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnUFVUIC93b3Jrc2hlZXRzL3N1Ym1pc3Npb25zLzppZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHVwZGF0ZVN1Ym1pc3Npb25EdG8gPSB7XG4gICAgICAgIGNvbnRlbnQ6ICdVcGRhdGVkIHN1Ym1pc3Npb24gY29udGVudCB3aXRoIGFkZGl0aW9uYWwgaW5zaWdodHMnLFxuICAgICAgICBzY29yZTogOSxcbiAgICAgICAgZmVlZGJhY2s6ICdFeGNlbGxlbnQgaW1wcm92ZW1lbnQgc2hvd24gaW4gdGhpcyBzdWJtaXNzaW9uJyxcbiAgICAgICAgdGhlcmFwaXN0Tm90ZXM6ICdDbGllbnQgZGVtb25zdHJhdGVzIGNsZWFyIHVuZGVyc3RhbmRpbmcgb2YgY29uY2VwdHMnLFxuICAgICAgfTtcblxuICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgc3VibWlzc2lvbiBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRTdWJtaXNzaW9uID0geyAuLi5tb2NrV29ya3NoZWV0U3VibWlzc2lvbiwgLi4udXBkYXRlU3VibWlzc2lvbkR0byB9O1xuICAgICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UudXBkYXRlU3VibWlzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkU3VibWlzc2lvbik7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGRhdGVTdWJtaXNzaW9uKFxuICAgICAgICAgIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgICAgICdzdWJtaXNzaW9uXzEyMzQ1Njc4OScsXG4gICAgICAgICAgdXBkYXRlU3VibWlzc2lvbkR0b1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwodXBkYXRlZFN1Ym1pc3Npb24pO1xuICAgICAgICBleHBlY3Qod29ya3NoZWV0c1NlcnZpY2UudXBkYXRlU3VibWlzc2lvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJ3N1Ym1pc3Npb25fMTIzNDU2Nzg5JyxcbiAgICAgICAgICB1cGRhdGVTdWJtaXNzaW9uRHRvXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3VibWlzc2lvbiBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5vdEZvdW5kRXJyb3IgPSBuZXcgTm90Rm91bmRFeGNlcHRpb24oJ1N1Ym1pc3Npb24gbm90IGZvdW5kJyk7XG4gICAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS51cGRhdGVTdWJtaXNzaW9uLm1vY2tSZWplY3RlZFZhbHVlKG5vdEZvdW5kRXJyb3IpO1xuXG4gICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICBjb250cm9sbGVyLnVwZGF0ZVN1Ym1pc3Npb24oXG4gICAgICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgICAgICdub25leGlzdGVudC1zdWJtaXNzaW9uJyxcbiAgICAgICAgICAgIHVwZGF0ZVN1Ym1pc3Npb25EdG9cbiAgICAgICAgICApXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KG5vdEZvdW5kRXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnREVMRVRFIC93b3Jrc2hlZXRzL3N1Ym1pc3Npb25zLzppZCcsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgZGVsZXRlIHN1Ym1pc3Npb24gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBkZWxldGVSZXNwb25zZSA9IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTdWJtaXNzaW9uIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICBkZWxldGVkSWQ6ICdzdWJtaXNzaW9uXzEyMzQ1Njc4OScsXG4gICAgICAgIH07XG4gICAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5kZWxldGVTdWJtaXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKGRlbGV0ZVJlc3BvbnNlKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmRlbGV0ZVN1Ym1pc3Npb24oXG4gICAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgICAgJ3N1Ym1pc3Npb25fMTIzNDU2Nzg5J1xuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoZGVsZXRlUmVzcG9uc2UpO1xuICAgICAgICBleHBlY3Qod29ya3NoZWV0c1NlcnZpY2UuZGVsZXRlU3VibWlzc2lvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3N1Ym1pc3Npb25fMTIzNDU2Nzg5Jyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FuYWx5dGljcyBhbmQgU3RhdGlzdGljcycsICgpID0+IHtcbiAgICBkZXNjcmliZSgnR0VUIC93b3Jrc2hlZXRzL3N0YXRzJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCBnZXQgd29ya3NoZWV0IHN0YXRpc3RpY3Mgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuZ2V0V29ya3NoZWV0U3RhdHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtzaGVldFN0YXRzKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFdvcmtzaGVldFN0YXRzKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNUKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tXb3Jrc2hlZXRTdGF0cyk7XG4gICAgICAgIGV4cGVjdCh3b3Jrc2hlZXRzU2VydmljZS5nZXRXb3Jrc2hlZXRTdGF0cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHN0YXRpc3RpY3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGVtcHR5U3RhdHMgPSB7XG4gICAgICAgICAgdG90YWxXb3Jrc2hlZXRzOiAwLFxuICAgICAgICAgIGFzc2lnbmVkV29ya3NoZWV0czogMCxcbiAgICAgICAgICBpblByb2dyZXNzV29ya3NoZWV0czogMCxcbiAgICAgICAgICBjb21wbGV0ZWRXb3Jrc2hlZXRzOiAwLFxuICAgICAgICAgIG92ZXJkdWVXb3Jrc2hlZXRzOiAwLFxuICAgICAgICAgIGF2ZXJhZ2VDb21wbGV0aW9uVGltZTogMCxcbiAgICAgICAgICBjb21wbGV0aW9uUmF0ZTogMCxcbiAgICAgICAgICBhdmVyYWdlU2NvcmU6IDAsXG4gICAgICAgICAgcG9wdWxhclRhZ3M6IFtdLFxuICAgICAgICAgIHdlZWtseVByb2dyZXNzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLmdldFdvcmtzaGVldFN0YXRzLm1vY2tSZXNvbHZlZFZhbHVlKGVtcHR5U3RhdHMpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0V29ya3NoZWV0U3RhdHMoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoZW1wdHlTdGF0cyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQudG90YWxXb3Jrc2hlZXRzKS50b0JlKDApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnR0VUIC93b3Jrc2hlZXRzL2FuYWx5dGljcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFuYWx5dGljc1F1ZXJ5ID0ge1xuICAgICAgICBzdGFydERhdGU6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIGVuZERhdGU6ICcyMDI0LTAxLTMxVDIzOjU5OjU5WicsXG4gICAgICAgIGdyb3VwQnk6ICd3ZWVrJyxcbiAgICAgIH07XG5cbiAgICAgIGl0KCdzaG91bGQgZ2V0IHdvcmtzaGVldCBhbmFseXRpY3Mgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBtb2NrQW5hbHl0aWNzID0ge1xuICAgICAgICAgIHBlcmlvZFN0YXRzOiB7XG4gICAgICAgICAgICB0b3RhbEFzc2lnbmVkOiA1MCxcbiAgICAgICAgICAgIHRvdGFsQ29tcGxldGVkOiAzOCxcbiAgICAgICAgICAgIHRvdGFsSW5Qcm9ncmVzczogOCxcbiAgICAgICAgICAgIHRvdGFsT3ZlcmR1ZTogNCxcbiAgICAgICAgICAgIGNvbXBsZXRpb25SYXRlOiA3Ni4wLFxuICAgICAgICAgICAgYXZlcmFnZVNjb3JlOiA4LjIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aW1lbGluZTogW1xuICAgICAgICAgICAgeyBwZXJpb2Q6ICcyMDI0LTAxLTAxJywgYXNzaWduZWQ6IDEyLCBjb21wbGV0ZWQ6IDksIGluUHJvZ3Jlc3M6IDIsIG92ZXJkdWU6IDEgfSxcbiAgICAgICAgICAgIHsgcGVyaW9kOiAnMjAyNC0wMS0wOCcsIGFzc2lnbmVkOiAxNSwgY29tcGxldGVkOiAxMSwgaW5Qcm9ncmVzczogMywgb3ZlcmR1ZTogMSB9LFxuICAgICAgICAgICAgeyBwZXJpb2Q6ICcyMDI0LTAxLTE1JywgYXNzaWduZWQ6IDEzLCBjb21wbGV0ZWQ6IDEwLCBpblByb2dyZXNzOiAyLCBvdmVyZHVlOiAxIH0sXG4gICAgICAgICAgICB7IHBlcmlvZDogJzIwMjQtMDEtMjInLCBhc3NpZ25lZDogMTAsIGNvbXBsZXRlZDogOCwgaW5Qcm9ncmVzczogMSwgb3ZlcmR1ZTogMSB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgdG9wUGVyZm9ybWluZ0NsaWVudHM6IFtcbiAgICAgICAgICAgIHsgY2xpZW50SWQ6IFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCBjb21wbGV0aW9uUmF0ZTogOTUuMCwgYXZlcmFnZVNjb3JlOiA5LjIgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIGNhdGVnb3J5QnJlYWtkb3duOiBbXG4gICAgICAgICAgICB7IGNhdGVnb3J5OiAnYW54aWV0eScsIGNvdW50OiAxOCwgY29tcGxldGlvblJhdGU6IDgyLjAgfSxcbiAgICAgICAgICAgIHsgY2F0ZWdvcnk6ICdkZXByZXNzaW9uJywgY291bnQ6IDE1LCBjb21wbGV0aW9uUmF0ZTogNzMuMCB9LFxuICAgICAgICAgICAgeyBjYXRlZ29yeTogJ21pbmRmdWxuZXNzJywgY291bnQ6IDEyLCBjb21wbGV0aW9uUmF0ZTogODguMCB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5nZXRXb3Jrc2hlZXRBbmFseXRpY3MubW9ja1Jlc29sdmVkVmFsdWUobW9ja0FuYWx5dGljcyk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRXb3Jrc2hlZXRBbmFseXRpY3MoXG4gICAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgICAgYW5hbHl0aWNzUXVlcnlcbiAgICAgICAgKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tBbmFseXRpY3MpO1xuICAgICAgICBleHBlY3Qod29ya3NoZWV0c1NlcnZpY2UuZ2V0V29ya3NoZWV0QW5hbHl0aWNzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgICBhbmFseXRpY3NRdWVyeVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZWFyY2ggYW5kIEZpbHRlcmluZycsICgpID0+IHtcbiAgICBkZXNjcmliZSgnR0VUIC93b3Jrc2hlZXRzL3NlYXJjaCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlYXJjaFF1ZXJ5ID0ge1xuICAgICAgICBxdWVyeTogJ2FueGlldHkgbWFuYWdlbWVudCcsXG4gICAgICAgIHRhZ3M6IFsnYW54aWV0eScsICdDQlQnXSxcbiAgICAgICAgc3RhdHVzOiAnYXNzaWduZWQnLFxuICAgICAgICBjbGllbnRJZDogVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIGxpbWl0OiAxMCxcbiAgICAgIH07XG5cbiAgICAgIGl0KCdzaG91bGQgc2VhcmNoIHdvcmtzaGVldHMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHRzID0ge1xuICAgICAgICAgIHdvcmtzaGVldHM6IFttb2NrV29ya3NoZWV0XSxcbiAgICAgICAgICB0b3RhbENvdW50OiAxLFxuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgdG90YWxQYWdlczogMSxcbiAgICAgICAgICBzZWFyY2hNZXRhZGF0YToge1xuICAgICAgICAgICAgcXVlcnk6IHNlYXJjaFF1ZXJ5LnF1ZXJ5LFxuICAgICAgICAgICAgdGFnczogc2VhcmNoUXVlcnkudGFncyxcbiAgICAgICAgICAgIHJlc3VsdHNGb3VuZDogMSxcbiAgICAgICAgICAgIHNlYXJjaFRpbWU6IDQ1LFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5zZWFyY2hXb3Jrc2hlZXRzLm1vY2tSZXNvbHZlZFZhbHVlKHNlYXJjaFJlc3VsdHMpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuc2VhcmNoV29ya3NoZWV0cyhURVNUX1VTRVJfSURTLlRIRVJBUElTVCwgc2VhcmNoUXVlcnkpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoc2VhcmNoUmVzdWx0cyk7XG4gICAgICAgIGV4cGVjdCh3b3Jrc2hlZXRzU2VydmljZS5zZWFyY2hXb3Jrc2hlZXRzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgICBzZWFyY2hRdWVyeVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHNlYXJjaCByZXN1bHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlbXB0eVJlc3VsdHMgPSB7XG4gICAgICAgICAgd29ya3NoZWV0czogW10sXG4gICAgICAgICAgdG90YWxDb3VudDogMCxcbiAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgIHRvdGFsUGFnZXM6IDAsXG4gICAgICAgICAgc2VhcmNoTWV0YWRhdGE6IHtcbiAgICAgICAgICAgIHF1ZXJ5OiAnbm9uZXhpc3RlbnQgdGVybScsXG4gICAgICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgICAgIHJlc3VsdHNGb3VuZDogMCxcbiAgICAgICAgICAgIHNlYXJjaFRpbWU6IDEyLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5zZWFyY2hXb3Jrc2hlZXRzLm1vY2tSZXNvbHZlZFZhbHVlKGVtcHR5UmVzdWx0cyk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5zZWFyY2hXb3Jrc2hlZXRzKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULCB7XG4gICAgICAgICAgcXVlcnk6ICdub25leGlzdGVudCB0ZXJtJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChlbXB0eVJlc3VsdHMpO1xuICAgICAgICBleHBlY3QocmVzdWx0LndvcmtzaGVldHMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSB1bmF2YWlsYWJsZSBzY2VuYXJpb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ1NlcnZpY2UgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUnKTtcbiAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5maW5kQWxsLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5maW5kQWxsKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULCB7fSlcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHNlcnZpY2VFcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmaWxlIHN0b3JhZ2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RvcmFnZUVycm9yID0gbmV3IEVycm9yKCdTdG9yYWdlIHNlcnZpY2UgdW5hdmFpbGFibGUnKTtcbiAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5jcmVhdGUubW9ja1JlamVjdGVkVmFsdWUoc3RvcmFnZUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmNyZWF0ZShcbiAgICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ1Rlc3QgV29ya3NoZWV0JyxcbiAgICAgICAgICAgIGNsaWVudElkOiBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAgICAgIHRoZXJhcGlzdElkOiBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1vY2tGaWxlc1xuICAgICAgICApXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhzdG9yYWdlRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCB3b3Jrc2hlZXQgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmN1cnJlbmN5RXJyb3IgPSBuZXcgRXJyb3IoJ1dvcmtzaGVldCBpcyBiZWluZyB1cGRhdGVkIGJ5IGFub3RoZXIgcHJvY2VzcycpO1xuICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLnVwZGF0ZS5tb2NrUmVqZWN0ZWRWYWx1ZShjb25jdXJyZW5jeUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLnVwZGF0ZShURVNUX1VTRVJfSURTLlRIRVJBUElTVCwgJ3dvcmtzaGVldF8xMjM0NTY3ODknLCB7IHRpdGxlOiAnVXBkYXRlZCcgfSlcbiAgICAgICkucmVqZWN0cy50b1Rocm93KGNvbmN1cnJlbmN5RXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgY29ubmVjdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkYkVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLmdldFdvcmtzaGVldFN0YXRzLm1vY2tSZWplY3RlZFZhbHVlKGRiRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0V29ya3NoZWV0U3RhdHMoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhkYkVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Jlc3BvbnNlIEZvcm1hdCBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHByb3Blcmx5IGZvcm1hdHRlZCB3b3Jrc2hlZXQgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtzaGVldCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZmluZEJ5SWQoJ3dvcmtzaGVldF8xMjM0NTY3ODknKTtcblxuICAgICAgVGVzdEFzc2VydGlvbnMuZXhwZWN0VmFsaWRFbnRpdHkocmVzdWx0LCBbJ2lkJywgJ3RpdGxlJywgJ2Rlc2NyaXB0aW9uJywgJ3N0YXR1cyddKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaWQpLnRvQmUobW9ja1dvcmtzaGVldC5pZCk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSgnYXNzaWduZWQnKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC50YWdzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5tYXRlcmlhbHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnN1Ym1pc3Npb25zKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHByb3Blcmx5IGZvcm1hdHRlZCBzdWJtaXNzaW9uIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1dvcmtzaGVldHNTZXJ2aWNlLmNyZWF0ZVN1Ym1pc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtzaGVldFN1Ym1pc3Npb24pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNyZWF0ZVN1Ym1pc3Npb24oVEVTVF9VU0VSX0lEUy5DTElFTlQsIHtcbiAgICAgICAgd29ya3NoZWV0SWQ6ICd3b3Jrc2hlZXRfMTIzNDU2Nzg5JyxcbiAgICAgICAgY29udGVudDogJ1Rlc3Qgc3VibWlzc2lvbicsXG4gICAgICB9KTtcblxuICAgICAgVGVzdEFzc2VydGlvbnMuZXhwZWN0VmFsaWRFbnRpdHkocmVzdWx0LCBbJ2lkJywgJ3dvcmtzaGVldElkJywgJ2NsaWVudElkJywgJ2NvbnRlbnQnXSk7XG4gICAgICBleHBlY3QocmVzdWx0LndvcmtzaGVldElkKS50b0JlKCd3b3Jrc2hlZXRfMTIzNDU2Nzg5Jyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5zY29yZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQuYXR0YWNobWVudHMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvcGVybHkgZm9ybWF0dGVkIHN0YXRpc3RpY3MgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrV29ya3NoZWV0c1NlcnZpY2UuZ2V0V29ya3NoZWV0U3RhdHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtzaGVldFN0YXRzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRXb3Jrc2hlZXRTdGF0cyhURVNUX1VTRVJfSURTLlRIRVJBUElTVCk7XG5cbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnRvdGFsV29ya3NoZWV0cykudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jb21wbGV0aW9uUmF0ZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5hdmVyYWdlU2NvcmUpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnBvcHVsYXJUYWdzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC53ZWVrbHlQcm9ncmVzcykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1haW50YWluIGRhdGEgaW50ZWdyaXR5IGZvciB3b3Jrc2hlZXQgY3JlYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjcmVhdGVEdG8gPSB7XG4gICAgICAgIHRpdGxlOiAnVGVzdCBXb3Jrc2hlZXQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3QgZGVzY3JpcHRpb24nLFxuICAgICAgICBjbGllbnRJZDogVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgIHRoZXJhcGlzdElkOiBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgIH07XG4gICAgICBjb25zdCBjcmVhdGVkV29ya3NoZWV0ID0geyAuLi5tb2NrV29ya3NoZWV0LCAuLi5jcmVhdGVEdG8gfTtcbiAgICAgIG1vY2tXb3Jrc2hlZXRzU2VydmljZS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoY3JlYXRlZFdvcmtzaGVldCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuY3JlYXRlKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULCBjcmVhdGVEdG8sIFtdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC50aXRsZSkudG9CZShjcmVhdGVEdG8udGl0bGUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jbGllbnRJZCkudG9CZShjcmVhdGVEdG8uY2xpZW50SWQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC50aGVyYXBpc3RJZCkudG9CZShjcmVhdGVEdG8udGhlcmFwaXN0SWQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jcmVhdGVkQXQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LnVwZGF0ZWRBdCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=