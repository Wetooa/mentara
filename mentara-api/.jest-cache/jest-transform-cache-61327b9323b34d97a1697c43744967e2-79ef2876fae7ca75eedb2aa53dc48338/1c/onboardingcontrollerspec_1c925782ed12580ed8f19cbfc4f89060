88a8470a3596ccc80e71bbcdcf5f2573
"use strict";
/**
 * Comprehensive Test Suite for OnboardingController
 * Tests user onboarding flow management and completion tracking
 */
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const onboarding_controller_1 = require("./onboarding.controller");
const onboarding_service_1 = require("./onboarding.service");
const jwt_auth_guard_1 = require("../auth/guards/jwt-auth.guard");
const admin_auth_guard_1 = require("../auth/guards/admin-auth.guard");
const admin_only_decorator_1 = require("../auth/decorators/admin-only.decorator");
const index_1 = require("../test-utils/index");
describe('OnboardingController', () => {
    let controller;
    let onboardingService;
    let module;
    // Mock OnboardingService
    const mockOnboardingService = {
        getOnboardingStatus: jest.fn(),
        markStepCompleted: jest.fn(),
        validateOnboardingCompleteness: jest.fn(),
        getOnboardingInsights: jest.fn(),
    };
    // Mock Guards
    const mockJwtAuthGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    const mockAdminAuthGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    // Test data
    const mockOnboardingStatus = {
        userId: index_1.TEST_USER_IDS.CLIENT,
        isCompleted: false,
        completionPercentage: 60,
        steps: {
            profileSetup: {
                completed: true,
                completedAt: new Date('2024-02-10T10:00:00Z'),
                required: true,
            },
            preAssessment: {
                completed: true,
                completedAt: new Date('2024-02-11T14:00:00Z'),
                required: true,
            },
            therapistSelection: {
                completed: false,
                completedAt: null,
                required: true,
            },
            firstSession: {
                completed: false,
                completedAt: null,
                required: false,
            },
            communityJoin: {
                completed: false,
                completedAt: null,
                required: false,
            },
        },
        nextSteps: [
            {
                stepName: 'therapistSelection',
                title: 'Select Your Therapist',
                description: 'Browse and select a therapist that matches your needs',
                required: true,
                estimatedTime: 15,
            },
        ],
        startedAt: new Date('2024-02-10T09:00:00Z'),
        lastUpdatedAt: new Date('2024-02-11T14:30:00Z'),
    };
    const mockCompletedOnboardingStatus = {
        ...mockOnboardingStatus,
        isCompleted: true,
        completionPercentage: 100,
        steps: {
            ...mockOnboardingStatus.steps,
            therapistSelection: {
                completed: true,
                completedAt: new Date('2024-02-12T16:00:00Z'),
                required: true,
            },
            firstSession: {
                completed: true,
                completedAt: new Date('2024-02-13T10:00:00Z'),
                required: false,
            },
        },
        nextSteps: [],
        completedAt: new Date('2024-02-13T10:00:00Z'),
    };
    const mockValidationResult = {
        isValid: true,
        missingSteps: [],
        recommendations: [
            {
                stepName: 'communityJoin',
                priority: 'low',
                reason: 'Joining a community can provide additional support',
            },
        ],
    };
    const mockOnboardingInsights = {
        totalUsers: 15234,
        completedOnboarding: 12456,
        completionRate: 81.7,
        averageCompletionTime: 3.2, // days
        stepCompletionRates: {
            profileSetup: 98.5,
            preAssessment: 94.2,
            therapistSelection: 87.3,
            firstSession: 76.8,
            communityJoin: 45.2,
        },
        commonDropOffPoints: [
            {
                stepName: 'therapistSelection',
                dropOffRate: 12.7,
                commonReasons: ['Too many options', 'Pricing concerns', 'Availability issues'],
            },
            {
                stepName: 'firstSession',
                dropOffRate: 10.5,
                commonReasons: ['Scheduling conflicts', 'Technical issues', 'Changed mind'],
            },
        ],
        recentTrends: {
            weeklyCompletions: [45, 52, 48, 67, 59, 71, 63],
            improvementAreas: ['therapist matching', 'scheduling flow', 'pricing clarity'],
        },
    };
    beforeEach(async () => {
        module = await testing_1.Test.createTestingModule({
            controllers: [onboarding_controller_1.OnboardingController],
            providers: [
                {
                    provide: onboarding_service_1.OnboardingService,
                    useValue: mockOnboardingService,
                },
            ],
        })
            .overrideGuard(jwt_auth_guard_1.JwtAuthGuard)
            .useValue(mockJwtAuthGuard)
            .overrideGuard(admin_auth_guard_1.AdminAuthGuard)
            .useValue(mockAdminAuthGuard)
            .compile();
        controller = module.get(onboarding_controller_1.OnboardingController);
        onboardingService = module.get(onboarding_service_1.OnboardingService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('Controller Initialization', () => {
        it('should be defined', () => {
            expect(controller).toBeDefined();
        });
        it('should have onboardingService injected', () => {
            expect(onboardingService).toBeDefined();
        });
    });
    describe('Security Guards', () => {
        it('should be protected by JwtAuthGuard', () => {
            const guards = Reflect.getMetadata('__guards__', onboarding_controller_1.OnboardingController);
            expect(guards).toContain(jwt_auth_guard_1.JwtAuthGuard);
        });
        it('should have proper route decorators', () => {
            const controllerMetadata = Reflect.getMetadata('path', onboarding_controller_1.OnboardingController);
            expect(controllerMetadata).toBe('onboarding');
        });
        it('should require admin role for admin-only endpoints', () => {
            const adminOnlyMethods = ['getUserOnboardingStatus', 'getOnboardingInsights'];
            adminOnlyMethods.forEach(method => {
                const metadata = Reflect.getMetadata(admin_only_decorator_1.ADMIN_ONLY_KEY, controller[method]);
                expect(metadata).toBe(true);
            });
        });
    });
    describe('GET /onboarding/status', () => {
        it('should get my onboarding status successfully', async () => {
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const result = await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockOnboardingStatus);
            expect(onboardingService.getOnboardingStatus).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Failed to retrieve onboarding status');
            mockOnboardingService.getOnboardingStatus.mockRejectedValue(serviceError);
            await expect(controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
            try {
                await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.HttpException);
                expect(error.getStatus()).toBe(common_1.HttpStatus.INTERNAL_SERVER_ERROR);
                expect(error.message).toContain('Failed to retrieve onboarding status');
            }
        });
        it('should validate onboarding status structure', async () => {
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const result = await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('userId');
            expect(result).toHaveProperty('isCompleted');
            expect(result).toHaveProperty('completionPercentage');
            expect(result).toHaveProperty('steps');
            expect(result).toHaveProperty('nextSteps');
            expect(result).toHaveProperty('startedAt');
            expect(result).toHaveProperty('lastUpdatedAt');
            expect(typeof result.isCompleted).toBe('boolean');
            expect(typeof result.completionPercentage).toBe('number');
            expect(result.completionPercentage).toBeGreaterThanOrEqual(0);
            expect(result.completionPercentage).toBeLessThanOrEqual(100);
            expect(Array.isArray(result.nextSteps)).toBe(true);
        });
        it('should handle completed onboarding status', async () => {
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockCompletedOnboardingStatus);
            const result = await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(result.isCompleted).toBe(true);
            expect(result.completionPercentage).toBe(100);
            expect(result.nextSteps).toHaveLength(0);
            expect(result.completedAt).toBeDefined();
        });
    });
    describe('GET /onboarding/status/:userId', () => {
        it('should get user onboarding status successfully as admin', async () => {
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const result = await controller.getUserOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockOnboardingStatus);
            expect(onboardingService.getOnboardingStatus).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT);
        });
        it('should handle service errors for admin requests', async () => {
            const serviceError = new Error('User not found');
            mockOnboardingService.getOnboardingStatus.mockRejectedValue(serviceError);
            await expect(controller.getUserOnboardingStatus(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
        });
        it('should pass through HTTP exceptions from service', async () => {
            const httpError = new common_1.HttpException('User not found', common_1.HttpStatus.NOT_FOUND);
            mockOnboardingService.getOnboardingStatus.mockRejectedValue(httpError);
            await expect(controller.getUserOnboardingStatus('nonexistent_user')).rejects.toThrow(httpError);
        });
        it('should handle different user IDs', async () => {
            const userIds = [index_1.TEST_USER_IDS.CLIENT, index_1.TEST_USER_IDS.THERAPIST, 'custom_user_123'];
            for (const userId of userIds) {
                mockOnboardingService.getOnboardingStatus.mockResolvedValue({
                    ...mockOnboardingStatus,
                    userId,
                });
                const result = await controller.getUserOnboardingStatus(userId);
                expect(result.userId).toBe(userId);
            }
        });
    });
    describe('POST /onboarding/complete-step/:stepName', () => {
        it('should complete step successfully', async () => {
            const updatedStatus = {
                ...mockOnboardingStatus,
                steps: {
                    ...mockOnboardingStatus.steps,
                    therapistSelection: {
                        completed: true,
                        completedAt: new Date('2024-02-12T16:00:00Z'),
                        required: true,
                    },
                },
                completionPercentage: 80,
            };
            mockOnboardingService.markStepCompleted.mockResolvedValue(updatedStatus);
            const result = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'therapistSelection');
            expect(result).toEqual(updatedStatus);
            expect(onboardingService.markStepCompleted).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT, 'therapistSelection');
        });
        it('should handle different step names', async () => {
            const stepNames = [
                'profileSetup',
                'preAssessment',
                'therapistSelection',
                'firstSession',
                'communityJoin',
            ];
            for (const stepName of stepNames) {
                mockOnboardingService.markStepCompleted.mockResolvedValue({
                    ...mockOnboardingStatus,
                    steps: {
                        ...mockOnboardingStatus.steps,
                        [stepName]: {
                            completed: true,
                            completedAt: new Date(),
                            required: true,
                        },
                    },
                });
                const result = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, stepName);
                expect(result.steps[stepName].completed).toBe(true);
            }
        });
        it('should handle service errors during step completion', async () => {
            const serviceError = new Error('Invalid step name');
            mockOnboardingService.markStepCompleted.mockRejectedValue(serviceError);
            await expect(controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'invalidStep')).rejects.toThrow(common_1.HttpException);
            try {
                await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'invalidStep');
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.HttpException);
                expect(error.getStatus()).toBe(common_1.HttpStatus.INTERNAL_SERVER_ERROR);
                expect(error.message).toContain('Failed to complete onboarding step');
            }
        });
        it('should validate completion progress updates', async () => {
            const initialPercentage = mockOnboardingStatus.completionPercentage;
            const updatedStatus = {
                ...mockOnboardingStatus,
                completionPercentage: initialPercentage + 20,
            };
            mockOnboardingService.markStepCompleted.mockResolvedValue(updatedStatus);
            const result = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'therapistSelection');
            expect(result.completionPercentage).toBeGreaterThan(initialPercentage);
            expect(result.completionPercentage).toBeLessThanOrEqual(100);
        });
    });
    describe('GET /onboarding/validate', () => {
        it('should validate onboarding successfully', async () => {
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue(mockValidationResult);
            const result = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockValidationResult);
            expect(onboardingService.validateOnboardingCompleteness).toHaveBeenCalledWith(index_1.TEST_USER_IDS.CLIENT);
        });
        it('should handle validation with missing steps', async () => {
            const validationWithMissingSteps = {
                isValid: false,
                missingSteps: ['therapistSelection', 'firstSession'],
                recommendations: [
                    {
                        stepName: 'therapistSelection',
                        priority: 'high',
                        reason: 'Required step for accessing therapy services',
                    },
                ],
            };
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue(validationWithMissingSteps);
            const result = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(result.isValid).toBe(false);
            expect(result.missingSteps).toHaveLength(2);
            expect(result.recommendations).toHaveLength(1);
        });
        it('should handle service errors during validation', async () => {
            const serviceError = new Error('Validation service unavailable');
            mockOnboardingService.validateOnboardingCompleteness.mockRejectedValue(serviceError);
            await expect(controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
            try {
                await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.HttpException);
                expect(error.getStatus()).toBe(common_1.HttpStatus.INTERNAL_SERVER_ERROR);
                expect(error.message).toContain('Failed to validate onboarding completeness');
            }
        });
        it('should validate response structure', async () => {
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue(mockValidationResult);
            const result = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('isValid');
            expect(result).toHaveProperty('missingSteps');
            expect(result).toHaveProperty('recommendations');
            expect(typeof result.isValid).toBe('boolean');
            expect(Array.isArray(result.missingSteps)).toBe(true);
            expect(Array.isArray(result.recommendations)).toBe(true);
        });
    });
    describe('GET /onboarding/insights', () => {
        it('should get onboarding insights successfully as admin', async () => {
            mockOnboardingService.getOnboardingInsights.mockResolvedValue(mockOnboardingInsights);
            const result = await controller.getOnboardingInsights();
            expect(result).toEqual(mockOnboardingInsights);
            expect(onboardingService.getOnboardingInsights).toHaveBeenCalled();
        });
        it('should handle service errors for insights', async () => {
            const serviceError = new Error('Analytics service unavailable');
            mockOnboardingService.getOnboardingInsights.mockRejectedValue(serviceError);
            await expect(controller.getOnboardingInsights()).rejects.toThrow(common_1.HttpException);
            try {
                await controller.getOnboardingInsights();
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.HttpException);
                expect(error.getStatus()).toBe(common_1.HttpStatus.INTERNAL_SERVER_ERROR);
                expect(error.message).toContain('Failed to retrieve onboarding insights');
            }
        });
        it('should validate insights structure', async () => {
            mockOnboardingService.getOnboardingInsights.mockResolvedValue(mockOnboardingInsights);
            const result = await controller.getOnboardingInsights();
            expect(result).toHaveProperty('totalUsers');
            expect(result).toHaveProperty('completedOnboarding');
            expect(result).toHaveProperty('completionRate');
            expect(result).toHaveProperty('averageCompletionTime');
            expect(result).toHaveProperty('stepCompletionRates');
            expect(result).toHaveProperty('commonDropOffPoints');
            expect(result).toHaveProperty('recentTrends');
            expect(typeof result.totalUsers).toBe('number');
            expect(typeof result.completionRate).toBe('number');
            expect(typeof result.averageCompletionTime).toBe('number');
            expect(typeof result.stepCompletionRates).toBe('object');
            expect(Array.isArray(result.commonDropOffPoints)).toBe(true);
            expect(Array.isArray(result.recentTrends.weeklyCompletions)).toBe(true);
            // Validate completion rate range
            expect(result.completionRate).toBeGreaterThanOrEqual(0);
            expect(result.completionRate).toBeLessThanOrEqual(100);
        });
        it('should validate step completion rates', async () => {
            mockOnboardingService.getOnboardingInsights.mockResolvedValue(mockOnboardingInsights);
            const result = await controller.getOnboardingInsights();
            const stepRates = result.stepCompletionRates;
            Object.values(stepRates).forEach(rate => {
                expect(typeof rate).toBe('number');
                expect(rate).toBeGreaterThanOrEqual(0);
                expect(rate).toBeLessThanOrEqual(100);
            });
        });
    });
    describe('Response Format Validation', () => {
        it('should return properly formatted onboarding status', async () => {
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const result = await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('userId');
            expect(result).toHaveProperty('isCompleted');
            expect(result).toHaveProperty('completionPercentage');
            expect(result).toHaveProperty('steps');
            expect(result).toHaveProperty('nextSteps');
            expect(result).toHaveProperty('startedAt');
            expect(result).toHaveProperty('lastUpdatedAt');
            expect(result.startedAt).toBeInstanceOf(Date);
            expect(result.lastUpdatedAt).toBeInstanceOf(Date);
            expect(typeof result.completionPercentage).toBe('number');
        });
        it('should return properly formatted validation result', async () => {
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue(mockValidationResult);
            const result = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toHaveProperty('isValid');
            expect(result).toHaveProperty('missingSteps');
            expect(result).toHaveProperty('recommendations');
            expect(typeof result.isValid).toBe('boolean');
            expect(Array.isArray(result.missingSteps)).toBe(true);
            expect(Array.isArray(result.recommendations)).toBe(true);
        });
        it('should return properly formatted insights', async () => {
            mockOnboardingService.getOnboardingInsights.mockResolvedValue(mockOnboardingInsights);
            const result = await controller.getOnboardingInsights();
            expect(result).toHaveProperty('totalUsers');
            expect(result).toHaveProperty('completedOnboarding');
            expect(result).toHaveProperty('completionRate');
            expect(result).toHaveProperty('stepCompletionRates');
            expect(result).toHaveProperty('commonDropOffPoints');
            expect(typeof result.totalUsers).toBe('number');
            expect(typeof result.completionRate).toBe('number');
        });
    });
    describe('Error Handling', () => {
        it('should handle database connection errors', async () => {
            const dbError = new Error('Database connection failed');
            mockOnboardingService.getOnboardingStatus.mockRejectedValue(dbError);
            await expect(controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
        });
        it('should handle invalid user IDs', async () => {
            const invalidUserError = new Error('Invalid user ID format');
            mockOnboardingService.getOnboardingStatus.mockRejectedValue(invalidUserError);
            await expect(controller.getMyOnboardingStatus('invalid-user-id')).rejects.toThrow(common_1.HttpException);
        });
        it('should handle onboarding service unavailable', async () => {
            const serviceError = new Error('Onboarding service temporarily unavailable');
            mockOnboardingService.markStepCompleted.mockRejectedValue(serviceError);
            await expect(controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'profileSetup')).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('Integration Tests', () => {
        it('should handle complete onboarding workflow', async () => {
            // Get initial status
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const initialStatus = await controller.getMyOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(initialStatus.isCompleted).toBe(false);
            // Complete a step
            const updatedStatus = {
                ...mockOnboardingStatus,
                completionPercentage: 80,
            };
            mockOnboardingService.markStepCompleted.mockResolvedValue(updatedStatus);
            const stepResult = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'therapistSelection');
            expect(stepResult.completionPercentage).toBeGreaterThan(initialStatus.completionPercentage);
            // Validate onboarding
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue(mockValidationResult);
            const validationResult = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(validationResult).toHaveProperty('isValid');
        });
        it('should handle admin insights workflow', async () => {
            // Get insights as admin
            mockOnboardingService.getOnboardingInsights.mockResolvedValue(mockOnboardingInsights);
            const insights = await controller.getOnboardingInsights();
            expect(insights.totalUsers).toBeGreaterThan(0);
            expect(insights.completionRate).toBeGreaterThan(0);
            // Get specific user status as admin
            mockOnboardingService.getOnboardingStatus.mockResolvedValue(mockOnboardingStatus);
            const userStatus = await controller.getUserOnboardingStatus(index_1.TEST_USER_IDS.CLIENT);
            expect(userStatus.userId).toBe(index_1.TEST_USER_IDS.CLIENT);
        });
        it('should validate onboarding progression logic', async () => {
            // Test progression through multiple steps
            const steps = ['profileSetup', 'preAssessment', 'therapistSelection'];
            let currentPercentage = 0;
            for (let i = 0; i < steps.length; i++) {
                const newPercentage = Math.round(((i + 1) / steps.length) * 100);
                mockOnboardingService.markStepCompleted.mockResolvedValue({
                    ...mockOnboardingStatus,
                    completionPercentage: newPercentage,
                });
                const result = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, steps[i]);
                expect(result.completionPercentage).toBeGreaterThanOrEqual(currentPercentage);
                currentPercentage = result.completionPercentage;
            }
        });
        it('should handle edge cases in onboarding flow', async () => {
            // Test completing already completed step
            mockOnboardingService.markStepCompleted.mockResolvedValue(mockOnboardingStatus);
            const result = await controller.completeStep(index_1.TEST_USER_IDS.CLIENT, 'profileSetup');
            expect(result.steps.profileSetup.completed).toBe(true);
            // Test validation for completed onboarding
            mockOnboardingService.validateOnboardingCompleteness.mockResolvedValue({
                isValid: true,
                missingSteps: [],
                recommendations: [],
            });
            const validation = await controller.validateOnboarding(index_1.TEST_USER_IDS.CLIENT);
            expect(validation.isValid).toBe(true);
            expect(validation.missingSteps).toHaveLength(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL29uYm9hcmRpbmcvb25ib2FyZGluZy5jb250cm9sbGVyLnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCw2Q0FBc0Q7QUFDdEQsMkNBQTJEO0FBQzNELG1FQUErRDtBQUMvRCw2REFBMkU7QUFDM0Usa0VBQTZEO0FBQzdELHNFQUFpRTtBQUNqRSxrRkFBeUU7QUFHekUsK0NBQWlFO0FBRWpFLFFBQVEsQ0FBQyxzQkFBc0IsRUFBRSxHQUFHLEVBQUU7SUFDcEMsSUFBSSxVQUFnQyxDQUFDO0lBQ3JDLElBQUksaUJBQW9DLENBQUM7SUFDekMsSUFBSSxNQUFxQixDQUFDO0lBRTFCLHlCQUF5QjtJQUN6QixNQUFNLHFCQUFxQixHQUFHO1FBQzVCLG1CQUFtQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDOUIsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUM1Qiw4QkFBOEIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3pDLHFCQUFxQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDakMsQ0FBQztJQUVGLGNBQWM7SUFDZCxNQUFNLGdCQUFnQixHQUFHO1FBQ3ZCLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQztLQUM3QyxDQUFDO0lBRUYsTUFBTSxrQkFBa0IsR0FBRztRQUN6QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUM7S0FDN0MsQ0FBQztJQUVGLFlBQVk7SUFDWixNQUFNLG9CQUFvQixHQUFxQjtRQUM3QyxNQUFNLEVBQUUscUJBQWEsQ0FBQyxNQUFNO1FBQzVCLFdBQVcsRUFBRSxLQUFLO1FBQ2xCLG9CQUFvQixFQUFFLEVBQUU7UUFDeEIsS0FBSyxFQUFFO1lBQ0wsWUFBWSxFQUFFO2dCQUNaLFNBQVMsRUFBRSxJ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QUFDO1lBQ25GLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFdkQsMkNBQTJDO1lBQzNDLHFCQUFxQixDQUFDLDhCQUE4QixDQUFDLGlCQUFpQixDQUFDO2dCQUNyRSxPQUFPLEVBQUUsSUFBSTtnQkFDYixZQUFZLEVBQUUsRUFBRTtnQkFDaEIsZUFBZSxFQUFFLEVBQUU7YUFDcEIsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxVQUFVLEdBQUcsTUFBTSxVQUFVLENBQUMsa0JBQWtCLENBQUMscUJBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM3RSxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL29uYm9hcmRpbmcvb25ib2FyZGluZy5jb250cm9sbGVyLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb21wcmVoZW5zaXZlIFRlc3QgU3VpdGUgZm9yIE9uYm9hcmRpbmdDb250cm9sbGVyXG4gKiBUZXN0cyB1c2VyIG9uYm9hcmRpbmcgZmxvdyBtYW5hZ2VtZW50IGFuZCBjb21wbGV0aW9uIHRyYWNraW5nXG4gKi9cblxuaW1wb3J0IHsgVGVzdCwgVGVzdGluZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGVzdGluZyc7XG5pbXBvcnQgeyBIdHRwRXhjZXB0aW9uLCBIdHRwU3RhdHVzIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgT25ib2FyZGluZ0NvbnRyb2xsZXIgfSBmcm9tICcuL29uYm9hcmRpbmcuY29udHJvbGxlcic7XG5pbXBvcnQgeyBPbmJvYXJkaW5nU2VydmljZSwgT25ib2FyZGluZ1N0YXR1cyB9IGZyb20gJy4vb25ib2FyZGluZy5zZXJ2aWNlJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IEFkbWluQXV0aEd1YXJkIH0gZnJvbSAnLi4vYXV0aC9ndWFyZHMvYWRtaW4tYXV0aC5ndWFyZCc7XG5pbXBvcnQgeyBBRE1JTl9PTkxZX0tFWSB9IGZyb20gJy4uL2F1dGgvZGVjb3JhdG9ycy9hZG1pbi1vbmx5LmRlY29yYXRvcic7XG5pbXBvcnQgeyBTZWN1cml0eUd1YXJkVGVzdFV0aWxzLCBSb2xlQmFzZWRUZXN0VXRpbHMgfSBmcm9tICcuLi90ZXN0LXV0aWxzL2F1dGgtdGVzdGluZy1oZWxwZXJzJztcbmltcG9ydCB7IE1vY2tCdWlsZGVyLCBUZXN0RGF0YUdlbmVyYXRvciwgVGVzdEFzc2VydGlvbnMgfSBmcm9tICcuLi90ZXN0LXV0aWxzL2VuaGFuY2VkLXRlc3QtaGVscGVycyc7XG5pbXBvcnQgeyBURVNUX1VTRVJfSURTLCBURVNUX0VNQUlMUyB9IGZyb20gJy4uL3Rlc3QtdXRpbHMvaW5kZXgnO1xuXG5kZXNjcmliZSgnT25ib2FyZGluZ0NvbnRyb2xsZXInLCAoKSA9PiB7XG4gIGxldCBjb250cm9sbGVyOiBPbmJvYXJkaW5nQ29udHJvbGxlcjtcbiAgbGV0IG9uYm9hcmRpbmdTZXJ2aWNlOiBPbmJvYXJkaW5nU2VydmljZTtcbiAgbGV0IG1vZHVsZTogVGVzdGluZ01vZHVsZTtcblxuICAvLyBNb2NrIE9uYm9hcmRpbmdTZXJ2aWNlXG4gIGNvbnN0IG1vY2tPbmJvYXJkaW5nU2VydmljZSA9IHtcbiAgICBnZXRPbmJvYXJkaW5nU3RhdHVzOiBqZXN0LmZuKCksXG4gICAgbWFya1N0ZXBDb21wbGV0ZWQ6IGplc3QuZm4oKSxcbiAgICB2YWxpZGF0ZU9uYm9hcmRpbmdDb21wbGV0ZW5lc3M6IGplc3QuZm4oKSxcbiAgICBnZXRPbmJvYXJkaW5nSW5zaWdodHM6IGplc3QuZm4oKSxcbiAgfTtcblxuICAvLyBNb2NrIEd1YXJkc1xuICBjb25zdCBtb2NrSnd0QXV0aEd1YXJkID0ge1xuICAgIGNhbkFjdGl2YXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHRydWUpLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tBZG1pbkF1dGhHdWFyZCA9IHtcbiAgICBjYW5BY3RpdmF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKSxcbiAgfTtcblxuICAvLyBUZXN0IGRhdGFcbiAgY29uc3QgbW9ja09uYm9hcmRpbmdTdGF0dXM6IE9uYm9hcmRpbmdTdGF0dXMgPSB7XG4gICAgdXNlcklkOiBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICBpc0NvbXBsZXRlZDogZmFsc2UsXG4gICAgY29tcGxldGlvblBlcmNlbnRhZ2U6IDYwLFxuICAgIHN0ZXBzOiB7XG4gICAgICBwcm9maWxlU2V0dXA6IHtcbiAgICAgICAgY29tcGxldGVkOiB0cnVlLFxuICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDItMTBUMTA6MDA6MDBaJyksXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHByZUFzc2Vzc21lbnQ6IHtcbiAgICAgICAgY29tcGxldGVkOiB0cnVlLFxuICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDItMTFUMTQ6MDA6MDBaJyksXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHRoZXJhcGlzdFNlbGVjdGlvbjoge1xuICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgICBjb21wbGV0ZWRBdDogbnVsbCxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgZmlyc3RTZXNzaW9uOiB7XG4gICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgIGNvbXBsZXRlZEF0OiBudWxsLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgY29tbXVuaXR5Sm9pbjoge1xuICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgICBjb21wbGV0ZWRBdDogbnVsbCxcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9LFxuICAgIG5leHRTdGVwczogW1xuICAgICAge1xuICAgICAgICBzdGVwTmFtZTogJ3RoZXJhcGlzdFNlbGVjdGlvbicsXG4gICAgICAgIHRpdGxlOiAnU2VsZWN0IFlvdXIgVGhlcmFwaXN0JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdCcm93c2UgYW5kIHNlbGVjdCBhIHRoZXJhcGlzdCB0aGF0IG1hdGNoZXMgeW91ciBuZWVkcycsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBlc3RpbWF0ZWRUaW1lOiAxNSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBzdGFydGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAyLTEwVDA5OjAwOjAwWicpLFxuICAgIGxhc3RVcGRhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAyLTExVDE0OjMwOjAwWicpLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tDb21wbGV0ZWRPbmJvYXJkaW5nU3RhdHVzOiBPbmJvYXJkaW5nU3RhdHVzID0ge1xuICAgIC4uLm1vY2tPbmJvYXJkaW5nU3RhdHVzLFxuICAgIGlzQ29tcGxldGVkOiB0cnVlLFxuICAgIGNvbXBsZXRpb25QZXJjZW50YWdlOiAxMDAsXG4gICAgc3RlcHM6IHtcbiAgICAgIC4uLm1vY2tPbmJvYXJkaW5nU3RhdHVzLnN0ZXBzLFxuICAgICAgdGhlcmFwaXN0U2VsZWN0aW9uOiB7XG4gICAgICAgIGNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAyLTEyVDE2OjAwOjAwWicpLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBmaXJzdFNlc3Npb246IHtcbiAgICAgICAgY29tcGxldGVkOiB0cnVlLFxuICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDItMTNUMTA6MDA6MDBaJyksXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBuZXh0U3RlcHM6IFtdLFxuICAgIGNvbXBsZXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMi0xM1QxMDowMDowMFonKSxcbiAgfTtcblxuICBjb25zdCBtb2NrVmFsaWRhdGlvblJlc3VsdCA9IHtcbiAgICBpc1ZhbGlkOiB0cnVlLFxuICAgIG1pc3NpbmdTdGVwczogW10sXG4gICAgcmVjb21tZW5kYXRpb25zOiBbXG4gICAgICB7XG4gICAgICAgIHN0ZXBOYW1lOiAnY29tbXVuaXR5Sm9pbicsXG4gICAgICAgIHByaW9yaXR5OiAnbG93JyxcbiAgICAgICAgcmVhc29uOiAnSm9pbmluZyBhIGNvbW11bml0eSBjYW4gcHJvdmlkZSBhZGRpdGlvbmFsIHN1cHBvcnQnLFxuICAgICAgfSxcbiAgICBdLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tPbmJvYXJkaW5nSW5zaWdodHMgPSB7XG4gICAgdG90YWxVc2VyczogMTUyMzQsXG4gICAgY29tcGxldGVkT25ib2FyZGluZzogMTI0NTYsXG4gICAgY29tcGxldGlvblJhdGU6IDgxLjcsXG4gICAgYXZlcmFnZUNvbXBsZXRpb25UaW1lOiAzLjIsIC8vIGRheXNcbiAgICBzdGVwQ29tcGxldGlvblJhdGVzOiB7XG4gICAgICBwcm9maWxlU2V0dXA6IDk4LjUsXG4gICAgICBwcmVBc3Nlc3NtZW50OiA5NC4yLFxuICAgICAgdGhlcmFwaXN0U2VsZWN0aW9uOiA4Ny4zLFxuICAgICAgZmlyc3RTZXNzaW9uOiA3Ni44LFxuICAgICAgY29tbXVuaXR5Sm9pbjogNDUuMixcbiAgICB9LFxuICAgIGNvbW1vbkRyb3BPZmZQb2ludHM6IFtcbiAgICAgIHtcbiAgICAgICAgc3RlcE5hbWU6ICd0aGVyYXBpc3RTZWxlY3Rpb24nLFxuICAgICAgICBkcm9wT2ZmUmF0ZTogMTIuNyxcbiAgICAgICAgY29tbW9uUmVhc29uczogWydUb28gbWFueSBvcHRpb25zJywgJ1ByaWNpbmcgY29uY2VybnMnLCAnQXZhaWxhYmlsaXR5IGlzc3VlcyddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc3RlcE5hbWU6ICdmaXJzdFNlc3Npb24nLFxuICAgICAgICBkcm9wT2ZmUmF0ZTogMTAuNSxcbiAgICAgICAgY29tbW9uUmVhc29uczogWydTY2hlZHVsaW5nIGNvbmZsaWN0cycsICdUZWNobmljYWwgaXNzdWVzJywgJ0NoYW5nZWQgbWluZCddLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHJlY2VudFRyZW5kczoge1xuICAgICAgd2Vla2x5Q29tcGxldGlvbnM6IFs0NSwgNTIsIDQ4LCA2NywgNTksIDcxLCA2M10sXG4gICAgICBpbXByb3ZlbWVudEFyZWFzOiBbJ3RoZXJhcGlzdCBtYXRjaGluZycsICdzY2hlZHVsaW5nIGZsb3cnLCAncHJpY2luZyBjbGFyaXR5J10sXG4gICAgfSxcbiAgfTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBtb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgY29udHJvbGxlcnM6IFtPbmJvYXJkaW5nQ29udHJvbGxlcl0sXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IE9uYm9hcmRpbmdTZXJ2aWNlLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrT25ib2FyZGluZ1NlcnZpY2UsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pXG4gICAgICAub3ZlcnJpZGVHdWFyZChKd3RBdXRoR3VhcmQpXG4gICAgICAudXNlVmFsdWUobW9ja0p3dEF1dGhHdWFyZClcbiAgICAgIC5vdmVycmlkZUd1YXJkKEFkbWluQXV0aEd1YXJkKVxuICAgICAgLnVzZVZhbHVlKG1vY2tBZG1pbkF1dGhHdWFyZClcbiAgICAgIC5jb21waWxlKCk7XG5cbiAgICBjb250cm9sbGVyID0gbW9kdWxlLmdldDxPbmJvYXJkaW5nQ29udHJvbGxlcj4oT25ib2FyZGluZ0NvbnRyb2xsZXIpO1xuICAgIG9uYm9hcmRpbmdTZXJ2aWNlID0gbW9kdWxlLmdldDxPbmJvYXJkaW5nU2VydmljZT4oT25ib2FyZGluZ1NlcnZpY2UpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29udHJvbGxlciBJbml0aWFsaXphdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGJlIGRlZmluZWQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoY29udHJvbGxlcikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBvbmJvYXJkaW5nU2VydmljZSBpbmplY3RlZCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChvbmJvYXJkaW5nU2VydmljZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlY3VyaXR5IEd1YXJkcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGJlIHByb3RlY3RlZCBieSBKd3RBdXRoR3VhcmQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBndWFyZHMgPSBSZWZsZWN0LmdldE1ldGFkYXRhKCdfX2d1YXJkc19fJywgT25ib2FyZGluZ0NvbnRyb2xsZXIpO1xuICAgICAgZXhwZWN0KGd1YXJkcykudG9Db250YWluKEp3dEF1dGhHdWFyZCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIHJvdXRlIGRlY29yYXRvcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb250cm9sbGVyTWV0YWRhdGEgPSBSZWZsZWN0LmdldE1ldGFkYXRhKCdwYXRoJywgT25ib2FyZGluZ0NvbnRyb2xsZXIpO1xuICAgICAgZXhwZWN0KGNvbnRyb2xsZXJNZXRhZGF0YSkudG9CZSgnb25ib2FyZGluZycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXF1aXJlIGFkbWluIHJvbGUgZm9yIGFkbWluLW9ubHkgZW5kcG9pbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgYWRtaW5Pbmx5TWV0aG9kcyA9IFsnZ2V0VXNlck9uYm9hcmRpbmdTdGF0dXMnLCAnZ2V0T25ib2FyZGluZ0luc2lnaHRzJ107XG4gICAgICBhZG1pbk9ubHlNZXRob2RzLmZvckVhY2gobWV0aG9kID0+IHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBSZWZsZWN0LmdldE1ldGFkYXRhKEFETUlOX09OTFlfS0VZLCBjb250cm9sbGVyW21ldGhvZF0pO1xuICAgICAgICBleHBlY3QobWV0YWRhdGEpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvb25ib2FyZGluZy9zdGF0dXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgbXkgb25ib2FyZGluZyBzdGF0dXMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdTdGF0dXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja09uYm9hcmRpbmdTdGF0dXMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldE15T25ib2FyZGluZ1N0YXR1cyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja09uYm9hcmRpbmdTdGF0dXMpO1xuICAgICAgZXhwZWN0KG9uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdGYWlsZWQgdG8gcmV0cmlldmUgb25ib2FyZGluZyBzdGF0dXMnKTtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nU3RhdHVzLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRNeU9uYm9hcmRpbmdTdGF0dXMoVEVTVF9VU0VSX0lEUy5DTElFTlQpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgY29udHJvbGxlci5nZXRNeU9uYm9hcmRpbmdTdGF0dXMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihIdHRwRXhjZXB0aW9uKTtcbiAgICAgICAgZXhwZWN0KGVycm9yLmdldFN0YXR1cygpKS50b0JlKEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SKTtcbiAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignRmFpbGVkIHRvIHJldHJpZXZlIG9uYm9hcmRpbmcgc3RhdHVzJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIG9uYm9hcmRpbmcgc3RhdHVzIHN0cnVjdHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nU3RhdHVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tPbmJvYXJkaW5nU3RhdHVzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRNeU9uYm9hcmRpbmdTdGF0dXMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgndXNlcklkJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnaXNDb21wbGV0ZWQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb21wbGV0aW9uUGVyY2VudGFnZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0ZXBzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnbmV4dFN0ZXBzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnc3RhcnRlZEF0Jyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnbGFzdFVwZGF0ZWRBdCcpO1xuXG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5pc0NvbXBsZXRlZCkudG9CZSgnYm9vbGVhbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY29tcGxldGlvblBlcmNlbnRhZ2UpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGV0aW9uUGVyY2VudGFnZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29tcGxldGlvblBlcmNlbnRhZ2UpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5uZXh0U3RlcHMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcGxldGVkIG9uYm9hcmRpbmcgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdTdGF0dXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbXBsZXRlZE9uYm9hcmRpbmdTdGF0dXMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldE15T25ib2FyZGluZ1N0YXR1cyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNDb21wbGV0ZWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRpb25QZXJjZW50YWdlKS50b0JlKDEwMCk7XG4gICAgICBleHBlY3QocmVzdWx0Lm5leHRTdGVwcykudG9IYXZlTGVuZ3RoKDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGV0ZWRBdCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvb25ib2FyZGluZy9zdGF0dXMvOnVzZXJJZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCB1c2VyIG9uYm9hcmRpbmcgc3RhdHVzIHN1Y2Nlc3NmdWxseSBhcyBhZG1pbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nU3RhdHVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tPbmJvYXJkaW5nU3RhdHVzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRVc2VyT25ib2FyZGluZ1N0YXR1cyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja09uYm9hcmRpbmdTdGF0dXMpO1xuICAgICAgZXhwZWN0KG9uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzIGZvciBhZG1pbiByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2VFcnJvciA9IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nU3RhdHVzLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRVc2VyT25ib2FyZGluZ1N0YXR1cyhURVNUX1VTRVJfSURTLkNMSUVOVClcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEh0dHBFeGNlcHRpb24pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwYXNzIHRocm91Z2ggSFRUUCBleGNlcHRpb25zIGZyb20gc2VydmljZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGh0dHBFcnJvciA9IG5ldyBIdHRwRXhjZXB0aW9uKCdVc2VyIG5vdCBmb3VuZCcsIEh0dHBTdGF0dXMuTk9UX0ZPVU5EKTtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nU3RhdHVzLm1vY2tSZWplY3RlZFZhbHVlKGh0dHBFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRVc2VyT25ib2FyZGluZ1N0YXR1cygnbm9uZXhpc3RlbnRfdXNlcicpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhodHRwRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGlmZmVyZW50IHVzZXIgSURzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcklkcyA9IFtURVNUX1VTRVJfSURTLkNMSUVOVCwgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsICdjdXN0b21fdXNlcl8xMjMnXTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCB1c2VySWQgb2YgdXNlcklkcykge1xuICAgICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ1N0YXR1cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgLi4ubW9ja09uYm9hcmRpbmdTdGF0dXMsXG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFVzZXJPbmJvYXJkaW5nU3RhdHVzKHVzZXJJZCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQudXNlcklkKS50b0JlKHVzZXJJZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQT1NUIC9vbmJvYXJkaW5nL2NvbXBsZXRlLXN0ZXAvOnN0ZXBOYW1lJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29tcGxldGUgc3RlcCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVkU3RhdHVzID0ge1xuICAgICAgICAuLi5tb2NrT25ib2FyZGluZ1N0YXR1cyxcbiAgICAgICAgc3RlcHM6IHtcbiAgICAgICAgICAuLi5tb2NrT25ib2FyZGluZ1N0YXR1cy5zdGVwcyxcbiAgICAgICAgICB0aGVyYXBpc3RTZWxlY3Rpb246IHtcbiAgICAgICAgICAgIGNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGNvbXBsZXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMi0xMlQxNjowMDowMFonKSxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBsZXRpb25QZXJjZW50YWdlOiA4MCxcbiAgICAgIH07XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UubWFya1N0ZXBDb21wbGV0ZWQubW9ja1Jlc29sdmVkVmFsdWUodXBkYXRlZFN0YXR1cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuY29tcGxldGVTdGVwKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCAndGhlcmFwaXN0U2VsZWN0aW9uJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwodXBkYXRlZFN0YXR1cyk7XG4gICAgICBleHBlY3Qob25ib2FyZGluZ1NlcnZpY2UubWFya1N0ZXBDb21wbGV0ZWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAgJ3RoZXJhcGlzdFNlbGVjdGlvbidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkaWZmZXJlbnQgc3RlcCBuYW1lcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0ZXBOYW1lcyA9IFtcbiAgICAgICAgJ3Byb2ZpbGVTZXR1cCcsXG4gICAgICAgICdwcmVBc3Nlc3NtZW50JyxcbiAgICAgICAgJ3RoZXJhcGlzdFNlbGVjdGlvbicsXG4gICAgICAgICdmaXJzdFNlc3Npb24nLFxuICAgICAgICAnY29tbXVuaXR5Sm9pbicsXG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IHN0ZXBOYW1lIG9mIHN0ZXBOYW1lcykge1xuICAgICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UubWFya1N0ZXBDb21wbGV0ZWQubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIC4uLm1vY2tPbmJvYXJkaW5nU3RhdHVzLFxuICAgICAgICAgIHN0ZXBzOiB7XG4gICAgICAgICAgICAuLi5tb2NrT25ib2FyZGluZ1N0YXR1cy5zdGVwcyxcbiAgICAgICAgICAgIFtzdGVwTmFtZV06IHtcbiAgICAgICAgICAgICAgY29tcGxldGVkOiB0cnVlLFxuICAgICAgICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuY29tcGxldGVTdGVwKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCBzdGVwTmFtZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3RlcHNbc3RlcE5hbWVdLmNvbXBsZXRlZCkudG9CZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzIGR1cmluZyBzdGVwIGNvbXBsZXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ0ludmFsaWQgc3RlcCBuYW1lJyk7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UubWFya1N0ZXBDb21wbGV0ZWQubW9ja1JlamVjdGVkVmFsdWUoc2VydmljZUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmNvbXBsZXRlU3RlcChURVNUX1VTRVJfSURTLkNMSUVOVCwgJ2ludmFsaWRTdGVwJylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEh0dHBFeGNlcHRpb24pO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBjb250cm9sbGVyLmNvbXBsZXRlU3RlcChURVNUX1VTRVJfSURTLkNMSUVOVCwgJ2ludmFsaWRTdGVwJyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKEh0dHBFeGNlcHRpb24pO1xuICAgICAgICBleHBlY3QoZXJyb3IuZ2V0U3RhdHVzKCkpLnRvQmUoSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IpO1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdGYWlsZWQgdG8gY29tcGxldGUgb25ib2FyZGluZyBzdGVwJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNvbXBsZXRpb24gcHJvZ3Jlc3MgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxQZXJjZW50YWdlID0gbW9ja09uYm9hcmRpbmdTdGF0dXMuY29tcGxldGlvblBlcmNlbnRhZ2U7XG4gICAgICBjb25zdCB1cGRhdGVkU3RhdHVzID0ge1xuICAgICAgICAuLi5tb2NrT25ib2FyZGluZ1N0YXR1cyxcbiAgICAgICAgY29tcGxldGlvblBlcmNlbnRhZ2U6IGluaXRpYWxQZXJjZW50YWdlICsgMjAsXG4gICAgICB9O1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLm1hcmtTdGVwQ29tcGxldGVkLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRTdGF0dXMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNvbXBsZXRlU3RlcChURVNUX1VTRVJfSURTLkNMSUVOVCwgJ3RoZXJhcGlzdFNlbGVjdGlvbicpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsZXRpb25QZXJjZW50YWdlKS50b0JlR3JlYXRlclRoYW4oaW5pdGlhbFBlcmNlbnRhZ2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGV0aW9uUGVyY2VudGFnZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9vbmJvYXJkaW5nL3ZhbGlkYXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgb25ib2FyZGluZyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UudmFsaWRhdGVPbmJvYXJkaW5nQ29tcGxldGVuZXNzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tWYWxpZGF0aW9uUmVzdWx0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci52YWxpZGF0ZU9uYm9hcmRpbmcoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tWYWxpZGF0aW9uUmVzdWx0KTtcbiAgICAgIGV4cGVjdChvbmJvYXJkaW5nU2VydmljZS52YWxpZGF0ZU9uYm9hcmRpbmdDb21wbGV0ZW5lc3MpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHZhbGlkYXRpb24gd2l0aCBtaXNzaW5nIHN0ZXBzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbldpdGhNaXNzaW5nU3RlcHMgPSB7XG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICBtaXNzaW5nU3RlcHM6IFsndGhlcmFwaXN0U2VsZWN0aW9uJywgJ2ZpcnN0U2Vzc2lvbiddLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdGVwTmFtZTogJ3RoZXJhcGlzdFNlbGVjdGlvbicsXG4gICAgICAgICAgICBwcmlvcml0eTogJ2hpZ2gnLFxuICAgICAgICAgICAgcmVhc29uOiAnUmVxdWlyZWQgc3RlcCBmb3IgYWNjZXNzaW5nIHRoZXJhcHkgc2VydmljZXMnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLnZhbGlkYXRlT25ib2FyZGluZ0NvbXBsZXRlbmVzcy5tb2NrUmVzb2x2ZWRWYWx1ZSh2YWxpZGF0aW9uV2l0aE1pc3NpbmdTdGVwcyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudmFsaWRhdGVPbmJvYXJkaW5nKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWlzc2luZ1N0ZXBzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0LnJlY29tbWVuZGF0aW9ucykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMgZHVyaW5nIHZhbGlkYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ1ZhbGlkYXRpb24gc2VydmljZSB1bmF2YWlsYWJsZScpO1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLnZhbGlkYXRlT25ib2FyZGluZ0NvbXBsZXRlbmVzcy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIudmFsaWRhdGVPbmJvYXJkaW5nKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coSHR0cEV4Y2VwdGlvbik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNvbnRyb2xsZXIudmFsaWRhdGVPbmJvYXJkaW5nKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGV4cGVjdChlcnJvcikudG9CZUluc3RhbmNlT2YoSHR0cEV4Y2VwdGlvbik7XG4gICAgICAgIGV4cGVjdChlcnJvci5nZXRTdGF0dXMoKSkudG9CZShIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUik7XG4gICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0ZhaWxlZCB0byB2YWxpZGF0ZSBvbmJvYXJkaW5nIGNvbXBsZXRlbmVzcycpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSByZXNwb25zZSBzdHJ1Y3R1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UudmFsaWRhdGVPbmJvYXJkaW5nQ29tcGxldGVuZXNzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tWYWxpZGF0aW9uUmVzdWx0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci52YWxpZGF0ZU9uYm9hcmRpbmcoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnaXNWYWxpZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ21pc3NpbmdTdGVwcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3JlY29tbWVuZGF0aW9ucycpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuaXNWYWxpZCkudG9CZSgnYm9vbGVhbicpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0Lm1pc3NpbmdTdGVwcykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvb25ib2FyZGluZy9pbnNpZ2h0cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCBvbmJvYXJkaW5nIGluc2lnaHRzIHN1Y2Nlc3NmdWxseSBhcyBhZG1pbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nSW5zaWdodHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja09uYm9hcmRpbmdJbnNpZ2h0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0T25ib2FyZGluZ0luc2lnaHRzKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja09uYm9hcmRpbmdJbnNpZ2h0cyk7XG4gICAgICBleHBlY3Qob25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ0luc2lnaHRzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycyBmb3IgaW5zaWdodHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ0FuYWx5dGljcyBzZXJ2aWNlIHVuYXZhaWxhYmxlJyk7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ0luc2lnaHRzLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRPbmJvYXJkaW5nSW5zaWdodHMoKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coSHR0cEV4Y2VwdGlvbik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNvbnRyb2xsZXIuZ2V0T25ib2FyZGluZ0luc2lnaHRzKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKEh0dHBFeGNlcHRpb24pO1xuICAgICAgICBleHBlY3QoZXJyb3IuZ2V0U3RhdHVzKCkpLnRvQmUoSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IpO1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdGYWlsZWQgdG8gcmV0cmlldmUgb25ib2FyZGluZyBpbnNpZ2h0cycpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBpbnNpZ2h0cyBzdHJ1Y3R1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ0luc2lnaHRzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tPbmJvYXJkaW5nSW5zaWdodHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldE9uYm9hcmRpbmdJbnNpZ2h0cygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgndG90YWxVc2VycycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2NvbXBsZXRlZE9uYm9hcmRpbmcnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb21wbGV0aW9uUmF0ZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2F2ZXJhZ2VDb21wbGV0aW9uVGltZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0ZXBDb21wbGV0aW9uUmF0ZXMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb21tb25Ecm9wT2ZmUG9pbnRzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgncmVjZW50VHJlbmRzJyk7XG5cbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnRvdGFsVXNlcnMpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY29tcGxldGlvblJhdGUpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuYXZlcmFnZUNvbXBsZXRpb25UaW1lKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnN0ZXBDb21wbGV0aW9uUmF0ZXMpLnRvQmUoJ29iamVjdCcpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LmNvbW1vbkRyb3BPZmZQb2ludHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnJlY2VudFRyZW5kcy53ZWVrbHlDb21wbGV0aW9ucykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIGNvbXBsZXRpb24gcmF0ZSByYW5nZVxuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGV0aW9uUmF0ZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29tcGxldGlvblJhdGUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgc3RlcCBjb21wbGV0aW9uIHJhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdJbnNpZ2h0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ0luc2lnaHRzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRPbmJvYXJkaW5nSW5zaWdodHMoKTtcblxuICAgICAgY29uc3Qgc3RlcFJhdGVzID0gcmVzdWx0LnN0ZXBDb21wbGV0aW9uUmF0ZXM7XG4gICAgICBPYmplY3QudmFsdWVzKHN0ZXBSYXRlcykuZm9yRWFjaChyYXRlID0+IHtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiByYXRlKS50b0JlKCdudW1iZXInKTtcbiAgICAgICAgZXhwZWN0KHJhdGUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICAgIGV4cGVjdChyYXRlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Jlc3BvbnNlIEZvcm1hdCBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHByb3Blcmx5IGZvcm1hdHRlZCBvbmJvYXJkaW5nIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5nZXRPbmJvYXJkaW5nU3RhdHVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tPbmJvYXJkaW5nU3RhdHVzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRNeU9uYm9hcmRpbmdTdGF0dXMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgndXNlcklkJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnaXNDb21wbGV0ZWQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb21wbGV0aW9uUGVyY2VudGFnZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0ZXBzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnbmV4dFN0ZXBzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnc3RhcnRlZEF0Jyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnbGFzdFVwZGF0ZWRBdCcpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXJ0ZWRBdCkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XG4gICAgICBleHBlY3QocmVzdWx0Lmxhc3RVcGRhdGVkQXQpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY29tcGxldGlvblBlcmNlbnRhZ2UpLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvcGVybHkgZm9ybWF0dGVkIHZhbGlkYXRpb24gcmVzdWx0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLnZhbGlkYXRlT25ib2FyZGluZ0NvbXBsZXRlbmVzcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVmFsaWRhdGlvblJlc3VsdCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudmFsaWRhdGVPbmJvYXJkaW5nKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2lzVmFsaWQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdtaXNzaW5nU3RlcHMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdyZWNvbW1lbmRhdGlvbnMnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmlzVmFsaWQpLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5taXNzaW5nU3RlcHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnJlY29tbWVuZGF0aW9ucykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBwcm9wZXJseSBmb3JtYXR0ZWQgaW5zaWdodHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ0luc2lnaHRzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tPbmJvYXJkaW5nSW5zaWdodHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldE9uYm9hcmRpbmdJbnNpZ2h0cygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgndG90YWxVc2VycycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2NvbXBsZXRlZE9uYm9hcmRpbmcnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb21wbGV0aW9uUmF0ZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0ZXBDb21wbGV0aW9uUmF0ZXMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb21tb25Ecm9wT2ZmUG9pbnRzJyk7XG5cbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnRvdGFsVXNlcnMpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY29tcGxldGlvblJhdGUpLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgY29ubmVjdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkYkVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdTdGF0dXMubW9ja1JlamVjdGVkVmFsdWUoZGJFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRNeU9uYm9hcmRpbmdTdGF0dXMoVEVTVF9VU0VSX0lEUy5DTElFTlQpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgdXNlciBJRHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkVXNlckVycm9yID0gbmV3IEVycm9yKCdJbnZhbGlkIHVzZXIgSUQgZm9ybWF0Jyk7XG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ1N0YXR1cy5tb2NrUmVqZWN0ZWRWYWx1ZShpbnZhbGlkVXNlckVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmdldE15T25ib2FyZGluZ1N0YXR1cygnaW52YWxpZC11c2VyLWlkJylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEh0dHBFeGNlcHRpb24pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgb25ib2FyZGluZyBzZXJ2aWNlIHVuYXZhaWxhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdPbmJvYXJkaW5nIHNlcnZpY2UgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUnKTtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5tYXJrU3RlcENvbXBsZXRlZC5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuY29tcGxldGVTdGVwKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCAncHJvZmlsZVNldHVwJylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEh0dHBFeGNlcHRpb24pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcGxldGUgb25ib2FyZGluZyB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEdldCBpbml0aWFsIHN0YXR1c1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdTdGF0dXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja09uYm9hcmRpbmdTdGF0dXMpO1xuICAgICAgY29uc3QgaW5pdGlhbFN0YXR1cyA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0TXlPbmJvYXJkaW5nU3RhdHVzKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICAgIGV4cGVjdChpbml0aWFsU3RhdHVzLmlzQ29tcGxldGVkKS50b0JlKGZhbHNlKTtcblxuICAgICAgLy8gQ29tcGxldGUgYSBzdGVwXG4gICAgICBjb25zdCB1cGRhdGVkU3RhdHVzID0ge1xuICAgICAgICAuLi5tb2NrT25ib2FyZGluZ1N0YXR1cyxcbiAgICAgICAgY29tcGxldGlvblBlcmNlbnRhZ2U6IDgwLFxuICAgICAgfTtcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5tYXJrU3RlcENvbXBsZXRlZC5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkU3RhdHVzKTtcbiAgICAgIGNvbnN0IHN0ZXBSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNvbXBsZXRlU3RlcChURVNUX1VTRVJfSURTLkNMSUVOVCwgJ3RoZXJhcGlzdFNlbGVjdGlvbicpO1xuICAgICAgZXhwZWN0KHN0ZXBSZXN1bHQuY29tcGxldGlvblBlcmNlbnRhZ2UpLnRvQmVHcmVhdGVyVGhhbihpbml0aWFsU3RhdHVzLmNvbXBsZXRpb25QZXJjZW50YWdlKTtcblxuICAgICAgLy8gVmFsaWRhdGUgb25ib2FyZGluZ1xuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLnZhbGlkYXRlT25ib2FyZGluZ0NvbXBsZXRlbmVzcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVmFsaWRhdGlvblJlc3VsdCk7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci52YWxpZGF0ZU9uYm9hcmRpbmcoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb25SZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdpc1ZhbGlkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhZG1pbiBpbnNpZ2h0cyB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEdldCBpbnNpZ2h0cyBhcyBhZG1pblxuICAgICAgbW9ja09uYm9hcmRpbmdTZXJ2aWNlLmdldE9uYm9hcmRpbmdJbnNpZ2h0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ0luc2lnaHRzKTtcbiAgICAgIGNvbnN0IGluc2lnaHRzID0gYXdhaXQgY29udHJvbGxlci5nZXRPbmJvYXJkaW5nSW5zaWdodHMoKTtcbiAgICAgIGV4cGVjdChpbnNpZ2h0cy50b3RhbFVzZXJzKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoaW5zaWdodHMuY29tcGxldGlvblJhdGUpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgICAgLy8gR2V0IHNwZWNpZmljIHVzZXIgc3RhdHVzIGFzIGFkbWluXG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UuZ2V0T25ib2FyZGluZ1N0YXR1cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ1N0YXR1cyk7XG4gICAgICBjb25zdCB1c2VyU3RhdHVzID0gYXdhaXQgY29udHJvbGxlci5nZXRVc2VyT25ib2FyZGluZ1N0YXR1cyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICBleHBlY3QodXNlclN0YXR1cy51c2VySWQpLnRvQmUoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBvbmJvYXJkaW5nIHByb2dyZXNzaW9uIGxvZ2ljJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCBwcm9ncmVzc2lvbiB0aHJvdWdoIG11bHRpcGxlIHN0ZXBzXG4gICAgICBjb25zdCBzdGVwcyA9IFsncHJvZmlsZVNldHVwJywgJ3ByZUFzc2Vzc21lbnQnLCAndGhlcmFwaXN0U2VsZWN0aW9uJ107XG4gICAgICBsZXQgY3VycmVudFBlcmNlbnRhZ2UgPSAwO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ZXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5ld1BlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKCgoaSArIDEpIC8gc3RlcHMubGVuZ3RoKSAqIDEwMCk7XG4gICAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5tYXJrU3RlcENvbXBsZXRlZC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgLi4ubW9ja09uYm9hcmRpbmdTdGF0dXMsXG4gICAgICAgICAgY29tcGxldGlvblBlcmNlbnRhZ2U6IG5ld1BlcmNlbnRhZ2UsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuY29tcGxldGVTdGVwKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCBzdGVwc1tpXSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY29tcGxldGlvblBlcmNlbnRhZ2UpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoY3VycmVudFBlcmNlbnRhZ2UpO1xuICAgICAgICBjdXJyZW50UGVyY2VudGFnZSA9IHJlc3VsdC5jb21wbGV0aW9uUGVyY2VudGFnZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVkZ2UgY2FzZXMgaW4gb25ib2FyZGluZyBmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCBjb21wbGV0aW5nIGFscmVhZHkgY29tcGxldGVkIHN0ZXBcbiAgICAgIG1vY2tPbmJvYXJkaW5nU2VydmljZS5tYXJrU3RlcENvbXBsZXRlZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT25ib2FyZGluZ1N0YXR1cyk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNvbXBsZXRlU3RlcChURVNUX1VTRVJfSURTLkNMSUVOVCwgJ3Byb2ZpbGVTZXR1cCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdGVwcy5wcm9maWxlU2V0dXAuY29tcGxldGVkKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBUZXN0IHZhbGlkYXRpb24gZm9yIGNvbXBsZXRlZCBvbmJvYXJkaW5nXG4gICAgICBtb2NrT25ib2FyZGluZ1NlcnZpY2UudmFsaWRhdGVPbmJvYXJkaW5nQ29tcGxldGVuZXNzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgICAgbWlzc2luZ1N0ZXBzOiBbXSxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IGNvbnRyb2xsZXIudmFsaWRhdGVPbmJvYXJkaW5nKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5taXNzaW5nU3RlcHMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=