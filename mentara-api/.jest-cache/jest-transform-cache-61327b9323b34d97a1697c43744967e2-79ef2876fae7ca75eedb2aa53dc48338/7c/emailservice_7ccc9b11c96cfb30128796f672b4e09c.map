{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/email/email.service.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/email/email.service.ts"],"sourcesContent":["import { Injectable, Logger } from '@nestjs/common';\nimport emailjs from '@emailjs/nodejs';\nimport type { EmailResponse } from '../auth/types';\n\n@Injectable()\nexport class EmailService {\n  private readonly logger = new Logger(EmailService.name);\n  private isInitialized = false;\n\n  // EmailJS configuration\n  private readonly config = {\n    serviceId: process.env.EMAILJS_SERVICE_ID ?? '',\n    templateId: process.env.EMAILJS_TEMPLATE_ID ?? '',\n    publicKey: process.env.EMAILJS_PUBLIC_KEY ?? '',\n    privateKey: process.env.EMAILJS_PRIVATE_KEY ?? '',\n  };\n\n  constructor() {\n    this.initializeEmailJS();\n  }\n\n  private initializeEmailJS() {\n    try {\n      if (this.config.publicKey) {\n        const initConfig: any = {\n          publicKey: this.config.publicKey,\n        };\n\n        // Add private key if available for enhanced security\n        if (this.config.privateKey) {\n          initConfig.privateKey = this.config.privateKey;\n          this.logger.log(\n            'EmailJS initializing with private key for enhanced security',\n          );\n        }\n\n        emailjs.init(initConfig);\n        this.isInitialized = true;\n        this.logger.log('EmailJS initialized successfully');\n      } else {\n        this.logger.warn(\n          'EmailJS public key not found in environment variables',\n        );\n      }\n    } catch (error) {\n      this.logger.error('Failed to initialize EmailJS:', error);\n    }\n  }\n\n  /**\n   * Send OTP email for registration or verification\n   * @param email - Recipient email address\n   * @param name - Recipient name\n   * @param subject - Email subject line\n   * @param otpCode - OTP code (optional, will generate if not provided)\n   * @param expiresIn - Expiry time (optional, defaults to \"10 minutes\")\n   * @returns Promise with operation result\n   */\n  async sendOTP(\n    email: string,\n    name: string,\n    subject: string,\n    otpCode?: string,\n    expiresIn: string = '10 minutes',\n  ): Promise<EmailResponse> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        status: 'error',\n        message:\n          'EmailJS not properly initialized. Check environment variables.',\n      };\n    }\n\n    try {\n      const otp = otpCode ?? this.generateOtp(6);\n      const html = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;\">\n      <div style=\"background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n        <h1 style=\"color: #436B00; text-align: center; margin-bottom: 30px;\">Mentara - Email Verification</h1>\n        <h2 style=\"color: #1F2937; text-align: center;\">Your verification code is:</h2>\n        <div style=\"background-color: #436B00; color: white; font-size: 32px; font-weight: bold; text-align: center; padding: 20px; margin: 20px 0; border-radius: 8px; letter-spacing: 4px;\">${otp}</div>\n        <p style=\"color: #4B5563; text-align: center; margin: 20px 0;\">This code will expire in ${expiresIn}.</p>\n        <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">If you didn't request this verification, please ignore this email.</p>\n      </div>\n    </div>`;\n\n      const templateParams = {\n        email,\n        name,\n        subject,\n        html,\n        otp,\n        expiresIn,\n        appUrl: process.env.APP_URL ?? 'https://mentara.com',\n      };\n\n      await emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams,\n      );\n\n      this.logger.log('‚úÖ OTP email sent successfully:', { email, subject });\n\n      return {\n        success: true,\n        status: 'success',\n        message: 'OTP email sent successfully',\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error('‚ùå Failed to send OTP email:', errorMessage);\n\n      return {\n        success: false,\n        status: 'error',\n        message: `Failed to send OTP email: ${errorMessage}`,\n      };\n    }\n  }\n\n  /**\n   * Send therapist registration success email\n   * @param email - Recipient email address\n   * @param name - Recipient name\n   * @param subject - Email subject line\n   * @returns Promise with operation result\n   */\n  async sendTherapistRegistrationSuccess(\n    email: string,\n    name: string,\n    subject: string,\n  ): Promise<EmailResponse> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        status: 'error',\n        message:\n          'EmailJS not properly initialized. Check environment variables.',\n      };\n    }\n\n    try {\n      const html = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;\">\n      <div style=\"background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n        <h1 style=\"color: #10B981; text-align: center; margin-bottom: 30px;\">Welcome to Mentara!</h1>\n        <p style=\"color: #1F2937; font-size: 16px;\">Thank you, ${name}, for registering as a therapist with Mentara.</p>\n        <p style=\"color: #4B5563;\">Your application has been received and is currently under review. We will notify you once the review process is complete.</p>\n        <div style=\"background-color: #F0FDF4; border-left: 4px solid #10B981; padding: 16px; margin: 20px 0;\">\n          <p style=\"color: #065F46; margin: 0; font-weight: 500;\">Next Steps:</p>\n          <ul style=\"color: #065F46; margin: 10px 0;\">\n            <li>Complete your profile if you haven't already</li>\n            <li>Upload required documents</li>\n            <li>Wait for admin approval</li>\n          </ul>\n        </div>\n        <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">Thank you for joining our mental health community.</p>\n      </div>\n    </div>`;\n\n      const templateParams = {\n        email,\n        name,\n        subject,\n        html,\n      };\n\n      await emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams,\n      );\n\n      this.logger.log('‚úÖ Therapist registration success email sent:', {\n        email,\n        subject,\n      });\n\n      return {\n        success: true,\n        status: 'success',\n        message: 'Therapist registration success email sent successfully',\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error(\n        '‚ùå Failed to send therapist registration success email:',\n        errorMessage,\n      );\n\n      return {\n        success: false,\n        status: 'error',\n        message: `Failed to send therapist registration success email: ${errorMessage}`,\n      };\n    }\n  }\n\n  /**\n   * Send therapist approved email\n   * @param email - Recipient email address\n   * @param name - Recipient name\n   * @param subject - Email subject line\n   * @returns Promise with operation result\n   */\n  async sendTherapistApproved(\n    email: string,\n    name: string,\n    subject: string,\n    password: string = '',\n  ): Promise<EmailResponse> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        status: 'error',\n        message:\n          'EmailJS not properly initialized. Check environment variables.',\n      };\n    }\n\n    try {\n      const appUrl = process.env.APP_URL ?? 'https://mentara.com';\n      const html = `\n<div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;\">\n  <div style=\"background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n    <h1 style=\"color: #10B981; text-align: center; margin-bottom: 30px;\">üéâ Congratulations! You're Approved!</h1>\n    <p style=\"color: #1F2937; font-size: 16px;\">Great news, ${name}! Your therapist application has been approved.</p>\n    <p style=\"color: #4B5563;\">You can now start accepting clients and providing mental health services through the Mentara platform.</p>\n    \n    ${\n      password\n        ? `\n    <div style=\"background-color: #FEF3C7; border-left: 4px solid #F59E0B; padding: 16px; margin: 20px 0; border-radius: 6px;\">\n      <p style=\"color: #92400E; margin: 0; font-weight: 500;\">üîê Your Login Credentials:</p>\n      <p style=\"color: #92400E; margin: 10px 0 5px 0;\"><strong>Email:</strong> ${email}</p>\n      <p style=\"color: #92400E; margin: 5px 0;\"><strong>Password:</strong> <code style=\"background-color: #FEF3C7; padding: 2px 6px; border-radius: 4px; font-family: monospace;\">${password}</code></p>\n      <p style=\"color: #92400E; margin: 10px 0 0 0; font-size: 14px;\">‚ö†Ô∏è Please change your password after your first login for security.</p>\n    </div>\n    `\n        : ''\n    }\n    \n    <div style=\"background-color: #F0FDF4; border-left: 4px solid #10B981; padding: 16px; margin: 20px 0;\">\n      <p style=\"color: #065F46; margin: 0; font-weight: 500;\">You can now:</p>\n      <ul style=\"color: #065F46; margin: 10px 0;\">\n        <li>Complete your therapist profile</li>\n        <li>Set your availability</li>\n        <li>Start accepting client bookings</li>\n        <li>Access the therapist dashboard</li>\n      </ul>\n    </div>\n    <div style=\"text-align: center; margin: 30px 0;\">\n      <a href=\"${appUrl}/auth/sign-in\" style=\"background-color: #436B00; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 500; margin-right: 10px;\">Login Now</a>\n      <a href=\"${appUrl}/therapist/dashboard\" style=\"background-color: #10B981; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 500;\">Go to Dashboard</a>\n    </div>\n    <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">Welcome to the Mentara therapist community!</p>\n  </div>\n</div>`;\n\n      const templateParams = {\n        email,\n        name,\n        subject,\n        html,\n      };\n\n      await emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams,\n      );\n\n      this.logger.log('‚úÖ Therapist approved email sent:', { email, subject });\n\n      return {\n        success: true,\n        status: 'success',\n        message: 'Therapist approved email sent successfully',\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error(\n        '‚ùå Failed to send therapist approved email:',\n        errorMessage,\n      );\n\n      return {\n        success: false,\n        status: 'error',\n        message: `Failed to send therapist approved email: ${errorMessage}`,\n      };\n    }\n  }\n\n  /**\n   * Send therapist denied email\n   * @param email - Recipient email address\n   * @param name - Recipient name\n   * @param subject - Email subject line\n   * @returns Promise with operation result\n   */\n  async sendTherapistDenied(\n    email: string,\n    name: string,\n    subject: string,\n  ): Promise<EmailResponse> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        status: 'error',\n        message:\n          'EmailJS not properly initialized. Check environment variables.',\n      };\n    }\n\n    try {\n      const html = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;\">\n      <div style=\"background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n        <h1 style=\"color: #EF4444; text-align: center; margin-bottom: 30px;\">Application Update</h1>\n        <p style=\"color: #1F2937; font-size: 16px;\">Dear ${name}, thank you for your interest in becoming a therapist with Mentara.</p>\n        <p style=\"color: #4B5563;\">After careful review, we regret to inform you that your application has not been approved at this time.</p>\n        <div style=\"background-color: #FEF2F2; border-left: 4px solid #EF4444; padding: 16px; margin: 20px 0;\">\n          <p style=\"color: #991B1B; margin: 0; font-weight: 500;\">Common reasons for denial:</p>\n          <ul style=\"color: #991B1B; margin: 10px 0;\">\n            <li>Incomplete documentation</li>\n            <li>Licensing requirements not met</li>\n            <li>Application did not meet our current criteria</li>\n          </ul>\n        </div>\n        <p style=\"color: #4B5563;\">You're welcome to reapply in the future once any issues have been addressed.</p>\n        <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">Thank you for your understanding.</p>\n      </div>\n    </div>`;\n\n      const templateParams = {\n        email,\n        name,\n        subject,\n        html,\n      };\n\n      await emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams,\n      );\n\n      this.logger.log('‚úÖ Therapist denied email sent:', { email, subject });\n\n      return {\n        success: true,\n        status: 'success',\n        message: 'Therapist denied email sent successfully',\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error(\n        '‚ùå Failed to send therapist denied email:',\n        errorMessage,\n      );\n\n      return {\n        success: false,\n        status: 'error',\n        message: `Failed to send therapist denied email: ${errorMessage}`,\n      };\n    }\n  }\n\n  /**\n   * Send password reset email\n   * @param email - Recipient email address\n   * @param name - Recipient name\n   * @param subject - Email subject line\n   * @param resetLink - Password reset link\n   * @returns Promise with operation result\n   */\n  async sendPasswordReset(\n    email: string,\n    name: string,\n    subject: string,\n    resetLink: string,\n  ): Promise<EmailResponse> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        status: 'error',\n        message:\n          'EmailJS not properly initialized. Check environment variables.',\n      };\n    }\n\n    try {\n      const html = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;\">\n      <div style=\"background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n        <h1 style=\"color: #436B00; text-align: center; margin-bottom: 30px;\">Reset Your Password</h1>\n        <p style=\"color: #1F2937; font-size: 16px;\">Hello ${name}, we received a request to reset your password for your Mentara account.</p>\n        <p style=\"color: #4B5563;\">Click the button below to reset your password:</p>\n        <div style=\"text-align: center; margin: 30px 0;\">\n          <a href=\"${resetLink}\" style=\"background-color: #436B00; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 500; display: inline-block;\">Reset Password</a>\n        </div>\n        <p style=\"color: #6B7280; font-size: 14px;\">If you didn't request this password reset, please ignore this email. Your password will remain unchanged.</p>\n        <p style=\"color: #6B7280; font-size: 14px;\">For security reasons, this link will expire in 1 hour.</p>\n      </div>\n    </div>`;\n\n      const templateParams = {\n        email,\n        name,\n        subject,\n        html,\n      };\n\n      await emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams,\n      );\n\n      this.logger.log('‚úÖ Password reset email sent:', { email, subject });\n\n      return {\n        success: true,\n        status: 'success',\n        message: 'Password reset email sent successfully',\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error(\n        '‚ùå Failed to send password reset email:',\n        errorMessage,\n      );\n\n      return {\n        success: false,\n        status: 'error',\n        message: `Failed to send password reset email: ${errorMessage}`,\n      };\n    }\n  }\n\n  /**\n   * Send password reset success confirmation email\n   * @param email - Recipient email address\n   * @param name - Recipient name\n   * @param subject - Email subject line\n   * @returns Promise with operation result\n   */\n  async sendPasswordResetSuccess(\n    email: string,\n    name: string,\n    subject: string,\n  ): Promise<EmailResponse> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        status: 'error',\n        message:\n          'EmailJS not properly initialized. Check environment variables.',\n      };\n    }\n\n    try {\n      const appUrl = process.env.APP_URL || 'https://mentara.com';\n      const html = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;\">\n      <div style=\"background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n        <h1 style=\"color: #10B981; text-align: center; margin-bottom: 30px;\">‚úÖ Password Reset Successful</h1>\n        <p style=\"color: #1F2937; font-size: 16px;\">Hello ${name}, your password has been successfully reset.</p>\n        <p style=\"color: #4B5563;\">You can now log in to your Mentara account using your new password.</p>\n        <div style=\"background-color: #F0FDF4; border-left: 4px solid #10B981; padding: 16px; margin: 20px 0;\">\n          <p style=\"color: #065F46; margin: 0; font-weight: 500;\">Security Tip:</p>\n          <p style=\"color: #065F46; margin: 10px 0 0 0;\">Make sure to use a strong, unique password and keep it secure.</p>\n        </div>\n        <div style=\"text-align: center; margin: 30px 0;\">\n          <a href=\"${appUrl}/auth/login\" style=\"background-color: #436B00; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 500;\">Login to Your Account</a>\n        </div>\n        <p style=\"color: #6B7280; font-size: 14px; text-align: center;\">If you didn't make this change, please contact our support team immediately.</p>\n      </div>\n    </div>`;\n\n      const templateParams = {\n        email,\n        name,\n        subject,\n        html,\n      };\n\n      await emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams,\n      );\n\n      this.logger.log('‚úÖ Password reset success email sent:', {\n        email,\n        subject,\n      });\n\n      return {\n        success: true,\n        status: 'success',\n        message: 'Password reset success email sent successfully',\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error(\n        '‚ùå Failed to send password reset success email:',\n        errorMessage,\n      );\n\n      return {\n        success: false,\n        status: 'error',\n        message: `Failed to send password reset success email: ${errorMessage}`,\n      };\n    }\n  }\n\n  /**\n   * Send meeting booking confirmation email\n   * @param email - Recipient email address\n   * @param name - Recipient name\n   * @param meetingDetails - Meeting information\n   * @returns Promise with operation result\n   */\n  async sendMeetingBookingConfirmation(\n    email: string,\n    name: string,\n    meetingDetails: {\n      meetingId: string;\n      title: string;\n      startTime: Date;\n      duration: number;\n      therapistName: string;\n      clientName: string;\n      meetingUrl?: string;\n      amount?: number;\n      currency?: string;\n    },\n  ): Promise<EmailResponse> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        status: 'error',\n        message:\n          'EmailJS not properly initialized. Check environment variables.',\n      };\n    }\n\n    try {\n      const startTimeFormatted = meetingDetails.startTime.toLocaleString(\n        'en-US',\n        {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric',\n          hour: 'numeric',\n          minute: '2-digit',\n          timeZoneName: 'short',\n        },\n      );\n\n      const appUrl = process.env.APP_URL || 'https://mentara.com';\n      const meetingUrl =\n        meetingDetails.meetingUrl ||\n        `${appUrl}/meeting/${meetingDetails.meetingId}`;\n\n      const html = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;\">\n      <div style=\"background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n        <h1 style=\"color: #436B00; text-align: center; margin-bottom: 30px;\">üéâ Meeting Confirmed!</h1>\n        <p style=\"color: #1F2937; font-size: 16px;\">Hello ${name}, your therapy session has been successfully booked.</p>\n        \n        <div style=\"background-color: #F0FDF4; border-left: 4px solid #10B981; padding: 20px; margin: 20px 0; border-radius: 6px;\">\n          <h3 style=\"color: #065F46; margin: 0 0 15px 0;\">Meeting Details:</h3>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Session:</strong> ${meetingDetails.title}</p>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Date & Time:</strong> ${startTimeFormatted}</p>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Duration:</strong> ${meetingDetails.duration} minutes</p>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Therapist:</strong> ${meetingDetails.therapistName}</p>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Client:</strong> ${meetingDetails.clientName}</p>\n          ${meetingDetails.amount ? `<p style=\"color: #065F46; margin: 5px 0;\"><strong>Payment:</strong> ${meetingDetails.currency || 'USD'} $${meetingDetails.amount}</p>` : ''}\n        </div>\n\n        <div style=\"text-align: center; margin: 30px 0;\">\n          <a href=\"${meetingUrl}\" style=\"background-color: #436B00; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 500; display: inline-block;\">Join Meeting</a>\n        </div>\n\n        <div style=\"background-color: #FEF3C7; border-left: 4px solid #F59E0B; padding: 16px; margin: 20px 0;\">\n          <p style=\"color: #92400E; margin: 0; font-weight: 500;\">üìÖ Add to Calendar:</p>\n          <p style=\"color: #92400E; margin: 10px 0 0 0;\">Save this meeting to your calendar so you don't miss it!</p>\n        </div>\n\n        <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">\n          We'll send you a reminder 24 hours before your session. If you need to reschedule, please do so at least 24 hours in advance.\n        </p>\n      </div>\n    </div>`;\n\n      const subject = `Meeting Confirmed - ${meetingDetails.title} on ${startTimeFormatted}`;\n\n      const templateParams = {\n        email,\n        name,\n        subject,\n        html,\n        meetingId: meetingDetails.meetingId,\n        meetingUrl,\n      };\n\n      await emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams,\n      );\n\n      this.logger.log('‚úÖ Meeting booking confirmation email sent:', {\n        email,\n        meetingId: meetingDetails.meetingId,\n      });\n\n      return {\n        success: true,\n        status: 'success',\n        message: 'Meeting booking confirmation email sent successfully',\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error(\n        '‚ùå Failed to send meeting booking confirmation email:',\n        errorMessage,\n      );\n\n      return {\n        success: false,\n        status: 'error',\n        message: `Failed to send meeting booking confirmation email: ${errorMessage}`,\n      };\n    }\n  }\n\n  /**\n   * Send upcoming meeting reminder email\n   * @param email - Recipient email address\n   * @param name - Recipient name\n   * @param meetingDetails - Meeting information\n   * @param reminderType - Type of reminder (24h, 1h, etc.)\n   * @returns Promise with operation result\n   */\n  async sendMeetingReminder(\n    email: string,\n    name: string,\n    meetingDetails: {\n      meetingId: string;\n      title: string;\n      startTime: Date;\n      duration: number;\n      therapistName: string;\n      clientName: string;\n      meetingUrl?: string;\n    },\n    reminderType: '24h' | '1h' | '15m' = '24h',\n  ): Promise<EmailResponse> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        status: 'error',\n        message:\n          'EmailJS not properly initialized. Check environment variables.',\n      };\n    }\n\n    try {\n      const startTimeFormatted = meetingDetails.startTime.toLocaleString(\n        'en-US',\n        {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric',\n          hour: 'numeric',\n          minute: '2-digit',\n          timeZoneName: 'short',\n        },\n      );\n\n      const reminderText = {\n        '24h': 'tomorrow',\n        '1h': 'in 1 hour',\n        '15m': 'in 15 minutes',\n      }[reminderType];\n\n      const urgencyColor = {\n        '24h': '#436B00',\n        '1h': '#F59E0B',\n        '15m': '#EF4444',\n      }[reminderType];\n\n      const appUrl = process.env.APP_URL || 'https://mentara.com';\n      const meetingUrl =\n        meetingDetails.meetingUrl ||\n        `${appUrl}/meeting/${meetingDetails.meetingId}`;\n\n      const html = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;\">\n      <div style=\"background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n        <h1 style=\"color: ${urgencyColor}; text-align: center; margin-bottom: 30px;\">‚è∞ Meeting Reminder</h1>\n        <p style=\"color: #1F2937; font-size: 16px;\">Hello ${name}, this is a friendly reminder that your therapy session is ${reminderText}.</p>\n        \n        <div style=\"background-color: #F0FDF4; border-left: 4px solid: ${urgencyColor}; padding: 20px; margin: 20px 0; border-radius: 6px;\">\n          <h3 style=\"color: #065F46; margin: 0 0 15px 0;\">Upcoming Session:</h3>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Session:</strong> ${meetingDetails.title}</p>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Date & Time:</strong> ${startTimeFormatted}</p>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Duration:</strong> ${meetingDetails.duration} minutes</p>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Therapist:</strong> ${meetingDetails.therapistName}</p>\n        </div>\n\n        <div style=\"text-align: center; margin: 30px 0;\">\n          <a href=\"${meetingUrl}\" style=\"background-color: ${urgencyColor}; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 500; display: inline-block;\">Join Meeting</a>\n        </div>\n\n        <div style=\"background-color: #FEF3C7; border-left: 4px solid #F59E0B; padding: 16px; margin: 20px 0;\">\n          <p style=\"color: #92400E; margin: 0; font-weight: 500;\">üí° Preparation Tips:</p>\n          <ul style=\"color: #92400E; margin: 10px 0;\">\n            <li>Ensure you have a stable internet connection</li>\n            <li>Find a quiet, private space for your session</li>\n            <li>Test your camera and microphone beforehand</li>\n            <li>Have any questions or topics ready to discuss</li>\n          </ul>\n        </div>\n\n        <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">\n          Looking forward to seeing you in the session. If you need to reschedule, please contact us as soon as possible.\n        </p>\n      </div>\n    </div>`;\n\n      const subject = `Reminder: ${meetingDetails.title} - ${reminderText}`;\n\n      const templateParams = {\n        email,\n        name,\n        subject,\n        html,\n        meetingId: meetingDetails.meetingId,\n        meetingUrl,\n        reminderType,\n      };\n\n      await emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams,\n      );\n\n      this.logger.log('‚úÖ Meeting reminder email sent:', {\n        email,\n        meetingId: meetingDetails.meetingId,\n        reminderType,\n      });\n\n      return {\n        success: true,\n        status: 'success',\n        message: 'Meeting reminder email sent successfully',\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error(\n        '‚ùå Failed to send meeting reminder email:',\n        errorMessage,\n      );\n\n      return {\n        success: false,\n        status: 'error',\n        message: `Failed to send meeting reminder email: ${errorMessage}`,\n      };\n    }\n  }\n\n  /**\n   * Send meeting cancellation notification email\n   * @param email - Recipient email address\n   * @param name - Recipient name\n   * @param meetingDetails - Meeting information\n   * @param cancellationReason - Reason for cancellation\n   * @param cancelledBy - Who cancelled the meeting (client/therapist)\n   * @returns Promise with operation result\n   */\n  async sendMeetingCancellation(\n    email: string,\n    name: string,\n    meetingDetails: {\n      meetingId: string;\n      title: string;\n      startTime: Date;\n      therapistName: string;\n      clientName: string;\n    },\n    cancellationReason: string,\n    cancelledBy: 'client' | 'therapist',\n  ): Promise<EmailResponse> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        status: 'error',\n        message:\n          'EmailJS not properly initialized. Check environment variables.',\n      };\n    }\n\n    try {\n      const startTimeFormatted = meetingDetails.startTime.toLocaleString(\n        'en-US',\n        {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric',\n          hour: 'numeric',\n          minute: '2-digit',\n          timeZoneName: 'short',\n        },\n      );\n\n      const appUrl = process.env.APP_URL || 'https://mentara.com';\n\n      const html = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;\">\n      <div style=\"background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n        <h1 style=\"color: #EF4444; text-align: center; margin-bottom: 30px;\">‚ùå Meeting Cancelled</h1>\n        <p style=\"color: #1F2937; font-size: 16px;\">Hello ${name}, we're writing to inform you that your upcoming therapy session has been cancelled.</p>\n        \n        <div style=\"background-color: #FEF2F2; border-left: 4px solid #EF4444; padding: 20px; margin: 20px 0; border-radius: 6px;\">\n          <h3 style=\"color: #991B1B; margin: 0 0 15px 0;\">Cancelled Session:</h3>\n          <p style=\"color: #991B1B; margin: 5px 0;\"><strong>Session:</strong> ${meetingDetails.title}</p>\n          <p style=\"color: #991B1B; margin: 5px 0;\"><strong>Date & Time:</strong> ${startTimeFormatted}</p>\n          <p style=\"color: #991B1B; margin: 5px 0;\"><strong>Therapist:</strong> ${meetingDetails.therapistName}</p>\n          <p style=\"color: #991B1B; margin: 5px 0;\"><strong>Cancelled by:</strong> ${cancelledBy === 'client' ? 'Client' : 'Therapist'}</p>\n          <p style=\"color: #991B1B; margin: 5px 0;\"><strong>Reason:</strong> ${cancellationReason}</p>\n        </div>\n\n        <div style=\"background-color: #F0FDF4; border-left: 4px solid #10B981; padding: 16px; margin: 20px 0;\">\n          <p style=\"color: #065F46; margin: 0; font-weight: 500;\">üìÖ Rescheduling:</p>\n          <p style=\"color: #065F46; margin: 10px 0 0 0;\">You can book a new session at your convenience through your dashboard.</p>\n        </div>\n\n        <div style=\"text-align: center; margin: 30px 0;\">\n          <a href=\"${appUrl}/dashboard\" style=\"background-color: #436B00; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 500; display: inline-block;\">Book New Session</a>\n        </div>\n\n        <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">\n          If you were charged for this session, any applicable refunds will be processed within 3-5 business days.\n        </p>\n      </div>\n    </div>`;\n\n      const subject = `Meeting Cancelled - ${meetingDetails.title} on ${startTimeFormatted}`;\n\n      const templateParams = {\n        email,\n        name,\n        subject,\n        html,\n        meetingId: meetingDetails.meetingId,\n        cancellationReason,\n        cancelledBy,\n      };\n\n      await emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams,\n      );\n\n      this.logger.log('‚úÖ Meeting cancellation email sent:', {\n        email,\n        meetingId: meetingDetails.meetingId,\n        cancelledBy,\n      });\n\n      return {\n        success: true,\n        status: 'success',\n        message: 'Meeting cancellation email sent successfully',\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error(\n        '‚ùå Failed to send meeting cancellation email:',\n        errorMessage,\n      );\n\n      return {\n        success: false,\n        status: 'error',\n        message: `Failed to send meeting cancellation email: ${errorMessage}`,\n      };\n    }\n  }\n\n  /**\n   * Send payment confirmation email\n   * @param email - Recipient email address\n   * @param name - Recipient name\n   * @param paymentDetails - Payment information\n   * @returns Promise with operation result\n   */\n  async sendPaymentConfirmation(\n    email: string,\n    name: string,\n    paymentDetails: {\n      paymentId: string;\n      amount: number;\n      currency: string;\n      therapistName: string;\n      meetingTitle?: string;\n      meetingDate?: Date;\n      paymentMethod: string;\n    },\n  ): Promise<EmailResponse> {\n    if (!this.isInitialized) {\n      return {\n        success: false,\n        status: 'error',\n        message:\n          'EmailJS not properly initialized. Check environment variables.',\n      };\n    }\n\n    try {\n      const meetingDateFormatted = paymentDetails.meetingDate?.toLocaleString(\n        'en-US',\n        {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric',\n          hour: 'numeric',\n          minute: '2-digit',\n        },\n      );\n\n      const html = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9fafb;\">\n      <div style=\"background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n        <h1 style=\"color: #10B981; text-align: center; margin-bottom: 30px;\">‚úÖ Payment Confirmed</h1>\n        <p style=\"color: #1F2937; font-size: 16px;\">Hello ${name}, your payment has been successfully processed.</p>\n        \n        <div style=\"background-color: #F0FDF4; border-left: 4px solid #10B981; padding: 20px; margin: 20px 0; border-radius: 6px;\">\n          <h3 style=\"color: #065F46; margin: 0 0 15px 0;\">Payment Details:</h3>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Amount:</strong> ${paymentDetails.currency} $${paymentDetails.amount}</p>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Therapist:</strong> ${paymentDetails.therapistName}</p>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Payment Method:</strong> ${paymentDetails.paymentMethod}</p>\n          <p style=\"color: #065F46; margin: 5px 0;\"><strong>Transaction ID:</strong> ${paymentDetails.paymentId}</p>\n          ${paymentDetails.meetingTitle ? `<p style=\"color: #065F46; margin: 5px 0;\"><strong>Session:</strong> ${paymentDetails.meetingTitle}</p>` : ''}\n          ${meetingDateFormatted ? `<p style=\"color: #065F46; margin: 5px 0;\"><strong>Session Date:</strong> ${meetingDateFormatted}</p>` : ''}\n        </div>\n\n        <div style=\"background-color: #FEF3C7; border-left: 4px solid #F59E0B; padding: 16px; margin: 20px 0;\">\n          <p style=\"color: #92400E; margin: 0; font-weight: 500;\">üìÑ Receipt:</p>\n          <p style=\"color: #92400E; margin: 10px 0 0 0;\">Keep this email as your payment receipt for your records.</p>\n        </div>\n\n        <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">\n          Thank you for choosing Mentara for your mental health care. If you have any questions about this payment, please contact our support team.\n        </p>\n      </div>\n    </div>`;\n\n      const subject = `Payment Confirmation - ${paymentDetails.currency} $${paymentDetails.amount} to ${paymentDetails.therapistName}`;\n\n      const templateParams = {\n        email,\n        name,\n        subject,\n        html,\n        paymentId: paymentDetails.paymentId,\n        amount: paymentDetails.amount,\n        currency: paymentDetails.currency,\n      };\n\n      await emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams,\n      );\n\n      this.logger.log('‚úÖ Payment confirmation email sent:', {\n        email,\n        paymentId: paymentDetails.paymentId,\n        amount: paymentDetails.amount,\n      });\n\n      return {\n        success: true,\n        status: 'success',\n        message: 'Payment confirmation email sent successfully',\n      };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error(\n        '‚ùå Failed to send payment confirmation email:',\n        errorMessage,\n      );\n\n      return {\n        success: false,\n        status: 'error',\n        message: `Failed to send payment confirmation email: ${errorMessage}`,\n      };\n    }\n  }\n\n  /**\n   * Generate OTP code\n   */\n  generateOtp(length: number = 6): string {\n    const digits = '0123456789';\n    let otp = '';\n    for (let i = 0; i < length; i++) {\n      otp += digits[Math.floor(Math.random() * 10)];\n    }\n    return otp;\n  }\n\n  /**\n   * Format expiry time for email display\n   */\n  formatExpiryTime(minutes: number): string {\n    if (minutes < 60) {\n      return `${minutes} minute${minutes !== 1 ? 's' : ''}`;\n    }\n    const hours = Math.floor(minutes / 60);\n    const remainingMinutes = minutes % 60;\n    let timeString = `${hours} hour${hours !== 1 ? 's' : ''}`;\n    if (remainingMinutes > 0) {\n      timeString += ` and ${remainingMinutes} minute${remainingMinutes !== 1 ? 's' : ''}`;\n    }\n    return timeString;\n  }\n\n  /**\n   * Get configuration status\n   */\n  getConfigurationStatus(): {\n    isInitialized: boolean;\n    hasServiceId: boolean;\n    hasTemplateId: boolean;\n    hasPublicKey: boolean;\n    hasPrivateKey: boolean;\n  } {\n    return {\n      isInitialized: this.isInitialized,\n      hasServiceId: !!this.config.serviceId,\n      hasTemplateId: !!this.config.templateId,\n      hasPublicKey: !!this.config.publicKey,\n      hasPrivateKey: !!this.config.privateKey,\n    };\n  }\n}\n"],"version":3}