{"version":3,"names":["cov_1ame0066zw","actualCoverage","common_1","s","require","operators_1","api_response_dto_1","ResponseInterceptor","intercept","context","next","f","handle","pipe","map","data","ApiResponseDto","b","success","exports","__decorate","Injectable"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/interceptors/response.interceptor.ts"],"sourcesContent":["import {\n  Injectable,\n  NestInterceptor,\n  ExecutionContext,\n  CallHandler,\n} from '@nestjs/common';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ApiResponse, ApiResponseDto } from '../dto/api-response.dto';\n\n@Injectable()\nexport class ResponseInterceptor<T>\n  implements NestInterceptor<T, ApiResponse<T>>\n{\n  intercept(\n    context: ExecutionContext,\n    next: CallHandler,\n  ): Observable<ApiResponse<T>> {\n    return next.handle().pipe(\n      map((data) => {\n        // If the controller already returns an ApiResponseDto, pass it through\n        if (data instanceof ApiResponseDto) {\n          return data;\n        }\n\n        // If the data has success property, it's already formatted\n        if (data && typeof data === 'object' && 'success' in data) {\n          return data as ApiResponse<T>;\n        }\n\n        // Otherwise, wrap the data in our standard response format\n        return ApiResponseDto.success(data);\n      }),\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}