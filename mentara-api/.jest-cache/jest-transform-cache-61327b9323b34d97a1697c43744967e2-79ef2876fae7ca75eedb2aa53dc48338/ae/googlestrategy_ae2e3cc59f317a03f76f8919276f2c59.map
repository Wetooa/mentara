{"version":3,"names":["cov_2m8l2ds2t0","actualCoverage","common_1","s","require","passport_1","passport_google_oauth20_1","GoogleStrategy","PassportStrategy","Strategy","constructor","f","clientID","b","process","env","GOOGLE_CLIENT_ID","clientSecret","GOOGLE_CLIENT_SECRET","callbackURL","GOOGLE_CALLBACK_URL","scope","validate","accessToken","refreshToken","profile","done","name","emails","photos","user","email","value","firstName","givenName","lastName","familyName","picture","exports","__decorate","Injectable"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/strategies/google.strategy.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Strategy, VerifyCallback } from 'passport-google-oauth20';\n\n@Injectable()\nexport class GoogleStrategy extends PassportStrategy(Strategy, 'google') {\n  constructor() {\n    super({\n      clientID: process.env.GOOGLE_CLIENT_ID || 'placeholder-client-id',\n      clientSecret:\n        process.env.GOOGLE_CLIENT_SECRET || 'placeholder-client-secret',\n      callbackURL: process.env.GOOGLE_CALLBACK_URL || '/auth/google/callback',\n      scope: ['email', 'profile'],\n    });\n  }\n\n  async validate(\n    accessToken: string,\n    refreshToken: string,\n    profile: any,\n    done: VerifyCallback,\n  ): Promise<any> {\n    const { name, emails, photos } = profile;\n    const user = {\n      email: emails[0].value,\n      firstName: name.givenName,\n      lastName: name.familyName,\n      picture: photos[0].value,\n      accessToken,\n      refreshToken,\n    };\n    done(null, user);\n  }\n}\n"],"mappings":"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","ignoreList":[]}