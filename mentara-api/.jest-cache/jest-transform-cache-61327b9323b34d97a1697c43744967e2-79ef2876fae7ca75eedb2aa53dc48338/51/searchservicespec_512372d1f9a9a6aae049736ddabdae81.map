{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/search/search.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/search/search.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { SearchService } from './search.service';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport { InternalServerErrorException } from '@nestjs/common';\n\ndescribe('SearchService', () => {\n  let service: SearchService;\n  let prismaService: any;\n\n  // Mock data\n  const mockTherapist = {\n    id: 'therapist-123',\n    userId: 'user-123',\n    bio: 'Experienced therapist specializing in anxiety and depression',\n    expertise: ['anxiety', 'depression', 'trauma'],\n    hourlyRate: 100,\n    yearsOfExperience: 5,\n    province: 'Ontario',\n    status: 'approved',\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    user: {\n      id: 'user-123',\n      firstName: 'John',\n      lastName: 'Doe',\n      avatarUrl: 'https://example.com/avatar.jpg',\n    },\n  } as any;\n\n  const mockPost = {\n    id: 'post-123',\n    title: 'Mental Health Tips',\n    content: 'Here are some tips for managing anxiety',\n    tags: ['anxiety', 'tips', 'mental-health'],\n    userId: 'user-456',\n    roomId: 'room-123',\n    communityId: 'community-123',\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    user: {\n      id: 'user-456',\n      firstName: 'Jane',\n      lastName: 'Smith',\n      avatarUrl: 'https://example.com/jane.jpg',\n    },\n    room: {\n      id: 'room-123',\n      name: 'General Discussion',\n      roomGroup: {\n        id: 'group-123',\n        name: 'Main Group',\n        community: {\n          id: 'community-123',\n          name: 'Mental Health Support',\n          slug: 'mental-health-support',\n        },\n      },\n    },\n    _count: {\n      hearts: 15,\n      comments: 8,\n    },\n  } as any;\n\n  const mockCommunity = {\n    id: 'community-123',\n    name: 'Mental Health Support',\n    description: 'A supportive community for mental health discussions',\n    slug: 'mental-health-support',\n    imageUrl: 'https://example.com/community.jpg',\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    updatedAt: new Date('2024-01-15T00:00:00Z'),\n    _count: {\n      memberships: 250,\n    },\n  } as any;\n\n  const mockUser = {\n    id: 'user-123',\n    firstName: 'John',\n    lastName: 'Doe',\n    email: 'john.doe@example.com',\n    avatarUrl: 'https://example.com/avatar.jpg',\n    role: 'client',\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n  };\n\n  beforeEach(async () => {\n    const mockPrismaService = {\n      therapist: {\n        findMany: jest.fn(),\n      },\n      post: {\n        findMany: jest.fn(),\n      },\n      community: {\n        findMany: jest.fn(),\n      },\n      user: {\n        findMany: jest.fn(),\n      },\n    };\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        SearchService,\n        {\n          provide: PrismaService,\n          useValue: mockPrismaService,\n        },\n      ],\n    }).compile();\n\n    service = module.get<SearchService>(SearchService);\n    prismaService = module.get(PrismaService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('searchTherapists', () => {\n    beforeEach(() => {\n      prismaService.therapist.findMany.mockResolvedValue([mockTherapist]);\n    });\n\n    it('should search therapists successfully', async () => {\n      const result = await service.searchTherapists('anxiety');\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith({\n        where: {\n          status: 'approved',\n          OR: [\n            {\n              user: {\n                firstName: { contains: 'anxiety', mode: 'insensitive' },\n              },\n            },\n            {\n              user: {\n                lastName: { contains: 'anxiety', mode: 'insensitive' },\n              },\n            },\n            {\n              bio: { contains: 'anxiety', mode: 'insensitive' },\n            },\n            {\n              expertise: { hasSome: ['anxiety'] },\n            },\n          ],\n        },\n        include: {\n          user: {\n            select: {\n              id: true,\n              firstName: true,\n              lastName: true,\n              avatarUrl: true,\n            },\n          },\n        },\n        orderBy: { createdAt: 'desc' },\n        take: 20,\n      });\n      expect(result).toEqual([mockTherapist]);\n    });\n\n    it('should search therapists with province filter', async () => {\n      await service.searchTherapists('anxiety', { province: 'Ontario' });\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith({\n        where: {\n          status: 'approved',\n          province: 'Ontario',\n          OR: [\n            {\n              user: {\n                firstName: { contains: 'anxiety', mode: 'insensitive' },\n              },\n            },\n            {\n              user: {\n                lastName: { contains: 'anxiety', mode: 'insensitive' },\n              },\n            },\n            {\n              bio: { contains: 'anxiety', mode: 'insensitive' },\n            },\n            {\n              expertise: { hasSome: ['anxiety'] },\n            },\n          ],\n        },\n        include: {\n          user: {\n            select: {\n              id: true,\n              firstName: true,\n              lastName: true,\n              avatarUrl: true,\n            },\n          },\n        },\n        orderBy: { createdAt: 'desc' },\n        take: 20,\n      });\n    });\n\n    it('should search therapists with expertise filter', async () => {\n      await service.searchTherapists('therapist', {\n        expertise: ['anxiety', 'depression'],\n      });\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            expertise: { hasSome: ['anxiety', 'depression'] },\n          }),\n        }),\n      );\n    });\n\n    it('should search therapists with hourly rate filter', async () => {\n      await service.searchTherapists('therapist', { maxHourlyRate: 150 });\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            hourlyRate: { lte: 150 },\n          }),\n        }),\n      );\n    });\n\n    it('should search therapists with experience filter', async () => {\n      await service.searchTherapists('therapist', { minExperience: 3 });\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            yearsOfExperience: { gte: 3 },\n          }),\n        }),\n      );\n    });\n\n    it('should search therapists with multiple filters', async () => {\n      await service.searchTherapists('anxiety', {\n        province: 'Ontario',\n        expertise: ['anxiety'],\n        maxHourlyRate: 120,\n        minExperience: 2,\n      });\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            status: 'approved',\n            province: 'Ontario',\n            expertise: { hasSome: ['anxiety'] },\n            hourlyRate: { lte: 120 },\n            yearsOfExperience: { gte: 2 },\n          }),\n        }),\n      );\n    });\n\n    it('should handle empty results', async () => {\n      prismaService.therapist.findMany.mockResolvedValue([]);\n\n      const result = await service.searchTherapists('nonexistent');\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle database errors', async () => {\n      prismaService.therapist.findMany.mockRejectedValue(\n        new Error('Database error'),\n      );\n\n      await expect(service.searchTherapists('anxiety')).rejects.toThrow(\n        'Database error',\n      );\n    });\n\n    it('should handle empty expertise filter', async () => {\n      await service.searchTherapists('anxiety', { expertise: [] });\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.not.objectContaining({\n            expertise: expect.anything(),\n          }),\n        }),\n      );\n    });\n\n    it('should handle case insensitive search', async () => {\n      await service.searchTherapists('ANXIETY');\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              {\n                bio: { contains: 'ANXIETY', mode: 'insensitive' },\n              },\n            ]),\n          }),\n        }),\n      );\n    });\n\n    it('should handle special characters in query', async () => {\n      const specialQuery = 'anxiety & depression';\n\n      await service.searchTherapists(specialQuery);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              {\n                bio: { contains: specialQuery, mode: 'insensitive' },\n              },\n            ]),\n          }),\n        }),\n      );\n    });\n  });\n\n  describe('searchPosts', () => {\n    beforeEach(() => {\n      prismaService.post.findMany.mockResolvedValue([mockPost]);\n    });\n\n    it('should search posts successfully', async () => {\n      const result = await service.searchPosts('anxiety');\n\n      expect(prismaService.post.findMany).toHaveBeenCalledWith({\n        where: {\n          OR: [\n            { title: { contains: 'anxiety', mode: 'insensitive' } },\n            { content: { contains: 'anxiety', mode: 'insensitive' } },\n          ],\n        },\n        include: {\n          user: {\n            select: {\n              id: true,\n              firstName: true,\n              lastName: true,\n              avatarUrl: true,\n            },\n          },\n          room: {\n            include: {\n              roomGroup: {\n                include: {\n                  community: {\n                    select: {\n                      id: true,\n                      name: true,\n                      slug: true,\n                    },\n                  },\n                },\n              },\n            },\n          },\n          _count: {\n            select: {\n              hearts: true,\n              comments: true,\n            },\n          },\n        },\n        orderBy: { createdAt: 'desc' },\n        take: 20,\n      });\n      expect(result).toEqual([mockPost]);\n    });\n\n    it('should search posts with community filter', async () => {\n      await service.searchPosts('mental health', 'community-123');\n\n      expect(prismaService.post.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            communityId: 'community-123',\n          }),\n        }),\n      );\n    });\n\n    it('should handle empty results', async () => {\n      prismaService.post.findMany.mockResolvedValue([]);\n\n      const result = await service.searchPosts('nonexistent');\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle database errors', async () => {\n      prismaService.post.findMany.mockRejectedValue(\n        new Error('Database error'),\n      );\n\n      await expect(service.searchPosts('anxiety')).rejects.toThrow(\n        'Database error',\n      );\n    });\n\n    it('should search in post titles', async () => {\n      await service.searchPosts('Mental Health');\n\n      expect(prismaService.post.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { title: { contains: 'Mental Health', mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n\n    it('should search in post content', async () => {\n      await service.searchPosts('tips');\n\n      expect(prismaService.post.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { content: { contains: 'tips', mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n\n\n    it('should handle Unicode characters', async () => {\n      const unicodeQuery = 'salÃºd mental';\n\n      await service.searchPosts(unicodeQuery);\n\n      expect(prismaService.post.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { title: { contains: unicodeQuery, mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n  });\n\n  describe('searchCommunities', () => {\n    beforeEach(() => {\n      prismaService.community.findMany.mockResolvedValue([mockCommunity]);\n    });\n\n    it('should search communities successfully', async () => {\n      const result = await service.searchCommunities('mental health');\n\n      expect(prismaService.community.findMany).toHaveBeenCalledWith({\n        where: {\n          OR: [\n            { name: { contains: 'mental health', mode: 'insensitive' } },\n            { description: { contains: 'mental health', mode: 'insensitive' } },\n          ],\n        },\n        include: {\n          _count: {\n            select: {\n              memberships: true,\n            },\n          },\n        },\n        orderBy: { createdAt: 'desc' },\n        take: 20,\n      });\n      expect(result).toEqual([mockCommunity]);\n    });\n\n    it('should handle empty results', async () => {\n      prismaService.community.findMany.mockResolvedValue([]);\n\n      const result = await service.searchCommunities('nonexistent');\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle database errors', async () => {\n      prismaService.community.findMany.mockRejectedValue(\n        new Error('Database error'),\n      );\n\n      await expect(service.searchCommunities('support')).rejects.toThrow(\n        'Database error',\n      );\n    });\n\n    it('should search in community names', async () => {\n      await service.searchCommunities('Support');\n\n      expect(prismaService.community.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { name: { contains: 'Support', mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n\n    it('should search in community descriptions', async () => {\n      await service.searchCommunities('supportive');\n\n      expect(prismaService.community.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { description: { contains: 'supportive', mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n\n    it('should handle case insensitive search', async () => {\n      await service.searchCommunities('MENTAL HEALTH');\n\n      expect(prismaService.community.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { name: { contains: 'MENTAL HEALTH', mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n\n    it('should handle partial matches', async () => {\n      await service.searchCommunities('health');\n\n      expect(prismaService.community.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { name: { contains: 'health', mode: 'insensitive' } },\n              { description: { contains: 'health', mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n  });\n\n  describe('searchUsers', () => {\n    beforeEach(() => {\n      prismaService.user.findMany.mockResolvedValue([mockUser]);\n    });\n\n    it('should search users successfully', async () => {\n      const result = await service.searchUsers('john');\n\n      expect(prismaService.user.findMany).toHaveBeenCalledWith({\n        where: {\n          OR: [\n            { firstName: { contains: 'john', mode: 'insensitive' } },\n            { lastName: { contains: 'john', mode: 'insensitive' } },\n            { email: { contains: 'john', mode: 'insensitive' } },\n          ],\n        },\n        select: {\n          id: true,\n          firstName: true,\n          lastName: true,\n          email: true,\n          avatarUrl: true,\n          role: true,\n          createdAt: true,\n        },\n        orderBy: { createdAt: 'desc' },\n        take: 20,\n      });\n      expect(result).toEqual([mockUser]);\n    });\n\n    it('should search users with role filter', async () => {\n      await service.searchUsers('john', 'therapist');\n\n      expect(prismaService.user.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            role: 'therapist',\n          }),\n        }),\n      );\n    });\n\n    it('should handle empty results', async () => {\n      prismaService.user.findMany.mockResolvedValue([]);\n\n      const result = await service.searchUsers('nonexistent');\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle database errors', async () => {\n      prismaService.user.findMany.mockRejectedValue(\n        new Error('Database error'),\n      );\n\n      await expect(service.searchUsers('john')).rejects.toThrow(\n        'Database error',\n      );\n    });\n\n    it('should search in first names', async () => {\n      await service.searchUsers('Jane');\n\n      expect(prismaService.user.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { firstName: { contains: 'Jane', mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n\n    it('should search in last names', async () => {\n      await service.searchUsers('Smith');\n\n      expect(prismaService.user.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { lastName: { contains: 'Smith', mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n\n    it('should search in email addresses', async () => {\n      await service.searchUsers('example.com');\n\n      expect(prismaService.user.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { email: { contains: 'example.com', mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n\n    it('should handle different user roles', async () => {\n      const roles = ['client', 'therapist', 'moderator', 'admin'];\n\n      for (const role of roles) {\n        await service.searchUsers('user', role);\n\n        expect(prismaService.user.findMany).toHaveBeenCalledWith(\n          expect.objectContaining({\n            where: expect.objectContaining({\n              role: role,\n            }),\n          }),\n        );\n      }\n    });\n  });\n\n  describe('globalSearch', () => {\n    beforeEach(() => {\n      // Mock all individual search methods\n      jest\n        .spyOn(service, 'searchTherapists')\n        .mockResolvedValue([mockTherapist]);\n      jest.spyOn(service, 'searchPosts').mockResolvedValue([mockPost]);\n      jest\n        .spyOn(service, 'searchCommunities')\n        .mockResolvedValue([mockCommunity]);\n      jest.spyOn(service, 'searchUsers').mockResolvedValue([mockUser]);\n    });\n\n    it('should perform global search across all types', async () => {\n      const result = await service.globalSearch('anxiety');\n\n      expect(service.searchTherapists).toHaveBeenCalledWith('anxiety');\n      expect(service.searchPosts).toHaveBeenCalledWith('anxiety');\n      expect(service.searchCommunities).toHaveBeenCalledWith('anxiety');\n      expect(service.searchUsers).toHaveBeenCalledWith('anxiety');\n\n      expect(result).toEqual({\n        therapists: [mockTherapist],\n        posts: [mockPost],\n        communities: [mockCommunity],\n        users: [mockUser],\n      });\n    });\n\n    it('should search only therapists when type is specified', async () => {\n      const result = await service.globalSearch('anxiety', 'therapists');\n\n      expect(service.searchTherapists).toHaveBeenCalledWith('anxiety');\n      expect(service.searchPosts).not.toHaveBeenCalled();\n      expect(service.searchCommunities).not.toHaveBeenCalled();\n      expect(service.searchUsers).not.toHaveBeenCalled();\n\n      expect(result).toEqual({\n        therapists: [mockTherapist],\n      });\n    });\n\n    it('should search only posts when type is specified', async () => {\n      const result = await service.globalSearch('mental health', 'posts');\n\n      expect(service.searchTherapists).not.toHaveBeenCalled();\n      expect(service.searchPosts).toHaveBeenCalledWith('mental health');\n      expect(service.searchCommunities).not.toHaveBeenCalled();\n      expect(service.searchUsers).not.toHaveBeenCalled();\n\n      expect(result).toEqual({\n        posts: [mockPost],\n      });\n    });\n\n    it('should search only communities when type is specified', async () => {\n      const result = await service.globalSearch('support', 'communities');\n\n      expect(service.searchTherapists).not.toHaveBeenCalled();\n      expect(service.searchPosts).not.toHaveBeenCalled();\n      expect(service.searchCommunities).toHaveBeenCalledWith('support');\n      expect(service.searchUsers).not.toHaveBeenCalled();\n\n      expect(result).toEqual({\n        communities: [mockCommunity],\n      });\n    });\n\n    it('should search only users when type is specified', async () => {\n      const result = await service.globalSearch('john', 'users');\n\n      expect(service.searchTherapists).not.toHaveBeenCalled();\n      expect(service.searchPosts).not.toHaveBeenCalled();\n      expect(service.searchCommunities).not.toHaveBeenCalled();\n      expect(service.searchUsers).toHaveBeenCalledWith('john');\n\n      expect(result).toEqual({\n        users: [mockUser],\n      });\n    });\n\n    it('should handle errors in individual search methods', async () => {\n      jest\n        .spyOn(service, 'searchTherapists')\n        .mockRejectedValue(new Error('Search failed'));\n\n      await expect(service.globalSearch('anxiety')).rejects.toThrow(\n        InternalServerErrorException,\n      );\n    });\n\n    it('should handle empty query strings', async () => {\n      const result = await service.globalSearch('');\n\n      expect(service.searchTherapists).toHaveBeenCalledWith('');\n      expect(service.searchPosts).toHaveBeenCalledWith('');\n      expect(service.searchCommunities).toHaveBeenCalledWith('');\n      expect(service.searchUsers).toHaveBeenCalledWith('');\n\n      expect(result).toEqual({\n        therapists: [mockTherapist],\n        posts: [mockPost],\n        communities: [mockCommunity],\n        users: [mockUser],\n      });\n    });\n  });\n\n  describe('Edge cases and error handling', () => {\n    it('should handle null query strings', async () => {\n      const nullQuery = null as any;\n\n      prismaService.therapist.findMany.mockResolvedValue([]);\n\n      await service.searchTherapists(nullQuery);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalled();\n    });\n\n    it('should handle undefined query strings', async () => {\n      const undefinedQuery = undefined as any;\n\n      prismaService.post.findMany.mockResolvedValue([]);\n\n      await service.searchPosts(undefinedQuery);\n\n      expect(prismaService.post.findMany).toHaveBeenCalled();\n    });\n\n    it('should handle very long query strings', async () => {\n      const longQuery = 'a'.repeat(1000);\n\n      prismaService.community.findMany.mockResolvedValue([]);\n\n      await service.searchCommunities(longQuery);\n\n      expect(prismaService.community.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            OR: expect.arrayContaining([\n              { name: { contains: longQuery, mode: 'insensitive' } },\n            ]),\n          }),\n        }),\n      );\n    });\n\n    it('should handle special characters in filters', async () => {\n      await service.searchTherapists('anxiety', {\n        province: 'QuÃ©bec',\n        expertise: ['thÃ©rapie', 'anxiÃ©tÃ©'],\n      });\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            province: 'QuÃ©bec',\n            expertise: { hasSome: ['thÃ©rapie', 'anxiÃ©tÃ©'] },\n          }),\n        }),\n      );\n    });\n\n    it('should handle database connection timeouts', async () => {\n      prismaService.user.findMany.mockRejectedValue(\n        new Error('Connection timeout'),\n      );\n\n      await expect(service.searchUsers('test')).rejects.toThrow(\n        'Connection timeout',\n      );\n    });\n\n    it('should handle concurrent search requests', async () => {\n      const searches = [\n        service.searchTherapists('anxiety'),\n        service.searchPosts('mental health'),\n        service.searchCommunities('support'),\n        service.searchUsers('john'),\n      ];\n\n      const results = await Promise.allSettled(searches);\n\n      expect(results.every((result) => result.status === 'fulfilled')).toBe(\n        true,\n      );\n    });\n\n    it('should handle malformed filter objects', async () => {\n      const malformedFilters = {\n        province: undefined,\n        expertise: 'not-an-array' as any,\n        maxHourlyRate: 'invalid' as any,\n        minExperience: -1,\n      };\n\n      await service.searchTherapists('test', malformedFilters);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalled();\n    });\n\n    it('should handle non-string error objects', async () => {\n      const nonStringError = { message: 'Database error' };\n      prismaService.therapist.findMany.mockRejectedValue(nonStringError);\n\n      await expect(service.searchTherapists('test')).rejects.toBe(\n        nonStringError,\n      );\n    });\n  });\n\n  describe('Performance and scaling', () => {\n    it('should handle large result sets efficiently', async () => {\n      const manyTherapists = Array(1000)\n        .fill(mockTherapist)\n        .map((therapist, i) => ({\n          ...therapist,\n          id: `therapist-${i}`,\n        }));\n\n      prismaService.therapist.findMany.mockResolvedValue(manyTherapists);\n\n      const result = await service.searchTherapists('anxiety');\n\n      expect(result).toHaveLength(1000);\n      expect(prismaService.therapist.findMany).toHaveBeenCalledTimes(1);\n    });\n\n    it('should respect take limit in queries', async () => {\n      await service.searchTherapists('anxiety');\n      await service.searchPosts('mental health');\n      await service.searchCommunities('support');\n      await service.searchUsers('john');\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({ take: 20 }),\n      );\n      expect(prismaService.post.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({ take: 20 }),\n      );\n      expect(prismaService.community.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({ take: 20 }),\n      );\n      expect(prismaService.user.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({ take: 20 }),\n      );\n    });\n\n    it('should handle rapid successive searches', async () => {\n      const rapidSearches = Array(10)\n        .fill(null)\n        .map(() => service.searchTherapists('anxiety'));\n\n      const results = await Promise.all(rapidSearches);\n\n      expect(results).toHaveLength(10);\n      expect(prismaService.therapist.findMany).toHaveBeenCalledTimes(10);\n    });\n\n    it('should handle complex filter combinations efficiently', async () => {\n      const complexFilters = {\n        province: 'Ontario',\n        expertise: ['anxiety', 'depression', 'trauma', 'PTSD', 'CBT'],\n        maxHourlyRate: 200,\n        minExperience: 10,\n      };\n\n      await service.searchTherapists('expert therapist', complexFilters);\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            status: 'approved',\n            province: 'Ontario',\n            expertise: { hasSome: complexFilters.expertise },\n            hourlyRate: { lte: 200 },\n            yearsOfExperience: { gte: 10 },\n          }),\n        }),\n      );\n    });\n  });\n\n  describe('Business logic validation', () => {\n    it('should only search approved therapists', async () => {\n      await service.searchTherapists('anxiety');\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            status: 'approved',\n          }),\n        }),\n      );\n    });\n\n    it('should include proper user information for therapists', async () => {\n      await service.searchTherapists('anxiety');\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          include: expect.objectContaining({\n            user: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n                avatarUrl: true,\n              },\n            },\n          }),\n        }),\n      );\n    });\n\n    it('should include engagement metrics for posts', async () => {\n      await service.searchPosts('mental health');\n\n      expect(prismaService.post.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          include: expect.objectContaining({\n            _count: {\n              select: {\n                hearts: true,\n                comments: true,\n              },\n            },\n          }),\n        }),\n      );\n    });\n\n    it('should include membership count for communities', async () => {\n      await service.searchCommunities('support');\n\n      expect(prismaService.community.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          include: expect.objectContaining({\n            _count: {\n              select: {\n                memberships: true,\n              },\n            },\n          }),\n        }),\n      );\n    });\n\n    it('should select only safe user fields', async () => {\n      await service.searchUsers('john');\n\n      expect(prismaService.user.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          select: {\n            id: true,\n            firstName: true,\n            lastName: true,\n            email: true,\n            avatarUrl: true,\n            role: true,\n            createdAt: true,\n          },\n        }),\n      );\n    });\n\n    it('should order results by creation date', async () => {\n      await service.searchTherapists('anxiety');\n      await service.searchPosts('mental health');\n      await service.searchCommunities('support');\n      await service.searchUsers('john');\n\n      expect(prismaService.therapist.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({ orderBy: { createdAt: 'desc' } }),\n      );\n      expect(prismaService.post.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({ orderBy: { createdAt: 'desc' } }),\n      );\n      expect(prismaService.community.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({ orderBy: { createdAt: 'desc' } }),\n      );\n      expect(prismaService.user.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({ orderBy: { createdAt: 'desc' } }),\n      );\n    });\n  });\n});\n"],"version":3}