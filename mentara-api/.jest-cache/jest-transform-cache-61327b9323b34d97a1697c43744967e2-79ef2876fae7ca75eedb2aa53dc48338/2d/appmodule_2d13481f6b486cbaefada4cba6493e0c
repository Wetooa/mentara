aee85b7d57da59bad107b2f0e278dee8
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.AppModule = void 0;
const common_1 = require("@nestjs/common");
const config_1 = require("@nestjs/config");
const event_emitter_1 = require("@nestjs/event-emitter");
const throttler_1 = require("@nestjs/throttler");
const core_1 = require("@nestjs/core");
const auth_module_1 = require("./auth/auth.module");
const app_controller_1 = require("./app.controller");
const app_service_1 = require("./app.service");
const users_module_1 = require("./users/users.module");
const communities_module_1 = require("./communities/communities.module");
const posts_module_1 = require("./posts/posts.module");
const comments_module_1 = require("./comments/comments.module");
const therapist_module_1 = require("./therapist/therapist.module");
const worksheets_module_1 = require("./worksheets/worksheets.module");
const pre_assessment_module_1 = require("./pre-assessment/pre-assessment.module");
const booking_module_1 = require("./booking/booking.module");
const reviews_module_1 = require("./reviews/reviews.module");
const admin_module_1 = require("./admin/admin.module");
const moderator_module_1 = require("./moderator/moderator.module");
const client_module_1 = require("./client/client.module");
const messaging_module_1 = require("./messaging/messaging.module");
const meetings_module_1 = require("./meetings/meetings.module");
const notifications_module_1 = require("./notifications/notifications.module");
const billing_module_1 = require("./billing/billing.module");
const dashboard_module_1 = require("./dashboard/dashboard.module");
const search_module_1 = require("./search/search.module");
const analytics_module_1 = require("./analytics/analytics.module");
const onboarding_module_1 = require("./onboarding/onboarding.module");
const health_module_1 = require("./health/health.module");
const email_module_1 = require("./email/email.module");
const prisma_client_provider_1 = require("./providers/prisma-client.provider");
const response_interceptor_1 = require("./common/interceptors/response.interceptor");
const http_exception_filter_1 = require("./common/filters/http-exception.filter");
const event_bus_service_1 = require("./common/events/event-bus.service");
const common_module_1 = require("./common/common.module");
const jwt_auth_guard_1 = require("./auth/guards/jwt-auth.guard");
const security_guard_1 = require("./common/guards/security.guard");
const security_headers_middleware_1 = require("./common/middleware/security-headers.middleware");
const jwt_1 = require("@nestjs/jwt");
let AppModule = class AppModule {
    configure(consumer) {
        consumer.apply(security_headers_middleware_1.SecurityHeadersMiddleware).forRoutes('*');
    }
};
exports.AppModule = AppModule;
exports.AppModule = AppModule = __decorate([
    (0, common_1.Module)({
        imports: [
            config_1.ConfigModule.forRoot(),
            throttler_1.ThrottlerModule.forRoot([
                {
                    name: 'default',
                    ttl: 60000, // 1 minute
                    limit: process.env.NODE_ENV === 'production' ? 500 : 2000, // Increased limits for development
                },
                {
                    name: 'auth',
                    ttl: 300000, // 5 minutes
                    limit: process.env.NODE_ENV === 'production' ? 30 : 100, // More reasonable auth attempts
                },
                {
                    name: 'upload',
                    ttl: 60000, // 1 minute
                    limit: process.env.NODE_ENV === 'production' ? 20 : 50, // Increased upload limits
                },
                {
                    name: 'community',
                    ttl: 60000, // 1 minute
                    limit: process.env.NODE_ENV === 'production' ? 400 : 1000, // Higher community interaction limits
                },
            ]),
            event_emitter_1.EventEmitterModule.forRoot({
                // FIXED: Disabled wildcards to prevent event routing chaos
                // Was causing MessageSentEvent to trigger ALL event handlers
                wildcard: false,
                // The delimiter used to segment namespaces (not needed without wildcards)
                delimiter: '.',
                // Disable throwing uncaught exceptions
                ignoreErrors: false,
                // Max listeners per event
                maxListeners: 10,
                // Show event name in memory leaks message when more than maximum amount of listeners
                verboseMemoryLeak: false,
            }),
            common_module_1.CommonModule,
            auth_module_1.AuthModule,
            users_module_1.UsersModule,
            communities_module_1.CommunitiesModule,
            posts_module_1.PostsModule,
            comments_module_1.CommentsModule,
            therapist_module_1.TherapistModule,
            worksheets_module_1.WorksheetsModule,
            pre_assessment_module_1.PreAssessmentModule,
            booking_module_1.BookingModule,
            reviews_module_1.ReviewsModule,
            admin_module_1.AdminModule,
            moderator_module_1.ModeratorModule,
            client_module_1.ClientModule,
            messaging_module_1.MessagingModule,
            meetings_module_1.MeetingsModule,
            notifications_module_1.NotificationsModule,
            billing_module_1.BillingModule,
            dashboard_module_1.DashboardModule,
            search_module_1.SearchModule,
            analytics_module_1.AnalyticsModule,
            onboarding_module_1.OnboardingModule,
            health_module_1.HealthModule,
            email_module_1.EmailModule,
        ],
        controllers: [app_controller_1.AppController],
        providers: [
            app_service_1.AppService,
            prisma_client_provider_1.PrismaService,
            event_bus_service_1.EventBusService,
            jwt_1.JwtService,
            {
                provide: core_1.APP_INTERCEPTOR,
                useClass: response_interceptor_1.ResponseInterceptor,
            },
            {
                provide: core_1.APP_FILTER,
                useClass: http_exception_filter_1.HttpExceptionFilter,
            },
            {
                provide: core_1.APP_GUARD,
                useClass: throttler_1.ThrottlerGuard,
            },
            {
                provide: core_1.APP_GUARD,
                useClass: jwt_auth_guard_1.JwtAuthGuard,
            },
            {
                provide: core_1.APP_GUARD,
                useClass: security_guard_1.SecurityGuard,
            },
        ],
    })
], AppModule);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2FwcC5tb2R1bGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsMkNBQXdFO0FBQ3hFLDJDQUE4QztBQUM5Qyx5REFBMkQ7QUFDM0QsaURBQW9FO0FBQ3BFLHVDQUFzRTtBQUN0RSxvREFBZ0Q7QUFDaEQscURBQWlEO0FBQ2pELCtDQUEyQztBQUMzQyx1REFBbUQ7QUFDbkQseUVBQXFFO0FBQ3JFLHVEQUFtRDtBQUNuRCxnRUFBNEQ7QUFDNUQsbUVBQStEO0FBQy9ELHNFQUFrRTtBQUNsRSxrRkFBNkU7QUFDN0UsNkRBQXlEO0FBQ3pELDZEQUF5RDtBQUN6RCx1REFBbUQ7QUFDbkQsbUVBQStEO0FBQy9ELDBEQUFzRDtBQUN0RCxtRUFBK0Q7QUFDL0QsZ0VBQTREO0FBQzVELCtFQUEyRTtBQUMzRSw2REFBeUQ7QUFDekQsbUVBQStEO0FBQy9ELDBEQUFzRDtBQUN0RCxtRUFBK0Q7QUFDL0Qsc0VBQWtFO0FBQ2xFLDBEQUFzRDtBQUN0RCx1REFBbUQ7QUFDbkQsK0VBQW1FO0FBQ25FLHFGQUFpRjtBQUNqRixrRkFBNkU7QUFDN0UseUVBQW9FO0FBQ3BFLDBEQUFzRDtBQUN0RCxpRUFBNEQ7QUFDNUQsbUVBQStEO0FBQy9ELGlHQUE0RjtBQUM1RixxQ0FBeUM7QUE2RmxDLElBQU0sU0FBUyxHQUFmLE1BQU0sU0FBUztJQUNwQixTQUFTLENBQUMsUUFBNEI7UUFDcEMsUUFBUSxDQUFDLEtBQUssQ0FBQyx1REFBeUIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMzRCxDQUFDO0NBQ0YsQ0FBQTtBQUpZLDhCQUFTO29CQUFULFNBQVM7SUEzRnJCLElBQUEsZUFBTSxFQUFDO1FBQ04sT0FBTyxFQUFFO1lBQ1AscUJBQVksQ0FBQyxPQUFPLEVBQUU7WUFDdEIsMkJBQWUsQ0FBQyxPQUFPLENBQUM7Z0JBQ3RCO29CQUNFLElBQUksRUFBRSxTQUFTO29CQUNmLEdBQUcsRUFBRSxLQUFLLEVBQUUsV0FBVztvQkFDdkIsS0FBSyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsbUNBQW1DO2lCQUMvRjtnQkFDRDtvQkFDRSxJQUFJLEVBQUUsTUFBTTtvQkFDWixHQUFHLEVBQUUsTUFBTSxFQUFFLFlBQVk7b0JBQ3pCLEtBQUssRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLGdDQUFnQztpQkFDMUY7Z0JBQ0Q7b0JBQ0UsSUFBSSxFQUFFLFFBQVE7b0JBQ2QsR0FBRyxFQUFFLEtBQUssRUFBRSxXQUFXO29CQUN2QixLQUFLLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEtBQUssWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSwwQkFBMEI7aUJBQ25GO2dCQUNEO29CQUNFLElBQUksRUFBRSxXQUFXO29CQUNqQixHQUFHLEVBQUUsS0FBSyxFQUFFLFdBQVc7b0JBQ3ZCLEtBQUssRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxZQUFZLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLHNDQUFzQztpQkFDbEc7YUFDRixDQUFDO1lBQ0Ysa0NBQWtCLENBQUMsT0FBTyxDQUFDO2dCQUN6QiwyREFBMkQ7Z0JBQzNELDZEQUE2RDtnQkFDN0QsUUFBUSxFQUFFLEtBQUs7Z0JBQ2YsMEVBQTBFO2dCQUMxRSxTQUFTLEVBQUUsR0FBRztnQkFDZCx1Q0FBdUM7Z0JBQ3ZDLFlBQVksRUFBRSxLQUFLO2dCQUNuQiwwQkFBMEI7Z0JBQzFCLFlBQVksRUFBRSxFQUFFO2dCQUNoQixxRkFBcUY7Z0JBQ3JGLGlCQUFpQixFQUFFLEtBQUs7YUFDekIsQ0FBQztZQUNGLDRCQUFZO1lBQ1osd0JBQVU7WUFDViwwQkFBVztZQUNYLHNDQUFpQjtZQUNqQiwwQkFBVztZQUNYLGdDQUFjO1lBQ2Qsa0NBQWU7WUFDZixvQ0FBZ0I7WUFDaEIsMkNBQW1CO1lBQ25CLDhCQUFhO1lBQ2IsOEJBQWE7WUFDYiwwQkFBVztZQUNYLGtDQUFlO1lBQ2YsNEJBQVk7WUFDWixrQ0FBZTtZQUNmLGdDQUFjO1lBQ2QsMENBQW1CO1lBQ25CLDhCQUFhO1lBQ2Isa0NBQWU7WUFDZiw0QkFBWTtZQUNaLGtDQUFlO1lBQ2Ysb0NBQWdCO1lBQ2hCLDRCQUFZO1lBQ1osMEJBQVc7U0FDWjtRQUNELFdBQVcsRUFBRSxDQUFDLDhCQUFhLENBQUM7UUFDNUIsU0FBUyxFQUFFO1lBQ1Qsd0JBQVU7WUFDVixzQ0FBYTtZQUNiLG1DQUFlO1lBQ2YsZ0JBQVU7WUFDVjtnQkFDRSxPQUFPLEVBQUUsc0JBQWU7Z0JBQ3hCLFFBQVEsRUFBRSwwQ0FBbUI7YUFDOUI7WUFDRDtnQkFDRSxPQUFPLEVBQUUsaUJBQVU7Z0JBQ25CLFFBQVEsRUFBRSwyQ0FBbUI7YUFDOUI7WUFDRDtnQkFDRSxPQUFPLEVBQUUsZ0JBQVM7Z0JBQ2xCLFFBQVEsRUFBRSwwQkFBYzthQUN6QjtZQUNEO2dCQUNFLE9BQU8sRUFBRSxnQkFBUztnQkFDbEIsUUFBUSxFQUFFLDZCQUFZO2FBQ3ZCO1lBQ0Q7Z0JBQ0UsT0FBTyxFQUFFLGdCQUFTO2dCQUNsQixRQUFRLEVBQUUsOEJBQWE7YUFDeEI7U0FDRjtLQUNGLENBQUM7R0FDVyxTQUFTLENBSXJCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy9hcHAubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vZHVsZSwgTmVzdE1vZHVsZSwgTWlkZGxld2FyZUNvbnN1bWVyIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgQ29uZmlnTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy9jb25maWcnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy9ldmVudC1lbWl0dGVyJztcbmltcG9ydCB7IFRocm90dGxlck1vZHVsZSwgVGhyb3R0bGVyR3VhcmQgfSBmcm9tICdAbmVzdGpzL3Rocm90dGxlcic7XG5pbXBvcnQgeyBBUFBfSU5URVJDRVBUT1IsIEFQUF9GSUxURVIsIEFQUF9HVUFSRCB9IGZyb20gJ0BuZXN0anMvY29yZSc7XG5pbXBvcnQgeyBBdXRoTW9kdWxlIH0gZnJvbSAnLi9hdXRoL2F1dGgubW9kdWxlJztcbmltcG9ydCB7IEFwcENvbnRyb2xsZXIgfSBmcm9tICcuL2FwcC5jb250cm9sbGVyJztcbmltcG9ydCB7IEFwcFNlcnZpY2UgfSBmcm9tICcuL2FwcC5zZXJ2aWNlJztcbmltcG9ydCB7IFVzZXJzTW9kdWxlIH0gZnJvbSAnLi91c2Vycy91c2Vycy5tb2R1bGUnO1xuaW1wb3J0IHsgQ29tbXVuaXRpZXNNb2R1bGUgfSBmcm9tICcuL2NvbW11bml0aWVzL2NvbW11bml0aWVzLm1vZHVsZSc7XG5pbXBvcnQgeyBQb3N0c01vZHVsZSB9IGZyb20gJy4vcG9zdHMvcG9zdHMubW9kdWxlJztcbmltcG9ydCB7IENvbW1lbnRzTW9kdWxlIH0gZnJvbSAnLi9jb21tZW50cy9jb21tZW50cy5tb2R1bGUnO1xuaW1wb3J0IHsgVGhlcmFwaXN0TW9kdWxlIH0gZnJvbSAnLi90aGVyYXBpc3QvdGhlcmFwaXN0Lm1vZHVsZSc7XG5pbXBvcnQgeyBXb3Jrc2hlZXRzTW9kdWxlIH0gZnJvbSAnLi93b3Jrc2hlZXRzL3dvcmtzaGVldHMubW9kdWxlJztcbmltcG9ydCB7IFByZUFzc2Vzc21lbnRNb2R1bGUgfSBmcm9tICcuL3ByZS1hc3Nlc3NtZW50L3ByZS1hc3Nlc3NtZW50Lm1vZHVsZSc7XG5pbXBvcnQgeyBCb29raW5nTW9kdWxlIH0gZnJvbSAnLi9ib29raW5nL2Jvb2tpbmcubW9kdWxlJztcbmltcG9ydCB7IFJldmlld3NNb2R1bGUgfSBmcm9tICcuL3Jldmlld3MvcmV2aWV3cy5tb2R1bGUnO1xuaW1wb3J0IHsgQWRtaW5Nb2R1bGUgfSBmcm9tICcuL2FkbWluL2FkbWluLm1vZHVsZSc7XG5pbXBvcnQgeyBNb2RlcmF0b3JNb2R1bGUgfSBmcm9tICcuL21vZGVyYXRvci9tb2RlcmF0b3IubW9kdWxlJztcbmltcG9ydCB7IENsaWVudE1vZHVsZSB9IGZyb20gJy4vY2xpZW50L2NsaWVudC5tb2R1bGUnO1xuaW1wb3J0IHsgTWVzc2FnaW5nTW9kdWxlIH0gZnJvbSAnLi9tZXNzYWdpbmcvbWVzc2FnaW5nLm1vZHVsZSc7XG5pbXBvcnQgeyBNZWV0aW5nc01vZHVsZSB9IGZyb20gJy4vbWVldGluZ3MvbWVldGluZ3MubW9kdWxlJztcbmltcG9ydCB7IE5vdGlmaWNhdGlvbnNNb2R1bGUgfSBmcm9tICcuL25vdGlmaWNhdGlvbnMvbm90aWZpY2F0aW9ucy5tb2R1bGUnO1xuaW1wb3J0IHsgQmlsbGluZ01vZHVsZSB9IGZyb20gJy4vYmlsbGluZy9iaWxsaW5nLm1vZHVsZSc7XG5pbXBvcnQgeyBEYXNoYm9hcmRNb2R1bGUgfSBmcm9tICcuL2Rhc2hib2FyZC9kYXNoYm9hcmQubW9kdWxlJztcbmltcG9ydCB7IFNlYXJjaE1vZHVsZSB9IGZyb20gJy4vc2VhcmNoL3NlYXJjaC5tb2R1bGUnO1xuaW1wb3J0IHsgQW5hbHl0aWNzTW9kdWxlIH0gZnJvbSAnLi9hbmFseXRpY3MvYW5hbHl0aWNzLm1vZHVsZSc7XG5pbXBvcnQgeyBPbmJvYXJkaW5nTW9kdWxlIH0gZnJvbSAnLi9vbmJvYXJkaW5nL29uYm9hcmRpbmcubW9kdWxlJztcbmltcG9ydCB7IEhlYWx0aE1vZHVsZSB9IGZyb20gJy4vaGVhbHRoL2hlYWx0aC5tb2R1bGUnO1xuaW1wb3J0IHsgRW1haWxNb2R1bGUgfSBmcm9tICcuL2VtYWlsL2VtYWlsLm1vZHVsZSc7XG5pbXBvcnQgeyBQcmlzbWFTZXJ2aWNlIH0gZnJvbSAnLi9wcm92aWRlcnMvcHJpc21hLWNsaWVudC5wcm92aWRlcic7XG5pbXBvcnQgeyBSZXNwb25zZUludGVyY2VwdG9yIH0gZnJvbSAnLi9jb21tb24vaW50ZXJjZXB0b3JzL3Jlc3BvbnNlLmludGVyY2VwdG9yJztcbmltcG9ydCB7IEh0dHBFeGNlcHRpb25GaWx0ZXIgfSBmcm9tICcuL2NvbW1vbi9maWx0ZXJzL2h0dHAtZXhjZXB0aW9uLmZpbHRlcic7XG5pbXBvcnQgeyBFdmVudEJ1c1NlcnZpY2UgfSBmcm9tICcuL2NvbW1vbi9ldmVudHMvZXZlbnQtYnVzLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnLi9jb21tb24vY29tbW9uLm1vZHVsZSc7XG5pbXBvcnQgeyBKd3RBdXRoR3VhcmQgfSBmcm9tICcuL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IFNlY3VyaXR5R3VhcmQgfSBmcm9tICcuL2NvbW1vbi9ndWFyZHMvc2VjdXJpdHkuZ3VhcmQnO1xuaW1wb3J0IHsgU2VjdXJpdHlIZWFkZXJzTWlkZGxld2FyZSB9IGZyb20gJy4vY29tbW9uL21pZGRsZXdhcmUvc2VjdXJpdHktaGVhZGVycy5taWRkbGV3YXJlJztcbmltcG9ydCB7IEp3dFNlcnZpY2UgfSBmcm9tICdAbmVzdGpzL2p3dCc7XG5cbkBNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29uZmlnTW9kdWxlLmZvclJvb3QoKSxcbiAgICBUaHJvdHRsZXJNb2R1bGUuZm9yUm9vdChbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdkZWZhdWx0JyxcbiAgICAgICAgdHRsOiA2MDAwMCwgLy8gMSBtaW51dGVcbiAgICAgICAgbGltaXQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyA1MDAgOiAyMDAwLCAvLyBJbmNyZWFzZWQgbGltaXRzIGZvciBkZXZlbG9wbWVudFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2F1dGgnLFxuICAgICAgICB0dGw6IDMwMDAwMCwgLy8gNSBtaW51dGVzXG4gICAgICAgIGxpbWl0OiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gMzAgOiAxMDAsIC8vIE1vcmUgcmVhc29uYWJsZSBhdXRoIGF0dGVtcHRzXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAndXBsb2FkJyxcbiAgICAgICAgdHRsOiA2MDAwMCwgLy8gMSBtaW51dGVcbiAgICAgICAgbGltaXQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAyMCA6IDUwLCAvLyBJbmNyZWFzZWQgdXBsb2FkIGxpbWl0c1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2NvbW11bml0eScsXG4gICAgICAgIHR0bDogNjAwMDAsIC8vIDEgbWludXRlXG4gICAgICAgIGxpbWl0OiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gNDAwIDogMTAwMCwgLy8gSGlnaGVyIGNvbW11bml0eSBpbnRlcmFjdGlvbiBsaW1pdHNcbiAgICAgIH0sXG4gICAgXSksXG4gICAgRXZlbnRFbWl0dGVyTW9kdWxlLmZvclJvb3Qoe1xuICAgICAgLy8gRklYRUQ6IERpc2FibGVkIHdpbGRjYXJkcyB0byBwcmV2ZW50IGV2ZW50IHJvdXRpbmcgY2hhb3NcbiAgICAgIC8vIFdhcyBjYXVzaW5nIE1lc3NhZ2VTZW50RXZlbnQgdG8gdHJpZ2dlciBBTEwgZXZlbnQgaGFuZGxlcnNcbiAgICAgIHdpbGRjYXJkOiBmYWxzZSxcbiAgICAgIC8vIFRoZSBkZWxpbWl0ZXIgdXNlZCB0byBzZWdtZW50IG5hbWVzcGFjZXMgKG5vdCBuZWVkZWQgd2l0aG91dCB3aWxkY2FyZHMpXG4gICAgICBkZWxpbWl0ZXI6ICcuJyxcbiAgICAgIC8vIERpc2FibGUgdGhyb3dpbmcgdW5jYXVnaHQgZXhjZXB0aW9uc1xuICAgICAgaWdub3JlRXJyb3JzOiBmYWxzZSxcbiAgICAgIC8vIE1heCBsaXN0ZW5lcnMgcGVyIGV2ZW50XG4gICAgICBtYXhMaXN0ZW5lcnM6IDEwLFxuICAgICAgLy8gU2hvdyBldmVudCBuYW1lIGluIG1lbW9yeSBsZWFrcyBtZXNzYWdlIHdoZW4gbW9yZSB0aGFuIG1heGltdW0gYW1vdW50IG9mIGxpc3RlbmVyc1xuICAgICAgdmVyYm9zZU1lbW9yeUxlYWs6IGZhbHNlLFxuICAgIH0pLFxuICAgIENvbW1vbk1vZHVsZSxcbiAgICBBdXRoTW9kdWxlLFxuICAgIFVzZXJzTW9kdWxlLFxuICAgIENvbW11bml0aWVzTW9kdWxlLFxuICAgIFBvc3RzTW9kdWxlLFxuICAgIENvbW1lbnRzTW9kdWxlLFxuICAgIFRoZXJhcGlzdE1vZHVsZSxcbiAgICBXb3Jrc2hlZXRzTW9kdWxlLFxuICAgIFByZUFzc2Vzc21lbnRNb2R1bGUsXG4gICAgQm9va2luZ01vZHVsZSxcbiAgICBSZXZpZXdzTW9kdWxlLFxuICAgIEFkbWluTW9kdWxlLFxuICAgIE1vZGVyYXRvck1vZHVsZSxcbiAgICBDbGllbnRNb2R1bGUsXG4gICAgTWVzc2FnaW5nTW9kdWxlLFxuICAgIE1lZXRpbmdzTW9kdWxlLFxuICAgIE5vdGlmaWNhdGlvbnNNb2R1bGUsXG4gICAgQmlsbGluZ01vZHVsZSxcbiAgICBEYXNoYm9hcmRNb2R1bGUsXG4gICAgU2VhcmNoTW9kdWxlLFxuICAgIEFuYWx5dGljc01vZHVsZSxcbiAgICBPbmJvYXJkaW5nTW9kdWxlLFxuICAgIEhlYWx0aE1vZHVsZSxcbiAgICBFbWFpbE1vZHVsZSxcbiAgXSxcbiAgY29udHJvbGxlcnM6IFtBcHBDb250cm9sbGVyXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgQXBwU2VydmljZSxcbiAgICBQcmlzbWFTZXJ2aWNlLFxuICAgIEV2ZW50QnVzU2VydmljZSxcbiAgICBKd3RTZXJ2aWNlLFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IEFQUF9JTlRFUkNFUFRPUixcbiAgICAgIHVzZUNsYXNzOiBSZXNwb25zZUludGVyY2VwdG9yLFxuICAgIH0sXG4gICAge1xuICAgICAgcHJvdmlkZTogQVBQX0ZJTFRFUixcbiAgICAgIHVzZUNsYXNzOiBIdHRwRXhjZXB0aW9uRmlsdGVyLFxuICAgIH0sXG4gICAge1xuICAgICAgcHJvdmlkZTogQVBQX0dVQVJELFxuICAgICAgdXNlQ2xhc3M6IFRocm90dGxlckd1YXJkLFxuICAgIH0sXG4gICAge1xuICAgICAgcHJvdmlkZTogQVBQX0dVQVJELFxuICAgICAgdXNlQ2xhc3M6IEp3dEF1dGhHdWFyZCxcbiAgICB9LFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IEFQUF9HVUFSRCxcbiAgICAgIHVzZUNsYXNzOiBTZWN1cml0eUd1YXJkLFxuICAgIH0sXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSBpbXBsZW1lbnRzIE5lc3RNb2R1bGUge1xuICBjb25maWd1cmUoY29uc3VtZXI6IE1pZGRsZXdhcmVDb25zdW1lcikge1xuICAgIGNvbnN1bWVyLmFwcGx5KFNlY3VyaXR5SGVhZGVyc01pZGRsZXdhcmUpLmZvclJvdXRlcygnKicpO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=