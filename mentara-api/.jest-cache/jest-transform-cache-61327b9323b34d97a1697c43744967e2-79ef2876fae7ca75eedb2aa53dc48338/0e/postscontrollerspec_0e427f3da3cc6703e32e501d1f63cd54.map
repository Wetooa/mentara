{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/posts/posts.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/posts/posts.controller.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { HttpException, HttpStatus } from '@nestjs/common';\nimport { PostsController } from './posts.controller';\nimport { PostsService } from './posts.service';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';\nimport { CommunityAccessGuard } from '../auth/guards/community-access.guard';\nimport { SupabaseStorageService } from '../common/services/supabase-storage.service';\nimport { Post as PostEntity } from '@prisma/client';\nimport {\n  MockBuilder,\n  TestDataGenerator,\n  TestAssertions,\n  SecurityGuardTestUtils,\n  TEST_USER_IDS,\n  TEST_POST_IDS,\n  TEST_ROOM_IDS,\n  TEST_COMMUNITY_IDS,\n} from '../test-utils/auth-testing-helpers';\nimport { createMockPrismaService } from '../test-utils';\n\ndescribe('PostsController', () => {\n  let controller: PostsController;\n  let postsService: PostsService;\n  let supabaseStorageService: SupabaseStorageService;\n  let mockJwtAuthGuard: jest.Mocked<JwtAuthGuard>;\n  let mockCommunityAccessGuard: jest.Mocked<CommunityAccessGuard>;\n\n  // Mock data\n  const mockUser = TestDataGenerator.createUser({\n    id: TEST_USER_IDS.CLIENT,\n    role: 'client',\n  });\n\n  const mockPost: PostEntity = {\n    id: TEST_POST_IDS.ANXIETY_POST,\n    title: 'Test Post',\n    content: 'This is a test post content',\n    userId: TEST_USER_IDS.CLIENT,\n    roomId: TEST_ROOM_IDS.ANXIETY_CHAT,\n    attachmentUrls: [],\n    attachmentNames: [],\n    attachmentSizes: [],\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  const mockPosts: PostEntity[] = [mockPost];\n\n  const mockCreatePostDto = {\n    title: 'New Test Post',\n    content: 'This is a new test post',\n    roomId: TEST_ROOM_IDS.ANXIETY_CHAT,\n  };\n\n  const mockUpdatePostDto = {\n    title: 'Updated Test Post',\n    content: 'This is an updated test post',\n  };\n\n  const mockFiles = [\n    {\n      fieldname: 'files',\n      originalname: 'test.jpg',\n      encoding: '7bit',\n      mimetype: 'image/jpeg',\n      size: 1024,\n      buffer: Buffer.from('test file content'),\n    },\n  ] as Express.Multer.File[];\n\n  const mockFileResults = [\n    {\n      url: 'https://example.com/test.jpg',\n      filename: 'test.jpg',\n      size: 1024,\n    },\n  ];\n\n  beforeEach(async () => {\n    // Create mock services\n    const mockPostsService = {\n      findUserById: jest.fn(),\n      findAll: jest.fn(),\n      findOne: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      remove: jest.fn(),\n      findByUserId: jest.fn(),\n      findByRoomId: jest.fn(),\n      heartPost: jest.fn(),\n      isPostHeartedByUser: jest.fn(),\n      reportPost: jest.fn(),\n    };\n\n    const mockSupabaseStorageService = {\n      validateFile: jest.fn(),\n      uploadFiles: jest.fn(),\n      getSupportedBuckets: jest.fn(),\n    };\n\n    mockJwtAuthGuard = {\n      canActivate: jest.fn().mockReturnValue(true),\n    } as any;\n\n    mockCommunityAccessGuard = {\n      canActivate: jest.fn().mockReturnValue(true),\n    } as any;\n\n    // Add static method mock\n    SupabaseStorageService.getSupportedBuckets = jest.fn().mockReturnValue({\n      POST_ATTACHMENTS: 'post-attachments',\n    });\n\n    const module: TestingModule = await Test.createTestingModule({\n      controllers: [PostsController],\n      providers: [\n        {\n          provide: PostsService,\n          useValue: mockPostsService,\n        },\n        {\n          provide: SupabaseStorageService,\n          useValue: mockSupabaseStorageService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .overrideGuard(CommunityAccessGuard)\n      .useValue(mockCommunityAccessGuard)\n      .compile();\n\n    controller = module.get<PostsController>(PostsController);\n    postsService = module.get<PostsService>(PostsService);\n    supabaseStorageService = module.get<SupabaseStorageService>(SupabaseStorageService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('findAll', () => {\n    it('should return all posts for authenticated user', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findUserById').mockResolvedValue(mockUser);\n      jest.spyOn(postsService, 'findAll').mockResolvedValue(mockPosts);\n\n      // Act\n      const result = await controller.findAll(TEST_USER_IDS.CLIENT);\n\n      // Assert\n      expect(postsService.findUserById).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(postsService.findAll).toHaveBeenCalledWith(mockUser.id);\n      expect(result).toEqual(mockPosts);\n    });\n\n    it('should handle user not found', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findUserById').mockResolvedValue(null);\n      jest.spyOn(postsService, 'findAll').mockResolvedValue([]);\n\n      // Act\n      const result = await controller.findAll(TEST_USER_IDS.CLIENT);\n\n      // Assert\n      expect(postsService.findAll).toHaveBeenCalledWith(undefined);\n      expect(result).toEqual([]);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(postsService, 'findUserById').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.findAll(TEST_USER_IDS.CLIENT)).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('findOne', () => {\n    it('should return a specific post when found', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findOne').mockResolvedValue(mockPost);\n\n      // Act\n      const result = await controller.findOne(TEST_POST_IDS.ANXIETY_POST, TEST_USER_IDS.CLIENT);\n\n      // Assert\n      expect(postsService.findOne).toHaveBeenCalledWith(TEST_POST_IDS.ANXIETY_POST, TEST_USER_IDS.CLIENT);\n      expect(result).toEqual(mockPost);\n    });\n\n    it('should throw HttpException when post not found', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findOne').mockResolvedValue(null);\n\n      // Act & Assert\n      await expect(controller.findOne(TEST_POST_IDS.ANXIETY_POST, TEST_USER_IDS.CLIENT)).rejects.toThrow(\n        new HttpException('Post not found', HttpStatus.NOT_FOUND),\n      );\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(postsService, 'findOne').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.findOne(TEST_POST_IDS.ANXIETY_POST, TEST_USER_IDS.CLIENT)).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('create', () => {\n    it('should create post successfully without files', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findUserById').mockResolvedValue(mockUser);\n      jest.spyOn(postsService, 'create').mockResolvedValue(mockPost);\n\n      // Act\n      const result = await controller.create(TEST_USER_IDS.CLIENT, mockCreatePostDto);\n\n      // Assert\n      expect(postsService.findUserById).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(postsService.create).toHaveBeenCalledWith({\n        title: mockCreatePostDto.title,\n        content: mockCreatePostDto.content,\n        user: { connect: { id: mockUser.id } },\n        room: { connect: { id: mockCreatePostDto.roomId } },\n        attachmentUrls: [],\n        attachmentNames: [],\n        attachmentSizes: [],\n      });\n      expect(result).toEqual(mockPost);\n    });\n\n    it('should create post successfully with files', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findUserById').mockResolvedValue(mockUser);\n      jest.spyOn(postsService, 'create').mockResolvedValue(mockPost);\n      jest.spyOn(supabaseStorageService, 'validateFile').mockReturnValue({ isValid: true });\n      jest.spyOn(supabaseStorageService, 'uploadFiles').mockResolvedValue(mockFileResults);\n\n      // Act\n      const result = await controller.create(TEST_USER_IDS.CLIENT, mockCreatePostDto, mockFiles);\n\n      // Assert\n      expect(supabaseStorageService.validateFile).toHaveBeenCalledWith(mockFiles[0]);\n      expect(supabaseStorageService.uploadFiles).toHaveBeenCalledWith(mockFiles, 'post-attachments');\n      expect(postsService.create).toHaveBeenCalledWith({\n        title: mockCreatePostDto.title,\n        content: mockCreatePostDto.content,\n        user: { connect: { id: mockUser.id } },\n        room: { connect: { id: mockCreatePostDto.roomId } },\n        attachmentUrls: ['https://example.com/test.jpg'],\n        attachmentNames: ['test.jpg'],\n        attachmentSizes: [1024],\n      });\n      expect(result).toEqual(mockPost);\n    });\n\n    it('should handle file validation errors', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findUserById').mockResolvedValue(mockUser);\n      jest.spyOn(supabaseStorageService, 'validateFile').mockReturnValue({\n        isValid: false,\n        error: 'Invalid file type',\n      });\n\n      // Act & Assert\n      await expect(controller.create(TEST_USER_IDS.CLIENT, mockCreatePostDto, mockFiles)).rejects.toThrow(\n        HttpException,\n      );\n    });\n\n    it('should handle user not found', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findUserById').mockResolvedValue(null);\n\n      // Act & Assert\n      await expect(controller.create(TEST_USER_IDS.CLIENT, mockCreatePostDto)).rejects.toThrow(\n        new HttpException('User not found', HttpStatus.NOT_FOUND),\n      );\n    });\n  });\n\n  describe('update', () => {\n    it('should update post successfully', async () => {\n      // Arrange\n      const updatedPost = { ...mockPost, ...mockUpdatePostDto };\n      jest.spyOn(postsService, 'update').mockResolvedValue(updatedPost);\n\n      // Act\n      const result = await controller.update(TEST_USER_IDS.CLIENT, TEST_POST_IDS.ANXIETY_POST, mockUpdatePostDto);\n\n      // Assert\n      expect(postsService.update).toHaveBeenCalledWith(\n        TEST_POST_IDS.ANXIETY_POST,\n        mockUpdatePostDto,\n        TEST_USER_IDS.CLIENT,\n      );\n      expect(result).toEqual(updatedPost);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Post not found');\n      jest.spyOn(postsService, 'update').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(\n        controller.update(TEST_USER_IDS.CLIENT, TEST_POST_IDS.ANXIETY_POST, mockUpdatePostDto),\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('remove', () => {\n    it('should delete post successfully', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'remove').mockResolvedValue(mockPost);\n\n      // Act\n      const result = await controller.remove(TEST_USER_IDS.CLIENT, TEST_POST_IDS.ANXIETY_POST);\n\n      // Assert\n      expect(postsService.remove).toHaveBeenCalledWith(TEST_POST_IDS.ANXIETY_POST, TEST_USER_IDS.CLIENT);\n      expect(result).toEqual(mockPost);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Post not found');\n      jest.spyOn(postsService, 'remove').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.remove(TEST_USER_IDS.CLIENT, TEST_POST_IDS.ANXIETY_POST)).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('findByUserId', () => {\n    it('should return posts by user ID', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findByUserId').mockResolvedValue(mockPosts);\n\n      // Act\n      const result = await controller.findByUserId(TEST_USER_IDS.CLIENT);\n\n      // Assert\n      expect(postsService.findByUserId).toHaveBeenCalledWith(TEST_USER_IDS.CLIENT);\n      expect(result).toEqual(mockPosts);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(postsService, 'findByUserId').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.findByUserId(TEST_USER_IDS.CLIENT)).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('findByRoomId', () => {\n    it('should return posts by room ID', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findByRoomId').mockResolvedValue(mockPosts);\n\n      // Act\n      const result = await controller.findByRoomId(TEST_ROOM_IDS.ANXIETY_CHAT, TEST_USER_IDS.CLIENT);\n\n      // Assert\n      expect(postsService.findByRoomId).toHaveBeenCalledWith(TEST_ROOM_IDS.ANXIETY_CHAT, TEST_USER_IDS.CLIENT);\n      expect(result).toEqual(mockPosts);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(postsService, 'findByRoomId').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.findByRoomId(TEST_ROOM_IDS.ANXIETY_CHAT, TEST_USER_IDS.CLIENT)).rejects.toThrow(\n        HttpException,\n      );\n    });\n  });\n\n  describe('heartPost', () => {\n    it('should heart post successfully', async () => {\n      // Arrange\n      const heartResult = { hearted: true };\n      jest.spyOn(postsService, 'heartPost').mockResolvedValue(heartResult);\n\n      // Act\n      const result = await controller.heartPost(TEST_USER_IDS.CLIENT, TEST_POST_IDS.ANXIETY_POST);\n\n      // Assert\n      expect(postsService.heartPost).toHaveBeenCalledWith(TEST_POST_IDS.ANXIETY_POST, TEST_USER_IDS.CLIENT);\n      expect(result).toEqual(heartResult);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Post not found');\n      jest.spyOn(postsService, 'heartPost').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.heartPost(TEST_USER_IDS.CLIENT, TEST_POST_IDS.ANXIETY_POST)).rejects.toThrow(\n        HttpException,\n      );\n    });\n  });\n\n  describe('isPostHearted', () => {\n    it('should check if post is hearted successfully', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'isPostHeartedByUser').mockResolvedValue(true);\n\n      // Act\n      const result = await controller.isPostHearted(TEST_USER_IDS.CLIENT, TEST_POST_IDS.ANXIETY_POST);\n\n      // Assert\n      expect(postsService.isPostHeartedByUser).toHaveBeenCalledWith(TEST_POST_IDS.ANXIETY_POST, TEST_USER_IDS.CLIENT);\n      expect(result).toEqual({ hearted: true });\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(postsService, 'isPostHeartedByUser').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.isPostHearted(TEST_USER_IDS.CLIENT, TEST_POST_IDS.ANXIETY_POST)).rejects.toThrow(\n        HttpException,\n      );\n    });\n  });\n\n  describe('reportPost', () => {\n    const reportData = {\n      reason: 'spam',\n      content: 'This post is spam',\n    };\n\n    it('should report post successfully', async () => {\n      // Arrange\n      const reportId = 'report-123';\n      jest.spyOn(postsService, 'reportPost').mockResolvedValue(reportId);\n\n      // Act\n      const result = await controller.reportPost(TEST_USER_IDS.CLIENT, TEST_POST_IDS.ANXIETY_POST, reportData);\n\n      // Assert\n      expect(postsService.reportPost).toHaveBeenCalledWith(\n        TEST_POST_IDS.ANXIETY_POST,\n        TEST_USER_IDS.CLIENT,\n        reportData.reason,\n        reportData.content,\n      );\n      expect(result).toEqual({ success: true, reportId });\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Post not found');\n      jest.spyOn(postsService, 'reportPost').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(\n        controller.reportPost(TEST_USER_IDS.CLIENT, TEST_POST_IDS.ANXIETY_POST, reportData),\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('Security Integration', () => {\n    it('should have proper guards applied', () => {\n      // Test that guards are applied at controller level\n      const guards = Reflect.getMetadata('__guards__', PostsController);\n      expect(guards).toBeDefined();\n      expect(guards).toContain(JwtAuthGuard);\n      expect(guards).toContain(CommunityAccessGuard);\n    });\n\n    it('should apply RequirePostingRole decorator to create endpoint', () => {\n      // Test that the create endpoint has the RequirePostingRole decorator\n      const metadata = Reflect.getMetadata('require_posting_role', controller.create);\n      expect(metadata).toBeTruthy();\n    });\n\n    it('should apply RequireRoomAccess decorator to protected endpoints', () => {\n      // Test that protected endpoints have the RequireRoomAccess decorator\n      const protectedMethods = ['findOne', 'update', 'remove', 'findByRoomId', 'heartPost', 'reportPost'];\n      \n      protectedMethods.forEach(method => {\n        const metadata = Reflect.getMetadata('require_room_access', controller[method as keyof PostsController]);\n        expect(metadata).toBeTruthy();\n      });\n    });\n\n    it('should test community access guard integration', async () => {\n      // Arrange\n      const testScenarios = SecurityGuardTestUtils.createAccessControlTestScenarios();\n      \n      // Test that CommunityAccessGuard is called for protected endpoints\n      mockCommunityAccessGuard.canActivate.mockReturnValue(true);\n      jest.spyOn(postsService, 'findOne').mockResolvedValue(mockPost);\n\n      // Act\n      await controller.findOne(TEST_POST_IDS.ANXIETY_POST, TEST_USER_IDS.CLIENT);\n\n      // Assert\n      expect(mockCommunityAccessGuard.canActivate).toHaveBeenCalled();\n    });\n\n    it('should handle community access denied', async () => {\n      // Arrange\n      mockCommunityAccessGuard.canActivate.mockReturnValue(false);\n\n      // This would be handled by the guard before reaching the controller\n      // In a real scenario, the guard would throw an exception\n      expect(mockCommunityAccessGuard.canActivate).toBeDefined();\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle HttpException properly', async () => {\n      // Arrange\n      const httpException = new HttpException('Custom error', HttpStatus.BAD_REQUEST);\n      jest.spyOn(postsService, 'findOne').mockRejectedValue(httpException);\n\n      // Act & Assert\n      await expect(controller.findOne(TEST_POST_IDS.ANXIETY_POST, TEST_USER_IDS.CLIENT)).rejects.toThrow(httpException);\n    });\n\n    it('should wrap unknown errors in HttpException', async () => {\n      // Arrange\n      const unknownError = new Error('Unknown error');\n      jest.spyOn(postsService, 'findAll').mockRejectedValue(unknownError);\n\n      // Act & Assert\n      await expect(controller.findAll(TEST_USER_IDS.CLIENT)).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('File Upload Integration', () => {\n    it('should handle multiple file uploads', async () => {\n      // Arrange\n      const multipleFiles = [\n        { ...mockFiles[0], originalname: 'test1.jpg' },\n        { ...mockFiles[0], originalname: 'test2.jpg' },\n      ];\n      const multipleFileResults = [\n        { url: 'https://example.com/test1.jpg', filename: 'test1.jpg', size: 1024 },\n        { url: 'https://example.com/test2.jpg', filename: 'test2.jpg', size: 1024 },\n      ];\n\n      jest.spyOn(postsService, 'findUserById').mockResolvedValue(mockUser);\n      jest.spyOn(postsService, 'create').mockResolvedValue(mockPost);\n      jest.spyOn(supabaseStorageService, 'validateFile').mockReturnValue({ isValid: true });\n      jest.spyOn(supabaseStorageService, 'uploadFiles').mockResolvedValue(multipleFileResults);\n\n      // Act\n      const result = await controller.create(TEST_USER_IDS.CLIENT, mockCreatePostDto, multipleFiles);\n\n      // Assert\n      expect(supabaseStorageService.validateFile).toHaveBeenCalledTimes(2);\n      expect(supabaseStorageService.uploadFiles).toHaveBeenCalledWith(multipleFiles, 'post-attachments');\n      expect(postsService.create).toHaveBeenCalledWith({\n        title: mockCreatePostDto.title,\n        content: mockCreatePostDto.content,\n        user: { connect: { id: mockUser.id } },\n        room: { connect: { id: mockCreatePostDto.roomId } },\n        attachmentUrls: ['https://example.com/test1.jpg', 'https://example.com/test2.jpg'],\n        attachmentNames: ['test1.jpg', 'test2.jpg'],\n        attachmentSizes: [1024, 1024],\n      });\n      expect(result).toEqual(mockPost);\n    });\n\n    it('should handle file upload service errors', async () => {\n      // Arrange\n      jest.spyOn(postsService, 'findUserById').mockResolvedValue(mockUser);\n      jest.spyOn(supabaseStorageService, 'validateFile').mockReturnValue({ isValid: true });\n      jest.spyOn(supabaseStorageService, 'uploadFiles').mockRejectedValue(new Error('Upload failed'));\n\n      // Act & Assert\n      await expect(controller.create(TEST_USER_IDS.CLIENT, mockCreatePostDto, mockFiles)).rejects.toThrow(\n        HttpException,\n      );\n    });\n  });\n});"],"version":3}