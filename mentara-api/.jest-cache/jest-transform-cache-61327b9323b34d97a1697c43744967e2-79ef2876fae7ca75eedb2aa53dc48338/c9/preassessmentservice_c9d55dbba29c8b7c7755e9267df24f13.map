{"version":3,"names":["cov_2cs3dge122","actualCoverage","common_1","s","require","prisma_client_provider_1","pre_assessment_utils_1","ai_service_client_1","clinical_insights_service_1","therapeutic_recommendations_service_1","PreAssessmentService","PreAssessmentService_1","prisma","aiServiceClient","clinicalInsightsService","therapeuticRecommendationsService","logger","Logger","name","constructor","f","getAiEstimate","flatAnswers","debug","length","result","predict","success","b","warn","error","log","responseTime","predictions","Error","message","flattenAnswers","answers","Array","isArray","BadRequestException","flattened","flat","every","value","Number","isFinite","validateAnswersStructure","i","questionnaire","j","validateQuestionnaires","questionnaires","validQuestionnaires","trim","includes","createPreAssessment","userId","data","user","findUnique","where","id","isActive","select","NotFoundException","client","existingAssessment","preAssessment","clientId","scores","severityLevels","calculatedScores","calculateAllScores","Object","fromEntries","entries","map","key","score","generateSeverityLevels","aiEstimate","aiResult","aiError","create","answerMatrix","questionnaireScores","severityLevelsForAnalysis","forEach","undefined","severity","analysis","generateClinicalAnalysis","clinicalProfile","primaryConditions","overallRiskLevel","analysisError","InternalServerErrorException","handleError","console","getPreAssessmentByUserId","getPreAssessmentByClientId","include","isValidScores","isValidSeverityLevels","levels","updatePreAssessment","update","deletePreAssessment","delete","generateClinicalProfile","treatmentPlan","generatePersonalizedTreatmentPlan","riskAssessment","overallRisk","riskFactors","immediateInterventionNeeded","crisisRisk","some","rf","type","level","analysisTimestamp","Date","toISOString","getComprehensiveClinicalAnalysis","getCrisisAssessment","primaryConcerns","pc","condition","riskLevel","priority","emergencyContacts","contingencyPlan","crisisContacts","safetyPlan","emergencySteps","exports","__decorate","Injectable","PrismaService","_a","_b","AiServiceClient","_c","ClinicalInsightsService","_d","TherapeuticRecommendationsService"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/pre-assessment/pre-assessment.service.ts"],"sourcesContent":["import {\n  Injectable,\n  NotFoundException,\n  InternalServerErrorException,\n  BadRequestException,\n  Logger,\n} from '@nestjs/common';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport {\n  calculateAllScores,\n  generateSeverityLevels,\n} from './pre-assessment.utils';\nimport { PreAssessment } from '@prisma/client';\nimport { CreatePreAssessmentDto } from '../../schema/pre-assessment';\nimport { AiServiceClient } from './services/ai-service.client';\nimport { ClinicalInsightsService } from './analysis/clinical-insights.service';\nimport { TherapeuticRecommendationsService } from './analysis/therapeutic-recommendations.service';\nimport { QuestionnaireScores } from './pre-assessment.utils';\n\n@Injectable()\nexport class PreAssessmentService {\n  private readonly logger = new Logger(PreAssessmentService.name);\n\n  constructor(\n    private readonly prisma: PrismaService,\n    private readonly aiServiceClient: AiServiceClient,\n    private readonly clinicalInsightsService: ClinicalInsightsService,\n    private readonly therapeuticRecommendationsService: TherapeuticRecommendationsService,\n  ) {}\n\n  private async getAiEstimate(\n    flatAnswers: number[],\n  ): Promise<Record<string, boolean> | null> {\n    try {\n      this.logger.debug(\n        `Requesting AI prediction for ${flatAnswers.length} values`,\n      );\n\n      const result = await this.aiServiceClient.predict(flatAnswers);\n\n      if (!result.success) {\n        this.logger.warn(`AI prediction failed: ${result.error}`);\n        return null;\n      }\n\n      this.logger.log(\n        `AI prediction completed successfully in ${result.responseTime}ms`,\n      );\n      return result.predictions || null;\n    } catch (error) {\n      this.logger.error(\n        'AI model prediction error:',\n        error instanceof Error ? error.message : error,\n      );\n      return null;\n    }\n  }\n\n  private flattenAnswers(answers: number[][]): number[] {\n    // Input validation\n    if (!Array.isArray(answers)) {\n      throw new BadRequestException('Answers must be a 2D array');\n    }\n\n    // Flatten the 2D answers array\n    const flattened = answers.flat();\n\n    // Validate flattened array\n    if (!Array.isArray(flattened) || flattened.length === 0) {\n      throw new BadRequestException('Flattened answers array cannot be empty');\n    }\n\n    // Validate all values are numbers\n    if (\n      !flattened.every(\n        (value) => typeof value === 'number' && Number.isFinite(value),\n      )\n    ) {\n      throw new BadRequestException('All answer values must be finite numbers');\n    }\n\n    // Validate expected length for AI model\n    if (flattened.length !== 201) {\n      this.logger.warn(\n        `Expected 201 values for AI prediction, got ${flattened.length}`,\n      );\n    }\n\n    this.logger.debug(\n      `Flattened ${answers.length} questionnaire arrays into ${flattened.length} values`,\n    );\n    return flattened;\n  }\n\n  private validateAnswersStructure(answers: number[][]): void {\n    if (!Array.isArray(answers)) {\n      throw new BadRequestException('Answers must be an array of arrays');\n    }\n\n    if (answers.length === 0) {\n      throw new BadRequestException('Answers array cannot be empty');\n    }\n\n    // Validate each questionnaire's answers\n    for (let i = 0; i < answers.length; i++) {\n      const questionnaire = answers[i];\n\n      if (!Array.isArray(questionnaire)) {\n        throw new BadRequestException(\n          `Questionnaire ${i} answers must be an array`,\n        );\n      }\n\n      if (questionnaire.length === 0) {\n        throw new BadRequestException(\n          `Questionnaire ${i} cannot have empty answers`,\n        );\n      }\n\n      // Validate answer values are in reasonable range (0-10 for most scales)\n      for (let j = 0; j < questionnaire.length; j++) {\n        const value = questionnaire[j];\n\n        if (typeof value !== 'number' || !Number.isFinite(value)) {\n          throw new BadRequestException(\n            `Invalid answer value at questionnaire ${i}, question ${j}: ${value}`,\n          );\n        }\n\n        if (value < 0 || value > 10) {\n          throw new BadRequestException(\n            `Answer value out of range (0-10) at questionnaire ${i}, question ${j}: ${value}`,\n          );\n        }\n      }\n    }\n  }\n\n  private validateQuestionnaires(questionnaires: string[]): void {\n    if (!Array.isArray(questionnaires)) {\n      throw new BadRequestException('Questionnaires must be an array');\n    }\n\n    if (questionnaires.length === 0) {\n      throw new BadRequestException('At least one questionnaire is required');\n    }\n\n    // Define valid questionnaire types\n    const validQuestionnaires = [\n      'Stress',\n      'Anxiety',\n      'Depression',\n      'Insomnia',\n      'Panic Disorder',\n      'Bipolar Disorder',\n      'OCD',\n      'PTSD',\n      'Social Anxiety',\n      'Phobia',\n      'Burnout',\n      'Binge Eating',\n      'ADHD',\n      'Alcohol Use',\n    ];\n\n    for (const questionnaire of questionnaires) {\n      if (\n        typeof questionnaire !== 'string' ||\n        questionnaire.trim().length === 0\n      ) {\n        throw new BadRequestException(\n          'All questionnaire names must be non-empty strings',\n        );\n      }\n\n      if (!validQuestionnaires.includes(questionnaire)) {\n        this.logger.warn(`Unknown questionnaire type: ${questionnaire}`);\n      }\n    }\n  }\n\n  async createPreAssessment(\n    userId: string,\n    data: CreatePreAssessmentDto,\n  ): Promise<PreAssessment> {\n    try {\n      this.logger.log(`Creating pre-assessment for user ${userId}`);\n\n      // Validate user exists and is active\n      const user = await this.prisma.user.findUnique({\n        where: { id: userId, isActive: true },\n        select: { id: true, isActive: true },\n      });\n      if (!user) {\n        throw new NotFoundException('User not found or inactive');\n      }\n\n      // Validate client exists\n      const client = await this.prisma.client.findUnique({\n        where: { userId: userId },\n        select: { userId: true },\n      });\n      if (!client) {\n        throw new NotFoundException('Client profile not found');\n      }\n\n      // Check for existing pre-assessment\n      const existingAssessment = await this.prisma.preAssessment.findUnique({\n        where: { clientId: userId },\n      });\n      if (existingAssessment) {\n        throw new BadRequestException(\n          'Pre-assessment already exists for this user',\n        );\n      }\n\n      // Comprehensive input validation\n      this.validateQuestionnaires(data.questionnaires);\n      this.validateAnswersStructure(data.answers);\n\n      // Validate questionnaires and answers alignment\n      if (data.questionnaires.length !== data.answers.length) {\n        throw new BadRequestException(\n          'Number of questionnaires must match number of answer arrays',\n        );\n      }\n\n      let scores: Record<string, number> = data.scores as Record<\n        string,\n        number\n      >;\n      let severityLevels: Record<string, string> =\n        data.severityLevels as Record<string, string>;\n\n      // Calculate scores if not provided\n      if (!data.scores || !data.severityLevels) {\n        this.logger.debug('Calculating scores and severity levels');\n        const calculatedScores = calculateAllScores(\n          data.questionnaires,\n          data.answers,\n        );\n        scores = Object.fromEntries(\n          Object.entries(calculatedScores).map(([key, value]) => [\n            key,\n            value.score,\n          ]),\n        );\n        severityLevels = generateSeverityLevels(calculatedScores);\n      }\n\n      // Safely flatten answers and attempt AI prediction\n      let aiEstimate: Record<string, boolean> = {};\n      try {\n        const flatAnswers = this.flattenAnswers(data.answers);\n\n        if (flatAnswers.length === 201) {\n          this.logger.debug('Attempting AI prediction with validated input');\n          const aiResult = await this.getAiEstimate(flatAnswers);\n          if (aiResult) {\n            aiEstimate = aiResult;\n            this.logger.log('AI prediction successful');\n          } else {\n            this.logger.warn(\n              'AI prediction failed, continuing without AI estimate',\n            );\n          }\n        } else {\n          this.logger.warn(\n            `Cannot perform AI prediction: expected 201 values, got ${flatAnswers.length}`,\n          );\n        }\n      } catch (aiError) {\n        this.logger.error(\n          'AI prediction error, continuing without AI estimate:',\n          aiError,\n        );\n        // Continue without AI estimate - don't fail the entire assessment\n      }\n\n      // Create pre-assessment with validated data\n      const preAssessment = await this.prisma.preAssessment.create({\n        data: {\n          clientId: userId,\n          questionnaires: data.questionnaires,\n          answers: data.answers,\n          answerMatrix: data.answerMatrix as number[][],\n          scores,\n          severityLevels,\n          aiEstimate,\n        },\n      });\n\n      this.logger.log(`Pre-assessment completed for user ${userId}`);\n\n      // Generate comprehensive clinical analysis in background\n      // This provides detailed insights for therapist matching and treatment planning\n      try {\n        // Convert scores to QuestionnaireScores format for analysis\n        const questionnaireScores: QuestionnaireScores = {};\n        const severityLevelsForAnalysis = severityLevels;\n        \n        data.questionnaires.forEach(questionnaire => {\n          if (scores[questionnaire] !== undefined) {\n            questionnaireScores[questionnaire] = {\n              score: scores[questionnaire],\n              severity: severityLevelsForAnalysis[questionnaire] || 'Unknown'\n            };\n          }\n        });\n\n        const analysis = await this.generateClinicalAnalysis(\n          preAssessment,\n          data.questionnaires,\n          questionnaireScores,\n        );\n\n        this.logger.log(\n          `Clinical analysis generated: ${analysis.clinicalProfile.primaryConditions.length} primary conditions, ` +\n            `risk level: ${analysis.clinicalProfile.overallRiskLevel}`,\n        );\n      } catch (analysisError) {\n        this.logger.warn(\n          'Advanced clinical analysis failed but core assessment succeeded:',\n          analysisError instanceof Error\n            ? analysisError.message\n            : analysisError,\n        );\n        // Don't fail the entire process - basic scoring is still available\n      }\n\n      return preAssessment;\n    } catch (error) {\n      if (\n        error instanceof NotFoundException ||\n        error instanceof BadRequestException\n      ) {\n        throw error;\n      }\n\n      this.logger.error(\n        'Error creating pre-assessment:',\n        error instanceof Error ? error.message : error,\n      );\n      throw new InternalServerErrorException('Failed to create pre-assessment');\n    }\n  }\n\n  private handleError(error: unknown, message: string): never {\n    if (error instanceof NotFoundException) {\n      throw error;\n    }\n    if (error instanceof Error) {\n      console.error(message, error.message);\n      throw new InternalServerErrorException(error.message);\n    }\n    console.error(message, error);\n    throw new InternalServerErrorException(message);\n  }\n\n  async getPreAssessmentByUserId(userId: string): Promise<PreAssessment> {\n    try {\n      const preAssessment = await this.prisma.preAssessment.findUnique({\n        where: { clientId: userId },\n      });\n\n      if (!preAssessment) {\n        throw new NotFoundException('Pre-assessment not found');\n      }\n\n      return preAssessment;\n    } catch (error: unknown) {\n      this.handleError(error, 'Error retrieving pre-assessment');\n    }\n  }\n\n  async getPreAssessmentByClientId(clientId: string): Promise<PreAssessment> {\n    try {\n      const preAssessment = await this.prisma.preAssessment.findUnique({\n        where: { clientId: clientId },\n        include: { client: { include: { user: true } } },\n      });\n\n      if (!preAssessment) {\n        throw new NotFoundException('Pre-assessment not found');\n      }\n\n      return preAssessment;\n    } catch (error: unknown) {\n      this.handleError(error, 'Error retrieving pre-assessment');\n    }\n  }\n\n  private isValidScores(scores: unknown): scores is Record<string, number> {\n    if (typeof scores !== 'object' || scores === null) return false;\n    return Object.entries(scores).every(\n      ([key, value]) => typeof key === 'string' && typeof value === 'number',\n    );\n  }\n\n  private isValidSeverityLevels(\n    levels: unknown,\n  ): levels is Record<string, string> {\n    if (typeof levels !== 'object' || levels === null) return false;\n    return Object.entries(levels).every(\n      ([key, value]) => typeof key === 'string' && typeof value === 'string',\n    );\n  }\n\n  async updatePreAssessment(\n    userId: string,\n    data: Partial<CreatePreAssessmentDto>,\n  ): Promise<PreAssessment> {\n    try {\n      const client = await this.prisma.client.findUnique({\n        where: { userId: userId },\n      });\n      if (!client) {\n        throw new NotFoundException('Client not found');\n      }\n\n      let scores: Record<string, number>;\n      let severityLevels: Record<string, string>;\n\n      if (data.scores && this.isValidScores(data.scores)) {\n        scores = data.scores;\n      } else {\n        scores = {};\n      }\n\n      if (\n        data.severityLevels &&\n        this.isValidSeverityLevels(data.severityLevels)\n      ) {\n        severityLevels = data.severityLevels;\n      } else {\n        severityLevels = {};\n      }\n\n      if (\n        data.questionnaires &&\n        data.answers &&\n        (!data.scores || !data.severityLevels)\n      ) {\n        const calculatedScores = calculateAllScores(\n          data.questionnaires,\n          data.answers,\n        );\n        scores = Object.fromEntries(\n          Object.entries(calculatedScores).map(([key, value]) => [\n            key,\n            value.score,\n          ]),\n        );\n        severityLevels = generateSeverityLevels(calculatedScores);\n      }\n\n      const preAssessment = await this.prisma.preAssessment.update({\n        where: { clientId: userId },\n        data: {\n          questionnaires: data.questionnaires as string[],\n          answers: data.answers as number[][],\n          answerMatrix: data.answerMatrix as number[][],\n          scores,\n          severityLevels,\n        },\n      });\n\n      if (!preAssessment) {\n        throw new NotFoundException('Pre-assessment not found');\n      }\n\n      return preAssessment;\n    } catch (error: unknown) {\n      this.handleError(error, 'Error updating pre-assessment');\n    }\n  }\n\n  async deletePreAssessment(userId: string): Promise<null> {\n    try {\n      await this.prisma.preAssessment.delete({\n        where: { clientId: userId },\n      });\n      return null;\n    } catch (error: unknown) {\n      this.handleError(error, 'Error deleting pre-assessment');\n    }\n  }\n\n  /**\n   * Generate comprehensive clinical analysis from pre-assessment data\n   * This method orchestrates the clinical insights and therapeutic recommendations\n   */\n  async generateClinicalAnalysis(\n    preAssessment: PreAssessment,\n    questionnaires: string[],\n    scores: QuestionnaireScores,\n  ) {\n    try {\n      this.logger.log('Generating comprehensive clinical analysis');\n\n      // Generate clinical profile with insights\n      const clinicalProfile =\n        await this.clinicalInsightsService.generateClinicalProfile(\n          preAssessment,\n          questionnaires,\n          scores,\n        );\n\n      // Generate personalized treatment plan\n      const treatmentPlan =\n        await this.therapeuticRecommendationsService.generatePersonalizedTreatmentPlan(\n          clinicalProfile,\n        );\n\n      // Extract risk assessment\n      const riskAssessment = {\n        overallRisk: clinicalProfile.overallRiskLevel,\n        riskFactors: clinicalProfile.riskFactors,\n        immediateInterventionNeeded:\n          clinicalProfile.overallRiskLevel === 'critical',\n        crisisRisk: clinicalProfile.riskFactors.some(\n          (rf) => rf.type === 'suicide' && rf.level === 'critical',\n        ),\n      };\n\n      return {\n        clinicalProfile,\n        treatmentPlan,\n        riskAssessment,\n        analysisTimestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      this.logger.error('Error generating clinical analysis:', error);\n      throw new InternalServerErrorException(\n        'Failed to generate clinical analysis',\n      );\n    }\n  }\n\n  /**\n   * Get comprehensive clinical analysis for a user\n   * Returns cached analysis if available, otherwise generates new one\n   */\n  async getComprehensiveClinicalAnalysis(userId: string) {\n    try {\n      // Get user's pre-assessment\n      const preAssessment = await this.getPreAssessmentByUserId(userId);\n\n      if (!preAssessment) {\n        throw new NotFoundException('Pre-assessment not found for user');\n      }\n\n      // Extract questionnaires and scores\n      const questionnaires = preAssessment.questionnaires as string[];\n      const scores = preAssessment.scores as Record<string, number>;\n\n      // Convert scores to QuestionnaireScores format\n      const questionnaireScores: QuestionnaireScores = {};\n      const severityLevels = preAssessment.severityLevels as Record<\n        string,\n        string\n      >;\n\n      questionnaires.forEach((questionnaire) => {\n        if (scores[questionnaire] !== undefined) {\n          questionnaireScores[questionnaire] = {\n            score: scores[questionnaire],\n            severity: severityLevels[questionnaire] || 'Unknown',\n          };\n        }\n      });\n\n      // Generate comprehensive analysis\n      return await this.generateClinicalAnalysis(\n        preAssessment,\n        questionnaires,\n        questionnaireScores,\n      );\n    } catch (error) {\n      this.logger.error(\n        `Error getting clinical analysis for user ${userId}:`,\n        error,\n      );\n      throw error;\n    }\n  }\n\n  /**\n   * Get crisis assessment for a user\n   * Returns immediate risk factors and intervention needs\n   */\n  async getCrisisAssessment(userId: string) {\n    try {\n      const analysis = await this.getComprehensiveClinicalAnalysis(userId);\n\n      return {\n        overallRisk: analysis.riskAssessment.overallRisk,\n        immediateInterventionNeeded:\n          analysis.riskAssessment.immediateInterventionNeeded,\n        crisisRisk: analysis.riskAssessment.crisisRisk,\n        riskFactors: analysis.riskAssessment.riskFactors,\n        primaryConcerns: analysis.clinicalProfile.primaryConditions.map(\n          (pc) => ({\n            condition: pc.condition,\n            riskLevel: pc.riskLevel,\n            priority: pc.priority,\n          }),\n        ),\n        emergencyContacts:\n          analysis.treatmentPlan.contingencyPlan.crisisContacts,\n        safetyPlan: analysis.treatmentPlan.contingencyPlan.emergencySteps,\n      };\n    } catch (error) {\n      this.logger.error(\n        `Error getting crisis assessment for user ${userId}:`,\n        error,\n      );\n      throw error;\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}