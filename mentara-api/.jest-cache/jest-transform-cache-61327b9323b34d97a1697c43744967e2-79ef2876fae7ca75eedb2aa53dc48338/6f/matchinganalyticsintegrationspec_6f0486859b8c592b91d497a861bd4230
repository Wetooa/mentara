97191515ee3f5e80eba219265e52e2ea
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const prisma_client_provider_1 = require("../../providers/prisma-client.provider");
const database_test_setup_1 = require("../database-test.setup");
const enhanced_test_helpers_1 = require("../enhanced-test-helpers");
/**
 * Matching Analytics Integration Tests
 *
 * Comprehensive testing of the AI/ML matching analytics system including
 * match history, client compatibility, recommendation feedback, and algorithm performance tracking.
 */
describe('Matching Analytics Integration', () => {
    let app;
    let prisma;
    let moduleRef;
    // Test entities
    let testClients = [];
    let testTherapists = [];
    beforeAll(async () => {
        // Setup test database
        prisma = await database_test_setup_1.DatabaseTestSetup.setupTestDatabase();
        moduleRef = await testing_1.Test.createTestingModule({
            providers: [
                {
                    provide: prisma_client_provider_1.PrismaService,
                    useValue: prisma,
                },
            ],
        }).compile();
        app = moduleRef.createNestApplication();
        await app.init();
        // Create test users and profiles
        await setupTestData();
    });
    afterEach(async () => {
        // Clean analytics data but keep users
        await cleanAnalyticsData();
    });
    afterAll(async () => {
        await database_test_setup_1.DatabaseTestSetup.stopContainer();
        await app.close();
        await moduleRef.close();
    });
    async function setupTestData() {
        // Create test clients
        for (let i = 1; i <= 3; i++) {
            const clientUser = await prisma.user.create({
                data: enhanced_test_helpers_1.TestDataGenerator.createUser({
                    id: `analytics-client-${i}`,
                    email: `client${i}@analytics.com`,
                    firstName: `Client${i}`,
                    lastName: 'User',
                    role: 'client',
                }),
            });
            const client = await prisma.client.create({
                data: {
                    userId: clientUser.id,
                    hasSeenTherapistRecommendations: i > 1, // First client hasn't seen recommendations yet
                },
            });
            testClients.push({ user: clientUser, client });
        }
        // Create test therapists
        const specializations = [
            ['Anxiety', 'Depression', 'PTSD'],
            ['ADHD', 'Bipolar', 'Eating Disorders'],
            ['Addiction', 'Trauma', 'Grief'],
        ];
        const approaches = [
            ['CBT', 'DBT', 'ACT'],
            ['Psychodynamic', 'Humanistic', 'Solution-Focused'],
            ['EMDR', 'Narrative Therapy', 'Family Systems'],
        ];
        for (let i = 1; i <= 3; i++) {
            const therapistUser = await prisma.user.create({
                data: enhanced_test_helpers_1.TestDataGenerator.createUser({
                    id: `analytics-therapist-${i}`,
                    email: `therapist${i}@analytics.com`,
                    firstName: `Dr. Therapist${i}`,
                    lastName: 'Professional',
                    role: 'therapist',
                }),
            });
            const therapist = await prisma.therapist.create({
                data: {
                    userId: therapistUser.id,
                    mobile: `+123456789${i}`,
                    province: 'Ontario',
                    providerType: 'Clinical Psychologist',
                    professionalLicenseType: 'Licensed',
                    isPRCLicensed: 'yes',
                    prcLicenseNumber: `PRC12345${i}`,
                    practiceStartDate: new Date('2020-01-01'),
                    yearsOfExperience: 5 + i,
                    areasOfExpertise: specializations[i - 1],
                    assessmentTools: ['PHQ-9', 'GAD-7', 'PCL-5'].slice(0, i + 1),
                    therapeuticApproachesUsedList: approaches[i - 1],
                    languagesOffered: ['English', 'French'].slice(0, i),
                    providedOnlineTherapyBefore: true,
                    comfortableUsingVideoConferencing: true,
                    preferredSessionLength: [60, 90].slice(0, i),
                    acceptTypes: ['Individual', 'Couples', 'Family'].slice(0, i + 1),
                    status: 'approved',
                    hourlyRate: 100 + (i * 25),
                    expirationDateOfLicense: new Date('2025-01-01'),
                    compliesWithDataPrivacyAct: true,
                    willingToAbideByPlatformGuidelines: true,
                    treatmentSuccessRates: {
                        anxiety: 0.85 + (i * 0.05),
                        depression: 0.80 + (i * 0.03),
                    },
                    sessionLength: '60 minutes',
                },
            });
            testTherapists.push({ user: therapistUser, therapist });
        }
    }
    async function cleanAnalyticsData() {
        await prisma.recommendationFeedback.deleteMany();
        await prisma.algorithmPerformance.deleteMany();
        await prisma.clientCompatibility.deleteMany();
        await prisma.matchHistory.deleteMany();
        await prisma.matchingWeight.deleteMany();
    }
    describe('Matching Weight Configuration', () => {
        it('should create and manage matching weights', async () => {
            // Create matching weights
            const weights = await prisma.matchingWeight.createMany({
                data: [
                    {
                        name: 'conditionMatch',
                        weight: 0.30,
                        description: 'How well therapist specializations match client conditions',
                        isActive: true,
                    },
                    {
                        name: 'approachCompatibility',
                        weight: 0.25,
                        description: 'Compatibility of therapeutic approaches with client preferences',
                        isActive: true,
                    },
                    {
                        name: 'experienceLevel',
                        weight: 0.20,
                        description: 'Therapist experience level and track record',
                        isActive: true,
                    },
                    {
                        name: 'logisticsMatch',
                        weight: 0.15,
                        description: 'Schedule, location, and session format compatibility',
                        isActive: true,
                    },
                    {
                        name: 'reviewScore',
                        weight: 0.10,
                        description: 'Therapist average rating and reviews',
                        isActive: true,
                    },
                ],
            });
            // Verify weights created
            const createdWeights = await prisma.matchingWeight.findMany({
                orderBy: { weight: 'desc' },
            });
            expect(createdWeights).toHaveLength(5);
            expect(createdWeights[0].name).toBe('conditionMatch');
            expect(createdWeights[0].weight).toBe(0.30);
            // Verify total weights sum to 1.0
            const totalWeight = createdWeights.reduce((sum, w) => sum + w.weight, 0);
            expect(totalWeight).toBeCloseTo(1.0, 2);
        });
        it('should handle weight updates and deactivation', async () => {
            // Create initial weight
            const weight = await prisma.matchingWeight.create({
                data: {
                    name: 'personalityMatch',
                    weight: 0.15,
                    description: 'Personality compatibility assessment',
                    isActive: true,
                },
            });
            // Update weight value
            const updatedWeight = await prisma.matchingWeight.update({
                where: { id: weight.id },
                data: {
                    weight: 0.18,
                    description: 'Enhanced personality compatibility assessment',
                },
            });
            // Deactivate weight
            await prisma.matchingWeight.update({
                where: { id: weight.id },
                data: { isActive: false },
            });
            // Verify changes
            const finalWeight = await prisma.matchingWeight.findUnique({
                where: { id: weight.id },
            });
            expect(finalWeight?.weight).toBe(0.18);
            expect(finalWeight?.isActive).toBe(false);
            expect(finalWeight?.description).toContain('Enhanced');
        });
    });
    describe('Match History Creation and Tracking', () => {
        it('should create comprehensive match history records', async () => {
            const client = testClients[0];
            const therapist = testTherapists[0];
            // Create match history
            const matchHistory = await prisma.matchHistory.create({
                data: {
                    clientId: client.client.userId,
                    therapistId: therapist.therapist.userId,
                    totalScore: 85,
                    conditionScore: 90,
                    approachScore: 80,
                    experienceScore: 85,
                    reviewScore: 88,
                    logisticsScore: 75,
                    compatibilityScore: 82,
                    primaryMatches: ['Anxiety', 'Depression'],
                    secondaryMatches: ['Stress Management'],
                    approachMatches: ['CBT', 'DBT'],
                    recommendationRank: 1,
                    totalRecommendations: 5,
                    wasViewed: true,
                    wasContacted: true,
                    becameClient: true,
                    sessionCount: 3,
                    clientSatisfactionScore: 5,
                    recommendationAlgorithm: 'advanced',
                    userAgent: 'Mozilla/5.0 Chrome/120.0',
                },
            });
            // Verify match history creation
            const createdMatch = await prisma.matchHistory.findUnique({
                where: { id: matchHistory.id },
                include: {
                    client: {
                        include: {
                            user: true,
                        },
                    },
                    therapist: {
                        include: {
                            user: true,
                        },
                    },
                },
            });
            expect(createdMatch?.totalScore).toBe(85);
            expect(createdMatch?.primaryMatches).toContain('Anxiety');
            expect(createdMatch?.approachMatches).toContain('CBT');
            expect(createdMatch?.recommendationRank).toBe(1);
            expect(createdMatch?.becameClient).toBe(true);
            expect(createdMatch?.clientSatisfactionScore).toBe(5);
        });
        it('should track recommendation funnel progression', async () => {
            const client = testClients[1];
            // Create multiple match histories for different therapists with different outcomes
            const matches = [
                {
                    therapistId: testTherapists[0].therapist.userId,
                    rank: 1,
                    wasViewed: true,
                    wasContacted: true,
                    becameClient: true,
                    sessions: 5,
                    satisfaction: 5,
                },
                {
                    therapistId: testTherapists[1].therapist.userId,
                    rank: 2,
                    wasViewed: true,
                    wasContacted: false,
                    becameClient: false,
                    sessions: 0,
                    satisfaction: null,
                },
                {
                    therapistId: testTherapists[2].therapist.userId,
                    rank: 3,
                    wasViewed: false,
                    wasContacted: false,
                    becameClient: false,
                    sessions: 0,
                    satisfaction: null,
                },
            ];
            for (const match of matches) {
                await prisma.matchHistory.create({
                    data: {
                        clientId: client.client.userId,
                        therapistId: match.therapistId,
                        totalScore: 85 - (match.rank * 5),
                        conditionScore: 90 - (match.rank * 3),
                        approachScore: 80 - (match.rank * 2),
                        experienceScore: 85 - (match.rank * 2),
                        reviewScore: 85 - (match.rank * 3),
                        logisticsScore: 75,
                        primaryMatches: ['Depression'],
                        secondaryMatches: ['Anxiety'],
                        approachMatches: ['CBT'],
                        recommendationRank: match.rank,
                        totalRecommendations: 3,
                        wasViewed: match.wasViewed,
                        wasContacted: match.wasContacted,
                        becameClient: match.becameClient,
                        sessionCount: match.sessions,
                        clientSatisfactionScore: match.satisfaction,
                        recommendationAlgorithm: 'advanced',
                    },
                });
            }
            // Analyze funnel metrics
            const clientMatches = await prisma.matchHistory.findMany({
                where: { clientId: client.client.userId },
                orderBy: { recommendationRank: 'asc' },
            });
            const viewedCount = clientMatches.filter(m => m.wasViewed).length;
            const contactedCount = clientMatches.filter(m => m.wasContacted).length;
            const convertedCount = clientMatches.filter(m => m.becameClient).length;
            expect(clientMatches).toHaveLength(3);
            expect(viewedCount).toBe(2); // 67% view rate
            expect(contactedCount).toBe(1); // 50% contact rate from viewed
            expect(convertedCount).toBe(1); // 100% conversion rate from contacted
        });
    });
    describe('Client Compatibility Analysis', () => {
        it('should create detailed compatibility assessments', async () => {
            const client = testClients[0];
            const therapist = testTherapists[0];
            // Create compatibility assessment
            const compatibility = await prisma.clientCompatibility.create({
                data: {
                    clientId: client.client.userId,
                    therapistId: therapist.therapist.userId,
                    personalityCompatibility: 85,
                    sessionCompatibility: 90,
                    demographicCompatibility: 75,
                    overallCompatibility: 83,
                    communicationStyleScore: 88,
                    personalityMatchScore: 82,
                    culturalCompatibilityScore: 78,
                    formatMatchScore: 95,
                    durationMatchScore: 85,
                    frequencyMatchScore: 80,
                    schedulingCompatibilityScore: 70,
                    ageCompatibilityScore: 85,
                    genderCompatibilityScore: 90,
                    languageCompatibilityScore: 100,
                    strengths: [
                        'Excellent communication style match',
                        'Strong therapeutic approach alignment',
                        'Compatible session preferences',
                    ],
                    concerns: [
                        'Slight scheduling conflicts',
                        'Geographic distance considerations',
                    ],
                    recommendations: [
                        'Schedule sessions during mutually available times',
                        'Consider video sessions to overcome distance',
                        'Focus on CBT techniques given strong alignment',
                    ],
                    analysisVersion: '2.1',
                },
            });
            // Verify compatibility assessment
            const createdCompatibility = await prisma.clientCompatibility.findUnique({
                where: { id: compatibility.id },
                include: {
                    client: {
                        include: {
                            user: true,
                        },
                    },
                    therapist: {
                        include: {
                            user: true,
                        },
                    },
                },
            });
            expect(createdCompatibility?.overallCompatibility).toBe(83);
            expect(createdCompatibility?.strengths).toHaveLength(3);
            expect(createdCompatibility?.concerns).toHaveLength(2);
            expect(createdCompatibility?.recommendations).toHaveLength(3);
            expect(createdCompatibility?.languageCompatibilityScore).toBe(100);
        });
        it('should handle compatibility updates and versioning', async () => {
            const client = testClients[1];
            const therapist = testTherapists[1];
            // Create initial compatibility
            const initialCompatibility = await prisma.clientCompatibility.create({
                data: {
                    clientId: client.client.userId,
                    therapistId: therapist.therapist.userId,
                    personalityCompatibility: 70,
                    sessionCompatibility: 75,
                    demographicCompatibility: 80,
                    overallCompatibility: 75,
                    communicationStyleScore: 72,
                    personalityMatchScore: 68,
                    culturalCompatibilityScore: 85,
                    formatMatchScore: 80,
                    durationMatchScore: 70,
                    frequencyMatchScore: 75,
                    schedulingCompatibilityScore: 65,
                    ageCompatibilityScore: 90,
                    genderCompatibilityScore: 85,
                    languageCompatibilityScore: 90,
                    strengths: ['Good demographic match'],
                    concerns: ['Some communication style differences'],
                    recommendations: ['Consider communication preferences'],
                    analysisVersion: '1.0',
                },
            });
            // Update compatibility with new analysis
            const updatedCompatibility = await prisma.clientCompatibility.update({
                where: { id: initialCompatibility.id },
                data: {
                    personalityCompatibility: 78,
                    sessionCompatibility: 82,
                    overallCompatibility: 80,
                    communicationStyleScore: 80,
                    personalityMatchScore: 76,
                    strengths: [
                        'Good demographic match',
                        'Improved communication alignment after assessment',
                    ],
                    concerns: ['Minor scheduling conflicts remain'],
                    recommendations: [
                        'Focus on building rapport early',
                        'Flexible scheduling arrangements',
                    ],
                    analysisVersion: '1.1',
                },
            });
            expect(updatedCompatibility.overallCompatibility).toBe(80);
            expect(updatedCompatibility.analysisVersion).toBe('1.1');
            expect(updatedCompatibility.strengths).toHaveLength(2);
        });
    });
    describe('Recommendation Feedback Loop', () => {
        it('should track comprehensive recommendation feedback', async () => {
            const client = testClients[0];
            const therapist = testTherapists[0];
            // Create match history first
            const matchHistory = await prisma.matchHistory.create({
                data: {
                    clientId: client.client.userId,
                    therapistId: therapist.therapist.userId,
                    totalScore: 88,
                    conditionScore: 90,
                    approachScore: 85,
                    experienceScore: 90,
                    reviewScore: 85,
                    logisticsScore: 80,
                    primaryMatches: ['Anxiety'],
                    secondaryMatches: ['Depression'],
                    approachMatches: ['CBT'],
                    recommendationRank: 1,
                    totalRecommendations: 3,
                    wasViewed: true,
                    wasContacted: true,
                    becameClient: true,
                    recommendationAlgorithm: 'advanced',
                },
            });
            // Create feedback
            const feedback = await prisma.recommendationFeedback.create({
                data: {
                    clientId: client.client.userId,
                    therapistId: therapist.therapist.userId,
                    matchHistoryId: matchHistory.id,
                    relevanceScore: 5,
                    accuracyScore: 4,
                    helpfulnessScore: 5,
                    feedbackText: 'Excellent match! The therapist\'s specialization in anxiety perfectly matched my needs.',
                    selectedTherapist: true,
                    hadInitialSession: true,
                    continuedTherapy: true,
                    overallSatisfaction: 5,
                },
            });
            // Verify feedback creation
            const createdFeedback = await prisma.recommendationFeedback.findUnique({
                where: { id: feedback.id },
                include: {
                    client: {
                        include: {
                            user: true,
                        },
                    },
                    therapist: {
                        include: {
                            user: true,
                        },
                    },
                    matchHistory: true,
                },
            });
            expect(createdFeedback?.relevanceScore).toBe(5);
            expect(createdFeedback?.selectedTherapist).toBe(true);
            expect(createdFeedback?.continuedTherapy).toBe(true);
            expect(createdFeedback?.matchHistory?.totalScore).toBe(88);
        });
        it('should handle negative feedback scenarios', async () => {
            const client = testClients[1];
            const therapist = testTherapists[1];
            // Create match history for unsuccessful match
            const matchHistory = await prisma.matchHistory.create({
                data: {
                    clientId: client.client.userId,
                    therapistId: therapist.therapist.userId,
                    totalScore: 72,
                    conditionScore: 75,
                    approachScore: 70,
                    experienceScore: 75,
                    reviewScore: 68,
                    logisticsScore: 70,
                    primaryMatches: ['ADHD'],
                    secondaryMatches: [],
                    approachMatches: ['Psychodynamic'],
                    recommendationRank: 2,
                    totalRecommendations: 5,
                    wasViewed: true,
                    wasContacted: true,
                    becameClient: false,
                    recommendationAlgorithm: 'basic',
                },
            });
            // Create negative feedback
            const feedback = await prisma.recommendationFeedback.create({
                data: {
                    clientId: client.client.userId,
                    therapistId: therapist.therapist.userId,
                    matchHistoryId: matchHistory.id,
                    relevanceScore: 2,
                    accuracyScore: 2,
                    helpfulnessScore: 1,
                    feedbackText: 'The recommendation did not match my needs. The therapeutic approach was not suitable for my condition.',
                    selectedTherapist: false,
                    reasonNotSelected: 'Therapeutic approach mismatch and poor initial consultation experience',
                    hadInitialSession: true,
                    continuedTherapy: false,
                    overallSatisfaction: 2,
                },
            });
            expect(feedback.relevanceScore).toBe(2);
            expect(feedback.selectedTherapist).toBe(false);
            expect(feedback.reasonNotSelected).toContain('approach mismatch');
            expect(feedback.continuedTherapy).toBe(false);
        });
    });
    describe('Algorithm Performance Tracking', () => {
        it('should track algorithm performance metrics', async () => {
            // Create performance record for advanced algorithm
            const performance = await prisma.algorithmPerformance.create({
                data: {
                    algorithmName: 'advanced_ml',
                    version: '2.1',
                    totalRecommendations: 500,
                    successfulMatches: 185,
                    averageMatchScore: 82.5,
                    averageSatisfactionScore: 4.2,
                    periodStart: new Date('2024-01-01'),
                    periodEnd: new Date('2024-01-31'),
                    clickThroughRate: 0.75, // 75% viewed recommendations
                    conversionRate: 0.37, // 37% became clients
                    retentionRate: 0.82, // 82% continued therapy
                },
            });
            // Create performance record for basic algorithm
            const basicPerformance = await prisma.algorithmPerformance.create({
                data: {
                    algorithmName: 'basic_scoring',
                    version: '1.0',
                    totalRecommendations: 300,
                    successfulMatches: 90,
                    averageMatchScore: 68.5,
                    averageSatisfactionScore: 3.8,
                    periodStart: new Date('2024-01-01'),
                    periodEnd: new Date('2024-01-31'),
                    clickThroughRate: 0.60,
                    conversionRate: 0.30,
                    retentionRate: 0.70,
                },
            });
            // Compare algorithm performance
            const algorithms = await prisma.algorithmPerformance.findMany({
                where: {
                    periodStart: new Date('2024-01-01'),
                    periodEnd: new Date('2024-01-31'),
                },
                orderBy: {
                    conversionRate: 'desc',
                },
            });
            expect(algorithms).toHaveLength(2);
            expect(algorithms[0].algorithmName).toBe('advanced_ml');
            expect(algorithms[0].conversionRate).toBeGreaterThan(algorithms[1].conversionRate);
            expect(algorithms[0].averageSatisfactionScore).toBeGreaterThan(algorithms[1].averageSatisfactionScore);
        });
        it('should track performance trends over time', async () => {
            const algorithmName = 'ml_enhanced';
            const periods = [
                {
                    start: new Date('2024-01-01'),
                    end: new Date('2024-01-31'),
                    conversion: 0.32,
                    satisfaction: 3.9,
                },
                {
                    start: new Date('2024-02-01'),
                    end: new Date('2024-02-29'),
                    conversion: 0.35,
                    satisfaction: 4.1,
                },
                {
                    start: new Date('2024-03-01'),
                    end: new Date('2024-03-31'),
                    conversion: 0.38,
                    satisfaction: 4.3,
                },
            ];
            // Create performance records for each period
            for (const [index, period] of periods.entries()) {
                await prisma.algorithmPerformance.create({
                    data: {
                        algorithmName,
                        version: '1.5',
                        totalRecommendations: 400 + (index * 50),
                        successfulMatches: Math.round((400 + (index * 50)) * period.conversion),
                        averageMatchScore: 75.0 + (index * 2),
                        averageSatisfactionScore: period.satisfaction,
                        periodStart: period.start,
                        periodEnd: period.end,
                        clickThroughRate: 0.70 + (index * 0.02),
                        conversionRate: period.conversion,
                        retentionRate: 0.75 + (index * 0.03),
                    },
                });
            }
            // Analyze performance trends
            const performanceTrend = await prisma.algorithmPerformance.findMany({
                where: { algorithmName },
                orderBy: { periodStart: 'asc' },
            });
            expect(performanceTrend).toHaveLength(3);
            expect(performanceTrend[2].conversionRate).toBeGreaterThan(performanceTrend[0].conversionRate);
            expect(performanceTrend[2].averageSatisfactionScore).toBeGreaterThan(performanceTrend[0].averageSatisfactionScore);
        });
    });
    describe('Complete Analytics Workflow', () => {
        it('should demonstrate end-to-end analytics flow', async () => {
            const client = testClients[2];
            const therapist = testTherapists[2];
            // 1. Setup matching weights
            await prisma.matchingWeight.createMany({
                data: [
                    { name: 'conditionMatch', weight: 0.35, isActive: true },
                    { name: 'approachCompatibility', weight: 0.30, isActive: true },
                    { name: 'experienceLevel', weight: 0.20, isActive: true },
                    { name: 'logisticsMatch', weight: 0.15, isActive: true },
                ],
            });
            // 2. Create compatibility analysis
            const compatibility = await prisma.clientCompatibility.create({
                data: {
                    clientId: client.client.userId,
                    therapistId: therapist.therapist.userId,
                    personalityCompatibility: 92,
                    sessionCompatibility: 88,
                    demographicCompatibility: 85,
                    overallCompatibility: 88,
                    communicationStyleScore: 90,
                    personalityMatchScore: 94,
                    culturalCompatibilityScore: 82,
                    formatMatchScore: 90,
                    durationMatchScore: 85,
                    frequencyMatchScore: 88,
                    schedulingCompatibilityScore: 85,
                    ageCompatibilityScore: 80,
                    genderCompatibilityScore: 95,
                    languageCompatibilityScore: 100,
                    strengths: [
                        'Exceptional personality compatibility',
                        'Strong therapeutic approach alignment',
                        'Excellent communication style match',
                    ],
                    concerns: [
                        'Minor cultural adaptation needed',
                    ],
                    recommendations: [
                        'Leverage strong personality match',
                        'Focus on trauma-informed approaches',
                        'Maintain consistent session schedule',
                    ],
                    analysisVersion: '3.0',
                },
            });
            // 3. Create match history
            const matchHistory = await prisma.matchHistory.create({
                data: {
                    clientId: client.client.userId,
                    therapistId: therapist.therapist.userId,
                    totalScore: 92,
                    conditionScore: 95,
                    approachScore: 90,
                    experienceScore: 88,
                    reviewScore: 92,
                    logisticsScore: 85,
                    compatibilityScore: compatibility.overallCompatibility,
                    primaryMatches: ['Trauma', 'PTSD'],
                    secondaryMatches: ['Anxiety', 'Depression'],
                    approachMatches: ['EMDR', 'Trauma-Informed CBT'],
                    recommendationRank: 1,
                    totalRecommendations: 4,
                    wasViewed: true,
                    wasContacted: true,
                    becameClient: true,
                    sessionCount: 8,
                    clientSatisfactionScore: 5,
                    recommendationAlgorithm: 'ml_enhanced',
                    userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)',
                },
            });
            // 4. Create positive feedback
            const feedback = await prisma.recommendationFeedback.create({
                data: {
                    clientId: client.client.userId,
                    therapistId: therapist.therapist.userId,
                    matchHistoryId: matchHistory.id,
                    relevanceScore: 5,
                    accuracyScore: 5,
                    helpfulnessScore: 5,
                    feedbackText: 'Outstanding match! The therapist\'s expertise in trauma therapy and EMDR has been transformative for my healing journey.',
                    selectedTherapist: true,
                    hadInitialSession: true,
                    continuedTherapy: true,
                    overallSatisfaction: 5,
                },
            });
            // 5. Update algorithm performance
            const algorithmPerformance = await prisma.algorithmPerformance.create({
                data: {
                    algorithmName: 'ml_enhanced',
                    version: '3.0',
                    totalRecommendations: 100,
                    successfulMatches: 42,
                    averageMatchScore: 86.5,
                    averageSatisfactionScore: 4.4,
                    periodStart: new Date('2024-03-01'),
                    periodEnd: new Date('2024-03-31'),
                    clickThroughRate: 0.82,
                    conversionRate: 0.42,
                    retentionRate: 0.88,
                },
            });
            // 6. Verify complete analytics workflow
            const completeAnalytics = await prisma.matchHistory.findUnique({
                where: { id: matchHistory.id },
                include: {
                    client: {
                        include: {
                            user: true,
                        },
                    },
                    therapist: {
                        include: {
                            user: true,
                        },
                    },
                    feedback: {
                        include: {
                            client: true,
                            therapist: true,
                        },
                    },
                },
            });
            const relatedCompatibility = await prisma.clientCompatibility.findUnique({
                where: {
                    clientId_therapistId: {
                        clientId: client.client.userId,
                        therapistId: therapist.therapist.userId,
                    },
                },
            });
            const weights = await prisma.matchingWeight.findMany({
                where: { isActive: true },
            });
            const performance = await prisma.algorithmPerformance.findUnique({
                where: { id: algorithmPerformance.id },
            });
            // Comprehensive assertions
            expect(completeAnalytics?.totalScore).toBe(92);
            expect(completeAnalytics?.becameClient).toBe(true);
            expect(completeAnalytics?.feedback).toHaveLength(1);
            expect(completeAnalytics?.feedback[0].overallSatisfaction).toBe(5);
            expect(relatedCompatibility?.overallCompatibility).toBe(88);
            expect(weights.reduce((sum, w) => sum + w.weight, 0)).toBeCloseTo(1.0);
            expect(performance?.conversionRate).toBe(0.42);
            expect(performance?.retentionRate).toBe(0.88);
            console.log('âœ… Complete Analytics Workflow Verified:');
            console.log(`   Match Score: ${completeAnalytics?.totalScore}/100`);
            console.log(`   Compatibility: ${relatedCompatibility?.overallCompatibility}/100`);
            console.log(`   Client Satisfaction: ${completeAnalytics?.feedback[0].overallSatisfaction}/5`);
            console.log(`   Algorithm Performance: ${(performance?.conversionRate * 100).toFixed(1)}% conversion`);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL3Rlc3QtdXRpbHMvaW50ZWdyYXRpb24tdGVzdHMvbWF0Y2hpbmctYW5hbHl0aWNzLmludGVncmF0aW9uLnNwZWMudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSw2Q0FBc0Q7QUFFdEQsbUZBQXVFO0FBQ3ZFLGdFQUEyRDtBQUMzRCxvRUFBNkQ7QUFFN0Q7Ozs7O0dBS0c7QUFDSCxRQUFRLENBQUMsZ0NBQWdDLEVBQUUsR0FBRyxFQUFFO0lBQzlDLElBQUksR0FBcUIsQ0FBQztJQUMxQixJQUFJLE1BQXFCLENBQUM7SUFDMUIsSUFBSSxTQUF3QixDQUFDO0lBRTdCLGdCQUFnQjtJQUNoQixJQUFJLFdBQVcsR0FBVSxFQUFFLENBQUM7SUFDNUIsSUFBSSxjQUFjLEdBQVUsRUFBRSxDQUFDO0lBRS9CLFNBQVMsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNuQixzQkFBc0I7UUFDdEIsTUFBTSxHQUFHLE1BQU0sdUNBQWlCLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUVyRCxTQUFTLEdBQUcsTUFBTSxjQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDekMsU0FBUyxFQUFFO2dCQUNUO29CQUNFLE9BQU8sRUFBRSxzQ0FBYTtvQkFDdEIsUUFBUSxFQUFFLE1BQU07aUJBQ2pCO2FBQ0Y7U0FDRixDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFFYixHQUFHLEdBQUcsU0FBUyxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDeEMsTUFBTSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFakIsaUNBQWlDO1FBQ2pDLE1BQU0sYUFBYSxFQUFFLENBQUM7SUFDeEIsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbkIsc0NBQXNDO1FBQ3RDLE1BQU0sa0JBQWtCLEVBQUUsQ0FBQztJQUM3QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxLQUFLLElBQUksRUFB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QixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzVELE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDdkUsTUFBTSxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDL0MsTUFBTSxDQUFDLFdBQVcsRUFBRSxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFOUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO1lBQ3ZELE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLGlCQUFpQixFQUFFLFVBQVUsTUFBTSxDQUFDLENBQUM7WUFDcEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsb0JBQW9CLEVBQUUsb0JBQW9CLE1BQU0sQ0FBQyxDQUFDO1lBQ25GLE9BQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLGlCQUFpQixFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsSUFBSSxDQUFDLENBQUM7WUFDL0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsQ0FBQyxXQUFXLEVBQUUsY0FBZSxHQUFHLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDMUcsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy90ZXN0LXV0aWxzL2ludGVncmF0aW9uLXRlc3RzL21hdGNoaW5nLWFuYWx5dGljcy5pbnRlZ3JhdGlvbi5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgSU5lc3RBcHBsaWNhdGlvbiB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IFByaXNtYVNlcnZpY2UgfSBmcm9tICcuLi8uLi9wcm92aWRlcnMvcHJpc21hLWNsaWVudC5wcm92aWRlcic7XG5pbXBvcnQgeyBEYXRhYmFzZVRlc3RTZXR1cCB9IGZyb20gJy4uL2RhdGFiYXNlLXRlc3Quc2V0dXAnO1xuaW1wb3J0IHsgVGVzdERhdGFHZW5lcmF0b3IgfSBmcm9tICcuLi9lbmhhbmNlZC10ZXN0LWhlbHBlcnMnO1xuXG4vKipcbiAqIE1hdGNoaW5nIEFuYWx5dGljcyBJbnRlZ3JhdGlvbiBUZXN0c1xuICogXG4gKiBDb21wcmVoZW5zaXZlIHRlc3Rpbmcgb2YgdGhlIEFJL01MIG1hdGNoaW5nIGFuYWx5dGljcyBzeXN0ZW0gaW5jbHVkaW5nXG4gKiBtYXRjaCBoaXN0b3J5LCBjbGllbnQgY29tcGF0aWJpbGl0eSwgcmVjb21tZW5kYXRpb24gZmVlZGJhY2ssIGFuZCBhbGdvcml0aG0gcGVyZm9ybWFuY2UgdHJhY2tpbmcuXG4gKi9cbmRlc2NyaWJlKCdNYXRjaGluZyBBbmFseXRpY3MgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gIGxldCBhcHA6IElOZXN0QXBwbGljYXRpb247XG4gIGxldCBwcmlzbWE6IFByaXNtYVNlcnZpY2U7XG4gIGxldCBtb2R1bGVSZWY6IFRlc3RpbmdNb2R1bGU7XG5cbiAgLy8gVGVzdCBlbnRpdGllc1xuICBsZXQgdGVzdENsaWVudHM6IGFueVtdID0gW107XG4gIGxldCB0ZXN0VGhlcmFwaXN0czogYW55W10gPSBbXTtcblxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIC8vIFNldHVwIHRlc3QgZGF0YWJhc2VcbiAgICBwcmlzbWEgPSBhd2FpdCBEYXRhYmFzZVRlc3RTZXR1cC5zZXR1cFRlc3REYXRhYmFzZSgpO1xuXG4gICAgbW9kdWxlUmVmID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogUHJpc21hU2VydmljZSxcbiAgICAgICAgICB1c2VWYWx1ZTogcHJpc21hLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KS5jb21waWxlKCk7XG5cbiAgICBhcHAgPSBtb2R1bGVSZWYuY3JlYXRlTmVzdEFwcGxpY2F0aW9uKCk7XG4gICAgYXdhaXQgYXBwLmluaXQoKTtcblxuICAgIC8vIENyZWF0ZSB0ZXN0IHVzZXJzIGFuZCBwcm9maWxlc1xuICAgIGF3YWl0IHNldHVwVGVzdERhdGEoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICAvLyBDbGVhbiBhbmFseXRpY3MgZGF0YSBidXQga2VlcCB1c2Vyc1xuICAgIGF3YWl0IGNsZWFuQW5hbHl0aWNzRGF0YSgpO1xuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgRGF0YWJhc2VUZXN0U2V0dXAuc3RvcENvbnRhaW5lcigpO1xuICAgIGF3YWl0IGFwcC5jbG9zZSgpO1xuICAgIGF3YWl0IG1vZHVsZVJlZi5jbG9zZSgpO1xuICB9KTtcblxuICBhc3luYyBmdW5jdGlvbiBzZXR1cFRlc3REYXRhKCkge1xuICAgIC8vIENyZWF0ZSB0ZXN0IGNsaWVudHNcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAzOyBpKyspIHtcbiAgICAgIGNvbnN0IGNsaWVudFVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xuICAgICAgICBkYXRhOiBUZXN0RGF0YUdlbmVyYXRvci5jcmVhdGVVc2VyKHtcbiAgICAgICAgICBpZDogYGFuYWx5dGljcy1jbGllbnQtJHtpfWAsXG4gICAgICAgICAgZW1haWw6IGBjbGllbnQke2l9QGFuYWx5dGljcy5jb21gLFxuICAgICAgICAgIGZpcnN0TmFtZTogYENsaWVudCR7aX1gLFxuICAgICAgICAgIGxhc3ROYW1lOiAnVXNlcicsXG4gICAgICAgICAgcm9sZTogJ2NsaWVudCcsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHByaXNtYS5jbGllbnQuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVzZXJJZDogY2xpZW50VXNlci5pZCxcbiAgICAgICAgICBoYXNTZWVuVGhlcmFwaXN0UmVjb21tZW5kYXRpb25zOiBpID4gMSwgLy8gRmlyc3QgY2xpZW50IGhhc24ndCBzZWVuIHJlY29tbWVuZGF0aW9ucyB5ZXRcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0Q2xpZW50cy5wdXNoKHsgdXNlcjogY2xpZW50VXNlciwgY2xpZW50IH0pO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0ZXN0IHRoZXJhcGlzdHNcbiAgICBjb25zdCBzcGVjaWFsaXphdGlvbnMgPSBbXG4gICAgICBbJ0FueGlldHknLCAnRGVwcmVzc2lvbicsICdQVFNEJ10sXG4gICAgICBbJ0FESEQnLCAnQmlwb2xhcicsICdFYXRpbmcgRGlzb3JkZXJzJ10sXG4gICAgICBbJ0FkZGljdGlvbicsICdUcmF1bWEnLCAnR3JpZWYnXSxcbiAgICBdO1xuXG4gICAgY29uc3QgYXBwcm9hY2hlcyA9IFtcbiAgICAgIFsnQ0JUJywgJ0RCVCcsICdBQ1QnXSxcbiAgICAgIFsnUHN5Y2hvZHluYW1pYycsICdIdW1hbmlzdGljJywgJ1NvbHV0aW9uLUZvY3VzZWQnXSxcbiAgICAgIFsnRU1EUicsICdOYXJyYXRpdmUgVGhlcmFweScsICdGYW1pbHkgU3lzdGVtcyddLFxuICAgIF07XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAzOyBpKyspIHtcbiAgICAgIGNvbnN0IHRoZXJhcGlzdFVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xuICAgICAgICBkYXRhOiBUZXN0RGF0YUdlbmVyYXRvci5jcmVhdGVVc2VyKHtcbiAgICAgICAgICBpZDogYGFuYWx5dGljcy10aGVyYXBpc3QtJHtpfWAsXG4gICAgICAgICAgZW1haWw6IGB0aGVyYXBpc3Qke2l9QGFuYWx5dGljcy5jb21gLFxuICAgICAgICAgIGZpcnN0TmFtZTogYERyLiBUaGVyYXBpc3Qke2l9YCxcbiAgICAgICAgICBsYXN0TmFtZTogJ1Byb2Zlc3Npb25hbCcsXG4gICAgICAgICAgcm9sZTogJ3RoZXJhcGlzdCcsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRoZXJhcGlzdCA9IGF3YWl0IHByaXNtYS50aGVyYXBpc3QuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVzZXJJZDogdGhlcmFwaXN0VXNlci5pZCxcbiAgICAgICAgICBtb2JpbGU6IGArMTIzNDU2Nzg5JHtpfWAsXG4gICAgICAgICAgcHJvdmluY2U6ICdPbnRhcmlvJyxcbiAgICAgICAgICBwcm92aWRlclR5cGU6ICdDbGluaWNhbCBQc3ljaG9sb2dpc3QnLFxuICAgICAgICAgIHByb2Zlc3Npb25hbExpY2Vuc2VUeXBlOiAnTGljZW5zZWQnLFxuICAgICAgICAgIGlzUFJDTGljZW5zZWQ6ICd5ZXMnLFxuICAgICAgICAgIHByY0xpY2Vuc2VOdW1iZXI6IGBQUkMxMjM0NSR7aX1gLFxuICAgICAgICAgIHByYWN0aWNlU3RhcnREYXRlOiBuZXcgRGF0ZSgnMjAyMC0wMS0wMScpLFxuICAgICAgICAgIHllYXJzT2ZFeHBlcmllbmNlOiA1ICsgaSxcbiAgICAgICAgICBhcmVhc09mRXhwZXJ0aXNlOiBzcGVjaWFsaXphdGlvbnNbaSAtIDFdLFxuICAgICAgICAgIGFzc2Vzc21lbnRUb29sczogWydQSFEtOScsICdHQUQtNycsICdQQ0wtNSddLnNsaWNlKDAsIGkgKyAxKSxcbiAgICAgICAgICB0aGVyYXBldXRpY0FwcHJvYWNoZXNVc2VkTGlzdDogYXBwcm9hY2hlc1tpIC0gMV0sXG4gICAgICAgICAgbGFuZ3VhZ2VzT2ZmZXJlZDogWydFbmdsaXNoJywgJ0ZyZW5jaCddLnNsaWNlKDAsIGkpLFxuICAgICAgICAgIHByb3ZpZGVkT25saW5lVGhlcmFweUJlZm9yZTogdHJ1ZSxcbiAgICAgICAgICBjb21mb3J0YWJsZVVzaW5nVmlkZW9Db25mZXJlbmNpbmc6IHRydWUsXG4gICAgICAgICAgcHJlZmVycmVkU2Vzc2lvbkxlbmd0aDogWzYwLCA5MF0uc2xpY2UoMCwgaSksXG4gICAgICAgICAgYWNjZXB0VHlwZXM6IFsnSW5kaXZpZHVhbCcsICdDb3VwbGVzJywgJ0ZhbWlseSddLnNsaWNlKDAsIGkgKyAxKSxcbiAgICAgICAgICBzdGF0dXM6ICdhcHByb3ZlZCcsXG4gICAgICAgICAgaG91cmx5UmF0ZTogMTAwICsgKGkgKiAyNSksXG4gICAgICAgICAgZXhwaXJhdGlvbkRhdGVPZkxpY2Vuc2U6IG5ldyBEYXRlKCcyMDI1LTAxLTAxJyksXG4gICAgICAgICAgY29tcGxpZXNXaXRoRGF0YVByaXZhY3lBY3Q6IHRydWUsXG4gICAgICAgICAgd2lsbGluZ1RvQWJpZGVCeVBsYXRmb3JtR3VpZGVsaW5lczogdHJ1ZSxcbiAgICAgICAgICB0cmVhdG1lbnRTdWNjZXNzUmF0ZXM6IHtcbiAgICAgICAgICAgIGFueGlldHk6IDAuODUgKyAoaSAqIDAuMDUpLFxuICAgICAgICAgICAgZGVwcmVzc2lvbjogMC44MCArIChpICogMC4wMyksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXNzaW9uTGVuZ3RoOiAnNjAgbWludXRlcycsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgdGVzdFRoZXJhcGlzdHMucHVzaCh7IHVzZXI6IHRoZXJhcGlzdFVzZXIsIHRoZXJhcGlzdCB9KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBjbGVhbkFuYWx5dGljc0RhdGEoKSB7XG4gICAgYXdhaXQgcHJpc21hLnJlY29tbWVuZGF0aW9uRmVlZGJhY2suZGVsZXRlTWFueSgpO1xuICAgIGF3YWl0IHByaXNtYS5hbGdvcml0aG1QZXJmb3JtYW5jZS5kZWxldGVNYW55KCk7XG4gICAgYXdhaXQgcHJpc21hLmNsaWVudENvbXBhdGliaWxpdHkuZGVsZXRlTWFueSgpO1xuICAgIGF3YWl0IHByaXNtYS5tYXRjaEhpc3RvcnkuZGVsZXRlTWFueSgpO1xuICAgIGF3YWl0IHByaXNtYS5tYXRjaGluZ1dlaWdodC5kZWxldGVNYW55KCk7XG4gIH1cblxuICBkZXNjcmliZSgnTWF0Y2hpbmcgV2VpZ2h0IENvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYW5kIG1hbmFnZSBtYXRjaGluZyB3ZWlnaHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIG1hdGNoaW5nIHdlaWdodHNcbiAgICAgIGNvbnN0IHdlaWdodHMgPSBhd2FpdCBwcmlzbWEubWF0Y2hpbmdXZWlnaHQuY3JlYXRlTWFueSh7XG4gICAgICAgIGRhdGE6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnY29uZGl0aW9uTWF0Y2gnLFxuICAgICAgICAgICAgd2VpZ2h0OiAwLjMwLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdIb3cgd2VsbCB0aGVyYXBpc3Qgc3BlY2lhbGl6YXRpb25zIG1hdGNoIGNsaWVudCBjb25kaXRpb25zJyxcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2FwcHJvYWNoQ29tcGF0aWJpbGl0eScsXG4gICAgICAgICAgICB3ZWlnaHQ6IDAuMjUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NvbXBhdGliaWxpdHkgb2YgdGhlcmFwZXV0aWMgYXBwcm9hY2hlcyB3aXRoIGNsaWVudCBwcmVmZXJlbmNlcycsXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdleHBlcmllbmNlTGV2ZWwnLFxuICAgICAgICAgICAgd2VpZ2h0OiAwLjIwLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGVyYXBpc3QgZXhwZXJpZW5jZSBsZXZlbCBhbmQgdHJhY2sgcmVjb3JkJyxcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2xvZ2lzdGljc01hdGNoJyxcbiAgICAgICAgICAgIHdlaWdodDogMC4xNSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU2NoZWR1bGUsIGxvY2F0aW9uLCBhbmQgc2Vzc2lvbiBmb3JtYXQgY29tcGF0aWJpbGl0eScsXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdyZXZpZXdTY29yZScsXG4gICAgICAgICAgICB3ZWlnaHQ6IDAuMTAsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZXJhcGlzdCBhdmVyYWdlIHJhdGluZyBhbmQgcmV2aWV3cycsXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSB3ZWlnaHRzIGNyZWF0ZWRcbiAgICAgIGNvbnN0IGNyZWF0ZWRXZWlnaHRzID0gYXdhaXQgcHJpc21hLm1hdGNoaW5nV2VpZ2h0LmZpbmRNYW55KHtcbiAgICAgICAgb3JkZXJCeTogeyB3ZWlnaHQ6ICdkZXNjJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjcmVhdGVkV2VpZ2h0cykudG9IYXZlTGVuZ3RoKDUpO1xuICAgICAgZXhwZWN0KGNyZWF0ZWRXZWlnaHRzWzBdLm5hbWUpLnRvQmUoJ2NvbmRpdGlvbk1hdGNoJyk7XG4gICAgICBleHBlY3QoY3JlYXRlZFdlaWdodHNbMF0ud2VpZ2h0KS50b0JlKDAuMzApO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgdG90YWwgd2VpZ2h0cyBzdW0gdG8gMS4wXG4gICAgICBjb25zdCB0b3RhbFdlaWdodCA9IGNyZWF0ZWRXZWlnaHRzLnJlZHVjZSgoc3VtLCB3KSA9PiBzdW0gKyB3LndlaWdodCwgMCk7XG4gICAgICBleHBlY3QodG90YWxXZWlnaHQpLnRvQmVDbG9zZVRvKDEuMCwgMik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB3ZWlnaHQgdXBkYXRlcyBhbmQgZGVhY3RpdmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGluaXRpYWwgd2VpZ2h0XG4gICAgICBjb25zdCB3ZWlnaHQgPSBhd2FpdCBwcmlzbWEubWF0Y2hpbmdXZWlnaHQuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWU6ICdwZXJzb25hbGl0eU1hdGNoJyxcbiAgICAgICAgICB3ZWlnaHQ6IDAuMTUsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdQZXJzb25hbGl0eSBjb21wYXRpYmlsaXR5IGFzc2Vzc21lbnQnLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB3ZWlnaHQgdmFsdWVcbiAgICAgIGNvbnN0IHVwZGF0ZWRXZWlnaHQgPSBhd2FpdCBwcmlzbWEubWF0Y2hpbmdXZWlnaHQudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHdlaWdodC5pZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgd2VpZ2h0OiAwLjE4LFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRW5oYW5jZWQgcGVyc29uYWxpdHkgY29tcGF0aWJpbGl0eSBhc3Nlc3NtZW50JyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBEZWFjdGl2YXRlIHdlaWdodFxuICAgICAgYXdhaXQgcHJpc21hLm1hdGNoaW5nV2VpZ2h0LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB3ZWlnaHQuaWQgfSxcbiAgICAgICAgZGF0YTogeyBpc0FjdGl2ZTogZmFsc2UgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBWZXJpZnkgY2hhbmdlc1xuICAgICAgY29uc3QgZmluYWxXZWlnaHQgPSBhd2FpdCBwcmlzbWEubWF0Y2hpbmdXZWlnaHQuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB3ZWlnaHQuaWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoZmluYWxXZWlnaHQ/LndlaWdodCkudG9CZSgwLjE4KTtcbiAgICAgIGV4cGVjdChmaW5hbFdlaWdodD8uaXNBY3RpdmUpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGZpbmFsV2VpZ2h0Py5kZXNjcmlwdGlvbikudG9Db250YWluKCdFbmhhbmNlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTWF0Y2ggSGlzdG9yeSBDcmVhdGlvbiBhbmQgVHJhY2tpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgY29tcHJlaGVuc2l2ZSBtYXRjaCBoaXN0b3J5IHJlY29yZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjbGllbnQgPSB0ZXN0Q2xpZW50c1swXTtcbiAgICAgIGNvbnN0IHRoZXJhcGlzdCA9IHRlc3RUaGVyYXBpc3RzWzBdO1xuXG4gICAgICAvLyBDcmVhdGUgbWF0Y2ggaGlzdG9yeVxuICAgICAgY29uc3QgbWF0Y2hIaXN0b3J5ID0gYXdhaXQgcHJpc21hLm1hdGNoSGlzdG9yeS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IGNsaWVudC5jbGllbnQudXNlcklkLFxuICAgICAgICAgIHRoZXJhcGlzdElkOiB0aGVyYXBpc3QudGhlcmFwaXN0LnVzZXJJZCxcbiAgICAgICAgICB0b3RhbFNjb3JlOiA4NSxcbiAgICAgICAgICBjb25kaXRpb25TY29yZTogOTAsXG4gICAgICAgICAgYXBwcm9hY2hTY29yZTogODAsXG4gICAgICAgICAgZXhwZXJpZW5jZVNjb3JlOiA4NSxcbiAgICAgICAgICByZXZpZXdTY29yZTogODgsXG4gICAgICAgICAgbG9naXN0aWNzU2NvcmU6IDc1LFxuICAgICAgICAgIGNvbXBhdGliaWxpdHlTY29yZTogODIsXG4gICAgICAgICAgcHJpbWFyeU1hdGNoZXM6IFsnQW54aWV0eScsICdEZXByZXNzaW9uJ10sXG4gICAgICAgICAgc2Vjb25kYXJ5TWF0Y2hlczogWydTdHJlc3MgTWFuYWdlbWVudCddLFxuICAgICAgICAgIGFwcHJvYWNoTWF0Y2hlczogWydDQlQnLCAnREJUJ10sXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25SYW5rOiAxLFxuICAgICAgICAgIHRvdGFsUmVjb21tZW5kYXRpb25zOiA1LFxuICAgICAgICAgIHdhc1ZpZXdlZDogdHJ1ZSxcbiAgICAgICAgICB3YXNDb250YWN0ZWQ6IHRydWUsXG4gICAgICAgICAgYmVjYW1lQ2xpZW50OiB0cnVlLFxuICAgICAgICAgIHNlc3Npb25Db3VudDogMyxcbiAgICAgICAgICBjbGllbnRTYXRpc2ZhY3Rpb25TY29yZTogNSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbkFsZ29yaXRobTogJ2FkdmFuY2VkJyxcbiAgICAgICAgICB1c2VyQWdlbnQ6ICdNb3ppbGxhLzUuMCBDaHJvbWUvMTIwLjAnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBtYXRjaCBoaXN0b3J5IGNyZWF0aW9uXG4gICAgICBjb25zdCBjcmVhdGVkTWF0Y2ggPSBhd2FpdCBwcmlzbWEubWF0Y2hIaXN0b3J5LmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogbWF0Y2hIaXN0b3J5LmlkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBjbGllbnQ6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgdXNlcjogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aGVyYXBpc3Q6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgdXNlcjogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoY3JlYXRlZE1hdGNoPy50b3RhbFNjb3JlKS50b0JlKDg1KTtcbiAgICAgIGV4cGVjdChjcmVhdGVkTWF0Y2g/LnByaW1hcnlNYXRjaGVzKS50b0NvbnRhaW4oJ0FueGlldHknKTtcbiAgICAgIGV4cGVjdChjcmVhdGVkTWF0Y2g/LmFwcHJvYWNoTWF0Y2hlcykudG9Db250YWluKCdDQlQnKTtcbiAgICAgIGV4cGVjdChjcmVhdGVkTWF0Y2g/LnJlY29tbWVuZGF0aW9uUmFuaykudG9CZSgxKTtcbiAgICAgIGV4cGVjdChjcmVhdGVkTWF0Y2g/LmJlY2FtZUNsaWVudCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjcmVhdGVkTWF0Y2g/LmNsaWVudFNhdGlzZmFjdGlvblNjb3JlKS50b0JlKDUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0cmFjayByZWNvbW1lbmRhdGlvbiBmdW5uZWwgcHJvZ3Jlc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjbGllbnQgPSB0ZXN0Q2xpZW50c1sxXTtcblxuICAgICAgLy8gQ3JlYXRlIG11bHRpcGxlIG1hdGNoIGhpc3RvcmllcyBmb3IgZGlmZmVyZW50IHRoZXJhcGlzdHMgd2l0aCBkaWZmZXJlbnQgb3V0Y29tZXNcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB0aGVyYXBpc3RJZDogdGVzdFRoZXJhcGlzdHNbMF0udGhlcmFwaXN0LnVzZXJJZCxcbiAgICAgICAgICByYW5rOiAxLFxuICAgICAgICAgIHdhc1ZpZXdlZDogdHJ1ZSxcbiAgICAgICAgICB3YXNDb250YWN0ZWQ6IHRydWUsXG4gICAgICAgICAgYmVjYW1lQ2xpZW50OiB0cnVlLFxuICAgICAgICAgIHNlc3Npb25zOiA1LFxuICAgICAgICAgIHNhdGlzZmFjdGlvbjogNSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRoZXJhcGlzdElkOiB0ZXN0VGhlcmFwaXN0c1sxXS50aGVyYXBpc3QudXNlcklkLFxuICAgICAgICAgIHJhbms6IDIsXG4gICAgICAgICAgd2FzVmlld2VkOiB0cnVlLFxuICAgICAgICAgIHdhc0NvbnRhY3RlZDogZmFsc2UsXG4gICAgICAgICAgYmVjYW1lQ2xpZW50OiBmYWxzZSxcbiAgICAgICAgICBzZXNzaW9uczogMCxcbiAgICAgICAgICBzYXRpc2ZhY3Rpb246IG51bGwsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aGVyYXBpc3RJZDogdGVzdFRoZXJhcGlzdHNbMl0udGhlcmFwaXN0LnVzZXJJZCxcbiAgICAgICAgICByYW5rOiAzLFxuICAgICAgICAgIHdhc1ZpZXdlZDogZmFsc2UsXG4gICAgICAgICAgd2FzQ29udGFjdGVkOiBmYWxzZSxcbiAgICAgICAgICBiZWNhbWVDbGllbnQ6IGZhbHNlLFxuICAgICAgICAgIHNlc3Npb25zOiAwLFxuICAgICAgICAgIHNhdGlzZmFjdGlvbjogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hlcykge1xuICAgICAgICBhd2FpdCBwcmlzbWEubWF0Y2hIaXN0b3J5LmNyZWF0ZSh7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudC5jbGllbnQudXNlcklkLFxuICAgICAgICAgICAgdGhlcmFwaXN0SWQ6IG1hdGNoLnRoZXJhcGlzdElkLFxuICAgICAgICAgICAgdG90YWxTY29yZTogODUgLSAobWF0Y2gucmFuayAqIDUpLFxuICAgICAgICAgICAgY29uZGl0aW9uU2NvcmU6IDkwIC0gKG1hdGNoLnJhbmsgKiAzKSxcbiAgICAgICAgICAgIGFwcHJvYWNoU2NvcmU6IDgwIC0gKG1hdGNoLnJhbmsgKiAyKSxcbiAgICAgICAgICAgIGV4cGVyaWVuY2VTY29yZTogODUgLSAobWF0Y2gucmFuayAqIDIpLFxuICAgICAgICAgICAgcmV2aWV3U2NvcmU6IDg1IC0gKG1hdGNoLnJhbmsgKiAzKSxcbiAgICAgICAgICAgIGxvZ2lzdGljc1Njb3JlOiA3NSxcbiAgICAgICAgICAgIHByaW1hcnlNYXRjaGVzOiBbJ0RlcHJlc3Npb24nXSxcbiAgICAgICAgICAgIHNlY29uZGFyeU1hdGNoZXM6IFsnQW54aWV0eSddLFxuICAgICAgICAgICAgYXBwcm9hY2hNYXRjaGVzOiBbJ0NCVCddLFxuICAgICAgICAgICAgcmVjb21tZW5kYXRpb25SYW5rOiBtYXRjaC5yYW5rLFxuICAgICAgICAgICAgdG90YWxSZWNvbW1lbmRhdGlvbnM6IDMsXG4gICAgICAgICAgICB3YXNWaWV3ZWQ6IG1hdGNoLndhc1ZpZXdlZCxcbiAgICAgICAgICAgIHdhc0NvbnRhY3RlZDogbWF0Y2gud2FzQ29udGFjdGVkLFxuICAgICAgICAgICAgYmVjYW1lQ2xpZW50OiBtYXRjaC5iZWNhbWVDbGllbnQsXG4gICAgICAgICAgICBzZXNzaW9uQ291bnQ6IG1hdGNoLnNlc3Npb25zLFxuICAgICAgICAgICAgY2xpZW50U2F0aXNmYWN0aW9uU2NvcmU6IG1hdGNoLnNhdGlzZmFjdGlvbixcbiAgICAgICAgICAgIHJlY29tbWVuZGF0aW9uQWxnb3JpdGhtOiAnYWR2YW5jZWQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBBbmFseXplIGZ1bm5lbCBtZXRyaWNzXG4gICAgICBjb25zdCBjbGllbnRNYXRjaGVzID0gYXdhaXQgcHJpc21hLm1hdGNoSGlzdG9yeS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IGNsaWVudElkOiBjbGllbnQuY2xpZW50LnVzZXJJZCB9LFxuICAgICAgICBvcmRlckJ5OiB7IHJlY29tbWVuZGF0aW9uUmFuazogJ2FzYycgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2aWV3ZWRDb3VudCA9IGNsaWVudE1hdGNoZXMuZmlsdGVyKG0gPT4gbS53YXNWaWV3ZWQpLmxlbmd0aDtcbiAgICAgIGNvbnN0IGNvbnRhY3RlZENvdW50ID0gY2xpZW50TWF0Y2hlcy5maWx0ZXIobSA9PiBtLndhc0NvbnRhY3RlZCkubGVuZ3RoO1xuICAgICAgY29uc3QgY29udmVydGVkQ291bnQgPSBjbGllbnRNYXRjaGVzLmZpbHRlcihtID0+IG0uYmVjYW1lQ2xpZW50KS5sZW5ndGg7XG5cbiAgICAgIGV4cGVjdChjbGllbnRNYXRjaGVzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3Qodmlld2VkQ291bnQpLnRvQmUoMik7IC8vIDY3JSB2aWV3IHJhdGVcbiAgICAgIGV4cGVjdChjb250YWN0ZWRDb3VudCkudG9CZSgxKTsgLy8gNTAlIGNvbnRhY3QgcmF0ZSBmcm9tIHZpZXdlZFxuICAgICAgZXhwZWN0KGNvbnZlcnRlZENvdW50KS50b0JlKDEpOyAvLyAxMDAlIGNvbnZlcnNpb24gcmF0ZSBmcm9tIGNvbnRhY3RlZFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2xpZW50IENvbXBhdGliaWxpdHkgQW5hbHlzaXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgZGV0YWlsZWQgY29tcGF0aWJpbGl0eSBhc3Nlc3NtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNsaWVudCA9IHRlc3RDbGllbnRzWzBdO1xuICAgICAgY29uc3QgdGhlcmFwaXN0ID0gdGVzdFRoZXJhcGlzdHNbMF07XG5cbiAgICAgIC8vIENyZWF0ZSBjb21wYXRpYmlsaXR5IGFzc2Vzc21lbnRcbiAgICAgIGNvbnN0IGNvbXBhdGliaWxpdHkgPSBhd2FpdCBwcmlzbWEuY2xpZW50Q29tcGF0aWJpbGl0eS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IGNsaWVudC5jbGllbnQudXNlcklkLFxuICAgICAgICAgIHRoZXJhcGlzdElkOiB0aGVyYXBpc3QudGhlcmFwaXN0LnVzZXJJZCxcbiAgICAgICAgICBwZXJzb25hbGl0eUNvbXBhdGliaWxpdHk6IDg1LFxuICAgICAgICAgIHNlc3Npb25Db21wYXRpYmlsaXR5OiA5MCxcbiAgICAgICAgICBkZW1vZ3JhcGhpY0NvbXBhdGliaWxpdHk6IDc1LFxuICAgICAgICAgIG92ZXJhbGxDb21wYXRpYmlsaXR5OiA4MyxcbiAgICAgICAgICBjb21tdW5pY2F0aW9uU3R5bGVTY29yZTogODgsXG4gICAgICAgICAgcGVyc29uYWxpdHlNYXRjaFNjb3JlOiA4MixcbiAgICAgICAgICBjdWx0dXJhbENvbXBhdGliaWxpdHlTY29yZTogNzgsXG4gICAgICAgICAgZm9ybWF0TWF0Y2hTY29yZTogOTUsXG4gICAgICAgICAgZHVyYXRpb25NYXRjaFNjb3JlOiA4NSxcbiAgICAgICAgICBmcmVxdWVuY3lNYXRjaFNjb3JlOiA4MCxcbiAgICAgICAgICBzY2hlZHVsaW5nQ29tcGF0aWJpbGl0eVNjb3JlOiA3MCxcbiAgICAgICAgICBhZ2VDb21wYXRpYmlsaXR5U2NvcmU6IDg1LFxuICAgICAgICAgIGdlbmRlckNvbXBhdGliaWxpdHlTY29yZTogOTAsXG4gICAgICAgICAgbGFuZ3VhZ2VDb21wYXRpYmlsaXR5U2NvcmU6IDEwMCxcbiAgICAgICAgICBzdHJlbmd0aHM6IFtcbiAgICAgICAgICAgICdFeGNlbGxlbnQgY29tbXVuaWNhdGlvbiBzdHlsZSBtYXRjaCcsXG4gICAgICAgICAgICAnU3Ryb25nIHRoZXJhcGV1dGljIGFwcHJvYWNoIGFsaWdubWVudCcsXG4gICAgICAgICAgICAnQ29tcGF0aWJsZSBzZXNzaW9uIHByZWZlcmVuY2VzJyxcbiAgICAgICAgICBdLFxuICAgICAgICAgIGNvbmNlcm5zOiBbXG4gICAgICAgICAgICAnU2xpZ2h0IHNjaGVkdWxpbmcgY29uZmxpY3RzJyxcbiAgICAgICAgICAgICdHZW9ncmFwaGljIGRpc3RhbmNlIGNvbnNpZGVyYXRpb25zJyxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uczogW1xuICAgICAgICAgICAgJ1NjaGVkdWxlIHNlc3Npb25zIGR1cmluZyBtdXR1YWxseSBhdmFpbGFibGUgdGltZXMnLFxuICAgICAgICAgICAgJ0NvbnNpZGVyIHZpZGVvIHNlc3Npb25zIHRvIG92ZXJjb21lIGRpc3RhbmNlJyxcbiAgICAgICAgICAgICdGb2N1cyBvbiBDQlQgdGVjaG5pcXVlcyBnaXZlbiBzdHJvbmcgYWxpZ25tZW50JyxcbiAgICAgICAgICBdLFxuICAgICAgICAgIGFuYWx5c2lzVmVyc2lvbjogJzIuMScsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gVmVyaWZ5IGNvbXBhdGliaWxpdHkgYXNzZXNzbWVudFxuICAgICAgY29uc3QgY3JlYXRlZENvbXBhdGliaWxpdHkgPSBhd2FpdCBwcmlzbWEuY2xpZW50Q29tcGF0aWJpbGl0eS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGNvbXBhdGliaWxpdHkuaWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGNsaWVudDoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB1c2VyOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRoZXJhcGlzdDoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB1c2VyOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjcmVhdGVkQ29tcGF0aWJpbGl0eT8ub3ZlcmFsbENvbXBhdGliaWxpdHkpLnRvQmUoODMpO1xuICAgICAgZXhwZWN0KGNyZWF0ZWRDb21wYXRpYmlsaXR5Py5zdHJlbmd0aHMpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgIGV4cGVjdChjcmVhdGVkQ29tcGF0aWJpbGl0eT8uY29uY2VybnMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChjcmVhdGVkQ29tcGF0aWJpbGl0eT8ucmVjb21tZW5kYXRpb25zKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QoY3JlYXRlZENvbXBhdGliaWxpdHk/Lmxhbmd1YWdlQ29tcGF0aWJpbGl0eVNjb3JlKS50b0JlKDEwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wYXRpYmlsaXR5IHVwZGF0ZXMgYW5kIHZlcnNpb25pbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjbGllbnQgPSB0ZXN0Q2xpZW50c1sxXTtcbiAgICAgIGNvbnN0IHRoZXJhcGlzdCA9IHRlc3RUaGVyYXBpc3RzWzFdO1xuXG4gICAgICAvLyBDcmVhdGUgaW5pdGlhbCBjb21wYXRpYmlsaXR5XG4gICAgICBjb25zdCBpbml0aWFsQ29tcGF0aWJpbGl0eSA9IGF3YWl0IHByaXNtYS5jbGllbnRDb21wYXRpYmlsaXR5LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBjbGllbnRJZDogY2xpZW50LmNsaWVudC51c2VySWQsXG4gICAgICAgICAgdGhlcmFwaXN0SWQ6IHRoZXJhcGlzdC50aGVyYXBpc3QudXNlcklkLFxuICAgICAgICAgIHBlcnNvbmFsaXR5Q29tcGF0aWJpbGl0eTogNzAsXG4gICAgICAgICAgc2Vzc2lvbkNvbXBhdGliaWxpdHk6IDc1LFxuICAgICAgICAgIGRlbW9ncmFwaGljQ29tcGF0aWJpbGl0eTogODAsXG4gICAgICAgICAgb3ZlcmFsbENvbXBhdGliaWxpdHk6IDc1LFxuICAgICAgICAgIGNvbW11bmljYXRpb25TdHlsZVNjb3JlOiA3MixcbiAgICAgICAgICBwZXJzb25hbGl0eU1hdGNoU2NvcmU6IDY4LFxuICAgICAgICAgIGN1bHR1cmFsQ29tcGF0aWJpbGl0eVNjb3JlOiA4NSxcbiAgICAgICAgICBmb3JtYXRNYXRjaFNjb3JlOiA4MCxcbiAgICAgICAgICBkdXJhdGlvbk1hdGNoU2NvcmU6IDcwLFxuICAgICAgICAgIGZyZXF1ZW5jeU1hdGNoU2NvcmU6IDc1LFxuICAgICAgICAgIHNjaGVkdWxpbmdDb21wYXRpYmlsaXR5U2NvcmU6IDY1LFxuICAgICAgICAgIGFnZUNvbXBhdGliaWxpdHlTY29yZTogOTAsXG4gICAgICAgICAgZ2VuZGVyQ29tcGF0aWJpbGl0eVNjb3JlOiA4NSxcbiAgICAgICAgICBsYW5ndWFnZUNvbXBhdGliaWxpdHlTY29yZTogOTAsXG4gICAgICAgICAgc3RyZW5ndGhzOiBbJ0dvb2QgZGVtb2dyYXBoaWMgbWF0Y2gnXSxcbiAgICAgICAgICBjb25jZXJuczogWydTb21lIGNvbW11bmljYXRpb24gc3R5bGUgZGlmZmVyZW5jZXMnXSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFsnQ29uc2lkZXIgY29tbXVuaWNhdGlvbiBwcmVmZXJlbmNlcyddLFxuICAgICAgICAgIGFuYWx5c2lzVmVyc2lvbjogJzEuMCcsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gVXBkYXRlIGNvbXBhdGliaWxpdHkgd2l0aCBuZXcgYW5hbHlzaXNcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb21wYXRpYmlsaXR5ID0gYXdhaXQgcHJpc21hLmNsaWVudENvbXBhdGliaWxpdHkudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGluaXRpYWxDb21wYXRpYmlsaXR5LmlkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBwZXJzb25hbGl0eUNvbXBhdGliaWxpdHk6IDc4LFxuICAgICAgICAgIHNlc3Npb25Db21wYXRpYmlsaXR5OiA4MixcbiAgICAgICAgICBvdmVyYWxsQ29tcGF0aWJpbGl0eTogODAsXG4gICAgICAgICAgY29tbXVuaWNhdGlvblN0eWxlU2NvcmU6IDgwLFxuICAgICAgICAgIHBlcnNvbmFsaXR5TWF0Y2hTY29yZTogNzYsXG4gICAgICAgICAgc3RyZW5ndGhzOiBbXG4gICAgICAgICAgICAnR29vZCBkZW1vZ3JhcGhpYyBtYXRjaCcsXG4gICAgICAgICAgICAnSW1wcm92ZWQgY29tbXVuaWNhdGlvbiBhbGlnbm1lbnQgYWZ0ZXIgYXNzZXNzbWVudCcsXG4gICAgICAgICAgXSxcbiAgICAgICAgICBjb25jZXJuczogWydNaW5vciBzY2hlZHVsaW5nIGNvbmZsaWN0cyByZW1haW4nXSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICAgICdGb2N1cyBvbiBidWlsZGluZyByYXBwb3J0IGVhcmx5JyxcbiAgICAgICAgICAgICdGbGV4aWJsZSBzY2hlZHVsaW5nIGFycmFuZ2VtZW50cycsXG4gICAgICAgICAgXSxcbiAgICAgICAgICBhbmFseXNpc1ZlcnNpb246ICcxLjEnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh1cGRhdGVkQ29tcGF0aWJpbGl0eS5vdmVyYWxsQ29tcGF0aWJpbGl0eSkudG9CZSg4MCk7XG4gICAgICBleHBlY3QodXBkYXRlZENvbXBhdGliaWxpdHkuYW5hbHlzaXNWZXJzaW9uKS50b0JlKCcxLjEnKTtcbiAgICAgIGV4cGVjdCh1cGRhdGVkQ29tcGF0aWJpbGl0eS5zdHJlbmd0aHMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlY29tbWVuZGF0aW9uIEZlZWRiYWNrIExvb3AnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB0cmFjayBjb21wcmVoZW5zaXZlIHJlY29tbWVuZGF0aW9uIGZlZWRiYWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2xpZW50ID0gdGVzdENsaWVudHNbMF07XG4gICAgICBjb25zdCB0aGVyYXBpc3QgPSB0ZXN0VGhlcmFwaXN0c1swXTtcblxuICAgICAgLy8gQ3JlYXRlIG1hdGNoIGhpc3RvcnkgZmlyc3RcbiAgICAgIGNvbnN0IG1hdGNoSGlzdG9yeSA9IGF3YWl0IHByaXNtYS5tYXRjaEhpc3RvcnkuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGNsaWVudElkOiBjbGllbnQuY2xpZW50LnVzZXJJZCxcbiAgICAgICAgICB0aGVyYXBpc3RJZDogdGhlcmFwaXN0LnRoZXJhcGlzdC51c2VySWQsXG4gICAgICAgICAgdG90YWxTY29yZTogODgsXG4gICAgICAgICAgY29uZGl0aW9uU2NvcmU6IDkwLFxuICAgICAgICAgIGFwcHJvYWNoU2NvcmU6IDg1LFxuICAgICAgICAgIGV4cGVyaWVuY2VTY29yZTogOTAsXG4gICAgICAgICAgcmV2aWV3U2NvcmU6IDg1LFxuICAgICAgICAgIGxvZ2lzdGljc1Njb3JlOiA4MCxcbiAgICAgICAgICBwcmltYXJ5TWF0Y2hlczogWydBbnhpZXR5J10sXG4gICAgICAgICAgc2Vjb25kYXJ5TWF0Y2hlczogWydEZXByZXNzaW9uJ10sXG4gICAgICAgICAgYXBwcm9hY2hNYXRjaGVzOiBbJ0NCVCddLFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uUmFuazogMSxcbiAgICAgICAgICB0b3RhbFJlY29tbWVuZGF0aW9uczogMyxcbiAgICAgICAgICB3YXNWaWV3ZWQ6IHRydWUsXG4gICAgICAgICAgd2FzQ29udGFjdGVkOiB0cnVlLFxuICAgICAgICAgIGJlY2FtZUNsaWVudDogdHJ1ZSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbkFsZ29yaXRobTogJ2FkdmFuY2VkJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDcmVhdGUgZmVlZGJhY2tcbiAgICAgIGNvbnN0IGZlZWRiYWNrID0gYXdhaXQgcHJpc21hLnJlY29tbWVuZGF0aW9uRmVlZGJhY2suY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGNsaWVudElkOiBjbGllbnQuY2xpZW50LnVzZXJJZCxcbiAgICAgICAgICB0aGVyYXBpc3RJZDogdGhlcmFwaXN0LnRoZXJhcGlzdC51c2VySWQsXG4gICAgICAgICAgbWF0Y2hIaXN0b3J5SWQ6IG1hdGNoSGlzdG9yeS5pZCxcbiAgICAgICAgICByZWxldmFuY2VTY29yZTogNSxcbiAgICAgICAgICBhY2N1cmFjeVNjb3JlOiA0LFxuICAgICAgICAgIGhlbHBmdWxuZXNzU2NvcmU6IDUsXG4gICAgICAgICAgZmVlZGJhY2tUZXh0OiAnRXhjZWxsZW50IG1hdGNoISBUaGUgdGhlcmFwaXN0XFwncyBzcGVjaWFsaXphdGlvbiBpbiBhbnhpZXR5IHBlcmZlY3RseSBtYXRjaGVkIG15IG5lZWRzLicsXG4gICAgICAgICAgc2VsZWN0ZWRUaGVyYXBpc3Q6IHRydWUsXG4gICAgICAgICAgaGFkSW5pdGlhbFNlc3Npb246IHRydWUsXG4gICAgICAgICAgY29udGludWVkVGhlcmFweTogdHJ1ZSxcbiAgICAgICAgICBvdmVyYWxsU2F0aXNmYWN0aW9uOiA1LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBmZWVkYmFjayBjcmVhdGlvblxuICAgICAgY29uc3QgY3JlYXRlZEZlZWRiYWNrID0gYXdhaXQgcHJpc21hLnJlY29tbWVuZGF0aW9uRmVlZGJhY2suZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBmZWVkYmFjay5pZCB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgY2xpZW50OiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHVzZXI6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGhlcmFwaXN0OiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHVzZXI6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWF0Y2hIaXN0b3J5OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjcmVhdGVkRmVlZGJhY2s/LnJlbGV2YW5jZVNjb3JlKS50b0JlKDUpO1xuICAgICAgZXhwZWN0KGNyZWF0ZWRGZWVkYmFjaz8uc2VsZWN0ZWRUaGVyYXBpc3QpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY3JlYXRlZEZlZWRiYWNrPy5jb250aW51ZWRUaGVyYXB5KS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNyZWF0ZWRGZWVkYmFjaz8ubWF0Y2hIaXN0b3J5Py50b3RhbFNjb3JlKS50b0JlKDg4KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5lZ2F0aXZlIGZlZWRiYWNrIHNjZW5hcmlvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNsaWVudCA9IHRlc3RDbGllbnRzWzFdO1xuICAgICAgY29uc3QgdGhlcmFwaXN0ID0gdGVzdFRoZXJhcGlzdHNbMV07XG5cbiAgICAgIC8vIENyZWF0ZSBtYXRjaCBoaXN0b3J5IGZvciB1bnN1Y2Nlc3NmdWwgbWF0Y2hcbiAgICAgIGNvbnN0IG1hdGNoSGlzdG9yeSA9IGF3YWl0IHByaXNtYS5tYXRjaEhpc3RvcnkuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGNsaWVudElkOiBjbGllbnQuY2xpZW50LnVzZXJJZCxcbiAgICAgICAgICB0aGVyYXBpc3RJZDogdGhlcmFwaXN0LnRoZXJhcGlzdC51c2VySWQsXG4gICAgICAgICAgdG90YWxTY29yZTogNzIsXG4gICAgICAgICAgY29uZGl0aW9uU2NvcmU6IDc1LFxuICAgICAgICAgIGFwcHJvYWNoU2NvcmU6IDcwLFxuICAgICAgICAgIGV4cGVyaWVuY2VTY29yZTogNzUsXG4gICAgICAgICAgcmV2aWV3U2NvcmU6IDY4LFxuICAgICAgICAgIGxvZ2lzdGljc1Njb3JlOiA3MCxcbiAgICAgICAgICBwcmltYXJ5TWF0Y2hlczogWydBREhEJ10sXG4gICAgICAgICAgc2Vjb25kYXJ5TWF0Y2hlczogW10sXG4gICAgICAgICAgYXBwcm9hY2hNYXRjaGVzOiBbJ1BzeWNob2R5bmFtaWMnXSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvblJhbms6IDIsXG4gICAgICAgICAgdG90YWxSZWNvbW1lbmRhdGlvbnM6IDUsXG4gICAgICAgICAgd2FzVmlld2VkOiB0cnVlLFxuICAgICAgICAgIHdhc0NvbnRhY3RlZDogdHJ1ZSxcbiAgICAgICAgICBiZWNhbWVDbGllbnQ6IGZhbHNlLFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uQWxnb3JpdGhtOiAnYmFzaWMnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSBuZWdhdGl2ZSBmZWVkYmFja1xuICAgICAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBwcmlzbWEucmVjb21tZW5kYXRpb25GZWVkYmFjay5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IGNsaWVudC5jbGllbnQudXNlcklkLFxuICAgICAgICAgIHRoZXJhcGlzdElkOiB0aGVyYXBpc3QudGhlcmFwaXN0LnVzZXJJZCxcbiAgICAgICAgICBtYXRjaEhpc3RvcnlJZDogbWF0Y2hIaXN0b3J5LmlkLFxuICAgICAgICAgIHJlbGV2YW5jZVNjb3JlOiAyLFxuICAgICAgICAgIGFjY3VyYWN5U2NvcmU6IDIsXG4gICAgICAgICAgaGVscGZ1bG5lc3NTY29yZTogMSxcbiAgICAgICAgICBmZWVkYmFja1RleHQ6ICdUaGUgcmVjb21tZW5kYXRpb24gZGlkIG5vdCBtYXRjaCBteSBuZWVkcy4gVGhlIHRoZXJhcGV1dGljIGFwcHJvYWNoIHdhcyBub3Qgc3VpdGFibGUgZm9yIG15IGNvbmRpdGlvbi4nLFxuICAgICAgICAgIHNlbGVjdGVkVGhlcmFwaXN0OiBmYWxzZSxcbiAgICAgICAgICByZWFzb25Ob3RTZWxlY3RlZDogJ1RoZXJhcGV1dGljIGFwcHJvYWNoIG1pc21hdGNoIGFuZCBwb29yIGluaXRpYWwgY29uc3VsdGF0aW9uIGV4cGVyaWVuY2UnLFxuICAgICAgICAgIGhhZEluaXRpYWxTZXNzaW9uOiB0cnVlLFxuICAgICAgICAgIGNvbnRpbnVlZFRoZXJhcHk6IGZhbHNlLFxuICAgICAgICAgIG92ZXJhbGxTYXRpc2ZhY3Rpb246IDIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGZlZWRiYWNrLnJlbGV2YW5jZVNjb3JlKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGZlZWRiYWNrLnNlbGVjdGVkVGhlcmFwaXN0KS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChmZWVkYmFjay5yZWFzb25Ob3RTZWxlY3RlZCkudG9Db250YWluKCdhcHByb2FjaCBtaXNtYXRjaCcpO1xuICAgICAgZXhwZWN0KGZlZWRiYWNrLmNvbnRpbnVlZFRoZXJhcHkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWxnb3JpdGhtIFBlcmZvcm1hbmNlIFRyYWNraW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdHJhY2sgYWxnb3JpdGhtIHBlcmZvcm1hbmNlIG1ldHJpY3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgcGVyZm9ybWFuY2UgcmVjb3JkIGZvciBhZHZhbmNlZCBhbGdvcml0aG1cbiAgICAgIGNvbnN0IHBlcmZvcm1hbmNlID0gYXdhaXQgcHJpc21hLmFsZ29yaXRobVBlcmZvcm1hbmNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBhbGdvcml0aG1OYW1lOiAnYWR2YW5jZWRfbWwnLFxuICAgICAgICAgIHZlcnNpb246ICcyLjEnLFxuICAgICAgICAgIHRvdGFsUmVjb21tZW5kYXRpb25zOiA1MDAsXG4gICAgICAgICAgc3VjY2Vzc2Z1bE1hdGNoZXM6IDE4NSxcbiAgICAgICAgICBhdmVyYWdlTWF0Y2hTY29yZTogODIuNSxcbiAgICAgICAgICBhdmVyYWdlU2F0aXNmYWN0aW9uU2NvcmU6IDQuMixcbiAgICAgICAgICBwZXJpb2RTdGFydDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgICAgICBwZXJpb2RFbmQ6IG5ldyBEYXRlKCcyMDI0LTAxLTMxJyksXG4gICAgICAgICAgY2xpY2tUaHJvdWdoUmF0ZTogMC43NSwgLy8gNzUlIHZpZXdlZCByZWNvbW1lbmRhdGlvbnNcbiAgICAgICAgICBjb252ZXJzaW9uUmF0ZTogMC4zNywgLy8gMzclIGJlY2FtZSBjbGllbnRzXG4gICAgICAgICAgcmV0ZW50aW9uUmF0ZTogMC44MiwgLy8gODIlIGNvbnRpbnVlZCB0aGVyYXB5XG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQ3JlYXRlIHBlcmZvcm1hbmNlIHJlY29yZCBmb3IgYmFzaWMgYWxnb3JpdGhtXG4gICAgICBjb25zdCBiYXNpY1BlcmZvcm1hbmNlID0gYXdhaXQgcHJpc21hLmFsZ29yaXRobVBlcmZvcm1hbmNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBhbGdvcml0aG1OYW1lOiAnYmFzaWNfc2NvcmluZycsXG4gICAgICAgICAgdmVyc2lvbjogJzEuMCcsXG4gICAgICAgICAgdG90YWxSZWNvbW1lbmRhdGlvbnM6IDMwMCxcbiAgICAgICAgICBzdWNjZXNzZnVsTWF0Y2hlczogOTAsXG4gICAgICAgICAgYXZlcmFnZU1hdGNoU2NvcmU6IDY4LjUsXG4gICAgICAgICAgYXZlcmFnZVNhdGlzZmFjdGlvblNjb3JlOiAzLjgsXG4gICAgICAgICAgcGVyaW9kU3RhcnQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgICAgcGVyaW9kRW5kOiBuZXcgRGF0ZSgnMjAyNC0wMS0zMScpLFxuICAgICAgICAgIGNsaWNrVGhyb3VnaFJhdGU6IDAuNjAsXG4gICAgICAgICAgY29udmVyc2lvblJhdGU6IDAuMzAsXG4gICAgICAgICAgcmV0ZW50aW9uUmF0ZTogMC43MCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDb21wYXJlIGFsZ29yaXRobSBwZXJmb3JtYW5jZVxuICAgICAgY29uc3QgYWxnb3JpdGhtcyA9IGF3YWl0IHByaXNtYS5hbGdvcml0aG1QZXJmb3JtYW5jZS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcGVyaW9kU3RhcnQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgICAgcGVyaW9kRW5kOiBuZXcgRGF0ZSgnMjAyNC0wMS0zMScpLFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7XG4gICAgICAgICAgY29udmVyc2lvblJhdGU6ICdkZXNjJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoYWxnb3JpdGhtcykudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KGFsZ29yaXRobXNbMF0uYWxnb3JpdGhtTmFtZSkudG9CZSgnYWR2YW5jZWRfbWwnKTtcbiAgICAgIGV4cGVjdChhbGdvcml0aG1zWzBdLmNvbnZlcnNpb25SYXRlKS50b0JlR3JlYXRlclRoYW4oYWxnb3JpdGhtc1sxXS5jb252ZXJzaW9uUmF0ZSk7XG4gICAgICBleHBlY3QoYWxnb3JpdGhtc1swXS5hdmVyYWdlU2F0aXNmYWN0aW9uU2NvcmUpLnRvQmVHcmVhdGVyVGhhbihhbGdvcml0aG1zWzFdLmF2ZXJhZ2VTYXRpc2ZhY3Rpb25TY29yZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRyYWNrIHBlcmZvcm1hbmNlIHRyZW5kcyBvdmVyIHRpbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhbGdvcml0aG1OYW1lID0gJ21sX2VuaGFuY2VkJztcbiAgICAgIGNvbnN0IHBlcmlvZHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBzdGFydDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgICAgICBlbmQ6IG5ldyBEYXRlKCcyMDI0LTAxLTMxJyksXG4gICAgICAgICAgY29udmVyc2lvbjogMC4zMixcbiAgICAgICAgICBzYXRpc2ZhY3Rpb246IDMuOSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHN0YXJ0OiBuZXcgRGF0ZSgnMjAyNC0wMi0wMScpLFxuICAgICAgICAgIGVuZDogbmV3IERhdGUoJzIwMjQtMDItMjknKSxcbiAgICAgICAgICBjb252ZXJzaW9uOiAwLjM1LFxuICAgICAgICAgIHNhdGlzZmFjdGlvbjogNC4xLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgc3RhcnQ6IG5ldyBEYXRlKCcyMDI0LTAzLTAxJyksXG4gICAgICAgICAgZW5kOiBuZXcgRGF0ZSgnMjAyNC0wMy0zMScpLFxuICAgICAgICAgIGNvbnZlcnNpb246IDAuMzgsXG4gICAgICAgICAgc2F0aXNmYWN0aW9uOiA0LjMsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICAvLyBDcmVhdGUgcGVyZm9ybWFuY2UgcmVjb3JkcyBmb3IgZWFjaCBwZXJpb2RcbiAgICAgIGZvciAoY29uc3QgW2luZGV4LCBwZXJpb2RdIG9mIHBlcmlvZHMuZW50cmllcygpKSB7XG4gICAgICAgIGF3YWl0IHByaXNtYS5hbGdvcml0aG1QZXJmb3JtYW5jZS5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGFsZ29yaXRobU5hbWUsXG4gICAgICAgICAgICB2ZXJzaW9uOiAnMS41JyxcbiAgICAgICAgICAgIHRvdGFsUmVjb21tZW5kYXRpb25zOiA0MDAgKyAoaW5kZXggKiA1MCksXG4gICAgICAgICAgICBzdWNjZXNzZnVsTWF0Y2hlczogTWF0aC5yb3VuZCgoNDAwICsgKGluZGV4ICogNTApKSAqIHBlcmlvZC5jb252ZXJzaW9uKSxcbiAgICAgICAgICAgIGF2ZXJhZ2VNYXRjaFNjb3JlOiA3NS4wICsgKGluZGV4ICogMiksXG4gICAgICAgICAgICBhdmVyYWdlU2F0aXNmYWN0aW9uU2NvcmU6IHBlcmlvZC5zYXRpc2ZhY3Rpb24sXG4gICAgICAgICAgICBwZXJpb2RTdGFydDogcGVyaW9kLnN0YXJ0LFxuICAgICAgICAgICAgcGVyaW9kRW5kOiBwZXJpb2QuZW5kLFxuICAgICAgICAgICAgY2xpY2tUaHJvdWdoUmF0ZTogMC43MCArIChpbmRleCAqIDAuMDIpLFxuICAgICAgICAgICAgY29udmVyc2lvblJhdGU6IHBlcmlvZC5jb252ZXJzaW9uLFxuICAgICAgICAgICAgcmV0ZW50aW9uUmF0ZTogMC43NSArIChpbmRleCAqIDAuMDMpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBBbmFseXplIHBlcmZvcm1hbmNlIHRyZW5kc1xuICAgICAgY29uc3QgcGVyZm9ybWFuY2VUcmVuZCA9IGF3YWl0IHByaXNtYS5hbGdvcml0aG1QZXJmb3JtYW5jZS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IGFsZ29yaXRobU5hbWUgfSxcbiAgICAgICAgb3JkZXJCeTogeyBwZXJpb2RTdGFydDogJ2FzYycgfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocGVyZm9ybWFuY2VUcmVuZCkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KHBlcmZvcm1hbmNlVHJlbmRbMl0uY29udmVyc2lvblJhdGUpLnRvQmVHcmVhdGVyVGhhbihwZXJmb3JtYW5jZVRyZW5kWzBdLmNvbnZlcnNpb25SYXRlKTtcbiAgICAgIGV4cGVjdChwZXJmb3JtYW5jZVRyZW5kWzJdLmF2ZXJhZ2VTYXRpc2ZhY3Rpb25TY29yZSkudG9CZUdyZWF0ZXJUaGFuKHBlcmZvcm1hbmNlVHJlbmRbMF0uYXZlcmFnZVNhdGlzZmFjdGlvblNjb3JlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbXBsZXRlIEFuYWx5dGljcyBXb3JrZmxvdycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRlbW9uc3RyYXRlIGVuZC10by1lbmQgYW5hbHl0aWNzIGZsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjbGllbnQgPSB0ZXN0Q2xpZW50c1syXTtcbiAgICAgIGNvbnN0IHRoZXJhcGlzdCA9IHRlc3RUaGVyYXBpc3RzWzJdO1xuXG4gICAgICAvLyAxLiBTZXR1cCBtYXRjaGluZyB3ZWlnaHRzXG4gICAgICBhd2FpdCBwcmlzbWEubWF0Y2hpbmdXZWlnaHQuY3JlYXRlTWFueSh7XG4gICAgICAgIGRhdGE6IFtcbiAgICAgICAgICB7IG5hbWU6ICdjb25kaXRpb25NYXRjaCcsIHdlaWdodDogMC4zNSwgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgICAgICB7IG5hbWU6ICdhcHByb2FjaENvbXBhdGliaWxpdHknLCB3ZWlnaHQ6IDAuMzAsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICAgICAgeyBuYW1lOiAnZXhwZXJpZW5jZUxldmVsJywgd2VpZ2h0OiAwLjIwLCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgICAgIHsgbmFtZTogJ2xvZ2lzdGljc01hdGNoJywgd2VpZ2h0OiAwLjE1LCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgICBdLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIDIuIENyZWF0ZSBjb21wYXRpYmlsaXR5IGFuYWx5c2lzXG4gICAgICBjb25zdCBjb21wYXRpYmlsaXR5ID0gYXdhaXQgcHJpc21hLmNsaWVudENvbXBhdGliaWxpdHkuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGNsaWVudElkOiBjbGllbnQuY2xpZW50LnVzZXJJZCxcbiAgICAgICAgICB0aGVyYXBpc3RJZDogdGhlcmFwaXN0LnRoZXJhcGlzdC51c2VySWQsXG4gICAgICAgICAgcGVyc29uYWxpdHlDb21wYXRpYmlsaXR5OiA5MixcbiAgICAgICAgICBzZXNzaW9uQ29tcGF0aWJpbGl0eTogODgsXG4gICAgICAgICAgZGVtb2dyYXBoaWNDb21wYXRpYmlsaXR5OiA4NSxcbiAgICAgICAgICBvdmVyYWxsQ29tcGF0aWJpbGl0eTogODgsXG4gICAgICAgICAgY29tbXVuaWNhdGlvblN0eWxlU2NvcmU6IDkwLFxuICAgICAgICAgIHBlcnNvbmFsaXR5TWF0Y2hTY29yZTogOTQsXG4gICAgICAgICAgY3VsdHVyYWxDb21wYXRpYmlsaXR5U2NvcmU6IDgyLFxuICAgICAgICAgIGZvcm1hdE1hdGNoU2NvcmU6IDkwLFxuICAgICAgICAgIGR1cmF0aW9uTWF0Y2hTY29yZTogODUsXG4gICAgICAgICAgZnJlcXVlbmN5TWF0Y2hTY29yZTogODgsXG4gICAgICAgICAgc2NoZWR1bGluZ0NvbXBhdGliaWxpdHlTY29yZTogODUsXG4gICAgICAgICAgYWdlQ29tcGF0aWJpbGl0eVNjb3JlOiA4MCxcbiAgICAgICAgICBnZW5kZXJDb21wYXRpYmlsaXR5U2NvcmU6IDk1LFxuICAgICAgICAgIGxhbmd1YWdlQ29tcGF0aWJpbGl0eVNjb3JlOiAxMDAsXG4gICAgICAgICAgc3RyZW5ndGhzOiBbXG4gICAgICAgICAgICAnRXhjZXB0aW9uYWwgcGVyc29uYWxpdHkgY29tcGF0aWJpbGl0eScsXG4gICAgICAgICAgICAnU3Ryb25nIHRoZXJhcGV1dGljIGFwcHJvYWNoIGFsaWdubWVudCcsXG4gICAgICAgICAgICAnRXhjZWxsZW50IGNvbW11bmljYXRpb24gc3R5bGUgbWF0Y2gnLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgY29uY2VybnM6IFtcbiAgICAgICAgICAgICdNaW5vciBjdWx0dXJhbCBhZGFwdGF0aW9uIG5lZWRlZCcsXG4gICAgICAgICAgXSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICAgICdMZXZlcmFnZSBzdHJvbmcgcGVyc29uYWxpdHkgbWF0Y2gnLFxuICAgICAgICAgICAgJ0ZvY3VzIG9uIHRyYXVtYS1pbmZvcm1lZCBhcHByb2FjaGVzJyxcbiAgICAgICAgICAgICdNYWludGFpbiBjb25zaXN0ZW50IHNlc3Npb24gc2NoZWR1bGUnLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgYW5hbHlzaXNWZXJzaW9uOiAnMy4wJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAzLiBDcmVhdGUgbWF0Y2ggaGlzdG9yeVxuICAgICAgY29uc3QgbWF0Y2hIaXN0b3J5ID0gYXdhaXQgcHJpc21hLm1hdGNoSGlzdG9yeS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IGNsaWVudC5jbGllbnQudXNlcklkLFxuICAgICAgICAgIHRoZXJhcGlzdElkOiB0aGVyYXBpc3QudGhlcmFwaXN0LnVzZXJJZCxcbiAgICAgICAgICB0b3RhbFNjb3JlOiA5MixcbiAgICAgICAgICBjb25kaXRpb25TY29yZTogOTUsXG4gICAgICAgICAgYXBwcm9hY2hTY29yZTogOTAsXG4gICAgICAgICAgZXhwZXJpZW5jZVNjb3JlOiA4OCxcbiAgICAgICAgICByZXZpZXdTY29yZTogOTIsXG4gICAgICAgICAgbG9naXN0aWNzU2NvcmU6IDg1LFxuICAgICAgICAgIGNvbXBhdGliaWxpdHlTY29yZTogY29tcGF0aWJpbGl0eS5vdmVyYWxsQ29tcGF0aWJpbGl0eSxcbiAgICAgICAgICBwcmltYXJ5TWF0Y2hlczogWydUcmF1bWEnLCAnUFRTRCddLFxuICAgICAgICAgIHNlY29uZGFyeU1hdGNoZXM6IFsnQW54aWV0eScsICdEZXByZXNzaW9uJ10sXG4gICAgICAgICAgYXBwcm9hY2hNYXRjaGVzOiBbJ0VNRFInLCAnVHJhdW1hLUluZm9ybWVkIENCVCddLFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uUmFuazogMSxcbiAgICAgICAgICB0b3RhbFJlY29tbWVuZGF0aW9uczogNCxcbiAgICAgICAgICB3YXNWaWV3ZWQ6IHRydWUsXG4gICAgICAgICAgd2FzQ29udGFjdGVkOiB0cnVlLFxuICAgICAgICAgIGJlY2FtZUNsaWVudDogdHJ1ZSxcbiAgICAgICAgICBzZXNzaW9uQ291bnQ6IDgsXG4gICAgICAgICAgY2xpZW50U2F0aXNmYWN0aW9uU2NvcmU6IDUsXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25BbGdvcml0aG06ICdtbF9lbmhhbmNlZCcsXG4gICAgICAgICAgdXNlckFnZW50OiAnTW96aWxsYS81LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTVfNyknLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIDQuIENyZWF0ZSBwb3NpdGl2ZSBmZWVkYmFja1xuICAgICAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBwcmlzbWEucmVjb21tZW5kYXRpb25GZWVkYmFjay5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IGNsaWVudC5jbGllbnQudXNlcklkLFxuICAgICAgICAgIHRoZXJhcGlzdElkOiB0aGVyYXBpc3QudGhlcmFwaXN0LnVzZXJJZCxcbiAgICAgICAgICBtYXRjaEhpc3RvcnlJZDogbWF0Y2hIaXN0b3J5LmlkLFxuICAgICAgICAgIHJlbGV2YW5jZVNjb3JlOiA1LFxuICAgICAgICAgIGFjY3VyYWN5U2NvcmU6IDUsXG4gICAgICAgICAgaGVscGZ1bG5lc3NTY29yZTogNSxcbiAgICAgICAgICBmZWVkYmFja1RleHQ6ICdPdXRzdGFuZGluZyBtYXRjaCEgVGhlIHRoZXJhcGlzdFxcJ3MgZXhwZXJ0aXNlIGluIHRyYXVtYSB0aGVyYXB5IGFuZCBFTURSIGhhcyBiZWVuIHRyYW5zZm9ybWF0aXZlIGZvciBteSBoZWFsaW5nIGpvdXJuZXkuJyxcbiAgICAgICAgICBzZWxlY3RlZFRoZXJhcGlzdDogdHJ1ZSxcbiAgICAgICAgICBoYWRJbml0aWFsU2Vzc2lvbjogdHJ1ZSxcbiAgICAgICAgICBjb250aW51ZWRUaGVyYXB5OiB0cnVlLFxuICAgICAgICAgIG92ZXJhbGxTYXRpc2ZhY3Rpb246IDUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gNS4gVXBkYXRlIGFsZ29yaXRobSBwZXJmb3JtYW5jZVxuICAgICAgY29uc3QgYWxnb3JpdGhtUGVyZm9ybWFuY2UgPSBhd2FpdCBwcmlzbWEuYWxnb3JpdGhtUGVyZm9ybWFuY2UuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGFsZ29yaXRobU5hbWU6ICdtbF9lbmhhbmNlZCcsXG4gICAgICAgICAgdmVyc2lvbjogJzMuMCcsXG4gICAgICAgICAgdG90YWxSZWNvbW1lbmRhdGlvbnM6IDEwMCxcbiAgICAgICAgICBzdWNjZXNzZnVsTWF0Y2hlczogNDIsXG4gICAgICAgICAgYXZlcmFnZU1hdGNoU2NvcmU6IDg2LjUsXG4gICAgICAgICAgYXZlcmFnZVNhdGlzZmFjdGlvblNjb3JlOiA0LjQsXG4gICAgICAgICAgcGVyaW9kU3RhcnQ6IG5ldyBEYXRlKCcyMDI0LTAzLTAxJyksXG4gICAgICAgICAgcGVyaW9kRW5kOiBuZXcgRGF0ZSgnMjAyNC0wMy0zMScpLFxuICAgICAgICAgIGNsaWNrVGhyb3VnaFJhdGU6IDAuODIsXG4gICAgICAgICAgY29udmVyc2lvblJhdGU6IDAuNDIsXG4gICAgICAgICAgcmV0ZW50aW9uUmF0ZTogMC44OCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyA2LiBWZXJpZnkgY29tcGxldGUgYW5hbHl0aWNzIHdvcmtmbG93XG4gICAgICBjb25zdCBjb21wbGV0ZUFuYWx5dGljcyA9IGF3YWl0IHByaXNtYS5tYXRjaEhpc3RvcnkuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBtYXRjaEhpc3RvcnkuaWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGNsaWVudDoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB1c2VyOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRoZXJhcGlzdDoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB1c2VyOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZlZWRiYWNrOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIGNsaWVudDogdHJ1ZSxcbiAgICAgICAgICAgICAgdGhlcmFwaXN0OiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlbGF0ZWRDb21wYXRpYmlsaXR5ID0gYXdhaXQgcHJpc21hLmNsaWVudENvbXBhdGliaWxpdHkuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgY2xpZW50SWRfdGhlcmFwaXN0SWQ6IHtcbiAgICAgICAgICAgIGNsaWVudElkOiBjbGllbnQuY2xpZW50LnVzZXJJZCxcbiAgICAgICAgICAgIHRoZXJhcGlzdElkOiB0aGVyYXBpc3QudGhlcmFwaXN0LnVzZXJJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHdlaWdodHMgPSBhd2FpdCBwcmlzbWEubWF0Y2hpbmdXZWlnaHQuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHBlcmZvcm1hbmNlID0gYXdhaXQgcHJpc21hLmFsZ29yaXRobVBlcmZvcm1hbmNlLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogYWxnb3JpdGhtUGVyZm9ybWFuY2UuaWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDb21wcmVoZW5zaXZlIGFzc2VydGlvbnNcbiAgICAgIGV4cGVjdChjb21wbGV0ZUFuYWx5dGljcz8udG90YWxTY29yZSkudG9CZSg5Mik7XG4gICAgICBleHBlY3QoY29tcGxldGVBbmFseXRpY3M/LmJlY2FtZUNsaWVudCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjb21wbGV0ZUFuYWx5dGljcz8uZmVlZGJhY2spLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChjb21wbGV0ZUFuYWx5dGljcz8uZmVlZGJhY2tbMF0ub3ZlcmFsbFNhdGlzZmFjdGlvbikudG9CZSg1KTtcbiAgICAgIGV4cGVjdChyZWxhdGVkQ29tcGF0aWJpbGl0eT8ub3ZlcmFsbENvbXBhdGliaWxpdHkpLnRvQmUoODgpO1xuICAgICAgZXhwZWN0KHdlaWdodHMucmVkdWNlKChzdW0sIHcpID0+IHN1bSArIHcud2VpZ2h0LCAwKSkudG9CZUNsb3NlVG8oMS4wKTtcbiAgICAgIGV4cGVjdChwZXJmb3JtYW5jZT8uY29udmVyc2lvblJhdGUpLnRvQmUoMC40Mik7XG4gICAgICBleHBlY3QocGVyZm9ybWFuY2U/LnJldGVudGlvblJhdGUpLnRvQmUoMC44OCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQ29tcGxldGUgQW5hbHl0aWNzIFdvcmtmbG93IFZlcmlmaWVkOicpO1xuICAgICAgY29uc29sZS5sb2coYCAgIE1hdGNoIFNjb3JlOiAke2NvbXBsZXRlQW5hbHl0aWNzPy50b3RhbFNjb3JlfS8xMDBgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAgICBDb21wYXRpYmlsaXR5OiAke3JlbGF0ZWRDb21wYXRpYmlsaXR5Py5vdmVyYWxsQ29tcGF0aWJpbGl0eX0vMTAwYCk7XG4gICAgICBjb25zb2xlLmxvZyhgICAgQ2xpZW50IFNhdGlzZmFjdGlvbjogJHtjb21wbGV0ZUFuYWx5dGljcz8uZmVlZGJhY2tbMF0ub3ZlcmFsbFNhdGlzZmFjdGlvbn0vNWApO1xuICAgICAgY29uc29sZS5sb2coYCAgIEFsZ29yaXRobSBQZXJmb3JtYW5jZTogJHsocGVyZm9ybWFuY2U/LmNvbnZlcnNpb25SYXRlISAqIDEwMCkudG9GaXhlZCgxKX0lIGNvbnZlcnNpb25gKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=