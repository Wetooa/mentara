{"version":3,"names":["cov_d9gw4feat","actualCoverage","s","domain_event_interface_1","require","SystemErrorEvent","BaseDomainEvent","constructor","data","metadata","f","errorId","exports","AuditLogEvent","resource","resourceId","SecurityIncidentEvent","incidentId","BackupCompletedEvent","backupId","SystemMaintenanceEvent","maintenanceId","ConfigurationChangedEvent","configKey","AdminActionEvent","action","b","targetUserId","DataExportRequestEvent","requestId","PerformanceAlertEvent","alertId","NotificationDeliveredEvent","notificationId"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/events/system-events.ts"],"sourcesContent":["import {\n  BaseDomainEvent,\n  EventMetadata,\n} from './interfaces/domain-event.interface';\n\n// System & Admin Events\n\nexport interface SystemErrorData {\n  errorId: string;\n  errorType:\n    | 'database'\n    | 'external_api'\n    | 'validation'\n    | 'authentication'\n    | 'authorization'\n    | 'network'\n    | 'internal';\n  errorMessage: string;\n  stackTrace: string;\n  requestId?: string;\n  userId?: string;\n  endpoint?: string;\n  httpMethod?: string;\n  severity: 'low' | 'medium' | 'high' | 'critical';\n}\n\nexport class SystemErrorEvent extends BaseDomainEvent<SystemErrorData> {\n  constructor(data: SystemErrorData, metadata?: EventMetadata) {\n    super(data.errorId, 'SystemError', data, metadata);\n  }\n}\n\nexport interface AuditLogData {\n  action: string;\n  resource: string;\n  resourceId: string;\n  userId?: string;\n  userRole?: string;\n  ipAddress?: string;\n  userAgent?: string;\n  changesMade?: Record<string, any>;\n  previousValues?: Record<string, any>;\n  success: boolean;\n  errorMessage?: string;\n}\n\nexport class AuditLogEvent extends BaseDomainEvent<AuditLogData> {\n  constructor(data: AuditLogData, metadata?: EventMetadata) {\n    super(`${data.resource}_${data.resourceId}`, 'AuditLog', data, metadata);\n  }\n}\n\nexport interface SecurityIncidentData {\n  incidentId: string;\n  incidentType:\n    | 'brute_force'\n    | 'suspicious_login'\n    | 'data_breach'\n    | 'unauthorized_access'\n    | 'malicious_request';\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  description: string;\n  affectedUserId?: string;\n  ipAddress?: string;\n  userAgent?: string;\n  endpoint?: string;\n  detectionMethod: 'automatic' | 'manual' | 'report';\n  actionTaken: string;\n}\n\nexport class SecurityIncidentEvent extends BaseDomainEvent<SecurityIncidentData> {\n  constructor(data: SecurityIncidentData, metadata?: EventMetadata) {\n    super(data.incidentId, 'SecurityIncident', data, metadata);\n  }\n}\n\nexport interface BackupCompletedData {\n  backupId: string;\n  backupType: 'full' | 'incremental' | 'differential';\n  dataSize: number; // in bytes\n  duration: number; // in seconds\n  backupLocation: string;\n  isSuccessful: boolean;\n  errorMessage?: string;\n  tablesIncluded: string[];\n}\n\nexport class BackupCompletedEvent extends BaseDomainEvent<BackupCompletedData> {\n  constructor(data: BackupCompletedData, metadata?: EventMetadata) {\n    super(data.backupId, 'Backup', data, metadata);\n  }\n}\n\nexport interface SystemMaintenanceData {\n  maintenanceId: string;\n  maintenanceType: 'scheduled' | 'emergency' | 'security_patch';\n  startTime: Date;\n  endTime?: Date;\n  estimatedDuration?: number; // in minutes\n  affectedServices: string[];\n  maintenanceReason: string;\n  status: 'scheduled' | 'in_progress' | 'completed' | 'cancelled';\n}\n\nexport class SystemMaintenanceEvent extends BaseDomainEvent<SystemMaintenanceData> {\n  constructor(data: SystemMaintenanceData, metadata?: EventMetadata) {\n    super(data.maintenanceId, 'Maintenance', data, metadata);\n  }\n}\n\nexport interface ConfigurationChangedData {\n  configKey: string;\n  oldValue: any;\n  newValue: any;\n  changedBy: string;\n  changeReason: string;\n  environment: 'development' | 'staging' | 'production';\n  requiresRestart: boolean;\n}\n\nexport class ConfigurationChangedEvent extends BaseDomainEvent<ConfigurationChangedData> {\n  constructor(data: ConfigurationChangedData, metadata?: EventMetadata) {\n    super(data.configKey, 'Configuration', data, metadata);\n  }\n}\n\nexport interface AdminActionData {\n  adminId: string;\n  action:\n    | 'user_suspend'\n    | 'user_unsuspend'\n    | 'user_delete'\n    | 'role_change'\n    | 'data_export'\n    | 'system_config';\n  targetUserId?: string;\n  targetResource?: string;\n  resourceId?: string;\n  previousState?: any;\n  newState?: any;\n  justification: string;\n  requiresApproval: boolean;\n  approvedBy?: string;\n}\n\nexport class AdminActionEvent extends BaseDomainEvent<AdminActionData> {\n  constructor(data: AdminActionData, metadata?: EventMetadata) {\n    super(\n      `${data.action}_${data.targetUserId || data.resourceId}`,\n      'AdminAction',\n      data,\n      metadata,\n    );\n  }\n}\n\nexport interface DataExportRequestData {\n  requestId: string;\n  requestedBy: string;\n  userRole: string;\n  dataType: 'user_data' | 'analytics' | 'audit_logs' | 'financial_reports';\n  filters: Record<string, any>;\n  format: 'csv' | 'json' | 'xlsx' | 'pdf';\n  dateRange: {\n    start: Date;\n    end: Date;\n  };\n  estimatedRecords: number;\n  requestReason: string;\n}\n\nexport class DataExportRequestEvent extends BaseDomainEvent<DataExportRequestData> {\n  constructor(data: DataExportRequestData, metadata?: EventMetadata) {\n    super(data.requestId, 'DataExport', data, metadata);\n  }\n}\n\nexport interface PerformanceAlertData {\n  alertId: string;\n  metricType:\n    | 'response_time'\n    | 'cpu_usage'\n    | 'memory_usage'\n    | 'disk_usage'\n    | 'database_connections'\n    | 'error_rate';\n  currentValue: number;\n  threshold: number;\n  severity: 'warning' | 'critical';\n  service: string;\n  endpoint?: string;\n  duration: number; // how long the issue has persisted in seconds\n}\n\nexport class PerformanceAlertEvent extends BaseDomainEvent<PerformanceAlertData> {\n  constructor(data: PerformanceAlertData, metadata?: EventMetadata) {\n    super(data.alertId, 'PerformanceAlert', data, metadata);\n  }\n}\n\nexport interface NotificationDeliveredData {\n  notificationId: string;\n  userId: string;\n  notificationType: 'email' | 'sms' | 'push' | 'in_app';\n  deliveryStatus: 'delivered' | 'failed' | 'bounced' | 'opened' | 'clicked';\n  deliveryProvider?: string;\n  failureReason?: string;\n  deliveredAt?: Date;\n  openedAt?: Date;\n  clickedAt?: Date;\n}\n\nexport class NotificationDeliveredEvent extends BaseDomainEvent<NotificationDeliveredData> {\n  constructor(data: NotificationDeliveredData, metadata?: EventMetadata) {\n    super(data.notificationId, 'Notification', data, metadata);\n  }\n}\n"],"mappings":"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","ignoreList":[]}