{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/interceptors/response.interceptor.ts","mappings":";;;;;;;;;AAAA,2CAKwB;AAExB,8CAAqC;AACrC,8DAAsE;AAG/D,IAAM,mBAAmB,GAAzB,MAAM,mBAAmB;IAG9B,SAAS,CACP,OAAyB,EACzB,IAAiB;QAEjB,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CACvB,IAAA,eAAG,EAAC,CAAC,IAAI,EAAE,EAAE;YACX,uEAAuE;YACvE,IAAI,IAAI,YAAY,iCAAc,EAAE,CAAC;gBACnC,OAAO,IAAI,CAAC;YACd,CAAC;YAED,2DAA2D;YAC3D,IAAI,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,SAAS,IAAI,IAAI,EAAE,CAAC;gBAC1D,OAAO,IAAsB,CAAC;YAChC,CAAC;YAED,2DAA2D;YAC3D,OAAO,iCAAc,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACtC,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;CACF,CAAA;AAxBY,kDAAmB;8BAAnB,mBAAmB;IAD/B,IAAA,mBAAU,GAAE;GACA,mBAAmB,CAwB/B","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/interceptors/response.interceptor.ts"],"sourcesContent":["import {\n  Injectable,\n  NestInterceptor,\n  ExecutionContext,\n  CallHandler,\n} from '@nestjs/common';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ApiResponse, ApiResponseDto } from '../dto/api-response.dto';\n\n@Injectable()\nexport class ResponseInterceptor<T>\n  implements NestInterceptor<T, ApiResponse<T>>\n{\n  intercept(\n    context: ExecutionContext,\n    next: CallHandler,\n  ): Observable<ApiResponse<T>> {\n    return next.handle().pipe(\n      map((data) => {\n        // If the controller already returns an ApiResponseDto, pass it through\n        if (data instanceof ApiResponseDto) {\n          return data;\n        }\n\n        // If the data has success property, it's already formatted\n        if (data && typeof data === 'object' && 'success' in data) {\n          return data as ApiResponse<T>;\n        }\n\n        // Otherwise, wrap the data in our standard response format\n        return ApiResponseDto.success(data);\n      }),\n    );\n  }\n}\n"],"version":3}