{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/therapist/controllers/therapist-request.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/therapist/controllers/therapist-request.controller.spec.ts"],"sourcesContent":["/**\n * Comprehensive Test Suite for TherapistRequestController\n * Tests all therapist request management endpoints with security, validation, and error handling\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { BadRequestException, NotFoundException } from '@nestjs/common';\nimport { JwtAuthGuard } from '../../auth/guards/jwt-auth.guard';\nimport { TherapistRequestController } from './therapist-request.controller';\nimport { TherapistRequestService } from '../services/therapist-request.service';\nimport { SecurityGuardTestUtils, RoleBasedTestUtils } from '../../test-utils/auth-testing-helpers';\nimport { MockBuilder, TestDataGenerator, TestAssertions } from '../../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../../test-utils/index';\n\ndescribe('TherapistRequestController', () => {\n  let controller: TherapistRequestController;\n  let therapistRequestService: TherapistRequestService;\n  let module: TestingModule;\n\n  // Mock TherapistRequestService\n  const mockTherapistRequestService = {\n    getTherapistRequests: jest.fn(),\n    acceptClientRequest: jest.fn(),\n    declineClientRequest: jest.fn(),\n    performBulkAction: jest.fn(),\n    getTherapistRequestStatistics: jest.fn(),\n  };\n\n  // Mock JwtAuthGuard\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test IDs\n  const validRequestId = '87654321-4321-4321-4321-210987654321'; // 36 chars UUID format\n  const validClientId = '12345678-1234-1234-1234-123456789012'; // 36 chars UUID format\n\n  // Test data\n  const mockRequest = {\n    id: validRequestId,\n    clientId: validClientId,\n    therapistId: TEST_USER_IDS.THERAPIST,\n    status: 'PENDING',\n    priority: 'NORMAL',\n    message: 'I would like to schedule a session',\n    requestedAt: new Date(),\n    respondedAt: null,\n    expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days from now\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    client: {\n      id: validClientId,\n      firstName: 'John',\n      lastName: 'Doe',\n      email: 'john@example.com',\n    },\n  };\n\n  const mockPaginatedRequests = {\n    requests: [mockRequest],\n    pagination: {\n      page: 1,\n      limit: 10,\n      totalCount: 1,\n      totalPages: 1,\n      hasNext: false,\n      hasPrev: false,\n    },\n    summary: {\n      totalRequests: 1,\n      pendingRequests: 1,\n      acceptedRequests: 0,\n      declinedRequests: 0,\n      expiredRequests: 0,\n    },\n  };\n\n  const mockStatistics = {\n    totalReceived: 10,\n    pending: 3,\n    accepted: 5,\n    declined: 2,\n    expired: 0,\n    cancelled: 0,\n    withdrawn: 0,\n    averageResponseTime: 4.5,\n    acceptanceRate: 71.4,\n  };\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [TherapistRequestController],\n      providers: [\n        {\n          provide: TherapistRequestService,\n          useValue: mockTherapistRequestService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .compile();\n\n    controller = module.get<TherapistRequestController>(TherapistRequestController);\n    therapistRequestService = module.get<TherapistRequestService>(TherapistRequestService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have therapistRequestService injected', () => {\n      expect(therapistRequestService).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', TherapistRequestController);\n      expect(guards).toContain(JwtAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', TherapistRequestController);\n      expect(controllerMetadata).toBe('therapist/requests');\n    });\n  });\n\n  describe('GET /therapist/requests', () => {\n    const filters = {\n      page: 1,\n      limit: 10,\n      sortBy: 'requestedAt',\n      sortOrder: 'desc',\n      status: 'PENDING',\n    };\n\n    it('should get client requests with filters', async () => {\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(mockPaginatedRequests);\n\n      const result = await controller.getClientRequests(filters, TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual(mockPaginatedRequests);\n      expect(therapistRequestService.getTherapistRequests).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        filters,\n      );\n    });\n\n    it('should handle empty filters', async () => {\n      const emptyFilters = {};\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(mockPaginatedRequests);\n\n      const result = await controller.getClientRequests(emptyFilters, TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual(mockPaginatedRequests);\n      expect(therapistRequestService.getTherapistRequests).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        emptyFilters,\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database connection failed');\n      mockTherapistRequestService.getTherapistRequests.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getClientRequests(filters, TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /therapist/requests/pending', () => {\n    it('should get pending requests successfully', async () => {\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(mockPaginatedRequests);\n\n      const result = await controller.getPendingRequests(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual({\n        success: true,\n        pendingRequests: [mockRequest],\n        totalPending: 1,\n        summary: mockPaginatedRequests.summary,\n      });\n      expect(therapistRequestService.getTherapistRequests).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        {\n          status: 'PENDING',\n          page: 1,\n          limit: 50,\n          sortBy: 'requestedAt',\n          sortOrder: 'asc',\n          includeExpired: false,\n        },\n      );\n    });\n\n    it('should handle no pending requests', async () => {\n      const emptyResult = {\n        ...mockPaginatedRequests,\n        requests: [],\n        pagination: { ...mockPaginatedRequests.pagination, totalCount: 0 },\n      };\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(emptyResult);\n\n      const result = await controller.getPendingRequests(TEST_USER_IDS.THERAPIST);\n\n      expect(result.pendingRequests).toEqual([]);\n      expect(result.totalPending).toBe(0);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database query failed');\n      mockTherapistRequestService.getTherapistRequests.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getPendingRequests(TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /therapist/requests/priority', () => {\n    it('should get high priority requests successfully', async () => {\n      const highPriorityResult = {\n        ...mockPaginatedRequests,\n        requests: [{ ...mockRequest, priority: 'HIGH' }],\n      };\n      const urgentResult = {\n        ...mockPaginatedRequests,\n        requests: [{ ...mockRequest, priority: 'URGENT' }],\n      };\n      mockTherapistRequestService.getTherapistRequests\n        .mockResolvedValueOnce(highPriorityResult)\n        .mockResolvedValueOnce(urgentResult);\n\n      const result = await controller.getHighPriorityRequests(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual({\n        success: true,\n        highPriorityRequests: [{ ...mockRequest, priority: 'HIGH' }],\n        urgentRequests: [{ ...mockRequest, priority: 'URGENT' }],\n        totalHighPriority: 1,\n        totalUrgent: 1,\n      });\n      expect(therapistRequestService.getTherapistRequests).toHaveBeenCalledTimes(2);\n    });\n\n    it('should handle no high priority requests', async () => {\n      const emptyResult = {\n        ...mockPaginatedRequests,\n        requests: [],\n        pagination: { ...mockPaginatedRequests.pagination, totalCount: 0 },\n      };\n      mockTherapistRequestService.getTherapistRequests\n        .mockResolvedValueOnce(emptyResult)\n        .mockResolvedValueOnce(emptyResult);\n\n      const result = await controller.getHighPriorityRequests(TEST_USER_IDS.THERAPIST);\n\n      expect(result.highPriorityRequests).toEqual([]);\n      expect(result.urgentRequests).toEqual([]);\n      expect(result.totalHighPriority).toBe(0);\n      expect(result.totalUrgent).toBe(0);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database query failed');\n      mockTherapistRequestService.getTherapistRequests.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getHighPriorityRequests(TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /therapist/requests/:id', () => {\n    it('should get request details successfully', async () => {\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(mockPaginatedRequests);\n\n      const result = await controller.getRequestDetails(validRequestId, TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual({\n        success: true,\n        request: mockRequest,\n      });\n      expect(therapistRequestService.getTherapistRequests).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        {\n          page: 1,\n          limit: 1,\n          sortBy: 'requestedAt',\n          sortOrder: 'desc',\n          includeExpired: false,\n        },\n      );\n    });\n\n    it('should validate request ID format', async () => {\n      const invalidRequestId = 'invalid-id';\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.getRequestDetails(invalidRequestId, TEST_USER_IDS.THERAPIST),\n        BadRequestException,\n        'Invalid request ID format',\n      );\n    });\n\n    it('should handle request not found', async () => {\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue({\n        requests: [],\n        pagination: { page: 1, limit: 1, totalCount: 0, totalPages: 0, hasNext: false, hasPrev: false },\n      });\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.getRequestDetails(validRequestId, TEST_USER_IDS.THERAPIST),\n        NotFoundException,\n        'Request with ID 87654321-4321-4321-4321-210987654321 not found or not accessible',\n      );\n    });\n\n    it('should handle empty request ID', async () => {\n      await TestAssertions.expectToThrowNestException(\n        () => controller.getRequestDetails('', TEST_USER_IDS.THERAPIST),\n        BadRequestException,\n        'Invalid request ID format',\n      );\n    });\n  });\n\n  describe('PUT /therapist/requests/:id/accept', () => {\n    const responseDto = {\n      message: 'I would be happy to work with you',\n      availableSlots: ['2024-01-15T10:00:00Z', '2024-01-16T14:00:00Z'],\n    };\n\n    it('should accept request successfully', async () => {\n      const acceptResult = {\n        success: true,\n        message: 'Request accepted successfully',\n        request: { ...mockRequest, status: 'ACCEPTED' },\n      };\n      mockTherapistRequestService.acceptClientRequest.mockResolvedValue(acceptResult);\n\n      const result = await controller.acceptRequest(\n        validRequestId,\n        responseDto,\n        TEST_USER_IDS.THERAPIST,\n      );\n\n      expect(result).toEqual(acceptResult);\n      expect(therapistRequestService.acceptClientRequest).toHaveBeenCalledWith(\n        validRequestId,\n        TEST_USER_IDS.THERAPIST,\n        responseDto,\n      );\n    });\n\n    it('should validate request ID format', async () => {\n      const invalidRequestId = 'invalid-id';\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.acceptRequest(invalidRequestId, responseDto, TEST_USER_IDS.THERAPIST),\n        BadRequestException,\n        'Invalid request ID format',\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Request cannot be accepted');\n      mockTherapistRequestService.acceptClientRequest.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.acceptRequest(validRequestId, responseDto, TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('PUT /therapist/requests/:id/decline', () => {\n    const responseDto = {\n      message: 'Unfortunately, I am not available at this time',\n      reason: 'AVAILABILITY_CONFLICT',\n    };\n\n    it('should decline request successfully', async () => {\n      const declineResult = {\n        success: true,\n        message: 'Request declined successfully',\n        request: { ...mockRequest, status: 'DECLINED' },\n      };\n      mockTherapistRequestService.declineClientRequest.mockResolvedValue(declineResult);\n\n      const result = await controller.declineRequest(\n        validRequestId,\n        responseDto,\n        TEST_USER_IDS.THERAPIST,\n      );\n\n      expect(result).toEqual(declineResult);\n      expect(therapistRequestService.declineClientRequest).toHaveBeenCalledWith(\n        validRequestId,\n        TEST_USER_IDS.THERAPIST,\n        responseDto,\n      );\n    });\n\n    it('should validate request ID format', async () => {\n      const invalidRequestId = 'invalid-id';\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.declineRequest(invalidRequestId, responseDto, TEST_USER_IDS.THERAPIST),\n        BadRequestException,\n        'Invalid request ID format',\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Request cannot be declined');\n      mockTherapistRequestService.declineClientRequest.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.declineRequest(validRequestId, responseDto, TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('POST /therapist/requests/bulk-action', () => {\n    const bulkActionDto = {\n      action: 'accept',\n      requestIds: [validRequestId, '11111111-2222-3333-4444-555555555555'],\n      message: 'Bulk acceptance message',\n    };\n\n    it('should perform bulk action successfully', async () => {\n      const bulkResult = {\n        success: true,\n        processedCount: 2,\n        failedCount: 0,\n        results: [\n          { requestId: validRequestId, status: 'ACCEPTED' },\n          { requestId: '11111111-2222-3333-4444-555555555555', status: 'ACCEPTED' },\n        ],\n      };\n      mockTherapistRequestService.performBulkAction.mockResolvedValue(bulkResult);\n\n      const result = await controller.performBulkAction(bulkActionDto, TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual(bulkResult);\n      expect(therapistRequestService.performBulkAction).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        bulkActionDto,\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Bulk action failed');\n      mockTherapistRequestService.performBulkAction.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.performBulkAction(bulkActionDto, TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /therapist/requests/statistics', () => {\n    it('should get request statistics successfully', async () => {\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(mockStatistics);\n\n      const result = await controller.getRequestStatistics(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual(mockStatistics);\n      expect(therapistRequestService.getTherapistRequestStatistics).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Statistics calculation failed');\n      mockTherapistRequestService.getTherapistRequestStatistics.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getRequestStatistics(TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /therapist/requests/recent', () => {\n    it('should get recent requests successfully', async () => {\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(mockPaginatedRequests);\n\n      const result = await controller.getRecentRequests(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual({\n        success: true,\n        recentRequests: [mockRequest],\n        hasMore: false,\n        summary: mockPaginatedRequests.summary,\n      });\n      expect(therapistRequestService.getTherapistRequests).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        {\n          page: 1,\n          limit: 10,\n          sortBy: 'requestedAt',\n          sortOrder: 'desc',\n          includeExpired: false,\n        },\n      );\n    });\n\n    it('should indicate when there are more requests', async () => {\n      const moreRequestsResult = {\n        ...mockPaginatedRequests,\n        pagination: { ...mockPaginatedRequests.pagination, totalCount: 20 },\n      };\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(moreRequestsResult);\n\n      const result = await controller.getRecentRequests(TEST_USER_IDS.THERAPIST);\n\n      expect(result.hasMore).toBe(true);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database query failed');\n      mockTherapistRequestService.getTherapistRequests.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getRecentRequests(TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /therapist/requests/dashboard/summary', () => {\n    it('should get dashboard summary successfully', async () => {\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(mockStatistics);\n      mockTherapistRequestService.getTherapistRequests\n        .mockResolvedValueOnce(mockPaginatedRequests) // pending requests\n        .mockResolvedValueOnce(mockPaginatedRequests); // high priority requests\n\n      const result = await controller.getDashboardSummary(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual({\n        success: true,\n        statistics: mockStatistics,\n        recentPendingRequests: [mockRequest],\n        highPriorityRequests: [mockRequest],\n        actionRequired: true,\n        hasUrgentRequests: false,\n      });\n      expect(therapistRequestService.getTherapistRequestStatistics).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n      );\n      expect(therapistRequestService.getTherapistRequests).toHaveBeenCalledTimes(2);\n    });\n\n    it('should handle no pending requests', async () => {\n      const emptyResult = {\n        ...mockPaginatedRequests,\n        requests: [],\n        pagination: { ...mockPaginatedRequests.pagination, totalCount: 0 },\n      };\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(mockStatistics);\n      mockTherapistRequestService.getTherapistRequests\n        .mockResolvedValueOnce(emptyResult)\n        .mockResolvedValueOnce(emptyResult);\n\n      const result = await controller.getDashboardSummary(TEST_USER_IDS.THERAPIST);\n\n      expect(result.actionRequired).toBe(false);\n      expect(result.hasUrgentRequests).toBe(false);\n    });\n\n    it('should detect urgent requests', async () => {\n      const urgentRequest = { ...mockRequest, priority: 'URGENT' };\n      const urgentResult = {\n        ...mockPaginatedRequests,\n        requests: [urgentRequest],\n      };\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(mockStatistics);\n      mockTherapistRequestService.getTherapistRequests\n        .mockResolvedValueOnce(mockPaginatedRequests)\n        .mockResolvedValueOnce(urgentResult);\n\n      const result = await controller.getDashboardSummary(TEST_USER_IDS.THERAPIST);\n\n      expect(result.hasUrgentRequests).toBe(true);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Dashboard query failed');\n      mockTherapistRequestService.getTherapistRequestStatistics.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getDashboardSummary(TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /therapist/requests/client/:clientId/history', () => {\n    it('should get client request history successfully', async () => {\n      const historyResult = {\n        ...mockPaginatedRequests,\n        requests: [mockRequest, { ...mockRequest, status: 'ACCEPTED' }],\n        pagination: { ...mockPaginatedRequests.pagination, totalCount: 2 },\n      };\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(historyResult);\n\n      const result = await controller.getClientRequestHistory(\n        validClientId,\n        TEST_USER_IDS.THERAPIST,\n      );\n\n      expect(result).toEqual({\n        success: true,\n        clientId: validClientId,\n        requestHistory: [mockRequest, { ...mockRequest, status: 'ACCEPTED' }],\n        totalRequests: 2,\n        hasActiveRelationship: true,\n      });\n      expect(therapistRequestService.getTherapistRequests).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        {\n          clientId: validClientId,\n          page: 1,\n          limit: 50,\n          sortBy: 'requestedAt',\n          sortOrder: 'desc',\n          includeExpired: true,\n        },\n      );\n    });\n\n    it('should validate client ID format', async () => {\n      const invalidClientId = 'invalid-id';\n\n      await TestAssertions.expectToThrowNestException(\n        () => controller.getClientRequestHistory(invalidClientId, TEST_USER_IDS.THERAPIST),\n        BadRequestException,\n        'Invalid client ID format',\n      );\n    });\n\n    it('should handle no request history', async () => {\n      const emptyResult = {\n        ...mockPaginatedRequests,\n        requests: [],\n        pagination: { ...mockPaginatedRequests.pagination, totalCount: 0 },\n      };\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(emptyResult);\n\n      const result = await controller.getClientRequestHistory(\n        validClientId,\n        TEST_USER_IDS.THERAPIST,\n      );\n\n      expect(result.requestHistory).toEqual([]);\n      expect(result.totalRequests).toBe(0);\n      expect(result.hasActiveRelationship).toBe(false);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('History query failed');\n      mockTherapistRequestService.getTherapistRequests.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getClientRequestHistory(validClientId, TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /therapist/requests/filters/options', () => {\n    it('should get filter options successfully', async () => {\n      const result = await controller.getFilterOptions(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual({\n        success: true,\n        filterOptions: {\n          statuses: ['PENDING', 'ACCEPTED', 'DECLINED', 'EXPIRED', 'CANCELLED', 'WITHDRAWN'],\n          priorities: ['LOW', 'NORMAL', 'HIGH', 'URGENT'],\n          sortOptions: [\n            { value: 'requestedAt', label: 'Request Date' },\n            { value: 'respondedAt', label: 'Response Date' },\n            { value: 'priority', label: 'Priority' },\n            { value: 'status', label: 'Status' },\n          ],\n          sortOrders: [\n            { value: 'desc', label: 'Newest First' },\n            { value: 'asc', label: 'Oldest First' },\n          ],\n          bulkActions: [\n            { value: 'accept', label: 'Accept Selected' },\n            { value: 'decline', label: 'Decline Selected' },\n            { value: 'mark_reviewed', label: 'Mark as Reviewed' },\n          ],\n        },\n      });\n    });\n\n    it('should return consistent filter options', async () => {\n      const result1 = await controller.getFilterOptions(TEST_USER_IDS.THERAPIST);\n      const result2 = await controller.getFilterOptions('another-therapist-id');\n\n      expect(result1).toEqual(result2);\n    });\n  });\n\n  describe('GET /therapist/requests/count/pending', () => {\n    it('should get pending count successfully', async () => {\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(mockStatistics);\n\n      const result = await controller.getPendingCount(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual({\n        success: true,\n        pendingCount: 3,\n        totalReceived: 10,\n        needsAttention: true,\n      });\n      expect(therapistRequestService.getTherapistRequestStatistics).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n      );\n    });\n\n    it('should handle no pending requests', async () => {\n      const noPendingStats = { ...mockStatistics, pending: 0 };\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(noPendingStats);\n\n      const result = await controller.getPendingCount(TEST_USER_IDS.THERAPIST);\n\n      expect(result.pendingCount).toBe(0);\n      expect(result.needsAttention).toBe(false);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Statistics calculation failed');\n      mockTherapistRequestService.getTherapistRequestStatistics.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getPendingCount(TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('GET /therapist/requests/analytics/response-time', () => {\n    it('should get response time analytics successfully', async () => {\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(mockStatistics);\n\n      const result = await controller.getResponseTimeAnalytics(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toEqual({\n        success: true,\n        responseTimeAnalytics: {\n          averageHours: 4.5,\n          performance: 'good',\n          acceptanceRate: 71.4,\n          totalResponded: 7,\n        },\n        recommendations: [\n          \"You're doing great with both response time and acceptance rate!\",\n        ],\n      });\n      expect(therapistRequestService.getTherapistRequestStatistics).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n      );\n    });\n\n    it('should categorize response time as excellent', async () => {\n      const excellentStats = { ...mockStatistics, averageResponseTime: 1.5 };\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(excellentStats);\n\n      const result = await controller.getResponseTimeAnalytics(TEST_USER_IDS.THERAPIST);\n\n      expect(result.responseTimeAnalytics.performance).toBe('excellent');\n    });\n\n    it('should categorize response time as needs improvement', async () => {\n      const poorStats = { ...mockStatistics, averageResponseTime: 48, acceptanceRate: 20 };\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(poorStats);\n\n      const result = await controller.getResponseTimeAnalytics(TEST_USER_IDS.THERAPIST);\n\n      expect(result.responseTimeAnalytics.performance).toBe('needs_improvement');\n      expect(result.recommendations).toContain(\n        'Consider responding to client requests within 24 hours for better client experience',\n      );\n      expect(result.recommendations).toContain(\n        'Your acceptance rate is low. Consider reviewing your availability and client preferences',\n      );\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Analytics calculation failed');\n      mockTherapistRequestService.getTherapistRequestStatistics.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getResponseTimeAnalytics(TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('Helper Methods', () => {\n    it('should categorize response time correctly', () => {\n      expect((controller as any).categorizeResponseTime(1)).toBe('excellent');\n      expect((controller as any).categorizeResponseTime(4)).toBe('good');\n      expect((controller as any).categorizeResponseTime(12)).toBe('fair');\n      expect((controller as any).categorizeResponseTime(48)).toBe('needs_improvement');\n    });\n\n    it('should generate appropriate recommendations', () => {\n      const recommendations1 = (controller as any).getResponseTimeRecommendations(2, 85);\n      expect(recommendations1).toContain(\"Excellent acceptance rate! You're providing great accessibility to clients\");\n      expect(recommendations1).toContain(\"You're doing great with both response time and acceptance rate!\");\n\n      const recommendations2 = (controller as any).getResponseTimeRecommendations(48, 20);\n      expect(recommendations2).toContain('Consider responding to client requests within 24 hours for better client experience');\n      expect(recommendations2).toContain('Your acceptance rate is low. Consider reviewing your availability and client preferences');\n    });\n  });\n\n  describe('Integration Testing', () => {\n    it('should handle complete request management workflow', async () => {\n      // Step 1: Get pending requests\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(mockPaginatedRequests);\n      const pendingResult = await controller.getPendingRequests(TEST_USER_IDS.THERAPIST);\n      expect(pendingResult.totalPending).toBe(1);\n\n      // Step 2: Get request details\n      const detailsResult = await controller.getRequestDetails(validRequestId, TEST_USER_IDS.THERAPIST);\n      expect(detailsResult.success).toBe(true);\n\n      // Step 3: Accept request\n      const acceptResult = {\n        success: true,\n        message: 'Request accepted successfully',\n        request: { ...mockRequest, status: 'ACCEPTED' },\n      };\n      mockTherapistRequestService.acceptClientRequest.mockResolvedValue(acceptResult);\n      const acceptedResult = await controller.acceptRequest(\n        validRequestId,\n        { message: 'I would be happy to work with you' },\n        TEST_USER_IDS.THERAPIST,\n      );\n      expect(acceptedResult).toEqual(acceptResult);\n\n      // Step 4: Check statistics\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(mockStatistics);\n      const statsResult = await controller.getRequestStatistics(TEST_USER_IDS.THERAPIST);\n      expect(statsResult).toEqual(mockStatistics);\n    });\n\n    it('should handle bulk action workflow', async () => {\n      // Step 1: Get pending requests\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(mockPaginatedRequests);\n      const pendingResult = await controller.getPendingRequests(TEST_USER_IDS.THERAPIST);\n      expect(pendingResult.totalPending).toBe(1);\n\n      // Step 2: Perform bulk action\n      const bulkResult = {\n        success: true,\n        processedCount: 2,\n        failedCount: 0,\n        results: [\n          { requestId: validRequestId, status: 'ACCEPTED' },\n          { requestId: '11111111-2222-3333-4444-555555555555', status: 'ACCEPTED' },\n        ],\n      };\n      mockTherapistRequestService.performBulkAction.mockResolvedValue(bulkResult);\n      const bulkActionResult = await controller.performBulkAction(\n        {\n          action: 'accept',\n          requestIds: [validRequestId, '11111111-2222-3333-4444-555555555555'],\n          message: 'Bulk acceptance',\n        },\n        TEST_USER_IDS.THERAPIST,\n      );\n      expect(bulkActionResult).toEqual(bulkResult);\n\n      // Step 3: Check updated statistics\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(mockStatistics);\n      const statsResult = await controller.getRequestStatistics(TEST_USER_IDS.THERAPIST);\n      expect(statsResult).toEqual(mockStatistics);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle service unavailable scenarios', async () => {\n      const serviceError = new Error('Service temporarily unavailable');\n      mockTherapistRequestService.getTherapistRequests.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.getClientRequests({ page: 1, limit: 10 }, TEST_USER_IDS.THERAPIST),\n      ).rejects.toThrow(serviceError);\n    });\n\n    it('should handle concurrent access issues', async () => {\n      const concurrencyError = new Error('Resource is locked');\n      mockTherapistRequestService.acceptClientRequest.mockRejectedValue(concurrencyError);\n\n      await expect(\n        controller.acceptRequest(\n          validRequestId,\n          { message: 'Accept message' },\n          TEST_USER_IDS.THERAPIST,\n        ),\n      ).rejects.toThrow(concurrencyError);\n    });\n\n    it('should handle malformed request data', async () => {\n      const malformedFilters = { invalid: 'data' };\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(mockPaginatedRequests);\n\n      const result = await controller.getClientRequests(malformedFilters as any, TEST_USER_IDS.THERAPIST);\n\n      expect(therapistRequestService.getTherapistRequests).toHaveBeenCalledWith(\n        TEST_USER_IDS.THERAPIST,\n        malformedFilters,\n      );\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted request response', async () => {\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(mockPaginatedRequests);\n\n      const result = await controller.getClientRequests({ page: 1, limit: 10 }, TEST_USER_IDS.THERAPIST);\n\n      expect(result).toHaveProperty('requests');\n      expect(result).toHaveProperty('pagination');\n      expect(result).toHaveProperty('summary');\n      expect(Array.isArray(result.requests)).toBe(true);\n      expect(typeof result.pagination.totalCount).toBe('number');\n    });\n\n    it('should return properly formatted statistics response', async () => {\n      mockTherapistRequestService.getTherapistRequestStatistics.mockResolvedValue(mockStatistics);\n\n      const result = await controller.getRequestStatistics(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toHaveProperty('totalReceived');\n      expect(result).toHaveProperty('pending');\n      expect(result).toHaveProperty('accepted');\n      expect(result).toHaveProperty('declined');\n      expect(result).toHaveProperty('averageResponseTime');\n      expect(result).toHaveProperty('acceptanceRate');\n      expect(typeof result.totalReceived).toBe('number');\n      expect(typeof result.averageResponseTime).toBe('number');\n    });\n\n    it('should return properly formatted success responses', async () => {\n      mockTherapistRequestService.getTherapistRequests.mockResolvedValue(mockPaginatedRequests);\n\n      const result = await controller.getRecentRequests(TEST_USER_IDS.THERAPIST);\n\n      expect(result).toHaveProperty('success');\n      expect(result).toHaveProperty('recentRequests');\n      expect(result).toHaveProperty('hasMore');\n      expect(result.success).toBe(true);\n      expect(Array.isArray(result.recentRequests)).toBe(true);\n      expect(typeof result.hasMore).toBe('boolean');\n    });\n  });\n});"],"version":3}