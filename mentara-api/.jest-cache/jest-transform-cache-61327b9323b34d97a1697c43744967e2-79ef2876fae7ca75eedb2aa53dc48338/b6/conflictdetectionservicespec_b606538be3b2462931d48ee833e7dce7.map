{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/booking/services/conflict-detection.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/booking/services/conflict-detection.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { ConflictDetectionService, TimeRange, ConflictResult } from './conflict-detection.service';\nimport { PrismaService } from '../../providers/prisma-client.provider';\nimport { BadRequestException } from '@nestjs/common';\n\ndescribe('ConflictDetectionService', () => {\n  let service: ConflictDetectionService;\n  let prismaService: jest.Mocked<PrismaService>;\n\n  const mockMeeting = {\n    id: 'meeting-123',\n    therapistId: 'therapist-123',\n    clientId: 'client-123',\n    startTime: new Date('2024-01-15T10:00:00Z'),\n    endTime: new Date('2024-01-15T11:00:00Z'),\n    duration: 60,\n    status: 'SCHEDULED',\n    client: {\n      user: {\n        firstName: 'John',\n        lastName: 'Doe',\n      },\n    },\n    therapist: {\n      user: {\n        firstName: 'Dr. Jane',\n        lastName: 'Smith',\n      },\n    },\n  };\n\n  const mockConflictingMeeting = {\n    id: 'conflicting-meeting-456',\n    therapistId: 'therapist-123',\n    clientId: 'client-456',\n    startTime: new Date('2024-01-15T10:30:00Z'),\n    endTime: new Date('2024-01-15T11:30:00Z'),\n    duration: 60,\n    status: 'CONFIRMED',\n    client: {\n      user: {\n        firstName: 'Alice',\n        lastName: 'Johnson',\n      },\n    },\n    therapist: {\n      user: {\n        firstName: 'Dr. Jane',\n        lastName: 'Smith',\n      },\n    },\n  };\n\n  const mockTimeRange: TimeRange = {\n    startTime: new Date('2024-01-15T10:00:00Z'),\n    endTime: new Date('2024-01-15T11:00:00Z'),\n  };\n\n  beforeEach(async () => {\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        ConflictDetectionService,\n        {\n          provide: PrismaService,\n          useValue: {\n            meeting: {\n              findMany: jest.fn(),\n            },\n          },\n        },\n      ],\n    }).compile();\n\n    service = module.get<ConflictDetectionService>(ConflictDetectionService);\n    prismaService = module.get(PrismaService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('checkSchedulingConflicts', () => {\n    it('should return no conflicts when no meetings overlap', async () => {\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.checkSchedulingConflicts(\n        'therapist-123',\n        'client-123',\n        new Date('2024-01-15T10:00:00Z'),\n        60,\n      );\n\n      expect(result).toEqual({\n        hasConflict: false,\n        conflictingMeetings: [],\n        conflictType: 'none',\n      });\n    });\n\n    it('should detect therapist conflicts', async () => {\n      prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);\n\n      const result = await service.checkSchedulingConflicts(\n        'therapist-123',\n        'client-789',\n        new Date('2024-01-15T10:30:00Z'),\n        60,\n      );\n\n      expect(result).toEqual({\n        hasConflict: true,\n        conflictingMeetings: [mockConflictingMeeting],\n        conflictType: 'therapist',\n      });\n      expect(prismaService.meeting.findMany).toHaveBeenCalledWith({\n        where: {\n          OR: [\n            {\n              therapistId: 'therapist-123',\n              startTime: { lt: new Date('2024-01-15T11:30:00Z') },\n              OR: [\n                { endTime: { gt: new Date('2024-01-15T10:30:00Z') } },\n                {\n                  AND: [\n                    { endTime: null },\n                    { startTime: { gte: new Date('2024-01-15T10:30:00Z') } },\n                  ],\n                },\n              ],\n              status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },\n            },\n            {\n              clientId: 'client-789',\n              startTime: { lt: new Date('2024-01-15T11:30:00Z') },\n              OR: [\n                { endTime: { gt: new Date('2024-01-15T10:30:00Z') } },\n                {\n                  AND: [\n                    { endTime: null },\n                    { startTime: { gte: new Date('2024-01-15T10:30:00Z') } },\n                  ],\n                },\n              ],\n              status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },\n            },\n          ],\n        },\n        include: {\n          client: {\n            select: {\n              user: {\n                select: { firstName: true, lastName: true },\n              },\n            },\n          },\n          therapist: {\n            select: {\n              user: {\n                select: { firstName: true, lastName: true },\n              },\n            },\n          },\n        },\n      });\n    });\n\n    it('should detect client conflicts', async () => {\n      const clientConflictMeeting = {\n        ...mockConflictingMeeting,\n        therapistId: 'therapist-456',\n        clientId: 'client-123',\n      };\n      prismaService.meeting.findMany.mockResolvedValue([clientConflictMeeting]);\n\n      const result = await service.checkSchedulingConflicts(\n        'therapist-456',\n        'client-123',\n        new Date('2024-01-15T10:30:00Z'),\n        60,\n      );\n\n      expect(result).toEqual({\n        hasConflict: true,\n        conflictingMeetings: [clientConflictMeeting],\n        conflictType: 'client',\n      });\n    });\n\n    it('should detect both therapist and client conflicts', async () => {\n      const therapistConflict = { ...mockConflictingMeeting, clientId: 'client-other' };\n      const clientConflict = { ...mockConflictingMeeting, therapistId: 'therapist-other' };\n      prismaService.meeting.findMany.mockResolvedValue([therapistConflict, clientConflict]);\n\n      const result = await service.checkSchedulingConflicts(\n        'therapist-123',\n        'client-123',\n        new Date('2024-01-15T10:30:00Z'),\n        60,\n      );\n\n      expect(result).toEqual({\n        hasConflict: true,\n        conflictingMeetings: [therapistConflict, clientConflict],\n        conflictType: 'both',\n      });\n    });\n\n    it('should handle edge case time overlaps', async () => {\n      const edgeConflictMeeting = {\n        ...mockConflictingMeeting,\n        startTime: new Date('2024-01-15T10:59:59Z'),\n        endTime: new Date('2024-01-15T11:59:59Z'),\n      };\n      prismaService.meeting.findMany.mockResolvedValue([edgeConflictMeeting]);\n\n      const result = await service.checkSchedulingConflicts(\n        'therapist-123',\n        'client-789',\n        new Date('2024-01-15T10:00:00Z'),\n        60,\n      );\n\n      expect(result.hasConflict).toBe(true);\n      expect(result.conflictingMeetings).toHaveLength(1);\n    });\n  });\n\n  describe('checkTherapistConflicts', () => {\n    it('should find conflicts in therapist schedule', async () => {\n      prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);\n\n      const result = await service.checkTherapistConflicts('therapist-123', mockTimeRange);\n\n      expect(result).toEqual([mockConflictingMeeting]);\n      expect(prismaService.meeting.findMany).toHaveBeenCalledWith({\n        where: {\n          OR: [\n            {\n              therapistId: 'therapist-123',\n              startTime: { lt: mockTimeRange.endTime },\n              OR: [\n                { endTime: { gt: mockTimeRange.startTime } },\n                {\n                  AND: [\n                    { endTime: null },\n                    { startTime: { gte: mockTimeRange.startTime } },\n                  ],\n                },\n              ],\n              status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },\n            },\n          ],\n        },\n        include: {\n          client: {\n            select: {\n              user: {\n                select: { firstName: true, lastName: true },\n              },\n            },\n          },\n          therapist: {\n            select: {\n              user: {\n                select: { firstName: true, lastName: true },\n              },\n            },\n          },\n        },\n      });\n    });\n\n    it('should return empty array when no conflicts', async () => {\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.checkTherapistConflicts('therapist-123', mockTimeRange);\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle legacy meetings without endTime', async () => {\n      const legacyMeeting = {\n        ...mockConflictingMeeting,\n        endTime: null,\n      };\n      prismaService.meeting.findMany.mockResolvedValue([legacyMeeting]);\n\n      const result = await service.checkTherapistConflicts('therapist-123', mockTimeRange);\n\n      expect(result).toEqual([legacyMeeting]);\n    });\n  });\n\n  describe('checkClientConflicts', () => {\n    it('should find conflicts in client schedule', async () => {\n      const clientConflictMeeting = {\n        ...mockConflictingMeeting,\n        clientId: 'client-123',\n      };\n      prismaService.meeting.findMany.mockResolvedValue([clientConflictMeeting]);\n\n      const result = await service.checkClientConflicts('client-123', mockTimeRange);\n\n      expect(result).toEqual([clientConflictMeeting]);\n      expect(prismaService.meeting.findMany).toHaveBeenCalledWith({\n        where: {\n          OR: [\n            {\n              clientId: 'client-123',\n              startTime: { lt: mockTimeRange.endTime },\n              OR: [\n                { endTime: { gt: mockTimeRange.startTime } },\n                {\n                  AND: [\n                    { endTime: null },\n                    { startTime: { gte: mockTimeRange.startTime } },\n                  ],\n                },\n              ],\n              status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },\n            },\n          ],\n        },\n        include: {\n          client: {\n            select: {\n              user: {\n                select: { firstName: true, lastName: true },\n              },\n            },\n          },\n          therapist: {\n            select: {\n              user: {\n                select: { firstName: true, lastName: true },\n              },\n            },\n          },\n        },\n      });\n    });\n\n    it('should return empty array when no conflicts', async () => {\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.checkClientConflicts('client-123', mockTimeRange);\n\n      expect(result).toEqual([]);\n    });\n  });\n\n  describe('checkUpdateConflicts', () => {\n    it('should detect conflicts when updating meeting time', async () => {\n      prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);\n\n      const result = await service.checkUpdateConflicts(\n        'meeting-123',\n        'therapist-123',\n        'client-123',\n        new Date('2024-01-15T10:30:00Z'),\n        60,\n      );\n\n      expect(result).toEqual({\n        hasConflict: true,\n        conflictingMeetings: [mockConflictingMeeting],\n        conflictType: 'therapist',\n      });\n      expect(prismaService.meeting.findMany).toHaveBeenCalledWith({\n        where: {\n          OR: [\n            {\n              therapistId: 'therapist-123',\n              startTime: { lt: new Date('2024-01-15T11:30:00Z') },\n              OR: [\n                { endTime: { gt: new Date('2024-01-15T10:30:00Z') } },\n                {\n                  AND: [\n                    { endTime: null },\n                    { startTime: { gte: new Date('2024-01-15T10:30:00Z') } },\n                  ],\n                },\n              ],\n              status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },\n            },\n            {\n              clientId: 'client-123',\n              startTime: { lt: new Date('2024-01-15T11:30:00Z') },\n              OR: [\n                { endTime: { gt: new Date('2024-01-15T10:30:00Z') } },\n                {\n                  AND: [\n                    { endTime: null },\n                    { startTime: { gte: new Date('2024-01-15T10:30:00Z') } },\n                  ],\n                },\n              ],\n              status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },\n            },\n          ],\n          id: { not: 'meeting-123' },\n        },\n        include: {\n          client: {\n            select: {\n              user: {\n                select: { firstName: true, lastName: true },\n              },\n            },\n          },\n          therapist: {\n            select: {\n              user: {\n                select: { firstName: true, lastName: true },\n              },\n            },\n          },\n        },\n      });\n    });\n\n    it('should exclude the current meeting from conflict check', async () => {\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.checkUpdateConflicts(\n        'meeting-123',\n        'therapist-123',\n        'client-123',\n        new Date('2024-01-15T10:00:00Z'),\n        60,\n      );\n\n      expect(result.hasConflict).toBe(false);\n      expect(prismaService.meeting.findMany).toHaveBeenCalledWith(\n        expect.objectContaining({\n          where: expect.objectContaining({\n            id: { not: 'meeting-123' },\n          }),\n        }),\n      );\n    });\n\n    it('should correctly classify conflict types in updates', async () => {\n      const therapistConflict = { ...mockConflictingMeeting, clientId: 'client-other' };\n      const clientConflict = { ...mockConflictingMeeting, therapistId: 'therapist-other', clientId: 'client-123' };\n      prismaService.meeting.findMany.mockResolvedValue([therapistConflict, clientConflict]);\n\n      const result = await service.checkUpdateConflicts(\n        'meeting-123',\n        'therapist-123',\n        'client-123',\n        new Date('2024-01-15T10:30:00Z'),\n        60,\n      );\n\n      expect(result.conflictType).toBe('both');\n      expect(result.conflictingMeetings).toHaveLength(2);\n    });\n  });\n\n  describe('checkBulkConflicts', () => {\n    it('should check conflicts for multiple meetings', async () => {\n      const meetings = [\n        {\n          therapistId: 'therapist-123',\n          clientId: 'client-123',\n          startTime: new Date('2024-01-15T10:00:00Z'),\n          duration: 60,\n        },\n        {\n          therapistId: 'therapist-123',\n          clientId: 'client-456',\n          startTime: new Date('2024-01-15T10:30:00Z'),\n          duration: 60,\n        },\n      ];\n\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.checkBulkConflicts(meetings);\n\n      expect(result).toHaveLength(1);\n      expect(result[0]).toEqual({\n        meetingIndex: 1,\n        conflicts: {\n          hasConflict: true,\n          conflictingMeetings: [\n            {\n              ...meetings[0],\n              conflictType: 'therapist',\n              isInternalConflict: true,\n              conflictIndex: 0,\n            },\n          ],\n          conflictType: 'none',\n        },\n      });\n    });\n\n    it('should detect internal conflicts between meetings in bulk', async () => {\n      const meetings = [\n        {\n          therapistId: 'therapist-123',\n          clientId: 'client-123',\n          startTime: new Date('2024-01-15T10:00:00Z'),\n          duration: 60,\n        },\n        {\n          therapistId: 'therapist-123',\n          clientId: 'client-456',\n          startTime: new Date('2024-01-15T10:30:00Z'),\n          duration: 60,\n        },\n        {\n          therapistId: 'therapist-456',\n          clientId: 'client-123',\n          startTime: new Date('2024-01-15T10:45:00Z'),\n          duration: 60,\n        },\n      ];\n\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.checkBulkConflicts(meetings);\n\n      expect(result).toHaveLength(2);\n      expect(result[0].meetingIndex).toBe(1);\n      expect(result[1].meetingIndex).toBe(2);\n    });\n\n    it('should handle both external and internal conflicts', async () => {\n      const meetings = [\n        {\n          therapistId: 'therapist-123',\n          clientId: 'client-123',\n          startTime: new Date('2024-01-15T10:00:00Z'),\n          duration: 60,\n        },\n      ];\n\n      prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);\n\n      const result = await service.checkBulkConflicts(meetings);\n\n      expect(result).toHaveLength(1);\n      expect(result[0].conflicts.hasConflict).toBe(true);\n      expect(result[0].conflicts.conflictingMeetings).toContain(mockConflictingMeeting);\n    });\n\n    it('should return empty array when no conflicts in bulk', async () => {\n      const meetings = [\n        {\n          therapistId: 'therapist-123',\n          clientId: 'client-123',\n          startTime: new Date('2024-01-15T10:00:00Z'),\n          duration: 60,\n        },\n        {\n          therapistId: 'therapist-456',\n          clientId: 'client-456',\n          startTime: new Date('2024-01-15T12:00:00Z'),\n          duration: 60,\n        },\n      ];\n\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.checkBulkConflicts(meetings);\n\n      expect(result).toEqual([]);\n    });\n  });\n\n  describe('hasTimeOverlap', () => {\n    it('should detect overlapping time ranges', () => {\n      const start1 = new Date('2024-01-15T10:00:00Z');\n      const end1 = new Date('2024-01-15T11:00:00Z');\n      const start2 = new Date('2024-01-15T10:30:00Z');\n      const end2 = new Date('2024-01-15T11:30:00Z');\n\n      const result = service.hasTimeOverlap(start1, end1, start2, end2);\n\n      expect(result).toBe(true);\n    });\n\n    it('should detect touching time ranges as overlapping', () => {\n      const start1 = new Date('2024-01-15T10:00:00Z');\n      const end1 = new Date('2024-01-15T11:00:00Z');\n      const start2 = new Date('2024-01-15T11:00:00Z');\n      const end2 = new Date('2024-01-15T12:00:00Z');\n\n      const result = service.hasTimeOverlap(start1, end1, start2, end2);\n\n      expect(result).toBe(false);\n    });\n\n    it('should detect non-overlapping time ranges', () => {\n      const start1 = new Date('2024-01-15T10:00:00Z');\n      const end1 = new Date('2024-01-15T11:00:00Z');\n      const start2 = new Date('2024-01-15T12:00:00Z');\n      const end2 = new Date('2024-01-15T13:00:00Z');\n\n      const result = service.hasTimeOverlap(start1, end1, start2, end2);\n\n      expect(result).toBe(false);\n    });\n\n    it('should handle complete containment', () => {\n      const start1 = new Date('2024-01-15T10:00:00Z');\n      const end1 = new Date('2024-01-15T12:00:00Z');\n      const start2 = new Date('2024-01-15T10:30:00Z');\n      const end2 = new Date('2024-01-15T11:30:00Z');\n\n      const result = service.hasTimeOverlap(start1, end1, start2, end2);\n\n      expect(result).toBe(true);\n    });\n\n    it('should handle reverse containment', () => {\n      const start1 = new Date('2024-01-15T10:30:00Z');\n      const end1 = new Date('2024-01-15T11:30:00Z');\n      const start2 = new Date('2024-01-15T10:00:00Z');\n      const end2 = new Date('2024-01-15T12:00:00Z');\n\n      const result = service.hasTimeOverlap(start1, end1, start2, end2);\n\n      expect(result).toBe(true);\n    });\n  });\n\n  describe('validateNoConflicts', () => {\n    it('should not throw when no conflicts exist', async () => {\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      await expect(\n        service.validateNoConflicts(\n          'therapist-123',\n          'client-123',\n          new Date('2024-01-15T10:00:00Z'),\n          60,\n        ),\n      ).resolves.not.toThrow();\n    });\n\n    it('should throw BadRequestException when conflicts exist', async () => {\n      prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);\n\n      await expect(\n        service.validateNoConflicts(\n          'therapist-123',\n          'client-789',\n          new Date('2024-01-15T10:30:00Z'),\n          60,\n        ),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should provide detailed conflict information in error message', async () => {\n      prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);\n\n      await expect(\n        service.validateNoConflicts(\n          'therapist-123',\n          'client-789',\n          new Date('2024-01-15T10:30:00Z'),\n          60,\n        ),\n      ).rejects.toThrow('Time slot conflicts with existing meetings');\n    });\n\n    it('should handle multiple conflicts in error message', async () => {\n      const multipleConflicts = [\n        mockConflictingMeeting,\n        {\n          ...mockConflictingMeeting,\n          id: 'conflict-2',\n          startTime: new Date('2024-01-15T10:45:00Z'),\n          endTime: new Date('2024-01-15T11:45:00Z'),\n        },\n      ];\n      prismaService.meeting.findMany.mockResolvedValue(multipleConflicts);\n\n      await expect(\n        service.validateNoConflicts(\n          'therapist-123',\n          'client-789',\n          new Date('2024-01-15T10:30:00Z'),\n          60,\n        ),\n      ).rejects.toThrow(BadRequestException);\n    });\n  });\n\n  describe('integration tests', () => {\n    it('should handle complex scheduling scenarios', async () => {\n      const complexMeetings = [\n        {\n          id: 'meeting-1',\n          therapistId: 'therapist-123',\n          clientId: 'client-123',\n          startTime: new Date('2024-01-15T09:00:00Z'),\n          endTime: new Date('2024-01-15T10:00:00Z'),\n          duration: 60,\n          status: 'SCHEDULED',\n        },\n        {\n          id: 'meeting-2',\n          therapistId: 'therapist-123',\n          clientId: 'client-456',\n          startTime: new Date('2024-01-15T11:00:00Z'),\n          endTime: new Date('2024-01-15T12:00:00Z'),\n          duration: 60,\n          status: 'CONFIRMED',\n        },\n      ];\n\n      prismaService.meeting.findMany.mockResolvedValue(complexMeetings);\n\n      const result = await service.checkSchedulingConflicts(\n        'therapist-123',\n        'client-789',\n        new Date('2024-01-15T10:30:00Z'),\n        60,\n      );\n\n      expect(result.hasConflict).toBe(true);\n      expect(result.conflictType).toBe('therapist');\n      expect(result.conflictingMeetings).toHaveLength(2);\n    });\n\n    it('should handle edge cases with millisecond precision', async () => {\n      const edgeCaseMeeting = {\n        ...mockConflictingMeeting,\n        startTime: new Date('2024-01-15T10:59:59.999Z'),\n        endTime: new Date('2024-01-15T11:59:59.999Z'),\n      };\n      prismaService.meeting.findMany.mockResolvedValue([edgeCaseMeeting]);\n\n      const result = await service.checkSchedulingConflicts(\n        'therapist-123',\n        'client-789',\n        new Date('2024-01-15T10:00:00.000Z'),\n        60,\n      );\n\n      expect(result.hasConflict).toBe(true);\n    });\n\n    it('should handle timezone-aware conflict detection', async () => {\n      const timezoneMeeting = {\n        ...mockConflictingMeeting,\n        startTime: new Date('2024-01-15T15:00:00Z'), // 3 PM UTC\n        endTime: new Date('2024-01-15T16:00:00Z'),   // 4 PM UTC\n      };\n      prismaService.meeting.findMany.mockResolvedValue([timezoneMeeting]);\n\n      const result = await service.checkSchedulingConflicts(\n        'therapist-123',\n        'client-789',\n        new Date('2024-01-15T15:30:00Z'), // 3:30 PM UTC\n        60,\n      );\n\n      expect(result.hasConflict).toBe(true);\n    });\n\n    it('should handle legacy data with missing endTime fields', async () => {\n      const legacyMeeting = {\n        ...mockConflictingMeeting,\n        endTime: null,\n      };\n      prismaService.meeting.findMany.mockResolvedValue([legacyMeeting]);\n\n      const result = await service.checkSchedulingConflicts(\n        'therapist-123',\n        'client-789',\n        new Date('2024-01-15T10:30:00Z'),\n        60,\n      );\n\n      expect(result.hasConflict).toBe(true);\n    });\n\n    it('should handle concurrent booking scenarios', async () => {\n      const concurrentMeetings = [\n        {\n          therapistId: 'therapist-123',\n          clientId: 'client-123',\n          startTime: new Date('2024-01-15T10:00:00Z'),\n          duration: 60,\n        },\n        {\n          therapistId: 'therapist-123',\n          clientId: 'client-456',\n          startTime: new Date('2024-01-15T10:00:00Z'),\n          duration: 60,\n        },\n        {\n          therapistId: 'therapist-456',\n          clientId: 'client-123',\n          startTime: new Date('2024-01-15T10:00:00Z'),\n          duration: 60,\n        },\n      ];\n\n      prismaService.meeting.findMany.mockResolvedValue([]);\n\n      const result = await service.checkBulkConflicts(concurrentMeetings);\n\n      expect(result).toHaveLength(2);\n      expect(result[0].meetingIndex).toBe(1);\n      expect(result[1].meetingIndex).toBe(2);\n    });\n  });\n});"],"version":3}