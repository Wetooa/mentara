5a382cb01c856cde1a93bf074ed667cd
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const conflict_detection_service_1 = require("./conflict-detection.service");
const prisma_client_provider_1 = require("../../providers/prisma-client.provider");
const common_1 = require("@nestjs/common");
describe('ConflictDetectionService', () => {
    let service;
    let prismaService;
    const mockMeeting = {
        id: 'meeting-123',
        therapistId: 'therapist-123',
        clientId: 'client-123',
        startTime: new Date('2024-01-15T10:00:00Z'),
        endTime: new Date('2024-01-15T11:00:00Z'),
        duration: 60,
        status: 'SCHEDULED',
        client: {
            user: {
                firstName: 'John',
                lastName: 'Doe',
            },
        },
        therapist: {
            user: {
                firstName: 'Dr. Jane',
                lastName: 'Smith',
            },
        },
    };
    const mockConflictingMeeting = {
        id: 'conflicting-meeting-456',
        therapistId: 'therapist-123',
        clientId: 'client-456',
        startTime: new Date('2024-01-15T10:30:00Z'),
        endTime: new Date('2024-01-15T11:30:00Z'),
        duration: 60,
        status: 'CONFIRMED',
        client: {
            user: {
                firstName: 'Alice',
                lastName: 'Johnson',
            },
        },
        therapist: {
            user: {
                firstName: 'Dr. Jane',
                lastName: 'Smith',
            },
        },
    };
    const mockTimeRange = {
        startTime: new Date('2024-01-15T10:00:00Z'),
        endTime: new Date('2024-01-15T11:00:00Z'),
    };
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                conflict_detection_service_1.ConflictDetectionService,
                {
                    provide: prisma_client_provider_1.PrismaService,
                    useValue: {
                        meeting: {
                            findMany: jest.fn(),
                        },
                    },
                },
            ],
        }).compile();
        service = module.get(conflict_detection_service_1.ConflictDetectionService);
        prismaService = module.get(prisma_client_provider_1.PrismaService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    it('should be defined', () => {
        expect(service).toBeDefined();
    });
    describe('checkSchedulingConflicts', () => {
        it('should return no conflicts when no meetings overlap', async () => {
            prismaService.meeting.findMany.mockResolvedValue([]);
            const result = await service.checkSchedulingConflicts('therapist-123', 'client-123', new Date('2024-01-15T10:00:00Z'), 60);
            expect(result).toEqual({
                hasConflict: false,
                conflictingMeetings: [],
                conflictType: 'none',
            });
        });
        it('should detect therapist conflicts', async () => {
            prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);
            const result = await service.checkSchedulingConflicts('therapist-123', 'client-789', new Date('2024-01-15T10:30:00Z'), 60);
            expect(result).toEqual({
                hasConflict: true,
                conflictingMeetings: [mockConflictingMeeting],
                conflictType: 'therapist',
            });
            expect(prismaService.meeting.findMany).toHaveBeenCalledWith({
                where: {
                    OR: [
                        {
                            therapistId: 'therapist-123',
                            startTime: { lt: new Date('2024-01-15T11:30:00Z') },
                            OR: [
                                { endTime: { gt: new Date('2024-01-15T10:30:00Z') } },
                                {
                                    AND: [
                                        { endTime: null },
                                        { startTime: { gte: new Date('2024-01-15T10:30:00Z') } },
                                    ],
                                },
                            ],
                            status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },
                        },
                        {
                            clientId: 'client-789',
                            startTime: { lt: new Date('2024-01-15T11:30:00Z') },
                            OR: [
                                { endTime: { gt: new Date('2024-01-15T10:30:00Z') } },
                                {
                                    AND: [
                                        { endTime: null },
                                        { startTime: { gte: new Date('2024-01-15T10:30:00Z') } },
                                    ],
                                },
                            ],
                            status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },
                        },
                    ],
                },
                include: {
                    client: {
                        select: {
                            user: {
                                select: { firstName: true, lastName: true },
                            },
                        },
                    },
                    therapist: {
                        select: {
                            user: {
                                select: { firstName: true, lastName: true },
                            },
                        },
                    },
                },
            });
        });
        it('should detect client conflicts', async () => {
            const clientConflictMeeting = {
                ...mockConflictingMeeting,
                therapistId: 'therapist-456',
                clientId: 'client-123',
            };
            prismaService.meeting.findMany.mockResolvedValue([clientConflictMeeting]);
            const result = await service.checkSchedulingConflicts('therapist-456', 'client-123', new Date('2024-01-15T10:30:00Z'), 60);
            expect(result).toEqual({
                hasConflict: true,
                conflictingMeetings: [clientConflictMeeting],
                conflictType: 'client',
            });
        });
        it('should detect both therapist and client conflicts', async () => {
            const therapistConflict = { ...mockConflictingMeeting, clientId: 'client-other' };
            const clientConflict = { ...mockConflictingMeeting, therapistId: 'therapist-other' };
            prismaService.meeting.findMany.mockResolvedValue([therapistConflict, clientConflict]);
            const result = await service.checkSchedulingConflicts('therapist-123', 'client-123', new Date('2024-01-15T10:30:00Z'), 60);
            expect(result).toEqual({
                hasConflict: true,
                conflictingMeetings: [therapistConflict, clientConflict],
                conflictType: 'both',
            });
        });
        it('should handle edge case time overlaps', async () => {
            const edgeConflictMeeting = {
                ...mockConflictingMeeting,
                startTime: new Date('2024-01-15T10:59:59Z'),
                endTime: new Date('2024-01-15T11:59:59Z'),
            };
            prismaService.meeting.findMany.mockResolvedValue([edgeConflictMeeting]);
            const result = await service.checkSchedulingConflicts('therapist-123', 'client-789', new Date('2024-01-15T10:00:00Z'), 60);
            expect(result.hasConflict).toBe(true);
            expect(result.conflictingMeetings).toHaveLength(1);
        });
    });
    describe('checkTherapistConflicts', () => {
        it('should find conflicts in therapist schedule', async () => {
            prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);
            const result = await service.checkTherapistConflicts('therapist-123', mockTimeRange);
            expect(result).toEqual([mockConflictingMeeting]);
            expect(prismaService.meeting.findMany).toHaveBeenCalledWith({
                where: {
                    OR: [
                        {
                            therapistId: 'therapist-123',
                            startTime: { lt: mockTimeRange.endTime },
                            OR: [
                                { endTime: { gt: mockTimeRange.startTime } },
                                {
                                    AND: [
                                        { endTime: null },
                                        { startTime: { gte: mockTimeRange.startTime } },
                                    ],
                                },
                            ],
                            status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },
                        },
                    ],
                },
                include: {
                    client: {
                        select: {
                            user: {
                                select: { firstName: true, lastName: true },
                            },
                        },
                    },
                    therapist: {
                        select: {
                            user: {
                                select: { firstName: true, lastName: true },
                            },
                        },
                    },
                },
            });
        });
        it('should return empty array when no conflicts', async () => {
            prismaService.meeting.findMany.mockResolvedValue([]);
            const result = await service.checkTherapistConflicts('therapist-123', mockTimeRange);
            expect(result).toEqual([]);
        });
        it('should handle legacy meetings without endTime', async () => {
            const legacyMeeting = {
                ...mockConflictingMeeting,
                endTime: null,
            };
            prismaService.meeting.findMany.mockResolvedValue([legacyMeeting]);
            const result = await service.checkTherapistConflicts('therapist-123', mockTimeRange);
            expect(result).toEqual([legacyMeeting]);
        });
    });
    describe('checkClientConflicts', () => {
        it('should find conflicts in client schedule', async () => {
            const clientConflictMeeting = {
                ...mockConflictingMeeting,
                clientId: 'client-123',
            };
            prismaService.meeting.findMany.mockResolvedValue([clientConflictMeeting]);
            const result = await service.checkClientConflicts('client-123', mockTimeRange);
            expect(result).toEqual([clientConflictMeeting]);
            expect(prismaService.meeting.findMany).toHaveBeenCalledWith({
                where: {
                    OR: [
                        {
                            clientId: 'client-123',
                            startTime: { lt: mockTimeRange.endTime },
                            OR: [
                                { endTime: { gt: mockTimeRange.startTime } },
                                {
                                    AND: [
                                        { endTime: null },
                                        { startTime: { gte: mockTimeRange.startTime } },
                                    ],
                                },
                            ],
                            status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },
                        },
                    ],
                },
                include: {
                    client: {
                        select: {
                            user: {
                                select: { firstName: true, lastName: true },
                            },
                        },
                    },
                    therapist: {
                        select: {
                            user: {
                                select: { firstName: true, lastName: true },
                            },
                        },
                    },
                },
            });
        });
        it('should return empty array when no conflicts', async () => {
            prismaService.meeting.findMany.mockResolvedValue([]);
            const result = await service.checkClientConflicts('client-123', mockTimeRange);
            expect(result).toEqual([]);
        });
    });
    describe('checkUpdateConflicts', () => {
        it('should detect conflicts when updating meeting time', async () => {
            prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);
            const result = await service.checkUpdateConflicts('meeting-123', 'therapist-123', 'client-123', new Date('2024-01-15T10:30:00Z'), 60);
            expect(result).toEqual({
                hasConflict: true,
                conflictingMeetings: [mockConflictingMeeting],
                conflictType: 'therapist',
            });
            expect(prismaService.meeting.findMany).toHaveBeenCalledWith({
                where: {
                    OR: [
                        {
                            therapistId: 'therapist-123',
                            startTime: { lt: new Date('2024-01-15T11:30:00Z') },
                            OR: [
                                { endTime: { gt: new Date('2024-01-15T10:30:00Z') } },
                                {
                                    AND: [
                                        { endTime: null },
                                        { startTime: { gte: new Date('2024-01-15T10:30:00Z') } },
                                    ],
                                },
                            ],
                            status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },
                        },
                        {
                            clientId: 'client-123',
                            startTime: { lt: new Date('2024-01-15T11:30:00Z') },
                            OR: [
                                { endTime: { gt: new Date('2024-01-15T10:30:00Z') } },
                                {
                                    AND: [
                                        { endTime: null },
                                        { startTime: { gte: new Date('2024-01-15T10:30:00Z') } },
                                    ],
                                },
                            ],
                            status: { in: ['SCHEDULED', 'CONFIRMED', 'IN_PROGRESS'] },
                        },
                    ],
                    id: { not: 'meeting-123' },
                },
                include: {
                    client: {
                        select: {
                            user: {
                                select: { firstName: true, lastName: true },
                            },
                        },
                    },
                    therapist: {
                        select: {
                            user: {
                                select: { firstName: true, lastName: true },
                            },
                        },
                    },
                },
            });
        });
        it('should exclude the current meeting from conflict check', async () => {
            prismaService.meeting.findMany.mockResolvedValue([]);
            const result = await service.checkUpdateConflicts('meeting-123', 'therapist-123', 'client-123', new Date('2024-01-15T10:00:00Z'), 60);
            expect(result.hasConflict).toBe(false);
            expect(prismaService.meeting.findMany).toHaveBeenCalledWith(expect.objectContaining({
                where: expect.objectContaining({
                    id: { not: 'meeting-123' },
                }),
            }));
        });
        it('should correctly classify conflict types in updates', async () => {
            const therapistConflict = { ...mockConflictingMeeting, clientId: 'client-other' };
            const clientConflict = { ...mockConflictingMeeting, therapistId: 'therapist-other', clientId: 'client-123' };
            prismaService.meeting.findMany.mockResolvedValue([therapistConflict, clientConflict]);
            const result = await service.checkUpdateConflicts('meeting-123', 'therapist-123', 'client-123', new Date('2024-01-15T10:30:00Z'), 60);
            expect(result.conflictType).toBe('both');
            expect(result.conflictingMeetings).toHaveLength(2);
        });
    });
    describe('checkBulkConflicts', () => {
        it('should check conflicts for multiple meetings', async () => {
            const meetings = [
                {
                    therapistId: 'therapist-123',
                    clientId: 'client-123',
                    startTime: new Date('2024-01-15T10:00:00Z'),
                    duration: 60,
                },
                {
                    therapistId: 'therapist-123',
                    clientId: 'client-456',
                    startTime: new Date('2024-01-15T10:30:00Z'),
                    duration: 60,
                },
            ];
            prismaService.meeting.findMany.mockResolvedValue([]);
            const result = await service.checkBulkConflicts(meetings);
            expect(result).toHaveLength(1);
            expect(result[0]).toEqual({
                meetingIndex: 1,
                conflicts: {
                    hasConflict: true,
                    conflictingMeetings: [
                        {
                            ...meetings[0],
                            conflictType: 'therapist',
                            isInternalConflict: true,
                            conflictIndex: 0,
                        },
                    ],
                    conflictType: 'none',
                },
            });
        });
        it('should detect internal conflicts between meetings in bulk', async () => {
            const meetings = [
                {
                    therapistId: 'therapist-123',
                    clientId: 'client-123',
                    startTime: new Date('2024-01-15T10:00:00Z'),
                    duration: 60,
                },
                {
                    therapistId: 'therapist-123',
                    clientId: 'client-456',
                    startTime: new Date('2024-01-15T10:30:00Z'),
                    duration: 60,
                },
                {
                    therapistId: 'therapist-456',
                    clientId: 'client-123',
                    startTime: new Date('2024-01-15T10:45:00Z'),
                    duration: 60,
                },
            ];
            prismaService.meeting.findMany.mockResolvedValue([]);
            const result = await service.checkBulkConflicts(meetings);
            expect(result).toHaveLength(2);
            expect(result[0].meetingIndex).toBe(1);
            expect(result[1].meetingIndex).toBe(2);
        });
        it('should handle both external and internal conflicts', async () => {
            const meetings = [
                {
                    therapistId: 'therapist-123',
                    clientId: 'client-123',
                    startTime: new Date('2024-01-15T10:00:00Z'),
                    duration: 60,
                },
            ];
            prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);
            const result = await service.checkBulkConflicts(meetings);
            expect(result).toHaveLength(1);
            expect(result[0].conflicts.hasConflict).toBe(true);
            expect(result[0].conflicts.conflictingMeetings).toContain(mockConflictingMeeting);
        });
        it('should return empty array when no conflicts in bulk', async () => {
            const meetings = [
                {
                    therapistId: 'therapist-123',
                    clientId: 'client-123',
                    startTime: new Date('2024-01-15T10:00:00Z'),
                    duration: 60,
                },
                {
                    therapistId: 'therapist-456',
                    clientId: 'client-456',
                    startTime: new Date('2024-01-15T12:00:00Z'),
                    duration: 60,
                },
            ];
            prismaService.meeting.findMany.mockResolvedValue([]);
            const result = await service.checkBulkConflicts(meetings);
            expect(result).toEqual([]);
        });
    });
    describe('hasTimeOverlap', () => {
        it('should detect overlapping time ranges', () => {
            const start1 = new Date('2024-01-15T10:00:00Z');
            const end1 = new Date('2024-01-15T11:00:00Z');
            const start2 = new Date('2024-01-15T10:30:00Z');
            const end2 = new Date('2024-01-15T11:30:00Z');
            const result = service.hasTimeOverlap(start1, end1, start2, end2);
            expect(result).toBe(true);
        });
        it('should detect touching time ranges as overlapping', () => {
            const start1 = new Date('2024-01-15T10:00:00Z');
            const end1 = new Date('2024-01-15T11:00:00Z');
            const start2 = new Date('2024-01-15T11:00:00Z');
            const end2 = new Date('2024-01-15T12:00:00Z');
            const result = service.hasTimeOverlap(start1, end1, start2, end2);
            expect(result).toBe(false);
        });
        it('should detect non-overlapping time ranges', () => {
            const start1 = new Date('2024-01-15T10:00:00Z');
            const end1 = new Date('2024-01-15T11:00:00Z');
            const start2 = new Date('2024-01-15T12:00:00Z');
            const end2 = new Date('2024-01-15T13:00:00Z');
            const result = service.hasTimeOverlap(start1, end1, start2, end2);
            expect(result).toBe(false);
        });
        it('should handle complete containment', () => {
            const start1 = new Date('2024-01-15T10:00:00Z');
            const end1 = new Date('2024-01-15T12:00:00Z');
            const start2 = new Date('2024-01-15T10:30:00Z');
            const end2 = new Date('2024-01-15T11:30:00Z');
            const result = service.hasTimeOverlap(start1, end1, start2, end2);
            expect(result).toBe(true);
        });
        it('should handle reverse containment', () => {
            const start1 = new Date('2024-01-15T10:30:00Z');
            const end1 = new Date('2024-01-15T11:30:00Z');
            const start2 = new Date('2024-01-15T10:00:00Z');
            const end2 = new Date('2024-01-15T12:00:00Z');
            const result = service.hasTimeOverlap(start1, end1, start2, end2);
            expect(result).toBe(true);
        });
    });
    describe('validateNoConflicts', () => {
        it('should not throw when no conflicts exist', async () => {
            prismaService.meeting.findMany.mockResolvedValue([]);
            await expect(service.validateNoConflicts('therapist-123', 'client-123', new Date('2024-01-15T10:00:00Z'), 60)).resolves.not.toThrow();
        });
        it('should throw BadRequestException when conflicts exist', async () => {
            prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);
            await expect(service.validateNoConflicts('therapist-123', 'client-789', new Date('2024-01-15T10:30:00Z'), 60)).rejects.toThrow(common_1.BadRequestException);
        });
        it('should provide detailed conflict information in error message', async () => {
            prismaService.meeting.findMany.mockResolvedValue([mockConflictingMeeting]);
            await expect(service.validateNoConflicts('therapist-123', 'client-789', new Date('2024-01-15T10:30:00Z'), 60)).rejects.toThrow('Time slot conflicts with existing meetings');
        });
        it('should handle multiple conflicts in error message', async () => {
            const multipleConflicts = [
                mockConflictingMeeting,
                {
                    ...mockConflictingMeeting,
                    id: 'conflict-2',
                    startTime: new Date('2024-01-15T10:45:00Z'),
                    endTime: new Date('2024-01-15T11:45:00Z'),
                },
            ];
            prismaService.meeting.findMany.mockResolvedValue(multipleConflicts);
            await expect(service.validateNoConflicts('therapist-123', 'client-789', new Date('2024-01-15T10:30:00Z'), 60)).rejects.toThrow(common_1.BadRequestException);
        });
    });
    describe('integration tests', () => {
        it('should handle complex scheduling scenarios', async () => {
            const complexMeetings = [
                {
                    id: 'meeting-1',
                    therapistId: 'therapist-123',
                    clientId: 'client-123',
                    startTime: new Date('2024-01-15T09:00:00Z'),
                    endTime: new Date('2024-01-15T10:00:00Z'),
                    duration: 60,
                    status: 'SCHEDULED',
                },
                {
                    id: 'meeting-2',
                    therapistId: 'therapist-123',
                    clientId: 'client-456',
                    startTime: new Date('2024-01-15T11:00:00Z'),
                    endTime: new Date('2024-01-15T12:00:00Z'),
                    duration: 60,
                    status: 'CONFIRMED',
                },
            ];
            prismaService.meeting.findMany.mockResolvedValue(complexMeetings);
            const result = await service.checkSchedulingConflicts('therapist-123', 'client-789', new Date('2024-01-15T10:30:00Z'), 60);
            expect(result.hasConflict).toBe(true);
            expect(result.conflictType).toBe('therapist');
            expect(result.conflictingMeetings).toHaveLength(2);
        });
        it('should handle edge cases with millisecond precision', async () => {
            const edgeCaseMeeting = {
                ...mockConflictingMeeting,
                startTime: new Date('2024-01-15T10:59:59.999Z'),
                endTime: new Date('2024-01-15T11:59:59.999Z'),
            };
            prismaService.meeting.findMany.mockResolvedValue([edgeCaseMeeting]);
            const result = await service.checkSchedulingConflicts('therapist-123', 'client-789', new Date('2024-01-15T10:00:00.000Z'), 60);
            expect(result.hasConflict).toBe(true);
        });
        it('should handle timezone-aware conflict detection', async () => {
            const timezoneMeeting = {
                ...mockConflictingMeeting,
                startTime: new Date('2024-01-15T15:00:00Z'), // 3 PM UTC
                endTime: new Date('2024-01-15T16:00:00Z'), // 4 PM UTC
            };
            prismaService.meeting.findMany.mockResolvedValue([timezoneMeeting]);
            const result = await service.checkSchedulingConflicts('therapist-123', 'client-789', new Date('2024-01-15T15:30:00Z'), // 3:30 PM UTC
            60);
            expect(result.hasConflict).toBe(true);
        });
        it('should handle legacy data with missing endTime fields', async () => {
            const legacyMeeting = {
                ...mockConflictingMeeting,
                endTime: null,
            };
            prismaService.meeting.findMany.mockResolvedValue([legacyMeeting]);
            const result = await service.checkSchedulingConflicts('therapist-123', 'client-789', new Date('2024-01-15T10:30:00Z'), 60);
            expect(result.hasConflict).toBe(true);
        });
        it('should handle concurrent booking scenarios', async () => {
            const concurrentMeetings = [
                {
                    therapistId: 'therapist-123',
                    clientId: 'client-123',
                    startTime: new Date('2024-01-15T10:00:00Z'),
                    duration: 60,
                },
                {
                    therapistId: 'therapist-123',
                    clientId: 'client-456',
                    startTime: new Date('2024-01-15T10:00:00Z'),
                    duration: 60,
                },
                {
                    therapistId: 'therapist-456',
                    clientId: 'client-123',
                    startTime: new Date('2024-01-15T10:00:00Z'),
                    duration: 60,
                },
            ];
            prismaService.meeting.findMany.mockResolvedValue([]);
            const result = await service.checkBulkConflicts(concurrentMeetings);
            expect(result).toHaveLength(2);
            expect(result[0].meetingIndex).toBe(1);
            expect(result[1].meetingIndex).toBe(2);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2Jvb2tpbmcvc2VydmljZXMvY29uZmxpY3QtZGV0ZWN0aW9uLnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCw2RUFBbUc7QUFDbkcsbUZBQXVFO0FBQ3ZFLDJDQUFxRDtBQUVyRCxRQUFRLENBQUMsMEJBQTBCLEVBQUUsR0FBRyxFQUFFO0lBQ3hDLElBQUksT0FBaUMsQ0FBQztJQUN0QyxJQUFJLGFBQXlDLENBQUM7SUFFOUMsTUFBTSxXQUFXLEdBQUc7UUFDbEIsRUFBRSxFQUFFLGFBQWE7UUFDakIsV0FBVyxFQUFFLGVBQWU7UUFDNUIsUUFBUSxFQUFFLFlBQVk7UUFDdEIsU0FBUyxFQUFFLElBQUksSUFBSSxDQUFDLHNCQUFzQixDQUFDO1FBQzNDLE9BQU8sRUFBRSxJQUFJLElBQUksQ0FBQyxzQkFBc0IsQ0FBQztRQUN6QyxRQUFRLEVBQUUsRUFBRTtRQUNaLE1BQU0sRUFBRSxXQUFXO1FBQ25CLE1BQU0sRUFBRTtZQUNOLElBQUksRUFBRTtnQkFDSixTQUFTLEVBQUUsTUFBTTtnQkFDakIsUUFBUSxFQUFFLEtBQUs7YUFDaEI7U0FDRjtRQUNELFNBQVMsRUFBRTtZQUNULElBQUksRUFBRTtnQkFDSixTQUFTLEVBQUUsVUFBVTtnQkFDckIsUUFBUSxFQUFFLE9BQU87YUFDbEI7U0FDRjtLQUNGLENBQUM7SUFFRixNQUFNLHNCQUFzQixHQUFHO1FBQzdCLEVBQUUsRUFBRSx5QkFBeUI7UUFDN0IsV0FBVyxFQUFFLGVBQWU7UUFDNUIsUUFBUSxFQUFFLFlBQVk7UUFDdEIsU0FBUyxFQUFFLElBQUksSUFBSSxDQUFDLHNCQUFzQixDQUFDO1FBQzNDLE9BQU8sRUFBRSxJQUFJLElBQUksQ0FBQyxzQkFBc0IsQ0FBQztRQUN6QyxRQUFRLEVBQUUsRUFBRTtRQUNaLE1BQU0sRUFBRSxXQUFXO1FBQ25CLE1BQU0sRUFBRTtZQUNOLElBQUks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bnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvYm9va2luZy9zZXJ2aWNlcy9jb25mbGljdC1kZXRlY3Rpb24uc2VydmljZS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgQ29uZmxpY3REZXRlY3Rpb25TZXJ2aWNlLCBUaW1lUmFuZ2UsIENvbmZsaWN0UmVzdWx0IH0gZnJvbSAnLi9jb25mbGljdC1kZXRlY3Rpb24uc2VydmljZSc7XG5pbXBvcnQgeyBQcmlzbWFTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vcHJvdmlkZXJzL3ByaXNtYS1jbGllbnQucHJvdmlkZXInO1xuaW1wb3J0IHsgQmFkUmVxdWVzdEV4Y2VwdGlvbiB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcblxuZGVzY3JpYmUoJ0NvbmZsaWN0RGV0ZWN0aW9uU2VydmljZScsICgpID0+IHtcbiAgbGV0IHNlcnZpY2U6IENvbmZsaWN0RGV0ZWN0aW9uU2VydmljZTtcbiAgbGV0IHByaXNtYVNlcnZpY2U6IGplc3QuTW9ja2VkPFByaXNtYVNlcnZpY2U+O1xuXG4gIGNvbnN0IG1vY2tNZWV0aW5nID0ge1xuICAgIGlkOiAnbWVldGluZy0xMjMnLFxuICAgIHRoZXJhcGlzdElkOiAndGhlcmFwaXN0LTEyMycsXG4gICAgY2xpZW50SWQ6ICdjbGllbnQtMTIzJyxcbiAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjAwOjAwWicpLFxuICAgIGVuZFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDExOjAwOjAwWicpLFxuICAgIGR1cmF0aW9uOiA2MCxcbiAgICBzdGF0dXM6ICdTQ0hFRFVMRUQnLFxuICAgIGNsaWVudDoge1xuICAgICAgdXNlcjoge1xuICAgICAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgbGFzdE5hbWU6ICdEb2UnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRoZXJhcGlzdDoge1xuICAgICAgdXNlcjoge1xuICAgICAgICBmaXJzdE5hbWU6ICdEci4gSmFuZScsXG4gICAgICAgIGxhc3ROYW1lOiAnU21pdGgnLFxuICAgICAgfSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0IG1vY2tDb25mbGljdGluZ01lZXRpbmcgPSB7XG4gICAgaWQ6ICdjb25mbGljdGluZy1tZWV0aW5nLTQ1NicsXG4gICAgdGhlcmFwaXN0SWQ6ICd0aGVyYXBpc3QtMTIzJyxcbiAgICBjbGllbnRJZDogJ2NsaWVudC00NTYnLFxuICAgIHN0YXJ0VGltZTogbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyksXG4gICAgZW5kVGltZTogbmV3IERhdGUoJzIwMjQtMDEtMTVUMTE6MzA6MDBaJyksXG4gICAgZHVyYXRpb246IDYwLFxuICAgIHN0YXR1czogJ0NPTkZJUk1FRCcsXG4gICAgY2xpZW50OiB7XG4gICAgICB1c2VyOiB7XG4gICAgICAgIGZpcnN0TmFtZTogJ0FsaWNlJyxcbiAgICAgICAgbGFzdE5hbWU6ICdKb2huc29uJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB0aGVyYXBpc3Q6IHtcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgZmlyc3ROYW1lOiAnRHIuIEphbmUnLFxuICAgICAgICBsYXN0TmFtZTogJ1NtaXRoJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcblxuICBjb25zdCBtb2NrVGltZVJhbmdlOiBUaW1lUmFuZ2UgPSB7XG4gICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDowMDowMFonKSxcbiAgICBlbmRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMTowMDowMFonKSxcbiAgfTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2R1bGU6IFRlc3RpbmdNb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIENvbmZsaWN0RGV0ZWN0aW9uU2VydmljZSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IFByaXNtYVNlcnZpY2UsXG4gICAgICAgICAgdXNlVmFsdWU6IHtcbiAgICAgICAgICAgIG1lZXRpbmc6IHtcbiAgICAgICAgICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSkuY29tcGlsZSgpO1xuXG4gICAgc2VydmljZSA9IG1vZHVsZS5nZXQ8Q29uZmxpY3REZXRlY3Rpb25TZXJ2aWNlPihDb25mbGljdERldGVjdGlvblNlcnZpY2UpO1xuICAgIHByaXNtYVNlcnZpY2UgPSBtb2R1bGUuZ2V0KFByaXNtYVNlcnZpY2UpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGJlIGRlZmluZWQnLCAoKSA9PiB7XG4gICAgZXhwZWN0KHNlcnZpY2UpLnRvQmVEZWZpbmVkKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjaGVja1NjaGVkdWxpbmdDb25mbGljdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbm8gY29uZmxpY3RzIHdoZW4gbm8gbWVldGluZ3Mgb3ZlcmxhcCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tTY2hlZHVsaW5nQ29uZmxpY3RzKFxuICAgICAgICAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICdjbGllbnQtMTIzJyxcbiAgICAgICAgbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyksXG4gICAgICAgIDYwLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIGhhc0NvbmZsaWN0OiBmYWxzZSxcbiAgICAgICAgY29uZmxpY3RpbmdNZWV0aW5nczogW10sXG4gICAgICAgIGNvbmZsaWN0VHlwZTogJ25vbmUnLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCB0aGVyYXBpc3QgY29uZmxpY3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5tZWV0aW5nLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFttb2NrQ29uZmxpY3RpbmdNZWV0aW5nXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tTY2hlZHVsaW5nQ29uZmxpY3RzKFxuICAgICAgICAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICdjbGllbnQtNzg5JyxcbiAgICAgICAgbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyksXG4gICAgICAgIDYwLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIGhhc0NvbmZsaWN0OiB0cnVlLFxuICAgICAgICBjb25mbGljdGluZ01lZXRpbmdzOiBbbW9ja0NvbmZsaWN0aW5nTWVldGluZ10sXG4gICAgICAgIGNvbmZsaWN0VHlwZTogJ3RoZXJhcGlzdCcsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBPUjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAgICAgICBzdGFydFRpbWU6IHsgbHQ6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDExOjMwOjAwWicpIH0sXG4gICAgICAgICAgICAgIE9SOiBbXG4gICAgICAgICAgICAgICAgeyBlbmRUaW1lOiB7IGd0OiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDozMDowMFonKSB9IH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgZW5kVGltZTogbnVsbCB9LFxuICAgICAgICAgICAgICAgICAgICB7IHN0YXJ0VGltZTogeyBndGU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjMwOjAwWicpIH0gfSxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3RhdHVzOiB7IGluOiBbJ1NDSEVEVUxFRCcsICdDT05GSVJNRUQnLCAnSU5fUFJPR1JFU1MnXSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xpZW50SWQ6ICdjbGllbnQtNzg5JyxcbiAgICAgICAgICAgICAgc3RhcnRUaW1lOiB7IGx0OiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMTozMDowMFonKSB9LFxuICAgICAgICAgICAgICBPUjogW1xuICAgICAgICAgICAgICAgIHsgZW5kVGltZTogeyBndDogbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJykgfSB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIEFORDogW1xuICAgICAgICAgICAgICAgICAgICB7IGVuZFRpbWU6IG51bGwgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBzdGFydFRpbWU6IHsgZ3RlOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDozMDowMFonKSB9IH0sXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHN0YXR1czogeyBpbjogWydTQ0hFRFVMRUQnLCAnQ09ORklSTUVEJywgJ0lOX1BST0dSRVNTJ10gfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGNsaWVudDoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3Q6IHsgZmlyc3ROYW1lOiB0cnVlLCBsYXN0TmFtZTogdHJ1ZSB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRoZXJhcGlzdDoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3Q6IHsgZmlyc3ROYW1lOiB0cnVlLCBsYXN0TmFtZTogdHJ1ZSB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBjbGllbnQgY29uZmxpY3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2xpZW50Q29uZmxpY3RNZWV0aW5nID0ge1xuICAgICAgICAuLi5tb2NrQ29uZmxpY3RpbmdNZWV0aW5nLFxuICAgICAgICB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC00NTYnLFxuICAgICAgICBjbGllbnRJZDogJ2NsaWVudC0xMjMnLFxuICAgICAgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbY2xpZW50Q29uZmxpY3RNZWV0aW5nXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tTY2hlZHVsaW5nQ29uZmxpY3RzKFxuICAgICAgICAndGhlcmFwaXN0LTQ1NicsXG4gICAgICAgICdjbGllbnQtMTIzJyxcbiAgICAgICAgbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyksXG4gICAgICAgIDYwLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIGhhc0NvbmZsaWN0OiB0cnVlLFxuICAgICAgICBjb25mbGljdGluZ01lZXRpbmdzOiBbY2xpZW50Q29uZmxpY3RNZWV0aW5nXSxcbiAgICAgICAgY29uZmxpY3RUeXBlOiAnY2xpZW50JyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgYm90aCB0aGVyYXBpc3QgYW5kIGNsaWVudCBjb25mbGljdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0aGVyYXBpc3RDb25mbGljdCA9IHsgLi4ubW9ja0NvbmZsaWN0aW5nTWVldGluZywgY2xpZW50SWQ6ICdjbGllbnQtb3RoZXInIH07XG4gICAgICBjb25zdCBjbGllbnRDb25mbGljdCA9IHsgLi4ubW9ja0NvbmZsaWN0aW5nTWVldGluZywgdGhlcmFwaXN0SWQ6ICd0aGVyYXBpc3Qtb3RoZXInIH07XG4gICAgICBwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW3RoZXJhcGlzdENvbmZsaWN0LCBjbGllbnRDb25mbGljdF0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNoZWNrU2NoZWR1bGluZ0NvbmZsaWN0cyhcbiAgICAgICAgJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAnY2xpZW50LTEyMycsXG4gICAgICAgIG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjMwOjAwWicpLFxuICAgICAgICA2MCxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBoYXNDb25mbGljdDogdHJ1ZSxcbiAgICAgICAgY29uZmxpY3RpbmdNZWV0aW5nczogW3RoZXJhcGlzdENvbmZsaWN0LCBjbGllbnRDb25mbGljdF0sXG4gICAgICAgIGNvbmZsaWN0VHlwZTogJ2JvdGgnLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlZGdlIGNhc2UgdGltZSBvdmVybGFwcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVkZ2VDb25mbGljdE1lZXRpbmcgPSB7XG4gICAgICAgIC4uLm1vY2tDb25mbGljdGluZ01lZXRpbmcsXG4gICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6NTk6NTlaJyksXG4gICAgICAgIGVuZFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDExOjU5OjU5WicpLFxuICAgICAgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbZWRnZUNvbmZsaWN0TWVldGluZ10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNoZWNrU2NoZWR1bGluZ0NvbmZsaWN0cyhcbiAgICAgICAgJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAnY2xpZW50LTc4OScsXG4gICAgICAgIG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjAwOjAwWicpLFxuICAgICAgICA2MCxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaGFzQ29uZmxpY3QpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbmZsaWN0aW5nTWVldGluZ3MpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NoZWNrVGhlcmFwaXN0Q29uZmxpY3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZmluZCBjb25mbGljdHMgaW4gdGhlcmFwaXN0IHNjaGVkdWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5tZWV0aW5nLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFttb2NrQ29uZmxpY3RpbmdNZWV0aW5nXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tUaGVyYXBpc3RDb25mbGljdHMoJ3RoZXJhcGlzdC0xMjMnLCBtb2NrVGltZVJhbmdlKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbbW9ja0NvbmZsaWN0aW5nTWVldGluZ10pO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIE9SOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRoZXJhcGlzdElkOiAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICAgICAgIHN0YXJ0VGltZTogeyBsdDogbW9ja1RpbWVSYW5nZS5lbmRUaW1lIH0sXG4gICAgICAgICAgICAgIE9SOiBbXG4gICAgICAgICAgICAgICAgeyBlbmRUaW1lOiB7IGd0OiBtb2NrVGltZVJhbmdlLnN0YXJ0VGltZSB9IH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgZW5kVGltZTogbnVsbCB9LFxuICAgICAgICAgICAgICAgICAgICB7IHN0YXJ0VGltZTogeyBndGU6IG1vY2tUaW1lUmFuZ2Uuc3RhcnRUaW1lIH0gfSxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3RhdHVzOiB7IGluOiBbJ1NDSEVEVUxFRCcsICdDT05GSVJNRUQnLCAnSU5fUFJPR1JFU1MnXSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgY2xpZW50OiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBmaXJzdE5hbWU6IHRydWUsIGxhc3ROYW1lOiB0cnVlIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGhlcmFwaXN0OiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBmaXJzdE5hbWU6IHRydWUsIGxhc3ROYW1lOiB0cnVlIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IHdoZW4gbm8gY29uZmxpY3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5tZWV0aW5nLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jaGVja1RoZXJhcGlzdENvbmZsaWN0cygndGhlcmFwaXN0LTEyMycsIG1vY2tUaW1lUmFuZ2UpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxlZ2FjeSBtZWV0aW5ncyB3aXRob3V0IGVuZFRpbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsZWdhY3lNZWV0aW5nID0ge1xuICAgICAgICAuLi5tb2NrQ29uZmxpY3RpbmdNZWV0aW5nLFxuICAgICAgICBlbmRUaW1lOiBudWxsLFxuICAgICAgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbbGVnYWN5TWVldGluZ10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNoZWNrVGhlcmFwaXN0Q29uZmxpY3RzKCd0aGVyYXBpc3QtMTIzJywgbW9ja1RpbWVSYW5nZSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW2xlZ2FjeU1lZXRpbmddKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NoZWNrQ2xpZW50Q29uZmxpY3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZmluZCBjb25mbGljdHMgaW4gY2xpZW50IHNjaGVkdWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2xpZW50Q29uZmxpY3RNZWV0aW5nID0ge1xuICAgICAgICAuLi5tb2NrQ29uZmxpY3RpbmdNZWV0aW5nLFxuICAgICAgICBjbGllbnRJZDogJ2NsaWVudC0xMjMnLFxuICAgICAgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbY2xpZW50Q29uZmxpY3RNZWV0aW5nXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tDbGllbnRDb25mbGljdHMoJ2NsaWVudC0xMjMnLCBtb2NrVGltZVJhbmdlKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbY2xpZW50Q29uZmxpY3RNZWV0aW5nXSk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5tZWV0aW5nLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xpZW50SWQ6ICdjbGllbnQtMTIzJyxcbiAgICAgICAgICAgICAgc3RhcnRUaW1lOiB7IGx0OiBtb2NrVGltZVJhbmdlLmVuZFRpbWUgfSxcbiAgICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgICB7IGVuZFRpbWU6IHsgZ3Q6IG1vY2tUaW1lUmFuZ2Uuc3RhcnRUaW1lIH0gfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBBTkQ6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBlbmRUaW1lOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgc3RhcnRUaW1lOiB7IGd0ZTogbW9ja1RpbWVSYW5nZS5zdGFydFRpbWUgfSB9LFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzdGF0dXM6IHsgaW46IFsnU0NIRURVTEVEJywgJ0NPTkZJUk1FRCcsICdJTl9QUk9HUkVTUyddIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBjbGllbnQ6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgICAgc2VsZWN0OiB7IGZpcnN0TmFtZTogdHJ1ZSwgbGFzdE5hbWU6IHRydWUgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aGVyYXBpc3Q6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgICAgc2VsZWN0OiB7IGZpcnN0TmFtZTogdHJ1ZSwgbGFzdE5hbWU6IHRydWUgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgYXJyYXkgd2hlbiBubyBjb25mbGljdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNoZWNrQ2xpZW50Q29uZmxpY3RzKCdjbGllbnQtMTIzJywgbW9ja1RpbWVSYW5nZSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW10pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY2hlY2tVcGRhdGVDb25mbGljdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgY29uZmxpY3RzIHdoZW4gdXBkYXRpbmcgbWVldGluZyB0aW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJpc21hU2VydmljZS5tZWV0aW5nLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFttb2NrQ29uZmxpY3RpbmdNZWV0aW5nXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tVcGRhdGVDb25mbGljdHMoXG4gICAgICAgICdtZWV0aW5nLTEyMycsXG4gICAgICAgICd0aGVyYXBpc3QtMTIzJyxcbiAgICAgICAgJ2NsaWVudC0xMjMnLFxuICAgICAgICBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDozMDowMFonKSxcbiAgICAgICAgNjAsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgaGFzQ29uZmxpY3Q6IHRydWUsXG4gICAgICAgIGNvbmZsaWN0aW5nTWVldGluZ3M6IFttb2NrQ29uZmxpY3RpbmdNZWV0aW5nXSxcbiAgICAgICAgY29uZmxpY3RUeXBlOiAndGhlcmFwaXN0JyxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIE9SOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRoZXJhcGlzdElkOiAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICAgICAgIHN0YXJ0VGltZTogeyBsdDogbmV3IERhdGUoJzIwMjQtMDEtMTVUMTE6MzA6MDBaJykgfSxcbiAgICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgICB7IGVuZFRpbWU6IHsgZ3Q6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjMwOjAwWicpIH0gfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBBTkQ6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBlbmRUaW1lOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgc3RhcnRUaW1lOiB7IGd0ZTogbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJykgfSB9LFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzdGF0dXM6IHsgaW46IFsnU0NIRURVTEVEJywgJ0NPTkZJUk1FRCcsICdJTl9QUk9HUkVTUyddIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGllbnRJZDogJ2NsaWVudC0xMjMnLFxuICAgICAgICAgICAgICBzdGFydFRpbWU6IHsgbHQ6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDExOjMwOjAwWicpIH0sXG4gICAgICAgICAgICAgIE9SOiBbXG4gICAgICAgICAgICAgICAgeyBlbmRUaW1lOiB7IGd0OiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDozMDowMFonKSB9IH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgZW5kVGltZTogbnVsbCB9LFxuICAgICAgICAgICAgICAgICAgICB7IHN0YXJ0VGltZTogeyBndGU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjMwOjAwWicpIH0gfSxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3RhdHVzOiB7IGluOiBbJ1NDSEVEVUxFRCcsICdDT05GSVJNRUQnLCAnSU5fUFJPR1JFU1MnXSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIGlkOiB7IG5vdDogJ21lZXRpbmctMTIzJyB9LFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgY2xpZW50OiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBmaXJzdE5hbWU6IHRydWUsIGxhc3ROYW1lOiB0cnVlIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGhlcmFwaXN0OiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdDogeyBmaXJzdE5hbWU6IHRydWUsIGxhc3ROYW1lOiB0cnVlIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZXhjbHVkZSB0aGUgY3VycmVudCBtZWV0aW5nIGZyb20gY29uZmxpY3QgY2hlY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNoZWNrVXBkYXRlQ29uZmxpY3RzKFxuICAgICAgICAnbWVldGluZy0xMjMnLFxuICAgICAgICAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICdjbGllbnQtMTIzJyxcbiAgICAgICAgbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyksXG4gICAgICAgIDYwLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5oYXNDb25mbGljdCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocHJpc21hU2VydmljZS5tZWV0aW5nLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHdoZXJlOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBpZDogeyBub3Q6ICdtZWV0aW5nLTEyMycgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjb3JyZWN0bHkgY2xhc3NpZnkgY29uZmxpY3QgdHlwZXMgaW4gdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRoZXJhcGlzdENvbmZsaWN0ID0geyAuLi5tb2NrQ29uZmxpY3RpbmdNZWV0aW5nLCBjbGllbnRJZDogJ2NsaWVudC1vdGhlcicgfTtcbiAgICAgIGNvbnN0IGNsaWVudENvbmZsaWN0ID0geyAuLi5tb2NrQ29uZmxpY3RpbmdNZWV0aW5nLCB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC1vdGhlcicsIGNsaWVudElkOiAnY2xpZW50LTEyMycgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbdGhlcmFwaXN0Q29uZmxpY3QsIGNsaWVudENvbmZsaWN0XSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tVcGRhdGVDb25mbGljdHMoXG4gICAgICAgICdtZWV0aW5nLTEyMycsXG4gICAgICAgICd0aGVyYXBpc3QtMTIzJyxcbiAgICAgICAgJ2NsaWVudC0xMjMnLFxuICAgICAgICBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDozMDowMFonKSxcbiAgICAgICAgNjAsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmNvbmZsaWN0VHlwZSkudG9CZSgnYm90aCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb25mbGljdGluZ01lZXRpbmdzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjaGVja0J1bGtDb25mbGljdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjaGVjayBjb25mbGljdHMgZm9yIG11bHRpcGxlIG1lZXRpbmdzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVldGluZ3MgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAgIGNsaWVudElkOiAnY2xpZW50LTEyMycsXG4gICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDowMDowMFonKSxcbiAgICAgICAgICBkdXJhdGlvbjogNjAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAgIGNsaWVudElkOiAnY2xpZW50LTQ1NicsXG4gICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDozMDowMFonKSxcbiAgICAgICAgICBkdXJhdGlvbjogNjAsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNoZWNrQnVsa0NvbmZsaWN0cyhtZWV0aW5ncyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0pLnRvRXF1YWwoe1xuICAgICAgICBtZWV0aW5nSW5kZXg6IDEsXG4gICAgICAgIGNvbmZsaWN0czoge1xuICAgICAgICAgIGhhc0NvbmZsaWN0OiB0cnVlLFxuICAgICAgICAgIGNvbmZsaWN0aW5nTWVldGluZ3M6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgLi4ubWVldGluZ3NbMF0sXG4gICAgICAgICAgICAgIGNvbmZsaWN0VHlwZTogJ3RoZXJhcGlzdCcsXG4gICAgICAgICAgICAgIGlzSW50ZXJuYWxDb25mbGljdDogdHJ1ZSxcbiAgICAgICAgICAgICAgY29uZmxpY3RJbmRleDogMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBjb25mbGljdFR5cGU6ICdub25lJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgaW50ZXJuYWwgY29uZmxpY3RzIGJldHdlZW4gbWVldGluZ3MgaW4gYnVsaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1lZXRpbmdzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgdGhlcmFwaXN0SWQ6ICd0aGVyYXBpc3QtMTIzJyxcbiAgICAgICAgICBjbGllbnRJZDogJ2NsaWVudC0xMjMnLFxuICAgICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyksXG4gICAgICAgICAgZHVyYXRpb246IDYwLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGhlcmFwaXN0SWQ6ICd0aGVyYXBpc3QtMTIzJyxcbiAgICAgICAgICBjbGllbnRJZDogJ2NsaWVudC00NTYnLFxuICAgICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyksXG4gICAgICAgICAgZHVyYXRpb246IDYwLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGhlcmFwaXN0SWQ6ICd0aGVyYXBpc3QtNDU2JyxcbiAgICAgICAgICBjbGllbnRJZDogJ2NsaWVudC0xMjMnLFxuICAgICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6NDU6MDBaJyksXG4gICAgICAgICAgZHVyYXRpb246IDYwLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgcHJpc21hU2VydmljZS5tZWV0aW5nLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jaGVja0J1bGtDb25mbGljdHMobWVldGluZ3MpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lZXRpbmdJbmRleCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMV0ubWVldGluZ0luZGV4KS50b0JlKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYm90aCBleHRlcm5hbCBhbmQgaW50ZXJuYWwgY29uZmxpY3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVldGluZ3MgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAgIGNsaWVudElkOiAnY2xpZW50LTEyMycsXG4gICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDowMDowMFonKSxcbiAgICAgICAgICBkdXJhdGlvbjogNjAsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW21vY2tDb25mbGljdGluZ01lZXRpbmddKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jaGVja0J1bGtDb25mbGljdHMobWVldGluZ3MpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLmNvbmZsaWN0cy5oYXNDb25mbGljdCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29uZmxpY3RzLmNvbmZsaWN0aW5nTWVldGluZ3MpLnRvQ29udGFpbihtb2NrQ29uZmxpY3RpbmdNZWV0aW5nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IHdoZW4gbm8gY29uZmxpY3RzIGluIGJ1bGsnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtZWV0aW5ncyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHRoZXJhcGlzdElkOiAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICAgY2xpZW50SWQ6ICdjbGllbnQtMTIzJyxcbiAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjAwOjAwWicpLFxuICAgICAgICAgIGR1cmF0aW9uOiA2MCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRoZXJhcGlzdElkOiAndGhlcmFwaXN0LTQ1NicsXG4gICAgICAgICAgY2xpZW50SWQ6ICdjbGllbnQtNDU2JyxcbiAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEyOjAwOjAwWicpLFxuICAgICAgICAgIGR1cmF0aW9uOiA2MCxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tCdWxrQ29uZmxpY3RzKG1lZXRpbmdzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdoYXNUaW1lT3ZlcmxhcCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBvdmVybGFwcGluZyB0aW1lIHJhbmdlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0MSA9IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjAwOjAwWicpO1xuICAgICAgY29uc3QgZW5kMSA9IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDExOjAwOjAwWicpO1xuICAgICAgY29uc3Qgc3RhcnQyID0gbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyk7XG4gICAgICBjb25zdCBlbmQyID0gbmV3IERhdGUoJzIwMjQtMDEtMTVUMTE6MzA6MDBaJyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UuaGFzVGltZU92ZXJsYXAoc3RhcnQxLCBlbmQxLCBzdGFydDIsIGVuZDIpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgdG91Y2hpbmcgdGltZSByYW5nZXMgYXMgb3ZlcmxhcHBpbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydDEgPSBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDowMDowMFonKTtcbiAgICAgIGNvbnN0IGVuZDEgPSBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMTowMDowMFonKTtcbiAgICAgIGNvbnN0IHN0YXJ0MiA9IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDExOjAwOjAwWicpO1xuICAgICAgY29uc3QgZW5kMiA9IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEyOjAwOjAwWicpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBzZXJ2aWNlLmhhc1RpbWVPdmVybGFwKHN0YXJ0MSwgZW5kMSwgc3RhcnQyLCBlbmQyKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBub24tb3ZlcmxhcHBpbmcgdGltZSByYW5nZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydDEgPSBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDowMDowMFonKTtcbiAgICAgIGNvbnN0IGVuZDEgPSBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMTowMDowMFonKTtcbiAgICAgIGNvbnN0IHN0YXJ0MiA9IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEyOjAwOjAwWicpO1xuICAgICAgY29uc3QgZW5kMiA9IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEzOjAwOjAwWicpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBzZXJ2aWNlLmhhc1RpbWVPdmVybGFwKHN0YXJ0MSwgZW5kMSwgc3RhcnQyLCBlbmQyKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZSBjb250YWlubWVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0MSA9IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjAwOjAwWicpO1xuICAgICAgY29uc3QgZW5kMSA9IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEyOjAwOjAwWicpO1xuICAgICAgY29uc3Qgc3RhcnQyID0gbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyk7XG4gICAgICBjb25zdCBlbmQyID0gbmV3IERhdGUoJzIwMjQtMDEtMTVUMTE6MzA6MDBaJyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UuaGFzVGltZU92ZXJsYXAoc3RhcnQxLCBlbmQxLCBzdGFydDIsIGVuZDIpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmV2ZXJzZSBjb250YWlubWVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0MSA9IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjMwOjAwWicpO1xuICAgICAgY29uc3QgZW5kMSA9IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDExOjMwOjAwWicpO1xuICAgICAgY29uc3Qgc3RhcnQyID0gbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyk7XG4gICAgICBjb25zdCBlbmQyID0gbmV3IERhdGUoJzIwMjQtMDEtMTVUMTI6MDA6MDBaJyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UuaGFzVGltZU92ZXJsYXAoc3RhcnQxLCBlbmQxLCBzdGFydDIsIGVuZDIpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndmFsaWRhdGVOb0NvbmZsaWN0cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG5vdCB0aHJvdyB3aGVuIG5vIGNvbmZsaWN0cyBleGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgc2VydmljZS52YWxpZGF0ZU5vQ29uZmxpY3RzKFxuICAgICAgICAgICd0aGVyYXBpc3QtMTIzJyxcbiAgICAgICAgICAnY2xpZW50LTEyMycsXG4gICAgICAgICAgbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyksXG4gICAgICAgICAgNjAsXG4gICAgICAgICksXG4gICAgICApLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IEJhZFJlcXVlc3RFeGNlcHRpb24gd2hlbiBjb25mbGljdHMgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW21vY2tDb25mbGljdGluZ01lZXRpbmddKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZXJ2aWNlLnZhbGlkYXRlTm9Db25mbGljdHMoXG4gICAgICAgICAgJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAgICdjbGllbnQtNzg5JyxcbiAgICAgICAgICBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDozMDowMFonKSxcbiAgICAgICAgICA2MCxcbiAgICAgICAgKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcm92aWRlIGRldGFpbGVkIGNvbmZsaWN0IGluZm9ybWF0aW9uIGluIGVycm9yIG1lc3NhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW21vY2tDb25mbGljdGluZ01lZXRpbmddKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZXJ2aWNlLnZhbGlkYXRlTm9Db25mbGljdHMoXG4gICAgICAgICAgJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAgICdjbGllbnQtNzg5JyxcbiAgICAgICAgICBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDozMDowMFonKSxcbiAgICAgICAgICA2MCxcbiAgICAgICAgKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdUaW1lIHNsb3QgY29uZmxpY3RzIHdpdGggZXhpc3RpbmcgbWVldGluZ3MnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIGNvbmZsaWN0cyBpbiBlcnJvciBtZXNzYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbXVsdGlwbGVDb25mbGljdHMgPSBbXG4gICAgICAgIG1vY2tDb25mbGljdGluZ01lZXRpbmcsXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5tb2NrQ29uZmxpY3RpbmdNZWV0aW5nLFxuICAgICAgICAgIGlkOiAnY29uZmxpY3QtMicsXG4gICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDo0NTowMFonKSxcbiAgICAgICAgICBlbmRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMTo0NTowMFonKSxcbiAgICAgICAgfSxcbiAgICAgIF07XG4gICAgICBwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUobXVsdGlwbGVDb25mbGljdHMpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHNlcnZpY2UudmFsaWRhdGVOb0NvbmZsaWN0cyhcbiAgICAgICAgICAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICAgJ2NsaWVudC03ODknLFxuICAgICAgICAgIG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjMwOjAwWicpLFxuICAgICAgICAgIDYwLFxuICAgICAgICApLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpbnRlZ3JhdGlvbiB0ZXN0cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV4IHNjaGVkdWxpbmcgc2NlbmFyaW9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcGxleE1lZXRpbmdzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdtZWV0aW5nLTEnLFxuICAgICAgICAgIHRoZXJhcGlzdElkOiAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICAgY2xpZW50SWQ6ICdjbGllbnQtMTIzJyxcbiAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDA5OjAwOjAwWicpLFxuICAgICAgICAgIGVuZFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjAwOjAwWicpLFxuICAgICAgICAgIGR1cmF0aW9uOiA2MCxcbiAgICAgICAgICBzdGF0dXM6ICdTQ0hFRFVMRUQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdtZWV0aW5nLTInLFxuICAgICAgICAgIHRoZXJhcGlzdElkOiAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICAgY2xpZW50SWQ6ICdjbGllbnQtNDU2JyxcbiAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDExOjAwOjAwWicpLFxuICAgICAgICAgIGVuZFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEyOjAwOjAwWicpLFxuICAgICAgICAgIGR1cmF0aW9uOiA2MCxcbiAgICAgICAgICBzdGF0dXM6ICdDT05GSVJNRUQnLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgcHJpc21hU2VydmljZS5tZWV0aW5nLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKGNvbXBsZXhNZWV0aW5ncyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tTY2hlZHVsaW5nQ29uZmxpY3RzKFxuICAgICAgICAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICdjbGllbnQtNzg5JyxcbiAgICAgICAgbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyksXG4gICAgICAgIDYwLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5oYXNDb25mbGljdCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29uZmxpY3RUeXBlKS50b0JlKCd0aGVyYXBpc3QnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29uZmxpY3RpbmdNZWV0aW5ncykudG9IYXZlTGVuZ3RoKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZWRnZSBjYXNlcyB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVkZ2VDYXNlTWVldGluZyA9IHtcbiAgICAgICAgLi4ubW9ja0NvbmZsaWN0aW5nTWVldGluZyxcbiAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDo1OTo1OS45OTlaJyksXG4gICAgICAgIGVuZFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDExOjU5OjU5Ljk5OVonKSxcbiAgICAgIH07XG4gICAgICBwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW2VkZ2VDYXNlTWVldGluZ10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNoZWNrU2NoZWR1bGluZ0NvbmZsaWN0cyhcbiAgICAgICAgJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAnY2xpZW50LTc4OScsXG4gICAgICAgIG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjAwOjAwLjAwMFonKSxcbiAgICAgICAgNjAsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lmhhc0NvbmZsaWN0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdGltZXpvbmUtYXdhcmUgY29uZmxpY3QgZGV0ZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGltZXpvbmVNZWV0aW5nID0ge1xuICAgICAgICAuLi5tb2NrQ29uZmxpY3RpbmdNZWV0aW5nLFxuICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDE1OjAwOjAwWicpLCAvLyAzIFBNIFVUQ1xuICAgICAgICBlbmRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxNjowMDowMFonKSwgICAvLyA0IFBNIFVUQ1xuICAgICAgfTtcbiAgICAgIHByaXNtYVNlcnZpY2UubWVldGluZy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbdGltZXpvbmVNZWV0aW5nXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tTY2hlZHVsaW5nQ29uZmxpY3RzKFxuICAgICAgICAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICdjbGllbnQtNzg5JyxcbiAgICAgICAgbmV3IERhdGUoJzIwMjQtMDEtMTVUMTU6MzA6MDBaJyksIC8vIDM6MzAgUE0gVVRDXG4gICAgICAgIDYwLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5oYXNDb25mbGljdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxlZ2FjeSBkYXRhIHdpdGggbWlzc2luZyBlbmRUaW1lIGZpZWxkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxlZ2FjeU1lZXRpbmcgPSB7XG4gICAgICAgIC4uLm1vY2tDb25mbGljdGluZ01lZXRpbmcsXG4gICAgICAgIGVuZFRpbWU6IG51bGwsXG4gICAgICB9O1xuICAgICAgcHJpc21hU2VydmljZS5tZWV0aW5nLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFtsZWdhY3lNZWV0aW5nXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tTY2hlZHVsaW5nQ29uZmxpY3RzKFxuICAgICAgICAndGhlcmFwaXN0LTEyMycsXG4gICAgICAgICdjbGllbnQtNzg5JyxcbiAgICAgICAgbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MzA6MDBaJyksXG4gICAgICAgIDYwLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5oYXNDb25mbGljdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgYm9va2luZyBzY2VuYXJpb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25jdXJyZW50TWVldGluZ3MgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAgIGNsaWVudElkOiAnY2xpZW50LTEyMycsXG4gICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDowMDowMFonKSxcbiAgICAgICAgICBkdXJhdGlvbjogNjAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC0xMjMnLFxuICAgICAgICAgIGNsaWVudElkOiAnY2xpZW50LTQ1NicsXG4gICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDowMDowMFonKSxcbiAgICAgICAgICBkdXJhdGlvbjogNjAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aGVyYXBpc3RJZDogJ3RoZXJhcGlzdC00NTYnLFxuICAgICAgICAgIGNsaWVudElkOiAnY2xpZW50LTEyMycsXG4gICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDowMDowMFonKSxcbiAgICAgICAgICBkdXJhdGlvbjogNjAsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBwcmlzbWFTZXJ2aWNlLm1lZXRpbmcuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNoZWNrQnVsa0NvbmZsaWN0cyhjb25jdXJyZW50TWVldGluZ3MpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1lZXRpbmdJbmRleCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMV0ubWVldGluZ0luZGV4KS50b0JlKDIpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==