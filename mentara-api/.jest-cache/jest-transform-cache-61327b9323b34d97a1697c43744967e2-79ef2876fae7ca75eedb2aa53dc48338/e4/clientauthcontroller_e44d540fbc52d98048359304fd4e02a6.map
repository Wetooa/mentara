{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/controllers/client-auth.controller.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/controllers/client-auth.controller.ts"],"sourcesContent":["import {\n  Body,\n  Controller,\n  Get,\n  HttpCode,\n  HttpStatus,\n  Post,\n  UseGuards,\n  Req,\n} from '@nestjs/common';\nimport { Throttle } from '@nestjs/throttler';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBody,\n  ApiBearerAuth,\n  ApiUnauthorizedResponse,\n  ApiTooManyRequestsResponse,\n  ApiBadRequestResponse,\n} from '@nestjs/swagger';\nimport { JwtAuthGuard } from '../guards/jwt-auth.guard';\nimport { CurrentUserId } from '../decorators/current-user-id.decorator';\nimport { Public } from '../decorators/public.decorator';\nimport { ZodValidationPipe } from '../../common/pipes/zod-validation.pipe';\nimport {\n  RegisterClientDtoSchema,\n  LoginDtoSchema,\n  type RegisterClientDto,\n  type LoginDto,\n} from 'mentara-commons';\nimport { ClientAuthService } from '../services/client-auth.service';\nimport { Request } from 'express';\n\n@ApiTags('client-auth')\n@ApiBearerAuth('JWT-auth')\n@Controller('auth/client')\nexport class ClientAuthController {\n  constructor(private readonly clientAuthService: ClientAuthService) {}\n\n  @Public()\n  @ApiOperation({\n    summary: 'Register new client account',\n    description:\n      'Create a new client account for users seeking therapy services',\n  })\n  @ApiBody({\n    type: 'object',\n    description: 'Client registration data',\n    schema: {\n      type: 'object',\n      required: ['email', 'password', 'firstName', 'lastName'],\n      properties: {\n        email: {\n          type: 'string',\n          format: 'email',\n          example: 'client@example.com',\n        },\n        password: { type: 'string', minLength: 8, example: 'SecurePass123!' },\n        firstName: { type: 'string', example: 'John' },\n        lastName: { type: 'string', example: 'Doe' },\n        dateOfBirth: { type: 'string', format: 'date', example: '1990-01-01' },\n        phoneNumber: { type: 'string', example: '+1234567890' },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 201,\n    description: 'Client account created successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        user: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            email: { type: 'string' },\n            firstName: { type: 'string' },\n            lastName: { type: 'string' },\n            role: { type: 'string' },\n            emailVerified: { type: 'boolean' },\n          },\n        },\n        accessToken: { type: 'string' },\n        refreshToken: { type: 'string' },\n        expiresIn: { type: 'number' },\n        message: { type: 'string' },\n      },\n    },\n  })\n  @ApiBadRequestResponse({\n    description: 'Invalid registration data or email already exists',\n  })\n  @ApiTooManyRequestsResponse({ description: 'Too many registration attempts' })\n  @Throttle({ default: { limit: 5, ttl: 300000 } }) // 5 registrations per 5 minutes\n  @Post('register')\n  @HttpCode(HttpStatus.CREATED)\n  async register(\n    @Body(new ZodValidationPipe(RegisterClientDtoSchema))\n    registerDto: RegisterClientDto,\n  ) {\n    const result = await this.clientAuthService.registerClient(registerDto);\n\n    return {\n      user: {\n        id: result.user.id,\n        email: result.user.email,\n        firstName: result.user.firstName,\n        lastName: result.user.lastName,\n        role: result.user.role,\n        emailVerified: result.user.emailVerified,\n      },\n      accessToken: result.tokens.accessToken,\n      refreshToken: result.tokens.refreshToken,\n      expiresIn: result.tokens.expiresIn,\n      message: result.message,\n    };\n  }\n\n  @Public()\n  @ApiOperation({\n    summary: 'Client login',\n    description: 'Authenticate client user and return access tokens',\n  })\n  @ApiBody({\n    type: 'object',\n    description: 'Client login credentials',\n    schema: {\n      type: 'object',\n      required: ['email', 'password'],\n      properties: {\n        email: {\n          type: 'string',\n          format: 'email',\n          example: 'client@example.com',\n        },\n        password: { type: 'string', example: 'SecurePass123!' },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Login successful',\n    schema: {\n      type: 'object',\n      properties: {\n        user: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            email: { type: 'string' },\n            firstName: { type: 'string' },\n            lastName: { type: 'string' },\n            role: { type: 'string' },\n            emailVerified: { type: 'boolean' },\n          },\n        },\n        accessToken: { type: 'string' },\n        refreshToken: { type: 'string' },\n        expiresIn: { type: 'number' },\n      },\n    },\n  })\n  @ApiUnauthorizedResponse({ description: 'Invalid credentials' })\n  @ApiTooManyRequestsResponse({ description: 'Too many login attempts' })\n  @Throttle({ default: { limit: 10, ttl: 300000 } }) // 10 login attempts per 5 minutes\n  @Post('login')\n  @HttpCode(HttpStatus.OK)\n  async login(\n    @Body(new ZodValidationPipe(LoginDtoSchema)) loginDto: LoginDto,\n    @Req() req: Request,\n  ) {\n    const ipAddress = req.ip;\n    const userAgent = req.get('User-Agent');\n\n    const result = await this.clientAuthService.loginClient(\n      loginDto.email,\n      loginDto.password,\n      ipAddress,\n      userAgent,\n    );\n\n    return {\n      user: {\n        id: result.user.id,\n        email: result.user.email,\n        firstName: result.user.firstName,\n        lastName: result.user.lastName,\n        role: result.user.role,\n        emailVerified: result.user.emailVerified,\n      },\n      accessToken: result.tokens.accessToken,\n      refreshToken: result.tokens.refreshToken,\n      expiresIn: result.tokens.expiresIn,\n    };\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @ApiOperation({\n    summary: 'Get client profile',\n    description: 'Retrieve the authenticated client user profile information',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Client profile retrieved successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        id: { type: 'string' },\n        email: { type: 'string' },\n        firstName: { type: 'string' },\n        lastName: { type: 'string' },\n        role: { type: 'string' },\n        dateOfBirth: { type: 'string', format: 'date' },\n        phoneNumber: { type: 'string' },\n        profileComplete: { type: 'boolean' },\n        therapistId: { type: 'string', nullable: true },\n        createdAt: { type: 'string', format: 'date-time' },\n      },\n    },\n  })\n  @ApiUnauthorizedResponse({\n    description: 'Invalid or missing authentication token',\n  })\n  @Get('profile')\n  async getProfile(@CurrentUserId() userId: string) {\n    return this.clientAuthService.getClientProfile(userId);\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @ApiOperation({\n    summary: 'Get first sign-in status',\n    description:\n      'Check if this is the client first time signing in and return onboarding status',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'First sign-in status retrieved successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        isFirstSignIn: { type: 'boolean' },\n        hasSeenRecommendations: { type: 'boolean' },\n        profileCompleted: { type: 'boolean' },\n        assessmentCompleted: { type: 'boolean' },\n      },\n    },\n  })\n  @ApiUnauthorizedResponse({\n    description: 'Invalid or missing authentication token',\n  })\n  @Get('first-sign-in-status')\n  @HttpCode(HttpStatus.OK)\n  async getFirstSignInStatus(@CurrentUserId() userId: string) {\n    return this.clientAuthService.getFirstSignInStatus(userId);\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @ApiOperation({\n    summary: 'Mark recommendations as seen',\n    description: 'Mark therapist recommendations as seen by the client',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Recommendations marked as seen successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        success: { type: 'boolean' },\n        message: { type: 'string' },\n      },\n    },\n  })\n  @ApiUnauthorizedResponse({\n    description: 'Invalid or missing authentication token',\n  })\n  @Post('mark-recommendations-seen')\n  @HttpCode(HttpStatus.OK)\n  async markRecommendationsSeen(@CurrentUserId() userId: string) {\n    return this.clientAuthService.markRecommendationsSeen(userId);\n  }\n}\n"],"version":3}