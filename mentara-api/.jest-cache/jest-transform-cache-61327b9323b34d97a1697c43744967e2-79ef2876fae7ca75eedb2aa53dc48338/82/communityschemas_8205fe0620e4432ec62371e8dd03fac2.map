{"version":3,"names":["cov_2pjyx3xxfx","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","branchMap","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","zod_1","require","exports","CommunityCreateInputDtoSchema","z","object","name","string","min","max","description","slug","regex","optional","imageUrl","url","isPrivate","boolean","category","tags","array","rules","moderatorIds","uuid","maxMembers","number","int","requireApproval","strict","CommunityUpdateInputDtoSchema","isActive","GenerateRecommendationsDtoSchema","userId","limit","includeReason","categories","excludeCommunityIds","basedOnActivity","basedOnProfile","RecommendationInteractionDtoSchema","communityId","action","enum","required_error","invalid_type_error","metadata","viewDuration","source","reason","RecommendationQueryDtoSchema","offset","includeJoined","sortBy","filters","memberCount"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/validation/community.schemas.ts"],"sourcesContent":["/**\n * Community Module Validation Schemas - Zod schemas for community operations\n * Separated from types for clean architecture\n */\n\nimport { z } from 'zod';\n\n// Community creation validation\nexport const CommunityCreateInputDtoSchema = z.object({\n  name: z\n    .string()\n    .min(1, 'Community name is required')\n    .max(100, 'Community name must be less than 100 characters'),\n  description: z\n    .string()\n    .min(1, 'Description is required')\n    .max(1000, 'Description must be less than 1000 characters'),\n  slug: z\n    .string()\n    .regex(/^[a-z0-9-]+$/, 'Slug can only contain lowercase letters, numbers, and hyphens')\n    .optional(),\n  imageUrl: z\n    .string()\n    .url('Invalid image URL')\n    .optional(),\n  isPrivate: z\n    .boolean()\n    .optional(),\n  category: z\n    .string()\n    .max(50, 'Category must be less than 50 characters')\n    .optional(),\n  tags: z\n    .array(z.string().max(50, 'Tag must be less than 50 characters'))\n    .max(10, 'Maximum 10 tags allowed')\n    .optional(),\n  rules: z\n    .array(z.string().max(200, 'Rule must be less than 200 characters'))\n    .max(20, 'Maximum 20 rules allowed')\n    .optional(),\n  moderatorIds: z\n    .array(z.string().uuid('Invalid moderator ID'))\n    .optional(),\n  maxMembers: z\n    .number()\n    .int()\n    .min(1, 'Must allow at least 1 member')\n    .max(10000, 'Maximum 10000 members allowed')\n    .optional(),\n  requireApproval: z\n    .boolean()\n    .optional(),\n}).strict();\n\n// Community update validation\nexport const CommunityUpdateInputDtoSchema = z.object({\n  name: z\n    .string()\n    .min(1, 'Community name cannot be empty')\n    .max(100, 'Community name must be less than 100 characters')\n    .optional(),\n  description: z\n    .string()\n    .min(1, 'Description cannot be empty')\n    .max(1000, 'Description must be less than 1000 characters')\n    .optional(),\n  slug: z\n    .string()\n    .regex(/^[a-z0-9-]+$/, 'Slug can only contain lowercase letters, numbers, and hyphens')\n    .optional(),\n  imageUrl: z\n    .string()\n    .url('Invalid image URL')\n    .optional(),\n  isPrivate: z\n    .boolean()\n    .optional(),\n  category: z\n    .string()\n    .max(50, 'Category must be less than 50 characters')\n    .optional(),\n  tags: z\n    .array(z.string().max(50, 'Tag must be less than 50 characters'))\n    .max(10, 'Maximum 10 tags allowed')\n    .optional(),\n  rules: z\n    .array(z.string().max(200, 'Rule must be less than 200 characters'))\n    .max(20, 'Maximum 20 rules allowed')\n    .optional(),\n  moderatorIds: z\n    .array(z.string().uuid('Invalid moderator ID'))\n    .optional(),\n  maxMembers: z\n    .number()\n    .int()\n    .min(1, 'Must allow at least 1 member')\n    .max(10000, 'Maximum 10000 members allowed')\n    .optional(),\n  requireApproval: z\n    .boolean()\n    .optional(),\n  isActive: z\n    .boolean()\n    .optional(),\n}).strict();\n\n// Community recommendation validation schemas\nexport const GenerateRecommendationsDtoSchema = z.object({\n  userId: z\n    .string()\n    .uuid('Invalid user ID'),\n  limit: z\n    .number()\n    .int()\n    .min(1, 'Limit must be at least 1')\n    .max(50, 'Limit cannot exceed 50')\n    .optional(),\n  includeReason: z\n    .boolean()\n    .optional(),\n  categories: z\n    .array(z.string().max(50, 'Category must be less than 50 characters'))\n    .optional(),\n  excludeCommunityIds: z\n    .array(z.string().uuid('Invalid community ID'))\n    .optional(),\n  basedOnActivity: z\n    .boolean()\n    .optional(),\n  basedOnProfile: z\n    .boolean()\n    .optional(),\n}).strict();\n\nexport const RecommendationInteractionDtoSchema = z.object({\n  userId: z\n    .string()\n    .uuid('Invalid user ID'),\n  communityId: z\n    .string()\n    .uuid('Invalid community ID'),\n  action: z\n    .enum(['view', 'join', 'dismiss', 'report'], {\n      required_error: 'Action is required',\n      invalid_type_error: 'Invalid action type',\n    }),\n  metadata: z.object({\n    viewDuration: z\n      .number()\n      .int()\n      .min(0, 'View duration cannot be negative')\n      .optional(),\n    source: z\n      .string()\n      .max(50, 'Source must be less than 50 characters')\n      .optional(),\n    reason: z\n      .string()\n      .max(200, 'Reason must be less than 200 characters')\n      .optional(),\n  }).optional(),\n}).strict();\n\nexport const RecommendationQueryDtoSchema = z.object({\n  limit: z\n    .number()\n    .int()\n    .min(1, 'Limit must be at least 1')\n    .max(100, 'Limit cannot exceed 100')\n    .optional(),\n  offset: z\n    .number()\n    .int()\n    .min(0, 'Offset cannot be negative')\n    .optional(),\n  category: z\n    .string()\n    .max(50, 'Category must be less than 50 characters')\n    .optional(),\n  includeJoined: z\n    .boolean()\n    .optional(),\n  sortBy: z\n    .enum(['relevance', 'popularity', 'recent', 'activity'], {\n      invalid_type_error: 'Invalid sort option',\n    })\n    .optional(),\n  filters: z.object({\n    memberCount: z.object({\n      min: z\n        .number()\n        .int()\n        .min(0, 'Minimum member count cannot be negative')\n        .optional(),\n      max: z\n        .number()\n        .int()\n        .min(1, 'Maximum member count must be at least 1')\n        .optional(),\n    }).optional(),\n    isPrivate: z\n      .boolean()\n      .optional(),\n    requireApproval: z\n      .boolean()\n      .optional(),\n  }).optional(),\n}).strict();"],"mappings":"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","ignoreList":[]}