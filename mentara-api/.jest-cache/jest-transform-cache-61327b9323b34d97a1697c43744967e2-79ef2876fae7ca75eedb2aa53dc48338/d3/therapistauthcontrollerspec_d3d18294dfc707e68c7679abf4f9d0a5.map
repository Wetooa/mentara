{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/controllers/therapist-auth.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/controllers/therapist-auth.controller.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { \n  UnauthorizedException, \n  BadRequestException, \n  NotFoundException, \n  ForbiddenException, \n  InternalServerErrorException \n} from '@nestjs/common';\nimport { ThrottlerGuard, ThrottlerModule } from '@nestjs/throttler';\nimport { TherapistAuthController } from './therapist-auth.controller';\nimport { TherapistAuthService } from '../../services/auth/therapist-auth.service';\nimport { JwtAuthGuard } from '../guards/jwt-auth.guard';\nimport { SupabaseStorageService } from '../../common/services/supabase-storage.service';\nimport { ZodValidationPipe } from '../../common/pipes/zod-validation.pipe';\nimport {\n  MockBuilder,\n  TestDataGenerator,\n  TestAssertions,\n  SecurityGuardTestUtils,\n  RoleBasedTestUtils,\n  TEST_USER_IDS,\n  TEST_EMAILS,\n} from '../../test-utils/auth-testing-helpers';\n\ndescribe('TherapistAuthController', () => {\n  let controller: TherapistAuthController;\n  let therapistAuthService: TherapistAuthService;\n  let supabaseStorageService: SupabaseStorageService;\n  let mockJwtAuthGuard: jest.Mocked<JwtAuthGuard>;\n\n  // Test data constants\n  const mockTherapistUser = {\n    id: TEST_USER_IDS.THERAPIST,\n    email: TEST_EMAILS.THERAPIST,\n    firstName: 'Dr. Jane',\n    lastName: 'Smith',\n    role: 'therapist',\n    emailVerified: false,\n    licenseNumber: 'LIC123456',\n    specializations: ['anxiety', 'depression'],\n    approvalStatus: 'pending',\n    profileComplete: true,\n    createdAt: new Date(),\n  };\n\n  const mockTokens = {\n    accessToken: 'mock-access-token',\n    refreshToken: 'mock-refresh-token',\n    expiresIn: 3600,\n  };\n\n  const mockRegistrationResult = {\n    user: mockTherapistUser,\n    tokens: mockTokens,\n    message: 'Therapist account created successfully',\n  };\n\n  const mockLoginResult = {\n    user: mockTherapistUser,\n    tokens: mockTokens,\n  };\n\n  const mockTherapistApplication = {\n    id: 'app-123',\n    email: TEST_EMAILS.THERAPIST,\n    firstName: 'Dr. Jane',\n    lastName: 'Smith',\n    licenseNumber: 'LIC123456',\n    specializations: ['anxiety', 'depression'],\n    education: 'PhD in Psychology',\n    experience: '5 years',\n    status: 'pending',\n    submittedAt: new Date(),\n    reviewedAt: null,\n    notes: null,\n    reviewerComments: null,\n  };\n\n  const mockApplicationFiles = [\n    {\n      id: 'file-123',\n      fileName: 'license.pdf',\n      fileUrl: 'https://example.com/license.pdf',\n      uploadedAt: new Date().toISOString(),\n    },\n    {\n      id: 'file-456',\n      fileName: 'diploma.pdf',\n      fileUrl: 'https://example.com/diploma.pdf',\n      uploadedAt: new Date().toISOString(),\n    },\n  ];\n\n  const mockFiles = [\n    {\n      fieldname: 'files',\n      originalname: 'license.pdf',\n      encoding: '7bit',\n      mimetype: 'application/pdf',\n      size: 1024,\n      buffer: Buffer.from('test license content'),\n    },\n    {\n      fieldname: 'files',\n      originalname: 'diploma.pdf',\n      encoding: '7bit',\n      mimetype: 'application/pdf',\n      size: 2048,\n      buffer: Buffer.from('test diploma content'),\n    },\n  ] as Express.Multer.File[];\n\n  const mockApplicationData = {\n    email: TEST_EMAILS.THERAPIST,\n    firstName: 'Dr. Jane',\n    lastName: 'Smith',\n    licenseNumber: 'LIC123456',\n    specializations: ['anxiety', 'depression'],\n    education: 'PhD in Psychology',\n    experience: '5 years',\n  };\n\n  beforeEach(async () => {\n    // Create mock services\n    const mockTherapistAuthService = {\n      registerTherapist: jest.fn(),\n      loginTherapist: jest.fn(),\n      getTherapistProfile: jest.fn(),\n      createApplicationWithDocuments: jest.fn(),\n      getAllApplications: jest.fn(),\n      getApplicationById: jest.fn(),\n      updateApplicationStatus: jest.fn(),\n      getApplicationFiles: jest.fn(),\n    };\n\n    const mockSupabaseStorageService = {\n      validateFile: jest.fn(),\n      uploadFiles: jest.fn(),\n      getSupportedBuckets: jest.fn(),\n    };\n\n    mockJwtAuthGuard = {\n      canActivate: jest.fn().mockReturnValue(true),\n    } as any;\n\n    const module: TestingModule = await Test.createTestingModule({\n      imports: [\n        ThrottlerModule.forRoot([\n          {\n            name: 'short',\n            ttl: 1000,\n            limit: 3,\n          },\n        ]),\n      ],\n      controllers: [TherapistAuthController],\n      providers: [\n        {\n          provide: TherapistAuthService,\n          useValue: mockTherapistAuthService,\n        },\n        {\n          provide: SupabaseStorageService,\n          useValue: mockSupabaseStorageService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .overrideGuard(ThrottlerGuard)\n      .useValue({ canActivate: jest.fn().mockReturnValue(true) })\n      .compile();\n\n    controller = module.get<TherapistAuthController>(TherapistAuthController);\n    therapistAuthService = module.get<TherapistAuthService>(TherapistAuthService);\n    supabaseStorageService = module.get<SupabaseStorageService>(SupabaseStorageService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('register', () => {\n    const validRegisterDto = {\n      email: 'newtherapist@example.com',\n      password: 'SecurePass123!',\n      firstName: 'Dr. Sarah',\n      lastName: 'Johnson',\n    };\n\n    it('should register therapist successfully', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'registerTherapist').mockResolvedValue(mockRegistrationResult);\n\n      // Act\n      const result = await controller.register(validRegisterDto);\n\n      // Assert\n      expect(therapistAuthService.registerTherapist).toHaveBeenCalledWith(\n        validRegisterDto.email,\n        validRegisterDto.password,\n        validRegisterDto.firstName,\n        validRegisterDto.lastName,\n      );\n      expect(result).toEqual({\n        user: {\n          id: mockTherapistUser.id,\n          email: mockTherapistUser.email,\n          firstName: mockTherapistUser.firstName,\n          lastName: mockTherapistUser.lastName,\n          role: mockTherapistUser.role,\n          emailVerified: mockTherapistUser.emailVerified,\n        },\n        accessToken: mockTokens.accessToken,\n        refreshToken: mockTokens.refreshToken,\n        expiresIn: mockTokens.expiresIn,\n        message: mockRegistrationResult.message,\n      });\n    });\n\n    it('should handle email already exists error', async () => {\n      // Arrange\n      const error = new BadRequestException('Email already exists');\n      jest.spyOn(therapistAuthService, 'registerTherapist').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.register(validRegisterDto)).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(therapistAuthService, 'registerTherapist').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.register(validRegisterDto)).rejects.toThrow(error);\n    });\n  });\n\n  describe('login', () => {\n    const validLoginDto = {\n      email: TEST_EMAILS.THERAPIST,\n      password: 'SecurePass123!',\n    };\n\n    const mockRequest = {\n      ip: '192.168.1.1',\n      get: jest.fn().mockReturnValue('Test User Agent'),\n    } as any;\n\n    it('should login therapist successfully with valid credentials', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'loginTherapist').mockResolvedValue(mockLoginResult);\n\n      // Act\n      const result = await controller.login(validLoginDto, mockRequest);\n\n      // Assert\n      expect(therapistAuthService.loginTherapist).toHaveBeenCalledWith(\n        validLoginDto.email,\n        validLoginDto.password,\n        mockRequest.ip,\n        'Test User Agent',\n      );\n\n      expect(result).toEqual({\n        user: {\n          id: mockTherapistUser.id,\n          email: mockTherapistUser.email,\n          firstName: mockTherapistUser.firstName,\n          lastName: mockTherapistUser.lastName,\n          role: mockTherapistUser.role,\n          emailVerified: mockTherapistUser.emailVerified,\n        },\n        accessToken: mockTokens.accessToken,\n        refreshToken: mockTokens.refreshToken,\n        expiresIn: mockTokens.expiresIn,\n      });\n    });\n\n    it('should handle missing User-Agent header', async () => {\n      // Arrange\n      const mockRequestWithoutUserAgent = {\n        ip: '192.168.1.1',\n        get: jest.fn().mockReturnValue(undefined),\n      } as any;\n\n      jest.spyOn(therapistAuthService, 'loginTherapist').mockResolvedValue(mockLoginResult);\n\n      // Act\n      await controller.login(validLoginDto, mockRequestWithoutUserAgent);\n\n      // Assert\n      expect(therapistAuthService.loginTherapist).toHaveBeenCalledWith(\n        validLoginDto.email,\n        validLoginDto.password,\n        mockRequestWithoutUserAgent.ip,\n        undefined,\n      );\n    });\n\n    it('should handle invalid credentials', async () => {\n      // Arrange\n      const authError = new UnauthorizedException('Invalid credentials');\n      jest.spyOn(therapistAuthService, 'loginTherapist').mockRejectedValue(authError);\n\n      // Act & Assert\n      await expect(controller.login(validLoginDto, mockRequest)).rejects.toThrow(authError);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const serviceError = new Error('Database connection failed');\n      jest.spyOn(therapistAuthService, 'loginTherapist').mockRejectedValue(serviceError);\n\n      // Act & Assert\n      await expect(controller.login(validLoginDto, mockRequest)).rejects.toThrow(serviceError);\n    });\n  });\n\n  describe('getProfile', () => {\n    it('should return therapist profile successfully', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'getTherapistProfile').mockResolvedValue(mockTherapistUser);\n\n      // Act\n      const result = await controller.getProfile(TEST_USER_IDS.THERAPIST);\n\n      // Assert\n      expect(therapistAuthService.getTherapistProfile).toHaveBeenCalledWith(TEST_USER_IDS.THERAPIST);\n      expect(result).toEqual(mockTherapistUser);\n    });\n\n    it('should handle profile not found', async () => {\n      // Arrange\n      const notFoundError = new Error('Therapist profile not found');\n      jest.spyOn(therapistAuthService, 'getTherapistProfile').mockRejectedValue(notFoundError);\n\n      // Act & Assert\n      await expect(controller.getProfile(TEST_USER_IDS.THERAPIST)).rejects.toThrow(notFoundError);\n    });\n  });\n\n  // TODO: Update tests for unified register method instead of removed applyWithDocuments\n  describe.skip('applyWithDocuments', () => {\n    const validApplicationDataJson = JSON.stringify(mockApplicationData);\n    const validFileTypes = JSON.stringify({ '0': 'license', '1': 'diploma' });\n\n    const mockApplicationResult = {\n      application: { userId: 'temp_12345_therapist_at_example.com' },\n      uploadedFiles: [\n        { id: 'file-123', fileName: 'license.pdf', url: 'https://example.com/license.pdf' },\n        { id: 'file-456', fileName: 'diploma.pdf', url: 'https://example.com/diploma.pdf' },\n      ],\n    };\n\n    it('should submit application with documents successfully', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'createApplicationWithDocuments').mockResolvedValue(mockApplicationResult);\n\n      // Act\n      const result = await controller.applyWithDocuments(\n        validApplicationDataJson,\n        validFileTypes,\n        mockFiles,\n      );\n\n      // Assert\n      expect(therapistAuthService.createApplicationWithDocuments).toHaveBeenCalledWith(\n        expect.objectContaining({\n          ...mockApplicationData,\n          userId: expect.stringContaining('temp_'),\n        }),\n        mockFiles,\n        { '0': 'license', '1': 'diploma' },\n      );\n\n      expect(result).toEqual({\n        success: true,\n        message: 'Application submitted successfully with documents',\n        applicationId: mockApplicationResult.application.userId,\n        uploadedFiles: mockApplicationResult.uploadedFiles,\n      });\n    });\n\n    it('should submit application without files', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'createApplicationWithDocuments').mockResolvedValue(mockApplicationResult);\n\n      // Act\n      const result = await controller.applyWithDocuments(\n        validApplicationDataJson,\n        validFileTypes,\n        [],\n      );\n\n      // Assert\n      expect(therapistAuthService.createApplicationWithDocuments).toHaveBeenCalledWith(\n        expect.objectContaining(mockApplicationData),\n        [],\n        { '0': 'license', '1': 'diploma' },\n      );\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle missing application data', async () => {\n      // Act & Assert\n      await expect(controller.applyWithDocuments('', validFileTypes, mockFiles)).rejects.toThrow(\n        BadRequestException,\n      );\n    });\n\n    it('should handle invalid JSON format', async () => {\n      // Act & Assert\n      await expect(\n        controller.applyWithDocuments('invalid json', validFileTypes, mockFiles),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle email already exists error', async () => {\n      // Arrange\n      const error = new Error('email already exists');\n      jest.spyOn(therapistAuthService, 'createApplicationWithDocuments').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(\n        controller.applyWithDocuments(validApplicationDataJson, validFileTypes, mockFiles),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle file upload errors', async () => {\n      // Arrange\n      const error = new Error('file upload failed');\n      jest.spyOn(therapistAuthService, 'createApplicationWithDocuments').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(\n        controller.applyWithDocuments(validApplicationDataJson, validFileTypes, mockFiles),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle validation errors', async () => {\n      // Arrange\n      const error = new Error('validation failed');\n      jest.spyOn(therapistAuthService, 'createApplicationWithDocuments').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(\n        controller.applyWithDocuments(validApplicationDataJson, validFileTypes, mockFiles),\n      ).rejects.toThrow(BadRequestException);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Unknown database error');\n      jest.spyOn(therapistAuthService, 'createApplicationWithDocuments').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(\n        controller.applyWithDocuments(validApplicationDataJson, validFileTypes, mockFiles),\n      ).rejects.toThrow(InternalServerErrorException);\n    });\n\n    it('should handle invalid file types JSON', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'createApplicationWithDocuments').mockResolvedValue(mockApplicationResult);\n\n      // Act\n      const result = await controller.applyWithDocuments(\n        validApplicationDataJson,\n        'invalid json',\n        mockFiles,\n      );\n\n      // Assert\n      expect(therapistAuthService.createApplicationWithDocuments).toHaveBeenCalledWith(\n        expect.objectContaining(mockApplicationData),\n        mockFiles,\n        {}, // Empty object when JSON parsing fails\n      );\n      expect(result.success).toBe(true);\n    });\n  });\n\n  describe('getAllApplications', () => {\n    const mockApplicationsResult = {\n      applications: [mockTherapistApplication],\n      totalCount: 1,\n      page: 1,\n      totalPages: 1,\n    };\n\n    it('should return all applications for admin user', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'getAllApplications').mockResolvedValue(mockApplicationsResult);\n\n      // Act\n      const result = await controller.getAllApplications('admin');\n\n      // Assert\n      expect(therapistAuthService.getAllApplications).toHaveBeenCalledWith({\n        status: undefined,\n        page: 1,\n        limit: 10,\n      });\n      expect(result).toEqual(mockApplicationsResult);\n    });\n\n    it('should return applications with custom filters', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'getAllApplications').mockResolvedValue(mockApplicationsResult);\n\n      // Act\n      const result = await controller.getAllApplications('admin', 'pending', 2, 20);\n\n      // Assert\n      expect(therapistAuthService.getAllApplications).toHaveBeenCalledWith({\n        status: 'pending',\n        page: 2,\n        limit: 20,\n      });\n      expect(result).toEqual(mockApplicationsResult);\n    });\n\n    it('should handle pagination bounds', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'getAllApplications').mockResolvedValue(mockApplicationsResult);\n\n      // Act\n      await controller.getAllApplications('admin', undefined, 0, 200);\n\n      // Assert\n      expect(therapistAuthService.getAllApplications).toHaveBeenCalledWith({\n        status: undefined,\n        page: 1, // Clamped to minimum 1\n        limit: 100, // Clamped to maximum 100\n      });\n    });\n\n    it('should throw ForbiddenException for non-admin users', async () => {\n      // Act & Assert\n      await expect(controller.getAllApplications('client')).rejects.toThrow(ForbiddenException);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(therapistAuthService, 'getAllApplications').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.getAllApplications('admin')).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('getApplicationById', () => {\n    it('should return application by ID for admin user', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'getApplicationById').mockResolvedValue(mockTherapistApplication);\n\n      // Act\n      const result = await controller.getApplicationById('admin', 'app-123');\n\n      // Assert\n      expect(therapistAuthService.getApplicationById).toHaveBeenCalledWith('app-123');\n      expect(result).toEqual(mockTherapistApplication);\n    });\n\n    it('should throw ForbiddenException for non-admin users', async () => {\n      // Act & Assert\n      await expect(controller.getApplicationById('client', 'app-123')).rejects.toThrow(ForbiddenException);\n    });\n\n    it('should throw NotFoundException when application not found', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'getApplicationById').mockResolvedValue(null);\n\n      // Act & Assert\n      await expect(controller.getApplicationById('admin', 'app-123')).rejects.toThrow(NotFoundException);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(therapistAuthService, 'getApplicationById').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.getApplicationById('admin', 'app-123')).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('updateApplicationStatus', () => {\n    const mockUpdateData = {\n      status: 'approved' as const,\n      notes: 'Approved by admin',\n      reviewerComments: 'All documents verified',\n    };\n\n    const mockUpdateResult = {\n      success: true,\n      message: 'Application approved successfully',\n      credentials: {\n        email: TEST_EMAILS.THERAPIST,\n        password: 'generated-password',\n      },\n    };\n\n    it('should update application status successfully for admin user', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'updateApplicationStatus').mockResolvedValue(mockUpdateResult);\n\n      // Act\n      const result = await controller.updateApplicationStatus('admin', 'app-123', mockUpdateData);\n\n      // Assert\n      expect(therapistAuthService.updateApplicationStatus).toHaveBeenCalledWith('app-123', mockUpdateData);\n      expect(result).toEqual(mockUpdateResult);\n    });\n\n    it('should throw ForbiddenException for non-admin users', async () => {\n      // Act & Assert\n      await expect(controller.updateApplicationStatus('client', 'app-123', mockUpdateData)).rejects.toThrow(\n        ForbiddenException,\n      );\n    });\n\n    it('should handle NotFoundException', async () => {\n      // Arrange\n      const notFoundError = new NotFoundException('Application not found');\n      jest.spyOn(therapistAuthService, 'updateApplicationStatus').mockRejectedValue(notFoundError);\n\n      // Act & Assert\n      await expect(controller.updateApplicationStatus('admin', 'app-123', mockUpdateData)).rejects.toThrow(\n        NotFoundException,\n      );\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(therapistAuthService, 'updateApplicationStatus').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.updateApplicationStatus('admin', 'app-123', mockUpdateData)).rejects.toThrow(\n        InternalServerErrorException,\n      );\n    });\n  });\n\n  describe('getApplicationFiles', () => {\n    it('should return application files for admin user', async () => {\n      // Arrange\n      jest.spyOn(therapistAuthService, 'getApplicationFiles').mockResolvedValue(mockApplicationFiles);\n\n      // Act\n      const result = await controller.getApplicationFiles('admin', 'app-123');\n\n      // Assert\n      expect(therapistAuthService.getApplicationFiles).toHaveBeenCalledWith('app-123');\n      expect(result).toEqual(mockApplicationFiles);\n    });\n\n    it('should throw ForbiddenException for non-admin users', async () => {\n      // Act & Assert\n      await expect(controller.getApplicationFiles('client', 'app-123')).rejects.toThrow(ForbiddenException);\n    });\n\n    it('should handle NotFoundException', async () => {\n      // Arrange\n      const notFoundError = new NotFoundException('Application files not found');\n      jest.spyOn(therapistAuthService, 'getApplicationFiles').mockRejectedValue(notFoundError);\n\n      // Act & Assert\n      await expect(controller.getApplicationFiles('admin', 'app-123')).rejects.toThrow(NotFoundException);\n    });\n\n    it('should handle service errors', async () => {\n      // Arrange\n      const error = new Error('Database error');\n      jest.spyOn(therapistAuthService, 'getApplicationFiles').mockRejectedValue(error);\n\n      // Act & Assert\n      await expect(controller.getApplicationFiles('admin', 'app-123')).rejects.toThrow(InternalServerErrorException);\n    });\n  });\n\n  describe('Security Tests', () => {\n    it('should validate input data through ZodValidationPipe', () => {\n      // This tests that the controller uses proper validation\n      const validationPipe = new ZodValidationPipe({} as any);\n      expect(validationPipe).toBeDefined();\n    });\n\n    it('should apply rate limiting through ThrottlerGuard', () => {\n      // Test that throttling is configured\n      const registerMetadata = Reflect.getMetadata('__throttler_options__', controller.register);\n      const loginMetadata = Reflect.getMetadata('__throttler_options__', controller.login);\n      \n      expect(registerMetadata).toBeDefined();\n      expect(loginMetadata).toBeDefined();\n    });\n\n    it('should require authentication for protected endpoints', () => {\n      // Test that protected endpoints have JwtAuthGuard\n      const protectedMethods = ['getProfile', 'getAllApplications', 'getApplicationById', 'updateApplicationStatus', 'getApplicationFiles'];\n      \n      protectedMethods.forEach(method => {\n        const guards = Reflect.getMetadata('__guards__', controller[method as keyof TherapistAuthController]);\n        expect(guards).toBeDefined();\n      });\n    });\n\n    it('should allow public access to public endpoints', () => {\n      // Test that public endpoints are marked as public\n      const publicMethods = ['register', 'login'];\n      \n      publicMethods.forEach(method => {\n        const publicMetadata = Reflect.getMetadata('isPublic', controller[method as keyof TherapistAuthController]);\n        expect(publicMetadata).toBeTruthy();\n      });\n    });\n  });\n\n  describe('Role-based Access Control', () => {\n    it('should test role-based access for admin endpoints', async () => {\n      // Test that admin endpoints require admin role\n      await RoleBasedTestUtils.testWithRoles(\n        async (userId: string, role: string) => {\n          // Mock the auth guard to return the specific role\n          mockJwtAuthGuard.canActivate.mockReturnValue(role === 'admin');\n          \n          try {\n            await controller.getAllApplications(role);\n            return true;\n          } catch (error) {\n            return false;\n          }\n        },\n        {\n          client: false,\n          therapist: false,\n          admin: true,\n          moderator: false,\n        },\n      );\n    });\n\n    it('should validate therapist-specific functionality', async () => {\n      // Test that therapist-specific endpoints work for therapists\n      const therapistContext = MockBuilder.createAuthContext('therapist');\n      \n      jest.spyOn(therapistAuthService, 'getTherapistProfile').mockResolvedValue(mockTherapistUser);\n      \n      const result = await controller.getProfile(therapistContext.userId);\n      \n      expect(result).toBeDefined();\n      expect(result.role).toBe('therapist');\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle network errors gracefully', async () => {\n      // Arrange\n      const networkError = new Error('Network timeout');\n      jest.spyOn(therapistAuthService, 'getTherapistProfile').mockRejectedValue(networkError);\n\n      // Act & Assert\n      await expect(controller.getProfile(TEST_USER_IDS.THERAPIST)).rejects.toThrow(networkError);\n    });\n\n    it('should handle validation errors', async () => {\n      // Test that invalid data would be caught by the validation pipe\n      const invalidData = {\n        email: 'invalid-email',\n        password: '123', // Too short\n        firstName: '',\n        lastName: '',\n      };\n\n      // In a real scenario, this would throw a validation error\n      // The pipe would catch this before it reaches the controller\n      expect(() => {\n        // This would be handled by ZodValidationPipe\n        // and would throw a BadRequestException\n      }).not.toThrow();\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete therapist registration workflow', async () => {\n      // Arrange\n      const registrationDto = {\n        email: 'integration@example.com',\n        password: 'SecurePass123!',\n        firstName: 'Dr. Integration',\n        lastName: 'Test',\n      };\n\n      jest.spyOn(therapistAuthService, 'registerTherapist').mockResolvedValue(mockRegistrationResult);\n\n      // Act\n      const result = await controller.register(registrationDto);\n\n      // Assert\n      expect(result).toBeDefined();\n      expect(result.user.email).toBe(mockTherapistUser.email);\n      expect(result.accessToken).toBe(mockTokens.accessToken);\n      expect(result.refreshToken).toBe(mockTokens.refreshToken);\n      expect(result.expiresIn).toBe(mockTokens.expiresIn);\n      expect(result.message).toBe(mockRegistrationResult.message);\n    });\n\n    it('should handle complete therapist login workflow', async () => {\n      // Arrange\n      const loginDto = {\n        email: TEST_EMAILS.THERAPIST,\n        password: 'SecurePass123!',\n      };\n\n      const mockRequest = {\n        ip: '192.168.1.1',\n        get: jest.fn().mockReturnValue('Test User Agent'),\n      } as any;\n\n      jest.spyOn(therapistAuthService, 'loginTherapist').mockResolvedValue(mockLoginResult);\n\n      // Act\n      const result = await controller.login(loginDto, mockRequest);\n\n      // Assert\n      expect(result).toBeDefined();\n      expect(result.user.email).toBe(mockTherapistUser.email);\n      expect(result.accessToken).toBe(mockTokens.accessToken);\n      expect(result.refreshToken).toBe(mockTokens.refreshToken);\n      expect(result.expiresIn).toBe(mockTokens.expiresIn);\n    });\n\n    it('should handle complete application submission workflow', async () => {\n      // Arrange\n      const mockApplicationResult = {\n        application: { userId: 'temp_12345_therapist_at_example.com' },\n        uploadedFiles: mockApplicationFiles,\n      };\n\n      jest.spyOn(therapistAuthService, 'createApplicationWithDocuments').mockResolvedValue(mockApplicationResult);\n\n      // Act\n      const result = await controller.applyWithDocuments(\n        JSON.stringify(mockApplicationData),\n        JSON.stringify({ '0': 'license', '1': 'diploma' }),\n        mockFiles,\n      );\n\n      // Assert\n      expect(result).toBeDefined();\n      expect(result.success).toBe(true);\n      expect(result.applicationId).toBe(mockApplicationResult.application.userId);\n      expect(result.uploadedFiles).toEqual(mockApplicationFiles);\n    });\n\n    it('should handle complete admin application management workflow', async () => {\n      // Arrange\n      const mockApplicationsResult = {\n        applications: [mockTherapistApplication],\n        totalCount: 1,\n        page: 1,\n        totalPages: 1,\n      };\n\n      jest.spyOn(therapistAuthService, 'getAllApplications').mockResolvedValue(mockApplicationsResult);\n      jest.spyOn(therapistAuthService, 'getApplicationById').mockResolvedValue(mockTherapistApplication);\n\n      // Act - Get all applications\n      const allApplications = await controller.getAllApplications('admin');\n      \n      // Act - Get specific application\n      const specificApplication = await controller.getApplicationById('admin', 'app-123');\n\n      // Assert\n      expect(allApplications).toBeDefined();\n      expect(allApplications.applications.length).toBe(1);\n      expect(allApplications.totalCount).toBe(1);\n      \n      expect(specificApplication).toBeDefined();\n      expect(specificApplication.id).toBe('app-123');\n    });\n  });\n\n  describe('Data Validation', () => {\n    it('should validate registration data structure', () => {\n      // Test that we're using the correct DTO structure\n      const validRegistrationData = {\n        email: 'test@example.com',\n        password: 'SecurePass123!',\n        firstName: 'Dr. Test',\n        lastName: 'User',\n      };\n\n      // Verify all required fields are present\n      expect(validRegistrationData.email).toBeDefined();\n      expect(validRegistrationData.password).toBeDefined();\n      expect(validRegistrationData.firstName).toBeDefined();\n      expect(validRegistrationData.lastName).toBeDefined();\n    });\n\n    it('should validate login data structure', () => {\n      // Test that we're using the correct DTO structure\n      const validLoginData = {\n        email: 'test@example.com',\n        password: 'SecurePass123!',\n      };\n\n      // Verify all required fields are present\n      expect(validLoginData.email).toBeDefined();\n      expect(validLoginData.password).toBeDefined();\n    });\n\n    it('should validate application data structure', () => {\n      // Test that we're using the correct DTO structure\n      const validApplicationData = {\n        email: 'test@example.com',\n        firstName: 'Dr. Test',\n        lastName: 'User',\n        licenseNumber: 'LIC123456',\n        specializations: ['anxiety', 'depression'],\n        education: 'PhD in Psychology',\n        experience: '5 years',\n      };\n\n      // Verify all required fields are present\n      expect(validApplicationData.email).toBeDefined();\n      expect(validApplicationData.firstName).toBeDefined();\n      expect(validApplicationData.lastName).toBeDefined();\n      expect(validApplicationData.licenseNumber).toBeDefined();\n      expect(validApplicationData.specializations).toBeDefined();\n      expect(validApplicationData.education).toBeDefined();\n      expect(validApplicationData.experience).toBeDefined();\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return correctly formatted registration response', async () => {\n      // Arrange\n      const registerDto = {\n        email: 'format@example.com',\n        password: 'SecurePass123!',\n        firstName: 'Dr. Format',\n        lastName: 'Test',\n      };\n\n      jest.spyOn(therapistAuthService, 'registerTherapist').mockResolvedValue(mockRegistrationResult);\n\n      // Act\n      const result = await controller.register(registerDto);\n\n      // Assert\n      expect(result).toHaveProperty('user');\n      expect(result).toHaveProperty('accessToken');\n      expect(result).toHaveProperty('refreshToken');\n      expect(result).toHaveProperty('expiresIn');\n      expect(result).toHaveProperty('message');\n      \n      expect(result.user).toHaveProperty('id');\n      expect(result.user).toHaveProperty('email');\n      expect(result.user).toHaveProperty('firstName');\n      expect(result.user).toHaveProperty('lastName');\n      expect(result.user).toHaveProperty('role');\n      expect(result.user).toHaveProperty('emailVerified');\n    });\n\n    it('should return correctly formatted login response', async () => {\n      // Arrange\n      const loginDto = {\n        email: TEST_EMAILS.THERAPIST,\n        password: 'SecurePass123!',\n      };\n\n      const mockRequest = {\n        ip: '192.168.1.1',\n        get: jest.fn().mockReturnValue('Test User Agent'),\n      } as any;\n\n      jest.spyOn(therapistAuthService, 'loginTherapist').mockResolvedValue(mockLoginResult);\n\n      // Act\n      const result = await controller.login(loginDto, mockRequest);\n\n      // Assert\n      expect(result).toHaveProperty('user');\n      expect(result).toHaveProperty('accessToken');\n      expect(result).toHaveProperty('refreshToken');\n      expect(result).toHaveProperty('expiresIn');\n      expect(result).not.toHaveProperty('message'); // Login doesn't include message\n    });\n\n    it('should return correctly formatted application response', async () => {\n      // Arrange\n      const mockApplicationResult = {\n        application: { userId: 'temp_12345_therapist_at_example.com' },\n        uploadedFiles: mockApplicationFiles,\n      };\n\n      jest.spyOn(therapistAuthService, 'createApplicationWithDocuments').mockResolvedValue(mockApplicationResult);\n\n      // Act\n      const result = await controller.applyWithDocuments(\n        JSON.stringify(mockApplicationData),\n        JSON.stringify({ '0': 'license', '1': 'diploma' }),\n        mockFiles,\n      );\n\n      // Assert\n      expect(result).toHaveProperty('success');\n      expect(result).toHaveProperty('message');\n      expect(result).toHaveProperty('applicationId');\n      expect(result).toHaveProperty('uploadedFiles');\n      \n      expect(result.success).toBe(true);\n      expect(result.uploadedFiles).toBeInstanceOf(Array);\n    });\n  });\n});"],"version":3}