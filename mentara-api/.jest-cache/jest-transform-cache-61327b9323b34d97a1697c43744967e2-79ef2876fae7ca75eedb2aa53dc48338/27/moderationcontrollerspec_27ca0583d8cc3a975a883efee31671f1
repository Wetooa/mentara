a3a53597703c120c2cb0d79733c23f20
"use strict";
/**
 * Comprehensive Test Suite for ModerationController
 * Tests disabled join requests functionality and API compatibility
 */
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const moderation_controller_1 = require("./moderation.controller");
const jwt_auth_guard_1 = require("../../auth/guards/jwt-auth.guard");
const role_based_access_guard_1 = require("../../auth/guards/role-based-access.guard");
const index_1 = require("../../test-utils/index");
describe('ModerationController', () => {
    let controller;
    let module;
    // Mock Guards
    const mockJwtAuthGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    const mockRoleBasedAccessGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    // Test data
    const mockUser = {
        id: index_1.TEST_USER_IDS.MODERATOR,
        email: index_1.TEST_EMAILS.MODERATOR,
        role: 'moderator',
    };
    const mockJoinRequestDto = {
        communityId: 'community_123456789',
        reason: 'I would like to join this community for support',
    };
    const mockProcessDto = {
        action: 'approve',
        reason: 'User meets community guidelines',
    };
    beforeEach(async () => {
        module = await testing_1.Test.createTestingModule({
            controllers: [moderation_controller_1.ModerationController],
            providers: [],
        })
            .overrideGuard(jwt_auth_guard_1.JwtAuthGuard)
            .useValue(mockJwtAuthGuard)
            .overrideGuard(role_based_access_guard_1.RoleBasedAccessGuard)
            .useValue(mockRoleBasedAccessGuard)
            .compile();
        controller = module.get(moderation_controller_1.ModerationController);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('Controller Initialization', () => {
        it('should be defined', () => {
            expect(controller).toBeDefined();
        });
    });
    describe('Security Guards', () => {
        it('should be protected by JwtAuthGuard and RoleBasedAccessGuard', () => {
            const guards = Reflect.getMetadata('__guards__', moderation_controller_1.ModerationController);
            expect(guards).toContain(jwt_auth_guard_1.JwtAuthGuard);
            expect(guards).toContain(role_based_access_guard_1.RoleBasedAccessGuard);
        });
        it('should have proper route decorators', () => {
            const controllerMetadata = Reflect.getMetadata('path', moderation_controller_1.ModerationController);
            expect(controllerMetadata).toBe('communities/moderation');
        });
        it('should require moderator or admin role', () => {
            const expectedRoles = ['moderator', 'admin'];
            const metadata = Reflect.getMetadata('roles', moderation_controller_1.ModerationController);
            expect(metadata).toEqual(expectedRoles);
        });
    });
    describe('POST /communities/moderation/join-requests (Disabled)', () => {
        it('should throw BadRequestException when creating join request', async () => {
            await expect(controller.createJoinRequest(mockJoinRequestDto)).rejects.toThrow(common_1.BadRequestException);
            try {
                await controller.createJoinRequest(mockJoinRequestDto);
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.BadRequestException);
                expect(error.message).toContain('Join requests feature has been disabled');
            }
        });
        it('should handle any DTO input gracefully', async () => {
            const invalidDto = { invalid: 'data' };
            await expect(controller.createJoinRequest(invalidDto)).rejects.toThrow(common_1.BadRequestException);
        });
        it('should always throw the same error message', async () => {
            const dto1 = { communityId: 'test1' };
            const dto2 = { communityId: 'test2', reason: 'different reason' };
            const error1 = await controller.createJoinRequest(dto1).catch(e => e);
            const error2 = await controller.createJoinRequest(dto2).catch(e => e);
            expect(error1.message).toBe(error2.message);
            expect(error1.message).toContain('disabled');
        });
    });
    describe('GET /communities/moderation/join-requests (Disabled)', () => {
        it('should return empty list for join requests', async () => {
            const result = await controller.getJoinRequests({});
            expect(result).toEqual({
                requests: [],
                pagination: { page: 1, limit: 20, total: 0, totalPages: 0 },
                filters: {},
            });
        });
        it('should handle query parameters gracefully', async () => {
            const query = {
                status: 'pending',
                communityId: 'community_123',
                page: 2,
                limit: 50,
            };
            const result = await controller.getJoinRequests(query);
            expect(result.requests).toEqual([]);
            expect(result.pagination.total).toBe(0);
            expect(result.pagination.totalPages).toBe(0);
        });
        it('should always return consistent empty structure', async () => {
            const result1 = await controller.getJoinRequests({});
            const result2 = await controller.getJoinRequests({ any: 'parameter' });
            expect(result1).toEqual(result2);
            expect(result1.requests).toHaveLength(0);
            expect(result2.requests).toHaveLength(0);
        });
    });
    describe('GET /communities/moderation/join-requests/user/:userId (Disabled)', () => {
        it('should return empty array for user join requests', async () => {
            const result = await controller.getUserJoinRequests(index_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual([]);
            expect(Array.isArray(result)).toBe(true);
        });
        it('should handle any userId input', async () => {
            const userIds = [
                index_1.TEST_USER_IDS.CLIENT,
                index_1.TEST_USER_IDS.THERAPIST,
                'nonexistent_user',
                'invalid-format',
                '',
            ];
            for (const userId of userIds) {
                const result = await controller.getUserJoinRequests(userId);
                expect(result).toEqual([]);
            }
        });
        it('should be consistent across multiple calls', async () => {
            const result1 = await controller.getUserJoinRequests(index_1.TEST_USER_IDS.CLIENT);
            const result2 = await controller.getUserJoinRequests(index_1.TEST_USER_IDS.CLIENT);
            expect(result1).toEqual(result2);
            expect(result1).toEqual([]);
        });
    });
    describe('GET /communities/moderation/join-requests/pending (Disabled)', () => {
        it('should return empty array for pending requests', async () => {
            const result = await controller.getPendingRequests(mockUser);
            expect(result).toEqual([]);
            expect(Array.isArray(result)).toBe(true);
        });
        it('should handle different user contexts', async () => {
            const users = [
                { id: index_1.TEST_USER_IDS.MODERATOR, role: 'moderator' },
                { id: index_1.TEST_USER_IDS.ADMIN, role: 'admin' },
                { id: index_1.TEST_USER_IDS.CLIENT, role: 'client' },
            ];
            for (const user of users) {
                const result = await controller.getPendingRequests(user);
                expect(result).toEqual([]);
            }
        });
    });
    describe('PUT /communities/moderation/join-requests/:requestId/process (Disabled)', () => {
        it('should throw BadRequestException when processing request', async () => {
            await expect(controller.processJoinRequest('request_123', mockProcessDto, mockUser)).rejects.toThrow(common_1.BadRequestException);
            try {
                await controller.processJoinRequest('request_123', mockProcessDto, mockUser);
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.BadRequestException);
                expect(error.message).toContain('Join requests feature has been disabled');
            }
        });
        it('should handle any request ID format', async () => {
            const requestIds = [
                'valid_uuid_format',
                'invalid-format',
                '',
                '123',
                'very-long-request-id-that-might-cause-issues',
            ];
            for (const requestId of requestIds) {
                await expect(controller.processJoinRequest(requestId, mockProcessDto, mockUser)).rejects.toThrow(common_1.BadRequestException);
            }
        });
        it('should handle different process actions', async () => {
            const processDtos = [
                { action: 'approve', reason: 'Good fit' },
                { action: 'reject', reason: 'Does not meet criteria' },
                { action: 'pending', reason: 'Need more information' },
                { invalid: 'data' },
            ];
            for (const dto of processDtos) {
                await expect(controller.processJoinRequest('request_123', dto, mockUser)).rejects.toThrow(common_1.BadRequestException);
            }
        });
    });
    describe('DELETE /communities/moderation/join-requests/:requestId (Disabled)', () => {
        it('should throw BadRequestException when canceling request', async () => {
            await expect(controller.cancelJoinRequest('request_123', mockUser)).rejects.toThrow(common_1.BadRequestException);
            try {
                await controller.cancelJoinRequest('request_123', mockUser);
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.BadRequestException);
                expect(error.message).toContain('Join requests feature has been disabled');
            }
        });
        it('should handle any request ID for cancellation', async () => {
            const requestIds = ['request_1', 'request_2', 'invalid_id', ''];
            for (const requestId of requestIds) {
                await expect(controller.cancelJoinRequest(requestId, mockUser)).rejects.toThrow(common_1.BadRequestException);
            }
        });
        it('should handle different user contexts for cancellation', async () => {
            const users = [
                { id: index_1.TEST_USER_IDS.CLIENT, role: 'client' },
                { id: index_1.TEST_USER_IDS.MODERATOR, role: 'moderator' },
                { id: index_1.TEST_USER_IDS.ADMIN, role: 'admin' },
            ];
            for (const user of users) {
                await expect(controller.cancelJoinRequest('request_123', user)).rejects.toThrow(common_1.BadRequestException);
            }
        });
    });
    describe('GET /communities/moderation/stats/join-requests (Disabled)', () => {
        it('should return empty stats for join requests', async () => {
            const result = await controller.getJoinRequestStats({});
            expect(result).toEqual({
                totalRequests: 0,
                pendingRequests: 0,
                approvedRequests: 0,
                rejectedRequests: 0,
                avgProcessingTime: 0,
                requestsByStatus: {},
                recentActivity: [],
            });
        });
        it('should handle query parameters for stats', async () => {
            const query = {
                startDate: '2024-01-01',
                endDate: '2024-02-14',
                communityId: 'community_123',
            };
            const result = await controller.getJoinRequestStats(query);
            expect(result.totalRequests).toBe(0);
            expect(result.pendingRequests).toBe(0);
            expect(result.avgProcessingTime).toBe(0);
            expect(Array.isArray(result.recentActivity)).toBe(true);
            expect(result.recentActivity).toHaveLength(0);
        });
        it('should validate stats structure', async () => {
            const result = await controller.getJoinRequestStats({});
            expect(result).toHaveProperty('totalRequests');
            expect(result).toHaveProperty('pendingRequests');
            expect(result).toHaveProperty('approvedRequests');
            expect(result).toHaveProperty('rejectedRequests');
            expect(result).toHaveProperty('avgProcessingTime');
            expect(result).toHaveProperty('requestsByStatus');
            expect(result).toHaveProperty('recentActivity');
            expect(typeof result.totalRequests).toBe('number');
            expect(typeof result.avgProcessingTime).toBe('number');
            expect(typeof result.requestsByStatus).toBe('object');
            expect(Array.isArray(result.recentActivity)).toBe(true);
        });
    });
    describe('POST /communities/moderation/join-requests/bulk-process (Disabled)', () => {
        it('should throw BadRequestException for bulk processing', async () => {
            const bulkDto = {
                requestIds: ['request_1', 'request_2', 'request_3'],
                action: 'approve',
                reason: 'Bulk approval',
            };
            await expect(controller.bulkProcessJoinRequests(bulkDto, mockUser)).rejects.toThrow(common_1.BadRequestException);
            try {
                await controller.bulkProcessJoinRequests(bulkDto, mockUser);
            }
            catch (error) {
                expect(error).toBeInstanceOf(common_1.BadRequestException);
                expect(error.message).toContain('Join requests feature has been disabled');
            }
        });
        it('should handle empty bulk requests', async () => {
            const emptyDto = { requestIds: [], action: 'approve' };
            await expect(controller.bulkProcessJoinRequests(emptyDto, mockUser)).rejects.toThrow(common_1.BadRequestException);
        });
        it('should handle invalid bulk data', async () => {
            const invalidDtos = [
                { invalid: 'data' },
                { requestIds: null, action: 'approve' },
                { requestIds: ['valid'], action: null },
                {},
            ];
            for (const dto of invalidDtos) {
                await expect(controller.bulkProcessJoinRequests(dto, mockUser)).rejects.toThrow(common_1.BadRequestException);
            }
        });
    });
    describe('Response Format Validation', () => {
        it('should return properly formatted empty list responses', async () => {
            const listResponse = await controller.getJoinRequests({});
            const userResponse = await controller.getUserJoinRequests(index_1.TEST_USER_IDS.CLIENT);
            const pendingResponse = await controller.getPendingRequests(mockUser);
            // Validate list response structure
            expect(listResponse).toHaveProperty('requests');
            expect(listResponse).toHaveProperty('pagination');
            expect(listResponse).toHaveProperty('filters');
            expect(Array.isArray(listResponse.requests)).toBe(true);
            expect(listResponse.pagination).toHaveProperty('page');
            expect(listResponse.pagination).toHaveProperty('limit');
            expect(listResponse.pagination).toHaveProperty('total');
            expect(listResponse.pagination).toHaveProperty('totalPages');
            // Validate user response
            expect(Array.isArray(userResponse)).toBe(true);
            // Validate pending response
            expect(Array.isArray(pendingResponse)).toBe(true);
        });
        it('should return properly formatted stats response', async () => {
            const statsResponse = await controller.getJoinRequestStats({});
            expect(statsResponse).toHaveProperty('totalRequests');
            expect(statsResponse).toHaveProperty('pendingRequests');
            expect(statsResponse).toHaveProperty('approvedRequests');
            expect(statsResponse).toHaveProperty('rejectedRequests');
            expect(statsResponse).toHaveProperty('avgProcessingTime');
            expect(statsResponse).toHaveProperty('requestsByStatus');
            expect(statsResponse).toHaveProperty('recentActivity');
            expect(typeof statsResponse.totalRequests).toBe('number');
            expect(typeof statsResponse.avgProcessingTime).toBe('number');
            expect(Array.isArray(statsResponse.recentActivity)).toBe(true);
        });
        it('should return consistent error format for disabled features', async () => {
            const errorMethods = [
                () => controller.createJoinRequest({}),
                () => controller.processJoinRequest('id', {}, mockUser),
                () => controller.cancelJoinRequest('id', mockUser),
                () => controller.bulkProcessJoinRequests({}, mockUser),
            ];
            for (const method of errorMethods) {
                try {
                    await method();
                }
                catch (error) {
                    expect(error).toBeInstanceOf(common_1.BadRequestException);
                    expect(error.message).toContain('disabled');
                }
            }
        });
    });
    describe('Error Handling', () => {
        it('should handle malformed input gracefully', async () => {
            const malformedInputs = [null, undefined, '', 0, false, []];
            for (const input of malformedInputs) {
                // Test endpoints that accept any input
                const listResult = await controller.getJoinRequests(input);
                expect(listResult.requests).toEqual([]);
                const statsResult = await controller.getJoinRequestStats(input);
                expect(statsResult.totalRequests).toBe(0);
            }
        });
        it('should maintain consistent behavior under stress', async () => {
            // Test rapid successive calls
            const promises = Array.from({ length: 10 }, async (_, i) => {
                const listResult = await controller.getJoinRequests({ index: i });
                const statsResult = await controller.getJoinRequestStats({ index: i });
                return { list: listResult, stats: statsResult };
            });
            const results = await Promise.all(promises);
            results.forEach(result => {
                expect(result.list.requests).toEqual([]);
                expect(result.stats.totalRequests).toBe(0);
            });
        });
        it('should handle edge case user inputs', async () => {
            const edgeCaseUsers = [
                null,
                undefined,
                { id: null },
                { id: '' },
                { role: 'invalid' },
                {},
            ];
            for (const user of edgeCaseUsers) {
                const pendingResult = await controller.getPendingRequests(user);
                expect(pendingResult).toEqual([]);
            }
        });
    });
    describe('Integration Tests', () => {
        it('should handle complete disabled workflow consistently', async () => {
            // Test that all endpoints maintain consistent disabled state
            const listResult = await controller.getJoinRequests({});
            expect(listResult.requests).toHaveLength(0);
            const userResult = await controller.getUserJoinRequests(index_1.TEST_USER_IDS.CLIENT);
            expect(userResult).toHaveLength(0);
            const pendingResult = await controller.getPendingRequests(mockUser);
            expect(pendingResult).toHaveLength(0);
            const statsResult = await controller.getJoinRequestStats({});
            expect(statsResult.totalRequests).toBe(0);
            // Test that action endpoints consistently throw errors
            const actionMethods = [
                () => controller.createJoinRequest({}),
                () => controller.processJoinRequest('id', {}, mockUser),
                () => controller.cancelJoinRequest('id', mockUser),
                () => controller.bulkProcessJoinRequests({}, mockUser),
            ];
            for (const method of actionMethods) {
                await expect(method()).rejects.toThrow(common_1.BadRequestException);
            }
        });
        it('should validate API compatibility for future enablement', async () => {
            // Ensure response structures are compatible with potential future enablement
            const listResponse = await controller.getJoinRequests({});
            expect(listResponse).toHaveProperty('requests');
            expect(listResponse).toHaveProperty('pagination');
            expect(listResponse.pagination).toHaveProperty('page');
            expect(listResponse.pagination).toHaveProperty('limit');
            const statsResponse = await controller.getJoinRequestStats({});
            expect(statsResponse).toHaveProperty('totalRequests');
            expect(statsResponse).toHaveProperty('requestsByStatus');
            expect(statsResponse).toHaveProperty('recentActivity');
            // Ensure all required properties exist for API contracts
            const requiredStatsProperties = [
                'totalRequests', 'pendingRequests', 'approvedRequests',
                'rejectedRequests', 'avgProcessingTime', 'requestsByStatus', 'recentActivity'
            ];
            requiredStatsProperties.forEach(prop => {
                expect(statsResponse).toHaveProperty(prop);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2NvbW11bml0aWVzL2NvbnRyb2xsZXJzL21vZGVyYXRpb24uY29udHJvbGxlci5zcGVjLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBRUgsNkNBQXNEO0FBQ3RELDJDQUFxRDtBQUNyRCxtRUFBK0Q7QUFDL0QscUVBQWdFO0FBQ2hFLHVGQUFpRjtBQUdqRixrREFBb0U7QUFFcEUsUUFBUSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRTtJQUNwQyxJQUFJLFVBQWdDLENBQUM7SUFDckMsSUFBSSxNQUFxQixDQUFDO0lBRTFCLGNBQWM7SUFDZCxNQUFNLGdCQUFnQixHQUFHO1FBQ3ZCLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQztLQUM3QyxDQUFDO0lBRUYsTUFBTSx3QkFBd0IsR0FBRztRQUMvQixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUM7S0FDN0MsQ0FBQztJQUVGLFlBQVk7SUFDWixNQUFNLFFBQVEsR0FBRztRQUNmLEVBQUUsRUFBRSxxQkFBYSxDQUFDLFNBQVM7UUFDM0IsS0FBSyxFQUFFLG1CQUFXLENBQUMsU0FBUztRQUM1QixJQUFJLEVBQUUsV0FBVztLQUNsQixDQUFDO0lBRUYsTUFBTSxrQkFBa0IsR0FBRztRQUN6QixXQUFXLEVBQUUscUJBQXFCO1FBQ2xDLE1BQU0sRUFBRSxpREFBaUQ7S0FDMUQsQ0FBQztJQUVGLE1BQU0sY0FBYyxHQUFHO1FBQ3JCLE1BQU0sRUFBRSxTQUFTO1FBQ2pCLE1BQU0sRUFBRSxpQ0FBaUM7S0FDMUMsQ0FBQztJQUVGLFVBQVUsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNwQixNQUFNLEdBQUcsTUFBTSxjQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDdEMsV0FBVyxFQUFFLENBQUMsNENBQW9CLENBQUM7WUFDbkMsU0FBUyxFQUFFLEVBQUU7U0FDZCxDQUFDO2FBQ0MsYUFBYSxDQUFDLDZCQUFZLENBQUM7YUFDM0IsUUFBUSxDQUFDLGdCQUFnQixDQUFDO2FBQzFCLGFBQWEsQ0FBQyw4Q0FBb0IsQ0FBQzthQUNuQyxRQUFRLENBQUMsd0JBQXdCLENBQUM7YUFDbEMsT0FBTyxFQUFFLENBQUM7UUFFYixVQUFVLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBdUIsNENBQW9CLENBQUMsQ0FBQztJQUN0RSxDQUFDLENBQUMsQ0FBQztJQUVILFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1FBQ3pDLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7WUFDM0IsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1FBQy9CLEVBQUUsQ0FBQyw4REFBOEQsRUFBRSxHQUFHLEVBQUU7WUFDdEUsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxZQUFZLEVBQUUsNENBQW9CLENBQUMsQ0FBQztZQUN2RSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLDZCQUFZLENBQUMsQ0FBQztZQUN2QyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLDhDQUFvQixDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1lBQzdDLE1BQU0sa0JBQWtCLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsNENBQW9CLENBQUMsQ0FBQztZQUM3RSxNQUFNLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxJQUFJLENBQUMsd0JBQXdCLENBQUMsQ0FBQztRQUM1RCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7WUFDaEQsTUFBTSxhQUFhLEdBQUcsQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDN0MsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsNENBQW9CLENBQUMsQ0FBQztZQUNwRSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzFDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsdURBQXVELEVBQUUsR0FBRyxFQUFFO1FBQ3JFLEVBQUUsQ0FBQyw2REFBNkQsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMzRSxNQUFNLE1BQU0sQ0FDVixVQUFVLENBQUMsaUJBQWlCLENBQUMsa0JBQWtCLENBQUMsQ0FDakQsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLDRCQUFtQixDQUFDLENBQUM7WUFFdkMsSUFBSSxDQUFDO2dCQUNILE1BQU0sVUFBVSxDQUFDLGlCQUFpQixDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDekQsQ0FBQztZQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7Z0JBQ2YsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLGNBQWMsQ0FBQyw0QkFBbUIsQ0FBQyxDQUFDO2dCQUNsRCxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO1lBQzdFLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN0RCxNQUFNLFVBQVUsR0FBRyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsQ0FBQztZQUV2QyxNQUFNLE1BQU0sQ0FDVixVQUFVLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQ3pDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyw0QkFBbUIsQ0FBQyxDQUFDO1FBQ3pDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzFELE1BQU0sSUFBSSxHQUFHLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxDQUFDO1lBQ3RDLE1BQU0sSUFBSSxHQUFHLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQztZQUVsRSxNQUFNLE1BQU0sR0FBRyxNQUFNLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0RSxNQUFNLE1BQU0sR0FBRyxNQUFNLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV0RSxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDNUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDL0MsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxzREFBc0QsRUFBRSxHQUFHLEVBQUU7UUFDcEUsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzFELE1BQU0sTUFBTSxHQUFHLE1BQU0sVUFBVSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUVwRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDO2dCQUNyQixRQUFRLEVBQUUsRUFBRTtnQkFDWixVQUFVLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFO2dCQUMzRCxPQUFPLEVBQUUsRUFBRTthQUNaLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDJDQUEyQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3pELE1BQU0sS0FBSyxHQUFHO2dCQUNaLE1BQU0sRUFBRSxTQUFTO2dCQUNqQixXQUFXLEVBQUUsZUFBZTtnQkFDNUIsSUFBSSxFQUFFLENBQUM7Z0JBQ1AsS0FBSyxFQUFFLEVBQUU7YUFDVixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsTUFBTSxVQUFVLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXZELE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsaURBQWlELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDL0QsTUFBTSxPQUFPLEdBQUcsTUFBTSxVQUFVLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3JELE1BQU0sT0FBTyxHQUFHLE1BQU0sVUFBVSxDQUFDLGVBQWUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDO1lBRXZFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDakMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0MsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxtRUFBbUUsRUFBRSxHQUFHLEVBQUU7UUFDakYsRUFBRSxDQUFDLGtEQUFrRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2hFLE1BQU0sTUFBTSxHQUFHLE1BQU0sVUFBVSxDQUFDLG1CQUFtQixDQUFDLHFCQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFMUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUMzQixNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM5QyxNQUFNLE9BQU8sR0FBRztnQkFDZCxxQkFBYSxDQUFDLE1BQU07Z0JBQ3BCLHFCQUFhLENBQUMsU0FBUztnQkFDdkIsa0JBQWtCO2dCQUNsQixnQkFBZ0I7Z0JBQ2hCLEVBQUU7YUFDSCxDQUFDO1lBRUYsS0FBSyxNQUFNLE1BQU0sSUFBSSxPQUFPLEVBQUUsQ0FBQztnQkFDN0IsTUFBTSxNQUFNLEdBQUcsTUFBTSxVQUFVLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzVELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDN0IsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzFELE1BQU0sT0FBTyxHQUFHLE1BQU0sVUFBVSxDQUFDLG1CQUFtQixDQUFDLHFCQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDM0UsTUFBTSxPQUFPLEdBQUcsTUFBTSxVQUFVLENBQUMsbUJBQW1CLENBQUMscUJBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUUzRSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2pDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDOUIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyw4REFBOEQsRUFBRSxHQUFHLEVBQUU7UUFDNUUsRUFBRSxDQUFDLGdEQUFnRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzlELE1BQU0sTUFBTSxHQUFHLE1BQU0sVUFBVSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRTdELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDM0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsdUNBQXVDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDckQsTUFBTSxLQUFLLEdBQUc7Z0JBQ1osRUFBRSxFQUFFLEVBQUUscUJBQWEsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtnQkFDbEQsRUFBRSxFQUFFLEVBQUUscUJBQWEsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRTtnQkFDMUMsRUFBRSxFQUFFLEVBQUUscUJBQWEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRTthQUM3QyxDQUFDO1lBRUYsS0FBSyxNQUFNLElBQUksSUFBSSxLQUFLLEVBQUUsQ0FBQztnQkFDekIsTUFBTSxNQUFNLEdBQUcsTUFBTSxVQUFVLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ3pELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDN0IsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMseUVBQXlFLEVBQUUsR0FBRyxFQUFFO1FBQ3ZGLEVBQUUsQ0FBQywwREFBMEQsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN4RSxNQUFNLE1BQU0sQ0FDVixVQUFVLENBQUMsa0JBQWtCLENBQUMsYUFBYSxFQUFFLGNBQWMsRUFBRSxRQUFRLENBQUMsQ0FDdkUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLDRCQUFtQixDQUFDLENBQUM7WUFFdkMsSUFBSSxDQUFDO2dCQUNILE1BQU0sVUFBVSxDQUFDLGtCQUFrQixDQUFDLGFBQWEsRUFBRSxjQUFjLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDL0UsQ0FBQztZQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7Z0JBQ2YsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLGNBQWMsQ0FBQyw0QkFBbUIsQ0FBQyxDQUFDO2dCQUNsRCxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO1lBQzdFLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNuRCxNQUFNLFVBQVUsR0FBRztnQkFDakIsbUJBQW1CO2dCQUNuQixnQkFBZ0I7Z0JBQ2hCLEVBQUU7Z0JBQ0YsS0FBSztnQkFDTCw4Q0FBOEM7YUFDL0MsQ0FBQztZQUVGLEtBQUssTUFBTSxTQUFTLElBQUksVUFBVSxFQUFFLENBQUM7Z0JBQ25DLE1BQU0sTUFBTSxDQUNWLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUUsY0FBYyxFQUFFLFFBQVEsQ0FBQyxDQUNuRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsNEJBQW1CLENBQUMsQ0FBQztZQUN6QyxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMseUNBQXlDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDdkQsTUFBTSxXQUFXLEdBQUc7Z0JBQ2xCLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFO2dCQUN6QyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLHdCQUF3QixFQUFFO2dCQUN0RCxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLHVCQUF1QixFQUFFO2dCQUN0RCxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUU7YUFDcEIsQ0FBQztZQUVGLEtBQUssTUFBTSxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7Z0JBQzlCLE1BQU0sTUFBTSxDQUNWLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUM1RCxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsNEJBQW1CLENBQUMsQ0FBQztZQUN6QyxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxvRUFBb0UsRUFBRSxHQUFHLEVBQUU7UUFDbEYsRUFBRSxDQUFDLHlEQUF5RCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3ZFLE1BQU0sTUFBTSxDQUNWLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLEVBQUUsUUFBUSxDQUFDLENBQ3RELENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyw0QkFBbUIsQ0FBQyxDQUFDO1lBRXZDLElBQUksQ0FBQztnQkFDSCxNQUFNLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDOUQsQ0FBQztZQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7Z0JBQ2YsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLGNBQWMsQ0FBQyw0QkFBbUIsQ0FBQyxDQUFDO2dCQUNsRCxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO1lBQzdFLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywrQ0FBK0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM3RCxNQUFNLFVBQVUsR0FBRyxDQUFDLFdBQVcsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBRWhFLEtBQUssTUFBTSxTQUFTLElBQUksVUFBVSxFQUFFLENBQUM7Z0JBQ25DLE1BQU0sTUFBTSxDQUNWLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQ2xELENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyw0QkFBbUIsQ0FBQyxDQUFDO1lBQ3pDLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx3REFBd0QsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN0RSxNQUFNLEtBQUssR0FBRztnQkFDWixFQUFFLEVBQUUsRUFBRSxxQkFBYSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFO2dCQUM1QyxFQUFFLEVBQUUsRUFBRSxxQkFBYSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFO2dCQUNsRCxFQUFFLEVBQUUsRUFBRSxxQkFBYSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFO2FBQzNDLENBQUM7WUFFRixLQUFLLE1BQU0sSUFBSSxJQUFJLEtBQUssRUFBRSxDQUFDO2dCQUN6QixNQUFNLE1BQU0sQ0FDVixVQUFVLENBQUMsaUJBQWlCLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUNsRCxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsNEJBQW1CLENBQUMsQ0FBQztZQUN6QyxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyw0REFBNEQsRUFBRSxHQUFHLEVBQUU7UUFDMUUsRUFBRSxDQUFDLDZDQUE2QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzNELE1BQU0sTUFBTSxHQUFHLE1BQU0sVUFBVSxDQUFDLG1CQUFtQixDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRXhELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUM7Z0JBQ3JCLGFBQWEsRUFBRSxDQUFDO2dCQUNoQixlQUFlLEVBQUUsQ0FBQztnQkFDbEIsZ0JBQWdCLEVBQUUsQ0FBQztnQkFDbkIsZ0JBQWdCLEVBQUUsQ0FBQztnQkFDbkIsaUJBQWlCLEVBQUUsQ0FBQztnQkFDcEIsZ0JBQWdCLEVBQUUsRUFBRTtnQkFDcEIsY0FBYyxFQUFFLEVBQUU7YUFDbkIsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMENBQTBDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDeEQsTUFBTSxLQUFLLEdBQUc7Z0JBQ1osU0FBUyxFQUFFLFlBQVk7Z0JBQ3ZCLE9BQU8sRUFBRSxZQUFZO2dCQUNyQixXQUFXLEVBQUUsZUFBZTthQUM3QixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsTUFBTSxVQUFVLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFM0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN6QyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsaUNBQWlDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDL0MsTUFBTSxNQUFNLEdBQUcsTUFBTSxVQUFVLENBQUMsbUJBQW1CLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFeEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUMvQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsY0FBYyxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDakQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQ2xELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUNsRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsY0FBYyxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDbkQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQ2xELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUVoRCxNQUFNLENBQUMsT0FBTyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ25ELE1BQU0sQ0FBQyxPQUFPLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN2RCxNQUFNLENBQUMsT0FBTyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsb0VBQW9FLEVBQUUsR0FBRyxFQUFFO1FBQ2xGLEVBQUUsQ0FBQyxzREFBc0QsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNwRSxNQUFNLE9BQU8sR0FBRztnQkFDZCxVQUFVLEVBQUUsQ0FBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLFdBQVcsQ0FBQztnQkFDbkQsTUFBTSxFQUFFLFNBQVM7Z0JBQ2pCLE1BQU0sRUFBRSxlQUFlO2FBQ3hCLENBQUM7WUFFRixNQUFNLE1BQU0sQ0FDVixVQUFVLENBQUMsdUJBQXVCLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUN0RCxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsNEJBQW1CLENBQUMsQ0FBQztZQUV2QyxJQUFJLENBQUM7Z0JBQ0gsTUFBTSxVQUFVLENBQUMsdUJBQXVCLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQzlELENBQUM7WUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO2dCQUNmLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxjQUFjLENBQUMsNEJBQW1CLENBQUMsQ0FBQztnQkFDbEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMseUNBQXlDLENBQUMsQ0FBQztZQUM3RSxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsbUNBQW1DLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDakQsTUFBTSxRQUFRLEdBQUcsRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsQ0FBQztZQUV2RCxNQUFNLE1BQU0sQ0FDVixVQUFVLENBQUMsdUJBQXVCLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUN2RCxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsNEJBQW1CLENBQUMsQ0FBQztRQUN6QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMvQyxNQUFNLFdBQVcsR0FBRztnQkFDbEIsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFO2dCQUNuQixFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRTtnQkFDdkMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUN2QyxFQUFFO2FBQ0gsQ0FBQztZQUVGLEtBQUssTUFBTSxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7Z0JBQzlCLE1BQU0sTUFBTSxDQUNWLFVBQVUsQ0FBQyx1QkFBdUIsQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQ2xELENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyw0QkFBbUIsQ0FBQyxDQUFDO1lBQ3pDLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsRUFBRTtRQUMxQyxFQUFFLENBQUMsdURBQXVELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDckUsTUFBTSxZQUFZLEdBQUcsTUFBTSxVQUFVLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzFELE1BQU0sWUFBWSxHQUFHLE1BQU0sVUFBVSxDQUFDLG1CQUFtQixDQUFDLHFCQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDaEYsTUFBTSxlQUFlLEdBQUcsTUFBTSxVQUFVLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFdEUsbUNBQW1DO1lBQ25DLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDaEQsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUNsRCxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQy9DLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN4RCxNQUFNLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN2RCxNQUFNLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN4RCxNQUFNLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN4RCxNQUFNLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUU3RCx5QkFBeUI7WUFDekIsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFL0MsNEJBQTRCO1lBQzVCLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGlEQUFpRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQy9ELE1BQU0sYUFBYSxHQUFHLE1BQU0sVUFBVSxDQUFDLG1CQUFtQixDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRS9ELE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQ3hELE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUN6RCxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsY0FBYyxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDekQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBQzFELE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUN6RCxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFFdkQsTUFBTSxDQUFDLE9BQU8sYUFBYSxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMxRCxNQUFNLENBQUMsT0FBTyxhQUFhLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDOUQsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pFLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDZEQUE2RCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzNFLE1BQU0sWUFBWSxHQUFHO2dCQUNuQixHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsaUJBQWlCLENBQUMsRUFBRSxDQUFDO2dCQUN0QyxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxRQUFRLENBQUM7Z0JBQ3ZELEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDO2dCQUNsRCxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsdUJBQXVCLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQzthQUN2RCxDQUFDO1lBRUYsS0FBSyxNQUFNLE1BQU0sSUFBSSxZQUFZLEVBQUUsQ0FBQztnQkFDbEMsSUFBSSxDQUFDO29CQUNILE1BQU0sTUFBTSxFQUFFLENBQUM7Z0JBQ2pCLENBQUM7Z0JBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztvQkFDZixNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsY0FBYyxDQUFDLDRCQUFtQixDQUFDLENBQUM7b0JBQ2xELE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUM5QyxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzlCLEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN4RCxNQUFNLGVBQWUsR0FBRyxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFFNUQsS0FBSyxNQUFNLEtBQUssSUFBSSxlQUFlLEVBQUUsQ0FBQztnQkFDcEMsdUNBQXVDO2dCQUN2QyxNQUFNLFVBQVUsR0FBRyxNQUFNLFVBQVUsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzNELE1BQU0sQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUV4QyxNQUFNLFdBQVcsR0FBRyxNQUFNLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDaEUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUMsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGtEQUFrRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2hFLDhCQUE4QjtZQUM5QixNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3pELE1BQU0sVUFBVSxHQUFHLE1BQU0sVUFBVSxDQUFDLGVBQWUsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNsRSxNQUFNLFdBQVcsR0FBRyxNQUFNLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUN2RSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLENBQUM7WUFDbEQsQ0FBQyxDQUFDLENBQUM7WUFFSCxNQUFNLE9BQU8sR0FBRyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFNUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDdkIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUN6QyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDN0MsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNuRCxNQUFNLGFBQWEsR0FBRztnQkFDcEIsSUFBSTtnQkFDSixTQUFTO2dCQUNULEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRTtnQkFDWixFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUU7Z0JBQ1YsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFO2dCQUNuQixFQUFFO2FBQ0gsQ0FBQztZQUVGLEtBQUssTUFBTSxJQUFJLElBQUksYUFBYSxFQUFFLENBQUM7Z0JBQ2pDLE1BQU0sYUFBYSxHQUFHLE1BQU0sVUFBVSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRSxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3BDLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtRQUNqQyxFQUFFLENBQUMsdURBQXVELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDckUsNkRBQTZEO1lBQzdELE1BQU0sVUFBVSxHQUFHLE1BQU0sVUFBVSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN4RCxNQUFNLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUU1QyxNQUFNLFVBQVUsR0FBRyxNQUFNLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzlFLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFbkMsTUFBTSxhQUFhLEdBQUcsTUFBTSxVQUFVLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEUsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV0QyxNQUFNLFdBQVcsR0FBRyxNQUFNLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM3RCxNQUFNLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUUxQyx1REFBdUQ7WUFDdkQsTUFBTSxhQUFhLEdBQUc7Z0JBQ3BCLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUM7Z0JBQ3RDLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLFFBQVEsQ0FBQztnQkFDdkQsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxRQUFRLENBQUM7Z0JBQ2xELEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDO2FBQ3ZELENBQUM7WUFFRixLQUFLLE1BQU0sTUFBTSxJQUFJLGFBQWEsRUFBRSxDQUFDO2dCQUNuQyxNQUFNLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsNEJBQW1CLENBQUMsQ0FBQztZQUM5RCxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMseURBQXlELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDdkUsNkVBQTZFO1lBQzdFLE1BQU0sWUFBWSxHQUFHLE1BQU0sVUFBVSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUMxRCxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDbEQsTUFBTSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdkQsTUFBTSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFeEQsTUFBTSxhQUFhLEdBQUcsTUFBTSxVQUFVLENBQUMsbUJBQW1CLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDL0QsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUN0RCxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsY0FBYyxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDekQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBRXZELHlEQUF5RDtZQUN6RCxNQUFNLHVCQUF1QixHQUFHO2dCQUM5QixlQUFlLEVBQUUsaUJBQWlCLEVBQUUsa0JBQWtCO2dCQUN0RCxrQkFBa0IsRUFBRSxtQkFBbUIsRUFBRSxrQkFBa0IsRUFBRSxnQkFBZ0I7YUFDOUUsQ0FBQztZQUVGLHVCQUF1QixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDckMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM3QyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvY29tbXVuaXRpZXMvY29udHJvbGxlcnMvbW9kZXJhdGlvbi5jb250cm9sbGVyLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb21wcmVoZW5zaXZlIFRlc3QgU3VpdGUgZm9yIE1vZGVyYXRpb25Db250cm9sbGVyXG4gKiBUZXN0cyBkaXNhYmxlZCBqb2luIHJlcXVlc3RzIGZ1bmN0aW9uYWxpdHkgYW5kIEFQSSBjb21wYXRpYmlsaXR5XG4gKi9cblxuaW1wb3J0IHsgVGVzdCwgVGVzdGluZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGVzdGluZyc7XG5pbXBvcnQgeyBCYWRSZXF1ZXN0RXhjZXB0aW9uIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgTW9kZXJhdGlvbkNvbnRyb2xsZXIgfSBmcm9tICcuL21vZGVyYXRpb24uY29udHJvbGxlcic7XG5pbXBvcnQgeyBKd3RBdXRoR3VhcmQgfSBmcm9tICcuLi8uLi9hdXRoL2d1YXJkcy9qd3QtYXV0aC5ndWFyZCc7XG5pbXBvcnQgeyBSb2xlQmFzZWRBY2Nlc3NHdWFyZCB9IGZyb20gJy4uLy4uL2F1dGgvZ3VhcmRzL3JvbGUtYmFzZWQtYWNjZXNzLmd1YXJkJztcbmltcG9ydCB7IFNlY3VyaXR5R3VhcmRUZXN0VXRpbHMsIFJvbGVCYXNlZFRlc3RVdGlscyB9IGZyb20gJy4uLy4uL3Rlc3QtdXRpbHMvYXV0aC10ZXN0aW5nLWhlbHBlcnMnO1xuaW1wb3J0IHsgTW9ja0J1aWxkZXIsIFRlc3REYXRhR2VuZXJhdG9yLCBUZXN0QXNzZXJ0aW9ucyB9IGZyb20gJy4uLy4uL3Rlc3QtdXRpbHMvZW5oYW5jZWQtdGVzdC1oZWxwZXJzJztcbmltcG9ydCB7IFRFU1RfVVNFUl9JRFMsIFRFU1RfRU1BSUxTIH0gZnJvbSAnLi4vLi4vdGVzdC11dGlscy9pbmRleCc7XG5cbmRlc2NyaWJlKCdNb2RlcmF0aW9uQ29udHJvbGxlcicsICgpID0+IHtcbiAgbGV0IGNvbnRyb2xsZXI6IE1vZGVyYXRpb25Db250cm9sbGVyO1xuICBsZXQgbW9kdWxlOiBUZXN0aW5nTW9kdWxlO1xuXG4gIC8vIE1vY2sgR3VhcmRzXG4gIGNvbnN0IG1vY2tKd3RBdXRoR3VhcmQgPSB7XG4gICAgY2FuQWN0aXZhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSksXG4gIH07XG5cbiAgY29uc3QgbW9ja1JvbGVCYXNlZEFjY2Vzc0d1YXJkID0ge1xuICAgIGNhbkFjdGl2YXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHRydWUpLFxuICB9O1xuXG4gIC8vIFRlc3QgZGF0YVxuICBjb25zdCBtb2NrVXNlciA9IHtcbiAgICBpZDogVEVTVF9VU0VSX0lEUy5NT0RFUkFUT1IsXG4gICAgZW1haWw6IFRFU1RfRU1BSUxTLk1PREVSQVRPUixcbiAgICByb2xlOiAnbW9kZXJhdG9yJyxcbiAgfTtcblxuICBjb25zdCBtb2NrSm9pblJlcXVlc3REdG8gPSB7XG4gICAgY29tbXVuaXR5SWQ6ICdjb21tdW5pdHlfMTIzNDU2Nzg5JyxcbiAgICByZWFzb246ICdJIHdvdWxkIGxpa2UgdG8gam9pbiB0aGlzIGNvbW11bml0eSBmb3Igc3VwcG9ydCcsXG4gIH07XG5cbiAgY29uc3QgbW9ja1Byb2Nlc3NEdG8gPSB7XG4gICAgYWN0aW9uOiAnYXBwcm92ZScsXG4gICAgcmVhc29uOiAnVXNlciBtZWV0cyBjb21tdW5pdHkgZ3VpZGVsaW5lcycsXG4gIH07XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgbW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIGNvbnRyb2xsZXJzOiBbTW9kZXJhdGlvbkNvbnRyb2xsZXJdLFxuICAgICAgcHJvdmlkZXJzOiBbXSxcbiAgICB9KVxuICAgICAgLm92ZXJyaWRlR3VhcmQoSnd0QXV0aEd1YXJkKVxuICAgICAgLnVzZVZhbHVlKG1vY2tKd3RBdXRoR3VhcmQpXG4gICAgICAub3ZlcnJpZGVHdWFyZChSb2xlQmFzZWRBY2Nlc3NHdWFyZClcbiAgICAgIC51c2VWYWx1ZShtb2NrUm9sZUJhc2VkQWNjZXNzR3VhcmQpXG4gICAgICAuY29tcGlsZSgpO1xuXG4gICAgY29udHJvbGxlciA9IG1vZHVsZS5nZXQ8TW9kZXJhdGlvbkNvbnRyb2xsZXI+KE1vZGVyYXRpb25Db250cm9sbGVyKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbnRyb2xsZXIgSW5pdGlhbGl6YXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBiZSBkZWZpbmVkJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGNvbnRyb2xsZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZWN1cml0eSBHdWFyZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBiZSBwcm90ZWN0ZWQgYnkgSnd0QXV0aEd1YXJkIGFuZCBSb2xlQmFzZWRBY2Nlc3NHdWFyZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGd1YXJkcyA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoJ19fZ3VhcmRzX18nLCBNb2RlcmF0aW9uQ29udHJvbGxlcik7XG4gICAgICBleHBlY3QoZ3VhcmRzKS50b0NvbnRhaW4oSnd0QXV0aEd1YXJkKTtcbiAgICAgIGV4cGVjdChndWFyZHMpLnRvQ29udGFpbihSb2xlQmFzZWRBY2Nlc3NHdWFyZCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIHJvdXRlIGRlY29yYXRvcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb250cm9sbGVyTWV0YWRhdGEgPSBSZWZsZWN0LmdldE1ldGFkYXRhKCdwYXRoJywgTW9kZXJhdGlvbkNvbnRyb2xsZXIpO1xuICAgICAgZXhwZWN0KGNvbnRyb2xsZXJNZXRhZGF0YSkudG9CZSgnY29tbXVuaXRpZXMvbW9kZXJhdGlvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXF1aXJlIG1vZGVyYXRvciBvciBhZG1pbiByb2xlJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXhwZWN0ZWRSb2xlcyA9IFsnbW9kZXJhdG9yJywgJ2FkbWluJ107XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoJ3JvbGVzJywgTW9kZXJhdGlvbkNvbnRyb2xsZXIpO1xuICAgICAgZXhwZWN0KG1ldGFkYXRhKS50b0VxdWFsKGV4cGVjdGVkUm9sZXMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUE9TVCAvY29tbXVuaXRpZXMvbW9kZXJhdGlvbi9qb2luLXJlcXVlc3RzIChEaXNhYmxlZCknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBCYWRSZXF1ZXN0RXhjZXB0aW9uIHdoZW4gY3JlYXRpbmcgam9pbiByZXF1ZXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmNyZWF0ZUpvaW5SZXF1ZXN0KG1vY2tKb2luUmVxdWVzdER0bylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBjb250cm9sbGVyLmNyZWF0ZUpvaW5SZXF1ZXN0KG1vY2tKb2luUmVxdWVzdER0byk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdKb2luIHJlcXVlc3RzIGZlYXR1cmUgaGFzIGJlZW4gZGlzYWJsZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGFueSBEVE8gaW5wdXQgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREdG8gPSB7IGludmFsaWQ6ICdkYXRhJyB9O1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuY3JlYXRlSm9pblJlcXVlc3QoaW52YWxpZER0bylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbHdheXMgdGhyb3cgdGhlIHNhbWUgZXJyb3IgbWVzc2FnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGR0bzEgPSB7IGNvbW11bml0eUlkOiAndGVzdDEnIH07XG4gICAgICBjb25zdCBkdG8yID0geyBjb21tdW5pdHlJZDogJ3Rlc3QyJywgcmVhc29uOiAnZGlmZmVyZW50IHJlYXNvbicgfTtcblxuICAgICAgY29uc3QgZXJyb3IxID0gYXdhaXQgY29udHJvbGxlci5jcmVhdGVKb2luUmVxdWVzdChkdG8xKS5jYXRjaChlID0+IGUpO1xuICAgICAgY29uc3QgZXJyb3IyID0gYXdhaXQgY29udHJvbGxlci5jcmVhdGVKb2luUmVxdWVzdChkdG8yKS5jYXRjaChlID0+IGUpO1xuXG4gICAgICBleHBlY3QoZXJyb3IxLm1lc3NhZ2UpLnRvQmUoZXJyb3IyLm1lc3NhZ2UpO1xuICAgICAgZXhwZWN0KGVycm9yMS5tZXNzYWdlKS50b0NvbnRhaW4oJ2Rpc2FibGVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2NvbW11bml0aWVzL21vZGVyYXRpb24vam9pbi1yZXF1ZXN0cyAoRGlzYWJsZWQpJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGxpc3QgZm9yIGpvaW4gcmVxdWVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldEpvaW5SZXF1ZXN0cyh7fSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICByZXF1ZXN0czogW10sXG4gICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDIwLCB0b3RhbDogMCwgdG90YWxQYWdlczogMCB9LFxuICAgICAgICBmaWx0ZXJzOiB7fSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcXVlcnkgcGFyYW1ldGVycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlcnkgPSB7XG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICBjb21tdW5pdHlJZDogJ2NvbW11bml0eV8xMjMnLFxuICAgICAgICBwYWdlOiAyLFxuICAgICAgICBsaW1pdDogNTAsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldEpvaW5SZXF1ZXN0cyhxdWVyeSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQucmVxdWVzdHMpLnRvRXF1YWwoW10pO1xuICAgICAgZXhwZWN0KHJlc3VsdC5wYWdpbmF0aW9uLnRvdGFsKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5wYWdpbmF0aW9uLnRvdGFsUGFnZXMpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsd2F5cyByZXR1cm4gY29uc2lzdGVudCBlbXB0eSBzdHJ1Y3R1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQxID0gYXdhaXQgY29udHJvbGxlci5nZXRKb2luUmVxdWVzdHMoe30pO1xuICAgICAgY29uc3QgcmVzdWx0MiA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Sm9pblJlcXVlc3RzKHsgYW55OiAncGFyYW1ldGVyJyB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdDEpLnRvRXF1YWwocmVzdWx0Mik7XG4gICAgICBleHBlY3QocmVzdWx0MS5yZXF1ZXN0cykudG9IYXZlTGVuZ3RoKDApO1xuICAgICAgZXhwZWN0KHJlc3VsdDIucmVxdWVzdHMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvY29tbXVuaXRpZXMvbW9kZXJhdGlvbi9qb2luLXJlcXVlc3RzL3VzZXIvOnVzZXJJZCAoRGlzYWJsZWQpJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IGZvciB1c2VyIGpvaW4gcmVxdWVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFVzZXJKb2luUmVxdWVzdHMoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhbnkgdXNlcklkIGlucHV0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcklkcyA9IFtcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgICAnbm9uZXhpc3RlbnRfdXNlcicsXG4gICAgICAgICdpbnZhbGlkLWZvcm1hdCcsXG4gICAgICAgICcnLFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCB1c2VySWQgb2YgdXNlcklkcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFVzZXJKb2luUmVxdWVzdHModXNlcklkKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGJlIGNvbnNpc3RlbnQgYWNyb3NzIG11bHRpcGxlIGNhbGxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0MSA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VXNlckpvaW5SZXF1ZXN0cyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICBjb25zdCByZXN1bHQyID0gYXdhaXQgY29udHJvbGxlci5nZXRVc2VySm9pblJlcXVlc3RzKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdDEpLnRvRXF1YWwocmVzdWx0Mik7XG4gICAgICBleHBlY3QocmVzdWx0MSkudG9FcXVhbChbXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2NvbW11bml0aWVzL21vZGVyYXRpb24vam9pbi1yZXF1ZXN0cy9wZW5kaW5nIChEaXNhYmxlZCknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgYXJyYXkgZm9yIHBlbmRpbmcgcmVxdWVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFBlbmRpbmdSZXF1ZXN0cyhtb2NrVXNlcik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW10pO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0KSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCB1c2VyIGNvbnRleHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcnMgPSBbXG4gICAgICAgIHsgaWQ6IFRFU1RfVVNFUl9JRFMuTU9ERVJBVE9SLCByb2xlOiAnbW9kZXJhdG9yJyB9LFxuICAgICAgICB7IGlkOiBURVNUX1VTRVJfSURTLkFETUlOLCByb2xlOiAnYWRtaW4nIH0sXG4gICAgICAgIHsgaWQ6IFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCByb2xlOiAnY2xpZW50JyB9LFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UGVuZGluZ1JlcXVlc3RzKHVzZXIpO1xuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BVVCAvY29tbXVuaXRpZXMvbW9kZXJhdGlvbi9qb2luLXJlcXVlc3RzLzpyZXF1ZXN0SWQvcHJvY2VzcyAoRGlzYWJsZWQpJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdGhyb3cgQmFkUmVxdWVzdEV4Y2VwdGlvbiB3aGVuIHByb2Nlc3NpbmcgcmVxdWVzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5wcm9jZXNzSm9pblJlcXVlc3QoJ3JlcXVlc3RfMTIzJywgbW9ja1Byb2Nlc3NEdG8sIG1vY2tVc2VyKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNvbnRyb2xsZXIucHJvY2Vzc0pvaW5SZXF1ZXN0KCdyZXF1ZXN0XzEyMycsIG1vY2tQcm9jZXNzRHRvLCBtb2NrVXNlcik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdKb2luIHJlcXVlc3RzIGZlYXR1cmUgaGFzIGJlZW4gZGlzYWJsZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGFueSByZXF1ZXN0IElEIGZvcm1hdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3RJZHMgPSBbXG4gICAgICAgICd2YWxpZF91dWlkX2Zvcm1hdCcsXG4gICAgICAgICdpbnZhbGlkLWZvcm1hdCcsXG4gICAgICAgICcnLFxuICAgICAgICAnMTIzJyxcbiAgICAgICAgJ3ZlcnktbG9uZy1yZXF1ZXN0LWlkLXRoYXQtbWlnaHQtY2F1c2UtaXNzdWVzJyxcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgcmVxdWVzdElkIG9mIHJlcXVlc3RJZHMpIHtcbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIGNvbnRyb2xsZXIucHJvY2Vzc0pvaW5SZXF1ZXN0KHJlcXVlc3RJZCwgbW9ja1Byb2Nlc3NEdG8sIG1vY2tVc2VyKVxuICAgICAgICApLnJlamVjdHMudG9UaHJvdyhCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBwcm9jZXNzIGFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9jZXNzRHRvcyA9IFtcbiAgICAgICAgeyBhY3Rpb246ICdhcHByb3ZlJywgcmVhc29uOiAnR29vZCBmaXQnIH0sXG4gICAgICAgIHsgYWN0aW9uOiAncmVqZWN0JywgcmVhc29uOiAnRG9lcyBub3QgbWVldCBjcml0ZXJpYScgfSxcbiAgICAgICAgeyBhY3Rpb246ICdwZW5kaW5nJywgcmVhc29uOiAnTmVlZCBtb3JlIGluZm9ybWF0aW9uJyB9LFxuICAgICAgICB7IGludmFsaWQ6ICdkYXRhJyB9LFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBkdG8gb2YgcHJvY2Vzc0R0b3MpIHtcbiAgICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICAgIGNvbnRyb2xsZXIucHJvY2Vzc0pvaW5SZXF1ZXN0KCdyZXF1ZXN0XzEyMycsIGR0bywgbW9ja1VzZXIpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnREVMRVRFIC9jb21tdW5pdGllcy9tb2RlcmF0aW9uL2pvaW4tcmVxdWVzdHMvOnJlcXVlc3RJZCAoRGlzYWJsZWQpJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdGhyb3cgQmFkUmVxdWVzdEV4Y2VwdGlvbiB3aGVuIGNhbmNlbGluZyByZXF1ZXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmNhbmNlbEpvaW5SZXF1ZXN0KCdyZXF1ZXN0XzEyMycsIG1vY2tVc2VyKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNvbnRyb2xsZXIuY2FuY2VsSm9pblJlcXVlc3QoJ3JlcXVlc3RfMTIzJywgbW9ja1VzZXIpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcbiAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignSm9pbiByZXF1ZXN0cyBmZWF0dXJlIGhhcyBiZWVuIGRpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhbnkgcmVxdWVzdCBJRCBmb3IgY2FuY2VsbGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdElkcyA9IFsncmVxdWVzdF8xJywgJ3JlcXVlc3RfMicsICdpbnZhbGlkX2lkJywgJyddO1xuXG4gICAgICBmb3IgKGNvbnN0IHJlcXVlc3RJZCBvZiByZXF1ZXN0SWRzKSB7XG4gICAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgICBjb250cm9sbGVyLmNhbmNlbEpvaW5SZXF1ZXN0KHJlcXVlc3RJZCwgbW9ja1VzZXIpXG4gICAgICAgICkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGlmZmVyZW50IHVzZXIgY29udGV4dHMgZm9yIGNhbmNlbGxhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJzID0gW1xuICAgICAgICB7IGlkOiBURVNUX1VTRVJfSURTLkNMSUVOVCwgcm9sZTogJ2NsaWVudCcgfSxcbiAgICAgICAgeyBpZDogVEVTVF9VU0VSX0lEUy5NT0RFUkFUT1IsIHJvbGU6ICdtb2RlcmF0b3InIH0sXG4gICAgICAgIHsgaWQ6IFRFU1RfVVNFUl9JRFMuQURNSU4sIHJvbGU6ICdhZG1pbicgfSxcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgdXNlciBvZiB1c2Vycykge1xuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgY29udHJvbGxlci5jYW5jZWxKb2luUmVxdWVzdCgncmVxdWVzdF8xMjMnLCB1c2VyKVxuICAgICAgICApLnJlamVjdHMudG9UaHJvdyhCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvY29tbXVuaXRpZXMvbW9kZXJhdGlvbi9zdGF0cy9qb2luLXJlcXVlc3RzIChEaXNhYmxlZCknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RhdHMgZm9yIGpvaW4gcmVxdWVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldEpvaW5SZXF1ZXN0U3RhdHMoe30pO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgdG90YWxSZXF1ZXN0czogMCxcbiAgICAgICAgcGVuZGluZ1JlcXVlc3RzOiAwLFxuICAgICAgICBhcHByb3ZlZFJlcXVlc3RzOiAwLFxuICAgICAgICByZWplY3RlZFJlcXVlc3RzOiAwLFxuICAgICAgICBhdmdQcm9jZXNzaW5nVGltZTogMCxcbiAgICAgICAgcmVxdWVzdHNCeVN0YXR1czoge30sXG4gICAgICAgIHJlY2VudEFjdGl2aXR5OiBbXSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcXVlcnkgcGFyYW1ldGVycyBmb3Igc3RhdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IHtcbiAgICAgICAgc3RhcnREYXRlOiAnMjAyNC0wMS0wMScsXG4gICAgICAgIGVuZERhdGU6ICcyMDI0LTAyLTE0JyxcbiAgICAgICAgY29tbXVuaXR5SWQ6ICdjb21tdW5pdHlfMTIzJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Sm9pblJlcXVlc3RTdGF0cyhxdWVyeSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWxSZXF1ZXN0cykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucGVuZGluZ1JlcXVlc3RzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5hdmdQcm9jZXNzaW5nVGltZSkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5yZWNlbnRBY3Rpdml0eSkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnJlY2VudEFjdGl2aXR5KS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHN0YXRzIHN0cnVjdHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Sm9pblJlcXVlc3RTdGF0cyh7fSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbFJlcXVlc3RzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgncGVuZGluZ1JlcXVlc3RzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnYXBwcm92ZWRSZXF1ZXN0cycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3JlamVjdGVkUmVxdWVzdHMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdhdmdQcm9jZXNzaW5nVGltZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3JlcXVlc3RzQnlTdGF0dXMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdyZWNlbnRBY3Rpdml0eScpO1xuXG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC50b3RhbFJlcXVlc3RzKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmF2Z1Byb2Nlc3NpbmdUaW1lKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnJlcXVlc3RzQnlTdGF0dXMpLnRvQmUoJ29iamVjdCcpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnJlY2VudEFjdGl2aXR5KSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QgL2NvbW11bml0aWVzL21vZGVyYXRpb24vam9pbi1yZXF1ZXN0cy9idWxrLXByb2Nlc3MgKERpc2FibGVkKScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHRocm93IEJhZFJlcXVlc3RFeGNlcHRpb24gZm9yIGJ1bGsgcHJvY2Vzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGJ1bGtEdG8gPSB7XG4gICAgICAgIHJlcXVlc3RJZHM6IFsncmVxdWVzdF8xJywgJ3JlcXVlc3RfMicsICdyZXF1ZXN0XzMnXSxcbiAgICAgICAgYWN0aW9uOiAnYXBwcm92ZScsXG4gICAgICAgIHJlYXNvbjogJ0J1bGsgYXBwcm92YWwnLFxuICAgICAgfTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmJ1bGtQcm9jZXNzSm9pblJlcXVlc3RzKGJ1bGtEdG8sIG1vY2tVc2VyKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNvbnRyb2xsZXIuYnVsa1Byb2Nlc3NKb2luUmVxdWVzdHMoYnVsa0R0bywgbW9ja1VzZXIpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcbiAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignSm9pbiByZXF1ZXN0cyBmZWF0dXJlIGhhcyBiZWVuIGRpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBidWxrIHJlcXVlc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZW1wdHlEdG8gPSB7IHJlcXVlc3RJZHM6IFtdLCBhY3Rpb246ICdhcHByb3ZlJyB9O1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuYnVsa1Byb2Nlc3NKb2luUmVxdWVzdHMoZW1wdHlEdG8sIG1vY2tVc2VyKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIGJ1bGsgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREdG9zID0gW1xuICAgICAgICB7IGludmFsaWQ6ICdkYXRhJyB9LFxuICAgICAgICB7IHJlcXVlc3RJZHM6IG51bGwsIGFjdGlvbjogJ2FwcHJvdmUnIH0sXG4gICAgICAgIHsgcmVxdWVzdElkczogWyd2YWxpZCddLCBhY3Rpb246IG51bGwgfSxcbiAgICAgICAge30sXG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IGR0byBvZiBpbnZhbGlkRHRvcykge1xuICAgICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgICAgY29udHJvbGxlci5idWxrUHJvY2Vzc0pvaW5SZXF1ZXN0cyhkdG8sIG1vY2tVc2VyKVxuICAgICAgICApLnJlamVjdHMudG9UaHJvdyhCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Jlc3BvbnNlIEZvcm1hdCBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHByb3Blcmx5IGZvcm1hdHRlZCBlbXB0eSBsaXN0IHJlc3BvbnNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxpc3RSZXNwb25zZSA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Sm9pblJlcXVlc3RzKHt9KTtcbiAgICAgIGNvbnN0IHVzZXJSZXNwb25zZSA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VXNlckpvaW5SZXF1ZXN0cyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICBjb25zdCBwZW5kaW5nUmVzcG9uc2UgPSBhd2FpdCBjb250cm9sbGVyLmdldFBlbmRpbmdSZXF1ZXN0cyhtb2NrVXNlcik7XG5cbiAgICAgIC8vIFZhbGlkYXRlIGxpc3QgcmVzcG9uc2Ugc3RydWN0dXJlXG4gICAgICBleHBlY3QobGlzdFJlc3BvbnNlKS50b0hhdmVQcm9wZXJ0eSgncmVxdWVzdHMnKTtcbiAgICAgIGV4cGVjdChsaXN0UmVzcG9uc2UpLnRvSGF2ZVByb3BlcnR5KCdwYWdpbmF0aW9uJyk7XG4gICAgICBleHBlY3QobGlzdFJlc3BvbnNlKS50b0hhdmVQcm9wZXJ0eSgnZmlsdGVycycpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobGlzdFJlc3BvbnNlLnJlcXVlc3RzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChsaXN0UmVzcG9uc2UucGFnaW5hdGlvbikudG9IYXZlUHJvcGVydHkoJ3BhZ2UnKTtcbiAgICAgIGV4cGVjdChsaXN0UmVzcG9uc2UucGFnaW5hdGlvbikudG9IYXZlUHJvcGVydHkoJ2xpbWl0Jyk7XG4gICAgICBleHBlY3QobGlzdFJlc3BvbnNlLnBhZ2luYXRpb24pLnRvSGF2ZVByb3BlcnR5KCd0b3RhbCcpO1xuICAgICAgZXhwZWN0KGxpc3RSZXNwb25zZS5wYWdpbmF0aW9uKS50b0hhdmVQcm9wZXJ0eSgndG90YWxQYWdlcycpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSB1c2VyIHJlc3BvbnNlXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheSh1c2VyUmVzcG9uc2UpKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBwZW5kaW5nIHJlc3BvbnNlXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShwZW5kaW5nUmVzcG9uc2UpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvcGVybHkgZm9ybWF0dGVkIHN0YXRzIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHNSZXNwb25zZSA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Sm9pblJlcXVlc3RTdGF0cyh7fSk7XG5cbiAgICAgIGV4cGVjdChzdGF0c1Jlc3BvbnNlKS50b0hhdmVQcm9wZXJ0eSgndG90YWxSZXF1ZXN0cycpO1xuICAgICAgZXhwZWN0KHN0YXRzUmVzcG9uc2UpLnRvSGF2ZVByb3BlcnR5KCdwZW5kaW5nUmVxdWVzdHMnKTtcbiAgICAgIGV4cGVjdChzdGF0c1Jlc3BvbnNlKS50b0hhdmVQcm9wZXJ0eSgnYXBwcm92ZWRSZXF1ZXN0cycpO1xuICAgICAgZXhwZWN0KHN0YXRzUmVzcG9uc2UpLnRvSGF2ZVByb3BlcnR5KCdyZWplY3RlZFJlcXVlc3RzJyk7XG4gICAgICBleHBlY3Qoc3RhdHNSZXNwb25zZSkudG9IYXZlUHJvcGVydHkoJ2F2Z1Byb2Nlc3NpbmdUaW1lJyk7XG4gICAgICBleHBlY3Qoc3RhdHNSZXNwb25zZSkudG9IYXZlUHJvcGVydHkoJ3JlcXVlc3RzQnlTdGF0dXMnKTtcbiAgICAgIGV4cGVjdChzdGF0c1Jlc3BvbnNlKS50b0hhdmVQcm9wZXJ0eSgncmVjZW50QWN0aXZpdHknKTtcblxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0c1Jlc3BvbnNlLnRvdGFsUmVxdWVzdHMpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0c1Jlc3BvbnNlLmF2Z1Byb2Nlc3NpbmdUaW1lKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHN0YXRzUmVzcG9uc2UucmVjZW50QWN0aXZpdHkpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29uc2lzdGVudCBlcnJvciBmb3JtYXQgZm9yIGRpc2FibGVkIGZlYXR1cmVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXJyb3JNZXRob2RzID0gW1xuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmNyZWF0ZUpvaW5SZXF1ZXN0KHt9KSxcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5wcm9jZXNzSm9pblJlcXVlc3QoJ2lkJywge30sIG1vY2tVc2VyKSxcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5jYW5jZWxKb2luUmVxdWVzdCgnaWQnLCBtb2NrVXNlciksXG4gICAgICAgICgpID0+IGNvbnRyb2xsZXIuYnVsa1Byb2Nlc3NKb2luUmVxdWVzdHMoe30sIG1vY2tVc2VyKSxcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIGVycm9yTWV0aG9kcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IG1ldGhvZCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGV4cGVjdChlcnJvcikudG9CZUluc3RhbmNlT2YoQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG4gICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIGlucHV0IGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtYWxmb3JtZWRJbnB1dHMgPSBbbnVsbCwgdW5kZWZpbmVkLCAnJywgMCwgZmFsc2UsIFtdXTtcblxuICAgICAgZm9yIChjb25zdCBpbnB1dCBvZiBtYWxmb3JtZWRJbnB1dHMpIHtcbiAgICAgICAgLy8gVGVzdCBlbmRwb2ludHMgdGhhdCBhY2NlcHQgYW55IGlucHV0XG4gICAgICAgIGNvbnN0IGxpc3RSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldEpvaW5SZXF1ZXN0cyhpbnB1dCk7XG4gICAgICAgIGV4cGVjdChsaXN0UmVzdWx0LnJlcXVlc3RzKS50b0VxdWFsKFtdKTtcblxuICAgICAgICBjb25zdCBzdGF0c1Jlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Sm9pblJlcXVlc3RTdGF0cyhpbnB1dCk7XG4gICAgICAgIGV4cGVjdChzdGF0c1Jlc3VsdC50b3RhbFJlcXVlc3RzKS50b0JlKDApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBjb25zaXN0ZW50IGJlaGF2aW9yIHVuZGVyIHN0cmVzcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgcmFwaWQgc3VjY2Vzc2l2ZSBjYWxsc1xuICAgICAgY29uc3QgcHJvbWlzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMCB9LCBhc3luYyAoXywgaSkgPT4ge1xuICAgICAgICBjb25zdCBsaXN0UmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRKb2luUmVxdWVzdHMoeyBpbmRleDogaSB9KTtcbiAgICAgICAgY29uc3Qgc3RhdHNSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldEpvaW5SZXF1ZXN0U3RhdHMoeyBpbmRleDogaSB9KTtcbiAgICAgICAgcmV0dXJuIHsgbGlzdDogbGlzdFJlc3VsdCwgc3RhdHM6IHN0YXRzUmVzdWx0IH07XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgIFxuICAgICAgcmVzdWx0cy5mb3JFYWNoKHJlc3VsdCA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQubGlzdC5yZXF1ZXN0cykudG9FcXVhbChbXSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHMudG90YWxSZXF1ZXN0cykudG9CZSgwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZWRnZSBjYXNlIHVzZXIgaW5wdXRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZWRnZUNhc2VVc2VycyA9IFtcbiAgICAgICAgbnVsbCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB7IGlkOiBudWxsIH0sXG4gICAgICAgIHsgaWQ6ICcnIH0sXG4gICAgICAgIHsgcm9sZTogJ2ludmFsaWQnIH0sXG4gICAgICAgIHt9LFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCB1c2VyIG9mIGVkZ2VDYXNlVXNlcnMpIHtcbiAgICAgICAgY29uc3QgcGVuZGluZ1Jlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UGVuZGluZ1JlcXVlc3RzKHVzZXIpO1xuICAgICAgICBleHBlY3QocGVuZGluZ1Jlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiBUZXN0cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZSBkaXNhYmxlZCB3b3JrZmxvdyBjb25zaXN0ZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHRoYXQgYWxsIGVuZHBvaW50cyBtYWludGFpbiBjb25zaXN0ZW50IGRpc2FibGVkIHN0YXRlXG4gICAgICBjb25zdCBsaXN0UmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRKb2luUmVxdWVzdHMoe30pO1xuICAgICAgZXhwZWN0KGxpc3RSZXN1bHQucmVxdWVzdHMpLnRvSGF2ZUxlbmd0aCgwKTtcblxuICAgICAgY29uc3QgdXNlclJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VXNlckpvaW5SZXF1ZXN0cyhURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICBleHBlY3QodXNlclJlc3VsdCkudG9IYXZlTGVuZ3RoKDApO1xuXG4gICAgICBjb25zdCBwZW5kaW5nUmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRQZW5kaW5nUmVxdWVzdHMobW9ja1VzZXIpO1xuICAgICAgZXhwZWN0KHBlbmRpbmdSZXN1bHQpLnRvSGF2ZUxlbmd0aCgwKTtcblxuICAgICAgY29uc3Qgc3RhdHNSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldEpvaW5SZXF1ZXN0U3RhdHMoe30pO1xuICAgICAgZXhwZWN0KHN0YXRzUmVzdWx0LnRvdGFsUmVxdWVzdHMpLnRvQmUoMCk7XG5cbiAgICAgIC8vIFRlc3QgdGhhdCBhY3Rpb24gZW5kcG9pbnRzIGNvbnNpc3RlbnRseSB0aHJvdyBlcnJvcnNcbiAgICAgIGNvbnN0IGFjdGlvbk1ldGhvZHMgPSBbXG4gICAgICAgICgpID0+IGNvbnRyb2xsZXIuY3JlYXRlSm9pblJlcXVlc3Qoe30pLFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLnByb2Nlc3NKb2luUmVxdWVzdCgnaWQnLCB7fSwgbW9ja1VzZXIpLFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmNhbmNlbEpvaW5SZXF1ZXN0KCdpZCcsIG1vY2tVc2VyKSxcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5idWxrUHJvY2Vzc0pvaW5SZXF1ZXN0cyh7fSwgbW9ja1VzZXIpLFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBtZXRob2Qgb2YgYWN0aW9uTWV0aG9kcykge1xuICAgICAgICBhd2FpdCBleHBlY3QobWV0aG9kKCkpLnJlamVjdHMudG9UaHJvdyhCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgQVBJIGNvbXBhdGliaWxpdHkgZm9yIGZ1dHVyZSBlbmFibGVtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gRW5zdXJlIHJlc3BvbnNlIHN0cnVjdHVyZXMgYXJlIGNvbXBhdGlibGUgd2l0aCBwb3RlbnRpYWwgZnV0dXJlIGVuYWJsZW1lbnRcbiAgICAgIGNvbnN0IGxpc3RSZXNwb25zZSA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Sm9pblJlcXVlc3RzKHt9KTtcbiAgICAgIGV4cGVjdChsaXN0UmVzcG9uc2UpLnRvSGF2ZVByb3BlcnR5KCdyZXF1ZXN0cycpO1xuICAgICAgZXhwZWN0KGxpc3RSZXNwb25zZSkudG9IYXZlUHJvcGVydHkoJ3BhZ2luYXRpb24nKTtcbiAgICAgIGV4cGVjdChsaXN0UmVzcG9uc2UucGFnaW5hdGlvbikudG9IYXZlUHJvcGVydHkoJ3BhZ2UnKTtcbiAgICAgIGV4cGVjdChsaXN0UmVzcG9uc2UucGFnaW5hdGlvbikudG9IYXZlUHJvcGVydHkoJ2xpbWl0Jyk7XG5cbiAgICAgIGNvbnN0IHN0YXRzUmVzcG9uc2UgPSBhd2FpdCBjb250cm9sbGVyLmdldEpvaW5SZXF1ZXN0U3RhdHMoe30pO1xuICAgICAgZXhwZWN0KHN0YXRzUmVzcG9uc2UpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbFJlcXVlc3RzJyk7XG4gICAgICBleHBlY3Qoc3RhdHNSZXNwb25zZSkudG9IYXZlUHJvcGVydHkoJ3JlcXVlc3RzQnlTdGF0dXMnKTtcbiAgICAgIGV4cGVjdChzdGF0c1Jlc3BvbnNlKS50b0hhdmVQcm9wZXJ0eSgncmVjZW50QWN0aXZpdHknKTtcblxuICAgICAgLy8gRW5zdXJlIGFsbCByZXF1aXJlZCBwcm9wZXJ0aWVzIGV4aXN0IGZvciBBUEkgY29udHJhY3RzXG4gICAgICBjb25zdCByZXF1aXJlZFN0YXRzUHJvcGVydGllcyA9IFtcbiAgICAgICAgJ3RvdGFsUmVxdWVzdHMnLCAncGVuZGluZ1JlcXVlc3RzJywgJ2FwcHJvdmVkUmVxdWVzdHMnLCBcbiAgICAgICAgJ3JlamVjdGVkUmVxdWVzdHMnLCAnYXZnUHJvY2Vzc2luZ1RpbWUnLCAncmVxdWVzdHNCeVN0YXR1cycsICdyZWNlbnRBY3Rpdml0eSdcbiAgICAgIF07XG4gICAgICBcbiAgICAgIHJlcXVpcmVkU3RhdHNQcm9wZXJ0aWVzLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgIGV4cGVjdChzdGF0c1Jlc3BvbnNlKS50b0hhdmVQcm9wZXJ0eShwcm9wKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==