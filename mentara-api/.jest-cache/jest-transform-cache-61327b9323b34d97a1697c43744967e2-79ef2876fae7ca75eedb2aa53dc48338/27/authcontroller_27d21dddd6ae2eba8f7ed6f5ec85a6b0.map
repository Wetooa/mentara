{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/auth.controller.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/auth/auth.controller.ts"],"sourcesContent":["import {\n  Body,\n  Controller,\n  Get,\n  HttpCode,\n  HttpStatus,\n  Post,\n  Delete,\n  Query,\n  UseGuards,\n  Req,\n  Res,\n  UnauthorizedException,\n} from '@nestjs/common';\nimport { AuthGuard } from '@nestjs/passport';\nimport { Throttle } from '@nestjs/throttler';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBody,\n  ApiBearerAuth,\n  ApiQuery,\n} from '@nestjs/swagger';\nimport { JwtAuthGuard } from 'src/auth/guards/jwt-auth.guard';\nimport { CurrentUserId } from 'src/auth/decorators/current-user-id.decorator';\nimport { Public } from 'src/auth/decorators/public.decorator';\nimport { ZodValidationPipe } from 'src/common/pipes/zod-validation.pipe';\nimport {\n  LoginDtoSchema,\n  RefreshTokenDtoSchema,\n  RegisterUserDtoSchema,\n  LogoutDtoSchema,\n  RequestPasswordResetDtoSchema,\n  ResetPasswordDtoSchema,\n  VerifyEmailDtoSchema,\n  ResendVerificationEmailDtoSchema,\n  TerminateSessionDtoSchema,\n  type LoginDto,\n  type RefreshTokenDto,\n  type RegisterUserDto,\n  type LogoutDto,\n  type RequestPasswordResetDto,\n  type ResetPasswordDto,\n  type VerifyEmailDto,\n  type ResendVerificationEmailDto,\n  type TerminateSessionDto,\n} from 'mentara-commons';\nimport { AuthService } from './auth.service';\nimport { EmailVerificationService } from './services/email-verification.service';\nimport { PasswordResetService } from './services/password-reset.service';\nimport { Request } from 'express';\n\n@ApiTags('auth')\n@Controller('auth')\nexport class AuthController {\n  constructor(\n    private readonly authService: AuthService,\n    private readonly emailVerificationService: EmailVerificationService,\n    private readonly passwordResetService: PasswordResetService,\n  ) {}\n\n  // Role-specific registration endpoints moved to dedicated controllers:\n  // - /auth/client/register\n  // - /auth/therapist/register\n  // - /auth/admin/create-account\n  // - /auth/moderator/create-account\n\n  @UseGuards(JwtAuthGuard)\n  @ApiBearerAuth('JWT-auth')\n  @ApiOperation({\n    summary: 'Get current user profile',\n    description: \"Retrieve the authenticated user's profile information\",\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'User profile retrieved successfully',\n  })\n  @ApiResponse({\n    status: 401,\n    description: 'Unauthorized - Invalid or missing JWT token',\n  })\n  @Get('me')\n  async getMe(@CurrentUserId() id: string) {\n    return await this.authService.getUser(id);\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @Get('users')\n  async getAllUsers() {\n    return await this.authService.getUsers();\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @Throttle({ default: { limit: 20, ttl: 300000 } }) // 20 logout attempts per 5 minutes\n  @Post('force-logout')\n  @HttpCode(HttpStatus.OK)\n  async forceLogout(@CurrentUserId() id: string) {\n    return await this.authService.forceLogout(id);\n  }\n\n  // Local Authentication Endpoints\n  @Public()\n  @ApiOperation({\n    summary: 'Register new user',\n    description:\n      'Register a new user account with email and password. Supports client and therapist roles only.',\n  })\n  @ApiBody({\n    description: 'User registration details',\n    schema: {\n      type: 'object',\n      properties: {\n        email: { type: 'string', format: 'email', example: 'user@example.com' },\n        password: {\n          type: 'string',\n          minLength: 8,\n          example: 'SecurePassword123!',\n        },\n        firstName: { type: 'string', example: 'John' },\n        lastName: { type: 'string', example: 'Doe' },\n        role: {\n          type: 'string',\n          enum: ['client', 'therapist'],\n          example: 'client',\n        },\n      },\n      required: ['email', 'password', 'firstName', 'lastName', 'role'],\n    },\n  })\n  @ApiResponse({\n    status: 201,\n    description: 'User registered successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        user: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            email: { type: 'string' },\n            firstName: { type: 'string' },\n            lastName: { type: 'string' },\n            role: { type: 'string' },\n          },\n        },\n        accessToken: { type: 'string' },\n        refreshToken: { type: 'string' },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 400,\n    description: 'Bad request - Invalid input data',\n  })\n  @ApiResponse({\n    status: 409,\n    description: 'Conflict - Email already exists',\n  })\n  @Throttle({ default: { limit: 5, ttl: 300000 } }) // 5 registration attempts per 5 minutes\n  @Post('register')\n  @HttpCode(HttpStatus.CREATED)\n  async register(\n    @Body(new ZodValidationPipe(RegisterUserDtoSchema))\n    registerDto: RegisterUserDto,\n  ) {\n    // Only allow client and therapist roles for general registration\n    const allowedRole =\n      registerDto.role === 'therapist' ? 'therapist' : 'client';\n\n    return await this.authService.registerUserWithEmail(\n      registerDto.email,\n      registerDto.password,\n      registerDto.firstName,\n      registerDto.lastName,\n      allowedRole,\n    );\n  }\n\n  @Public()\n  @ApiOperation({\n    summary: 'User login',\n    description:\n      'Authenticate user with email and password, returning JWT tokens',\n  })\n  @ApiBody({\n    description: 'Login credentials',\n    schema: {\n      type: 'object',\n      properties: {\n        email: { type: 'string', format: 'email', example: 'user@example.com' },\n        password: { type: 'string', example: 'SecurePassword123!' },\n      },\n      required: ['email', 'password'],\n    },\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Login successful',\n    schema: {\n      type: 'object',\n      properties: {\n        user: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            email: { type: 'string' },\n            firstName: { type: 'string' },\n            lastName: { type: 'string' },\n            role: { type: 'string' },\n            emailVerified: { type: 'boolean' },\n          },\n        },\n        accessToken: { type: 'string' },\n        refreshToken: { type: 'string' },\n        expiresIn: { type: 'number' },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 401,\n    description: 'Unauthorized - Invalid credentials',\n  })\n  @ApiResponse({\n    status: 429,\n    description: 'Too many login attempts',\n  })\n  @Throttle({ default: { limit: 10, ttl: 300000 } }) // 10 login attempts per 5 minutes\n  @Post('login')\n  @HttpCode(HttpStatus.OK)\n  async login(\n    @Body(new ZodValidationPipe(LoginDtoSchema)) loginDto: LoginDto,\n    @Req() req: Request,\n  ) {\n    const ipAddress = req.ip;\n    const userAgent = req.get('User-Agent');\n\n    const result = await this.authService.loginWithEmail(\n      loginDto.email,\n      loginDto.password,\n      ipAddress,\n      userAgent,\n    );\n\n    return {\n      user: {\n        id: result.user.id,\n        email: result.user.email,\n        firstName: result.user.firstName,\n        lastName: result.user.lastName,\n        role: result.user.role,\n        emailVerified: result.user.emailVerified,\n      },\n      accessToken: result.tokens.accessToken,\n      refreshToken: result.tokens.refreshToken,\n      expiresIn: result.tokens.expiresIn,\n    };\n  }\n\n  @Public()\n  @Throttle({ default: { limit: 20, ttl: 300000 } }) // 20 refresh attempts per 5 minutes\n  @Post('refresh')\n  @HttpCode(HttpStatus.OK)\n  async refreshTokens(\n    @Body(new ZodValidationPipe(RefreshTokenDtoSchema))\n    refreshDto: RefreshTokenDto,\n    @Req() req: Request,\n  ) {\n    if (!refreshDto.refreshToken) {\n      throw new UnauthorizedException('Refresh token required');\n    }\n\n    const ipAddress = req.ip;\n    const userAgent = req.get('User-Agent');\n\n    const tokens = await this.authService.refreshTokens(\n      refreshDto.refreshToken,\n      ipAddress,\n      userAgent,\n    );\n\n    return tokens;\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @Post('logout')\n  @HttpCode(HttpStatus.OK)\n  async logout(\n    @Body(new ZodValidationPipe(LogoutDtoSchema)) logoutDto: LogoutDto,\n  ) {\n    if (logoutDto.refreshToken) {\n      await this.authService.logout(logoutDto.refreshToken);\n    }\n    return { message: 'Logged out successfully' };\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @Get('profile')\n  async getProfile(@CurrentUserId() userId: string) {\n    const user = await this.authService.validateUser(userId);\n    if (!user) {\n      throw new UnauthorizedException('User not found');\n    }\n    return user;\n  }\n\n  // Role-specific profile endpoints moved to dedicated controllers:\n  // - /auth/client/profile\n  // - /auth/therapist/profile\n  // - /auth/admin/profile\n  // - /auth/moderator/profile\n\n  // ===== PASSWORD RESET ENDPOINTS =====\n\n  @Public()\n  @Throttle({ default: { limit: 5, ttl: 300000 } }) // 5 reset requests per 5 minutes\n  @Post('request-password-reset')\n  @HttpCode(HttpStatus.OK)\n  async requestPasswordReset(\n    @Body(new ZodValidationPipe(RequestPasswordResetDtoSchema))\n    requestResetDto: RequestPasswordResetDto,\n  ) {\n    await this.passwordResetService.requestPasswordReset(requestResetDto.email);\n    return {\n      message:\n        'If an account with that email exists, we will send a password reset link.',\n    };\n  }\n\n  @Public()\n  @Throttle({ default: { limit: 10, ttl: 300000 } }) // 10 reset attempts per 5 minutes\n  @Post('reset-password')\n  @HttpCode(HttpStatus.OK)\n  async resetPassword(\n    @Body(new ZodValidationPipe(ResetPasswordDtoSchema))\n    resetDto: ResetPasswordDto,\n  ) {\n    // Validate that passwords match\n    if (resetDto.newPassword !== resetDto.confirmPassword) {\n      throw new UnauthorizedException('Passwords do not match');\n    }\n\n    const result = await this.passwordResetService.resetPassword(\n      resetDto.token,\n      resetDto.newPassword,\n    );\n    return result;\n  }\n\n  @Public()\n  @Get('validate-reset-token')\n  async validateResetToken(@Query('token') token: string) {\n    const result = await this.passwordResetService.validateResetToken(token);\n    return result;\n  }\n\n  // ===== JWT TOKEN VALIDATION ENDPOINT =====\n\n  @Public()\n  @ApiOperation({\n    summary: 'Validate JWT token',\n    description: 'Validate a JWT token and return user information if valid',\n  })\n  @ApiBody({\n    description: 'JWT token to validate',\n    schema: {\n      type: 'object',\n      properties: {\n        token: {\n          type: 'string',\n          example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',\n        },\n      },\n      required: ['token'],\n    },\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Token validation result',\n    schema: {\n      type: 'object',\n      properties: {\n        valid: { type: 'boolean' },\n        user: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            email: { type: 'string' },\n            firstName: { type: 'string' },\n            lastName: { type: 'string' },\n            role: { type: 'string' },\n            emailVerified: { type: 'boolean' },\n          },\n        },\n        expires: { type: 'string', format: 'date-time' },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 400,\n    description: 'Bad request - Token is required',\n  })\n  @Throttle({ default: { limit: 100, ttl: 60000 } }) // 100 validation requests per minute\n  @Post('validate-token')\n  @HttpCode(HttpStatus.OK)\n  async validateToken(@Body() body: { token: string }) {\n    if (!body.token) {\n      throw new UnauthorizedException('Token is required');\n    }\n\n    const result = await this.authService.validateToken(body.token);\n\n    if (!result.valid) {\n      return {\n        valid: false,\n        error: result.error,\n      };\n    }\n\n    return {\n      valid: true,\n      user: result.user,\n      expires: result.expires,\n    };\n  }\n\n  // ===== USER EXISTENCE CHECK ENDPOINT =====\n\n  @Public()\n  @ApiOperation({\n    summary: 'Check user existence by email',\n    description:\n      'Check if a user exists by email address and return their role and verification status',\n  })\n  @ApiQuery({\n    name: 'email',\n    description: 'Email address to check',\n    example: 'user@example.com',\n    required: true,\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'User existence check result',\n    schema: {\n      type: 'object',\n      properties: {\n        exists: { type: 'boolean' },\n        role: {\n          type: 'string',\n          enum: ['client', 'therapist', 'moderator', 'admin'],\n        },\n        isVerified: { type: 'boolean' },\n      },\n      required: ['exists'],\n    },\n  })\n  @ApiResponse({\n    status: 400,\n    description: 'Bad request - Invalid email format',\n  })\n  @ApiResponse({\n    status: 429,\n    description: 'Too many requests',\n  })\n  @Throttle({ default: { limit: 30, ttl: 60000 } }) // 30 requests per minute\n  @Get('check-user')\n  async checkUserExists(@Query('email') email: string) {\n    if (!email) {\n      throw new UnauthorizedException('Email is required');\n    }\n\n    // Basic email validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      throw new UnauthorizedException('Invalid email format');\n    }\n\n    const result = await this.authService.checkUserExists(email);\n    return result;\n  }\n\n  // ===== EMAIL VERIFICATION ENDPOINTS =====\n\n  @UseGuards(JwtAuthGuard)\n  @Throttle({ default: { limit: 3, ttl: 300000 } }) // 3 verification emails per 5 minutes\n  @Post('send-verification-email')\n  @HttpCode(HttpStatus.OK)\n  async sendVerificationEmail(@CurrentUserId() userId: string) {\n    await this.emailVerificationService.sendVerificationEmail(userId);\n    return {\n      message: 'Verification email sent successfully',\n    };\n  }\n\n  @Public()\n  @Throttle({ default: { limit: 5, ttl: 300000 } }) // 5 resend attempts per 5 minutes\n  @Post('resend-verification-email')\n  @HttpCode(HttpStatus.OK)\n  async resendVerificationEmail(\n    @Body(new ZodValidationPipe(ResendVerificationEmailDtoSchema))\n    resendDto: ResendVerificationEmailDto,\n  ) {\n    await this.emailVerificationService.resendVerificationEmail(\n      resendDto.email,\n    );\n    return {\n      message:\n        'If an account with that email exists, we will send a verification link.',\n    };\n  }\n\n  @Public()\n  @Post('verify-email')\n  @HttpCode(HttpStatus.OK)\n  async verifyEmail(\n    @Body(new ZodValidationPipe(VerifyEmailDtoSchema))\n    verifyDto: VerifyEmailDto,\n  ) {\n    const result = await this.emailVerificationService.verifyEmail(\n      verifyDto.token,\n    );\n    return result;\n  }\n\n  // Google OAuth Routes\n  @Public()\n  @Get('google')\n  @UseGuards(AuthGuard('google'))\n  async googleAuth() {\n    // Initiates Google OAuth flow\n  }\n\n  @Public()\n  @Get('google/callback')\n  @UseGuards(AuthGuard('google'))\n  async googleAuthRedirect(@Req() req, @Res() res, @Query() query) {\n    try {\n      // Get role from state parameter if provided (for role-specific OAuth flows)\n      const role = query.state || 'client'; // Default to client if no role specified\n\n      // Handle Google OAuth callback and get tokens\n      const result = await this.authService.handleOAuthLogin(\n        req.user,\n        'google',\n        role,\n      );\n\n      // Extract tokens from result\n      const { accessToken, refreshToken } = result;\n\n      // Determine frontend redirect URL based on environment\n      const frontendUrl = process.env.FRONTEND_URL || 'http://localhost:3000';\n      const redirectUrl = `${frontendUrl}/sso-callback?token=${accessToken}&refresh_token=${refreshToken}&role=${role}`;\n\n      // Redirect to frontend with tokens in URL parameters\n      return res.redirect(redirectUrl);\n    } catch (error) {\n      console.error('Google OAuth callback error:', error);\n\n      // Redirect to frontend with error\n      const frontendUrl = process.env.FRONTEND_URL || 'http://localhost:3000';\n      const errorUrl = `${frontendUrl}/auth/sign-in?error=oauth_failed&provider=google`;\n      return res.redirect(errorUrl);\n    }\n  }\n\n  // Microsoft OAuth Routes\n  @Public()\n  @Get('microsoft')\n  @UseGuards(AuthGuard('microsoft'))\n  async microsoftAuth() {\n    // Initiates Microsoft OAuth flow\n  }\n\n  @Public()\n  @Get('microsoft/callback')\n  @UseGuards(AuthGuard('microsoft'))\n  async microsoftAuthRedirect(@Req() req, @Res() res, @Query() query) {\n    try {\n      // Get role from state parameter if provided (for role-specific OAuth flows)\n      const role = query.state || 'client'; // Default to client if no role specified\n\n      // Handle Microsoft OAuth callback and get tokens\n      const result = await this.authService.handleOAuthLogin(\n        req.user,\n        'microsoft',\n        role,\n      );\n\n      // Extract tokens from result\n      const { accessToken, refreshToken } = result;\n\n      // Determine frontend redirect URL based on environment\n      const frontendUrl = process.env.FRONTEND_URL || 'http://localhost:3000';\n      const redirectUrl = `${frontendUrl}/sso-callback?token=${accessToken}&refresh_token=${refreshToken}&role=${role}`;\n\n      // Redirect to frontend with tokens in URL parameters\n      return res.redirect(redirectUrl);\n    } catch (error) {\n      console.error('Microsoft OAuth callback error:', error);\n\n      // Redirect to frontend with error\n      const frontendUrl = process.env.FRONTEND_URL || 'http://localhost:3000';\n      const errorUrl = `${frontendUrl}/auth/sign-in?error=oauth_failed&provider=microsoft`;\n      return res.redirect(errorUrl);\n    }\n  }\n\n  // OAuth Token Exchange API Endpoint (for frontend to call)\n  @Public()\n  @ApiOperation({\n    summary: 'Exchange OAuth authorization code for tokens',\n    description:\n      'Exchange OAuth authorization code from Google/Microsoft for JWT tokens',\n  })\n  @ApiBody({\n    description: 'OAuth authorization code and provider information',\n    schema: {\n      type: 'object',\n      properties: {\n        provider: {\n          type: 'string',\n          enum: ['google', 'microsoft'],\n          example: 'google',\n        },\n        code: {\n          type: 'string',\n          example: 'authorization_code_from_oauth_provider',\n        },\n        state: {\n          type: 'string',\n          example: 'client',\n          description: 'Optional role for new user creation',\n        },\n      },\n      required: ['provider', 'code'],\n    },\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'OAuth login successful',\n    schema: {\n      type: 'object',\n      properties: {\n        user: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            email: { type: 'string' },\n            firstName: { type: 'string' },\n            lastName: { type: 'string' },\n            role: { type: 'string' },\n          },\n        },\n        accessToken: { type: 'string' },\n        refreshToken: { type: 'string' },\n        expiresIn: { type: 'number' },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 400,\n    description: 'Invalid OAuth code or provider',\n  })\n  @Post('oauth/token-exchange')\n  @HttpCode(HttpStatus.OK)\n  async exchangeOAuthToken(\n    @Body()\n    body: {\n      provider: 'google' | 'microsoft';\n      code: string;\n      state?: string;\n    },\n  ) {\n    const { provider, code } = body;\n\n    if (!code) {\n      throw new UnauthorizedException('Authorization code is required');\n    }\n\n    if (!['google', 'microsoft'].includes(provider)) {\n      throw new UnauthorizedException('Invalid OAuth provider');\n    }\n\n    try {\n      // TODO: Implement proper OAuth token exchange with provider APIs\n      // This would involve exchanging the authorization code for an access token\n      // and then fetching user profile information from the OAuth provider\n\n      // For now, this is a placeholder that expects the full OAuth flow\n      // to be handled by the existing Passport strategies\n      throw new UnauthorizedException(\n        'Direct token exchange not yet implemented. Use OAuth redirect flow.',\n      );\n    } catch (error) {\n      console.error('OAuth token exchange error:', error);\n      throw new UnauthorizedException('OAuth token exchange failed');\n    }\n  }\n\n  // ===== SESSION MANAGEMENT ENDPOINTS =====\n\n  @UseGuards(JwtAuthGuard)\n  @ApiBearerAuth('JWT-auth')\n  @ApiOperation({\n    summary: 'Get current session information',\n    description: 'Retrieve information about the current user session',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Session information retrieved successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        sessionId: { type: 'string' },\n        createdAt: { type: 'string', format: 'date-time' },\n        lastActivity: { type: 'string', format: 'date-time' },\n        device: { type: 'string' },\n        location: { type: 'string' },\n        ipAddress: { type: 'string' },\n        userAgent: { type: 'string' },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 401,\n    description: 'Unauthorized - Invalid or missing JWT token',\n  })\n  @Get('session-info')\n  async getSessionInfo(@Req() req: Request) {\n    // Extract refresh token from Authorization header or cookies\n    const refreshToken = req.headers['x-refresh-token'] as string;\n\n    if (!refreshToken) {\n      throw new UnauthorizedException(\n        'Refresh token required for session info',\n      );\n    }\n\n    return await this.authService.getSessionInfo(refreshToken);\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @ApiBearerAuth('JWT-auth')\n  @ApiOperation({\n    summary: 'Get all active sessions',\n    description: 'Retrieve all active sessions for the current user',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Active sessions retrieved successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        sessions: {\n          type: 'array',\n          items: {\n            type: 'object',\n            properties: {\n              id: { type: 'string' },\n              device: { type: 'string' },\n              location: { type: 'string' },\n              lastActivity: { type: 'string', format: 'date-time' },\n              isCurrent: { type: 'boolean' },\n              ipAddress: { type: 'string' },\n              userAgent: { type: 'string' },\n              createdAt: { type: 'string', format: 'date-time' },\n            },\n          },\n        },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 401,\n    description: 'Unauthorized - Invalid or missing JWT token',\n  })\n  @Get('active-sessions')\n  async getActiveSessions(\n    @CurrentUserId() userId: string,\n    @Req() req: Request,\n  ) {\n    const refreshToken = req.headers['x-refresh-token'] as string;\n    return await this.authService.getActiveSessions(userId, refreshToken);\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @ApiBearerAuth('JWT-auth')\n  @ApiOperation({\n    summary: 'Terminate a specific session',\n    description: 'Terminate a specific session by session ID',\n  })\n  @ApiBody({\n    description: 'Session ID to terminate',\n    schema: {\n      type: 'object',\n      properties: {\n        sessionId: { type: 'string', example: 'session-uuid-here' },\n      },\n      required: ['sessionId'],\n    },\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Session terminated successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        success: { type: 'boolean' },\n        message: { type: 'string' },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 401,\n    description: 'Unauthorized - Invalid or missing JWT token',\n  })\n  @ApiResponse({\n    status: 404,\n    description: 'Session not found',\n  })\n  @Throttle({ default: { limit: 10, ttl: 60000 } }) // 10 terminations per minute\n  @Delete('terminate-session')\n  @HttpCode(HttpStatus.OK)\n  async terminateSession(\n    @Body(new ZodValidationPipe(TerminateSessionDtoSchema))\n    terminateDto: TerminateSessionDto,\n    @CurrentUserId() userId: string,\n  ) {\n    return await this.authService.terminateSession(\n      terminateDto.sessionId,\n      userId,\n    );\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @ApiBearerAuth('JWT-auth')\n  @ApiOperation({\n    summary: 'Terminate all other sessions',\n    description: 'Terminate all other sessions except the current one',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Other sessions terminated successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        success: { type: 'boolean' },\n        terminatedCount: { type: 'number' },\n        message: { type: 'string' },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 401,\n    description: 'Unauthorized - Invalid or missing JWT token',\n  })\n  @Throttle({ default: { limit: 5, ttl: 60000 } }) // 5 terminations per minute\n  @Post('terminate-other-sessions')\n  @HttpCode(HttpStatus.OK)\n  async terminateOtherSessions(\n    @CurrentUserId() userId: string,\n    @Req() req: Request,\n  ) {\n    const refreshToken = req.headers['x-refresh-token'] as string;\n    return await this.authService.terminateOtherSessions(userId, refreshToken);\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @ApiBearerAuth('JWT-auth')\n  @ApiOperation({\n    summary: 'Universal logout',\n    description:\n      'Clear all sessions for the current user (logout from all devices)',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'All sessions terminated successfully',\n    schema: {\n      type: 'object',\n      properties: {\n        success: { type: 'boolean' },\n        message: { type: 'string' },\n      },\n    },\n  })\n  @ApiResponse({\n    status: 401,\n    description: 'Unauthorized - Invalid or missing JWT token',\n  })\n  @Throttle({ default: { limit: 3, ttl: 60000 } }) // 3 universal logouts per minute\n  @Post('universal-logout')\n  @HttpCode(HttpStatus.OK)\n  async universalLogout(@CurrentUserId() userId: string) {\n    return await this.authService.universalLogout(userId);\n  }\n}\n"],"version":3}