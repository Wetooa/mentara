{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/sessions/sessions.service.spec.ts","mappings":";;AAAA,6CAAsD;AACtD,2CAAwE;AACxE,yDAAqD;AACrD,gFAAoE;AACpE,2CAKwB;AAExB,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;IAC/B,IAAI,OAAwB,CAAC;IAC7B,IAAI,aAAkB,CAAC;IAEvB,YAAY;IACZ,MAAM,QAAQ,GAAG;QACf,EAAE,EAAE,UAAU;QACd,SAAS,EAAE,MAAM;QACjB,QAAQ,EAAE,KAAK;QACf,SAAS,EAAE,gCAAgC;KAC5C,CAAC;IAEF,MAAM,UAAU,GAAG;QACjB,EAAE,EAAE,YAAY;QAChB,MAAM,EAAE,UAAU;QAClB,IAAI,EAAE,QAAQ;KACf,CAAC;IAEF,MAAM,aAAa,GAAG;QACpB,EAAE,EAAE,eAAe;QACnB,MAAM,EAAE,oBAAoB;QAC5B,IAAI,EAAE;YACJ,EAAE,EAAE,oBAAoB;YACxB,SAAS,EAAE,UAAU;YACrB,QAAQ,EAAE,OAAO;YACjB,SAAS,EAAE,0CAA0C;SACtD;KACF,CAAC;IAEF,MAAM,WAAW,GAAG;QAClB,EAAE,EAAE,aAAa;QACjB,KAAK,EAAE,iBAAiB;QACxB,cAAc,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QAChD,YAAY,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;KAC/C,CAAC;IAEF,MAAM,cAAc,GAAG;QACrB,EAAE,EAAE,aAAa;QACjB,QAAQ,EAAE,YAAY;QACtB,WAAW,EAAE,eAAe;QAC5B,WAAW,EAAE,oBAAW,CAAC,eAAe;QACxC,MAAM,EAAE,sBAAa,CAAC,WAAW;QACjC,SAAS,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QAC3C,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE,IAAI;QACd,QAAQ,EAAE,MAAM;QAChB,SAAS,EAAE,aAAa;QACxB,KAAK,EAAE,IAAI;QACX,OAAO,EAAE,IAAI;QACb,SAAS,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QAC3C,SAAS,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QAC3C,MAAM,EAAE,UAAU;QAClB,SAAS,EAAE,aAAa;QACxB,OAAO,EAAE,WAAW;QACpB,UAAU,EAAE,EAAE;KACf,CAAC;IAEF,MAAM,oBAAoB,GAAG;QAC3B,GAAG,cAAc;QACjB,EAAE,EAAE,uBAAuB;QAC3B,MAAM,EAAE,sBAAa,CAAC,SAAS;QAC/B,OAAO,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QACzC,QAAQ,EAAE,EAAE;QACZ,OAAO,EAAE,CAAC;QACV,KAAK,EAAE,0BAA0B;KAClC,CAAC;IAEF,MAAM,mBAAmB,GAAG;QAC1B,EAAE,EAAE,cAAc;QAClB,SAAS,EAAE,aAAa;QACxB,YAAY,EAAE,qBAAY,CAAC,aAAa;QACxC,WAAW,EAAE,qBAAqB;QAClC,QAAQ,EAAE,EAAE;QACZ,SAAS,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QAC3C,QAAQ,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE;KACrC,CAAC;IAEF,MAAM,gBAAgB,GAAG;QACvB,EAAE,EAAE,mBAAmB;QACvB,MAAM,EAAE,UAAU;QAClB,MAAM,EAAE,uBAAc,CAAC,SAAS;QAChC,IAAI,EAAE,YAAY;QAClB,SAAS,EAAE,WAAW;QACtB,SAAS,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QAC3C,SAAS,EAAE,aAAa;QACxB,QAAQ,EAAE,EAAE,WAAW,EAAE,OAAO,EAAE;QAClC,UAAU,EAAE,EAAE,OAAO,EAAE,QAAQ,EAAE,EAAE,EAAE,SAAS,EAAE;KACjD,CAAC;IAEF,MAAM,mBAAmB,GAAG;QAC1B,EAAE,EAAE,cAAc;QAClB,QAAQ,EAAE,YAAY;QACtB,WAAW,EAAE,eAAe;QAC5B,aAAa,EAAE,GAAG;QAClB,gBAAgB,EAAE,CAAC,oBAAoB,EAAE,eAAe,CAAC;QACzD,YAAY,EAAE,CAAC,eAAe,CAAC;QAC/B,QAAQ,EAAE,EAAE,OAAO,EAAE,gBAAgB,EAAE,SAAS,EAAE,eAAe,EAAE;QACnE,aAAa,EAAE,EAAE,SAAS,EAAE,CAAC,oBAAoB,CAAC,EAAE;QACpD,cAAc,EAAE,EAAE,QAAQ,EAAE,CAAC,kBAAkB,CAAC,EAAE;QAClD,SAAS,EAAE,CAAC;QACZ,YAAY,EAAE,CAAC;QACf,eAAe,EAAE,CAAC;QAClB,eAAe,EAAE,CAAC;QAClB,cAAc,EAAE,4BAA4B;QAC5C,cAAc,EAAE,wBAAwB;QACxC,eAAe,EAAE,CAAC,2BAA2B,EAAE,iBAAiB,CAAC;QACjE,cAAc,EAAE,IAAI,IAAI,CAAC,sBAAsB,CAAC;QAChD,MAAM,EAAE,UAAU;QAClB,SAAS,EAAE,aAAa;KACzB,CAAC;IAEF,UAAU,CAAC,KAAK,IAAI,EAAE;QACpB,MAAM,iBAAiB,GAAG;YACxB,UAAU,EAAE;gBACV,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;gBACjB,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE;gBACnB,UAAU,EAAE,IAAI,CAAC,EAAE,EAAE;gBACrB,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;gBACjB,KAAK,EAAE,IAAI,CAAC,EAAE,EAAE;gBAChB,SAAS,EAAE,IAAI,CAAC,EAAE,EAAE;gBACpB,OAAO,EAAE,IAAI,CAAC,EAAE,EAAE;aACnB;YACD,eAAe,EAAE;gBACf,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;gBACjB,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE;aACpB;YACD,YAAY,EAAE;gBACZ,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;gBACjB,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE;aACpB;YACD,eAAe,EAAE;gBACf,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;gBACjB,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE;aACpB;SACF,CAAC;QAEF,MAAM,MAAM,GAAkB,MAAM,cAAI,CAAC,mBAAmB,CAAC;YAC3D,SAAS,EAAE;gBACT,kCAAe;gBACf;oBACE,OAAO,EAAE,sCAAa;oBACtB,QAAQ,EAAE,iBAAiB;iBAC5B;aACF;SACF,CAAC,CAAC,OAAO,EAAE,CAAC;QAEb,OAAO,GAAG,MAAM,CAAC,GAAG,CAAkB,kCAAe,CAAC,CAAC;QACvD,aAAa,GAAG,MAAM,CAAC,GAAG,CAAC,sCAAa,CAAC,CAAC;IAC5C,CAAC,CAAC,CAAC;IAEH,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,mBAAmB,EAAE,GAAG,EAAE;QAC3B,MAAM,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,CAAC;IAChC,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,kBAAkB,EAAE,GAAG,EAAE;QAChC,MAAM,iBAAiB,GAAG;YACxB,QAAQ,EAAE,YAAY;YACtB,WAAW,EAAE,eAAe;YAC5B,WAAW,EAAE,oBAAW,CAAC,eAAe;YACxC,SAAS,EAAE,aAAa;YACxB,QAAQ,EAAE,MAAM;SACjB,CAAC;QAEF,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;QACpE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,KAAK,IAAI,EAAE;YACxD,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC;YAEjE,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC3D,IAAI,EAAE;oBACJ,GAAG,iBAAiB;oBACpB,SAAS,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC;oBAC3B,MAAM,EAAE,sBAAa,CAAC,WAAW;iBAClC;gBACD,OAAO,EAAE;oBACP,MAAM,EAAE;wBACN,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;oBACD,SAAS,EAAE;wBACT,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;iBACF;aACF,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gDAAgD,EAAE,KAAK,IAAI,EAAE;YAC9D,MAAM,eAAe,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACzD,MAAM,iBAAiB,GAAG;gBACxB,GAAG,iBAAiB;gBACpB,SAAS,EAAE,eAAe;aAC3B,CAAC;YAEF,MAAM,OAAO,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC;YAElD,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC3D,IAAI,EAAE;oBACJ,GAAG,iBAAiB;oBACpB,MAAM,EAAE,sBAAa,CAAC,WAAW;iBAClC;gBACD,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;aAC5B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,oBAAoB,GAAG;gBAC3B,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,oBAAW,CAAC,WAAW;gBACpC,QAAQ,EAAE,KAAK;aAChB,CAAC;YAEF,MAAM,OAAO,CAAC,gBAAgB,CAAC,oBAAoB,CAAC,CAAC;YAErD,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC3D,IAAI,EAAE;oBACJ,GAAG,oBAAoB;oBACvB,SAAS,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC;oBAC3B,MAAM,EAAE,sBAAa,CAAC,WAAW;iBAClC;gBACD,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;aAC5B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,KAAK,IAAI,EAAE;YACxD,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAC/C,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAC5B,CAAC;YAEF,MAAM,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CACvE,gBAAgB,CACjB,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;QAC/B,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,UAAU,CAAC,QAAQ,CAAC,iBAAiB,CAAC;gBAClD,cAAc;gBACd,oBAAoB;aACrB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,KAAK,IAAI,EAAE;YACxD,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,eAAe,EAAE,CAAC;YAE/C,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAC7D,KAAK,EAAE,EAAE;gBACT,OAAO,EAAE;oBACP,MAAM,EAAE;wBACN,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;oBACD,SAAS,EAAE;wBACT,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;oBACD,UAAU,EAAE,IAAI;iBACjB;gBACD,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;aAC/B,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,cAAc,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACjE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,yCAAyC,EAAE,KAAK,IAAI,EAAE;YACvD,MAAM,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;YAE5C,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAC7D,KAAK,EAAE,EAAE,QAAQ,EAAE,YAAY,EAAE;gBACjC,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;gBAC3B,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;aAC/B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,OAAO,CAAC,eAAe,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;YAE1D,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAC7D,KAAK,EAAE,EAAE,WAAW,EAAE,eAAe,EAAE;gBACvC,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;gBAC3B,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;aAC/B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,yCAAyC,EAAE,KAAK,IAAI,EAAE;YACvD,MAAM,OAAO,CAAC,eAAe,CAC3B,SAAS,EACT,SAAS,EACT,sBAAa,CAAC,SAAS,CACxB,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAC7D,KAAK,EAAE,EAAE,MAAM,EAAE,sBAAa,CAAC,SAAS,EAAE;gBAC1C,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;gBAC3B,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;aAC/B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,OAAO,CAAC,eAAe,CAC3B,SAAS,EACT,SAAS,EACT,SAAS,EACT,oBAAW,CAAC,aAAa,CAC1B,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAC7D,KAAK,EAAE,EAAE,WAAW,EAAE,oBAAW,CAAC,aAAa,EAAE;gBACjD,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;gBAC3B,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;aAC/B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,OAAO,CAAC,eAAe,CAC3B,YAAY,EACZ,eAAe,EACf,sBAAa,CAAC,SAAS,EACvB,oBAAW,CAAC,eAAe,CAC5B,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAC7D,KAAK,EAAE;oBACL,QAAQ,EAAE,YAAY;oBACtB,WAAW,EAAE,eAAe;oBAC5B,MAAM,EAAE,sBAAa,CAAC,SAAS;oBAC/B,WAAW,EAAE,oBAAW,CAAC,eAAe;iBACzC;gBACD,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;gBAC3B,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;aAC/B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,aAAa,EAAE,GAAG,EAAE;QAC3B,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;QACxE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6BAA6B,EAAE,KAAK,IAAI,EAAE;YAC3C,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;YAExD,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,oBAAoB,CAAC;gBAC/D,KAAK,EAAE,EAAE,EAAE,EAAE,aAAa,EAAE;gBAC5B,OAAO,EAAE;oBACP,MAAM,EAAE;wBACN,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;oBACD,SAAS,EAAE;wBACT,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;oBACD,UAAU,EAAE;wBACV,OAAO,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE;qBAC9B;oBACD,OAAO,EAAE,IAAI;iBACd;aACF,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;YACzD,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAE5D,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;YAExD,MAAM,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,eAAe,EAAE,GAAG,EAAE;QAC7B,MAAM,UAAU,GAAG;YACjB,MAAM,EAAE,sBAAa,CAAC,SAAS;YAC/B,KAAK,EAAE,eAAe;YACtB,OAAO,EAAE,CAAC;SACX,CAAC;QAEF,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;YACtE,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC;gBAChD,GAAG,cAAc;gBACjB,GAAG,UAAU;aACd,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;YAClD,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,aAAa,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;YAEtE,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC3D,KAAK,EAAE,EAAE,EAAE,EAAE,aAAa,EAAE;gBAC5B,IAAI,EAAE,UAAU;gBAChB,OAAO,EAAE;oBACP,MAAM,EAAE;wBACN,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;oBACD,SAAS,EAAE;wBACT,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;iBACF;aACF,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC;gBACrB,GAAG,cAAc;gBACjB,GAAG,UAAU;aACd,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uDAAuD,EAAE,KAAK,IAAI,EAAE;YACrE,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAE5D,MAAM,MAAM,CACV,OAAO,CAAC,aAAa,CAAC,aAAa,EAAE,UAAU,CAAC,CACjD,CAAC,OAAO,CAAC,OAAO,CACf,IAAI,0BAAiB,CAAC,uCAAuC,CAAC,CAC/D,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;YAC7C,MAAM,aAAa,GAAG,EAAE,KAAK,EAAE,gBAAgB,EAAE,CAAC;YAElD,MAAM,OAAO,CAAC,aAAa,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;YAE1D,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC3D,KAAK,EAAE,EAAE,EAAE,EAAE,aAAa,EAAE;gBAC5B,IAAI,EAAE,aAAa;gBACnB,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;aAC5B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,YAAY,EAAE,GAAG,EAAE;QAC1B,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;YACtE,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,CAAC;QAC1E,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,iCAAiC,EAAE,KAAK,IAAI,EAAE;YAC/C,MAAM,KAAK,GAAG,gCAAgC,CAAC;YAC/C,MAAM,OAAO,GAAG,CAAC,CAAC;YAClB,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,UAAU,CAAC,aAAa,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;YAEvE,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC3D,KAAK,EAAE,EAAE,EAAE,EAAE,aAAa,EAAE;gBAC5B,IAAI,EAAE;oBACJ,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC;oBACzB,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;oBAC5B,MAAM,EAAE,sBAAa,CAAC,SAAS;oBAC/B,KAAK;oBACL,OAAO;iBACR;gBACD,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;aAC5B,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qCAAqC,EAAE,KAAK,IAAI,EAAE;YACnD,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACnD,MAAM,oBAAoB,GAAG,EAAE,GAAG,cAAc,EAAE,SAAS,EAAE,CAAC;YAC9D,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CACnD,oBAAoB,CACrB,CAAC;YAEF,wCAAwC;YACxC,MAAM,WAAW,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACrD,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,kBAAkB,CAAC,GAAG,EAAE,CAAC,WAAkB,CAAC,CAAC;YAExE,MAAM,OAAO,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;YAExC,MAAM,gBAAgB,GAAG,IAAI,CAAC,KAAK,CACjC,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC,GAAG,KAAK,CACtD,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC3D,KAAK,EAAE,EAAE,EAAE,EAAE,aAAa,EAAE;gBAC5B,IAAI,EAAE;oBACJ,OAAO,EAAE,WAAW;oBACpB,QAAQ,EAAE,gBAAgB;oBAC1B,MAAM,EAAE,sBAAa,CAAC,SAAS;oBAC/B,KAAK,EAAE,SAAS;oBAChB,OAAO,EAAE,SAAS;iBACnB;gBACD,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;aAC5B,CAAC,CAAC;YAEF,MAAM,CAAC,IAAY,CAAC,WAAW,EAAE,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uDAAuD,EAAE,KAAK,IAAI,EAAE;YACrE,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAE5D,MAAM,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC7D,IAAI,0BAAiB,CAAC,uCAAuC,CAAC,CAC/D,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+DAA+D,EAAE,KAAK,IAAI,EAAE;YAC7E,MAAM,gBAAgB,GAAG;gBACvB,GAAG,cAAc;gBACjB,MAAM,EAAE,sBAAa,CAAC,SAAS;aAChC,CAAC;YACF,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YAExE,MAAM,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAC7D,IAAI,4BAAmB,CAAC,4BAA4B,CAAC,CACtD,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gDAAgD,EAAE,KAAK,IAAI,EAAE;YAC9D,MAAM,OAAO,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;YAExC,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC3D,KAAK,EAAE,EAAE,EAAE,EAAE,aAAa,EAAE;gBAC5B,IAAI,EAAE;oBACJ,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC;oBACzB,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;oBAC5B,MAAM,EAAE,sBAAa,CAAC,SAAS;oBAC/B,KAAK,EAAE,SAAS;oBAChB,OAAO,EAAE,SAAS;iBACnB;gBACD,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;aAC5B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAClC,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;YACtE,aAAa,CAAC,eAAe,CAAC,MAAM,CAAC,iBAAiB,CACpD,mBAAmB,CACpB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,KAAK,IAAI,EAAE;YACxD,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,kBAAkB,CAC7C,aAAa,EACb,qBAAY,CAAC,aAAa,EAC1B,qBAAqB,EACrB,EAAE,EACF,EAAE,UAAU,EAAE,UAAU,EAAE,CAC3B,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAChE,IAAI,EAAE;oBACJ,SAAS,EAAE,aAAa;oBACxB,YAAY,EAAE,qBAAY,CAAC,aAAa;oBACxC,WAAW,EAAE,qBAAqB;oBAClC,QAAQ,EAAE,EAAE;oBACZ,QAAQ,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE;iBACrC;aACF,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;YACrD,MAAM,OAAO,CAAC,kBAAkB,CAC9B,aAAa,EACb,qBAAY,CAAC,eAAe,CAC7B,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAChE,IAAI,EAAE;oBACJ,SAAS,EAAE,aAAa;oBACxB,YAAY,EAAE,qBAAY,CAAC,eAAe;oBAC1C,WAAW,EAAE,SAAS;oBACtB,QAAQ,EAAE,SAAS;oBACnB,QAAQ,EAAE,SAAS;iBACpB;aACF,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uDAAuD,EAAE,KAAK,IAAI,EAAE;YACrE,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAE5D,MAAM,MAAM,CACV,OAAO,CAAC,kBAAkB,CAAC,aAAa,EAAE,qBAAY,CAAC,aAAa,CAAC,CACtE,CAAC,OAAO,CAAC,OAAO,CACf,IAAI,0BAAiB,CAAC,uCAAuC,CAAC,CAC/D,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,sBAAsB,EAAE,GAAG,EAAE;QACpC,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,iBAAiB,CAAC;gBACvD,mBAAmB;aACpB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;YAC7C,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,oBAAoB,CAAC,aAAa,CAAC,CAAC;YAEjE,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAClE,KAAK,EAAE,EAAE,SAAS,EAAE,aAAa,EAAE;gBACnC,OAAO,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE;aAC9B,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oDAAoD,EAAE,KAAK,IAAI,EAAE;YAClE,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAE7D,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,oBAAoB,CAAC,aAAa,CAAC,CAAC;YAEjE,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;QAC/B,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,YAAY,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;QACxE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,eAAe,CAC1C,UAAU,EACV,uBAAc,CAAC,SAAS,EACxB,YAAY,EACZ,WAAW,EACX,EAAE,WAAW,EAAE,OAAO,EAAE,EACxB,aAAa,EACb,EAAE,OAAO,EAAE,QAAQ,EAAE,EAAE,EAAE,SAAS,EAAE,CACrC,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC7D,IAAI,EAAE;oBACJ,MAAM,EAAE,UAAU;oBAClB,MAAM,EAAE,uBAAc,CAAC,SAAS;oBAChC,IAAI,EAAE,YAAY;oBAClB,SAAS,EAAE,WAAW;oBACtB,QAAQ,EAAE,EAAE,WAAW,EAAE,OAAO,EAAE;oBAClC,SAAS,EAAE,aAAa;oBACxB,UAAU,EAAE,EAAE,OAAO,EAAE,QAAQ,EAAE,EAAE,EAAE,SAAS,EAAE;iBACjD;aACF,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YAChE,MAAM,OAAO,CAAC,eAAe,CAAC,UAAU,EAAE,uBAAc,CAAC,MAAM,CAAC,CAAC;YAEjE,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAC7D,IAAI,EAAE;oBACJ,MAAM,EAAE,UAAU;oBAClB,MAAM,EAAE,uBAAc,CAAC,MAAM;oBAC7B,IAAI,EAAE,SAAS;oBACf,SAAS,EAAE,SAAS;oBACpB,QAAQ,EAAE,SAAS;oBACnB,SAAS,EAAE,SAAS;oBACpB,UAAU,EAAE,SAAS;iBACtB;aACF,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;QACjC,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,YAAY,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAC5E,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;YAE3D,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAC/D,KAAK,EAAE,EAAE,MAAM,EAAE,UAAU,EAAE;gBAC7B,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;gBAC9B,IAAI,EAAE,GAAG;aACV,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,OAAO,CAAC,iBAAiB,CAAC,UAAU,EAAE,uBAAc,CAAC,SAAS,CAAC,CAAC;YAEtE,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAC/D,KAAK,EAAE,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,uBAAc,CAAC,SAAS,EAAE;gBAC/D,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;gBAC9B,IAAI,EAAE,GAAG;aACV,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACnD,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YAEjD,MAAM,OAAO,CAAC,iBAAiB,CAC7B,UAAU,EACV,SAAS,EACT,SAAS,EACT,OAAO,CACR,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAC/D,KAAK,EAAE;oBACL,MAAM,EAAE,UAAU;oBAClB,SAAS,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,OAAO,EAAE;iBAC5C;gBACD,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;gBAC9B,IAAI,EAAE,GAAG;aACV,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC3D,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACnD,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YAEjD,MAAM,OAAO,CAAC,iBAAiB,CAC7B,UAAU,EACV,uBAAc,CAAC,SAAS,EACxB,SAAS,EACT,OAAO,CACR,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAC/D,KAAK,EAAE;oBACL,MAAM,EAAE,UAAU;oBAClB,MAAM,EAAE,uBAAc,CAAC,SAAS;oBAChC,SAAS,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,OAAO,EAAE;iBAC5C;gBACD,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;gBAC9B,IAAI,EAAE,GAAG;aACV,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,uBAAuB,EAAE,GAAG,EAAE;QACrC,MAAM,YAAY,GAAG;YACnB,QAAQ,EAAE,YAAY;YACtB,WAAW,EAAE,eAAe;YAC5B,aAAa,EAAE,GAAG;YAClB,gBAAgB,EAAE,CAAC,oBAAoB,EAAE,eAAe,CAAC;YACzD,YAAY,EAAE,CAAC,eAAe,CAAC;YAC/B,QAAQ,EAAE,EAAE,OAAO,EAAE,gBAAgB,EAAE,SAAS,EAAE,eAAe,EAAE;YACnE,aAAa,EAAE,EAAE,SAAS,EAAE,CAAC,oBAAoB,CAAC,EAAE;YACpD,cAAc,EAAE,EAAE,QAAQ,EAAE,CAAC,kBAAkB,CAAC,EAAE;YAClD,SAAS,EAAE,CAAC;YACZ,YAAY,EAAE,CAAC;YACf,eAAe,EAAE,CAAC;YAClB,eAAe,EAAE,CAAC;YAClB,cAAc,EAAE,4BAA4B;YAC5C,cAAc,EAAE,wBAAwB;YACxC,eAAe,EAAE,CAAC,2BAA2B,EAAE,iBAAiB,CAAC;SAClE,CAAC;QAEF,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,eAAe,CAAC,MAAM,CAAC,iBAAiB,CACpD,mBAAmB,CACpB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC3D,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,qBAAqB,CAAC,YAAY,CAAC,CAAC;YAEjE,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAChE,IAAI,EAAE,YAAY;gBAClB,OAAO,EAAE;oBACP,MAAM,EAAE;wBACN,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;oBACD,SAAS,EAAE;wBACT,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;iBACF;aACF,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YAChE,MAAM,WAAW,GAAG;gBAClB,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,eAAe;gBAC5B,aAAa,EAAE,GAAG;aACnB,CAAC;YAEF,MAAM,OAAO,CAAC,qBAAqB,CAAC,WAAW,CAAC,CAAC;YAEjD,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAChE,IAAI,EAAE,WAAW;gBACjB,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;aAC5B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAClC,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,iBAAiB,CAAC;gBACvD,mBAAmB;aACpB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC3D,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,kBAAkB,EAAE,CAAC;YAElD,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAClE,KAAK,EAAE,EAAE;gBACT,OAAO,EAAE;oBACP,MAAM,EAAE;wBACN,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;oBACD,SAAS,EAAE;wBACT,OAAO,EAAE;4BACP,IAAI,EAAE;gCACJ,MAAM,EAAE;oCACN,EAAE,EAAE,IAAI;oCACR,SAAS,EAAE,IAAI;oCACf,QAAQ,EAAE,IAAI;oCACd,SAAS,EAAE,IAAI;iCAChB;6BACF;yBACF;qBACF;iBACF;gBACD,OAAO,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE;aACpC,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gDAAgD,EAAE,KAAK,IAAI,EAAE;YAC9D,MAAM,OAAO,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC;YAE/C,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAClE,KAAK,EAAE,EAAE,QAAQ,EAAE,YAAY,EAAE;gBACjC,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;gBAC3B,OAAO,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE;aACpC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,mDAAmD,EAAE,KAAK,IAAI,EAAE;YACjE,MAAM,OAAO,CAAC,kBAAkB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;YAE7D,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAClE,KAAK,EAAE,EAAE,WAAW,EAAE,eAAe,EAAE;gBACvC,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;gBAC3B,OAAO,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE;aACpC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACnD,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YAEjD,MAAM,OAAO,CAAC,kBAAkB,CAC9B,SAAS,EACT,SAAS,EACT,SAAS,EACT,OAAO,CACR,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAClE,KAAK,EAAE;oBACL,cAAc,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,OAAO,EAAE;iBACjD;gBACD,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;gBAC3B,OAAO,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE;aACpC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACnD,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;YAEjD,MAAM,OAAO,CAAC,kBAAkB,CAC9B,YAAY,EACZ,eAAe,EACf,SAAS,EACT,OAAO,CACR,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC;gBAClE,KAAK,EAAE;oBACL,QAAQ,EAAE,YAAY;oBACtB,WAAW,EAAE,eAAe;oBAC5B,cAAc,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,OAAO,EAAE;iBACjD;gBACD,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;gBAC3B,OAAO,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE;aACpC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,sBAAsB,EAAE,GAAG,EAAE;QACpC,UAAU,CAAC,GAAG,EAAE;YACd,aAAa,CAAC,UAAU,CAAC,KAAK;iBAC3B,qBAAqB,CAAC,EAAE,CAAC;iBACzB,qBAAqB,CAAC,CAAC,CAAC,CAAC;YAC5B,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,iBAAiB,CAAC;gBACnD,IAAI,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE;aACzB,CAAC,CAAC;YACH,aAAa,CAAC,UAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC;gBACjD;oBACE,WAAW,EAAE,oBAAW,CAAC,eAAe;oBACxC,MAAM,EAAE,EAAE,WAAW,EAAE,CAAC,EAAE;iBAC3B;gBACD,EAAE,WAAW,EAAE,oBAAW,CAAC,aAAa,EAAE,MAAM,EAAE,EAAE,WAAW,EAAE,CAAC,EAAE,EAAE;gBACtE,EAAE,WAAW,EAAE,oBAAW,CAAC,WAAW,EAAE,MAAM,EAAE,EAAE,WAAW,EAAE,CAAC,EAAE,EAAE;aACrE,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,oBAAoB,EAAE,CAAC;YAEpD,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,oBAAoB,CAAC;gBAC1D,KAAK,EAAE,EAAE;aACV,CAAC,CAAC;YACH,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,oBAAoB,CAAC;gBAC1D,KAAK,EAAE,EAAE,MAAM,EAAE,sBAAa,CAAC,SAAS,EAAE;aAC3C,CAAC,CAAC;YACH,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,oBAAoB,CAAC;gBAC9D,KAAK,EAAE,EAAE,MAAM,EAAE,sBAAa,CAAC,SAAS,EAAE;gBAC1C,IAAI,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE;aACzB,CAAC,CAAC;YACH,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,oBAAoB,CAAC;gBAC5D,EAAE,EAAE,CAAC,aAAa,CAAC;gBACnB,KAAK,EAAE,EAAE;gBACT,MAAM,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE;aAC9B,CAAC,CAAC;YAEH,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC;gBACrB,aAAa,EAAE,EAAE;gBACjB,iBAAiB,EAAE,CAAC;gBACpB,eAAe,EAAE,IAAI;gBACrB,cAAc,EAAE;oBACd;wBACE,WAAW,EAAE,oBAAW,CAAC,eAAe;wBACxC,MAAM,EAAE,EAAE,WAAW,EAAE,CAAC,EAAE;qBAC3B;oBACD;wBACE,WAAW,EAAE,oBAAW,CAAC,aAAa;wBACtC,MAAM,EAAE,EAAE,WAAW,EAAE,CAAC,EAAE;qBAC3B;oBACD,EAAE,WAAW,EAAE,oBAAW,CAAC,WAAW,EAAE,MAAM,EAAE,EAAE,WAAW,EAAE,CAAC,EAAE,EAAE;iBACrE;gBACD,cAAc,EAAE,EAAE;aACnB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YAChE,MAAM,OAAO,CAAC,oBAAoB,CAAC,YAAY,CAAC,CAAC;YAEjD,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,oBAAoB,CAAC;gBAC1D,KAAK,EAAE,EAAE,QAAQ,EAAE,YAAY,EAAE;aAClC,CAAC,CAAC;YACH,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,oBAAoB,CAAC;gBAC1D,KAAK,EAAE,EAAE,QAAQ,EAAE,YAAY,EAAE,MAAM,EAAE,sBAAa,CAAC,SAAS,EAAE;aACnE,CAAC,CAAC;YACH,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,oBAAoB,CAAC;gBAC9D,KAAK,EAAE,EAAE,QAAQ,EAAE,YAAY,EAAE,MAAM,EAAE,sBAAa,CAAC,SAAS,EAAE;gBAClE,IAAI,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE;aACzB,CAAC,CAAC;YACH,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,oBAAoB,CAAC;gBAC5D,EAAE,EAAE,CAAC,aAAa,CAAC;gBACnB,KAAK,EAAE,EAAE,QAAQ,EAAE,YAAY,EAAE;gBACjC,MAAM,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE;aAC9B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qDAAqD,EAAE,KAAK,IAAI,EAAE;YACnE,MAAM,OAAO,CAAC,oBAAoB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;YAE/D,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,oBAAoB,CAAC;gBAC1D,KAAK,EAAE,EAAE,WAAW,EAAE,eAAe,EAAE;aACxC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,wCAAwC,EAAE,KAAK,IAAI,EAAE;YACtD,gCAAgC;YAChC,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;YAC3C,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;YAC/C,aAAa,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;YAE7C,aAAa,CAAC,UAAU,CAAC,KAAK;iBAC3B,qBAAqB,CAAC,CAAC,CAAC;iBACxB,qBAAqB,CAAC,CAAC,CAAC,CAAC;YAC5B,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,iBAAiB,CAAC;gBACnD,IAAI,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE;aACzB,CAAC,CAAC;YACH,aAAa,CAAC,UAAU,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAEvD,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,oBAAoB,EAAE,CAAC;YAEpD,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC;gBACrB,aAAa,EAAE,CAAC;gBAChB,iBAAiB,EAAE,CAAC;gBACpB,eAAe,EAAE,CAAC;gBAClB,cAAc,EAAE,EAAE;gBAClB,cAAc,EAAE,CAAC;aAClB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qCAAqC,EAAE,KAAK,IAAI,EAAE;YACnD,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,iBAAiB,CAAC;gBACnD,IAAI,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE;aACzB,CAAC,CAAC;YAEH,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,oBAAoB,EAAE,CAAC;YAEpD,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,gBAAgB,EAAE,GAAG,EAAE;QAC9B,EAAE,CAAC,0CAA0C,EAAE,KAAK,IAAI,EAAE;YACxD,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAC/C,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAChC,CAAC;YAEF,MAAM,MAAM,CACV,OAAO,CAAC,gBAAgB,CAAC;gBACvB,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,oBAAW,CAAC,eAAe;aACzC,CAAC,CACH,CAAC,OAAO,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YAChE,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,iBAAiB,CAC9C,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAClC,CAAC;YAEF,MAAM,MAAM,CAAC,OAAO,CAAC,oBAAoB,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,CAC1D,sBAAsB,CACvB,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,YAAY,EAAE,GAAG,EAAE;QAC1B,EAAE,CAAC,0CAA0C,EAAE,KAAK,IAAI,EAAE;YACxD,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;YACtE,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,CAAC;YAExE,MAAM,cAAc,GAAG;gBACrB,OAAO,CAAC,aAAa,CAAC,aAAa,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,CAAC;gBAC3D,OAAO,CAAC,aAAa,CAAC,aAAa,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,CAAC;aAC5D,CAAC;YAEF,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;YAElD,MAAM,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAChC,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;QACnE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;YACrD,MAAM,aAAa,GAAG;gBACpB,WAAW,EAAE,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;gBACzC,YAAY,EAAE,EAAE,MAAM,EAAE,EAAE,MAAM,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,EAAE;aACzD,CAAC;YAEF,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;YACtE,aAAa,CAAC,eAAe,CAAC,MAAM,CAAC,iBAAiB,CACpD,mBAAmB,CACpB,CAAC;YAEF,MAAM,OAAO,CAAC,kBAAkB,CAC9B,aAAa,EACb,qBAAY,CAAC,qBAAqB,EAClC,qBAAqB,EACrB,SAAS,EACT,aAAa,CACd,CAAC;YAEF,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAChE,IAAI,EAAE;oBACJ,SAAS,EAAE,aAAa;oBACxB,YAAY,EAAE,qBAAY,CAAC,qBAAqB;oBAChD,WAAW,EAAE,qBAAqB;oBAClC,QAAQ,EAAE,SAAS;oBACnB,QAAQ,EAAE,aAAa;iBACxB;aACF,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YAChE,MAAM,mBAAmB,GAAG;gBAC1B,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,eAAe;gBAC5B,aAAa,EAAE,GAAG;gBAClB,gBAAgB,EAAE,EAAE;gBACpB,YAAY,EAAE,EAAE;gBAChB,eAAe,EAAE,EAAE;aACpB,CAAC;YAEF,aAAa,CAAC,eAAe,CAAC,MAAM,CAAC,iBAAiB,CACpD,mBAAmB,CACpB,CAAC;YAEF,MAAM,OAAO,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,CAAC;YAEzD,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,oBAAoB,CAAC;gBAChE,IAAI,EAAE,mBAAmB;gBACzB,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;aAC5B,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/sessions/sessions.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { NotFoundException, BadRequestException } from '@nestjs/common';\nimport { SessionsService } from './sessions.service';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport {\n  SessionStatus,\n  SessionType,\n  ActivityType,\n  UserActionType,\n} from '@prisma/client';\n\ndescribe('SessionsService', () => {\n  let service: SessionsService;\n  let prismaService: any;\n\n  // Mock data\n  const mockUser = {\n    id: 'user-123',\n    firstName: 'John',\n    lastName: 'Doe',\n    avatarUrl: 'https://example.com/avatar.jpg',\n  };\n\n  const mockClient = {\n    id: 'client-123',\n    userId: 'user-123',\n    user: mockUser,\n  };\n\n  const mockTherapist = {\n    id: 'therapist-123',\n    userId: 'therapist-user-123',\n    user: {\n      id: 'therapist-user-123',\n      firstName: 'Dr. Jane',\n      lastName: 'Smith',\n      avatarUrl: 'https://example.com/therapist-avatar.jpg',\n    },\n  };\n\n  const mockMeeting = {\n    id: 'meeting-123',\n    title: 'Therapy Session',\n    scheduledStart: new Date('2024-01-15T10:00:00Z'),\n    scheduledEnd: new Date('2024-01-15T11:00:00Z'),\n  };\n\n  const mockSessionLog = {\n    id: 'session-123',\n    clientId: 'client-123',\n    therapistId: 'therapist-123',\n    sessionType: SessionType.REGULAR_THERAPY,\n    status: SessionStatus.IN_PROGRESS,\n    startTime: new Date('2024-01-15T10:00:00Z'),\n    endTime: null,\n    duration: null,\n    platform: 'ZOOM',\n    meetingId: 'meeting-123',\n    notes: null,\n    quality: null,\n    createdAt: new Date('2024-01-15T10:00:00Z'),\n    updatedAt: new Date('2024-01-15T10:00:00Z'),\n    client: mockClient,\n    therapist: mockTherapist,\n    meeting: mockMeeting,\n    activities: [],\n  };\n\n  const mockCompletedSession = {\n    ...mockSessionLog,\n    id: 'completed-session-123',\n    status: SessionStatus.COMPLETED,\n    endTime: new Date('2024-01-15T11:00:00Z'),\n    duration: 60,\n    quality: 8,\n    notes: 'Good progress made today',\n  };\n\n  const mockSessionActivity = {\n    id: 'activity-123',\n    sessionId: 'session-123',\n    activityType: ActivityType.MOOD_CHECK_IN,\n    description: 'Daily mood check-in',\n    duration: 10,\n    timestamp: new Date('2024-01-15T10:15:00Z'),\n    metadata: { difficulty: 'beginner' },\n  };\n\n  const mockUserActivity = {\n    id: 'user-activity-123',\n    userId: 'user-123',\n    action: UserActionType.PAGE_VIEW,\n    page: '/dashboard',\n    component: 'LoginForm',\n    timestamp: new Date('2024-01-15T09:00:00Z'),\n    sessionId: 'session-123',\n    metadata: { loginMethod: 'email' },\n    deviceInfo: { browser: 'Chrome', os: 'Windows' },\n  };\n\n  const mockTherapyProgress = {\n    id: 'progress-123',\n    clientId: 'client-123',\n    therapistId: 'therapist-123',\n    progressScore: 7.5,\n    improvementAreas: ['anxiety management', 'social skills'],\n    concernAreas: ['stress levels'],\n    goalsSet: { primary: 'reduce anxiety', secondary: 'improve sleep' },\n    goalsAchieved: { completed: ['initial assessment'] },\n    nextMilestones: { upcoming: ['weekly check-ins'] },\n    moodScore: 6,\n    anxietyScore: 4,\n    depressionScore: 3,\n    functionalScore: 7,\n    therapistNotes: 'Client showing improvement',\n    clientFeedback: 'Feeling more confident',\n    recommendations: ['Continue current approach', 'Add mindfulness'],\n    assessmentDate: new Date('2024-01-15T00:00:00Z'),\n    client: mockClient,\n    therapist: mockTherapist,\n  };\n\n  beforeEach(async () => {\n    const mockPrismaService = {\n      sessionLog: {\n        create: jest.fn(),\n        findMany: jest.fn(),\n        findUnique: jest.fn(),\n        update: jest.fn(),\n        count: jest.fn(),\n        aggregate: jest.fn(),\n        groupBy: jest.fn(),\n      },\n      sessionActivity: {\n        create: jest.fn(),\n        findMany: jest.fn(),\n      },\n      userActivity: {\n        create: jest.fn(),\n        findMany: jest.fn(),\n      },\n      therapyProgress: {\n        create: jest.fn(),\n        findMany: jest.fn(),\n      },\n    };\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        SessionsService,\n        {\n          provide: PrismaService,\n          useValue: mockPrismaService,\n        },\n      ],\n    }).compile();\n\n    service = module.get<SessionsService>(SessionsService);\n    prismaService = module.get(PrismaService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('createSessionLog', () => {\n    const createSessionData = {\n      clientId: 'client-123',\n      therapistId: 'therapist-123',\n      sessionType: SessionType.REGULAR_THERAPY,\n      meetingId: 'meeting-123',\n      platform: 'ZOOM',\n    };\n\n    beforeEach(() => {\n      prismaService.sessionLog.create.mockResolvedValue(mockSessionLog);\n    });\n\n    it('should create a session log successfully', async () => {\n      const result = await service.createSessionLog(createSessionData);\n\n      expect(prismaService.sessionLog.create).toHaveBeenCalledWith({\n        data: {\n          ...createSessionData,\n          startTime: expect.any(Date),\n          status: SessionStatus.IN_PROGRESS,\n        },\n        include: {\n          client: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n          therapist: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n        },\n      });\n      expect(result).toEqual(mockSessionLog);\n    });\n\n    it('should create session with provided start time', async () => {\n      const customStartTime = new Date('2024-01-15T09:30:00Z');\n      const dataWithStartTime = {\n        ...createSessionData,\n        startTime: customStartTime,\n      };\n\n      await service.createSessionLog(dataWithStartTime);\n\n      expect(prismaService.sessionLog.create).toHaveBeenCalledWith({\n        data: {\n          ...dataWithStartTime,\n          status: SessionStatus.IN_PROGRESS,\n        },\n        include: expect.any(Object),\n      });\n    });\n\n    it('should create session without therapist ID', async () => {\n      const dataWithoutTherapist = {\n        clientId: 'client-123',\n        sessionType: SessionType.SELF_GUIDED,\n        platform: 'WEB',\n      };\n\n      await service.createSessionLog(dataWithoutTherapist);\n\n      expect(prismaService.sessionLog.create).toHaveBeenCalledWith({\n        data: {\n          ...dataWithoutTherapist,\n          startTime: expect.any(Date),\n          status: SessionStatus.IN_PROGRESS,\n        },\n        include: expect.any(Object),\n      });\n    });\n\n    it('should handle database errors gracefully', async () => {\n      prismaService.sessionLog.create.mockRejectedValue(\n        new Error('Database error'),\n      );\n\n      await expect(service.createSessionLog(createSessionData)).rejects.toThrow(\n        'Database error',\n      );\n    });\n  });\n\n  describe('findAllSessions', () => {\n    beforeEach(() => {\n      prismaService.sessionLog.findMany.mockResolvedValue([\n        mockSessionLog,\n        mockCompletedSession,\n      ]);\n    });\n\n    it('should find all sessions without filters', async () => {\n      const result = await service.findAllSessions();\n\n      expect(prismaService.sessionLog.findMany).toHaveBeenCalledWith({\n        where: {},\n        include: {\n          client: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n          therapist: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n          activities: true,\n        },\n        orderBy: { startTime: 'desc' },\n      });\n      expect(result).toEqual([mockSessionLog, mockCompletedSession]);\n    });\n\n    it('should find sessions with client filter', async () => {\n      await service.findAllSessions('client-123');\n\n      expect(prismaService.sessionLog.findMany).toHaveBeenCalledWith({\n        where: { clientId: 'client-123' },\n        include: expect.any(Object),\n        orderBy: { startTime: 'desc' },\n      });\n    });\n\n    it('should find sessions with therapist filter', async () => {\n      await service.findAllSessions(undefined, 'therapist-123');\n\n      expect(prismaService.sessionLog.findMany).toHaveBeenCalledWith({\n        where: { therapistId: 'therapist-123' },\n        include: expect.any(Object),\n        orderBy: { startTime: 'desc' },\n      });\n    });\n\n    it('should find sessions with status filter', async () => {\n      await service.findAllSessions(\n        undefined,\n        undefined,\n        SessionStatus.COMPLETED,\n      );\n\n      expect(prismaService.sessionLog.findMany).toHaveBeenCalledWith({\n        where: { status: SessionStatus.COMPLETED },\n        include: expect.any(Object),\n        orderBy: { startTime: 'desc' },\n      });\n    });\n\n    it('should find sessions with session type filter', async () => {\n      await service.findAllSessions(\n        undefined,\n        undefined,\n        undefined,\n        SessionType.GROUP_THERAPY,\n      );\n\n      expect(prismaService.sessionLog.findMany).toHaveBeenCalledWith({\n        where: { sessionType: SessionType.GROUP_THERAPY },\n        include: expect.any(Object),\n        orderBy: { startTime: 'desc' },\n      });\n    });\n\n    it('should find sessions with multiple filters', async () => {\n      await service.findAllSessions(\n        'client-123',\n        'therapist-123',\n        SessionStatus.COMPLETED,\n        SessionType.REGULAR_THERAPY,\n      );\n\n      expect(prismaService.sessionLog.findMany).toHaveBeenCalledWith({\n        where: {\n          clientId: 'client-123',\n          therapistId: 'therapist-123',\n          status: SessionStatus.COMPLETED,\n          sessionType: SessionType.REGULAR_THERAPY,\n        },\n        include: expect.any(Object),\n        orderBy: { startTime: 'desc' },\n      });\n    });\n  });\n\n  describe('findSession', () => {\n    beforeEach(() => {\n      prismaService.sessionLog.findUnique.mockResolvedValue(mockSessionLog);\n    });\n\n    it('should find a session by ID', async () => {\n      const result = await service.findSession('session-123');\n\n      expect(prismaService.sessionLog.findUnique).toHaveBeenCalledWith({\n        where: { id: 'session-123' },\n        include: {\n          client: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n          therapist: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n          activities: {\n            orderBy: { timestamp: 'asc' },\n          },\n          meeting: true,\n        },\n      });\n      expect(result).toEqual(mockSessionLog);\n    });\n\n    it('should return null when session not found', async () => {\n      prismaService.sessionLog.findUnique.mockResolvedValue(null);\n\n      const result = await service.findSession('nonexistent');\n\n      expect(result).toBeNull();\n    });\n  });\n\n  describe('updateSession', () => {\n    const updateData = {\n      status: SessionStatus.COMPLETED,\n      notes: 'Updated notes',\n      quality: 9,\n    };\n\n    beforeEach(() => {\n      prismaService.sessionLog.findUnique.mockResolvedValue(mockSessionLog);\n      prismaService.sessionLog.update.mockResolvedValue({\n        ...mockSessionLog,\n        ...updateData,\n      });\n    });\n\n    it('should update session successfully', async () => {\n      const result = await service.updateSession('session-123', updateData);\n\n      expect(prismaService.sessionLog.update).toHaveBeenCalledWith({\n        where: { id: 'session-123' },\n        data: updateData,\n        include: {\n          client: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n          therapist: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n        },\n      });\n      expect(result).toEqual({\n        ...mockSessionLog,\n        ...updateData,\n      });\n    });\n\n    it('should throw NotFoundException when session not found', async () => {\n      prismaService.sessionLog.findUnique.mockResolvedValue(null);\n\n      await expect(\n        service.updateSession('nonexistent', updateData),\n      ).rejects.toThrow(\n        new NotFoundException('Session with ID nonexistent not found'),\n      );\n    });\n\n    it('should handle partial updates', async () => {\n      const partialUpdate = { notes: 'Partial update' };\n\n      await service.updateSession('session-123', partialUpdate);\n\n      expect(prismaService.sessionLog.update).toHaveBeenCalledWith({\n        where: { id: 'session-123' },\n        data: partialUpdate,\n        include: expect.any(Object),\n      });\n    });\n  });\n\n  describe('endSession', () => {\n    beforeEach(() => {\n      prismaService.sessionLog.findUnique.mockResolvedValue(mockSessionLog);\n      prismaService.sessionLog.update.mockResolvedValue(mockCompletedSession);\n    });\n\n    it('should end session successfully', async () => {\n      const notes = 'Session completed successfully';\n      const quality = 8;\n      const result = await service.endSession('session-123', notes, quality);\n\n      expect(prismaService.sessionLog.update).toHaveBeenCalledWith({\n        where: { id: 'session-123' },\n        data: {\n          endTime: expect.any(Date),\n          duration: expect.any(Number),\n          status: SessionStatus.COMPLETED,\n          notes,\n          quality,\n        },\n        include: expect.any(Object),\n      });\n      expect(result).toEqual(mockCompletedSession);\n    });\n\n    it('should calculate duration correctly', async () => {\n      const startTime = new Date('2024-01-15T10:00:00Z');\n      const sessionWithStartTime = { ...mockSessionLog, startTime };\n      prismaService.sessionLog.findUnique.mockResolvedValue(\n        sessionWithStartTime,\n      );\n\n      // Mock Date to ensure consistent timing\n      const mockEndTime = new Date('2024-01-15T11:30:00Z');\n      jest.spyOn(global, 'Date').mockImplementation(() => mockEndTime as any);\n\n      await service.endSession('session-123');\n\n      const expectedDuration = Math.floor(\n        (mockEndTime.getTime() - startTime.getTime()) / 60000,\n      );\n\n      expect(prismaService.sessionLog.update).toHaveBeenCalledWith({\n        where: { id: 'session-123' },\n        data: {\n          endTime: mockEndTime,\n          duration: expectedDuration,\n          status: SessionStatus.COMPLETED,\n          notes: undefined,\n          quality: undefined,\n        },\n        include: expect.any(Object),\n      });\n\n      (global.Date as any).mockRestore();\n    });\n\n    it('should throw NotFoundException when session not found', async () => {\n      prismaService.sessionLog.findUnique.mockResolvedValue(null);\n\n      await expect(service.endSession('nonexistent')).rejects.toThrow(\n        new NotFoundException('Session with ID nonexistent not found'),\n      );\n    });\n\n    it('should throw BadRequestException when session not in progress', async () => {\n      const completedSession = {\n        ...mockSessionLog,\n        status: SessionStatus.COMPLETED,\n      };\n      prismaService.sessionLog.findUnique.mockResolvedValue(completedSession);\n\n      await expect(service.endSession('session-123')).rejects.toThrow(\n        new BadRequestException('Session is not in progress'),\n      );\n    });\n\n    it('should end session without optional parameters', async () => {\n      await service.endSession('session-123');\n\n      expect(prismaService.sessionLog.update).toHaveBeenCalledWith({\n        where: { id: 'session-123' },\n        data: {\n          endTime: expect.any(Date),\n          duration: expect.any(Number),\n          status: SessionStatus.COMPLETED,\n          notes: undefined,\n          quality: undefined,\n        },\n        include: expect.any(Object),\n      });\n    });\n  });\n\n  describe('addSessionActivity', () => {\n    beforeEach(() => {\n      prismaService.sessionLog.findUnique.mockResolvedValue(mockSessionLog);\n      prismaService.sessionActivity.create.mockResolvedValue(\n        mockSessionActivity,\n      );\n    });\n\n    it('should add session activity successfully', async () => {\n      const result = await service.addSessionActivity(\n        'session-123',\n        ActivityType.MOOD_CHECK_IN,\n        'Daily mood check-in',\n        10,\n        { difficulty: 'beginner' },\n      );\n\n      expect(prismaService.sessionActivity.create).toHaveBeenCalledWith({\n        data: {\n          sessionId: 'session-123',\n          activityType: ActivityType.MOOD_CHECK_IN,\n          description: 'Daily mood check-in',\n          duration: 10,\n          metadata: { difficulty: 'beginner' },\n        },\n      });\n      expect(result).toEqual(mockSessionActivity);\n    });\n\n    it('should add activity with minimal data', async () => {\n      await service.addSessionActivity(\n        'session-123',\n        ActivityType.PROGRESS_REVIEW,\n      );\n\n      expect(prismaService.sessionActivity.create).toHaveBeenCalledWith({\n        data: {\n          sessionId: 'session-123',\n          activityType: ActivityType.PROGRESS_REVIEW,\n          description: undefined,\n          duration: undefined,\n          metadata: undefined,\n        },\n      });\n    });\n\n    it('should throw NotFoundException when session not found', async () => {\n      prismaService.sessionLog.findUnique.mockResolvedValue(null);\n\n      await expect(\n        service.addSessionActivity('nonexistent', ActivityType.MOOD_CHECK_IN),\n      ).rejects.toThrow(\n        new NotFoundException('Session with ID nonexistent not found'),\n      );\n    });\n  });\n\n  describe('getSessionActivities', () => {\n    beforeEach(() => {\n      prismaService.sessionActivity.findMany.mockResolvedValue([\n        mockSessionActivity,\n      ]);\n    });\n\n    it('should get session activities', async () => {\n      const result = await service.getSessionActivities('session-123');\n\n      expect(prismaService.sessionActivity.findMany).toHaveBeenCalledWith({\n        where: { sessionId: 'session-123' },\n        orderBy: { timestamp: 'asc' },\n      });\n      expect(result).toEqual([mockSessionActivity]);\n    });\n\n    it('should return empty array when no activities found', async () => {\n      prismaService.sessionActivity.findMany.mockResolvedValue([]);\n\n      const result = await service.getSessionActivities('session-123');\n\n      expect(result).toEqual([]);\n    });\n  });\n\n  describe('logUserActivity', () => {\n    beforeEach(() => {\n      prismaService.userActivity.create.mockResolvedValue(mockUserActivity);\n    });\n\n    it('should log user activity with all parameters', async () => {\n      const result = await service.logUserActivity(\n        'user-123',\n        UserActionType.PAGE_VIEW,\n        '/dashboard',\n        'LoginForm',\n        { loginMethod: 'email' },\n        'session-123',\n        { browser: 'Chrome', os: 'Windows' },\n      );\n\n      expect(prismaService.userActivity.create).toHaveBeenCalledWith({\n        data: {\n          userId: 'user-123',\n          action: UserActionType.PAGE_VIEW,\n          page: '/dashboard',\n          component: 'LoginForm',\n          metadata: { loginMethod: 'email' },\n          sessionId: 'session-123',\n          deviceInfo: { browser: 'Chrome', os: 'Windows' },\n        },\n      });\n      expect(result).toEqual(mockUserActivity);\n    });\n\n    it('should log user activity with minimal parameters', async () => {\n      await service.logUserActivity('user-123', UserActionType.LOGOUT);\n\n      expect(prismaService.userActivity.create).toHaveBeenCalledWith({\n        data: {\n          userId: 'user-123',\n          action: UserActionType.LOGOUT,\n          page: undefined,\n          component: undefined,\n          metadata: undefined,\n          sessionId: undefined,\n          deviceInfo: undefined,\n        },\n      });\n    });\n  });\n\n  describe('getUserActivities', () => {\n    beforeEach(() => {\n      prismaService.userActivity.findMany.mockResolvedValue([mockUserActivity]);\n    });\n\n    it('should get user activities without filters', async () => {\n      const result = await service.getUserActivities('user-123');\n\n      expect(prismaService.userActivity.findMany).toHaveBeenCalledWith({\n        where: { userId: 'user-123' },\n        orderBy: { timestamp: 'desc' },\n        take: 100,\n      });\n      expect(result).toEqual([mockUserActivity]);\n    });\n\n    it('should get user activities with action filter', async () => {\n      await service.getUserActivities('user-123', UserActionType.PAGE_VIEW);\n\n      expect(prismaService.userActivity.findMany).toHaveBeenCalledWith({\n        where: { userId: 'user-123', action: UserActionType.PAGE_VIEW },\n        orderBy: { timestamp: 'desc' },\n        take: 100,\n      });\n    });\n\n    it('should get user activities with date filters', async () => {\n      const startDate = new Date('2024-01-01T00:00:00Z');\n      const endDate = new Date('2024-01-31T23:59:59Z');\n\n      await service.getUserActivities(\n        'user-123',\n        undefined,\n        startDate,\n        endDate,\n      );\n\n      expect(prismaService.userActivity.findMany).toHaveBeenCalledWith({\n        where: {\n          userId: 'user-123',\n          timestamp: { gte: startDate, lte: endDate },\n        },\n        orderBy: { timestamp: 'desc' },\n        take: 100,\n      });\n    });\n\n    it('should get user activities with all filters', async () => {\n      const startDate = new Date('2024-01-01T00:00:00Z');\n      const endDate = new Date('2024-01-31T23:59:59Z');\n\n      await service.getUserActivities(\n        'user-123',\n        UserActionType.PAGE_VIEW,\n        startDate,\n        endDate,\n      );\n\n      expect(prismaService.userActivity.findMany).toHaveBeenCalledWith({\n        where: {\n          userId: 'user-123',\n          action: UserActionType.PAGE_VIEW,\n          timestamp: { gte: startDate, lte: endDate },\n        },\n        orderBy: { timestamp: 'desc' },\n        take: 100,\n      });\n    });\n  });\n\n  describe('createTherapyProgress', () => {\n    const progressData = {\n      clientId: 'client-123',\n      therapistId: 'therapist-123',\n      progressScore: 7.5,\n      improvementAreas: ['anxiety management', 'social skills'],\n      concernAreas: ['stress levels'],\n      goalsSet: { primary: 'reduce anxiety', secondary: 'improve sleep' },\n      goalsAchieved: { completed: ['initial assessment'] },\n      nextMilestones: { upcoming: ['weekly check-ins'] },\n      moodScore: 6,\n      anxietyScore: 4,\n      depressionScore: 3,\n      functionalScore: 7,\n      therapistNotes: 'Client showing improvement',\n      clientFeedback: 'Feeling more confident',\n      recommendations: ['Continue current approach', 'Add mindfulness'],\n    };\n\n    beforeEach(() => {\n      prismaService.therapyProgress.create.mockResolvedValue(\n        mockTherapyProgress,\n      );\n    });\n\n    it('should create therapy progress successfully', async () => {\n      const result = await service.createTherapyProgress(progressData);\n\n      expect(prismaService.therapyProgress.create).toHaveBeenCalledWith({\n        data: progressData,\n        include: {\n          client: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n          therapist: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n        },\n      });\n      expect(result).toEqual(mockTherapyProgress);\n    });\n\n    it('should create therapy progress with minimal data', async () => {\n      const minimalData = {\n        clientId: 'client-123',\n        therapistId: 'therapist-123',\n        progressScore: 5.0,\n      };\n\n      await service.createTherapyProgress(minimalData);\n\n      expect(prismaService.therapyProgress.create).toHaveBeenCalledWith({\n        data: minimalData,\n        include: expect.any(Object),\n      });\n    });\n  });\n\n  describe('getTherapyProgress', () => {\n    beforeEach(() => {\n      prismaService.therapyProgress.findMany.mockResolvedValue([\n        mockTherapyProgress,\n      ]);\n    });\n\n    it('should get therapy progress without filters', async () => {\n      const result = await service.getTherapyProgress();\n\n      expect(prismaService.therapyProgress.findMany).toHaveBeenCalledWith({\n        where: {},\n        include: {\n          client: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n          therapist: {\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n          },\n        },\n        orderBy: { assessmentDate: 'desc' },\n      });\n      expect(result).toEqual([mockTherapyProgress]);\n    });\n\n    it('should get therapy progress with client filter', async () => {\n      await service.getTherapyProgress('client-123');\n\n      expect(prismaService.therapyProgress.findMany).toHaveBeenCalledWith({\n        where: { clientId: 'client-123' },\n        include: expect.any(Object),\n        orderBy: { assessmentDate: 'desc' },\n      });\n    });\n\n    it('should get therapy progress with therapist filter', async () => {\n      await service.getTherapyProgress(undefined, 'therapist-123');\n\n      expect(prismaService.therapyProgress.findMany).toHaveBeenCalledWith({\n        where: { therapistId: 'therapist-123' },\n        include: expect.any(Object),\n        orderBy: { assessmentDate: 'desc' },\n      });\n    });\n\n    it('should get therapy progress with date filters', async () => {\n      const startDate = new Date('2024-01-01T00:00:00Z');\n      const endDate = new Date('2024-01-31T23:59:59Z');\n\n      await service.getTherapyProgress(\n        undefined,\n        undefined,\n        startDate,\n        endDate,\n      );\n\n      expect(prismaService.therapyProgress.findMany).toHaveBeenCalledWith({\n        where: {\n          assessmentDate: { gte: startDate, lte: endDate },\n        },\n        include: expect.any(Object),\n        orderBy: { assessmentDate: 'desc' },\n      });\n    });\n\n    it('should get therapy progress with all filters', async () => {\n      const startDate = new Date('2024-01-01T00:00:00Z');\n      const endDate = new Date('2024-01-31T23:59:59Z');\n\n      await service.getTherapyProgress(\n        'client-123',\n        'therapist-123',\n        startDate,\n        endDate,\n      );\n\n      expect(prismaService.therapyProgress.findMany).toHaveBeenCalledWith({\n        where: {\n          clientId: 'client-123',\n          therapistId: 'therapist-123',\n          assessmentDate: { gte: startDate, lte: endDate },\n        },\n        include: expect.any(Object),\n        orderBy: { assessmentDate: 'desc' },\n      });\n    });\n  });\n\n  describe('getSessionStatistics', () => {\n    beforeEach(() => {\n      prismaService.sessionLog.count\n        .mockResolvedValueOnce(10)\n        .mockResolvedValueOnce(8);\n      prismaService.sessionLog.aggregate.mockResolvedValue({\n        _avg: { duration: 55.5 },\n      });\n      prismaService.sessionLog.groupBy.mockResolvedValue([\n        {\n          sessionType: SessionType.REGULAR_THERAPY,\n          _count: { sessionType: 6 },\n        },\n        { sessionType: SessionType.GROUP_THERAPY, _count: { sessionType: 2 } },\n        { sessionType: SessionType.SELF_GUIDED, _count: { sessionType: 2 } },\n      ]);\n    });\n\n    it('should get session statistics without filters', async () => {\n      const result = await service.getSessionStatistics();\n\n      expect(prismaService.sessionLog.count).toHaveBeenCalledWith({\n        where: {},\n      });\n      expect(prismaService.sessionLog.count).toHaveBeenCalledWith({\n        where: { status: SessionStatus.COMPLETED },\n      });\n      expect(prismaService.sessionLog.aggregate).toHaveBeenCalledWith({\n        where: { status: SessionStatus.COMPLETED },\n        _avg: { duration: true },\n      });\n      expect(prismaService.sessionLog.groupBy).toHaveBeenCalledWith({\n        by: ['sessionType'],\n        where: {},\n        _count: { sessionType: true },\n      });\n\n      expect(result).toEqual({\n        totalSessions: 10,\n        completedSessions: 8,\n        averageDuration: 55.5,\n        sessionsByType: [\n          {\n            sessionType: SessionType.REGULAR_THERAPY,\n            _count: { sessionType: 6 },\n          },\n          {\n            sessionType: SessionType.GROUP_THERAPY,\n            _count: { sessionType: 2 },\n          },\n          { sessionType: SessionType.SELF_GUIDED, _count: { sessionType: 2 } },\n        ],\n        completionRate: 80,\n      });\n    });\n\n    it('should get session statistics with client filter', async () => {\n      await service.getSessionStatistics('client-123');\n\n      expect(prismaService.sessionLog.count).toHaveBeenCalledWith({\n        where: { clientId: 'client-123' },\n      });\n      expect(prismaService.sessionLog.count).toHaveBeenCalledWith({\n        where: { clientId: 'client-123', status: SessionStatus.COMPLETED },\n      });\n      expect(prismaService.sessionLog.aggregate).toHaveBeenCalledWith({\n        where: { clientId: 'client-123', status: SessionStatus.COMPLETED },\n        _avg: { duration: true },\n      });\n      expect(prismaService.sessionLog.groupBy).toHaveBeenCalledWith({\n        by: ['sessionType'],\n        where: { clientId: 'client-123' },\n        _count: { sessionType: true },\n      });\n    });\n\n    it('should get session statistics with therapist filter', async () => {\n      await service.getSessionStatistics(undefined, 'therapist-123');\n\n      expect(prismaService.sessionLog.count).toHaveBeenCalledWith({\n        where: { therapistId: 'therapist-123' },\n      });\n    });\n\n    it('should handle zero sessions gracefully', async () => {\n      // Reset the mocks for this test\n      prismaService.sessionLog.count.mockReset();\n      prismaService.sessionLog.aggregate.mockReset();\n      prismaService.sessionLog.groupBy.mockReset();\n\n      prismaService.sessionLog.count\n        .mockResolvedValueOnce(0)\n        .mockResolvedValueOnce(0);\n      prismaService.sessionLog.aggregate.mockResolvedValue({\n        _avg: { duration: null },\n      });\n      prismaService.sessionLog.groupBy.mockResolvedValue([]);\n\n      const result = await service.getSessionStatistics();\n\n      expect(result).toEqual({\n        totalSessions: 0,\n        completedSessions: 0,\n        averageDuration: 0,\n        sessionsByType: [],\n        completionRate: 0,\n      });\n    });\n\n    it('should handle null average duration', async () => {\n      prismaService.sessionLog.aggregate.mockResolvedValue({\n        _avg: { duration: null },\n      });\n\n      const result = await service.getSessionStatistics();\n\n      expect(result.averageDuration).toBe(0);\n    });\n  });\n\n  describe('Error handling', () => {\n    it('should handle database connection errors', async () => {\n      prismaService.sessionLog.create.mockRejectedValue(\n        new Error('Connection timeout'),\n      );\n\n      await expect(\n        service.createSessionLog({\n          clientId: 'client-123',\n          sessionType: SessionType.REGULAR_THERAPY,\n        }),\n      ).rejects.toThrow('Connection timeout');\n    });\n\n    it('should handle invalid session type in statistics', async () => {\n      prismaService.sessionLog.count.mockRejectedValue(\n        new Error('Invalid session type'),\n      );\n\n      await expect(service.getSessionStatistics()).rejects.toThrow(\n        'Invalid session type',\n      );\n    });\n  });\n\n  describe('Edge cases', () => {\n    it('should handle concurrent session updates', async () => {\n      prismaService.sessionLog.findUnique.mockResolvedValue(mockSessionLog);\n      prismaService.sessionLog.update.mockResolvedValue(mockCompletedSession);\n\n      const updatePromises = [\n        service.updateSession('session-123', { notes: 'Update 1' }),\n        service.updateSession('session-123', { notes: 'Update 2' }),\n      ];\n\n      const results = await Promise.all(updatePromises);\n\n      expect(results).toHaveLength(2);\n      expect(prismaService.sessionLog.update).toHaveBeenCalledTimes(2);\n    });\n\n    it('should handle large activity metadata', async () => {\n      const largeMetadata = {\n        complexData: new Array(1000).fill('data'),\n        nestedObject: { level1: { level2: { level3: 'deep' } } },\n      };\n\n      prismaService.sessionLog.findUnique.mockResolvedValue(mockSessionLog);\n      prismaService.sessionActivity.create.mockResolvedValue(\n        mockSessionActivity,\n      );\n\n      await service.addSessionActivity(\n        'session-123',\n        ActivityType.ASSESSMENT_COMPLETION,\n        'Large data activity',\n        undefined,\n        largeMetadata,\n      );\n\n      expect(prismaService.sessionActivity.create).toHaveBeenCalledWith({\n        data: {\n          sessionId: 'session-123',\n          activityType: ActivityType.ASSESSMENT_COMPLETION,\n          description: 'Large data activity',\n          duration: undefined,\n          metadata: largeMetadata,\n        },\n      });\n    });\n\n    it('should handle therapy progress with empty arrays', async () => {\n      const dataWithEmptyArrays = {\n        clientId: 'client-123',\n        therapistId: 'therapist-123',\n        progressScore: 5.0,\n        improvementAreas: [],\n        concernAreas: [],\n        recommendations: [],\n      };\n\n      prismaService.therapyProgress.create.mockResolvedValue(\n        mockTherapyProgress,\n      );\n\n      await service.createTherapyProgress(dataWithEmptyArrays);\n\n      expect(prismaService.therapyProgress.create).toHaveBeenCalledWith({\n        data: dataWithEmptyArrays,\n        include: expect.any(Object),\n      });\n    });\n  });\n});\n"],"version":3}