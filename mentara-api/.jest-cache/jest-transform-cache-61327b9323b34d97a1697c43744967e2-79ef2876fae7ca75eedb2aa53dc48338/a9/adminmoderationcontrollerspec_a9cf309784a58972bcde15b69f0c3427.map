{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/admin/controllers/admin-moderation.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/admin/controllers/admin-moderation.controller.spec.ts"],"sourcesContent":["/**\n * Test Suite for AdminModerationController\n * Tests basic admin moderation functionality for content review\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { HttpException, HttpStatus } from '@nestjs/common';\nimport { AdminModerationController } from './admin-moderation.controller';\nimport { AdminService } from '../admin.service';\nimport { JwtAuthGuard } from '../../auth/guards/jwt-auth.guard';\nimport { AdminAuthGuard } from '../../auth/guards/admin-auth.guard';\n\ndescribe('AdminModerationController', () => {\n  let controller: AdminModerationController;\n  let adminService: AdminService;\n  let module: TestingModule;\n\n  // Mock AdminService\n  const mockAdminService = {\n    getFlaggedContent: jest.fn(),\n    moderateContent: jest.fn(),\n  };\n\n  // Mock Guards\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  const mockAdminAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test data\n  const mockFlaggedContent = {\n    content: [\n      {\n        id: 'post_123456789',\n        type: 'post',\n        content: 'This post contains inappropriate content',\n        authorId: 'user_client_123',\n        authorName: 'John Doe',\n        communityId: 'community_123',\n        communityName: 'Anxiety Support',\n        flaggedAt: new Date('2024-02-14T10:00:00Z'),\n        flaggedBy: 'user_moderator_123',\n        flagReason: 'Inappropriate content',\n        flagCount: 3,\n        status: 'pending',\n        priority: 'medium',\n      },\n      {\n        id: 'comment_987654321',\n        type: 'comment',\n        content: 'This comment violates community guidelines',\n        authorId: 'user_client_456',\n        authorName: 'Jane Smith',\n        parentPostId: 'post_parent_123',\n        flaggedAt: new Date('2024-02-14T11:00:00Z'),\n        flaggedBy: 'system',\n        flagReason: 'Automated detection',\n        flagCount: 1,\n        status: 'pending',\n        priority: 'high',\n      },\n    ],\n    pagination: {\n      page: 1,\n      limit: 10,\n      total: 2,\n      totalPages: 1,\n    },\n    summary: {\n      totalFlagged: 2,\n      pendingReview: 2,\n      approved: 0,\n      removed: 0,\n      highPriority: 1,\n      mediumPriority: 1,\n      lowPriority: 0,\n    },\n  };\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [AdminModerationController],\n      providers: [\n        {\n          provide: AdminService,\n          useValue: mockAdminService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .overrideGuard(AdminAuthGuard)\n      .useValue(mockAdminAuthGuard)\n      .compile();\n\n    controller = module.get<AdminModerationController>(AdminModerationController);\n    adminService = module.get<AdminService>(AdminService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have adminService injected', () => {\n      expect(adminService).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard and AdminAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', AdminModerationController);\n      expect(guards).toContain(JwtAuthGuard);\n      expect(guards).toContain(AdminAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', AdminModerationController);\n      expect(controllerMetadata).toBe('admin/moderation');\n    });\n\n    it('should have AdminOnly decorators on all methods', () => {\n      const methods = [\n        'getFlaggedContent',\n        'moderateContent',\n      ];\n      \n      methods.forEach(method => {\n        const metadata = Reflect.getMetadata('admin_only', controller[method as keyof AdminModerationController]);\n        expect(metadata).toBeTruthy();\n      });\n    });\n  });\n\n  describe('GET /admin/moderation/flagged', () => {\n    it('should get flagged content with default pagination', async () => {\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n\n      const result = await controller.getFlaggedContent('admin_123');\n\n      expect(result).toEqual(mockFlaggedContent);\n      expect(adminService.getFlaggedContent).toHaveBeenCalledWith({\n        type: undefined,\n        page: 1,\n        limit: 10,\n      });\n    });\n\n    it('should get flagged content with custom parameters', async () => {\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n\n      const result = await controller.getFlaggedContent('admin_123', 'post', '2', '20');\n\n      expect(result).toEqual(mockFlaggedContent);\n      expect(adminService.getFlaggedContent).toHaveBeenCalledWith({\n        type: 'post',\n        page: 2,\n        limit: 20,\n      });\n    });\n\n    it('should filter by content type', async () => {\n      const contentTypes = ['post', 'comment', 'message', 'profile'];\n      \n      for (const type of contentTypes) {\n        const filteredContent = {\n          ...mockFlaggedContent,\n          content: mockFlaggedContent.content.filter(item => item.type === type),\n        };\n        mockAdminService.getFlaggedContent.mockResolvedValue(filteredContent);\n\n        const result = await controller.getFlaggedContent('admin_123', type);\n\n        expect(adminService.getFlaggedContent).toHaveBeenCalledWith(\n          expect.objectContaining({ type })\n        );\n      }\n    });\n\n    it('should handle invalid pagination parameters', async () => {\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n\n      // Test with invalid string values that should be converted\n      const result = await controller.getFlaggedContent('admin_123', undefined, 'invalid', 'invalid');\n\n      expect(adminService.getFlaggedContent).toHaveBeenCalledWith({\n        type: undefined,\n        page: NaN,\n        limit: NaN,\n      });\n    });\n\n    it('should handle empty flagged content', async () => {\n      const emptyContent = {\n        content: [],\n        pagination: { page: 1, limit: 10, total: 0, totalPages: 0 },\n        summary: { totalFlagged: 0, pendingReview: 0, approved: 0, removed: 0, highPriority: 0, mediumPriority: 0, lowPriority: 0 },\n      };\n      mockAdminService.getFlaggedContent.mockResolvedValue(emptyContent);\n\n      const result = await controller.getFlaggedContent('admin_123');\n\n      expect(result.content).toHaveLength(0);\n      expect(result.summary.totalFlagged).toBe(0);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database query failed');\n      mockAdminService.getFlaggedContent.mockRejectedValue(serviceError);\n\n      await expect(controller.getFlaggedContent('admin_123')).rejects.toThrow(HttpException);\n      await expect(controller.getFlaggedContent('admin_123')).rejects.toThrow('Failed to retrieve flagged content');\n    });\n\n    it('should log admin actions', async () => {\n      const logSpy = jest.spyOn(controller['logger'], 'log');\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n\n      await controller.getFlaggedContent('admin_123');\n\n      expect(logSpy).toHaveBeenCalledWith('Admin admin_123 retrieving flagged content');\n    });\n  });\n\n  describe('PUT /admin/moderation/:contentType/:contentId/moderate', () => {\n    const contentType = 'post';\n    const contentId = 'post_123456789';\n    const moderationData = {\n      action: 'remove' as const,\n      reason: 'Violates community guidelines',\n    };\n\n    it('should moderate content successfully', async () => {\n      const moderatedContent = {\n        id: contentId,\n        type: contentType,\n        status: 'removed',\n        moderatedBy: 'admin_123',\n        moderatedAt: new Date(),\n        action: moderationData.action,\n        reason: moderationData.reason,\n      };\n      mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n\n      const result = await controller.moderateContent(\n        'admin_123',\n        contentType,\n        contentId,\n        moderationData\n      );\n\n      expect(result).toEqual(moderatedContent);\n      expect(adminService.moderateContent).toHaveBeenCalledWith(\n        contentType,\n        contentId,\n        'admin_123',\n        moderationData.action,\n        moderationData.reason\n      );\n    });\n\n    it('should handle all moderation actions', async () => {\n      const actions = ['approve', 'remove', 'flag'] as const;\n      \n      for (const action of actions) {\n        const data = { action, reason: `Test ${action} action` };\n        const moderatedContent = {\n          id: contentId,\n          type: contentType,\n          status: action === 'approve' ? 'approved' : action === 'remove' ? 'removed' : 'flagged',\n          action,\n        };\n        mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n\n        const result = await controller.moderateContent(\n          'admin_123',\n          contentType,\n          contentId,\n          data\n        );\n\n        expect(result.action).toBe(action);\n      }\n    });\n\n    it('should handle different content types', async () => {\n      const contentTypes = ['post', 'comment', 'message', 'profile'];\n      \n      for (const type of contentTypes) {\n        const moderatedContent = {\n          id: contentId,\n          type,\n          status: 'approved',\n          action: 'approve',\n        };\n        mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n\n        const result = await controller.moderateContent(\n          'admin_123',\n          type,\n          contentId,\n          { action: 'approve' }\n        );\n\n        expect(result.type).toBe(type);\n        expect(adminService.moderateContent).toHaveBeenCalledWith(\n          type,\n          contentId,\n          'admin_123',\n          'approve',\n          undefined\n        );\n      }\n    });\n\n    it('should handle moderation without reason', async () => {\n      const dataWithoutReason = { action: 'approve' as const };\n      const moderatedContent = {\n        id: contentId,\n        type: contentType,\n        status: 'approved',\n        action: 'approve',\n      };\n      mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n\n      const result = await controller.moderateContent(\n        'admin_123',\n        contentType,\n        contentId,\n        dataWithoutReason\n      );\n\n      expect(result).toEqual(moderatedContent);\n      expect(adminService.moderateContent).toHaveBeenCalledWith(\n        contentType,\n        contentId,\n        'admin_123',\n        'approve',\n        undefined\n      );\n    });\n\n    it('should handle content not found', async () => {\n      const notFoundError = new Error('Content not found');\n      mockAdminService.moderateContent.mockRejectedValue(notFoundError);\n\n      await expect(\n        controller.moderateContent('admin_123', contentType, 'non-existent-id', moderationData)\n      ).rejects.toThrow(HttpException);\n    });\n\n    it('should log admin actions', async () => {\n      const logSpy = jest.spyOn(controller['logger'], 'log');\n      const moderatedContent = { id: contentId, status: 'removed' };\n      mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n\n      await controller.moderateContent('admin_123', contentType, contentId, moderationData);\n\n      expect(logSpy).toHaveBeenCalledWith(`Admin admin_123 moderating ${contentType} ${contentId}`);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle service unavailable scenarios', async () => {\n      const serviceError = new Error('Service temporarily unavailable');\n      mockAdminService.getFlaggedContent.mockRejectedValue(serviceError);\n\n      await expect(controller.getFlaggedContent('admin_123')).rejects.toThrow(HttpException);\n    });\n\n    it('should handle database errors gracefully', async () => {\n      const dbError = new Error('Database connection failed');\n      mockAdminService.moderateContent.mockRejectedValue(dbError);\n\n      await expect(\n        controller.moderateContent('admin_123', 'post', 'post_123', { action: 'approve' })\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted flagged content response', async () => {\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n\n      const result = await controller.getFlaggedContent('admin_123');\n\n      expect(result).toHaveProperty('content');\n      expect(result).toHaveProperty('pagination');\n      expect(result).toHaveProperty('summary');\n      expect(Array.isArray(result.content)).toBe(true);\n      result.content.forEach((item) => {\n        expect(item).toHaveProperty('id');\n        expect(item).toHaveProperty('type');\n        expect(item).toHaveProperty('content');\n        expect(item).toHaveProperty('authorId');\n        expect(item).toHaveProperty('flaggedAt');\n        expect(['pending', 'approved', 'removed']).toContain(item.status);\n        expect(['low', 'medium', 'high']).toContain(item.priority);\n      });\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete moderation workflow', async () => {\n      // Get flagged content\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n      const flaggedContent = await controller.getFlaggedContent('admin_123');\n      expect(flaggedContent.content).toHaveLength(2);\n\n      // Moderate content\n      const moderatedContent = { id: 'post_123', status: 'removed' };\n      mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n      const moderation = await controller.moderateContent(\n        'admin_123',\n        'post',\n        'post_123',\n        { action: 'remove', reason: 'Inappropriate content' }\n      );\n      expect(moderation.status).toBe('removed');\n    });\n  });\n});"],"version":3}