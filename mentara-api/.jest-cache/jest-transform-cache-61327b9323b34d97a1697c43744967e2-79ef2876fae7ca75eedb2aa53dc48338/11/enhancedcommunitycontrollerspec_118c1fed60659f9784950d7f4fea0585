2a9ea686f391d1df4cb86e72588ebe93
"use strict";
/**
 * Comprehensive Test Suite for EnhancedCommunityController
 * Tests advanced community search, discovery, and management features
 */
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const enhanced_community_controller_1 = require("./enhanced-community.controller");
const enhanced_community_service_1 = require("../services/enhanced-community.service");
const jwt_auth_guard_1 = require("../../auth/guards/jwt-auth.guard");
const role_based_access_guard_1 = require("../../auth/guards/role-based-access.guard");
const index_1 = require("../../test-utils/index");
describe('EnhancedCommunityController', () => {
    let controller;
    let enhancedCommunityService;
    let module;
    // Mock EnhancedCommunityService
    const mockEnhancedCommunityService = {
        searchCommunities: jest.fn(),
        getCommunityDetails: jest.fn(),
        getTrendingCommunities: jest.fn(),
        getSimilarCommunities: jest.fn(),
        // Prisma mock for direct database access
        prisma: {
            membership: {
                findMany: jest.fn(),
            },
            community: {
                count: jest.fn(),
            },
        },
    };
    // Mock Guards
    const mockJwtAuthGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    const mockRoleBasedAccessGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    // Test data
    const mockUser = {
        id: index_1.TEST_USER_IDS.CLIENT,
        email: index_1.TEST_EMAILS.CLIENT,
        role: 'client',
    };
    const mockCommunity = {
        id: 'community_123456789',
        name: 'Anxiety Support Group',
        slug: 'anxiety-support-group',
        description: 'A supportive community for people dealing with anxiety',
        memberCount: 1234,
        isPrivate: false,
        createdAt: new Date('2024-01-15T10:00:00Z'),
        recentActivity: {
            lastPostAt: '2024-02-14T09:30:00Z',
            postsThisWeek: 23,
            activeMembers: 456,
        },
        membershipStatus: 'none',
        compatibility: {
            score: 0.85,
            reasons: ['Interest in anxiety management', 'Similar community preferences'],
        },
    };
    const mockSearchResults = {
        communities: [mockCommunity],
        total: 1,
        page: 1,
        limit: 20,
        totalPages: 1,
        facets: {
            tags: [
                { tag: 'anxiety', count: 15 },
                { tag: 'support', count: 23 },
                { tag: 'therapy', count: 8 },
            ],
            memberCountRanges: [
                { range: '0-100', count: 5 },
                { range: '100-500', count: 12 },
                { range: '500+', count: 8 },
            ],
        },
    };
    const mockCommunityDetails = {
        ...mockCommunity,
        stats: {
            totalPosts: 456,
            totalComments: 1234,
            activeMembers: 234,
            recentActivity: {
                postsToday: 5,
                postsThisWeek: 23,
                postsThisMonth: 89,
            },
        },
        recentPosts: [
            {
                id: 'post_123',
                title: 'Managing Work Anxiety',
                author: 'Anonymous',
                createdAt: '2024-02-14T08:30:00Z',
                likesCount: 15,
                commentsCount: 8,
            },
        ],
        topContributors: [
            {
                id: 'user_456',
                name: 'Sarah M.',
                postsCount: 45,
                helpfulVotes: 123,
            },
        ],
        moderators: [
            {
                id: 'mod_789',
                name: 'Dr. Johnson',
                role: 'moderator',
            },
        ],
        membershipStatus: 'none',
        userPermissions: {
            canPost: false,
            canComment: false,
            canModerate: false,
        },
    };
    const mockTrendingCommunities = [
        {
            ...mockCommunity,
            trendingData: {
                growthRate: 15.2,
                activityScore: 89.5,
                engagementRate: 72.3,
                retentionRate: 85.7,
            },
        },
    ];
    const mockSimilarCommunities = [
        {
            id: 'community_similar_1',
            name: 'Depression Support',
            description: 'Support for those dealing with depression',
            memberCount: 987,
            similarityScore: 0.78,
            commonTags: ['support', 'mental-health'],
        },
    ];
    beforeEach(async () => {
        module = await testing_1.Test.createTestingModule({
            controllers: [enhanced_community_controller_1.EnhancedCommunityController],
            providers: [
                {
                    provide: enhanced_community_service_1.EnhancedCommunityService,
                    useValue: mockEnhancedCommunityService,
                },
            ],
        })
            .overrideGuard(jwt_auth_guard_1.JwtAuthGuard)
            .useValue(mockJwtAuthGuard)
            .overrideGuard(role_based_access_guard_1.RoleBasedAccessGuard)
            .useValue(mockRoleBasedAccessGuard)
            .compile();
        controller = module.get(enhanced_community_controller_1.EnhancedCommunityController);
        enhancedCommunityService = module.get(enhanced_community_service_1.EnhancedCommunityService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('Controller Initialization', () => {
        it('should be defined', () => {
            expect(controller).toBeDefined();
        });
        it('should have enhancedCommunityService injected', () => {
            expect(enhancedCommunityService).toBeDefined();
        });
    });
    describe('Security Guards', () => {
        it('should be protected by JwtAuthGuard and RoleBasedAccessGuard', () => {
            const guards = Reflect.getMetadata('__guards__', enhanced_community_controller_1.EnhancedCommunityController);
            expect(guards).toContain(jwt_auth_guard_1.JwtAuthGuard);
            expect(guards).toContain(role_based_access_guard_1.RoleBasedAccessGuard);
        });
        it('should have proper route decorators', () => {
            const controllerMetadata = Reflect.getMetadata('path', enhanced_community_controller_1.EnhancedCommunityController);
            expect(controllerMetadata).toBe('communities/enhanced');
        });
        it('should allow multiple roles for all endpoints', () => {
            const allowedRoles = ['client', 'therapist', 'moderator', 'admin'];
            const methods = ['searchCommunities', 'getCommunityDetails', 'getTrendingCommunities', 'getSimilarCommunities'];
            methods.forEach(method => {
                const metadata = Reflect.getMetadata('roles', controller[method]);
                expect(metadata).toEqual(allowedRoles);
            });
        });
    });
    describe('GET /communities/enhanced/search', () => {
        const validSearchQuery = {
            query: 'anxiety',
            tags: ['support', 'therapy'],
            minMembers: 100,
            maxMembers: 2000,
            sortBy: 'relevance',
            sortOrder: 'desc',
            hasDescription: true,
            hasImage: false,
            membershipRequired: false,
            page: 1,
            limit: 20,
        };
        it('should search communities successfully', async () => {
            mockEnhancedCommunityService.searchCommunities.mockResolvedValue(mockSearchResults);
            const result = await controller.searchCommunities(validSearchQuery, mockUser);
            expect(result.success).toBe(true);
            expect(result.data).toEqual(mockSearchResults);
            expect(result.message).toContain('successfully');
            expect(enhancedCommunityService.searchCommunities).toHaveBeenCalledWith({
                query: validSearchQuery.query,
                tags: validSearchQuery.tags,
                minMembers: validSearchQuery.minMembers,
                maxMembers: validSearchQuery.maxMembers,
                sortBy: validSearchQuery.sortBy,
                sortOrder: validSearchQuery.sortOrder,
                hasDescription: validSearchQuery.hasDescription,
                hasImage: validSearchQuery.hasImage,
                membershipRequired: validSearchQuery.membershipRequired,
            }, mockUser.id, validSearchQuery.page, validSearchQuery.limit);
        });
        it('should handle empty search query', async () => {
            const emptyQuery = { page: 1, limit: 20 };
            mockEnhancedCommunityService.searchCommunities.mockResolvedValue({
                ...mockSearchResults,
                communities: [],
                total: 0,
            });
            const result = await controller.searchCommunities(emptyQuery, mockUser);
            expect(result.success).toBe(true);
            expect(result.data.communities).toEqual([]);
            expect(result.data.total).toBe(0);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Search service unavailable');
            mockEnhancedCommunityService.searchCommunities.mockRejectedValue(serviceError);
            await expect(controller.searchCommunities(validSearchQuery, mockUser)).rejects.toThrow(serviceError);
        });
        it('should validate search facets', async () => {
            mockEnhancedCommunityService.searchCommunities.mockResolvedValue(mockSearchResults);
            const result = await controller.searchCommunities(validSearchQuery, mockUser);
            expect(result.data.facets).toBeDefined();
            expect(result.data.facets.tags).toBeDefined();
            expect(Array.isArray(result.data.facets.tags)).toBe(true);
            expect(result.data.facets.memberCountRanges).toBeDefined();
            expect(Array.isArray(result.data.facets.memberCountRanges)).toBe(true);
        });
        it('should handle different sorting options', async () => {
            const sortByMembers = { ...validSearchQuery, sortBy: 'members' };
            mockEnhancedCommunityService.searchCommunities.mockResolvedValue(mockSearchResults);
            const result = await controller.searchCommunities(sortByMembers, mockUser);
            expect(result.success).toBe(true);
            expect(enhancedCommunityService.searchCommunities).toHaveBeenCalledWith(expect.objectContaining({ sortBy: 'members' }), mockUser.id, 1, 20);
        });
    });
    describe('GET /communities/enhanced/:communityId/details', () => {
        it('should get community details successfully', async () => {
            mockEnhancedCommunityService.getCommunityDetails.mockResolvedValue(mockCommunityDetails);
            const result = await controller.getCommunityDetails('community_123456789', mockUser);
            expect(result.success).toBe(true);
            expect(result.data).toEqual(mockCommunityDetails);
            expect(result.message).toContain('successfully');
            expect(enhancedCommunityService.getCommunityDetails).toHaveBeenCalledWith('community_123456789', mockUser.id);
        });
        it('should handle non-existent community', async () => {
            const notFoundError = new Error('Community not found');
            mockEnhancedCommunityService.getCommunityDetails.mockRejectedValue(notFoundError);
            await expect(controller.getCommunityDetails('nonexistent_community', mockUser)).rejects.toThrow(notFoundError);
        });
        it('should validate community details structure', async () => {
            mockEnhancedCommunityService.getCommunityDetails.mockResolvedValue(mockCommunityDetails);
            const result = await controller.getCommunityDetails('community_123456789', mockUser);
            expect(result.data).toHaveProperty('id');
            expect(result.data).toHaveProperty('name');
            expect(result.data).toHaveProperty('stats');
            expect(result.data).toHaveProperty('recentPosts');
            expect(result.data).toHaveProperty('topContributors');
            expect(result.data).toHaveProperty('moderators');
            expect(result.data).toHaveProperty('membershipStatus');
            expect(result.data).toHaveProperty('userPermissions');
            expect(Array.isArray(result.data.recentPosts)).toBe(true);
            expect(Array.isArray(result.data.topContributors)).toBe(true);
            expect(Array.isArray(result.data.moderators)).toBe(true);
        });
    });
    describe('GET /communities/enhanced/trending', () => {
        it('should get trending communities successfully', async () => {
            mockEnhancedCommunityService.getTrendingCommunities.mockResolvedValue(mockTrendingCommunities);
            const query = { limit: 10, timeframe: 'week' };
            const result = await controller.getTrendingCommunities(query);
            expect(result.success).toBe(true);
            expect(result.data).toEqual(mockTrendingCommunities);
            expect(result.message).toContain('successfully');
            expect(enhancedCommunityService.getTrendingCommunities).toHaveBeenCalledWith(10, 'week');
        });
        it('should handle default parameters', async () => {
            mockEnhancedCommunityService.getTrendingCommunities.mockResolvedValue(mockTrendingCommunities);
            const result = await controller.getTrendingCommunities({});
            expect(result.success).toBe(true);
            expect(enhancedCommunityService.getTrendingCommunities).toHaveBeenCalledWith(10, 'week');
        });
        it('should handle different timeframes', async () => {
            mockEnhancedCommunityService.getTrendingCommunities.mockResolvedValue(mockTrendingCommunities);
            const monthQuery = { limit: 15, timeframe: 'month' };
            const result = await controller.getTrendingCommunities(monthQuery);
            expect(result.success).toBe(true);
            expect(enhancedCommunityService.getTrendingCommunities).toHaveBeenCalledWith(15, 'month');
        });
        it('should validate trending data structure', async () => {
            mockEnhancedCommunityService.getTrendingCommunities.mockResolvedValue(mockTrendingCommunities);
            const result = await controller.getTrendingCommunities({ limit: 5 });
            expect(Array.isArray(result.data)).toBe(true);
            result.data.forEach(community => {
                expect(community).toHaveProperty('id');
                expect(community).toHaveProperty('name');
                expect(community).toHaveProperty('memberCount');
                expect(community).toHaveProperty('trendingData');
                expect(community.trendingData).toHaveProperty('growthRate');
                expect(community.trendingData).toHaveProperty('activityScore');
                expect(community.trendingData).toHaveProperty('engagementRate');
                expect(typeof community.trendingData.growthRate).toBe('number');
            });
        });
    });
    describe('GET /communities/enhanced/:communityId/similar', () => {
        it('should get similar communities successfully', async () => {
            mockEnhancedCommunityService.getSimilarCommunities.mockResolvedValue(mockSimilarCommunities);
            const query = { excludeJoined: true, maxResults: 5 };
            const result = await controller.getSimilarCommunities('community_123456789', query, mockUser);
            expect(result.success).toBe(true);
            expect(result.data).toEqual(mockSimilarCommunities);
            expect(result.message).toContain('successfully');
            expect(enhancedCommunityService.getSimilarCommunities).toHaveBeenCalledWith('community_123456789', {
                userId: mockUser.id,
                excludeJoined: true,
                maxResults: 5,
            });
        });
        it('should handle default parameters', async () => {
            mockEnhancedCommunityService.getSimilarCommunities.mockResolvedValue(mockSimilarCommunities);
            const result = await controller.getSimilarCommunities('community_123456789', {}, mockUser);
            expect(result.success).toBe(true);
            expect(enhancedCommunityService.getSimilarCommunities).toHaveBeenCalledWith('community_123456789', {
                userId: mockUser.id,
                excludeJoined: true,
                maxResults: 5,
            });
        });
        it('should validate similar communities structure', async () => {
            mockEnhancedCommunityService.getSimilarCommunities.mockResolvedValue(mockSimilarCommunities);
            const result = await controller.getSimilarCommunities('community_123456789', {}, mockUser);
            expect(Array.isArray(result.data)).toBe(true);
            result.data.forEach(community => {
                expect(community).toHaveProperty('id');
                expect(community).toHaveProperty('name');
                expect(community).toHaveProperty('memberCount');
                expect(community).toHaveProperty('similarityScore');
                expect(typeof community.similarityScore).toBe('number');
                expect(community.similarityScore).toBeGreaterThanOrEqual(0);
                expect(community.similarityScore).toBeLessThanOrEqual(1);
            });
        });
    });
    describe('GET /communities/enhanced/discover', () => {
        it('should discover communities successfully', async () => {
            mockEnhancedCommunityService.getTrendingCommunities.mockResolvedValue(mockTrendingCommunities);
            mockEnhancedCommunityService.prisma.membership.findMany.mockResolvedValue([]);
            const result = await controller.discoverCommunities(mockUser, 10);
            expect(result.success).toBe(true);
            expect(result.data).toEqual(mockTrendingCommunities);
            expect(result.message).toContain('successfully');
        });
        it('should filter out user joined communities', async () => {
            const userMemberships = [{ communityId: mockCommunity.id }];
            mockEnhancedCommunityService.getTrendingCommunities.mockResolvedValue(mockTrendingCommunities);
            mockEnhancedCommunityService.prisma.membership.findMany.mockResolvedValue(userMemberships);
            const result = await controller.discoverCommunities(mockUser, 10);
            expect(result.success).toBe(true);
            expect(result.data).toEqual([]); // Should be filtered out
        });
        it('should handle default limit', async () => {
            mockEnhancedCommunityService.getTrendingCommunities.mockResolvedValue(mockTrendingCommunities);
            mockEnhancedCommunityService.prisma.membership.findMany.mockResolvedValue([]);
            const result = await controller.discoverCommunities(mockUser);
            expect(result.success).toBe(true);
            expect(enhancedCommunityService.getTrendingCommunities).toHaveBeenCalledWith(10, 'week');
        });
    });
    describe('GET /communities/enhanced/categories', () => {
        it('should get community categories successfully', async () => {
            mockEnhancedCommunityService.prisma.community.count.mockResolvedValue(5);
            const result = await controller.getCommunityCategories();
            expect(result.success).toBe(true);
            expect(result.message).toContain('successfully');
            expect(Array.isArray(result.data)).toBe(true);
            expect(result.data.length).toBeGreaterThan(0);
        });
        it('should validate categories structure', async () => {
            mockEnhancedCommunityService.prisma.community.count.mockResolvedValue(3);
            const result = await controller.getCommunityCategories();
            result.data.forEach(category => {
                expect(category).toHaveProperty('id');
                expect(category).toHaveProperty('name');
                expect(category).toHaveProperty('description');
                expect(category).toHaveProperty('icon');
                expect(category).toHaveProperty('communityCount');
                expect(typeof category.communityCount).toBe('number');
            });
        });
        it('should include predefined categories', async () => {
            mockEnhancedCommunityService.prisma.community.count.mockResolvedValue(2);
            const result = await controller.getCommunityCategories();
            const categoryIds = result.data.map(cat => cat.id);
            expect(categoryIds).toContain('depression');
            expect(categoryIds).toContain('anxiety');
            expect(categoryIds).toContain('trauma');
            expect(categoryIds).toContain('general');
            expect(categoryIds).toContain('wellness');
        });
    });
    describe('GET /communities/enhanced/popular', () => {
        it('should get popular communities successfully', async () => {
            mockEnhancedCommunityService.searchCommunities.mockResolvedValue(mockSearchResults);
            const result = await controller.getPopularCommunities(mockUser, 10);
            expect(result.success).toBe(true);
            expect(result.data).toEqual(mockSearchResults.communities);
            expect(result.message).toContain('successfully');
            expect(enhancedCommunityService.searchCommunities).toHaveBeenCalledWith({
                sortBy: 'members',
                sortOrder: 'desc',
            }, mockUser.id, 1, 10);
        });
        it('should handle default limit', async () => {
            mockEnhancedCommunityService.searchCommunities.mockResolvedValue(mockSearchResults);
            const result = await controller.getPopularCommunities(mockUser);
            expect(result.success).toBe(true);
            expect(enhancedCommunityService.searchCommunities).toHaveBeenCalledWith(expect.any(Object), mockUser.id, 1, 10);
        });
    });
    describe('Response Format Validation', () => {
        it('should return properly formatted search response', async () => {
            mockEnhancedCommunityService.searchCommunities.mockResolvedValue(mockSearchResults);
            const result = await controller.searchCommunities({ query: 'test' }, mockUser);
            expect(result).toHaveProperty('success');
            expect(result).toHaveProperty('data');
            expect(result).toHaveProperty('message');
            expect(result.success).toBe(true);
            expect(result.data).toHaveProperty('communities');
            expect(result.data).toHaveProperty('total');
            expect(result.data).toHaveProperty('facets');
            expect(Array.isArray(result.data.communities)).toBe(true);
        });
        it('should return properly formatted community details', async () => {
            mockEnhancedCommunityService.getCommunityDetails.mockResolvedValue(mockCommunityDetails);
            const result = await controller.getCommunityDetails('community_123', mockUser);
            expect(result).toHaveProperty('success');
            expect(result).toHaveProperty('data');
            expect(result).toHaveProperty('message');
            expect(result.data).toHaveProperty('stats');
            expect(result.data).toHaveProperty('recentPosts');
            expect(result.data).toHaveProperty('userPermissions');
        });
        it('should return properly formatted trending communities', async () => {
            mockEnhancedCommunityService.getTrendingCommunities.mockResolvedValue(mockTrendingCommunities);
            const result = await controller.getTrendingCommunities({});
            expect(result).toHaveProperty('success');
            expect(result).toHaveProperty('data');
            expect(result).toHaveProperty('message');
            expect(Array.isArray(result.data)).toBe(true);
            result.data.forEach(community => {
                expect(community).toHaveProperty('trendingData');
                expect(typeof community.trendingData.growthRate).toBe('number');
            });
        });
    });
    describe('Error Handling', () => {
        it('should handle service unavailable scenarios', async () => {
            const serviceError = new Error('Enhanced community service unavailable');
            mockEnhancedCommunityService.searchCommunities.mockRejectedValue(serviceError);
            await expect(controller.searchCommunities({ query: 'test' }, mockUser)).rejects.toThrow(serviceError);
        });
        it('should handle database connection errors', async () => {
            const dbError = new Error('Database connection failed');
            mockEnhancedCommunityService.getCommunityDetails.mockRejectedValue(dbError);
            await expect(controller.getCommunityDetails('community_123', mockUser)).rejects.toThrow(dbError);
        });
        it('should handle invalid community IDs', async () => {
            const invalidIdError = new Error('Invalid community ID format');
            mockEnhancedCommunityService.getCommunityDetails.mockRejectedValue(invalidIdError);
            await expect(controller.getCommunityDetails('invalid-id', mockUser)).rejects.toThrow(invalidIdError);
        });
    });
    describe('Integration Tests', () => {
        it('should handle complete community discovery workflow', async () => {
            // Search communities
            mockEnhancedCommunityService.searchCommunities.mockResolvedValue(mockSearchResults);
            const searchResult = await controller.searchCommunities({ query: 'anxiety' }, mockUser);
            expect(searchResult.data.communities).toHaveLength(1);
            // Get community details
            mockEnhancedCommunityService.getCommunityDetails.mockResolvedValue(mockCommunityDetails);
            const detailsResult = await controller.getCommunityDetails(searchResult.data.communities[0].id, mockUser);
            expect(detailsResult.data.id).toBe(searchResult.data.communities[0].id);
            // Get similar communities
            mockEnhancedCommunityService.getSimilarCommunities.mockResolvedValue(mockSimilarCommunities);
            const similarResult = await controller.getSimilarCommunities(searchResult.data.communities[0].id, {}, mockUser);
            expect(Array.isArray(similarResult.data)).toBe(true);
            // Get trending communities
            mockEnhancedCommunityService.getTrendingCommunities.mockResolvedValue(mockTrendingCommunities);
            const trendingResult = await controller.getTrendingCommunities({});
            expect(Array.isArray(trendingResult.data)).toBe(true);
        });
        it('should validate role-based access across all endpoints', async () => {
            // Mock successful responses
            mockEnhancedCommunityService.searchCommunities.mockResolvedValue(mockSearchResults);
            mockEnhancedCommunityService.getCommunityDetails.mockResolvedValue(mockCommunityDetails);
            mockEnhancedCommunityService.getTrendingCommunities.mockResolvedValue(mockTrendingCommunities);
            mockEnhancedCommunityService.getSimilarCommunities.mockResolvedValue(mockSimilarCommunities);
            mockEnhancedCommunityService.prisma.membership.findMany.mockResolvedValue([]);
            mockEnhancedCommunityService.prisma.community.count.mockResolvedValue(5);
            // All endpoints should be accessible for all allowed roles
            const endpoints = [
                () => controller.searchCommunities({}, mockUser),
                () => controller.getCommunityDetails('community_123', mockUser),
                () => controller.getTrendingCommunities({}),
                () => controller.getSimilarCommunities('community_123', {}, mockUser),
                () => controller.discoverCommunities(mockUser),
                () => controller.getCommunityCategories(),
                () => controller.getPopularCommunities(mockUser),
            ];
            for (const endpoint of endpoints) {
                await expect(endpoint()).resolves.toBeDefined();
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2NvbW11bml0aWVzL2NvbnRyb2xsZXJzL2VuaGFuY2VkLWNvbW11bml0eS5jb250cm9sbGVyLnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCw2Q0FBc0Q7QUFFdEQsbUZBQThFO0FBQzlFLHVGQUFrRjtBQUNsRixxRUFBZ0U7QUFDaEUsdUZBQWlGO0FBR2pGLGtEQUFvRTtBQUVwRSxRQUFRLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO0lBQzNDLElBQUksVUFBdUMsQ0FBQztJQUM1QyxJQUFJLHdCQUFrRCxDQUFDO0lBQ3ZELElBQUksTUFBcUIsQ0FBQztJQUUxQixnQ0FBZ0M7SUFDaEMsTUFBTSw0QkFBNEIsR0FBRztRQUNuQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQzVCLG1CQUFtQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDOUIsc0JBQXNCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNqQyxxQkFBcUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hDLHlDQUF5QztRQUN6QyxNQUFNLEVBQUU7WUFDTixVQUFVLEVBQUU7Z0JBQ1YsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDcEI7WUFDRCxTQUFTLEVBQUU7Z0JBQ1QsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDakI7U0FDRjtLQUNGLENBQUM7SUFFRixjQUFjO0lBQ2QsTUFBTSxnQkFBZ0IsR0FBRztRQUN2QixXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUM7S0FDN0MsQ0FBQztJQUVGLE1BQU0sd0JBQXdCLEdBQUc7UUFDL0IsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDO0tBQzdDLENBQUM7SUFFRixZQUFZO0lBQ1os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RSw0QkFBNEIsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV6RSwyREFBMkQ7WUFDM0QsTUFBTSxTQUFTLEdBQUc7Z0JBQ2hCLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDO2dCQUNoRCxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQztnQkFDL0QsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLHNCQUFzQixDQUFDLEVBQUUsQ0FBQztnQkFDM0MsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLHFCQUFxQixDQUFDLGVBQWUsRUFBRSxFQUFFLEVBQUUsUUFBUSxDQUFDO2dCQUNyRSxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDO2dCQUM5QyxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsc0JBQXNCLEVBQUU7Z0JBQ3pDLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxxQkFBcUIsQ0FBQyxRQUFRLENBQUM7YUFDakQsQ0FBQztZQUVGLEtBQUssTUFBTSxRQUFRLElBQUksU0FBUyxFQUFFLENBQUM7Z0JBQ2pDLE1BQU0sTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ2xELENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2NvbW11bml0aWVzL2NvbnRyb2xsZXJzL2VuaGFuY2VkLWNvbW11bml0eS5jb250cm9sbGVyLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb21wcmVoZW5zaXZlIFRlc3QgU3VpdGUgZm9yIEVuaGFuY2VkQ29tbXVuaXR5Q29udHJvbGxlclxuICogVGVzdHMgYWR2YW5jZWQgY29tbXVuaXR5IHNlYXJjaCwgZGlzY292ZXJ5LCBhbmQgbWFuYWdlbWVudCBmZWF0dXJlc1xuICovXG5cbmltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgSHR0cEV4Y2VwdGlvbiwgSHR0cFN0YXR1cywgVmFsaWRhdGlvblBpcGUgfSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBFbmhhbmNlZENvbW11bml0eUNvbnRyb2xsZXIgfSBmcm9tICcuL2VuaGFuY2VkLWNvbW11bml0eS5jb250cm9sbGVyJztcbmltcG9ydCB7IEVuaGFuY2VkQ29tbXVuaXR5U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2VuaGFuY2VkLWNvbW11bml0eS5zZXJ2aWNlJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uLy4uL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IFJvbGVCYXNlZEFjY2Vzc0d1YXJkIH0gZnJvbSAnLi4vLi4vYXV0aC9ndWFyZHMvcm9sZS1iYXNlZC1hY2Nlc3MuZ3VhcmQnO1xuaW1wb3J0IHsgU2VjdXJpdHlHdWFyZFRlc3RVdGlscywgUm9sZUJhc2VkVGVzdFV0aWxzIH0gZnJvbSAnLi4vLi4vdGVzdC11dGlscy9hdXRoLXRlc3RpbmctaGVscGVycyc7XG5pbXBvcnQgeyBNb2NrQnVpbGRlciwgVGVzdERhdGFHZW5lcmF0b3IsIFRlc3RBc3NlcnRpb25zIH0gZnJvbSAnLi4vLi4vdGVzdC11dGlscy9lbmhhbmNlZC10ZXN0LWhlbHBlcnMnO1xuaW1wb3J0IHsgVEVTVF9VU0VSX0lEUywgVEVTVF9FTUFJTFMgfSBmcm9tICcuLi8uLi90ZXN0LXV0aWxzL2luZGV4JztcblxuZGVzY3JpYmUoJ0VuaGFuY2VkQ29tbXVuaXR5Q29udHJvbGxlcicsICgpID0+IHtcbiAgbGV0IGNvbnRyb2xsZXI6IEVuaGFuY2VkQ29tbXVuaXR5Q29udHJvbGxlcjtcbiAgbGV0IGVuaGFuY2VkQ29tbXVuaXR5U2VydmljZTogRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlO1xuICBsZXQgbW9kdWxlOiBUZXN0aW5nTW9kdWxlO1xuXG4gIC8vIE1vY2sgRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlXG4gIGNvbnN0IG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2UgPSB7XG4gICAgc2VhcmNoQ29tbXVuaXRpZXM6IGplc3QuZm4oKSxcbiAgICBnZXRDb21tdW5pdHlEZXRhaWxzOiBqZXN0LmZuKCksXG4gICAgZ2V0VHJlbmRpbmdDb21tdW5pdGllczogamVzdC5mbigpLFxuICAgIGdldFNpbWlsYXJDb21tdW5pdGllczogamVzdC5mbigpLFxuICAgIC8vIFByaXNtYSBtb2NrIGZvciBkaXJlY3QgZGF0YWJhc2UgYWNjZXNzXG4gICAgcHJpc21hOiB7XG4gICAgICBtZW1iZXJzaGlwOiB7XG4gICAgICAgIGZpbmRNYW55OiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgICAgY29tbXVuaXR5OiB7XG4gICAgICAgIGNvdW50OiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgLy8gTW9jayBHdWFyZHNcbiAgY29uc3QgbW9ja0p3dEF1dGhHdWFyZCA9IHtcbiAgICBjYW5BY3RpdmF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKSxcbiAgfTtcblxuICBjb25zdCBtb2NrUm9sZUJhc2VkQWNjZXNzR3VhcmQgPSB7XG4gICAgY2FuQWN0aXZhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSksXG4gIH07XG5cbiAgLy8gVGVzdCBkYXRhXG4gIGNvbnN0IG1vY2tVc2VyID0ge1xuICAgIGlkOiBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICBlbWFpbDogVEVTVF9FTUFJTFMuQ0xJRU5ULFxuICAgIHJvbGU6ICdjbGllbnQnLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tDb21tdW5pdHkgPSB7XG4gICAgaWQ6ICdjb21tdW5pdHlfMTIzNDU2Nzg5JyxcbiAgICBuYW1lOiAnQW54aWV0eSBTdXBwb3J0IEdyb3VwJyxcbiAgICBzbHVnOiAnYW54aWV0eS1zdXBwb3J0LWdyb3VwJyxcbiAgICBkZXNjcmlwdGlvbjogJ0Egc3VwcG9ydGl2ZSBjb21tdW5pdHkgZm9yIHBlb3BsZSBkZWFsaW5nIHdpdGggYW54aWV0eScsXG4gICAgbWVtYmVyQ291bnQ6IDEyMzQsXG4gICAgaXNQcml2YXRlOiBmYWxzZSxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjAwOjAwWicpLFxuICAgIHJlY2VudEFjdGl2aXR5OiB7XG4gICAgICBsYXN0UG9zdEF0OiAnMjAyNC0wMi0xNFQwOTozMDowMFonLFxuICAgICAgcG9zdHNUaGlzV2VlazogMjMsXG4gICAgICBhY3RpdmVNZW1iZXJzOiA0NTYsXG4gICAgfSxcbiAgICBtZW1iZXJzaGlwU3RhdHVzOiAnbm9uZScsXG4gICAgY29tcGF0aWJpbGl0eToge1xuICAgICAgc2NvcmU6IDAuODUsXG4gICAgICByZWFzb25zOiBbJ0ludGVyZXN0IGluIGFueGlldHkgbWFuYWdlbWVudCcsICdTaW1pbGFyIGNvbW11bml0eSBwcmVmZXJlbmNlcyddLFxuICAgIH0sXG4gIH07XG5cbiAgY29uc3QgbW9ja1NlYXJjaFJlc3VsdHMgPSB7XG4gICAgY29tbXVuaXRpZXM6IFttb2NrQ29tbXVuaXR5XSxcbiAgICB0b3RhbDogMSxcbiAgICBwYWdlOiAxLFxuICAgIGxpbWl0OiAyMCxcbiAgICB0b3RhbFBhZ2VzOiAxLFxuICAgIGZhY2V0czoge1xuICAgICAgdGFnczogW1xuICAgICAgICB7IHRhZzogJ2FueGlldHknLCBjb3VudDogMTUgfSxcbiAgICAgICAgeyB0YWc6ICdzdXBwb3J0JywgY291bnQ6IDIzIH0sXG4gICAgICAgIHsgdGFnOiAndGhlcmFweScsIGNvdW50OiA4IH0sXG4gICAgICBdLFxuICAgICAgbWVtYmVyQ291bnRSYW5nZXM6IFtcbiAgICAgICAgeyByYW5nZTogJzAtMTAwJywgY291bnQ6IDUgfSxcbiAgICAgICAgeyByYW5nZTogJzEwMC01MDAnLCBjb3VudDogMTIgfSxcbiAgICAgICAgeyByYW5nZTogJzUwMCsnLCBjb3VudDogOCB9LFxuICAgICAgXSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0IG1vY2tDb21tdW5pdHlEZXRhaWxzID0ge1xuICAgIC4uLm1vY2tDb21tdW5pdHksXG4gICAgc3RhdHM6IHtcbiAgICAgIHRvdGFsUG9zdHM6IDQ1NixcbiAgICAgIHRvdGFsQ29tbWVudHM6IDEyMzQsXG4gICAgICBhY3RpdmVNZW1iZXJzOiAyMzQsXG4gICAgICByZWNlbnRBY3Rpdml0eToge1xuICAgICAgICBwb3N0c1RvZGF5OiA1LFxuICAgICAgICBwb3N0c1RoaXNXZWVrOiAyMyxcbiAgICAgICAgcG9zdHNUaGlzTW9udGg6IDg5LFxuICAgICAgfSxcbiAgICB9LFxuICAgIHJlY2VudFBvc3RzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAncG9zdF8xMjMnLFxuICAgICAgICB0aXRsZTogJ01hbmFnaW5nIFdvcmsgQW54aWV0eScsXG4gICAgICAgIGF1dGhvcjogJ0Fub255bW91cycsXG4gICAgICAgIGNyZWF0ZWRBdDogJzIwMjQtMDItMTRUMDg6MzA6MDBaJyxcbiAgICAgICAgbGlrZXNDb3VudDogMTUsXG4gICAgICAgIGNvbW1lbnRzQ291bnQ6IDgsXG4gICAgICB9LFxuICAgIF0sXG4gICAgdG9wQ29udHJpYnV0b3JzOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAndXNlcl80NTYnLFxuICAgICAgICBuYW1lOiAnU2FyYWggTS4nLFxuICAgICAgICBwb3N0c0NvdW50OiA0NSxcbiAgICAgICAgaGVscGZ1bFZvdGVzOiAxMjMsXG4gICAgICB9LFxuICAgIF0sXG4gICAgbW9kZXJhdG9yczogW1xuICAgICAge1xuICAgICAgICBpZDogJ21vZF83ODknLFxuICAgICAgICBuYW1lOiAnRHIuIEpvaG5zb24nLFxuICAgICAgICByb2xlOiAnbW9kZXJhdG9yJyxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBtZW1iZXJzaGlwU3RhdHVzOiAnbm9uZScsXG4gICAgdXNlclBlcm1pc3Npb25zOiB7XG4gICAgICBjYW5Qb3N0OiBmYWxzZSxcbiAgICAgIGNhbkNvbW1lbnQ6IGZhbHNlLFxuICAgICAgY2FuTW9kZXJhdGU6IGZhbHNlLFxuICAgIH0sXG4gIH07XG5cbiAgY29uc3QgbW9ja1RyZW5kaW5nQ29tbXVuaXRpZXMgPSBbXG4gICAge1xuICAgICAgLi4ubW9ja0NvbW11bml0eSxcbiAgICAgIHRyZW5kaW5nRGF0YToge1xuICAgICAgICBncm93dGhSYXRlOiAxNS4yLFxuICAgICAgICBhY3Rpdml0eVNjb3JlOiA4OS41LFxuICAgICAgICBlbmdhZ2VtZW50UmF0ZTogNzIuMyxcbiAgICAgICAgcmV0ZW50aW9uUmF0ZTogODUuNyxcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICBjb25zdCBtb2NrU2ltaWxhckNvbW11bml0aWVzID0gW1xuICAgIHtcbiAgICAgIGlkOiAnY29tbXVuaXR5X3NpbWlsYXJfMScsXG4gICAgICBuYW1lOiAnRGVwcmVzc2lvbiBTdXBwb3J0JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU3VwcG9ydCBmb3IgdGhvc2UgZGVhbGluZyB3aXRoIGRlcHJlc3Npb24nLFxuICAgICAgbWVtYmVyQ291bnQ6IDk4NyxcbiAgICAgIHNpbWlsYXJpdHlTY29yZTogMC43OCxcbiAgICAgIGNvbW1vblRhZ3M6IFsnc3VwcG9ydCcsICdtZW50YWwtaGVhbHRoJ10sXG4gICAgfSxcbiAgXTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBtb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgY29udHJvbGxlcnM6IFtFbmhhbmNlZENvbW11bml0eUNvbnRyb2xsZXJdLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBFbmhhbmNlZENvbW11bml0eVNlcnZpY2UsXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2UsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pXG4gICAgICAub3ZlcnJpZGVHdWFyZChKd3RBdXRoR3VhcmQpXG4gICAgICAudXNlVmFsdWUobW9ja0p3dEF1dGhHdWFyZClcbiAgICAgIC5vdmVycmlkZUd1YXJkKFJvbGVCYXNlZEFjY2Vzc0d1YXJkKVxuICAgICAgLnVzZVZhbHVlKG1vY2tSb2xlQmFzZWRBY2Nlc3NHdWFyZClcbiAgICAgIC5jb21waWxlKCk7XG5cbiAgICBjb250cm9sbGVyID0gbW9kdWxlLmdldDxFbmhhbmNlZENvbW11bml0eUNvbnRyb2xsZXI+KEVuaGFuY2VkQ29tbXVuaXR5Q29udHJvbGxlcik7XG4gICAgZW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlID0gbW9kdWxlLmdldDxFbmhhbmNlZENvbW11bml0eVNlcnZpY2U+KEVuaGFuY2VkQ29tbXVuaXR5U2VydmljZSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb250cm9sbGVyIEluaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYmUgZGVmaW5lZCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChjb250cm9sbGVyKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGVuaGFuY2VkQ29tbXVuaXR5U2VydmljZSBpbmplY3RlZCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChlbmhhbmNlZENvbW11bml0eVNlcnZpY2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZWN1cml0eSBHdWFyZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBiZSBwcm90ZWN0ZWQgYnkgSnd0QXV0aEd1YXJkIGFuZCBSb2xlQmFzZWRBY2Nlc3NHdWFyZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGd1YXJkcyA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoJ19fZ3VhcmRzX18nLCBFbmhhbmNlZENvbW11bml0eUNvbnRyb2xsZXIpO1xuICAgICAgZXhwZWN0KGd1YXJkcykudG9Db250YWluKEp3dEF1dGhHdWFyZCk7XG4gICAgICBleHBlY3QoZ3VhcmRzKS50b0NvbnRhaW4oUm9sZUJhc2VkQWNjZXNzR3VhcmQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciByb3V0ZSBkZWNvcmF0b3JzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29udHJvbGxlck1ldGFkYXRhID0gUmVmbGVjdC5nZXRNZXRhZGF0YSgncGF0aCcsIEVuaGFuY2VkQ29tbXVuaXR5Q29udHJvbGxlcik7XG4gICAgICBleHBlY3QoY29udHJvbGxlck1ldGFkYXRhKS50b0JlKCdjb21tdW5pdGllcy9lbmhhbmNlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBtdWx0aXBsZSByb2xlcyBmb3IgYWxsIGVuZHBvaW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFsbG93ZWRSb2xlcyA9IFsnY2xpZW50JywgJ3RoZXJhcGlzdCcsICdtb2RlcmF0b3InLCAnYWRtaW4nXTtcbiAgICAgIGNvbnN0IG1ldGhvZHMgPSBbJ3NlYXJjaENvbW11bml0aWVzJywgJ2dldENvbW11bml0eURldGFpbHMnLCAnZ2V0VHJlbmRpbmdDb21tdW5pdGllcycsICdnZXRTaW1pbGFyQ29tbXVuaXRpZXMnXTtcbiAgICAgIFxuICAgICAgbWV0aG9kcy5mb3JFYWNoKG1ldGhvZCA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gUmVmbGVjdC5nZXRNZXRhZGF0YSgncm9sZXMnLCBjb250cm9sbGVyW21ldGhvZF0pO1xuICAgICAgICBleHBlY3QobWV0YWRhdGEpLnRvRXF1YWwoYWxsb3dlZFJvbGVzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9jb21tdW5pdGllcy9lbmhhbmNlZC9zZWFyY2gnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRTZWFyY2hRdWVyeSA9IHtcbiAgICAgIHF1ZXJ5OiAnYW54aWV0eScsXG4gICAgICB0YWdzOiBbJ3N1cHBvcnQnLCAndGhlcmFweSddLFxuICAgICAgbWluTWVtYmVyczogMTAwLFxuICAgICAgbWF4TWVtYmVyczogMjAwMCxcbiAgICAgIHNvcnRCeTogJ3JlbGV2YW5jZScgYXMgY29uc3QsXG4gICAgICBzb3J0T3JkZXI6ICdkZXNjJyBhcyBjb25zdCxcbiAgICAgIGhhc0Rlc2NyaXB0aW9uOiB0cnVlLFxuICAgICAgaGFzSW1hZ2U6IGZhbHNlLFxuICAgICAgbWVtYmVyc2hpcFJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIHBhZ2U6IDEsXG4gICAgICBsaW1pdDogMjAsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgc2VhcmNoIGNvbW11bml0aWVzIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2Uuc2VhcmNoQ29tbXVuaXRpZXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1NlYXJjaFJlc3VsdHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnNlYXJjaENvbW11bml0aWVzKHZhbGlkU2VhcmNoUXVlcnksIG1vY2tVc2VyKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0VxdWFsKG1vY2tTZWFyY2hSZXN1bHRzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9Db250YWluKCdzdWNjZXNzZnVsbHknKTtcbiAgICAgIGV4cGVjdChlbmhhbmNlZENvbW11bml0eVNlcnZpY2Uuc2VhcmNoQ29tbXVuaXRpZXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICB7XG4gICAgICAgICAgcXVlcnk6IHZhbGlkU2VhcmNoUXVlcnkucXVlcnksXG4gICAgICAgICAgdGFnczogdmFsaWRTZWFyY2hRdWVyeS50YWdzLFxuICAgICAgICAgIG1pbk1lbWJlcnM6IHZhbGlkU2VhcmNoUXVlcnkubWluTWVtYmVycyxcbiAgICAgICAgICBtYXhNZW1iZXJzOiB2YWxpZFNlYXJjaFF1ZXJ5Lm1heE1lbWJlcnMsXG4gICAgICAgICAgc29ydEJ5OiB2YWxpZFNlYXJjaFF1ZXJ5LnNvcnRCeSxcbiAgICAgICAgICBzb3J0T3JkZXI6IHZhbGlkU2VhcmNoUXVlcnkuc29ydE9yZGVyLFxuICAgICAgICAgIGhhc0Rlc2NyaXB0aW9uOiB2YWxpZFNlYXJjaFF1ZXJ5Lmhhc0Rlc2NyaXB0aW9uLFxuICAgICAgICAgIGhhc0ltYWdlOiB2YWxpZFNlYXJjaFF1ZXJ5Lmhhc0ltYWdlLFxuICAgICAgICAgIG1lbWJlcnNoaXBSZXF1aXJlZDogdmFsaWRTZWFyY2hRdWVyeS5tZW1iZXJzaGlwUmVxdWlyZWQsXG4gICAgICAgIH0sXG4gICAgICAgIG1vY2tVc2VyLmlkLFxuICAgICAgICB2YWxpZFNlYXJjaFF1ZXJ5LnBhZ2UsXG4gICAgICAgIHZhbGlkU2VhcmNoUXVlcnkubGltaXRcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBzZWFyY2ggcXVlcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlbXB0eVF1ZXJ5ID0geyBwYWdlOiAxLCBsaW1pdDogMjAgfTtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2Uuc2VhcmNoQ29tbXVuaXRpZXMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAuLi5tb2NrU2VhcmNoUmVzdWx0cyxcbiAgICAgICAgY29tbXVuaXRpZXM6IFtdLFxuICAgICAgICB0b3RhbDogMCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnNlYXJjaENvbW11bml0aWVzKGVtcHR5UXVlcnksIG1vY2tVc2VyKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmNvbW11bml0aWVzKS50b0VxdWFsKFtdKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50b3RhbCkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdTZWFyY2ggc2VydmljZSB1bmF2YWlsYWJsZScpO1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5zZWFyY2hDb21tdW5pdGllcy5tb2NrUmVqZWN0ZWRWYWx1ZShzZXJ2aWNlRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIuc2VhcmNoQ29tbXVuaXRpZXModmFsaWRTZWFyY2hRdWVyeSwgbW9ja1VzZXIpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhzZXJ2aWNlRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBzZWFyY2ggZmFjZXRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5zZWFyY2hDb21tdW5pdGllcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU2VhcmNoUmVzdWx0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuc2VhcmNoQ29tbXVuaXRpZXModmFsaWRTZWFyY2hRdWVyeSwgbW9ja1VzZXIpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEuZmFjZXRzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmZhY2V0cy50YWdzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LmRhdGEuZmFjZXRzLnRhZ3MpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmZhY2V0cy5tZW1iZXJDb3VudFJhbmdlcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5kYXRhLmZhY2V0cy5tZW1iZXJDb3VudFJhbmdlcykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkaWZmZXJlbnQgc29ydGluZyBvcHRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc29ydEJ5TWVtYmVycyA9IHsgLi4udmFsaWRTZWFyY2hRdWVyeSwgc29ydEJ5OiAnbWVtYmVycycgYXMgY29uc3QgfTtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2Uuc2VhcmNoQ29tbXVuaXRpZXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1NlYXJjaFJlc3VsdHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnNlYXJjaENvbW11bml0aWVzKHNvcnRCeU1lbWJlcnMsIG1vY2tVc2VyKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGVuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5zZWFyY2hDb21tdW5pdGllcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgc29ydEJ5OiAnbWVtYmVycycgfSksXG4gICAgICAgIG1vY2tVc2VyLmlkLFxuICAgICAgICAxLFxuICAgICAgICAyMFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvY29tbXVuaXRpZXMvZW5oYW5jZWQvOmNvbW11bml0eUlkL2RldGFpbHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgY29tbXVuaXR5IGRldGFpbHMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRDb21tdW5pdHlEZXRhaWxzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb21tdW5pdHlEZXRhaWxzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRDb21tdW5pdHlEZXRhaWxzKCdjb21tdW5pdHlfMTIzNDU2Nzg5JywgbW9ja1VzZXIpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvRXF1YWwobW9ja0NvbW11bml0eURldGFpbHMpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlKS50b0NvbnRhaW4oJ3N1Y2Nlc3NmdWxseScpO1xuICAgICAgZXhwZWN0KGVuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRDb21tdW5pdHlEZXRhaWxzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ2NvbW11bml0eV8xMjM0NTY3ODknLFxuICAgICAgICBtb2NrVXNlci5pZFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5vbi1leGlzdGVudCBjb21tdW5pdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBub3RGb3VuZEVycm9yID0gbmV3IEVycm9yKCdDb21tdW5pdHkgbm90IGZvdW5kJyk7XG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLmdldENvbW11bml0eURldGFpbHMubW9ja1JlamVjdGVkVmFsdWUobm90Rm91bmRFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRDb21tdW5pdHlEZXRhaWxzKCdub25leGlzdGVudF9jb21tdW5pdHknLCBtb2NrVXNlcilcbiAgICAgICkucmVqZWN0cy50b1Rocm93KG5vdEZvdW5kRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjb21tdW5pdHkgZGV0YWlscyBzdHJ1Y3R1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLmdldENvbW11bml0eURldGFpbHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbW11bml0eURldGFpbHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldENvbW11bml0eURldGFpbHMoJ2NvbW11bml0eV8xMjM0NTY3ODknLCBtb2NrVXNlcik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9IYXZlUHJvcGVydHkoJ2lkJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCduYW1lJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCdzdGF0cycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVQcm9wZXJ0eSgncmVjZW50UG9zdHMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9IYXZlUHJvcGVydHkoJ3RvcENvbnRyaWJ1dG9ycycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVQcm9wZXJ0eSgnbW9kZXJhdG9ycycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVQcm9wZXJ0eSgnbWVtYmVyc2hpcFN0YXR1cycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVQcm9wZXJ0eSgndXNlclBlcm1pc3Npb25zJyk7XG5cbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5kYXRhLnJlY2VudFBvc3RzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5kYXRhLnRvcENvbnRyaWJ1dG9ycykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQuZGF0YS5tb2RlcmF0b3JzKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvY29tbXVuaXRpZXMvZW5oYW5jZWQvdHJlbmRpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgdHJlbmRpbmcgY29tbXVuaXRpZXMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRUcmVuZGluZ0NvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUcmVuZGluZ0NvbW11bml0aWVzKTtcblxuICAgICAgY29uc3QgcXVlcnkgPSB7IGxpbWl0OiAxMCwgdGltZWZyYW1lOiAnd2VlaycgYXMgY29uc3QgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VHJlbmRpbmdDb21tdW5pdGllcyhxdWVyeSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9FcXVhbChtb2NrVHJlbmRpbmdDb21tdW5pdGllcyk7XG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQ29udGFpbignc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICBleHBlY3QoZW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLmdldFRyZW5kaW5nQ29tbXVuaXRpZXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDEwLCAnd2VlaycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGVmYXVsdCBwYXJhbWV0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRUcmVuZGluZ0NvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUcmVuZGluZ0NvbW11bml0aWVzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRUcmVuZGluZ0NvbW11bml0aWVzKHt9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGVuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRUcmVuZGluZ0NvbW11bml0aWVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgxMCwgJ3dlZWsnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCB0aW1lZnJhbWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRUcmVuZGluZ0NvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUcmVuZGluZ0NvbW11bml0aWVzKTtcblxuICAgICAgY29uc3QgbW9udGhRdWVyeSA9IHsgbGltaXQ6IDE1LCB0aW1lZnJhbWU6ICdtb250aCcgYXMgY29uc3QgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VHJlbmRpbmdDb21tdW5pdGllcyhtb250aFF1ZXJ5KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGVuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRUcmVuZGluZ0NvbW11bml0aWVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgxNSwgJ21vbnRoJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHRyZW5kaW5nIGRhdGEgc3RydWN0dXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRUcmVuZGluZ0NvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUcmVuZGluZ0NvbW11bml0aWVzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRUcmVuZGluZ0NvbW11bml0aWVzKHsgbGltaXQ6IDUgfSk7XG5cbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5kYXRhKSkudG9CZSh0cnVlKTtcbiAgICAgIHJlc3VsdC5kYXRhLmZvckVhY2goY29tbXVuaXR5ID0+IHtcbiAgICAgICAgZXhwZWN0KGNvbW11bml0eSkudG9IYXZlUHJvcGVydHkoJ2lkJyk7XG4gICAgICAgIGV4cGVjdChjb21tdW5pdHkpLnRvSGF2ZVByb3BlcnR5KCduYW1lJyk7XG4gICAgICAgIGV4cGVjdChjb21tdW5pdHkpLnRvSGF2ZVByb3BlcnR5KCdtZW1iZXJDb3VudCcpO1xuICAgICAgICBleHBlY3QoY29tbXVuaXR5KS50b0hhdmVQcm9wZXJ0eSgndHJlbmRpbmdEYXRhJyk7XG4gICAgICAgIGV4cGVjdChjb21tdW5pdHkudHJlbmRpbmdEYXRhKS50b0hhdmVQcm9wZXJ0eSgnZ3Jvd3RoUmF0ZScpO1xuICAgICAgICBleHBlY3QoY29tbXVuaXR5LnRyZW5kaW5nRGF0YSkudG9IYXZlUHJvcGVydHkoJ2FjdGl2aXR5U2NvcmUnKTtcbiAgICAgICAgZXhwZWN0KGNvbW11bml0eS50cmVuZGluZ0RhdGEpLnRvSGF2ZVByb3BlcnR5KCdlbmdhZ2VtZW50UmF0ZScpO1xuICAgICAgICBleHBlY3QodHlwZW9mIGNvbW11bml0eS50cmVuZGluZ0RhdGEuZ3Jvd3RoUmF0ZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvY29tbXVuaXRpZXMvZW5oYW5jZWQvOmNvbW11bml0eUlkL3NpbWlsYXInLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgc2ltaWxhciBjb21tdW5pdGllcyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLmdldFNpbWlsYXJDb21tdW5pdGllcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU2ltaWxhckNvbW11bml0aWVzKTtcblxuICAgICAgY29uc3QgcXVlcnkgPSB7IGV4Y2x1ZGVKb2luZWQ6IHRydWUsIG1heFJlc3VsdHM6IDUgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0U2ltaWxhckNvbW11bml0aWVzKCdjb21tdW5pdHlfMTIzNDU2Nzg5JywgcXVlcnksIG1vY2tVc2VyKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0VxdWFsKG1vY2tTaW1pbGFyQ29tbXVuaXRpZXMpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlKS50b0NvbnRhaW4oJ3N1Y2Nlc3NmdWxseScpO1xuICAgICAgZXhwZWN0KGVuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRTaW1pbGFyQ29tbXVuaXRpZXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnY29tbXVuaXR5XzEyMzQ1Njc4OScsXG4gICAgICAgIHtcbiAgICAgICAgICB1c2VySWQ6IG1vY2tVc2VyLmlkLFxuICAgICAgICAgIGV4Y2x1ZGVKb2luZWQ6IHRydWUsXG4gICAgICAgICAgbWF4UmVzdWx0czogNSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRlZmF1bHQgcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2UuZ2V0U2ltaWxhckNvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tTaW1pbGFyQ29tbXVuaXRpZXMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFNpbWlsYXJDb21tdW5pdGllcygnY29tbXVuaXR5XzEyMzQ1Njc4OScsIHt9LCBtb2NrVXNlcik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChlbmhhbmNlZENvbW11bml0eVNlcnZpY2UuZ2V0U2ltaWxhckNvbW11bml0aWVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ2NvbW11bml0eV8xMjM0NTY3ODknLFxuICAgICAgICB7XG4gICAgICAgICAgdXNlcklkOiBtb2NrVXNlci5pZCxcbiAgICAgICAgICBleGNsdWRlSm9pbmVkOiB0cnVlLFxuICAgICAgICAgIG1heFJlc3VsdHM6IDUsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHNpbWlsYXIgY29tbXVuaXRpZXMgc3RydWN0dXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRTaW1pbGFyQ29tbXVuaXRpZXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1NpbWlsYXJDb21tdW5pdGllcyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0U2ltaWxhckNvbW11bml0aWVzKCdjb21tdW5pdHlfMTIzNDU2Nzg5Jywge30sIG1vY2tVc2VyKTtcblxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LmRhdGEpKS50b0JlKHRydWUpO1xuICAgICAgcmVzdWx0LmRhdGEuZm9yRWFjaChjb21tdW5pdHkgPT4ge1xuICAgICAgICBleHBlY3QoY29tbXVuaXR5KS50b0hhdmVQcm9wZXJ0eSgnaWQnKTtcbiAgICAgICAgZXhwZWN0KGNvbW11bml0eSkudG9IYXZlUHJvcGVydHkoJ25hbWUnKTtcbiAgICAgICAgZXhwZWN0KGNvbW11bml0eSkudG9IYXZlUHJvcGVydHkoJ21lbWJlckNvdW50Jyk7XG4gICAgICAgIGV4cGVjdChjb21tdW5pdHkpLnRvSGF2ZVByb3BlcnR5KCdzaW1pbGFyaXR5U2NvcmUnKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBjb21tdW5pdHkuc2ltaWxhcml0eVNjb3JlKS50b0JlKCdudW1iZXInKTtcbiAgICAgICAgZXhwZWN0KGNvbW11bml0eS5zaW1pbGFyaXR5U2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICAgIGV4cGVjdChjb21tdW5pdHkuc2ltaWxhcml0eVNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2NvbW11bml0aWVzL2VuaGFuY2VkL2Rpc2NvdmVyJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzY292ZXIgY29tbXVuaXRpZXMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRUcmVuZGluZ0NvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUcmVuZGluZ0NvbW11bml0aWVzKTtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2UucHJpc21hLm1lbWJlcnNoaXAuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmRpc2NvdmVyQ29tbXVuaXRpZXMobW9ja1VzZXIsIDEwKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0VxdWFsKG1vY2tUcmVuZGluZ0NvbW11bml0aWVzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9Db250YWluKCdzdWNjZXNzZnVsbHknKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIG91dCB1c2VyIGpvaW5lZCBjb21tdW5pdGllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJNZW1iZXJzaGlwcyA9IFt7IGNvbW11bml0eUlkOiBtb2NrQ29tbXVuaXR5LmlkIH1dO1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRUcmVuZGluZ0NvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUcmVuZGluZ0NvbW11bml0aWVzKTtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2UucHJpc21hLm1lbWJlcnNoaXAuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWUodXNlck1lbWJlcnNoaXBzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5kaXNjb3ZlckNvbW11bml0aWVzKG1vY2tVc2VyLCAxMCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9FcXVhbChbXSk7IC8vIFNob3VsZCBiZSBmaWx0ZXJlZCBvdXRcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRlZmF1bHQgbGltaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLmdldFRyZW5kaW5nQ29tbXVuaXRpZXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RyZW5kaW5nQ29tbXVuaXRpZXMpO1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5wcmlzbWEubWVtYmVyc2hpcC5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZGlzY292ZXJDb21tdW5pdGllcyhtb2NrVXNlcik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChlbmhhbmNlZENvbW11bml0eVNlcnZpY2UuZ2V0VHJlbmRpbmdDb21tdW5pdGllcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMTAsICd3ZWVrJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2NvbW11bml0aWVzL2VuaGFuY2VkL2NhdGVnb3JpZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgY29tbXVuaXR5IGNhdGVnb3JpZXMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5wcmlzbWEuY29tbXVuaXR5LmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlKDUpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldENvbW11bml0eUNhdGVnb3JpZXMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlKS50b0NvbnRhaW4oJ3N1Y2Nlc3NmdWxseScpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LmRhdGEpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjYXRlZ29yaWVzIHN0cnVjdHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2UucHJpc21hLmNvbW11bml0eS5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRDb21tdW5pdHlDYXRlZ29yaWVzKCk7XG5cbiAgICAgIHJlc3VsdC5kYXRhLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgICAgICBleHBlY3QoY2F0ZWdvcnkpLnRvSGF2ZVByb3BlcnR5KCdpZCcpO1xuICAgICAgICBleHBlY3QoY2F0ZWdvcnkpLnRvSGF2ZVByb3BlcnR5KCduYW1lJyk7XG4gICAgICAgIGV4cGVjdChjYXRlZ29yeSkudG9IYXZlUHJvcGVydHkoJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICAgIGV4cGVjdChjYXRlZ29yeSkudG9IYXZlUHJvcGVydHkoJ2ljb24nKTtcbiAgICAgICAgZXhwZWN0KGNhdGVnb3J5KS50b0hhdmVQcm9wZXJ0eSgnY29tbXVuaXR5Q291bnQnKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBjYXRlZ29yeS5jb21tdW5pdHlDb3VudCkudG9CZSgnbnVtYmVyJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSBwcmVkZWZpbmVkIGNhdGVnb3JpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLnByaXNtYS5jb21tdW5pdHkuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMik7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Q29tbXVuaXR5Q2F0ZWdvcmllcygpO1xuXG4gICAgICBjb25zdCBjYXRlZ29yeUlkcyA9IHJlc3VsdC5kYXRhLm1hcChjYXQgPT4gY2F0LmlkKTtcbiAgICAgIGV4cGVjdChjYXRlZ29yeUlkcykudG9Db250YWluKCdkZXByZXNzaW9uJyk7XG4gICAgICBleHBlY3QoY2F0ZWdvcnlJZHMpLnRvQ29udGFpbignYW54aWV0eScpO1xuICAgICAgZXhwZWN0KGNhdGVnb3J5SWRzKS50b0NvbnRhaW4oJ3RyYXVtYScpO1xuICAgICAgZXhwZWN0KGNhdGVnb3J5SWRzKS50b0NvbnRhaW4oJ2dlbmVyYWwnKTtcbiAgICAgIGV4cGVjdChjYXRlZ29yeUlkcykudG9Db250YWluKCd3ZWxsbmVzcycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9jb21tdW5pdGllcy9lbmhhbmNlZC9wb3B1bGFyJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2V0IHBvcHVsYXIgY29tbXVuaXRpZXMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5zZWFyY2hDb21tdW5pdGllcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU2VhcmNoUmVzdWx0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UG9wdWxhckNvbW11bml0aWVzKG1vY2tVc2VyLCAxMCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9FcXVhbChtb2NrU2VhcmNoUmVzdWx0cy5jb21tdW5pdGllcyk7XG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQ29udGFpbignc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICBleHBlY3QoZW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLnNlYXJjaENvbW11bml0aWVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAge1xuICAgICAgICAgIHNvcnRCeTogJ21lbWJlcnMnLFxuICAgICAgICAgIHNvcnRPcmRlcjogJ2Rlc2MnLFxuICAgICAgICB9LFxuICAgICAgICBtb2NrVXNlci5pZCxcbiAgICAgICAgMSxcbiAgICAgICAgMTBcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkZWZhdWx0IGxpbWl0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5zZWFyY2hDb21tdW5pdGllcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU2VhcmNoUmVzdWx0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0UG9wdWxhckNvbW11bml0aWVzKG1vY2tVc2VyKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGVuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5zZWFyY2hDb21tdW5pdGllcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgbW9ja1VzZXIuaWQsXG4gICAgICAgIDEsXG4gICAgICAgIDEwXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVzcG9uc2UgRm9ybWF0IFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvcGVybHkgZm9ybWF0dGVkIHNlYXJjaCByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2Uuc2VhcmNoQ29tbXVuaXRpZXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1NlYXJjaFJlc3VsdHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnNlYXJjaENvbW11bml0aWVzKHsgcXVlcnk6ICd0ZXN0JyB9LCBtb2NrVXNlcik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdWNjZXNzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnZGF0YScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ21lc3NhZ2UnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9IYXZlUHJvcGVydHkoJ2NvbW11bml0aWVzJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVQcm9wZXJ0eSgnZmFjZXRzJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQuZGF0YS5jb21tdW5pdGllcykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBwcm9wZXJseSBmb3JtYXR0ZWQgY29tbXVuaXR5IGRldGFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLmdldENvbW11bml0eURldGFpbHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbW11bml0eURldGFpbHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldENvbW11bml0eURldGFpbHMoJ2NvbW11bml0eV8xMjMnLCBtb2NrVXNlcik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdWNjZXNzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnZGF0YScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ21lc3NhZ2UnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9IYXZlUHJvcGVydHkoJ3N0YXRzJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCdyZWNlbnRQb3N0cycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVQcm9wZXJ0eSgndXNlclBlcm1pc3Npb25zJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBwcm9wZXJseSBmb3JtYXR0ZWQgdHJlbmRpbmcgY29tbXVuaXRpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLmdldFRyZW5kaW5nQ29tbXVuaXRpZXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RyZW5kaW5nQ29tbXVuaXRpZXMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFRyZW5kaW5nQ29tbXVuaXRpZXMoe30pO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnc3VjY2VzcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2RhdGEnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdtZXNzYWdlJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQuZGF0YSkpLnRvQmUodHJ1ZSk7XG4gICAgICByZXN1bHQuZGF0YS5mb3JFYWNoKGNvbW11bml0eSA9PiB7XG4gICAgICAgIGV4cGVjdChjb21tdW5pdHkpLnRvSGF2ZVByb3BlcnR5KCd0cmVuZGluZ0RhdGEnKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBjb21tdW5pdHkudHJlbmRpbmdEYXRhLmdyb3d0aFJhdGUpLnRvQmUoJ251bWJlcicpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIHVuYXZhaWxhYmxlIHNjZW5hcmlvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2VFcnJvciA9IG5ldyBFcnJvcignRW5oYW5jZWQgY29tbXVuaXR5IHNlcnZpY2UgdW5hdmFpbGFibGUnKTtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2Uuc2VhcmNoQ29tbXVuaXRpZXMubW9ja1JlamVjdGVkVmFsdWUoc2VydmljZUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLnNlYXJjaENvbW11bml0aWVzKHsgcXVlcnk6ICd0ZXN0JyB9LCBtb2NrVXNlcilcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHNlcnZpY2VFcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBjb25uZWN0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLmdldENvbW11bml0eURldGFpbHMubW9ja1JlamVjdGVkVmFsdWUoZGJFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRDb21tdW5pdHlEZXRhaWxzKCdjb21tdW5pdHlfMTIzJywgbW9ja1VzZXIpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhkYkVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgY29tbXVuaXR5IElEcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRJZEVycm9yID0gbmV3IEVycm9yKCdJbnZhbGlkIGNvbW11bml0eSBJRCBmb3JtYXQnKTtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2UuZ2V0Q29tbXVuaXR5RGV0YWlscy5tb2NrUmVqZWN0ZWRWYWx1ZShpbnZhbGlkSWRFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRDb21tdW5pdHlEZXRhaWxzKCdpbnZhbGlkLWlkJywgbW9ja1VzZXIpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhpbnZhbGlkSWRFcnJvcik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiBUZXN0cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZSBjb21tdW5pdHkgZGlzY292ZXJ5IHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2VhcmNoIGNvbW11bml0aWVzXG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLnNlYXJjaENvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tTZWFyY2hSZXN1bHRzKTtcbiAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuc2VhcmNoQ29tbXVuaXRpZXMoeyBxdWVyeTogJ2FueGlldHknIH0sIG1vY2tVc2VyKTtcbiAgICAgIGV4cGVjdChzZWFyY2hSZXN1bHQuZGF0YS5jb21tdW5pdGllcykudG9IYXZlTGVuZ3RoKDEpO1xuXG4gICAgICAvLyBHZXQgY29tbXVuaXR5IGRldGFpbHNcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2UuZ2V0Q29tbXVuaXR5RGV0YWlscy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ29tbXVuaXR5RGV0YWlscyk7XG4gICAgICBjb25zdCBkZXRhaWxzUmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRDb21tdW5pdHlEZXRhaWxzKHNlYXJjaFJlc3VsdC5kYXRhLmNvbW11bml0aWVzWzBdLmlkLCBtb2NrVXNlcik7XG4gICAgICBleHBlY3QoZGV0YWlsc1Jlc3VsdC5kYXRhLmlkKS50b0JlKHNlYXJjaFJlc3VsdC5kYXRhLmNvbW11bml0aWVzWzBdLmlkKTtcblxuICAgICAgLy8gR2V0IHNpbWlsYXIgY29tbXVuaXRpZXNcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2UuZ2V0U2ltaWxhckNvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tTaW1pbGFyQ29tbXVuaXRpZXMpO1xuICAgICAgY29uc3Qgc2ltaWxhclJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0U2ltaWxhckNvbW11bml0aWVzKHNlYXJjaFJlc3VsdC5kYXRhLmNvbW11bml0aWVzWzBdLmlkLCB7fSwgbW9ja1VzZXIpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc2ltaWxhclJlc3VsdC5kYXRhKSkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gR2V0IHRyZW5kaW5nIGNvbW11bml0aWVzXG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLmdldFRyZW5kaW5nQ29tbXVuaXRpZXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RyZW5kaW5nQ29tbXVuaXRpZXMpO1xuICAgICAgY29uc3QgdHJlbmRpbmdSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFRyZW5kaW5nQ29tbXVuaXRpZXMoe30pO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkodHJlbmRpbmdSZXN1bHQuZGF0YSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHJvbGUtYmFzZWQgYWNjZXNzIGFjcm9zcyBhbGwgZW5kcG9pbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBzdWNjZXNzZnVsIHJlc3BvbnNlc1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5zZWFyY2hDb21tdW5pdGllcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU2VhcmNoUmVzdWx0cyk7XG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLmdldENvbW11bml0eURldGFpbHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbW11bml0eURldGFpbHMpO1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5nZXRUcmVuZGluZ0NvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUcmVuZGluZ0NvbW11bml0aWVzKTtcbiAgICAgIG1vY2tFbmhhbmNlZENvbW11bml0eVNlcnZpY2UuZ2V0U2ltaWxhckNvbW11bml0aWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tTaW1pbGFyQ29tbXVuaXRpZXMpO1xuICAgICAgbW9ja0VuaGFuY2VkQ29tbXVuaXR5U2VydmljZS5wcmlzbWEubWVtYmVyc2hpcC5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG4gICAgICBtb2NrRW5oYW5jZWRDb21tdW5pdHlTZXJ2aWNlLnByaXNtYS5jb21tdW5pdHkuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoNSk7XG5cbiAgICAgIC8vIEFsbCBlbmRwb2ludHMgc2hvdWxkIGJlIGFjY2Vzc2libGUgZm9yIGFsbCBhbGxvd2VkIHJvbGVzXG4gICAgICBjb25zdCBlbmRwb2ludHMgPSBbXG4gICAgICAgICgpID0+IGNvbnRyb2xsZXIuc2VhcmNoQ29tbXVuaXRpZXMoe30sIG1vY2tVc2VyKSxcbiAgICAgICAgKCkgPT4gY29udHJvbGxlci5nZXRDb21tdW5pdHlEZXRhaWxzKCdjb21tdW5pdHlfMTIzJywgbW9ja1VzZXIpLFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmdldFRyZW5kaW5nQ29tbXVuaXRpZXMoe30pLFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmdldFNpbWlsYXJDb21tdW5pdGllcygnY29tbXVuaXR5XzEyMycsIHt9LCBtb2NrVXNlciksXG4gICAgICAgICgpID0+IGNvbnRyb2xsZXIuZGlzY292ZXJDb21tdW5pdGllcyhtb2NrVXNlciksXG4gICAgICAgICgpID0+IGNvbnRyb2xsZXIuZ2V0Q29tbXVuaXR5Q2F0ZWdvcmllcygpLFxuICAgICAgICAoKSA9PiBjb250cm9sbGVyLmdldFBvcHVsYXJDb21tdW5pdGllcyhtb2NrVXNlciksXG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IGVuZHBvaW50IG9mIGVuZHBvaW50cykge1xuICAgICAgICBhd2FpdCBleHBlY3QoZW5kcG9pbnQoKSkucmVzb2x2ZXMudG9CZURlZmluZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=