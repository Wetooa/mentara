98911f823778f2b518e84be4689e865f
"use strict";
/**
 * Comprehensive Test Suite for TherapistProfileController
 * Tests all therapist profile management endpoints with security, validation, and error handling
 */
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const jwt_auth_guard_1 = require("../../auth/guards/jwt-auth.guard");
const therapist_profile_controller_1 = require("./therapist-profile.controller");
const therapist_management_service_1 = require("../therapist-management.service");
const enhanced_test_helpers_1 = require("../../test-utils/enhanced-test-helpers");
const index_1 = require("../../test-utils/index");
describe('TherapistProfileController', () => {
    let controller;
    let therapistManagementService;
    let module;
    // Mock TherapistManagementService
    const mockTherapistManagementService = {
        getTherapistProfile: jest.fn(),
        updateTherapistProfile: jest.fn(),
    };
    // Mock JwtAuthGuard
    const mockJwtAuthGuard = {
        canActivate: jest.fn().mockReturnValue(true),
    };
    // Test data
    const mockTherapistProfile = {
        id: index_1.TEST_USER_IDS.THERAPIST,
        userId: index_1.TEST_USER_IDS.THERAPIST,
        email: index_1.TEST_EMAILS.THERAPIST,
        firstName: 'Dr. Jane',
        lastName: 'Smith',
        bio: 'Experienced therapist specializing in anxiety and depression',
        providerType: 'Licensed Clinical Psychologist',
        professionalLicenseType: 'LCP',
        isPRCLicensed: true,
        prcLicenseNumber: 'LCP-12345',
        practiceStartDate: new Date('2020-01-01'),
        areasOfExpertise: ['anxiety', 'depression', 'trauma'],
        therapeuticApproachesUsedList: ['CBT', 'DBT', 'EMDR'],
        languagesOffered: ['English', 'Spanish'],
        assessmentTools: ['GAD-7', 'PHQ-9', 'PCL-5'],
        hourlyRate: 150.0,
        isActive: true,
        emailVerified: true,
        availableForNewClients: true,
        maxClientsPerWeek: 20,
        preferredSessionLength: 60,
        createdAt: new Date(),
        updatedAt: new Date(),
    };
    const mockProfileUpdateData = {
        bio: 'Updated bio with new information',
        hourlyRate: 175.0,
        availableForNewClients: false,
        maxClientsPerWeek: 15,
        preferredSessionLength: 90,
    };
    const mockSpecializationsUpdateData = {
        areasOfExpertise: ['anxiety', 'depression', 'trauma', 'addiction'],
        therapeuticApproachesUsedList: ['CBT', 'DBT', 'EMDR', 'ACT'],
        assessmentTools: ['GAD-7', 'PHQ-9', 'PCL-5', 'AUDIT'],
    };
    beforeEach(async () => {
        module = await testing_1.Test.createTestingModule({
            controllers: [therapist_profile_controller_1.TherapistProfileController],
            providers: [
                {
                    provide: therapist_management_service_1.TherapistManagementService,
                    useValue: mockTherapistManagementService,
                },
            ],
        })
            .overrideGuard(jwt_auth_guard_1.JwtAuthGuard)
            .useValue(mockJwtAuthGuard)
            .compile();
        controller = module.get(therapist_profile_controller_1.TherapistProfileController);
        therapistManagementService = module.get(therapist_management_service_1.TherapistManagementService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('Controller Initialization', () => {
        it('should be defined', () => {
            expect(controller).toBeDefined();
        });
        it('should have therapistManagementService injected', () => {
            expect(therapistManagementService).toBeDefined();
        });
    });
    describe('Security Guards', () => {
        it('should be protected by JwtAuthGuard', () => {
            const guards = Reflect.getMetadata('__guards__', therapist_profile_controller_1.TherapistProfileController);
            expect(guards).toContain(jwt_auth_guard_1.JwtAuthGuard);
        });
        it('should have proper route decorators', () => {
            const controllerMetadata = Reflect.getMetadata('path', therapist_profile_controller_1.TherapistProfileController);
            expect(controllerMetadata).toBe('therapist/profile');
        });
    });
    describe('GET /therapist/profile', () => {
        it('should get therapist profile successfully', async () => {
            mockTherapistManagementService.getTherapistProfile.mockResolvedValue(mockTherapistProfile);
            const result = await controller.getTherapistProfile(index_1.TEST_USER_IDS.THERAPIST);
            expect(result).toEqual(mockTherapistProfile);
            expect(therapistManagementService.getTherapistProfile).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST);
        });
        it('should handle profile not found', async () => {
            const notFoundError = new Error('Therapist profile not found');
            mockTherapistManagementService.getTherapistProfile.mockRejectedValue(notFoundError);
            await expect(controller.getTherapistProfile(index_1.TEST_USER_IDS.THERAPIST)).rejects.toThrow(notFoundError);
        });
        it('should handle unauthorized access', async () => {
            const unauthorizedError = new Error('Unauthorized access');
            mockTherapistManagementService.getTherapistProfile.mockRejectedValue(unauthorizedError);
            await expect(controller.getTherapistProfile('unauthorized-therapist-id')).rejects.toThrow(unauthorizedError);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Database connection failed');
            mockTherapistManagementService.getTherapistProfile.mockRejectedValue(serviceError);
            await expect(controller.getTherapistProfile(index_1.TEST_USER_IDS.THERAPIST)).rejects.toThrow(serviceError);
        });
        it('should handle incomplete profile data', async () => {
            const incompleteProfile = {
                id: index_1.TEST_USER_IDS.THERAPIST,
                userId: index_1.TEST_USER_IDS.THERAPIST,
                email: index_1.TEST_EMAILS.THERAPIST,
                firstName: 'Dr. Jane',
                lastName: 'Smith',
                // Missing many fields
            };
            mockTherapistManagementService.getTherapistProfile.mockResolvedValue(incompleteProfile);
            const result = await controller.getTherapistProfile(index_1.TEST_USER_IDS.THERAPIST);
            expect(result).toEqual(incompleteProfile);
            expect(result.id).toBe(index_1.TEST_USER_IDS.THERAPIST);
            expect(result.firstName).toBe('Dr. Jane');
        });
    });
    describe('PUT /therapist/profile', () => {
        it('should update therapist profile successfully', async () => {
            const updatedProfile = { ...mockTherapistProfile, ...mockProfileUpdateData };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(updatedProfile);
            const result = await controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, mockProfileUpdateData);
            expect(result).toEqual(updatedProfile);
            expect(therapistManagementService.updateTherapistProfile).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST, mockProfileUpdateData);
        });
        it('should handle partial profile updates', async () => {
            const partialUpdate = { bio: 'Updated bio only' };
            const partiallyUpdatedProfile = { ...mockTherapistProfile, ...partialUpdate };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(partiallyUpdatedProfile);
            const result = await controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, partialUpdate);
            expect(result).toEqual(partiallyUpdatedProfile);
            expect(therapistManagementService.updateTherapistProfile).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST, partialUpdate);
        });
        it('should handle empty update data', async () => {
            const emptyUpdate = {};
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(mockTherapistProfile);
            const result = await controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, emptyUpdate);
            expect(result).toEqual(mockTherapistProfile);
            expect(therapistManagementService.updateTherapistProfile).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST, emptyUpdate);
        });
        it('should handle validation errors', async () => {
            const invalidData = { hourlyRate: -50 }; // Invalid negative rate
            const validationError = new Error('Validation failed: hourlyRate must be positive');
            mockTherapistManagementService.updateTherapistProfile.mockRejectedValue(validationError);
            await expect(controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, invalidData)).rejects.toThrow(validationError);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Database update failed');
            mockTherapistManagementService.updateTherapistProfile.mockRejectedValue(serviceError);
            await expect(controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, mockProfileUpdateData)).rejects.toThrow(serviceError);
        });
        it('should handle unauthorized updates', async () => {
            const unauthorizedError = new Error('Unauthorized profile update');
            mockTherapistManagementService.updateTherapistProfile.mockRejectedValue(unauthorizedError);
            await expect(controller.updateTherapistProfile('unauthorized-therapist-id', mockProfileUpdateData)).rejects.toThrow(unauthorizedError);
        });
        it('should handle complex profile updates', async () => {
            const complexUpdate = {
                bio: 'Comprehensive bio update with detailed information',
                hourlyRate: 200.0,
                availableForNewClients: true,
                maxClientsPerWeek: 25,
                preferredSessionLength: 45,
                areasOfExpertise: ['anxiety', 'depression', 'trauma', 'addiction', 'relationship'],
                therapeuticApproachesUsedList: ['CBT', 'DBT', 'EMDR', 'ACT', 'IFS'],
                languagesOffered: ['English', 'Spanish', 'French'],
                assessmentTools: ['GAD-7', 'PHQ-9', 'PCL-5', 'AUDIT', 'DASS-21'],
            };
            const complexUpdatedProfile = { ...mockTherapistProfile, ...complexUpdate };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(complexUpdatedProfile);
            const result = await controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, complexUpdate);
            expect(result).toEqual(complexUpdatedProfile);
            expect(result.bio).toBe(complexUpdate.bio);
            expect(result.hourlyRate).toBe(complexUpdate.hourlyRate);
            expect(result.areasOfExpertise).toEqual(complexUpdate.areasOfExpertise);
        });
    });
    describe('PUT /therapist/profile/specializations', () => {
        it('should update therapist specializations successfully', async () => {
            const updatedProfile = { ...mockTherapistProfile, ...mockSpecializationsUpdateData };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(updatedProfile);
            const result = await controller.updateTherapistSpecializations(index_1.TEST_USER_IDS.THERAPIST, mockSpecializationsUpdateData);
            expect(result).toEqual(updatedProfile);
            expect(therapistManagementService.updateTherapistProfile).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST, mockSpecializationsUpdateData);
        });
        it('should handle single specialization updates', async () => {
            const singleSpecializationUpdate = {
                areasOfExpertise: ['anxiety', 'depression', 'trauma', 'bipolar'],
            };
            const updatedProfile = { ...mockTherapistProfile, ...singleSpecializationUpdate };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(updatedProfile);
            const result = await controller.updateTherapistSpecializations(index_1.TEST_USER_IDS.THERAPIST, singleSpecializationUpdate);
            expect(result).toEqual(updatedProfile);
            expect(result.areasOfExpertise).toEqual(singleSpecializationUpdate.areasOfExpertise);
        });
        it('should handle therapeutic approaches updates', async () => {
            const approachesUpdate = {
                therapeuticApproachesUsedList: ['CBT', 'DBT', 'EMDR', 'ACT', 'IFS', 'Somatic'],
            };
            const updatedProfile = { ...mockTherapistProfile, ...approachesUpdate };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(updatedProfile);
            const result = await controller.updateTherapistSpecializations(index_1.TEST_USER_IDS.THERAPIST, approachesUpdate);
            expect(result).toEqual(updatedProfile);
            expect(result.therapeuticApproachesUsedList).toEqual(approachesUpdate.therapeuticApproachesUsedList);
        });
        it('should handle assessment tools updates', async () => {
            const assessmentToolsUpdate = {
                assessmentTools: ['GAD-7', 'PHQ-9', 'PCL-5', 'AUDIT', 'DASS-21', 'BDI-II'],
            };
            const updatedProfile = { ...mockTherapistProfile, ...assessmentToolsUpdate };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(updatedProfile);
            const result = await controller.updateTherapistSpecializations(index_1.TEST_USER_IDS.THERAPIST, assessmentToolsUpdate);
            expect(result).toEqual(updatedProfile);
            expect(result.assessmentTools).toEqual(assessmentToolsUpdate.assessmentTools);
        });
        it('should handle empty specializations update', async () => {
            const emptyUpdate = {};
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(mockTherapistProfile);
            const result = await controller.updateTherapistSpecializations(index_1.TEST_USER_IDS.THERAPIST, emptyUpdate);
            expect(result).toEqual(mockTherapistProfile);
            expect(therapistManagementService.updateTherapistProfile).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST, emptyUpdate);
        });
        it('should handle service errors', async () => {
            const serviceError = new Error('Specializations update failed');
            mockTherapistManagementService.updateTherapistProfile.mockRejectedValue(serviceError);
            await expect(controller.updateTherapistSpecializations(index_1.TEST_USER_IDS.THERAPIST, mockSpecializationsUpdateData)).rejects.toThrow(serviceError);
        });
        it('should handle validation errors for specializations', async () => {
            const invalidSpecializations = {
                areasOfExpertise: [], // Empty array might be invalid
            };
            const validationError = new Error('Validation failed: areasOfExpertise cannot be empty');
            mockTherapistManagementService.updateTherapistProfile.mockRejectedValue(validationError);
            await expect(controller.updateTherapistSpecializations(index_1.TEST_USER_IDS.THERAPIST, invalidSpecializations)).rejects.toThrow(validationError);
        });
        it('should handle unauthorized specializations updates', async () => {
            const unauthorizedError = new Error('Unauthorized specializations update');
            mockTherapistManagementService.updateTherapistProfile.mockRejectedValue(unauthorizedError);
            await expect(controller.updateTherapistSpecializations('unauthorized-therapist-id', mockSpecializationsUpdateData)).rejects.toThrow(unauthorizedError);
        });
    });
    describe('Integration Testing', () => {
        it('should handle complete profile management workflow', async () => {
            // Step 1: Get current profile
            mockTherapistManagementService.getTherapistProfile.mockResolvedValue(mockTherapistProfile);
            const currentProfile = await controller.getTherapistProfile(index_1.TEST_USER_IDS.THERAPIST);
            expect(currentProfile).toEqual(mockTherapistProfile);
            // Step 2: Update general profile
            const updatedProfile = { ...mockTherapistProfile, ...mockProfileUpdateData };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(updatedProfile);
            const profileUpdateResult = await controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, mockProfileUpdateData);
            expect(profileUpdateResult).toEqual(updatedProfile);
            // Step 3: Update specializations
            const specializationsUpdated = { ...updatedProfile, ...mockSpecializationsUpdateData };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(specializationsUpdated);
            const specializationsUpdateResult = await controller.updateTherapistSpecializations(index_1.TEST_USER_IDS.THERAPIST, mockSpecializationsUpdateData);
            expect(specializationsUpdateResult).toEqual(specializationsUpdated);
            // Verify all service calls were made
            expect(therapistManagementService.getTherapistProfile).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST);
            expect(therapistManagementService.updateTherapistProfile).toHaveBeenCalledTimes(2);
        });
        it('should handle multiple profile updates in sequence', async () => {
            // First update: Bio and rate
            const firstUpdate = { bio: 'First update', hourlyRate: 160.0 };
            const firstUpdatedProfile = { ...mockTherapistProfile, ...firstUpdate };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(firstUpdatedProfile);
            const firstResult = await controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, firstUpdate);
            expect(firstResult.bio).toBe('First update');
            expect(firstResult.hourlyRate).toBe(160.0);
            // Second update: Availability
            const secondUpdate = { availableForNewClients: false, maxClientsPerWeek: 10 };
            const secondUpdatedProfile = { ...firstUpdatedProfile, ...secondUpdate };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(secondUpdatedProfile);
            const secondResult = await controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, secondUpdate);
            expect(secondResult.availableForNewClients).toBe(false);
            expect(secondResult.maxClientsPerWeek).toBe(10);
            // Third update: Specializations
            const thirdUpdate = { areasOfExpertise: ['anxiety', 'depression', 'trauma', 'ptsd'] };
            const thirdUpdatedProfile = { ...secondUpdatedProfile, ...thirdUpdate };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(thirdUpdatedProfile);
            const thirdResult = await controller.updateTherapistSpecializations(index_1.TEST_USER_IDS.THERAPIST, thirdUpdate);
            expect(thirdResult.areasOfExpertise).toEqual(['anxiety', 'depression', 'trauma', 'ptsd']);
            // Verify all service calls were made
            expect(therapistManagementService.updateTherapistProfile).toHaveBeenCalledTimes(3);
        });
    });
    describe('Error Handling', () => {
        it('should handle service unavailable scenarios', async () => {
            const serviceError = new Error('Service temporarily unavailable');
            mockTherapistManagementService.getTherapistProfile.mockRejectedValue(serviceError);
            await expect(controller.getTherapistProfile(index_1.TEST_USER_IDS.THERAPIST)).rejects.toThrow(serviceError);
        });
        it('should handle concurrent update issues', async () => {
            const concurrencyError = new Error('Profile is being updated by another process');
            mockTherapistManagementService.updateTherapistProfile.mockRejectedValue(concurrencyError);
            await expect(controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, mockProfileUpdateData)).rejects.toThrow(concurrencyError);
        });
        it('should handle malformed profile data', async () => {
            const malformedData = { invalid: 'data', nested: { invalid: 'structure' } };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(mockTherapistProfile);
            const result = await controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, malformedData);
            expect(therapistManagementService.updateTherapistProfile).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST, malformedData);
        });
        it('should handle null or undefined profile data', async () => {
            const nullData = null;
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(mockTherapistProfile);
            const result = await controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, nullData);
            expect(therapistManagementService.updateTherapistProfile).toHaveBeenCalledWith(index_1.TEST_USER_IDS.THERAPIST, nullData);
        });
        it('should handle database connection errors', async () => {
            const dbError = new Error('Database connection lost');
            mockTherapistManagementService.getTherapistProfile.mockRejectedValue(dbError);
            await expect(controller.getTherapistProfile(index_1.TEST_USER_IDS.THERAPIST)).rejects.toThrow(dbError);
        });
        it('should handle profile not found scenarios', async () => {
            const notFoundError = new Error('Therapist profile not found');
            mockTherapistManagementService.getTherapistProfile.mockRejectedValue(notFoundError);
            await expect(controller.getTherapistProfile('non-existent-therapist-id')).rejects.toThrow(notFoundError);
        });
    });
    describe('Response Format Validation', () => {
        it('should return properly formatted profile response', async () => {
            mockTherapistManagementService.getTherapistProfile.mockResolvedValue(mockTherapistProfile);
            const result = await controller.getTherapistProfile(index_1.TEST_USER_IDS.THERAPIST);
            enhanced_test_helpers_1.TestAssertions.expectValidEntity(result, ['id', 'userId', 'email', 'firstName', 'lastName']);
            expect(result.id).toBe(index_1.TEST_USER_IDS.THERAPIST);
            expect(result.email).toBe(index_1.TEST_EMAILS.THERAPIST);
        });
        it('should return properly formatted update response', async () => {
            const updatedProfile = { ...mockTherapistProfile, ...mockProfileUpdateData };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(updatedProfile);
            const result = await controller.updateTherapistProfile(index_1.TEST_USER_IDS.THERAPIST, mockProfileUpdateData);
            enhanced_test_helpers_1.TestAssertions.expectValidEntity(result, ['id', 'userId', 'email', 'firstName', 'lastName']);
            expect(result.bio).toBe(mockProfileUpdateData.bio);
            expect(result.hourlyRate).toBe(mockProfileUpdateData.hourlyRate);
        });
        it('should return properly formatted specializations response', async () => {
            const updatedProfile = { ...mockTherapistProfile, ...mockSpecializationsUpdateData };
            mockTherapistManagementService.updateTherapistProfile.mockResolvedValue(updatedProfile);
            const result = await controller.updateTherapistSpecializations(index_1.TEST_USER_IDS.THERAPIST, mockSpecializationsUpdateData);
            enhanced_test_helpers_1.TestAssertions.expectValidEntity(result, ['id', 'userId', 'areasOfExpertise']);
            expect(Array.isArray(result.areasOfExpertise)).toBe(true);
            expect(Array.isArray(result.therapeuticApproachesUsedList)).toBe(true);
            expect(Array.isArray(result.assessmentTools)).toBe(true);
        });
        it('should maintain profile data integrity', async () => {
            mockTherapistManagementService.getTherapistProfile.mockResolvedValue(mockTherapistProfile);
            const result = await controller.getTherapistProfile(index_1.TEST_USER_IDS.THERAPIST);
            expect(result.isActive).toBe(true);
            expect(result.emailVerified).toBe(true);
            expect(typeof result.hourlyRate).toBe('number');
            expect(typeof result.availableForNewClients).toBe('boolean');
            expect(typeof result.maxClientsPerWeek).toBe('number');
            expect(typeof result.preferredSessionLength).toBe('number');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL3RoZXJhcGlzdC9jb250cm9sbGVycy90aGVyYXBpc3QtcHJvZmlsZS5jb250cm9sbGVyLnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCw2Q0FBc0Q7QUFDdEQscUVBQWdFO0FBQ2hFLGlGQUE0RTtBQUM1RSxrRkFBNkU7QUFFN0Usa0ZBQXdHO0FBQ3hHLGtEQUFvRTtBQUVwRSxRQUFRLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFO0lBQzFDLElBQUksVUFBc0MsQ0FBQztJQUMzQyxJQUFJLDBCQUFzRCxDQUFDO0lBQzNELElBQUksTUFBcUIsQ0FBQztJQUUxQixrQ0FBa0M7SUFDbEMsTUFBTSw4QkFBOEIsR0FBRztRQUNyQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQzlCLHNCQUFzQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDbEMsQ0FBQztJQUVGLG9CQUFvQjtJQUNwQixNQUFNLGdCQUFnQixHQUFHO1FBQ3ZCLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQztLQUM3QyxDQUFDO0lBRUYsWUFBWTtJQUNaLE1BQU0sb0JBQW9CLEdBQUc7UUFDM0IsRUFBRSxFQUFFLHFCQUFhLENBQUMsU0FBUztRQUMzQixNQUFNLEVBQUUscUJBQWEsQ0FBQyxTQUFTO1FBQy9CLEtBQUssRUFBRSxtQkFBVyxDQUFDLFNBQVM7UUFDNUIsU0FBUyxFQUFFLFVBQVU7UUFDckIsUUFBUSxFQUFFLE9BQU87UUFDakIsR0FBRyxFQUFFLDhEQUE4RDtRQUNuRSxZQUFZLEVBQUUsZ0NBQWdDO1FBQzlDLHVCQUF1QixFQUFFLEtBQUs7UUFDOUIsYUFBYSxFQUFFLElBQUk7UUFDbkIsZ0JBQWdCLEVBQUUsV0FBVztRQUM3QixpQkFBaUIsRUFBRSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDekMs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QyxDQUFDO1FBQzlELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvdGhlcmFwaXN0L2NvbnRyb2xsZXJzL3RoZXJhcGlzdC1wcm9maWxlLmNvbnRyb2xsZXIuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbXByZWhlbnNpdmUgVGVzdCBTdWl0ZSBmb3IgVGhlcmFwaXN0UHJvZmlsZUNvbnRyb2xsZXJcbiAqIFRlc3RzIGFsbCB0aGVyYXBpc3QgcHJvZmlsZSBtYW5hZ2VtZW50IGVuZHBvaW50cyB3aXRoIHNlY3VyaXR5LCB2YWxpZGF0aW9uLCBhbmQgZXJyb3IgaGFuZGxpbmdcbiAqL1xuXG5pbXBvcnQgeyBUZXN0LCBUZXN0aW5nTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uLy4uL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IFRoZXJhcGlzdFByb2ZpbGVDb250cm9sbGVyIH0gZnJvbSAnLi90aGVyYXBpc3QtcHJvZmlsZS5jb250cm9sbGVyJztcbmltcG9ydCB7IFRoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlIH0gZnJvbSAnLi4vdGhlcmFwaXN0LW1hbmFnZW1lbnQuc2VydmljZSc7XG5pbXBvcnQgeyBTZWN1cml0eUd1YXJkVGVzdFV0aWxzLCBSb2xlQmFzZWRUZXN0VXRpbHMgfSBmcm9tICcuLi8uLi90ZXN0LXV0aWxzL2F1dGgtdGVzdGluZy1oZWxwZXJzJztcbmltcG9ydCB7IE1vY2tCdWlsZGVyLCBUZXN0RGF0YUdlbmVyYXRvciwgVGVzdEFzc2VydGlvbnMgfSBmcm9tICcuLi8uLi90ZXN0LXV0aWxzL2VuaGFuY2VkLXRlc3QtaGVscGVycyc7XG5pbXBvcnQgeyBURVNUX1VTRVJfSURTLCBURVNUX0VNQUlMUyB9IGZyb20gJy4uLy4uL3Rlc3QtdXRpbHMvaW5kZXgnO1xuXG5kZXNjcmliZSgnVGhlcmFwaXN0UHJvZmlsZUNvbnRyb2xsZXInLCAoKSA9PiB7XG4gIGxldCBjb250cm9sbGVyOiBUaGVyYXBpc3RQcm9maWxlQ29udHJvbGxlcjtcbiAgbGV0IHRoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlOiBUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZTtcbiAgbGV0IG1vZHVsZTogVGVzdGluZ01vZHVsZTtcblxuICAvLyBNb2NrIFRoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlXG4gIGNvbnN0IG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZSA9IHtcbiAgICBnZXRUaGVyYXBpc3RQcm9maWxlOiBqZXN0LmZuKCksXG4gICAgdXBkYXRlVGhlcmFwaXN0UHJvZmlsZTogamVzdC5mbigpLFxuICB9O1xuXG4gIC8vIE1vY2sgSnd0QXV0aEd1YXJkXG4gIGNvbnN0IG1vY2tKd3RBdXRoR3VhcmQgPSB7XG4gICAgY2FuQWN0aXZhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSksXG4gIH07XG5cbiAgLy8gVGVzdCBkYXRhXG4gIGNvbnN0IG1vY2tUaGVyYXBpc3RQcm9maWxlID0ge1xuICAgIGlkOiBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICB1c2VySWQ6IFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgIGVtYWlsOiBURVNUX0VNQUlMUy5USEVSQVBJU1QsXG4gICAgZmlyc3ROYW1lOiAnRHIuIEphbmUnLFxuICAgIGxhc3ROYW1lOiAnU21pdGgnLFxuICAgIGJpbzogJ0V4cGVyaWVuY2VkIHRoZXJhcGlzdCBzcGVjaWFsaXppbmcgaW4gYW54aWV0eSBhbmQgZGVwcmVzc2lvbicsXG4gICAgcHJvdmlkZXJUeXBlOiAnTGljZW5zZWQgQ2xpbmljYWwgUHN5Y2hvbG9naXN0JyxcbiAgICBwcm9mZXNzaW9uYWxMaWNlbnNlVHlwZTogJ0xDUCcsXG4gICAgaXNQUkNMaWNlbnNlZDogdHJ1ZSxcbiAgICBwcmNMaWNlbnNlTnVtYmVyOiAnTENQLTEyMzQ1JyxcbiAgICBwcmFjdGljZVN0YXJ0RGF0ZTogbmV3IERhdGUoJzIwMjAtMDEtMDEnKSxcbiAgICBhcmVhc09mRXhwZXJ0aXNlOiBbJ2FueGlldHknLCAnZGVwcmVzc2lvbicsICd0cmF1bWEnXSxcbiAgICB0aGVyYXBldXRpY0FwcHJvYWNoZXNVc2VkTGlzdDogWydDQlQnLCAnREJUJywgJ0VNRFInXSxcbiAgICBsYW5ndWFnZXNPZmZlcmVkOiBbJ0VuZ2xpc2gnLCAnU3BhbmlzaCddLFxuICAgIGFzc2Vzc21lbnRUb29sczogWydHQUQtNycsICdQSFEtOScsICdQQ0wtNSddLFxuICAgIGhvdXJseVJhdGU6IDE1MC4wLFxuICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgIGVtYWlsVmVyaWZpZWQ6IHRydWUsXG4gICAgYXZhaWxhYmxlRm9yTmV3Q2xpZW50czogdHJ1ZSxcbiAgICBtYXhDbGllbnRzUGVyV2VlazogMjAsXG4gICAgcHJlZmVycmVkU2Vzc2lvbkxlbmd0aDogNjAsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgfTtcblxuICBjb25zdCBtb2NrUHJvZmlsZVVwZGF0ZURhdGEgPSB7XG4gICAgYmlvOiAnVXBkYXRlZCBiaW8gd2l0aCBuZXcgaW5mb3JtYXRpb24nLFxuICAgIGhvdXJseVJhdGU6IDE3NS4wLFxuICAgIGF2YWlsYWJsZUZvck5ld0NsaWVudHM6IGZhbHNlLFxuICAgIG1heENsaWVudHNQZXJXZWVrOiAxNSxcbiAgICBwcmVmZXJyZWRTZXNzaW9uTGVuZ3RoOiA5MCxcbiAgfTtcblxuICBjb25zdCBtb2NrU3BlY2lhbGl6YXRpb25zVXBkYXRlRGF0YSA9IHtcbiAgICBhcmVhc09mRXhwZXJ0aXNlOiBbJ2FueGlldHknLCAnZGVwcmVzc2lvbicsICd0cmF1bWEnLCAnYWRkaWN0aW9uJ10sXG4gICAgdGhlcmFwZXV0aWNBcHByb2FjaGVzVXNlZExpc3Q6IFsnQ0JUJywgJ0RCVCcsICdFTURSJywgJ0FDVCddLFxuICAgIGFzc2Vzc21lbnRUb29sczogWydHQUQtNycsICdQSFEtOScsICdQQ0wtNScsICdBVURJVCddLFxuICB9O1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIG1vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XG4gICAgICBjb250cm9sbGVyczogW1RoZXJhcGlzdFByb2ZpbGVDb250cm9sbGVyXSxcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UsXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSlcbiAgICAgIC5vdmVycmlkZUd1YXJkKEp3dEF1dGhHdWFyZClcbiAgICAgIC51c2VWYWx1ZShtb2NrSnd0QXV0aEd1YXJkKVxuICAgICAgLmNvbXBpbGUoKTtcblxuICAgIGNvbnRyb2xsZXIgPSBtb2R1bGUuZ2V0PFRoZXJhcGlzdFByb2ZpbGVDb250cm9sbGVyPihUaGVyYXBpc3RQcm9maWxlQ29udHJvbGxlcik7XG4gICAgdGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UgPSBtb2R1bGUuZ2V0PFRoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlPihUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb250cm9sbGVyIEluaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYmUgZGVmaW5lZCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChjb250cm9sbGVyKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHRoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlIGluamVjdGVkJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHRoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VjdXJpdHkgR3VhcmRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYmUgcHJvdGVjdGVkIGJ5IEp3dEF1dGhHdWFyZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGd1YXJkcyA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoJ19fZ3VhcmRzX18nLCBUaGVyYXBpc3RQcm9maWxlQ29udHJvbGxlcik7XG4gICAgICBleHBlY3QoZ3VhcmRzKS50b0NvbnRhaW4oSnd0QXV0aEd1YXJkKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBwcm9wZXIgcm91dGUgZGVjb3JhdG9ycycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXJNZXRhZGF0YSA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoJ3BhdGgnLCBUaGVyYXBpc3RQcm9maWxlQ29udHJvbGxlcik7XG4gICAgICBleHBlY3QoY29udHJvbGxlck1ldGFkYXRhKS50b0JlKCd0aGVyYXBpc3QvcHJvZmlsZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC90aGVyYXBpc3QvcHJvZmlsZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCB0aGVyYXBpc3QgcHJvZmlsZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UuZ2V0VGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGhlcmFwaXN0UHJvZmlsZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VGhlcmFwaXN0UHJvZmlsZShURVNUX1VTRVJfSURTLlRIRVJBUElTVCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1RoZXJhcGlzdFByb2ZpbGUpO1xuICAgICAgZXhwZWN0KHRoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLmdldFRoZXJhcGlzdFByb2ZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNUKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHByb2ZpbGUgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgbm90Rm91bmRFcnJvciA9IG5ldyBFcnJvcignVGhlcmFwaXN0IHByb2ZpbGUgbm90IGZvdW5kJyk7XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UuZ2V0VGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVqZWN0ZWRWYWx1ZShub3RGb3VuZEVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmdldFRoZXJhcGlzdFByb2ZpbGUoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QpLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3cobm90Rm91bmRFcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmF1dGhvcml6ZWQgYWNjZXNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdW5hdXRob3JpemVkRXJyb3IgPSBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCBhY2Nlc3MnKTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS5nZXRUaGVyYXBpc3RQcm9maWxlLm1vY2tSZWplY3RlZFZhbHVlKHVuYXV0aG9yaXplZEVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmdldFRoZXJhcGlzdFByb2ZpbGUoJ3VuYXV0aG9yaXplZC10aGVyYXBpc3QtaWQnKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHVuYXV0aG9yaXplZEVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgbW9ja1RoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLmdldFRoZXJhcGlzdFByb2ZpbGUubW9ja1JlamVjdGVkVmFsdWUoc2VydmljZUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmdldFRoZXJhcGlzdFByb2ZpbGUoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QpLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coc2VydmljZUVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGluY29tcGxldGUgcHJvZmlsZSBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW5jb21wbGV0ZVByb2ZpbGUgPSB7XG4gICAgICAgIGlkOiBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgdXNlcklkOiBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgZW1haWw6IFRFU1RfRU1BSUxTLlRIRVJBUElTVCxcbiAgICAgICAgZmlyc3ROYW1lOiAnRHIuIEphbmUnLFxuICAgICAgICBsYXN0TmFtZTogJ1NtaXRoJyxcbiAgICAgICAgLy8gTWlzc2luZyBtYW55IGZpZWxkc1xuICAgICAgfTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS5nZXRUaGVyYXBpc3RQcm9maWxlLm1vY2tSZXNvbHZlZFZhbHVlKGluY29tcGxldGVQcm9maWxlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5nZXRUaGVyYXBpc3RQcm9maWxlKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNUKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChpbmNvbXBsZXRlUHJvZmlsZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmlkKS50b0JlKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNUKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZmlyc3ROYW1lKS50b0JlKCdEci4gSmFuZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUFVUIC90aGVyYXBpc3QvcHJvZmlsZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSB0aGVyYXBpc3QgcHJvZmlsZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVkUHJvZmlsZSA9IHsgLi4ubW9ja1RoZXJhcGlzdFByb2ZpbGUsIC4uLm1vY2tQcm9maWxlVXBkYXRlRGF0YSB9O1xuICAgICAgbW9ja1RoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLnVwZGF0ZVRoZXJhcGlzdFByb2ZpbGUubW9ja1Jlc29sdmVkVmFsdWUodXBkYXRlZFByb2ZpbGUpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnVwZGF0ZVRoZXJhcGlzdFByb2ZpbGUoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgICBtb2NrUHJvZmlsZVVwZGF0ZURhdGEsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHVwZGF0ZWRQcm9maWxlKTtcbiAgICAgIGV4cGVjdCh0aGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgIG1vY2tQcm9maWxlVXBkYXRlRGF0YSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwYXJ0aWFsIHByb2ZpbGUgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcnRpYWxVcGRhdGUgPSB7IGJpbzogJ1VwZGF0ZWQgYmlvIG9ubHknIH07XG4gICAgICBjb25zdCBwYXJ0aWFsbHlVcGRhdGVkUHJvZmlsZSA9IHsgLi4ubW9ja1RoZXJhcGlzdFByb2ZpbGUsIC4uLnBhcnRpYWxVcGRhdGUgfTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlLm1vY2tSZXNvbHZlZFZhbHVlKHBhcnRpYWxseVVwZGF0ZWRQcm9maWxlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGRhdGVUaGVyYXBpc3RQcm9maWxlKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgcGFydGlhbFVwZGF0ZSxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwocGFydGlhbGx5VXBkYXRlZFByb2ZpbGUpO1xuICAgICAgZXhwZWN0KHRoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLnVwZGF0ZVRoZXJhcGlzdFByb2ZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgcGFydGlhbFVwZGF0ZSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB1cGRhdGUgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVtcHR5VXBkYXRlID0ge307XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGhlcmFwaXN0UHJvZmlsZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBkYXRlVGhlcmFwaXN0UHJvZmlsZShcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgIGVtcHR5VXBkYXRlLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrVGhlcmFwaXN0UHJvZmlsZSk7XG4gICAgICBleHBlY3QodGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgICBlbXB0eVVwZGF0ZSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB2YWxpZGF0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0geyBob3VybHlSYXRlOiAtNTAgfTsgLy8gSW52YWxpZCBuZWdhdGl2ZSByYXRlXG4gICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSBuZXcgRXJyb3IoJ1ZhbGlkYXRpb24gZmFpbGVkOiBob3VybHlSYXRlIG11c3QgYmUgcG9zaXRpdmUnKTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlLm1vY2tSZWplY3RlZFZhbHVlKHZhbGlkYXRpb25FcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci51cGRhdGVUaGVyYXBpc3RQcm9maWxlKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULCBpbnZhbGlkRGF0YSksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyh2YWxpZGF0aW9uRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIHVwZGF0ZSBmYWlsZWQnKTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci51cGRhdGVUaGVyYXBpc3RQcm9maWxlKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULCBtb2NrUHJvZmlsZVVwZGF0ZURhdGEpLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coc2VydmljZUVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVuYXV0aG9yaXplZCB1cGRhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdW5hdXRob3JpemVkRXJyb3IgPSBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCBwcm9maWxlIHVwZGF0ZScpO1xuICAgICAgbW9ja1RoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLnVwZGF0ZVRoZXJhcGlzdFByb2ZpbGUubW9ja1JlamVjdGVkVmFsdWUodW5hdXRob3JpemVkRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIudXBkYXRlVGhlcmFwaXN0UHJvZmlsZSgndW5hdXRob3JpemVkLXRoZXJhcGlzdC1pZCcsIG1vY2tQcm9maWxlVXBkYXRlRGF0YSksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyh1bmF1dGhvcml6ZWRFcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV4IHByb2ZpbGUgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBsZXhVcGRhdGUgPSB7XG4gICAgICAgIGJpbzogJ0NvbXByZWhlbnNpdmUgYmlvIHVwZGF0ZSB3aXRoIGRldGFpbGVkIGluZm9ybWF0aW9uJyxcbiAgICAgICAgaG91cmx5UmF0ZTogMjAwLjAsXG4gICAgICAgIGF2YWlsYWJsZUZvck5ld0NsaWVudHM6IHRydWUsXG4gICAgICAgIG1heENsaWVudHNQZXJXZWVrOiAyNSxcbiAgICAgICAgcHJlZmVycmVkU2Vzc2lvbkxlbmd0aDogNDUsXG4gICAgICAgIGFyZWFzT2ZFeHBlcnRpc2U6IFsnYW54aWV0eScsICdkZXByZXNzaW9uJywgJ3RyYXVtYScsICdhZGRpY3Rpb24nLCAncmVsYXRpb25zaGlwJ10sXG4gICAgICAgIHRoZXJhcGV1dGljQXBwcm9hY2hlc1VzZWRMaXN0OiBbJ0NCVCcsICdEQlQnLCAnRU1EUicsICdBQ1QnLCAnSUZTJ10sXG4gICAgICAgIGxhbmd1YWdlc09mZmVyZWQ6IFsnRW5nbGlzaCcsICdTcGFuaXNoJywgJ0ZyZW5jaCddLFxuICAgICAgICBhc3Nlc3NtZW50VG9vbHM6IFsnR0FELTcnLCAnUEhRLTknLCAnUENMLTUnLCAnQVVESVQnLCAnREFTUy0yMSddLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IGNvbXBsZXhVcGRhdGVkUHJvZmlsZSA9IHsgLi4ubW9ja1RoZXJhcGlzdFByb2ZpbGUsIC4uLmNvbXBsZXhVcGRhdGUgfTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlLm1vY2tSZXNvbHZlZFZhbHVlKGNvbXBsZXhVcGRhdGVkUHJvZmlsZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBkYXRlVGhlcmFwaXN0UHJvZmlsZShcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgIGNvbXBsZXhVcGRhdGUsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGNvbXBsZXhVcGRhdGVkUHJvZmlsZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmJpbykudG9CZShjb21wbGV4VXBkYXRlLmJpbyk7XG4gICAgICBleHBlY3QocmVzdWx0LmhvdXJseVJhdGUpLnRvQmUoY29tcGxleFVwZGF0ZS5ob3VybHlSYXRlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuYXJlYXNPZkV4cGVydGlzZSkudG9FcXVhbChjb21wbGV4VXBkYXRlLmFyZWFzT2ZFeHBlcnRpc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUFVUIC90aGVyYXBpc3QvcHJvZmlsZS9zcGVjaWFsaXphdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgdGhlcmFwaXN0IHNwZWNpYWxpemF0aW9ucyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVkUHJvZmlsZSA9IHsgLi4ubW9ja1RoZXJhcGlzdFByb2ZpbGUsIC4uLm1vY2tTcGVjaWFsaXphdGlvbnNVcGRhdGVEYXRhIH07XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkUHJvZmlsZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBkYXRlVGhlcmFwaXN0U3BlY2lhbGl6YXRpb25zKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgbW9ja1NwZWNpYWxpemF0aW9uc1VwZGF0ZURhdGEsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHVwZGF0ZWRQcm9maWxlKTtcbiAgICAgIGV4cGVjdCh0aGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgIG1vY2tTcGVjaWFsaXphdGlvbnNVcGRhdGVEYXRhLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNpbmdsZSBzcGVjaWFsaXphdGlvbiB1cGRhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2luZ2xlU3BlY2lhbGl6YXRpb25VcGRhdGUgPSB7XG4gICAgICAgIGFyZWFzT2ZFeHBlcnRpc2U6IFsnYW54aWV0eScsICdkZXByZXNzaW9uJywgJ3RyYXVtYScsICdiaXBvbGFyJ10sXG4gICAgICB9O1xuICAgICAgY29uc3QgdXBkYXRlZFByb2ZpbGUgPSB7IC4uLm1vY2tUaGVyYXBpc3RQcm9maWxlLCAuLi5zaW5nbGVTcGVjaWFsaXphdGlvblVwZGF0ZSB9O1xuICAgICAgbW9ja1RoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLnVwZGF0ZVRoZXJhcGlzdFByb2ZpbGUubW9ja1Jlc29sdmVkVmFsdWUodXBkYXRlZFByb2ZpbGUpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnVwZGF0ZVRoZXJhcGlzdFNwZWNpYWxpemF0aW9ucyhcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgIHNpbmdsZVNwZWNpYWxpemF0aW9uVXBkYXRlLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh1cGRhdGVkUHJvZmlsZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmFyZWFzT2ZFeHBlcnRpc2UpLnRvRXF1YWwoc2luZ2xlU3BlY2lhbGl6YXRpb25VcGRhdGUuYXJlYXNPZkV4cGVydGlzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB0aGVyYXBldXRpYyBhcHByb2FjaGVzIHVwZGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcHByb2FjaGVzVXBkYXRlID0ge1xuICAgICAgICB0aGVyYXBldXRpY0FwcHJvYWNoZXNVc2VkTGlzdDogWydDQlQnLCAnREJUJywgJ0VNRFInLCAnQUNUJywgJ0lGUycsICdTb21hdGljJ10sXG4gICAgICB9O1xuICAgICAgY29uc3QgdXBkYXRlZFByb2ZpbGUgPSB7IC4uLm1vY2tUaGVyYXBpc3RQcm9maWxlLCAuLi5hcHByb2FjaGVzVXBkYXRlIH07XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkUHJvZmlsZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBkYXRlVGhlcmFwaXN0U3BlY2lhbGl6YXRpb25zKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgYXBwcm9hY2hlc1VwZGF0ZSxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwodXBkYXRlZFByb2ZpbGUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC50aGVyYXBldXRpY0FwcHJvYWNoZXNVc2VkTGlzdCkudG9FcXVhbChhcHByb2FjaGVzVXBkYXRlLnRoZXJhcGV1dGljQXBwcm9hY2hlc1VzZWRMaXN0KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGFzc2Vzc21lbnQgdG9vbHMgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFzc2Vzc21lbnRUb29sc1VwZGF0ZSA9IHtcbiAgICAgICAgYXNzZXNzbWVudFRvb2xzOiBbJ0dBRC03JywgJ1BIUS05JywgJ1BDTC01JywgJ0FVRElUJywgJ0RBU1MtMjEnLCAnQkRJLUlJJ10sXG4gICAgICB9O1xuICAgICAgY29uc3QgdXBkYXRlZFByb2ZpbGUgPSB7IC4uLm1vY2tUaGVyYXBpc3RQcm9maWxlLCAuLi5hc3Nlc3NtZW50VG9vbHNVcGRhdGUgfTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRQcm9maWxlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGRhdGVUaGVyYXBpc3RTcGVjaWFsaXphdGlvbnMoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgICBhc3Nlc3NtZW50VG9vbHNVcGRhdGUsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHVwZGF0ZWRQcm9maWxlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuYXNzZXNzbWVudFRvb2xzKS50b0VxdWFsKGFzc2Vzc21lbnRUb29sc1VwZGF0ZS5hc3Nlc3NtZW50VG9vbHMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgc3BlY2lhbGl6YXRpb25zIHVwZGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVtcHR5VXBkYXRlID0ge307XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGhlcmFwaXN0UHJvZmlsZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBkYXRlVGhlcmFwaXN0U3BlY2lhbGl6YXRpb25zKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgZW1wdHlVcGRhdGUsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tUaGVyYXBpc3RQcm9maWxlKTtcbiAgICAgIGV4cGVjdCh0aGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgIGVtcHR5VXBkYXRlLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUVycm9yID0gbmV3IEVycm9yKCdTcGVjaWFsaXphdGlvbnMgdXBkYXRlIGZhaWxlZCcpO1xuICAgICAgbW9ja1RoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLnVwZGF0ZVRoZXJhcGlzdFByb2ZpbGUubW9ja1JlamVjdGVkVmFsdWUoc2VydmljZUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLnVwZGF0ZVRoZXJhcGlzdFNwZWNpYWxpemF0aW9ucyhURVNUX1VTRVJfSURTLlRIRVJBUElTVCwgbW9ja1NwZWNpYWxpemF0aW9uc1VwZGF0ZURhdGEpLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coc2VydmljZUVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHZhbGlkYXRpb24gZXJyb3JzIGZvciBzcGVjaWFsaXphdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkU3BlY2lhbGl6YXRpb25zID0ge1xuICAgICAgICBhcmVhc09mRXhwZXJ0aXNlOiBbXSwgLy8gRW1wdHkgYXJyYXkgbWlnaHQgYmUgaW52YWxpZFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvciA9IG5ldyBFcnJvcignVmFsaWRhdGlvbiBmYWlsZWQ6IGFyZWFzT2ZFeHBlcnRpc2UgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVqZWN0ZWRWYWx1ZSh2YWxpZGF0aW9uRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNvbnRyb2xsZXIudXBkYXRlVGhlcmFwaXN0U3BlY2lhbGl6YXRpb25zKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULCBpbnZhbGlkU3BlY2lhbGl6YXRpb25zKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHZhbGlkYXRpb25FcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmF1dGhvcml6ZWQgc3BlY2lhbGl6YXRpb25zIHVwZGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1bmF1dGhvcml6ZWRFcnJvciA9IG5ldyBFcnJvcignVW5hdXRob3JpemVkIHNwZWNpYWxpemF0aW9ucyB1cGRhdGUnKTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlLm1vY2tSZWplY3RlZFZhbHVlKHVuYXV0aG9yaXplZEVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLnVwZGF0ZVRoZXJhcGlzdFNwZWNpYWxpemF0aW9ucygndW5hdXRob3JpemVkLXRoZXJhcGlzdC1pZCcsIG1vY2tTcGVjaWFsaXphdGlvbnNVcGRhdGVEYXRhKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHVuYXV0aG9yaXplZEVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIFRlc3RpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcGxldGUgcHJvZmlsZSBtYW5hZ2VtZW50IHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU3RlcCAxOiBHZXQgY3VycmVudCBwcm9maWxlXG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UuZ2V0VGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGhlcmFwaXN0UHJvZmlsZSk7XG4gICAgICBjb25zdCBjdXJyZW50UHJvZmlsZSA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VGhlcmFwaXN0UHJvZmlsZShURVNUX1VTRVJfSURTLlRIRVJBUElTVCk7XG4gICAgICBleHBlY3QoY3VycmVudFByb2ZpbGUpLnRvRXF1YWwobW9ja1RoZXJhcGlzdFByb2ZpbGUpO1xuXG4gICAgICAvLyBTdGVwIDI6IFVwZGF0ZSBnZW5lcmFsIHByb2ZpbGVcbiAgICAgIGNvbnN0IHVwZGF0ZWRQcm9maWxlID0geyAuLi5tb2NrVGhlcmFwaXN0UHJvZmlsZSwgLi4ubW9ja1Byb2ZpbGVVcGRhdGVEYXRhIH07XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh1cGRhdGVkUHJvZmlsZSk7XG4gICAgICBjb25zdCBwcm9maWxlVXBkYXRlUmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGRhdGVUaGVyYXBpc3RQcm9maWxlKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgbW9ja1Byb2ZpbGVVcGRhdGVEYXRhLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChwcm9maWxlVXBkYXRlUmVzdWx0KS50b0VxdWFsKHVwZGF0ZWRQcm9maWxlKTtcblxuICAgICAgLy8gU3RlcCAzOiBVcGRhdGUgc3BlY2lhbGl6YXRpb25zXG4gICAgICBjb25zdCBzcGVjaWFsaXphdGlvbnNVcGRhdGVkID0geyAuLi51cGRhdGVkUHJvZmlsZSwgLi4ubW9ja1NwZWNpYWxpemF0aW9uc1VwZGF0ZURhdGEgfTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlLm1vY2tSZXNvbHZlZFZhbHVlKHNwZWNpYWxpemF0aW9uc1VwZGF0ZWQpO1xuICAgICAgY29uc3Qgc3BlY2lhbGl6YXRpb25zVXBkYXRlUmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGRhdGVUaGVyYXBpc3RTcGVjaWFsaXphdGlvbnMoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgICBtb2NrU3BlY2lhbGl6YXRpb25zVXBkYXRlRGF0YSxcbiAgICAgICk7XG4gICAgICBleHBlY3Qoc3BlY2lhbGl6YXRpb25zVXBkYXRlUmVzdWx0KS50b0VxdWFsKHNwZWNpYWxpemF0aW9uc1VwZGF0ZWQpO1xuXG4gICAgICAvLyBWZXJpZnkgYWxsIHNlcnZpY2UgY2FsbHMgd2VyZSBtYWRlXG4gICAgICBleHBlY3QodGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UuZ2V0VGhlcmFwaXN0UHJvZmlsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QpO1xuICAgICAgZXhwZWN0KHRoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLnVwZGF0ZVRoZXJhcGlzdFByb2ZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIHByb2ZpbGUgdXBkYXRlcyBpbiBzZXF1ZW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEZpcnN0IHVwZGF0ZTogQmlvIGFuZCByYXRlXG4gICAgICBjb25zdCBmaXJzdFVwZGF0ZSA9IHsgYmlvOiAnRmlyc3QgdXBkYXRlJywgaG91cmx5UmF0ZTogMTYwLjAgfTtcbiAgICAgIGNvbnN0IGZpcnN0VXBkYXRlZFByb2ZpbGUgPSB7IC4uLm1vY2tUaGVyYXBpc3RQcm9maWxlLCAuLi5maXJzdFVwZGF0ZSB9O1xuICAgICAgbW9ja1RoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLnVwZGF0ZVRoZXJhcGlzdFByb2ZpbGUubW9ja1Jlc29sdmVkVmFsdWUoZmlyc3RVcGRhdGVkUHJvZmlsZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZpcnN0UmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGRhdGVUaGVyYXBpc3RQcm9maWxlKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgZmlyc3RVcGRhdGUsXG4gICAgICApO1xuICAgICAgZXhwZWN0KGZpcnN0UmVzdWx0LmJpbykudG9CZSgnRmlyc3QgdXBkYXRlJyk7XG4gICAgICBleHBlY3QoZmlyc3RSZXN1bHQuaG91cmx5UmF0ZSkudG9CZSgxNjAuMCk7XG5cbiAgICAgIC8vIFNlY29uZCB1cGRhdGU6IEF2YWlsYWJpbGl0eVxuICAgICAgY29uc3Qgc2Vjb25kVXBkYXRlID0geyBhdmFpbGFibGVGb3JOZXdDbGllbnRzOiBmYWxzZSwgbWF4Q2xpZW50c1BlcldlZWs6IDEwIH07XG4gICAgICBjb25zdCBzZWNvbmRVcGRhdGVkUHJvZmlsZSA9IHsgLi4uZmlyc3RVcGRhdGVkUHJvZmlsZSwgLi4uc2Vjb25kVXBkYXRlIH07XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShzZWNvbmRVcGRhdGVkUHJvZmlsZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNlY29uZFJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBkYXRlVGhlcmFwaXN0UHJvZmlsZShcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgIHNlY29uZFVwZGF0ZSxcbiAgICAgICk7XG4gICAgICBleHBlY3Qoc2Vjb25kUmVzdWx0LmF2YWlsYWJsZUZvck5ld0NsaWVudHMpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHNlY29uZFJlc3VsdC5tYXhDbGllbnRzUGVyV2VlaykudG9CZSgxMCk7XG5cbiAgICAgIC8vIFRoaXJkIHVwZGF0ZTogU3BlY2lhbGl6YXRpb25zXG4gICAgICBjb25zdCB0aGlyZFVwZGF0ZSA9IHsgYXJlYXNPZkV4cGVydGlzZTogWydhbnhpZXR5JywgJ2RlcHJlc3Npb24nLCAndHJhdW1hJywgJ3B0c2QnXSB9O1xuICAgICAgY29uc3QgdGhpcmRVcGRhdGVkUHJvZmlsZSA9IHsgLi4uc2Vjb25kVXBkYXRlZFByb2ZpbGUsIC4uLnRoaXJkVXBkYXRlIH07XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh0aGlyZFVwZGF0ZWRQcm9maWxlKTtcbiAgICAgIFxuICAgICAgY29uc3QgdGhpcmRSZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnVwZGF0ZVRoZXJhcGlzdFNwZWNpYWxpemF0aW9ucyhcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgIHRoaXJkVXBkYXRlLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdCh0aGlyZFJlc3VsdC5hcmVhc09mRXhwZXJ0aXNlKS50b0VxdWFsKFsnYW54aWV0eScsICdkZXByZXNzaW9uJywgJ3RyYXVtYScsICdwdHNkJ10pO1xuXG4gICAgICAvLyBWZXJpZnkgYWxsIHNlcnZpY2UgY2FsbHMgd2VyZSBtYWRlXG4gICAgICBleHBlY3QodGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSB1bmF2YWlsYWJsZSBzY2VuYXJpb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlRXJyb3IgPSBuZXcgRXJyb3IoJ1NlcnZpY2UgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUnKTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS5nZXRUaGVyYXBpc3RQcm9maWxlLm1vY2tSZWplY3RlZFZhbHVlKHNlcnZpY2VFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRUaGVyYXBpc3RQcm9maWxlKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNUKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KHNlcnZpY2VFcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IHVwZGF0ZSBpc3N1ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25jdXJyZW5jeUVycm9yID0gbmV3IEVycm9yKCdQcm9maWxlIGlzIGJlaW5nIHVwZGF0ZWQgYnkgYW5vdGhlciBwcm9jZXNzJyk7XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVqZWN0ZWRWYWx1ZShjb25jdXJyZW5jeUVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLnVwZGF0ZVRoZXJhcGlzdFByb2ZpbGUoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsIG1vY2tQcm9maWxlVXBkYXRlRGF0YSksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhjb25jdXJyZW5jeUVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1hbGZvcm1lZCBwcm9maWxlIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtYWxmb3JtZWREYXRhID0geyBpbnZhbGlkOiAnZGF0YScsIG5lc3RlZDogeyBpbnZhbGlkOiAnc3RydWN0dXJlJyB9IH07XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGhlcmFwaXN0UHJvZmlsZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBkYXRlVGhlcmFwaXN0UHJvZmlsZShcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgIG1hbGZvcm1lZERhdGEsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QodGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgICBtYWxmb3JtZWREYXRhLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwgb3IgdW5kZWZpbmVkIHByb2ZpbGUgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG51bGxEYXRhID0gbnVsbDtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUaGVyYXBpc3RQcm9maWxlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGRhdGVUaGVyYXBpc3RQcm9maWxlKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgbnVsbERhdGEsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QodGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UudXBkYXRlVGhlcmFwaXN0UHJvZmlsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNULFxuICAgICAgICBudWxsRGF0YSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBjb25uZWN0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gbG9zdCcpO1xuICAgICAgbW9ja1RoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLmdldFRoZXJhcGlzdFByb2ZpbGUubW9ja1JlamVjdGVkVmFsdWUoZGJFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5nZXRUaGVyYXBpc3RQcm9maWxlKFRFU1RfVVNFUl9JRFMuVEhFUkFQSVNUKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KGRiRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcHJvZmlsZSBub3QgZm91bmQgc2NlbmFyaW9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgbm90Rm91bmRFcnJvciA9IG5ldyBFcnJvcignVGhlcmFwaXN0IHByb2ZpbGUgbm90IGZvdW5kJyk7XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UuZ2V0VGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVqZWN0ZWRWYWx1ZShub3RGb3VuZEVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmdldFRoZXJhcGlzdFByb2ZpbGUoJ25vbi1leGlzdGVudC10aGVyYXBpc3QtaWQnKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KG5vdEZvdW5kRXJyb3IpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVzcG9uc2UgRm9ybWF0IFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvcGVybHkgZm9ybWF0dGVkIHByb2ZpbGUgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVGhlcmFwaXN0TWFuYWdlbWVudFNlcnZpY2UuZ2V0VGhlcmFwaXN0UHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGhlcmFwaXN0UHJvZmlsZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0VGhlcmFwaXN0UHJvZmlsZShURVNUX1VTRVJfSURTLlRIRVJBUElTVCk7XG5cbiAgICAgIFRlc3RBc3NlcnRpb25zLmV4cGVjdFZhbGlkRW50aXR5KHJlc3VsdCwgWydpZCcsICd1c2VySWQnLCAnZW1haWwnLCAnZmlyc3ROYW1lJywgJ2xhc3ROYW1lJ10pO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pZCkudG9CZShURVNUX1VTRVJfSURTLlRIRVJBUElTVCk7XG4gICAgICBleHBlY3QocmVzdWx0LmVtYWlsKS50b0JlKFRFU1RfRU1BSUxTLlRIRVJBUElTVCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBwcm9wZXJseSBmb3JtYXR0ZWQgdXBkYXRlIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlZFByb2ZpbGUgPSB7IC4uLm1vY2tUaGVyYXBpc3RQcm9maWxlLCAuLi5tb2NrUHJvZmlsZVVwZGF0ZURhdGEgfTtcbiAgICAgIG1vY2tUaGVyYXBpc3RNYW5hZ2VtZW50U2VydmljZS51cGRhdGVUaGVyYXBpc3RQcm9maWxlLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRQcm9maWxlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci51cGRhdGVUaGVyYXBpc3RQcm9maWxlKFxuICAgICAgICBURVNUX1VTRVJfSURTLlRIRVJBUElTVCxcbiAgICAgICAgbW9ja1Byb2ZpbGVVcGRhdGVEYXRhLFxuICAgICAgKTtcblxuICAgICAgVGVzdEFzc2VydGlvbnMuZXhwZWN0VmFsaWRFbnRpdHkocmVzdWx0LCBbJ2lkJywgJ3VzZXJJZCcsICdlbWFpbCcsICdmaXJzdE5hbWUnLCAnbGFzdE5hbWUnXSk7XG4gICAgICBleHBlY3QocmVzdWx0LmJpbykudG9CZShtb2NrUHJvZmlsZVVwZGF0ZURhdGEuYmlvKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaG91cmx5UmF0ZSkudG9CZShtb2NrUHJvZmlsZVVwZGF0ZURhdGEuaG91cmx5UmF0ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBwcm9wZXJseSBmb3JtYXR0ZWQgc3BlY2lhbGl6YXRpb25zIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlZFByb2ZpbGUgPSB7IC4uLm1vY2tUaGVyYXBpc3RQcm9maWxlLCAuLi5tb2NrU3BlY2lhbGl6YXRpb25zVXBkYXRlRGF0YSB9O1xuICAgICAgbW9ja1RoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLnVwZGF0ZVRoZXJhcGlzdFByb2ZpbGUubW9ja1Jlc29sdmVkVmFsdWUodXBkYXRlZFByb2ZpbGUpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnVwZGF0ZVRoZXJhcGlzdFNwZWNpYWxpemF0aW9ucyhcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QsXG4gICAgICAgIG1vY2tTcGVjaWFsaXphdGlvbnNVcGRhdGVEYXRhLFxuICAgICAgKTtcblxuICAgICAgVGVzdEFzc2VydGlvbnMuZXhwZWN0VmFsaWRFbnRpdHkocmVzdWx0LCBbJ2lkJywgJ3VzZXJJZCcsICdhcmVhc09mRXhwZXJ0aXNlJ10pO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LmFyZWFzT2ZFeHBlcnRpc2UpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0LnRoZXJhcGV1dGljQXBwcm9hY2hlc1VzZWRMaXN0KSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5hc3Nlc3NtZW50VG9vbHMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBwcm9maWxlIGRhdGEgaW50ZWdyaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1RoZXJhcGlzdE1hbmFnZW1lbnRTZXJ2aWNlLmdldFRoZXJhcGlzdFByb2ZpbGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RoZXJhcGlzdFByb2ZpbGUpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmdldFRoZXJhcGlzdFByb2ZpbGUoVEVTVF9VU0VSX0lEUy5USEVSQVBJU1QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzQWN0aXZlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lbWFpbFZlcmlmaWVkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuaG91cmx5UmF0ZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5hdmFpbGFibGVGb3JOZXdDbGllbnRzKS50b0JlKCdib29sZWFuJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5tYXhDbGllbnRzUGVyV2VlaykudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5wcmVmZXJyZWRTZXNzaW9uTGVuZ3RoKS50b0JlKCdudW1iZXInKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=