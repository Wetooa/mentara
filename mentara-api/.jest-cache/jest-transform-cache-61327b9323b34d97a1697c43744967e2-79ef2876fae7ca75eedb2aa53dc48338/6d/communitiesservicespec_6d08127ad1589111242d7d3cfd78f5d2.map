{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/communities.service.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/communities/communities.service.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\nimport { ConflictException, NotFoundException } from '@nestjs/common';\nimport { CommunitiesService } from './communities.service';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport { createMockPrismaService, TEST_USER_IDS } from '../test-utils';\n\n// Mock data for comprehensive testing\nconst mockCommunity = {\n  id: 'community-1',\n  name: 'Anxiety Support Group',\n  description: 'A supportive community for people dealing with anxiety',\n  slug: 'anxiety-support-group',\n  imageUrl: 'https://example.com/anxiety-community.jpg',\n  isPrivate: false,\n  createdAt: new Date('2024-01-01'),\n  updatedAt: new Date('2024-01-02'),\n};\n\nconst mockCommunityWithStructure = {\n  ...mockCommunity,\n  roomGroups: [\n    {\n      id: 'roomgroup-1',\n      name: 'General Discussion',\n      order: 1,\n      communityId: 'community-1',\n      rooms: [\n        {\n          id: 'room-1',\n          name: 'Welcome',\n          order: 1,\n          postingRole: 'member',\n          roomGroupId: 'roomgroup-1',\n        },\n        {\n          id: 'room-2',\n          name: 'Daily Check-ins',\n          order: 2,\n          postingRole: 'member',\n          roomGroupId: 'roomgroup-1',\n        },\n      ],\n    },\n    {\n      id: 'roomgroup-2',\n      name: 'Resources',\n      order: 2,\n      communityId: 'community-1',\n      rooms: [\n        {\n          id: 'room-3',\n          name: 'Helpful Articles',\n          order: 1,\n          postingRole: 'moderator',\n          roomGroupId: 'roomgroup-2',\n        },\n      ],\n    },\n  ],\n};\n\nconst mockRoomGroup = {\n  id: 'roomgroup-1',\n  name: 'General Discussion',\n  order: 1,\n  communityId: 'community-1',\n  createdAt: new Date(),\n  updatedAt: new Date(),\n};\n\nconst mockRoom = {\n  id: 'room-1',\n  name: 'Welcome',\n  order: 1,\n  postingRole: 'member',\n  roomGroupId: 'roomgroup-1',\n  createdAt: new Date(),\n  updatedAt: new Date(),\n};\n\nconst mockMembership = {\n  id: 'membership-1',\n  userId: TEST_USER_IDS.CLIENT,\n  communityId: 'community-1',\n  role: 'member',\n  joinedAt: new Date(),\n  user: {\n    id: TEST_USER_IDS.CLIENT,\n    firstName: 'John',\n    lastName: 'Doe',\n    avatarUrl: 'https://example.com/avatar.jpg',\n  },\n  community: mockCommunity,\n};\n\nconst mockCommunityWithMembers = {\n  ...mockCommunity,\n  memberships: [mockMembership],\n  members: [mockMembership],\n};\n\ndescribe('CommunitiesService', () => {\n  let service: CommunitiesService;\n  let prismaService: jest.Mocked<PrismaService>;\n\n  beforeEach(async () => {\n    const mockPrisma = createMockPrismaService();\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        CommunitiesService,\n        {\n          provide: PrismaService,\n          useValue: mockPrisma,\n        },\n      ],\n    }).compile();\n\n    service = module.get<CommunitiesService>(CommunitiesService);\n    prismaService = module.get(PrismaService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should be defined', () => {\n    expect(service).toBeDefined();\n  });\n\n  describe('findAllWithStructure', () => {\n    it('should return all communities with room structure', async () => {\n      prismaService.community.findMany.mockResolvedValue([mockCommunityWithStructure]);\n\n      const result = await service.findAllWithStructure();\n\n      expect(prismaService.community.findMany).toHaveBeenCalledWith({\n        orderBy: { createdAt: 'desc' },\n        include: {\n          roomGroups: {\n            include: {\n              rooms: true,\n            },\n          },\n        },\n      });\n      expect(result).toEqual([mockCommunityWithStructure]);\n    });\n\n    it('should return empty array when no communities exist', async () => {\n      prismaService.community.findMany.mockResolvedValue([]);\n\n      const result = await service.findAllWithStructure();\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle communities with no room groups', async () => {\n      const communityWithoutRooms = {\n        ...mockCommunity,\n        roomGroups: [],\n      };\n      prismaService.community.findMany.mockResolvedValue([communityWithoutRooms]);\n\n      const result = await service.findAllWithStructure();\n\n      expect(result).toEqual([communityWithoutRooms]);\n    });\n\n    it('should order communities by creation date descending', async () => {\n      const olderCommunity = {\n        ...mockCommunity,\n        id: 'community-2',\n        createdAt: new Date('2023-12-01'),\n        roomGroups: [],\n      };\n      const newerCommunity = {\n        ...mockCommunity,\n        id: 'community-3',\n        createdAt: new Date('2024-02-01'),\n        roomGroups: [],\n      };\n\n      prismaService.community.findMany.mockResolvedValue([newerCommunity, olderCommunity]);\n\n      const result = await service.findAllWithStructure();\n\n      expect(result[0].createdAt).toEqual(new Date('2024-02-01'));\n      expect(result[1].createdAt).toEqual(new Date('2023-12-01'));\n    });\n  });\n\n  describe('findOneWithStructure', () => {\n    it('should return community with structure by ID', async () => {\n      prismaService.community.findUniqueOrThrow.mockResolvedValue(mockCommunityWithStructure);\n\n      const result = await service.findOneWithStructure('community-1');\n\n      expect(prismaService.community.findUniqueOrThrow).toHaveBeenCalledWith({\n        where: { id: 'community-1' },\n        include: {\n          roomGroups: {\n            include: {\n              rooms: true,\n            },\n          },\n        },\n      });\n      expect(result).toEqual(mockCommunityWithStructure);\n    });\n\n    it('should throw error when community not found', async () => {\n      prismaService.community.findUniqueOrThrow.mockRejectedValue(\n        new NotFoundException('Community not found')\n      );\n\n      await expect(service.findOneWithStructure('nonexistent-id')).rejects.toThrow(\n        NotFoundException\n      );\n    });\n\n    it('should include nested room structure', async () => {\n      await service.findOneWithStructure('community-1');\n\n      expect(prismaService.community.findUniqueOrThrow).toHaveBeenCalledWith(\n        expect.objectContaining({\n          include: {\n            roomGroups: {\n              include: {\n                rooms: true,\n              },\n            },\n          },\n        })\n      );\n    });\n  });\n\n  describe('createRoomGroup', () => {\n    it('should create a new room group successfully', async () => {\n      prismaService.roomGroup.create.mockResolvedValue(mockRoomGroup);\n\n      const result = await service.createRoomGroup('community-1', 'General Discussion', 1);\n\n      expect(prismaService.roomGroup.create).toHaveBeenCalledWith({\n        data: {\n          name: 'General Discussion',\n          order: 1,\n          community: {\n            connect: {\n              id: 'community-1',\n            },\n          },\n        },\n      });\n      expect(result).toEqual(mockRoomGroup);\n    });\n\n    it('should handle creation conflicts', async () => {\n      const dbError = new Error('Duplicate room group name');\n      prismaService.roomGroup.create.mockRejectedValue(dbError);\n\n      await expect(\n        service.createRoomGroup('community-1', 'Duplicate Name', 1)\n      ).rejects.toThrow(ConflictException);\n    });\n\n    it('should handle non-Error objects in catch block', async () => {\n      prismaService.roomGroup.create.mockRejectedValue('String error');\n\n      await expect(\n        service.createRoomGroup('community-1', 'Test', 1)\n      ).rejects.toThrow(ConflictException);\n    });\n\n    it('should create room groups with different orders', async () => {\n      const roomGroup1 = { ...mockRoomGroup, order: 1 };\n      const roomGroup2 = { ...mockRoomGroup, id: 'roomgroup-2', order: 2 };\n\n      prismaService.roomGroup.create\n        .mockResolvedValueOnce(roomGroup1)\n        .mockResolvedValueOnce(roomGroup2);\n\n      const result1 = await service.createRoomGroup('community-1', 'First Group', 1);\n      const result2 = await service.createRoomGroup('community-1', 'Second Group', 2);\n\n      expect(result1.order).toBe(1);\n      expect(result2.order).toBe(2);\n    });\n  });\n\n  describe('createRoom', () => {\n    it('should create a new room successfully', async () => {\n      prismaService.room.create.mockResolvedValue(mockRoom);\n\n      const result = await service.createRoom('roomgroup-1', 'Welcome', 1);\n\n      expect(prismaService.room.create).toHaveBeenCalledWith({\n        data: {\n          name: 'Welcome',\n          order: 1,\n          roomGroupId: 'roomgroup-1',\n        },\n      });\n      expect(result).toEqual(mockRoom);\n    });\n\n    it('should create room with default posting role', async () => {\n      const roomWithDefaultRole = {\n        ...mockRoom,\n        postingRole: 'member',\n      };\n      prismaService.room.create.mockResolvedValue(roomWithDefaultRole);\n\n      const result = await service.createRoom('roomgroup-1', 'General Chat', 2);\n\n      expect(result.postingRole).toBe('member');\n    });\n\n    it('should handle room creation errors', async () => {\n      const dbError = new Error('Database connection failed');\n      prismaService.room.create.mockRejectedValue(dbError);\n\n      await expect(\n        service.createRoom('invalid-roomgroup', 'Test Room', 1)\n      ).rejects.toThrow('Database connection failed');\n    });\n\n    it('should create multiple rooms in same group with different orders', async () => {\n      const room1 = { ...mockRoom, order: 1, name: 'Room 1' };\n      const room2 = { ...mockRoom, id: 'room-2', order: 2, name: 'Room 2' };\n\n      prismaService.room.create\n        .mockResolvedValueOnce(room1)\n        .mockResolvedValueOnce(room2);\n\n      const result1 = await service.createRoom('roomgroup-1', 'Room 1', 1);\n      const result2 = await service.createRoom('roomgroup-1', 'Room 2', 2);\n\n      expect(result1.order).toBe(1);\n      expect(result2.order).toBe(2);\n    });\n  });\n\n  describe('findRoomsByGroup', () => {\n    it('should return rooms ordered by order ascending', async () => {\n      const rooms = [\n        { ...mockRoom, order: 1, name: 'First Room' },\n        { ...mockRoom, id: 'room-2', order: 2, name: 'Second Room' },\n        { ...mockRoom, id: 'room-3', order: 3, name: 'Third Room' },\n      ];\n      prismaService.room.findMany.mockResolvedValue(rooms);\n\n      const result = await service.findRoomsByGroup('roomgroup-1');\n\n      expect(prismaService.room.findMany).toHaveBeenCalledWith({\n        where: { roomGroupId: 'roomgroup-1' },\n        orderBy: { order: 'asc' },\n      });\n      expect(result).toEqual(rooms);\n      expect(result[0].order).toBe(1);\n      expect(result[1].order).toBe(2);\n      expect(result[2].order).toBe(3);\n    });\n\n    it('should return empty array when no rooms exist', async () => {\n      prismaService.room.findMany.mockResolvedValue([]);\n\n      const result = await service.findRoomsByGroup('empty-roomgroup');\n\n      expect(result).toEqual([]);\n    });\n\n    it('should filter by room group ID correctly', async () => {\n      await service.findRoomsByGroup('specific-roomgroup');\n\n      expect(prismaService.room.findMany).toHaveBeenCalledWith({\n        where: { roomGroupId: 'specific-roomgroup' },\n        orderBy: { order: 'asc' },\n      });\n    });\n  });\n\n  describe('findAll', () => {\n    it('should return all communities without structure', async () => {\n      const communities = [mockCommunity, { ...mockCommunity, id: 'community-2' }];\n      prismaService.community.findMany.mockResolvedValue(communities);\n\n      const result = await service.findAll();\n\n      expect(prismaService.community.findMany).toHaveBeenCalledWith({\n        orderBy: { createdAt: 'desc' },\n      });\n      expect(result).toEqual(communities);\n    });\n\n    it('should order communities by creation date descending', async () => {\n      await service.findAll();\n\n      expect(prismaService.community.findMany).toHaveBeenCalledWith({\n        orderBy: { createdAt: 'desc' },\n      });\n    });\n\n    it('should handle empty result gracefully', async () => {\n      prismaService.community.findMany.mockResolvedValue([]);\n\n      const result = await service.findAll();\n\n      expect(result).toEqual([]);\n    });\n  });\n\n  describe('findOne', () => {\n    it('should return community by ID', async () => {\n      prismaService.community.findUnique.mockResolvedValue(mockCommunity);\n\n      const result = await service.findOne('community-1');\n\n      expect(prismaService.community.findUnique).toHaveBeenCalledWith({\n        where: { id: 'community-1' },\n      });\n      expect(result).toEqual(mockCommunity);\n    });\n\n    it('should return null when community not found', async () => {\n      prismaService.community.findUnique.mockResolvedValue(null);\n\n      const result = await service.findOne('nonexistent-id');\n\n      expect(result).toBeNull();\n    });\n\n    it('should handle database errors', async () => {\n      const dbError = new Error('Database connection failed');\n      prismaService.community.findUnique.mockRejectedValue(dbError);\n\n      await expect(service.findOne('community-1')).rejects.toThrow('Database connection failed');\n    });\n  });\n\n  describe('findBySlug', () => {\n    it('should return community by slug', async () => {\n      prismaService.community.findUnique.mockResolvedValue(mockCommunity);\n\n      const result = await service.findBySlug('anxiety-support-group');\n\n      expect(prismaService.community.findUnique).toHaveBeenCalledWith({\n        where: { slug: 'anxiety-support-group' },\n      });\n      expect(result).toEqual(mockCommunity);\n    });\n\n    it('should return null when community with slug not found', async () => {\n      prismaService.community.findUnique.mockResolvedValue(null);\n\n      const result = await service.findBySlug('nonexistent-slug');\n\n      expect(result).toBeNull();\n    });\n\n    it('should handle special characters in slug', async () => {\n      const slugWithSpecialChars = 'anxiety-&-depression-support';\n      await service.findBySlug(slugWithSpecialChars);\n\n      expect(prismaService.community.findUnique).toHaveBeenCalledWith({\n        where: { slug: slugWithSpecialChars },\n      });\n    });\n  });\n\n  describe('createCommunity', () => {\n    it('should create community with all fields', async () => {\n      const createData = {\n        name: 'Depression Support',\n        description: 'A community for depression support',\n        slug: 'depression-support',\n        imageUrl: 'https://example.com/depression.jpg',\n      };\n      const createdCommunity = {\n        ...mockCommunity,\n        ...createData,\n        id: 'new-community-id',\n      };\n\n      prismaService.community.create.mockResolvedValue(createdCommunity);\n\n      const result = await service.createCommunity(createData);\n\n      expect(prismaService.community.create).toHaveBeenCalledWith({\n        data: {\n          name: 'Depression Support',\n          slug: 'depression-support',\n          description: 'A community for depression support',\n          imageUrl: 'https://example.com/depression.jpg',\n        },\n      });\n      expect(result).toEqual(createdCommunity);\n    });\n\n    it('should auto-generate slug from name when not provided', async () => {\n      const createData = {\n        name: 'PTSD Recovery Community',\n        description: 'Community for PTSD recovery',\n      };\n      const createdCommunity = {\n        ...mockCommunity,\n        name: createData.name,\n        description: createData.description,\n        slug: 'ptsd-recovery-community',\n      };\n\n      prismaService.community.create.mockResolvedValue(createdCommunity);\n\n      const result = await service.createCommunity(createData);\n\n      expect(prismaService.community.create).toHaveBeenCalledWith({\n        data: {\n          name: 'PTSD Recovery Community',\n          slug: 'ptsd-recovery-community',\n          description: 'Community for PTSD recovery',\n          imageUrl: null,\n        },\n      });\n      expect(result.slug).toBe('ptsd-recovery-community');\n    });\n\n    it('should handle missing name with default slug', async () => {\n      const createData = {\n        description: 'Community with no name',\n      };\n      const createdCommunity = {\n        ...mockCommunity,\n        name: undefined,\n        description: createData.description,\n        slug: 'untitled',\n      };\n\n      prismaService.community.create.mockResolvedValue(createdCommunity);\n\n      await service.createCommunity(createData);\n\n      expect(prismaService.community.create).toHaveBeenCalledWith({\n        data: {\n          name: undefined,\n          slug: 'untitled',\n          description: 'Community with no name',\n          imageUrl: null,\n        },\n      });\n    });\n\n    it('should handle creation with minimal data', async () => {\n      const createData = {\n        name: 'Simple Community',\n        description: 'Simple description',\n      };\n\n      await service.createCommunity(createData);\n\n      expect(prismaService.community.create).toHaveBeenCalledWith({\n        data: {\n          name: 'Simple Community',\n          slug: 'simple-community',\n          description: 'Simple description',\n          imageUrl: null,\n        },\n      });\n    });\n\n    it('should handle database creation errors', async () => {\n      const createData = {\n        name: 'Test Community',\n        description: 'Test description',\n      };\n      const dbError = new Error('Unique constraint violation');\n      prismaService.community.create.mockRejectedValue(dbError);\n\n      await expect(service.createCommunity(createData)).rejects.toThrow(\n        'Unique constraint violation'\n      );\n    });\n  });\n\n  describe('update', () => {\n    it('should update community with all fields', async () => {\n      const updateData = {\n        name: 'Updated Community Name',\n        description: 'Updated description',\n        slug: 'updated-slug',\n        imageUrl: 'https://example.com/updated.jpg',\n      };\n      const updatedCommunity = {\n        ...mockCommunity,\n        ...updateData,\n      };\n\n      prismaService.community.update.mockResolvedValue(updatedCommunity);\n\n      const result = await service.update('community-1', updateData);\n\n      expect(prismaService.community.update).toHaveBeenCalledWith({\n        where: { id: 'community-1' },\n        data: {\n          name: 'Updated Community Name',\n          slug: 'updated-slug',\n          description: 'Updated description',\n          imageUrl: 'https://example.com/updated.jpg',\n        },\n      });\n      expect(result).toEqual(updatedCommunity);\n    });\n\n    it('should auto-generate slug from updated name', async () => {\n      const updateData = {\n        name: 'New Community Name With Spaces',\n        description: 'Updated description',\n      };\n\n      await service.update('community-1', updateData);\n\n      expect(prismaService.community.update).toHaveBeenCalledWith({\n        where: { id: 'community-1' },\n        data: {\n          name: 'New Community Name With Spaces',\n          slug: 'new-community-name-with-spaces',\n          description: 'Updated description',\n          imageUrl: null,\n        },\n      });\n    });\n\n    it('should handle partial updates', async () => {\n      const updateData = {\n        description: 'Only updating description',\n      };\n\n      await service.update('community-1', updateData);\n\n      expect(prismaService.community.update).toHaveBeenCalledWith({\n        where: { id: 'community-1' },\n        data: {\n          name: undefined,\n          slug: 'untitled',\n          description: 'Only updating description',\n          imageUrl: null,\n        },\n      });\n    });\n\n    it('should handle update errors', async () => {\n      const updateData = {\n        name: 'Updated Name',\n        description: 'Updated description',\n      };\n      const dbError = new Error('Community not found');\n      prismaService.community.update.mockRejectedValue(dbError);\n\n      await expect(service.update('nonexistent-id', updateData)).rejects.toThrow(\n        'Community not found'\n      );\n    });\n  });\n\n  describe('remove', () => {\n    it('should delete community successfully', async () => {\n      prismaService.community.delete.mockResolvedValue(mockCommunity);\n\n      const result = await service.remove('community-1');\n\n      expect(prismaService.community.delete).toHaveBeenCalledWith({\n        where: { id: 'community-1' },\n      });\n      expect(result).toEqual(mockCommunity);\n    });\n\n    it('should handle deletion of non-existent community', async () => {\n      const dbError = new Error('Community not found');\n      prismaService.community.delete.mockRejectedValue(dbError);\n\n      await expect(service.remove('nonexistent-id')).rejects.toThrow('Community not found');\n    });\n\n    it('should handle cascade deletion errors', async () => {\n      const dbError = new Error('Foreign key constraint violation');\n      prismaService.community.delete.mockRejectedValue(dbError);\n\n      await expect(service.remove('community-with-dependencies')).rejects.toThrow(\n        'Foreign key constraint violation'\n      );\n    });\n  });\n\n  describe('findByUserId', () => {\n    it('should return communities for user', async () => {\n      const memberships = [\n        mockMembership,\n        {\n          ...mockMembership,\n          id: 'membership-2',\n          communityId: 'community-2',\n          community: { ...mockCommunity, id: 'community-2', name: 'Depression Support' },\n        },\n      ];\n      prismaService.membership.findMany.mockResolvedValue(memberships);\n\n      const result = await service.findByUserId(TEST_USER_IDS.CLIENT);\n\n      expect(prismaService.membership.findMany).toHaveBeenCalledWith({\n        where: { userId: TEST_USER_IDS.CLIENT },\n        include: {\n          community: true,\n        },\n      });\n      expect(result).toEqual([\n        mockCommunity,\n        { ...mockCommunity, id: 'community-2', name: 'Depression Support' },\n      ]);\n    });\n\n    it('should return empty array for user with no memberships', async () => {\n      prismaService.membership.findMany.mockResolvedValue([]);\n\n      const result = await service.findByUserId('user-with-no-communities');\n\n      expect(result).toEqual([]);\n    });\n\n    it('should handle database errors gracefully', async () => {\n      const dbError = new Error('User not found');\n      prismaService.membership.findMany.mockRejectedValue(dbError);\n\n      await expect(service.findByUserId('invalid-user')).rejects.toThrow('User not found');\n    });\n  });\n\n  describe('joinCommunity', () => {\n    it('should allow user to join community', async () => {\n      prismaService.membership.findFirst.mockResolvedValue(null);\n      prismaService.membership.create.mockResolvedValue(mockMembership);\n\n      await service.joinCommunity('community-1', TEST_USER_IDS.CLIENT);\n\n      expect(prismaService.membership.findFirst).toHaveBeenCalledWith({\n        where: {\n          communityId: 'community-1',\n          userId: TEST_USER_IDS.CLIENT,\n        },\n      });\n      expect(prismaService.membership.create).toHaveBeenCalledWith({\n        data: {\n          userId: TEST_USER_IDS.CLIENT,\n          communityId: 'community-1',\n          role: 'member',\n        },\n      });\n    });\n\n    it('should allow joining with custom role', async () => {\n      prismaService.membership.findFirst.mockResolvedValue(null);\n      prismaService.membership.create.mockResolvedValue({\n        ...mockMembership,\n        role: 'moderator',\n      });\n\n      await service.joinCommunity('community-1', TEST_USER_IDS.CLIENT, 'moderator');\n\n      expect(prismaService.membership.create).toHaveBeenCalledWith({\n        data: {\n          userId: TEST_USER_IDS.CLIENT,\n          communityId: 'community-1',\n          role: 'moderator',\n        },\n      });\n    });\n\n    it('should throw error if user already a member', async () => {\n      prismaService.membership.findFirst.mockResolvedValue(mockMembership);\n\n      await expect(\n        service.joinCommunity('community-1', TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow(ConflictException);\n      expect(prismaService.membership.create).not.toHaveBeenCalled();\n    });\n\n    it('should handle database errors during join', async () => {\n      prismaService.membership.findFirst.mockResolvedValue(null);\n      const dbError = new Error('Database connection failed');\n      prismaService.membership.create.mockRejectedValue(dbError);\n\n      await expect(\n        service.joinCommunity('community-1', TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow('Database connection failed');\n    });\n  });\n\n  describe('leaveCommunity', () => {\n    it('should allow user to leave community', async () => {\n      prismaService.membership.findFirstOrThrow.mockResolvedValue(mockMembership);\n      prismaService.membership.delete.mockResolvedValue(mockMembership);\n\n      await service.leaveCommunity('community-1', TEST_USER_IDS.CLIENT);\n\n      expect(prismaService.membership.findFirstOrThrow).toHaveBeenCalledWith({\n        where: {\n          communityId: 'community-1',\n          userId: TEST_USER_IDS.CLIENT,\n        },\n      });\n      expect(prismaService.membership.delete).toHaveBeenCalledWith({\n        where: { id: 'membership-1' },\n      });\n    });\n\n    it('should throw error if membership not found', async () => {\n      const dbError = new Error('Membership not found');\n      prismaService.membership.findFirstOrThrow.mockRejectedValue(dbError);\n\n      await expect(\n        service.leaveCommunity('community-1', 'nonexistent-user')\n      ).rejects.toThrow('Membership not found');\n      expect(prismaService.membership.delete).not.toHaveBeenCalled();\n    });\n\n    it('should handle deletion errors', async () => {\n      prismaService.membership.findFirstOrThrow.mockResolvedValue(mockMembership);\n      const dbError = new Error('Foreign key constraint violation');\n      prismaService.membership.delete.mockRejectedValue(dbError);\n\n      await expect(\n        service.leaveCommunity('community-1', TEST_USER_IDS.CLIENT)\n      ).rejects.toThrow('Foreign key constraint violation');\n    });\n  });\n\n  describe('getMembers', () => {\n    it('should return community with members using default pagination', async () => {\n      prismaService.community.findUnique.mockResolvedValue(mockCommunityWithMembers);\n\n      const result = await service.getMembers('community-1');\n\n      expect(prismaService.community.findUnique).toHaveBeenCalledWith({\n        where: { id: 'community-1' },\n        include: {\n          memberships: {\n            skip: 0,\n            take: 50,\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n            orderBy: { joinedAt: 'desc' },\n          },\n        },\n      });\n      expect(result.members).toEqual([mockMembership]);\n    });\n\n    it('should handle custom pagination parameters', async () => {\n      prismaService.community.findUnique.mockResolvedValue(mockCommunityWithMembers);\n\n      await service.getMembers('community-1', 20, 10);\n\n      expect(prismaService.community.findUnique).toHaveBeenCalledWith({\n        where: { id: 'community-1' },\n        include: {\n          memberships: {\n            skip: 10,\n            take: 20,\n            include: {\n              user: {\n                select: {\n                  id: true,\n                  firstName: true,\n                  lastName: true,\n                  avatarUrl: true,\n                },\n              },\n            },\n            orderBy: { joinedAt: 'desc' },\n          },\n        },\n      });\n    });\n\n    it('should throw NotFoundException when community not found', async () => {\n      prismaService.community.findUnique.mockResolvedValue(null);\n\n      await expect(service.getMembers('nonexistent-community')).rejects.toThrow(\n        NotFoundException\n      );\n    });\n\n    it('should filter out memberships with null users', async () => {\n      const communityWithNullUsers = {\n        ...mockCommunityWithMembers,\n        memberships: [\n          mockMembership,\n          {\n            ...mockMembership,\n            id: 'membership-2',\n            userId: null,\n            user: null,\n          },\n          {\n            ...mockMembership,\n            id: 'membership-3',\n            userId: TEST_USER_IDS.THERAPIST,\n            user: {\n              id: TEST_USER_IDS.THERAPIST,\n              firstName: 'Jane',\n              lastName: 'Smith',\n              avatarUrl: null,\n            },\n          },\n        ],\n      };\n      prismaService.community.findUnique.mockResolvedValue(communityWithNullUsers);\n\n      const result = await service.getMembers('community-1');\n\n      expect(result.members).toHaveLength(2);\n      expect(result.members[0].userId).toBe(TEST_USER_IDS.CLIENT);\n      expect(result.members[1].userId).toBe(TEST_USER_IDS.THERAPIST);\n    });\n\n    it('should order members by join date descending', async () => {\n      const recentMember = {\n        ...mockMembership,\n        id: 'membership-recent',\n        joinedAt: new Date('2024-02-01'),\n        user: { ...mockMembership.user, firstName: 'Recent' },\n      };\n      const olderMember = {\n        ...mockMembership,\n        id: 'membership-older',\n        joinedAt: new Date('2024-01-01'),\n        user: { ...mockMembership.user, firstName: 'Older' },\n      };\n\n      const communityWithOrderedMembers = {\n        ...mockCommunityWithMembers,\n        memberships: [recentMember, olderMember],\n      };\n      prismaService.community.findUnique.mockResolvedValue(communityWithOrderedMembers);\n\n      const result = await service.getMembers('community-1');\n\n      expect(result.members[0].user.firstName).toBe('Recent');\n      expect(result.members[1].user.firstName).toBe('Older');\n    });\n  });\n\n  describe('getStats', () => {\n    it('should return community statistics', async () => {\n      prismaService.membership.count.mockResolvedValue(150);\n      prismaService.post.count.mockResolvedValue(500);\n      prismaService.community.count.mockResolvedValue(25);\n\n      const result = await service.getStats();\n\n      expect(prismaService.membership.count).toHaveBeenCalled();\n      expect(prismaService.post.count).toHaveBeenCalled();\n      expect(prismaService.community.count).toHaveBeenCalled();\n      expect(result).toEqual({\n        totalMembers: 150,\n        totalPosts: 500,\n        activeCommunities: 25,\n        illnessCommunities: [],\n      });\n    });\n\n    it('should handle zero counts gracefully', async () => {\n      prismaService.membership.count.mockResolvedValue(0);\n      prismaService.post.count.mockResolvedValue(0);\n      prismaService.community.count.mockResolvedValue(0);\n\n      const result = await service.getStats();\n\n      expect(result).toEqual({\n        totalMembers: 0,\n        totalPosts: 0,\n        activeCommunities: 0,\n        illnessCommunities: [],\n      });\n    });\n\n    it('should handle database errors in stats collection', async () => {\n      const dbError = new Error('Database connection failed');\n      prismaService.membership.count.mockRejectedValue(dbError);\n\n      await expect(service.getStats()).rejects.toThrow('Database connection failed');\n    });\n\n    it('should execute all count queries in parallel', async () => {\n      prismaService.membership.count.mockResolvedValue(100);\n      prismaService.post.count.mockResolvedValue(200);\n      prismaService.community.count.mockResolvedValue(10);\n\n      await service.getStats();\n\n      // All three count operations should be called\n      expect(prismaService.membership.count).toHaveBeenCalledTimes(1);\n      expect(prismaService.post.count).toHaveBeenCalledTimes(1);\n      expect(prismaService.community.count).toHaveBeenCalledTimes(1);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete community lifecycle', async () => {\n      // Create community\n      const createData = {\n        name: 'Test Integration Community',\n        description: 'Integration test community',\n      };\n      const createdCommunity = {\n        ...mockCommunity,\n        name: createData.name,\n        description: createData.description,\n        slug: 'test-integration-community',\n      };\n      prismaService.community.create.mockResolvedValue(createdCommunity);\n\n      const community = await service.createCommunity(createData);\n      expect(community.name).toBe('Test Integration Community');\n\n      // Update community\n      const updateData = {\n        name: 'Updated Integration Community',\n        description: 'Updated description',\n      };\n      const updatedCommunity = {\n        ...createdCommunity,\n        ...updateData,\n        slug: 'updated-integration-community',\n      };\n      prismaService.community.update.mockResolvedValue(updatedCommunity);\n\n      const updated = await service.update(community.id, updateData);\n      expect(updated.name).toBe('Updated Integration Community');\n\n      // User joins community\n      prismaService.membership.findFirst.mockResolvedValue(null);\n      prismaService.membership.create.mockResolvedValue(mockMembership);\n\n      await service.joinCommunity(community.id, TEST_USER_IDS.CLIENT);\n\n      // Get community with members\n      prismaService.community.findUnique.mockResolvedValue(mockCommunityWithMembers);\n      const withMembers = await service.getMembers(community.id);\n      expect(withMembers.members).toHaveLength(1);\n\n      // User leaves community\n      prismaService.membership.findFirstOrThrow.mockResolvedValue(mockMembership);\n      prismaService.membership.delete.mockResolvedValue(mockMembership);\n\n      await service.leaveCommunity(community.id, TEST_USER_IDS.CLIENT);\n\n      // Delete community\n      prismaService.community.delete.mockResolvedValue(updatedCommunity);\n      const deleted = await service.remove(community.id);\n      expect(deleted.id).toBe(community.id);\n    });\n\n    it('should handle room group and room creation workflow', async () => {\n      // Create room group\n      prismaService.roomGroup.create.mockResolvedValue(mockRoomGroup);\n      const roomGroup = await service.createRoomGroup('community-1', 'General Discussion', 1);\n      expect(roomGroup.name).toBe('General Discussion');\n\n      // Create rooms in the group\n      const room1 = { ...mockRoom, name: 'Welcome' };\n      const room2 = { ...mockRoom, id: 'room-2', name: 'General Chat' };\n      prismaService.room.create\n        .mockResolvedValueOnce(room1)\n        .mockResolvedValueOnce(room2);\n\n      const welcomeRoom = await service.createRoom(roomGroup.id, 'Welcome', 1);\n      const chatRoom = await service.createRoom(roomGroup.id, 'General Chat', 2);\n\n      expect(welcomeRoom.name).toBe('Welcome');\n      expect(chatRoom.name).toBe('General Chat');\n\n      // Find rooms by group\n      prismaService.room.findMany.mockResolvedValue([room1, room2]);\n      const rooms = await service.findRoomsByGroup(roomGroup.id);\n      expect(rooms).toHaveLength(2);\n    });\n\n    it('should handle complex membership scenarios', async () => {\n      // Multiple users joining same community\n      const users = [TEST_USER_IDS.CLIENT, TEST_USER_IDS.THERAPIST, TEST_USER_IDS.ADMIN];\n      \n      for (const userId of users) {\n        prismaService.membership.findFirst.mockResolvedValue(null);\n        prismaService.membership.create.mockResolvedValue({\n          ...mockMembership,\n          userId,\n        });\n\n        await service.joinCommunity('community-1', userId);\n      }\n\n      // Get all user communities\n      const userMemberships = [\n        { ...mockMembership, community: mockCommunity },\n        { ...mockMembership, community: { ...mockCommunity, id: 'community-2' } },\n      ];\n      prismaService.membership.findMany.mockResolvedValue(userMemberships);\n\n      const userCommunities = await service.findByUserId(TEST_USER_IDS.CLIENT);\n      expect(userCommunities).toHaveLength(2);\n    });\n  });\n\n  describe('Error Handling and Edge Cases', () => {\n    it('should handle concurrent join requests gracefully', async () => {\n      // First request succeeds\n      prismaService.membership.findFirst.mockResolvedValueOnce(null);\n      prismaService.membership.create.mockResolvedValueOnce(mockMembership);\n\n      // Second request finds existing membership\n      prismaService.membership.findFirst.mockResolvedValueOnce(mockMembership);\n\n      const promise1 = service.joinCommunity('community-1', TEST_USER_IDS.CLIENT);\n      const promise2 = service.joinCommunity('community-1', TEST_USER_IDS.CLIENT);\n\n      await expect(promise1).resolves.not.toThrow();\n      await expect(promise2).rejects.toThrow(ConflictException);\n    });\n\n    it('should handle database transaction failures', async () => {\n      const transactionError = new Error('Transaction rolled back');\n      prismaService.community.create.mockRejectedValue(transactionError);\n\n      await expect(\n        service.createCommunity({\n          name: 'Test Community',\n          description: 'Test description',\n        })\n      ).rejects.toThrow('Transaction rolled back');\n    });\n\n    it('should handle malformed slug generation', async () => {\n      const weirdNameData = {\n        name: '!!!@@@###$$$',\n        description: 'Community with weird characters',\n      };\n\n      await service.createCommunity(weirdNameData);\n\n      expect(prismaService.community.create).toHaveBeenCalledWith({\n        data: {\n          name: '!!!@@@###$$$',\n          slug: '!!!@@@###$$$',\n          description: 'Community with weird characters',\n          imageUrl: null,\n        },\n      });\n    });\n\n    it('should handle pagination edge cases', async () => {\n      // Test with very large limit\n      await service.getMembers('community-1', 1000, 0);\n\n      expect(prismaService.community.findUnique).toHaveBeenCalledWith(\n        expect.objectContaining({\n          include: {\n            memberships: expect.objectContaining({\n              take: 1000,\n              skip: 0,\n            }),\n          },\n        })\n      );\n\n      // Test with negative offset (should still work)\n      await service.getMembers('community-1', 10, -5);\n\n      expect(prismaService.community.findUnique).toHaveBeenCalledWith(\n        expect.objectContaining({\n          include: {\n            memberships: expect.objectContaining({\n              take: 10,\n              skip: -5,\n            }),\n          },\n        })\n      );\n    });\n  });\n});"],"version":3}