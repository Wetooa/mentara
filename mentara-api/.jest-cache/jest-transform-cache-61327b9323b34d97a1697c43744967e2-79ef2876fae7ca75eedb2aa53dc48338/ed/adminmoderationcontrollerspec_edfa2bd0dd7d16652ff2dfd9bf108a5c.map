{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/admin/controllers/admin-moderation.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/admin/controllers/admin-moderation.controller.spec.ts"],"sourcesContent":["/**\n * Comprehensive Test Suite for AdminModerationController\n * Tests admin moderation functionality including content review and AI moderation service integration\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { BadRequestException, NotFoundException, ForbiddenException, HttpException, HttpStatus } from '@nestjs/common';\nimport { AdminModerationController } from './admin-moderation.controller';\nimport { AdminService } from '../admin.service';\nimport { ModerationService, ModerationContext } from '../../common/services/moderation.service';\nimport { JwtAuthGuard } from '../../auth/guards/jwt-auth.guard';\nimport { AdminAuthGuard } from '../../auth/guards/admin-auth.guard';\nimport { SecurityGuardTestUtils, RoleBasedTestUtils } from '../../test-utils/auth-testing-helpers';\nimport { MockBuilder, TestDataGenerator, TestAssertions } from '../../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../../test-utils/index';\n\ndescribe('AdminModerationController', () => {\n  let controller: AdminModerationController;\n  let adminService: AdminService;\n  let moderationService: ModerationService;\n  let module: TestingModule;\n\n  // Mock AdminService\n  const mockAdminService = {\n    getFlaggedContent: jest.fn(),\n    moderateContent: jest.fn(),\n  };\n\n  // Mock ModerationService\n  const mockModerationService = {\n    healthCheck: jest.fn(),\n    getStats: jest.fn(),\n    classifyContent: jest.fn(),\n    checkCrisisContent: jest.fn(),\n    batchClassify: jest.fn(),\n  };\n\n  // Mock Guards\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  const mockAdminAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test data\n  const mockFlaggedContent = {\n    content: [\n      {\n        id: 'post_123456789',\n        type: 'post',\n        content: 'This post contains inappropriate content',\n        authorId: TEST_USER_IDS.CLIENT,\n        authorName: 'John Doe',\n        communityId: 'community_123',\n        communityName: 'Anxiety Support',\n        flaggedAt: new Date('2024-02-14T10:00:00Z'),\n        flaggedBy: TEST_USER_IDS.MODERATOR,\n        flagReason: 'Inappropriate content',\n        flagCount: 3,\n        status: 'pending',\n        priority: 'medium',\n        aiConfidence: 0.85,\n        aiTags: ['inappropriate', 'offensive'],\n      },\n      {\n        id: 'comment_987654321',\n        type: 'comment',\n        content: 'This comment violates community guidelines',\n        authorId: TEST_USER_IDS.CLIENT,\n        authorName: 'Jane Smith',\n        parentPostId: 'post_parent_123',\n        flaggedAt: new Date('2024-02-14T11:00:00Z'),\n        flaggedBy: 'system',\n        flagReason: 'Automated detection',\n        flagCount: 1,\n        status: 'pending',\n        priority: 'high',\n        aiConfidence: 0.92,\n        aiTags: ['harassment', 'toxic'],\n      },\n    ],\n    pagination: {\n      page: 1,\n      limit: 10,\n      total: 2,\n      totalPages: 1,\n    },\n    summary: {\n      totalFlagged: 2,\n      pendingReview: 2,\n      approved: 0,\n      removed: 0,\n      highPriority: 1,\n      mediumPriority: 1,\n      lowPriority: 0,\n    },\n  };\n\n  const mockModerationServiceHealth = {\n    status: 'healthy',\n    uptime: 3600000, // 1 hour\n    lastCheck: new Date(),\n    services: {\n      ai_classifier: { status: 'healthy', responseTime: 120 },\n      crisis_detector: { status: 'healthy', responseTime: 95 },\n      toxicity_filter: { status: 'healthy', responseTime: 80 },\n    },\n    version: '1.2.3',\n    capabilities: [\n      'text_classification',\n      'crisis_detection',\n      'toxicity_filtering',\n      'batch_processing',\n    ],\n  };\n\n  const mockModerationStats = {\n    totalProcessed: 15420,\n    today: {\n      processed: 234,\n      flagged: 23,\n      crisis: 3,\n      approved: 186,\n      removed: 25,\n    },\n    thisWeek: {\n      processed: 1654,\n      flagged: 156,\n      crisis: 18,\n      approved: 1245,\n      removed: 235,\n    },\n    accuracy: {\n      overall: 94.7,\n      crisis_detection: 98.2,\n      toxicity_detection: 92.1,\n      false_positives: 3.8,\n      false_negatives: 1.5,\n    },\n    performance: {\n      averageResponseTime: 85, // ms\n      throughput: 150, // requests per minute\n      errorRate: 0.2, // percentage\n    },\n  };\n\n  const mockClassificationResult = {\n    confidence: 0.87,\n    categories: ['inappropriate', 'offensive'],\n    severity: 'medium',\n    shouldFlag: true,\n    crisisLevel: 'none',\n    immediateEscalation: false,\n    explanation: 'Content contains inappropriate language and offensive remarks',\n    suggestedAction: 'flag_for_review',\n    metadata: {\n      processingTime: 120,\n      modelVersion: '2.1.0',\n      confidence_breakdown: {\n        inappropriate: 0.89,\n        offensive: 0.85,\n        harassment: 0.12,\n        toxic: 0.34,\n      },\n    },\n  };\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [AdminModerationController],\n      providers: [\n        {\n          provide: AdminService,\n          useValue: mockAdminService,\n        },\n        {\n          provide: ModerationService,\n          useValue: mockModerationService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .overrideGuard(AdminAuthGuard)\n      .useValue(mockAdminAuthGuard)\n      .compile();\n\n    controller = module.get<AdminModerationController>(AdminModerationController);\n    adminService = module.get<AdminService>(AdminService);\n    moderationService = module.get<ModerationService>(ModerationService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have adminService and moderationService injected', () => {\n      expect(adminService).toBeDefined();\n      expect(moderationService).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard and AdminAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', AdminModerationController);\n      expect(guards).toContain(JwtAuthGuard);\n      expect(guards).toContain(AdminAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', AdminModerationController);\n      expect(controllerMetadata).toBe('admin/moderation');\n    });\n\n    it('should have AdminOnly decorators on all methods', () => {\n      const methods = [\n        'getFlaggedContent',\n        'moderateContent',\n        'getServiceHealthStatus',\n        'getServiceStats',\n        'testClassification',\n        'testCrisisDetection',\n        'testBatchClassification',\n      ];\n      \n      methods.forEach(method => {\n        const metadata = Reflect.getMetadata('admin_only', controller[method as keyof AdminModerationController]);\n        expect(metadata).toBeTruthy();\n      });\n    });\n  });\n\n  describe('GET /admin/moderation/flagged', () => {\n    it('should get flagged content with default pagination', async () => {\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n\n      const result = await controller.getFlaggedContent(TEST_USER_IDS.ADMIN);\n\n      expect(result).toEqual(mockFlaggedContent);\n      expect(adminService.getFlaggedContent).toHaveBeenCalledWith({\n        type: undefined,\n        page: 1,\n        limit: 10,\n      });\n    });\n\n    it('should get flagged content with custom parameters', async () => {\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n\n      const result = await controller.getFlaggedContent(TEST_USER_IDS.ADMIN, 'post', '2', '20');\n\n      expect(result).toEqual(mockFlaggedContent);\n      expect(adminService.getFlaggedContent).toHaveBeenCalledWith({\n        type: 'post',\n        page: 2,\n        limit: 20,\n      });\n    });\n\n    it('should filter by content type', async () => {\n      const contentTypes = ['post', 'comment', 'message', 'profile'];\n      \n      for (const type of contentTypes) {\n        const filteredContent = {\n          ...mockFlaggedContent,\n          content: mockFlaggedContent.content.filter(item => item.type === type),\n        };\n        mockAdminService.getFlaggedContent.mockResolvedValue(filteredContent);\n\n        const result = await controller.getFlaggedContent(TEST_USER_IDS.ADMIN, type);\n\n        expect(adminService.getFlaggedContent).toHaveBeenCalledWith(\n          expect.objectContaining({ type })\n        );\n      }\n    });\n\n    it('should handle invalid pagination parameters', async () => {\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n\n      // Test with invalid string values that should be converted\n      const result = await controller.getFlaggedContent(TEST_USER_IDS.ADMIN, undefined, 'invalid', 'invalid');\n\n      expect(adminService.getFlaggedContent).toHaveBeenCalledWith({\n        type: undefined,\n        page: NaN,\n        limit: NaN,\n      });\n    });\n\n    it('should handle empty flagged content', async () => {\n      const emptyContent = {\n        content: [],\n        pagination: { page: 1, limit: 10, total: 0, totalPages: 0 },\n        summary: { totalFlagged: 0, pendingReview: 0, approved: 0, removed: 0, highPriority: 0, mediumPriority: 0, lowPriority: 0 },\n      };\n      mockAdminService.getFlaggedContent.mockResolvedValue(emptyContent);\n\n      const result = await controller.getFlaggedContent(TEST_USER_IDS.ADMIN);\n\n      expect(result.content).toHaveLength(0);\n      expect(result.summary.totalFlagged).toBe(0);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database query failed');\n      mockAdminService.getFlaggedContent.mockRejectedValue(serviceError);\n\n      await expect(controller.getFlaggedContent(TEST_USER_IDS.ADMIN)).rejects.toThrow(HttpException);\n      await expect(controller.getFlaggedContent(TEST_USER_IDS.ADMIN)).rejects.toThrow('Failed to retrieve flagged content');\n    });\n\n    it('should log admin actions', async () => {\n      const logSpy = jest.spyOn(controller['logger'], 'log');\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n\n      await controller.getFlaggedContent(TEST_USER_IDS.ADMIN);\n\n      expect(logSpy).toHaveBeenCalledWith(`Admin ${TEST_USER_IDS.ADMIN} retrieving flagged content`);\n    });\n  });\n\n  describe('PUT /admin/moderation/:contentType/:contentId/moderate', () => {\n    const contentType = 'post';\n    const contentId = 'post_123456789';\n    const moderationData = {\n      action: 'remove' as const,\n      reason: 'Violates community guidelines',\n    };\n\n    it('should moderate content successfully', async () => {\n      const moderatedContent = {\n        id: contentId,\n        type: contentType,\n        status: 'removed',\n        moderatedBy: TEST_USER_IDS.ADMIN,\n        moderatedAt: new Date(),\n        action: moderationData.action,\n        reason: moderationData.reason,\n      };\n      mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n\n      const result = await controller.moderateContent(\n        TEST_USER_IDS.ADMIN,\n        contentType,\n        contentId,\n        moderationData\n      );\n\n      expect(result).toEqual(moderatedContent);\n      expect(adminService.moderateContent).toHaveBeenCalledWith(\n        contentType,\n        contentId,\n        TEST_USER_IDS.ADMIN,\n        moderationData.action,\n        moderationData.reason\n      );\n    });\n\n    it('should handle all moderation actions', async () => {\n      const actions = ['approve', 'remove', 'flag'] as const;\n      \n      for (const action of actions) {\n        const data = { action, reason: `Test ${action} action` };\n        const moderatedContent = {\n          id: contentId,\n          type: contentType,\n          status: action === 'approve' ? 'approved' : action === 'remove' ? 'removed' : 'flagged',\n          action,\n        };\n        mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n\n        const result = await controller.moderateContent(\n          TEST_USER_IDS.ADMIN,\n          contentType,\n          contentId,\n          data\n        );\n\n        expect(result.action).toBe(action);\n      }\n    });\n\n    it('should handle different content types', async () => {\n      const contentTypes = ['post', 'comment', 'message', 'profile'];\n      \n      for (const type of contentTypes) {\n        const moderatedContent = {\n          id: contentId,\n          type,\n          status: 'approved',\n          action: 'approve',\n        };\n        mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n\n        const result = await controller.moderateContent(\n          TEST_USER_IDS.ADMIN,\n          type,\n          contentId,\n          { action: 'approve' }\n        );\n\n        expect(result.type).toBe(type);\n        expect(adminService.moderateContent).toHaveBeenCalledWith(\n          type,\n          contentId,\n          TEST_USER_IDS.ADMIN,\n          'approve',\n          undefined\n        );\n      }\n    });\n\n    it('should handle moderation without reason', async () => {\n      const dataWithoutReason = { action: 'approve' as const };\n      const moderatedContent = {\n        id: contentId,\n        type: contentType,\n        status: 'approved',\n        action: 'approve',\n      };\n      mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n\n      const result = await controller.moderateContent(\n        TEST_USER_IDS.ADMIN,\n        contentType,\n        contentId,\n        dataWithoutReason\n      );\n\n      expect(result).toEqual(moderatedContent);\n      expect(adminService.moderateContent).toHaveBeenCalledWith(\n        contentType,\n        contentId,\n        TEST_USER_IDS.ADMIN,\n        'approve',\n        undefined\n      );\n    });\n\n    it('should handle content not found', async () => {\n      const notFoundError = new Error('Content not found');\n      mockAdminService.moderateContent.mockRejectedValue(notFoundError);\n\n      await expect(\n        controller.moderateContent(TEST_USER_IDS.ADMIN, contentType, 'non-existent-id', moderationData)\n      ).rejects.toThrow(HttpException);\n    });\n\n    it('should log admin actions', async () => {\n      const logSpy = jest.spyOn(controller['logger'], 'log');\n      const moderatedContent = { id: contentId, status: 'removed' };\n      mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n\n      await controller.moderateContent(TEST_USER_IDS.ADMIN, contentType, contentId, moderationData);\n\n      expect(logSpy).toHaveBeenCalledWith(`Admin ${TEST_USER_IDS.ADMIN} moderating ${contentType} ${contentId}`);\n    });\n  });\n\n  describe('GET /admin/moderation/service/health', () => {\n    it('should get service health status successfully', async () => {\n      mockModerationService.healthCheck.mockResolvedValue(mockModerationServiceHealth);\n\n      const result = await controller.getServiceHealthStatus();\n\n      expect(result).toEqual(mockModerationServiceHealth);\n      expect(moderationService.healthCheck).toHaveBeenCalledWith();\n    });\n\n    it('should validate health response structure', async () => {\n      mockModerationService.healthCheck.mockResolvedValue(mockModerationServiceHealth);\n\n      const result = await controller.getServiceHealthStatus();\n\n      expect(result).toHaveProperty('status');\n      expect(result).toHaveProperty('uptime');\n      expect(result).toHaveProperty('services');\n      expect(result).toHaveProperty('capabilities');\n      expect(Array.isArray(result.capabilities)).toBe(true);\n      expect(typeof result.uptime).toBe('number');\n    });\n\n    it('should handle unhealthy service status', async () => {\n      const unhealthyStatus = {\n        ...mockModerationServiceHealth,\n        status: 'unhealthy',\n        services: {\n          ai_classifier: { status: 'unhealthy', responseTime: 5000, error: 'Timeout' },\n          crisis_detector: { status: 'healthy', responseTime: 95 },\n          toxicity_filter: { status: 'degraded', responseTime: 800 },\n        },\n      };\n      mockModerationService.healthCheck.mockResolvedValue(unhealthyStatus);\n\n      const result = await controller.getServiceHealthStatus();\n\n      expect(result.status).toBe('unhealthy');\n      expect(result.services.ai_classifier.status).toBe('unhealthy');\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Health check failed');\n      mockModerationService.healthCheck.mockRejectedValue(serviceError);\n\n      await expect(controller.getServiceHealthStatus()).rejects.toThrow(HttpException);\n      await expect(controller.getServiceHealthStatus()).rejects.toThrow('Failed to get moderation service health');\n    });\n  });\n\n  describe('GET /admin/moderation/service/stats', () => {\n    it('should get service statistics successfully', async () => {\n      mockModerationService.getStats.mockResolvedValue(mockModerationStats);\n\n      const result = await controller.getServiceStats();\n\n      expect(result).toEqual(mockModerationStats);\n      expect(moderationService.getStats).toHaveBeenCalledWith();\n    });\n\n    it('should validate stats response structure', async () => {\n      mockModerationService.getStats.mockResolvedValue(mockModerationStats);\n\n      const result = await controller.getServiceStats();\n\n      expect(result).toHaveProperty('totalProcessed');\n      expect(result).toHaveProperty('today');\n      expect(result).toHaveProperty('thisWeek');\n      expect(result).toHaveProperty('accuracy');\n      expect(result).toHaveProperty('performance');\n      expect(typeof result.totalProcessed).toBe('number');\n      expect(typeof result.accuracy.overall).toBe('number');\n      expect(typeof result.performance.averageResponseTime).toBe('number');\n    });\n\n    it('should handle empty statistics', async () => {\n      const emptyStats = {\n        totalProcessed: 0,\n        today: { processed: 0, flagged: 0, crisis: 0, approved: 0, removed: 0 },\n        thisWeek: { processed: 0, flagged: 0, crisis: 0, approved: 0, removed: 0 },\n        accuracy: { overall: 0, crisis_detection: 0, toxicity_detection: 0, false_positives: 0, false_negatives: 0 },\n        performance: { averageResponseTime: 0, throughput: 0, errorRate: 0 },\n      };\n      mockModerationService.getStats.mockResolvedValue(emptyStats);\n\n      const result = await controller.getServiceStats();\n\n      expect(result.totalProcessed).toBe(0);\n      expect(result.today.processed).toBe(0);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Stats service unavailable');\n      mockModerationService.getStats.mockRejectedValue(serviceError);\n\n      await expect(controller.getServiceStats()).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('POST /admin/moderation/service/test-classify', () => {\n    const testData = {\n      text: 'This is test content that might be inappropriate',\n      context: 'community_post',\n    };\n\n    it('should test content classification successfully', async () => {\n      mockModerationService.classifyContent.mockResolvedValue(mockClassificationResult);\n\n      const result = await controller.testClassification(TEST_USER_IDS.ADMIN, testData);\n\n      expect(result.result).toEqual(mockClassificationResult);\n      expect(result.testInfo.testedBy).toBe(TEST_USER_IDS.ADMIN);\n      expect(result.testInfo.inputText).toBe(testData.text);\n      expect(result.testInfo.inputContext).toBe(testData.context);\n    });\n\n    it('should handle different content types for classification', async () => {\n      const contentTypes = ['community_post', 'private_message', 'profile_text', 'comment'];\n      \n      for (const context of contentTypes) {\n        const data = { ...testData, context };\n        mockModerationService.classifyContent.mockResolvedValue(mockClassificationResult);\n\n        const result = await controller.testClassification(TEST_USER_IDS.ADMIN, data);\n\n        expect(moderationService.classifyContent).toHaveBeenCalledWith(\n          data.text,\n          expect.objectContaining({\n            context: data.context,\n            userId: TEST_USER_IDS.ADMIN,\n            userRole: 'admin',\n          })\n        );\n      }\n    });\n\n    it('should handle various text content', async () => {\n      const testTexts = [\n        'This is appropriate content',\n        'This content contains mild profanity',\n        'This content is extremely inappropriate and offensive',\n        'Help me, I am in crisis',\n        'Normal therapeutic discussion about anxiety',\n      ];\n\n      for (const text of testTexts) {\n        const data = { text, context: 'community_post' };\n        const classificationResult = {\n          ...mockClassificationResult,\n          severity: text.includes('crisis') ? 'high' : text.includes('inappropriate') ? 'medium' : 'low',\n          crisisLevel: text.includes('crisis') ? 'high' : 'none',\n        };\n        mockModerationService.classifyContent.mockResolvedValue(classificationResult);\n\n        const result = await controller.testClassification(TEST_USER_IDS.ADMIN, data);\n\n        expect(result.result.severity).toBeDefined();\n        expect(result.testInfo.inputText).toBe(text);\n      }\n    });\n\n    it('should handle classification errors', async () => {\n      const classificationError = new Error('AI service unavailable');\n      mockModerationService.classifyContent.mockRejectedValue(classificationError);\n\n      await expect(\n        controller.testClassification(TEST_USER_IDS.ADMIN, testData)\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('POST /admin/moderation/service/test-crisis', () => {\n    const crisisTestData = {\n      text: 'I am having thoughts of self-harm and need help',\n      context: 'private_message',\n    };\n\n    it('should test crisis detection successfully', async () => {\n      const crisisResult = {\n        ...mockClassificationResult,\n        crisisLevel: 'high',\n        immediateEscalation: true,\n      };\n      mockModerationService.checkCrisisContent.mockResolvedValue(true);\n      mockModerationService.classifyContent.mockResolvedValue(crisisResult);\n\n      const result = await controller.testCrisisDetection(TEST_USER_IDS.ADMIN, crisisTestData);\n\n      expect(result.isCrisis).toBe(true);\n      expect(result.crisisLevel).toBe('high');\n      expect(result.immediateEscalation).toBe(true);\n      expect(result.fullResult).toEqual(crisisResult);\n      expect(result.testInfo.testedBy).toBe(TEST_USER_IDS.ADMIN);\n    });\n\n    it('should handle non-crisis content', async () => {\n      const normalTestData = {\n        text: 'I am feeling better after our session',\n        context: 'community_post',\n      };\n      const normalResult = {\n        ...mockClassificationResult,\n        crisisLevel: 'none',\n        immediateEscalation: false,\n      };\n      mockModerationService.checkCrisisContent.mockResolvedValue(false);\n      mockModerationService.classifyContent.mockResolvedValue(normalResult);\n\n      const result = await controller.testCrisisDetection(TEST_USER_IDS.ADMIN, normalTestData);\n\n      expect(result.isCrisis).toBe(false);\n      expect(result.crisisLevel).toBe('none');\n      expect(result.immediateEscalation).toBe(false);\n    });\n\n    it('should handle different crisis levels', async () => {\n      const crisisLevels = ['none', 'low', 'medium', 'high', 'critical'];\n      \n      for (const level of crisisLevels) {\n        const testData = { text: `Crisis level ${level} content`, context: 'private_message' };\n        const isCrisis = level !== 'none';\n        const result = {\n          ...mockClassificationResult,\n          crisisLevel: level,\n          immediateEscalation: ['high', 'critical'].includes(level),\n        };\n        \n        mockModerationService.checkCrisisContent.mockResolvedValue(isCrisis);\n        mockModerationService.classifyContent.mockResolvedValue(result);\n\n        const testResult = await controller.testCrisisDetection(TEST_USER_IDS.ADMIN, testData);\n\n        expect(testResult.crisisLevel).toBe(level);\n        expect(testResult.isCrisis).toBe(isCrisis);\n      }\n    });\n\n    it('should handle crisis detection errors', async () => {\n      const crisisError = new Error('Crisis detection service failed');\n      mockModerationService.checkCrisisContent.mockRejectedValue(crisisError);\n\n      await expect(\n        controller.testCrisisDetection(TEST_USER_IDS.ADMIN, crisisTestData)\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('POST /admin/moderation/service/test-batch', () => {\n    const batchTestData = {\n      items: [\n        { text: 'This is appropriate content', context: 'community_post' },\n        { text: 'This contains inappropriate language', context: 'comment' },\n        { text: 'Crisis content requiring immediate attention', context: 'private_message' },\n      ],\n    };\n\n    it('should test batch classification successfully', async () => {\n      const batchResults = [\n        { ...mockClassificationResult, severity: 'low', shouldFlag: false },\n        { ...mockClassificationResult, severity: 'medium', shouldFlag: true },\n        { ...mockClassificationResult, severity: 'high', shouldFlag: true, crisisLevel: 'high' },\n      ];\n      mockModerationService.batchClassify.mockResolvedValue(batchResults);\n\n      const result = await controller.testBatchClassification(TEST_USER_IDS.ADMIN, batchTestData);\n\n      expect(result.results).toEqual(batchResults);\n      expect(result.testInfo.testedBy).toBe(TEST_USER_IDS.ADMIN);\n      expect(result.testInfo.itemCount).toBe(3);\n      expect(moderationService.batchClassify).toHaveBeenCalledWith(\n        expect.arrayContaining([\n          expect.objectContaining({\n            text: batchTestData.items[0].text,\n            context: expect.objectContaining({\n              context: batchTestData.items[0].context,\n              userId: TEST_USER_IDS.ADMIN,\n              userRole: 'admin',\n            }),\n          }),\n        ])\n      );\n    });\n\n    it('should handle empty batch', async () => {\n      const emptyBatch = { items: [] };\n      mockModerationService.batchClassify.mockResolvedValue([]);\n\n      const result = await controller.testBatchClassification(TEST_USER_IDS.ADMIN, emptyBatch);\n\n      expect(result.results).toEqual([]);\n      expect(result.testInfo.itemCount).toBe(0);\n    });\n\n    it('should handle large batches', async () => {\n      const largeBatch = {\n        items: Array.from({ length: 50 }, (_, i) => ({\n          text: `Test content item ${i + 1}`,\n          context: 'community_post',\n        })),\n      };\n      const largeBatchResults = Array.from({ length: 50 }, () => mockClassificationResult);\n      mockModerationService.batchClassify.mockResolvedValue(largeBatchResults);\n\n      const result = await controller.testBatchClassification(TEST_USER_IDS.ADMIN, largeBatch);\n\n      expect(result.results).toHaveLength(50);\n      expect(result.testInfo.itemCount).toBe(50);\n    });\n\n    it('should handle batch processing errors', async () => {\n      const batchError = new Error('Batch processing failed');\n      mockModerationService.batchClassify.mockRejectedValue(batchError);\n\n      await expect(\n        controller.testBatchClassification(TEST_USER_IDS.ADMIN, batchTestData)\n      ).rejects.toThrow(HttpException);\n    });\n\n    it('should handle mixed content types in batch', async () => {\n      const mixedBatch = {\n        items: [\n          { text: 'Community post content', context: 'community_post' },\n          { text: 'Private message content', context: 'private_message' },\n          { text: 'Comment content', context: 'comment' },\n          { text: 'Profile description', context: 'profile_text' },\n        ],\n      };\n      const mixedResults = mixedBatch.items.map(() => mockClassificationResult);\n      mockModerationService.batchClassify.mockResolvedValue(mixedResults);\n\n      const result = await controller.testBatchClassification(TEST_USER_IDS.ADMIN, mixedBatch);\n\n      expect(result.results).toHaveLength(4);\n      expect(moderationService.batchClassify).toHaveBeenCalledWith(\n        expect.arrayContaining([\n          expect.objectContaining({\n            context: expect.objectContaining({ context: 'community_post' }),\n          }),\n          expect.objectContaining({\n            context: expect.objectContaining({ context: 'private_message' }),\n          }),\n          expect.objectContaining({\n            context: expect.objectContaining({ context: 'comment' }),\n          }),\n          expect.objectContaining({\n            context: expect.objectContaining({ context: 'profile_text' }),\n          }),\n        ])\n      );\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle service unavailable scenarios', async () => {\n      const serviceError = new Error('Service temporarily unavailable');\n      mockAdminService.getFlaggedContent.mockRejectedValue(serviceError);\n\n      await expect(controller.getFlaggedContent(TEST_USER_IDS.ADMIN)).rejects.toThrow(HttpException);\n    });\n\n    it('should handle AI service integration errors', async () => {\n      const aiServiceError = new Error('AI service timeout');\n      mockModerationService.classifyContent.mockRejectedValue(aiServiceError);\n\n      await expect(\n        controller.testClassification(TEST_USER_IDS.ADMIN, { text: 'test', context: 'test' })\n      ).rejects.toThrow(HttpException);\n    });\n\n    it('should handle database errors gracefully', async () => {\n      const dbError = new Error('Database connection failed');\n      mockAdminService.moderateContent.mockRejectedValue(dbError);\n\n      await expect(\n        controller.moderateContent(TEST_USER_IDS.ADMIN, 'post', 'post_123', { action: 'approve' })\n      ).rejects.toThrow(HttpException);\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted flagged content response', async () => {\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n\n      const result = await controller.getFlaggedContent(TEST_USER_IDS.ADMIN);\n\n      expect(result).toHaveProperty('content');\n      expect(result).toHaveProperty('pagination');\n      expect(result).toHaveProperty('summary');\n      expect(Array.isArray(result.content)).toBe(true);\n      result.content.forEach((item) => {\n        TestAssertions.expectValidEntity(item, ['id', 'type', 'content', 'authorId', 'flaggedAt']);\n        expect(['pending', 'approved', 'removed']).toContain(item.status);\n        expect(['low', 'medium', 'high']).toContain(item.priority);\n      });\n    });\n\n    it('should return properly formatted health check response', async () => {\n      mockModerationService.healthCheck.mockResolvedValue(mockModerationServiceHealth);\n\n      const result = await controller.getServiceHealthStatus();\n\n      expect(result).toHaveProperty('status');\n      expect(result).toHaveProperty('services');\n      expect(typeof result.uptime).toBe('number');\n      Object.values(result.services).forEach((service: any) => {\n        expect(service).toHaveProperty('status');\n        expect(service).toHaveProperty('responseTime');\n      });\n    });\n\n    it('should return properly formatted classification test response', async () => {\n      mockModerationService.classifyContent.mockResolvedValue(mockClassificationResult);\n\n      const result = await controller.testClassification(TEST_USER_IDS.ADMIN, {\n        text: 'test',\n        context: 'test',\n      });\n\n      expect(result).toHaveProperty('result');\n      expect(result).toHaveProperty('testInfo');\n      expect(result.result).toHaveProperty('confidence');\n      expect(result.result).toHaveProperty('categories');\n      expect(result.result).toHaveProperty('severity');\n      expect(typeof result.result.confidence).toBe('number');\n      expect(Array.isArray(result.result.categories)).toBe(true);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete moderation workflow', async () => {\n      // Get flagged content\n      mockAdminService.getFlaggedContent.mockResolvedValue(mockFlaggedContent);\n      const flaggedContent = await controller.getFlaggedContent(TEST_USER_IDS.ADMIN);\n      expect(flaggedContent.content).toHaveLength(2);\n\n      // Test classify content\n      mockModerationService.classifyContent.mockResolvedValue(mockClassificationResult);\n      const classification = await controller.testClassification(TEST_USER_IDS.ADMIN, {\n        text: flaggedContent.content[0].content,\n        context: 'community_post',\n      });\n      expect(classification.result.shouldFlag).toBeDefined();\n\n      // Moderate content\n      const moderatedContent = { id: 'post_123', status: 'removed' };\n      mockAdminService.moderateContent.mockResolvedValue(moderatedContent);\n      const moderation = await controller.moderateContent(\n        TEST_USER_IDS.ADMIN,\n        'post',\n        'post_123',\n        { action: 'remove', reason: 'Inappropriate content' }\n      );\n      expect(moderation.status).toBe('removed');\n    });\n\n    it('should handle service health monitoring workflow', async () => {\n      // Check service health\n      mockModerationService.healthCheck.mockResolvedValue(mockModerationServiceHealth);\n      const health = await controller.getServiceHealthStatus();\n      expect(health.status).toBe('healthy');\n\n      // Get service statistics\n      mockModerationService.getStats.mockResolvedValue(mockModerationStats);\n      const stats = await controller.getServiceStats();\n      expect(stats.totalProcessed).toBeGreaterThan(0);\n\n      // Test crisis detection\n      mockModerationService.checkCrisisContent.mockResolvedValue(true);\n      mockModerationService.classifyContent.mockResolvedValue({\n        ...mockClassificationResult,\n        crisisLevel: 'high',\n      });\n      const crisisTest = await controller.testCrisisDetection(TEST_USER_IDS.ADMIN, {\n        text: 'I need help urgently',\n        context: 'private_message',\n      });\n      expect(crisisTest.isCrisis).toBe(true);\n    });\n  });\n});"],"version":3}