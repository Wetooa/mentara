{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/test-utils/index.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/test-utils/index.ts"],"sourcesContent":["export { DatabaseTestSetup } from './database-test.setup';\nexport { TestDataFactory } from './test-data.factory';\n\n// Mock utilities\nconst createMockPrismaModel = () => ({\n  findUnique: jest.fn().mockResolvedValue(null),\n  findMany: jest.fn().mockResolvedValue([]),\n  create: jest.fn().mockResolvedValue({}),\n  update: jest.fn().mockResolvedValue({}),\n  updateMany: jest.fn().mockResolvedValue({ count: 0 }),\n  delete: jest.fn().mockResolvedValue({}),\n  deleteMany: jest.fn().mockResolvedValue({ count: 0 }),\n  findFirst: jest.fn().mockResolvedValue(null),\n  count: jest.fn().mockResolvedValue(0),\n  groupBy: jest.fn().mockResolvedValue([]),\n  aggregate: jest\n    .fn()\n    .mockResolvedValue({ _sum: {}, _avg: {}, _count: {}, _max: {}, _min: {} }),\n  upsert: jest.fn().mockResolvedValue({}),\n  createMany: jest.fn().mockResolvedValue({ count: 0 }),\n});\n\nexport const createMockPrismaService = () => ({\n  user: createMockPrismaModel(),\n  client: createMockPrismaModel(),\n  therapist: createMockPrismaModel(),\n  community: createMockPrismaModel(),\n  post: createMockPrismaModel(),\n  comment: createMockPrismaModel(),\n  reply: createMockPrismaModel(),\n  commentHeart: createMockPrismaModel(),\n  replyHeart: createMockPrismaModel(),\n  fileAttachment: createMockPrismaModel(),\n  meeting: createMockPrismaModel(),\n  preAssessment: createMockPrismaModel(),\n  membership: createMockPrismaModel(),\n  clientTherapist: createMockPrismaModel(),\n  therapistAvailability: createMockPrismaModel(),\n  // Audit and System models\n  auditLog: createMockPrismaModel(),\n  systemEvent: createMockPrismaModel(),\n  dataChangeLog: createMockPrismaModel(),\n  // Billing models\n  subscription: createMockPrismaModel(),\n  subscriptionPlan: createMockPrismaModel(),\n  paymentMethod: createMockPrismaModel(),\n  payment: createMockPrismaModel(),\n  invoice: createMockPrismaModel(),\n  discount: createMockPrismaModel(),\n  discountRedemption: createMockPrismaModel(),\n  usageRecord: createMockPrismaModel(),\n  // Messaging models\n  conversation: createMockPrismaModel(),\n  conversationParticipant: createMockPrismaModel(),\n  message: createMockPrismaModel(),\n  messageReadReceipt: createMockPrismaModel(),\n  messageReaction: createMockPrismaModel(),\n  userBlock: createMockPrismaModel(),\n  // Additional models that might be needed\n  worksheetType: createMockPrismaModel(),\n  worksheet: createMockPrismaModel(),\n  worksheetSubmission: createMockPrismaModel(),\n  session: createMockPrismaModel(),\n  review: createMockPrismaModel(),\n  notification: createMockPrismaModel(),\n  file: createMockPrismaModel(),\n  admin: createMockPrismaModel(),\n  moderator: createMockPrismaModel(),\n  $disconnect: jest.fn(),\n  $connect: jest.fn(),\n  $executeRawUnsafe: jest.fn(),\n  $transaction: jest.fn(),\n});\n\n// Event Bus Mocks\nexport const createMockEventBus = () => ({\n  emit: jest.fn(),\n  subscribe: jest.fn(),\n  unsubscribe: jest.fn(),\n  subscribeToAggregate: jest.fn(),\n  subscribeToAll: jest.fn(),\n  getEventStats: jest.fn(),\n  hasListeners: jest.fn(),\n  removeAllListeners: jest.fn(),\n});\n\n// Auth Mocks\nexport const createMockAuthGuard = () => ({\n  canActivate: jest.fn().mockReturnValue(true),\n});\n\nexport const createMockClerkClient = () => ({\n  users: {\n    getUser: jest.fn(),\n    updateUser: jest.fn(),\n    deleteUser: jest.fn(),\n  },\n});\n\n// Common test constants\nexport const TEST_USER_IDS = {\n  CLIENT: 'test-client-123',\n  THERAPIST: 'test-therapist-456',\n  ADMIN: 'test-admin-789',\n  MODERATOR: 'test-moderator-101',\n};\n\nexport const TEST_EMAILS = {\n  CLIENT: 'test-client@example.com',\n  THERAPIST: 'test-therapist@example.com',\n  ADMIN: 'test-admin@example.com',\n  MODERATOR: 'test-moderator@example.com',\n};\n\n// Helper functions for tests\nexport const delay = (ms: number) =>\n  new Promise((resolve) => setTimeout(resolve, ms));\n\nexport const expectToThrowAsync = async (\n  asyncFn: () => Promise<any>,\n  expectedError: any,\n) => {\n  let error: any = null;\n  try {\n    await asyncFn();\n  } catch (e) {\n    error = e;\n  }\n  expect(error).toBeInstanceOf(expectedError);\n};\n\nexport const waitForCondition = async (\n  condition: () => boolean,\n  timeoutMs: number = 5000,\n  intervalMs: number = 100,\n): Promise<void> => {\n  const startTime = Date.now();\n  while (!condition()) {\n    if (Date.now() - startTime > timeoutMs) {\n      throw new Error(`Condition not met within ${timeoutMs}ms`);\n    }\n    await delay(intervalMs);\n  }\n};\n"],"version":3}