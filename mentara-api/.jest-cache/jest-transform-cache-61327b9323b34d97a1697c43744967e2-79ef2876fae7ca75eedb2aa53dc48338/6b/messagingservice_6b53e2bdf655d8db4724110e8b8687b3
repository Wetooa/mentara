9d7cc8a013d870234ade155eb6b7d956
"use strict";

/* istanbul ignore next */
function cov_1p55oijc5l() {
  var path = "/home/wetooa/Documents/code/projects/mentara/mentara-api/src/messaging/messaging.service.ts";
  var hash = "8659850a0cb9672ec8ba6167d1eb832598efdcba";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/wetooa/Documents/code/projects/mentara/mentara-api/src/messaging/messaging.service.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 17
        },
        end: {
          line: 7,
          column: 1
        }
      },
      "1": {
        start: {
          line: 3,
          column: 12
        },
        end: {
          line: 3,
          column: 28
        }
      },
      "2": {
        start: {
          line: 3,
          column: 34
        },
        end: {
          line: 3,
          column: 125
        }
      },
      "3": {
        start: {
          line: 4,
          column: 4
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "4": {
        start: {
          line: 4,
          column: 79
        },
        end: {
          line: 4,
          column: 131
        }
      },
      "5": {
        start: {
          line: 5,
          column: 9
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "6": {
        start: {
          line: 5,
          column: 22
        },
        end: {
          line: 5,
          column: 43
        }
      },
      "7": {
        start: {
          line: 5,
          column: 58
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "8": {
        start: {
          line: 5,
          column: 81
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "9": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 6,
          column: 66
        }
      },
      "10": {
        start: {
          line: 8,
          column: 17
        },
        end: {
          line: 10,
          column: 1
        }
      },
      "11": {
        start: {
          line: 9,
          column: 4
        },
        end: {
          line: 9,
          column: 109
        }
      },
      "12": {
        start: {
          line: 9,
          column: 79
        },
        end: {
          line: 9,
          column: 109
        }
      },
      "13": {
        start: {
          line: 13,
          column: 0
        },
        end: {
          line: 13,
          column: 62
        }
      },
      "14": {
        start: {
          line: 14,
          column: 0
        },
        end: {
          line: 14,
          column: 34
        }
      },
      "15": {
        start: {
          line: 15,
          column: 17
        },
        end: {
          line: 15,
          column: 42
        }
      },
      "16": {
        start: {
          line: 16,
          column: 33
        },
        end: {
          line: 16,
          column: 79
        }
      },
      "17": {
        start: {
          line: 17,
          column: 17
        },
        end: {
          line: 17,
          column: 42
        }
      },
      "18": {
        start: {
          line: 18,
          column: 28
        },
        end: {
          line: 18,
          column: 73
        }
      },
      "19": {
        start: {
          line: 19,
          column: 27
        },
        end: {
          line: 19,
          column: 71
        }
      },
      "20": {
        start: {
          line: 20,
          column: 37
        },
        end: {
          line: 20,
          column: 85
        }
      },
      "21": {
        start: {
          line: 21,
          column: 23
        },
        end: {
          line: 652,
          column: 1
        }
      },
      "22": {
        start: {
          line: 25,
          column: 13
        },
        end: {
          line: 25,
          column: 57
        }
      },
      "23": {
        start: {
          line: 27,
          column: 8
        },
        end: {
          line: 27,
          column: 29
        }
      },
      "24": {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 28,
          column: 33
        }
      },
      "25": {
        start: {
          line: 29,
          column: 8
        },
        end: {
          line: 29,
          column: 51
        }
      },
      "26": {
        start: {
          line: 33,
          column: 84
        },
        end: {
          line: 33,
          column: 105
        }
      },
      "27": {
        start: {
          line: 35,
          column: 8
        },
        end: {
          line: 37,
          column: 9
        }
      },
      "28": {
        start: {
          line: 36,
          column: 12
        },
        end: {
          line: 36,
          column: 115
        }
      },
      "29": {
        start: {
          line: 39,
          column: 8
        },
        end: {
          line: 44,
          column: 9
        }
      },
      "30": {
        start: {
          line: 40,
          column: 41
        },
        end: {
          line: 40,
          column: 101
        }
      },
      "31": {
        start: {
          line: 41,
          column: 12
        },
        end: {
          line: 43,
          column: 13
        }
      },
      "32": {
        start: {
          line: 42,
          column: 16
        },
        end: {
          line: 42,
          column: 44
        }
      },
      "33": {
        start: {
          line: 46,
          column: 29
        },
        end: {
          line: 89,
          column: 10
        }
      },
      "34": {
        start: {
          line: 53,
          column: 66
        },
        end: {
          line: 56,
          column: 25
        }
      },
      "35": {
        start: {
          line: 91,
          column: 8
        },
        end: {
          line: 98,
          column: 12
        }
      },
      "36": {
        start: {
          line: 99,
          column: 8
        },
        end: {
          line: 99,
          column: 28
        }
      },
      "37": {
        start: {
          line: 102,
          column: 21
        },
        end: {
          line: 102,
          column: 39
        }
      },
      "38": {
        start: {
          line: 103,
          column: 30
        },
        end: {
          line: 159,
          column: 10
        }
      },
      "39": {
        start: {
          line: 160,
          column: 8
        },
        end: {
          line: 160,
          column: 29
        }
      },
      "40": {
        start: {
          line: 165,
          column: 8
        },
        end: {
          line: 165,
          column: 61
        }
      },
      "41": {
        start: {
          line: 166,
          column: 128
        },
        end: {
          line: 166,
          column: 142
        }
      },
      "42": {
        start: {
          line: 168,
          column: 29
        },
        end: {
          line: 179,
          column: 10
        }
      },
      "43": {
        start: {
          line: 180,
          column: 8
        },
        end: {
          line: 182,
          column: 9
        }
      },
      "44": {
        start: {
          line: 181,
          column: 12
        },
        end: {
          line: 181,
          column: 75
        }
      },
      "45": {
        start: {
          line: 184,
          column: 33
        },
        end: {
          line: 184,
          column: 138
        }
      },
      "46": {
        start: {
          line: 184,
          column: 114
        },
        end: {
          line: 184,
          column: 135
        }
      },
      "47": {
        start: {
          line: 186,
          column: 27
        },
        end: {
          line: 186,
          column: 34
        }
      },
      "48": {
        start: {
          line: 187,
          column: 29
        },
        end: {
          line: 187,
          column: 33
        }
      },
      "49": {
        start: {
          line: 188,
          column: 8
        },
        end: {
          line: 197,
          column: 9
        }
      },
      "50": {
        start: {
          line: 189,
          column: 12
        },
        end: {
          line: 196,
          column: 13
        }
      },
      "51": {
        start: {
          line: 190,
          column: 16
        },
        end: {
          line: 190,
          column: 104
        }
      },
      "52": {
        start: {
          line: 191,
          column: 16
        },
        end: {
          line: 191,
          column: 63
        }
      },
      "53": {
        start: {
          line: 194,
          column: 16
        },
        end: {
          line: 194,
          column: 90
        }
      },
      "54": {
        start: {
          line: 198,
          column: 24
        },
        end: {
          line: 251,
          column: 10
        }
      },
      "55": {
        start: {
          line: 253,
          column: 8
        },
        end: {
          line: 256,
          column: 11
        }
      },
      "56": {
        start: {
          line: 258,
          column: 27
        },
        end: {
          line: 258,
          column: 34
        }
      },
      "57": {
        start: {
          line: 259,
          column: 8
        },
        end: {
          line: 262,
          column: 9
        }
      },
      "58": {
        start: {
          line: 261,
          column: 12
        },
        end: {
          line: 261,
          column: 35
        }
      },
      "59": {
        start: {
          line: 263,
          column: 29
        },
        end: {
          line: 265,
          column: 48
        }
      },
      "60": {
        start: {
          line: 264,
          column: 24
        },
        end: {
          line: 264,
          column: 32
        }
      },
      "61": {
        start: {
          line: 265,
          column: 28
        },
        end: {
          line: 265,
          column: 41
        }
      },
      "62": {
        start: {
          line: 267,
          column: 8
        },
        end: {
          line: 282,
          column: 12
        }
      },
      "63": {
        start: {
          line: 284,
          column: 8
        },
        end: {
          line: 287,
          column: 10
        }
      },
      "64": {
        start: {
          line: 291,
          column: 8
        },
        end: {
          line: 291,
          column: 61
        }
      },
      "65": {
        start: {
          line: 292,
          column: 21
        },
        end: {
          line: 292,
          column: 39
        }
      },
      "66": {
        start: {
          line: 293,
          column: 25
        },
        end: {
          line: 344,
          column: 10
        }
      },
      "67": {
        start: {
          line: 346,
          column: 34
        },
        end: {
          line: 373,
          column: 11
        }
      },
      "68": {
        start: {
          line: 347,
          column: 12
        },
        end: {
          line: 371,
          column: 13
        }
      },
      "69": {
        start: {
          line: 351,
          column: 16
        },
        end: {
          line: 370,
          column: 17
        }
      },
      "70": {
        start: {
          line: 352,
          column: 45
        },
        end: {
          line: 357,
          column: 21
        }
      },
      "71": {
        start: {
          line: 358,
          column: 38
        },
        end: {
          line: 358,
          column: 99
        }
      },
      "72": {
        start: {
          line: 359,
          column: 20
        },
        end: {
          line: 362,
          column: 22
        }
      },
      "73": {
        start: {
          line: 365,
          column: 20
        },
        end: {
          line: 365,
          column: 89
        }
      },
      "74": {
        start: {
          line: 366,
          column: 20
        },
        end: {
          line: 369,
          column: 22
        }
      },
      "75": {
        start: {
          line: 372,
          column: 12
        },
        end: {
          line: 372,
          column: 27
        }
      },
      "76": {
        start: {
          line: 374,
          column: 8
        },
        end: {
          line: 374,
          column: 43
        }
      },
      "77": {
        start: {
          line: 377,
          column: 24
        },
        end: {
          line: 379,
          column: 10
        }
      },
      "78": {
        start: {
          line: 380,
          column: 8
        },
        end: {
          line: 382,
          column: 9
        }
      },
      "79": {
        start: {
          line: 381,
          column: 12
        },
        end: {
          line: 381,
          column: 70
        }
      },
      "80": {
        start: {
          line: 383,
          column: 8
        },
        end: {
          line: 385,
          column: 9
        }
      },
      "81": {
        start: {
          line: 384,
          column: 12
        },
        end: {
          line: 384,
          column: 89
        }
      },
      "82": {
        start: {
          line: 386,
          column: 8
        },
        end: {
          line: 388,
          column: 9
        }
      },
      "83": {
        start: {
          line: 387,
          column: 12
        },
        end: {
          line: 387,
          column: 82
        }
      },
      "84": {
        start: {
          line: 389,
          column: 31
        },
        end: {
          line: 417,
          column: 10
        }
      },
      "85": {
        start: {
          line: 418,
          column: 8
        },
        end: {
          line: 418,
          column: 30
        }
      },
      "86": {
        start: {
          line: 421,
          column: 24
        },
        end: {
          line: 423,
          column: 10
        }
      },
      "87": {
        start: {
          line: 424,
          column: 8
        },
        end: {
          line: 426,
          column: 9
        }
      },
      "88": {
        start: {
          line: 425,
          column: 12
        },
        end: {
          line: 425,
          column: 70
        }
      },
      "89": {
        start: {
          line: 427,
          column: 8
        },
        end: {
          line: 429,
          column: 9
        }
      },
      "90": {
        start: {
          line: 428,
          column: 12
        },
        end: {
          line: 428,
          column: 91
        }
      },
      "91": {
        start: {
          line: 430,
          column: 8
        },
        end: {
          line: 433,
          column: 11
        }
      },
      "92": {
        start: {
          line: 434,
          column: 8
        },
        end: {
          line: 434,
          column: 33
        }
      },
      "93": {
        start: {
          line: 438,
          column: 24
        },
        end: {
          line: 440,
          column: 10
        }
      },
      "94": {
        start: {
          line: 441,
          column: 8
        },
        end: {
          line: 443,
          column: 9
        }
      },
      "95": {
        start: {
          line: 442,
          column: 12
        },
        end: {
          line: 442,
          column: 70
        }
      },
      "96": {
        start: {
          line: 445,
          column: 8
        },
        end: {
          line: 447,
          column: 9
        }
      },
      "97": {
        start: {
          line: 446,
          column: 12
        },
        end: {
          line: 446,
          column: 19
        }
      },
      "98": {
        start: {
          line: 449,
          column: 8
        },
        end: {
          line: 449,
          column: 69
        }
      },
      "99": {
        start: {
          line: 450,
          column: 8
        },
        end: {
          line: 464,
          column: 11
        }
      },
      "100": {
        start: {
          line: 466,
          column: 8
        },
        end: {
          line: 474,
          column: 11
        }
      },
      "101": {
        start: {
          line: 476,
          column: 8
        },
        end: {
          line: 482,
          column: 12
        }
      },
      "102": {
        start: {
          line: 486,
          column: 24
        },
        end: {
          line: 488,
          column: 10
        }
      },
      "103": {
        start: {
          line: 489,
          column: 8
        },
        end: {
          line: 491,
          column: 9
        }
      },
      "104": {
        start: {
          line: 490,
          column: 12
        },
        end: {
          line: 490,
          column: 70
        }
      },
      "105": {
        start: {
          line: 493,
          column: 8
        },
        end: {
          line: 493,
          column: 69
        }
      },
      "106": {
        start: {
          line: 494,
          column: 25
        },
        end: {
          line: 519,
          column: 10
        }
      },
      "107": {
        start: {
          line: 520,
          column: 8
        },
        end: {
          line: 520,
          column: 24
        }
      },
      "108": {
        start: {
          line: 523,
          column: 8
        },
        end: {
          line: 529,
          column: 11
        }
      },
      "109": {
        start: {
          line: 530,
          column: 8
        },
        end: {
          line: 530,
          column: 33
        }
      },
      "110": {
        start: {
          line: 534,
          column: 8
        },
        end: {
          line: 536,
          column: 9
        }
      },
      "111": {
        start: {
          line: 535,
          column: 12
        },
        end: {
          line: 535,
          column: 76
        }
      },
      "112": {
        start: {
          line: 537,
          column: 8
        },
        end: {
          line: 552,
          column: 11
        }
      },
      "113": {
        start: {
          line: 553,
          column: 8
        },
        end: {
          line: 553,
          column: 33
        }
      },
      "114": {
        start: {
          line: 556,
          column: 8
        },
        end: {
          line: 561,
          column: 11
        }
      },
      "115": {
        start: {
          line: 562,
          column: 8
        },
        end: {
          line: 562,
          column: 33
        }
      },
      "116": {
        start: {
          line: 566,
          column: 8
        },
        end: {
          line: 590,
          column: 11
        }
      },
      "117": {
        start: {
          line: 593,
          column: 28
        },
        end: {
          line: 600,
          column: 10
        }
      },
      "118": {
        start: {
          line: 601,
          column: 8
        },
        end: {
          line: 603,
          column: 9
        }
      },
      "119": {
        start: {
          line: 602,
          column: 12
        },
        end: {
          line: 602,
          column: 100
        }
      },
      "120": {
        start: {
          line: 604,
          column: 8
        },
        end: {
          line: 604,
          column: 27
        }
      },
      "121": {
        start: {
          line: 608,
          column: 21
        },
        end: {
          line: 608,
          column: 39
        }
      },
      "122": {
        start: {
          line: 609,
          column: 28
        },
        end: {
          line: 623,
          column: 9
        }
      },
      "123": {
        start: {
          line: 624,
          column: 8
        },
        end: {
          line: 626,
          column: 9
        }
      },
      "124": {
        start: {
          line: 625,
          column: 12
        },
        end: {
          line: 625,
          column: 56
        }
      },
      "125": {
        start: {
          line: 627,
          column: 25
        },
        end: {
          line: 649,
          column: 10
        }
      },
      "126": {
        start: {
          line: 650,
          column: 8
        },
        end: {
          line: 650,
          column: 24
        }
      },
      "127": {
        start: {
          line: 653,
          column: 0
        },
        end: {
          line: 653,
          column: 44
        }
      },
      "128": {
        start: {
          line: 654,
          column: 0
        },
        end: {
          line: 657,
          column: 21
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 2,
            column: 46
          },
          end: {
            line: 2,
            column: 47
          }
        },
        loc: {
          start: {
            line: 2,
            column: 87
          },
          end: {
            line: 7,
            column: 1
          }
        },
        line: 2
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 8,
            column: 46
          },
          end: {
            line: 8,
            column: 47
          }
        },
        loc: {
          start: {
            line: 8,
            column: 62
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 8
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 26,
            column: 4
          },
          end: {
            line: 26,
            column: 5
          }
        },
        loc: {
          start: {
            line: 26,
            column: 53
          },
          end: {
            line: 30,
            column: 5
          }
        },
        line: 26
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 32,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        },
        loc: {
          start: {
            line: 32,
            column: 60
          },
          end: {
            line: 100,
            column: 5
          }
        },
        line: 32
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 53,
            column: 46
          },
          end: {
            line: 53,
            column: 47
          }
        },
        loc: {
          start: {
            line: 53,
            column: 66
          },
          end: {
            line: 56,
            column: 25
          }
        },
        line: 53
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 101,
            column: 4
          },
          end: {
            line: 101,
            column: 5
          }
        },
        loc: {
          start: {
            line: 101,
            column: 61
          },
          end: {
            line: 161,
            column: 5
          }
        },
        line: 101
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 163,
            column: 4
          },
          end: {
            line: 163,
            column: 5
          }
        },
        loc: {
          start: {
            line: 163,
            column: 127
          },
          end: {
            line: 288,
            column: 5
          }
        },
        line: 163
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 184,
            column: 106
          },
          end: {
            line: 184,
            column: 107
          }
        },
        loc: {
          start: {
            line: 184,
            column: 114
          },
          end: {
            line: 184,
            column: 135
          }
        },
        line: 184
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 264,
            column: 17
          },
          end: {
            line: 264,
            column: 18
          }
        },
        loc: {
          start: {
            line: 264,
            column: 24
          },
          end: {
            line: 264,
            column: 32
          }
        },
        line: 264
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 265,
            column: 20
          },
          end: {
            line: 265,
            column: 21
          }
        },
        loc: {
          start: {
            line: 265,
            column: 28
          },
          end: {
            line: 265,
            column: 41
          }
        },
        line: 265
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 289,
            column: 4
          },
          end: {
            line: 289,
            column: 5
          }
        },
        loc: {
          start: {
            line: 289,
            column: 80
          },
          end: {
            line: 375,
            column: 5
          }
        },
        line: 289
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 346,
            column: 65
          },
          end: {
            line: 346,
            column: 66
          }
        },
        loc: {
          start: {
            line: 346,
            column: 84
          },
          end: {
            line: 373,
            column: 9
          }
        },
        line: 346
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 376,
            column: 4
          },
          end: {
            line: 376,
            column: 5
          }
        },
        loc: {
          start: {
            line: 376,
            column: 61
          },
          end: {
            line: 419,
            column: 5
          }
        },
        line: 376
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 420,
            column: 4
          },
          end: {
            line: 420,
            column: 5
          }
        },
        loc: {
          start: {
            line: 420,
            column: 43
          },
          end: {
            line: 435,
            column: 5
          }
        },
        line: 420
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 437,
            column: 4
          },
          end: {
            line: 437,
            column: 5
          }
        },
        loc: {
          start: {
            line: 437,
            column: 47
          },
          end: {
            line: 483,
            column: 5
          }
        },
        line: 437
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 485,
            column: 4
          },
          end: {
            line: 485,
            column: 5
          }
        },
        loc: {
          start: {
            line: 485,
            column: 55
          },
          end: {
            line: 521,
            column: 5
          }
        },
        line: 485
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 522,
            column: 4
          },
          end: {
            line: 522,
            column: 5
          }
        },
        loc: {
          start: {
            line: 522,
            column: 58
          },
          end: {
            line: 531,
            column: 5
          }
        },
        line: 522
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 533,
            column: 4
          },
          end: {
            line: 533,
            column: 5
          }
        },
        loc: {
          start: {
            line: 533,
            column: 50
          },
          end: {
            line: 554,
            column: 5
          }
        },
        line: 533
      },
      "18": {
        name: "(anonymous_18)",
        decl: {
          start: {
            line: 555,
            column: 4
          },
          end: {
            line: 555,
            column: 5
          }
        },
        loc: {
          start: {
            line: 555,
            column: 44
          },
          end: {
            line: 563,
            column: 5
          }
        },
        line: 555
      },
      "19": {
        name: "(anonymous_19)",
        decl: {
          start: {
            line: 565,
            column: 4
          },
          end: {
            line: 565,
            column: 5
          }
        },
        loc: {
          start: {
            line: 565,
            column: 51
          },
          end: {
            line: 591,
            column: 5
          }
        },
        line: 565
      },
      "20": {
        name: "(anonymous_20)",
        decl: {
          start: {
            line: 592,
            column: 4
          },
          end: {
            line: 592,
            column: 5
          }
        },
        loc: {
          start: {
            line: 592,
            column: 52
          },
          end: {
            line: 605,
            column: 5
          }
        },
        line: 592
      },
      "21": {
        name: "(anonymous_21)",
        decl: {
          start: {
            line: 607,
            column: 4
          },
          end: {
            line: 607,
            column: 5
          }
        },
        loc: {
          start: {
            line: 607,
            column: 78
          },
          end: {
            line: 651,
            column: 5
          }
        },
        line: 607
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 2,
            column: 17
          },
          end: {
            line: 7,
            column: 1
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 2,
            column: 18
          },
          end: {
            line: 2,
            column: 22
          }
        }, {
          start: {
            line: 2,
            column: 26
          },
          end: {
            line: 2,
            column: 41
          }
        }, {
          start: {
            line: 2,
            column: 46
          },
          end: {
            line: 7,
            column: 1
          }
        }],
        line: 2
      },
      "1": {
        loc: {
          start: {
            line: 3,
            column: 34
          },
          end: {
            line: 3,
            column: 125
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 3,
            column: 42
          },
          end: {
            line: 3,
            column: 48
          }
        }, {
          start: {
            line: 3,
            column: 51
          },
          end: {
            line: 3,
            column: 125
          }
        }],
        line: 3
      },
      "2": {
        loc: {
          start: {
            line: 3,
            column: 51
          },
          end: {
            line: 3,
            column: 125
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 3,
            column: 67
          },
          end: {
            line: 3,
            column: 118
          }
        }, {
          start: {
            line: 3,
            column: 121
          },
          end: {
            line: 3,
            column: 125
          }
        }],
        line: 3
      },
      "3": {
        loc: {
          start: {
            line: 4,
            column: 4
          },
          end: {
            line: 5,
            column: 150
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 4,
            column: 4
          },
          end: {
            line: 5,
            column: 150
          }
        }, {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 150
          }
        }],
        line: 4
      },
      "4": {
        loc: {
          start: {
            line: 4,
            column: 8
          },
          end: {
            line: 4,
            column: 77
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 4,
            column: 8
          },
          end: {
            line: 4,
            column: 35
          }
        }, {
          start: {
            line: 4,
            column: 39
          },
          end: {
            line: 4,
            column: 77
          }
        }],
        line: 4
      },
      "5": {
        loc: {
          start: {
            line: 5,
            column: 58
          },
          end: {
            line: 5,
            column: 150
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 5,
            column: 58
          },
          end: {
            line: 5,
            column: 150
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 5
      },
      "6": {
        loc: {
          start: {
            line: 5,
            column: 85
          },
          end: {
            line: 5,
            column: 149
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 5,
            column: 86
          },
          end: {
            line: 5,
            column: 143
          }
        }, {
          start: {
            line: 5,
            column: 148
          },
          end: {
            line: 5,
            column: 149
          }
        }],
        line: 5
      },
      "7": {
        loc: {
          start: {
            line: 5,
            column: 86
          },
          end: {
            line: 5,
            column: 143
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 5,
            column: 94
          },
          end: {
            line: 5,
            column: 98
          }
        }, {
          start: {
            line: 5,
            column: 101
          },
          end: {
            line: 5,
            column: 143
          }
        }],
        line: 5
      },
      "8": {
        loc: {
          start: {
            line: 5,
            column: 101
          },
          end: {
            line: 5,
            column: 143
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 5,
            column: 109
          },
          end: {
            line: 5,
            column: 126
          }
        }, {
          start: {
            line: 5,
            column: 129
          },
          end: {
            line: 5,
            column: 143
          }
        }],
        line: 5
      },
      "9": {
        loc: {
          start: {
            line: 6,
            column: 11
          },
          end: {
            line: 6,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 6,
            column: 11
          },
          end: {
            line: 6,
            column: 16
          }
        }, {
          start: {
            line: 6,
            column: 20
          },
          end: {
            line: 6,
            column: 21
          }
        }, {
          start: {
            line: 6,
            column: 25
          },
          end: {
            line: 6,
            column: 62
          }
        }],
        line: 6
      },
      "10": {
        loc: {
          start: {
            line: 8,
            column: 17
          },
          end: {
            line: 10,
            column: 1
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 8,
            column: 18
          },
          end: {
            line: 8,
            column: 22
          }
        }, {
          start: {
            line: 8,
            column: 26
          },
          end: {
            line: 8,
            column: 41
          }
        }, {
          start: {
            line: 8,
            column: 46
          },
          end: {
            line: 10,
            column: 1
          }
        }],
        line: 8
      },
      "11": {
        loc: {
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 9,
            column: 109
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 9,
            column: 109
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 9
      },
      "12": {
        loc: {
          start: {
            line: 9,
            column: 8
          },
          end: {
            line: 9,
            column: 77
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 9,
            column: 8
          },
          end: {
            line: 9,
            column: 35
          }
        }, {
          start: {
            line: 9,
            column: 39
          },
          end: {
            line: 9,
            column: 77
          }
        }],
        line: 9
      },
      "13": {
        loc: {
          start: {
            line: 33,
            column: 32
          },
          end: {
            line: 33,
            column: 71
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 33,
            column: 39
          },
          end: {
            line: 33,
            column: 71
          }
        }],
        line: 33
      },
      "14": {
        loc: {
          start: {
            line: 35,
            column: 8
          },
          end: {
            line: 37,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 35,
            column: 8
          },
          end: {
            line: 37,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 35
      },
      "15": {
        loc: {
          start: {
            line: 35,
            column: 12
          },
          end: {
            line: 35,
            column: 84
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 35,
            column: 12
          },
          end: {
            line: 35,
            column: 53
          }
        }, {
          start: {
            line: 35,
            column: 57
          },
          end: {
            line: 35,
            column: 84
          }
        }],
        line: 35
      },
      "16": {
        loc: {
          start: {
            line: 39,
            column: 8
          },
          end: {
            line: 44,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 39,
            column: 8
          },
          end: {
            line: 44,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 39
      },
      "17": {
        loc: {
          start: {
            line: 41,
            column: 12
          },
          end: {
            line: 43,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 41,
            column: 12
          },
          end: {
            line: 43,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 41
      },
      "18": {
        loc: {
          start: {
            line: 96,
            column: 19
          },
          end: {
            line: 96,
            column: 37
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 96,
            column: 19
          },
          end: {
            line: 96,
            column: 24
          }
        }, {
          start: {
            line: 96,
            column: 28
          },
          end: {
            line: 96,
            column: 37
          }
        }],
        line: 96
      },
      "19": {
        loc: {
          start: {
            line: 101,
            column: 39
          },
          end: {
            line: 101,
            column: 47
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 101,
            column: 46
          },
          end: {
            line: 101,
            column: 47
          }
        }],
        line: 101
      },
      "20": {
        loc: {
          start: {
            line: 101,
            column: 49
          },
          end: {
            line: 101,
            column: 59
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 101,
            column: 57
          },
          end: {
            line: 101,
            column: 59
          }
        }],
        line: 101
      },
      "21": {
        loc: {
          start: {
            line: 163,
            column: 62
          },
          end: {
            line: 163,
            column: 81
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 163,
            column: 79
          },
          end: {
            line: 163,
            column: 81
          }
        }],
        line: 163
      },
      "22": {
        loc: {
          start: {
            line: 163,
            column: 83
          },
          end: {
            line: 163,
            column: 103
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 163,
            column: 101
          },
          end: {
            line: 163,
            column: 103
          }
        }],
        line: 163
      },
      "23": {
        loc: {
          start: {
            line: 163,
            column: 105
          },
          end: {
            line: 163,
            column: 125
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 163,
            column: 123
          },
          end: {
            line: 163,
            column: 125
          }
        }],
        line: 163
      },
      "24": {
        loc: {
          start: {
            line: 166,
            column: 25
          },
          end: {
            line: 166,
            column: 64
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 166,
            column: 39
          },
          end: {
            line: 166,
            column: 64
          }
        }],
        line: 166
      },
      "25": {
        loc: {
          start: {
            line: 180,
            column: 8
          },
          end: {
            line: 182,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 180,
            column: 8
          },
          end: {
            line: 182,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 180
      },
      "26": {
        loc: {
          start: {
            line: 188,
            column: 8
          },
          end: {
            line: 197,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 188,
            column: 8
          },
          end: {
            line: 197,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 188
      },
      "27": {
        loc: {
          start: {
            line: 188,
            column: 12
          },
          end: {
            line: 188,
            column: 82
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 188,
            column: 12
          },
          end: {
            line: 188,
            column: 53
          }
        }, {
          start: {
            line: 188,
            column: 57
          },
          end: {
            line: 188,
            column: 82
          }
        }],
        line: 188
      },
      "28": {
        loc: {
          start: {
            line: 206,
            column: 31
          },
          end: {
            line: 206,
            column: 65
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 206,
            column: 31
          },
          end: {
            line: 206,
            column: 48
          }
        }, {
          start: {
            line: 206,
            column: 52
          },
          end: {
            line: 206,
            column: 65
          }
        }],
        line: 206
      },
      "29": {
        loc: {
          start: {
            line: 207,
            column: 32
          },
          end: {
            line: 207,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 207,
            column: 32
          },
          end: {
            line: 207,
            column: 50
          }
        }, {
          start: {
            line: 207,
            column: 54
          },
          end: {
            line: 207,
            column: 68
          }
        }],
        line: 207
      },
      "30": {
        loc: {
          start: {
            line: 208,
            column: 32
          },
          end: {
            line: 208,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 208,
            column: 32
          },
          end: {
            line: 208,
            column: 50
          }
        }, {
          start: {
            line: 208,
            column: 54
          },
          end: {
            line: 208,
            column: 68
          }
        }],
        line: 208
      },
      "31": {
        loc: {
          start: {
            line: 259,
            column: 8
          },
          end: {
            line: 262,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 259,
            column: 8
          },
          end: {
            line: 262,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 259
      },
      "32": {
        loc: {
          start: {
            line: 259,
            column: 12
          },
          end: {
            line: 259,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 259,
            column: 12
          },
          end: {
            line: 259,
            column: 31
          }
        }, {
          start: {
            line: 259,
            column: 35
          },
          end: {
            line: 259,
            column: 49
          }
        }],
        line: 259
      },
      "33": {
        loc: {
          start: {
            line: 263,
            column: 29
          },
          end: {
            line: 265,
            column: 48
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 263,
            column: 29
          },
          end: {
            line: 265,
            column: 42
          }
        }, {
          start: {
            line: 265,
            column: 46
          },
          end: {
            line: 265,
            column: 48
          }
        }],
        line: 263
      },
      "34": {
        loc: {
          start: {
            line: 275,
            column: 30
          },
          end: {
            line: 275,
            column: 60
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 275,
            column: 30
          },
          end: {
            line: 275,
            column: 47
          }
        }, {
          start: {
            line: 275,
            column: 51
          },
          end: {
            line: 275,
            column: 60
          }
        }],
        line: 275
      },
      "35": {
        loc: {
          start: {
            line: 276,
            column: 29
          },
          end: {
            line: 280,
            column: 31
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 277,
            column: 18
          },
          end: {
            line: 277,
            column: 32
          }
        }, {
          start: {
            line: 278,
            column: 18
          },
          end: {
            line: 280,
            column: 31
          }
        }],
        line: 276
      },
      "36": {
        loc: {
          start: {
            line: 278,
            column: 18
          },
          end: {
            line: 280,
            column: 31
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 279,
            column: 22
          },
          end: {
            line: 279,
            column: 45
          }
        }, {
          start: {
            line: 280,
            column: 22
          },
          end: {
            line: 280,
            column: 31
          }
        }],
        line: 278
      },
      "37": {
        loc: {
          start: {
            line: 289,
            column: 58
          },
          end: {
            line: 289,
            column: 66
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 289,
            column: 65
          },
          end: {
            line: 289,
            column: 66
          }
        }],
        line: 289
      },
      "38": {
        loc: {
          start: {
            line: 289,
            column: 68
          },
          end: {
            line: 289,
            column: 78
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 289,
            column: 76
          },
          end: {
            line: 289,
            column: 78
          }
        }],
        line: 289
      },
      "39": {
        loc: {
          start: {
            line: 347,
            column: 12
          },
          end: {
            line: 371,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 347,
            column: 12
          },
          end: {
            line: 371,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 347
      },
      "40": {
        loc: {
          start: {
            line: 347,
            column: 16
          },
          end: {
            line: 350,
            column: 39
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 347,
            column: 16
          },
          end: {
            line: 347,
            column: 35
          }
        }, {
          start: {
            line: 348,
            column: 16
          },
          end: {
            line: 348,
            column: 36
          }
        }, {
          start: {
            line: 349,
            column: 16
          },
          end: {
            line: 349,
            column: 41
          }
        }, {
          start: {
            line: 350,
            column: 16
          },
          end: {
            line: 350,
            column: 39
          }
        }],
        line: 347
      },
      "41": {
        loc: {
          start: {
            line: 380,
            column: 8
          },
          end: {
            line: 382,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 380,
            column: 8
          },
          end: {
            line: 382,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 380
      },
      "42": {
        loc: {
          start: {
            line: 383,
            column: 8
          },
          end: {
            line: 385,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 383,
            column: 8
          },
          end: {
            line: 385,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 383
      },
      "43": {
        loc: {
          start: {
            line: 386,
            column: 8
          },
          end: {
            line: 388,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 386,
            column: 8
          },
          end: {
            line: 388,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 386
      },
      "44": {
        loc: {
          start: {
            line: 424,
            column: 8
          },
          end: {
            line: 426,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 424,
            column: 8
          },
          end: {
            line: 426,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 424
      },
      "45": {
        loc: {
          start: {
            line: 427,
            column: 8
          },
          end: {
            line: 429,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 427,
            column: 8
          },
          end: {
            line: 429,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 427
      },
      "46": {
        loc: {
          start: {
            line: 441,
            column: 8
          },
          end: {
            line: 443,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 441,
            column: 8
          },
          end: {
            line: 443,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 441
      },
      "47": {
        loc: {
          start: {
            line: 445,
            column: 8
          },
          end: {
            line: 447,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 445,
            column: 8
          },
          end: {
            line: 447,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 445
      },
      "48": {
        loc: {
          start: {
            line: 489,
            column: 8
          },
          end: {
            line: 491,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 489,
            column: 8
          },
          end: {
            line: 491,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 489
      },
      "49": {
        loc: {
          start: {
            line: 534,
            column: 8
          },
          end: {
            line: 536,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 534,
            column: 8
          },
          end: {
            line: 536,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 534
      },
      "50": {
        loc: {
          start: {
            line: 601,
            column: 8
          },
          end: {
            line: 603,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 601,
            column: 8
          },
          end: {
            line: 603,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 601
      },
      "51": {
        loc: {
          start: {
            line: 601,
            column: 12
          },
          end: {
            line: 601,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 601,
            column: 12
          },
          end: {
            line: 601,
            column: 24
          }
        }, {
          start: {
            line: 601,
            column: 28
          },
          end: {
            line: 601,
            column: 49
          }
        }],
        line: 601
      },
      "52": {
        loc: {
          start: {
            line: 607,
            column: 56
          },
          end: {
            line: 607,
            column: 64
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 607,
            column: 63
          },
          end: {
            line: 607,
            column: 64
          }
        }],
        line: 607
      },
      "53": {
        loc: {
          start: {
            line: 607,
            column: 66
          },
          end: {
            line: 607,
            column: 76
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 607,
            column: 74
          },
          end: {
            line: 607,
            column: 76
          }
        }],
        line: 607
      },
      "54": {
        loc: {
          start: {
            line: 624,
            column: 8
          },
          end: {
            line: 626,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 624,
            column: 8
          },
          end: {
            line: 626,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 624
      },
      "55": {
        loc: {
          start: {
            line: 656,
            column: 37
          },
          end: {
            line: 656,
            column: 183
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 656,
            column: 172
          },
          end: {
            line: 656,
            column: 174
          }
        }, {
          start: {
            line: 656,
            column: 177
          },
          end: {
            line: 656,
            column: 183
          }
        }],
        line: 656
      },
      "56": {
        loc: {
          start: {
            line: 656,
            column: 50
          },
          end: {
            line: 656,
            column: 153
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 656,
            column: 50
          },
          end: {
            line: 656,
            column: 111
          }
        }, {
          start: {
            line: 656,
            column: 115
          },
          end: {
            line: 656,
            column: 153
          }
        }],
        line: 656
      },
      "57": {
        loc: {
          start: {
            line: 656,
            column: 185
          },
          end: {
            line: 656,
            column: 325
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 656,
            column: 314
          },
          end: {
            line: 656,
            column: 316
          }
        }, {
          start: {
            line: 656,
            column: 319
          },
          end: {
            line: 656,
            column: 325
          }
        }],
        line: 656
      },
      "58": {
        loc: {
          start: {
            line: 656,
            column: 198
          },
          end: {
            line: 656,
            column: 295
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 656,
            column: 198
          },
          end: {
            line: 656,
            column: 256
          }
        }, {
          start: {
            line: 656,
            column: 260
          },
          end: {
            line: 656,
            column: 295
          }
        }],
        line: 656
      },
      "59": {
        loc: {
          start: {
            line: 656,
            column: 327
          },
          end: {
            line: 656,
            column: 503
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 656,
            column: 492
          },
          end: {
            line: 656,
            column: 494
          }
        }, {
          start: {
            line: 656,
            column: 497
          },
          end: {
            line: 656,
            column: 503
          }
        }],
        line: 656
      },
      "60": {
        loc: {
          start: {
            line: 656,
            column: 340
          },
          end: {
            line: 656,
            column: 473
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 656,
            column: 340
          },
          end: {
            line: 656,
            column: 416
          }
        }, {
          start: {
            line: 656,
            column: 420
          },
          end: {
            line: 656,
            column: 473
          }
        }],
        line: 656
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0,
      "99": 0,
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0,
      "105": 0,
      "106": 0,
      "107": 0,
      "108": 0,
      "109": 0,
      "110": 0,
      "111": 0,
      "112": 0,
      "113": 0,
      "114": 0,
      "115": 0,
      "116": 0,
      "117": 0,
      "118": 0,
      "119": 0,
      "120": 0,
      "121": 0,
      "122": 0,
      "123": 0,
      "124": 0,
      "125": 0,
      "126": 0,
      "127": 0,
      "128": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0
    },
    b: {
      "0": [0, 0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0, 0],
      "10": [0, 0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0],
      "20": [0],
      "21": [0],
      "22": [0],
      "23": [0],
      "24": [0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0, 0],
      "29": [0, 0],
      "30": [0, 0],
      "31": [0, 0],
      "32": [0, 0],
      "33": [0, 0],
      "34": [0, 0],
      "35": [0, 0],
      "36": [0, 0],
      "37": [0],
      "38": [0],
      "39": [0, 0],
      "40": [0, 0, 0, 0],
      "41": [0, 0],
      "42": [0, 0],
      "43": [0, 0],
      "44": [0, 0],
      "45": [0, 0],
      "46": [0, 0],
      "47": [0, 0],
      "48": [0, 0],
      "49": [0, 0],
      "50": [0, 0],
      "51": [0, 0],
      "52": [0],
      "53": [0],
      "54": [0, 0],
      "55": [0, 0],
      "56": [0, 0],
      "57": [0, 0],
      "58": [0, 0],
      "59": [0, 0],
      "60": [0, 0]
    },
    inputSourceMap: {
      file: "/home/wetooa/Documents/code/projects/mentara/mentara-api/src/messaging/messaging.service.ts",
      mappings: "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",
      names: [],
      sources: ["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/messaging/messaging.service.ts"],
      sourcesContent: ["import {\n  Injectable,\n  Logger,\n  NotFoundException,\n  ForbiddenException,\n  BadRequestException,\n} from '@nestjs/common';\nimport { PrismaService } from '../providers/prisma-client.provider';\nimport {\n  CreateConversationDto,\n  SendMessageDto,\n  UpdateMessageDto,\n} from 'mentara-commons';\nimport { ConversationType, MessageType, ParticipantRole } from '@prisma/client';\nimport { EventBusService } from '../common/events/event-bus.service';\nimport {\n  MessageSentEvent,\n  MessageReadEvent,\n  ConversationCreatedEvent,\n} from '../common/events/messaging-events';\nimport {\n  MessageEncryptionService,\n  EncryptedMessage,\n} from './services/message-encryption.service';\n\n@Injectable()\nexport class MessagingService {\n  private readonly logger = new Logger(MessagingService.name);\n\n  constructor(\n    private readonly prisma: PrismaService,\n    private readonly eventBus: EventBusService,\n    private readonly messageEncryption: MessageEncryptionService,\n  ) {}\n\n  // Conversation Management\n  async createConversation(\n    userId: string,\n    createConversationDto: CreateConversationDto,\n  ) {\n    const {\n      participantIds,\n      type = ConversationType.DIRECT,\n      title,\n    } = createConversationDto;\n\n    // Validate conversation type and participants\n    if (type === ConversationType.DIRECT && participantIds.length !== 1) {\n      throw new BadRequestException(\n        'Direct conversations must have exactly one other participant',\n      );\n    }\n\n    // Check if direct conversation already exists\n    if (type === ConversationType.DIRECT) {\n      const existingConversation = await this.findDirectConversation(\n        userId,\n        participantIds[0],\n      );\n      if (existingConversation) {\n        return existingConversation;\n      }\n    }\n\n    // Create conversation with participants\n    const conversation = await this.prisma.conversation.create({\n      data: {\n        type,\n        title,\n        participants: {\n          create: [\n            { userId, role: ParticipantRole.ADMIN },\n            ...participantIds.map((participantId) => ({\n              userId: participantId,\n              role: ParticipantRole.MEMBER,\n            })),\n          ],\n        },\n      },\n      include: {\n        participants: {\n          include: {\n            user: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n                avatarUrl: true,\n                role: true,\n              },\n            },\n          },\n        },\n        messages: {\n          take: 1,\n          orderBy: { createdAt: 'desc' },\n          include: {\n            sender: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n                avatarUrl: true,\n              },\n            },\n          },\n        },\n      },\n    });\n\n    // Publish conversation created event\n    await this.eventBus.emit(\n      new ConversationCreatedEvent({\n        conversationId: conversation.id,\n        createdBy: userId,\n        participantIds: [userId, ...participantIds],\n        conversationType: type.toLowerCase() as\n          | 'direct'\n          | 'group'\n          | 'support'\n          | 'therapy',\n        title: title || undefined,\n        isPrivate: type === ConversationType.DIRECT,\n      }),\n    );\n\n    return conversation;\n  }\n\n  async getUserConversations(userId: string, page = 1, limit = 20) {\n    const skip = (page - 1) * limit;\n\n    const conversations = await this.prisma.conversation.findMany({\n      where: {\n        participants: {\n          some: {\n            userId,\n            isActive: true,\n          },\n        },\n        isActive: true,\n      },\n      include: {\n        participants: {\n          where: { isActive: true },\n          include: {\n            user: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n                avatarUrl: true,\n                role: true,\n              },\n            },\n          },\n        },\n        messages: {\n          take: 1,\n          orderBy: { createdAt: 'desc' },\n          where: { isDeleted: false },\n          include: {\n            sender: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n                avatarUrl: true,\n              },\n            },\n          },\n        },\n        _count: {\n          select: {\n            messages: {\n              where: {\n                isDeleted: false,\n                readReceipts: {\n                  none: { userId },\n                },\n              },\n            },\n          },\n        },\n      },\n      orderBy: { lastMessageAt: 'desc' },\n      skip,\n      take: limit,\n    });\n\n    return conversations;\n  }\n\n  // Message Management\n  async sendMessage(\n    userId: string,\n    conversationId: string,\n    sendMessageDto: SendMessageDto,\n    attachmentUrls: string[] = [],\n    attachmentNames: string[] = [],\n    attachmentSizes: number[] = [],\n  ) {\n    // Verify user is participant in conversation\n    await this.verifyParticipant(userId, conversationId);\n\n    const {\n      content,\n      messageType = MessageType.TEXT,\n      replyToId,\n      attachmentUrl,\n      attachmentName,\n      attachmentSize,\n    } = sendMessageDto;\n\n    // Get conversation details to determine encryption type\n    const conversation = await this.prisma.conversation.findUnique({\n      where: { id: conversationId },\n      include: {\n        participants: {\n          include: {\n            user: {\n              select: { role: true },\n            },\n          },\n        },\n      },\n    });\n\n    if (!conversation) {\n      throw new NotFoundException('Conversation not found');\n    }\n\n    // Determine encryption type based on conversation participants\n    const conversationType = this.messageEncryption.getConversationType(\n      conversation.participants.map((p) => ({ role: p.user.role })),\n    );\n\n    // Encrypt message content for sensitive conversations\n    let finalContent = content;\n    let encryptionData: EncryptedMessage | null = null;\n\n    if (messageType === MessageType.TEXT && content.trim().length > 0) {\n      try {\n        encryptionData = await this.messageEncryption.encryptMessage(\n          content,\n          conversationType,\n        );\n        finalContent = encryptionData.encryptedContent; // Store encrypted content\n      } catch (error) {\n        this.logger.error(\n          'Message encryption failed, storing plaintext:',\n          error,\n        );\n        // Fallback to plaintext if encryption fails (log this for security audit)\n      }\n    }\n\n    const message = await this.prisma.message.create({\n      data: {\n        conversationId,\n        senderId: userId,\n        content: finalContent, // Store encrypted content\n        messageType,\n        replyToId,\n        // Keep backward compatibility with single attachment fields\n        attachmentUrl: attachmentUrls[0] || attachmentUrl,\n        attachmentName: attachmentNames[0] || attachmentName,\n        attachmentSize: attachmentSizes[0] || attachmentSize,\n        // Add new multiple attachment fields\n        attachmentUrls,\n        attachmentNames,\n        attachmentSizes,\n        // Store encryption metadata\n        encryptionIv: encryptionData?.iv,\n        encryptionAuthTag: encryptionData?.authTag,\n        encryptionKeyId: encryptionData?.keyId,\n        isEncrypted: !!encryptionData,\n      },\n      include: {\n        sender: {\n          select: {\n            id: true,\n            firstName: true,\n            lastName: true,\n            avatarUrl: true,\n          },\n        },\n        replyTo: {\n          include: {\n            sender: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n              },\n            },\n          },\n        },\n        reactions: {\n          include: {\n            user: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n              },\n            },\n          },\n        },\n      },\n    });\n\n    // Update conversation lastMessageAt\n    await this.prisma.conversation.update({\n      where: { id: conversationId },\n      data: { lastMessageAt: new Date() },\n    });\n\n    // For encrypted messages, we need to decrypt for event emission\n    let eventContent = content; // Original plaintext for events\n    if (message.isEncrypted && encryptionData) {\n      // Events should contain plaintext for processing\n      eventContent = content;\n    }\n\n    const recipientIds =\n      conversation?.participants\n        .map((p) => p.userId)\n        .filter((id) => id !== userId) || [];\n\n    // Publish message sent event\n    await this.eventBus.emit(\n      new MessageSentEvent({\n        messageId: message.id,\n        conversationId,\n        senderId: userId,\n        content: eventContent, // Use original plaintext for events\n        messageType: message.messageType.toLowerCase() as\n          | 'text'\n          | 'image'\n          | 'file'\n          | 'audio'\n          | 'video'\n          | 'system',\n        sentAt: message.createdAt,\n        recipientIds,\n        replyToMessageId: message.replyToId || undefined,\n        fileAttachments:\n          attachmentUrls.length > 0\n            ? attachmentUrls\n            : message.attachmentUrl\n              ? [message.attachmentUrl]\n              : undefined,\n        isEncrypted: message.isEncrypted,\n      }),\n    );\n\n    // Return message with decrypted content for immediate display\n    return {\n      ...message,\n      content: eventContent, // Return plaintext content\n    };\n  }\n\n  async getConversationMessages(\n    userId: string,\n    conversationId: string,\n    page = 1,\n    limit = 50,\n  ) {\n    // Verify user is participant in conversation\n    await this.verifyParticipant(userId, conversationId);\n\n    const skip = (page - 1) * limit;\n\n    const messages = await this.prisma.message.findMany({\n      where: {\n        conversationId,\n        isDeleted: false,\n      },\n      include: {\n        sender: {\n          select: {\n            id: true,\n            firstName: true,\n            lastName: true,\n            avatarUrl: true,\n          },\n        },\n        replyTo: {\n          include: {\n            sender: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n              },\n            },\n          },\n        },\n        reactions: {\n          include: {\n            user: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n              },\n            },\n          },\n        },\n        readReceipts: {\n          include: {\n            user: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n              },\n            },\n          },\n        },\n      },\n      orderBy: { createdAt: 'desc' },\n      skip,\n      take: limit,\n    });\n\n    // Decrypt messages if they are encrypted\n    const decryptedMessages = await Promise.all(\n      messages.map(async (message) => {\n        if (\n          message.isEncrypted &&\n          message.encryptionIv &&\n          message.encryptionAuthTag &&\n          message.encryptionKeyId\n        ) {\n          try {\n            const encryptedMessage = {\n              encryptedContent: message.content,\n              iv: message.encryptionIv,\n              authTag: message.encryptionAuthTag,\n              keyId: message.encryptionKeyId,\n            };\n\n            const decrypted =\n              await this.messageEncryption.decryptMessage(encryptedMessage);\n            return {\n              ...message,\n              content: decrypted.content,\n            };\n          } catch (error) {\n            this.logger.error(\n              `Failed to decrypt message ${message.id}:`,\n              error,\n            );\n            return {\n              ...message,\n              content: '[Message could not be decrypted]',\n            };\n          }\n        }\n        return message;\n      }),\n    );\n\n    return decryptedMessages.reverse(); // Return in chronological order\n  }\n\n  async updateMessage(\n    userId: string,\n    messageId: string,\n    updateMessageDto: UpdateMessageDto,\n  ) {\n    const message = await this.prisma.message.findUnique({\n      where: { id: messageId },\n    });\n\n    if (!message) {\n      throw new NotFoundException('Message not found');\n    }\n\n    if (message.senderId !== userId) {\n      throw new ForbiddenException('You can only edit your own messages');\n    }\n\n    if (message.isDeleted) {\n      throw new BadRequestException('Cannot edit deleted message');\n    }\n\n    const updatedMessage = await this.prisma.message.update({\n      where: { id: messageId },\n      data: {\n        content: updateMessageDto.content,\n        isEdited: true,\n        editedAt: new Date(),\n      },\n      include: {\n        sender: {\n          select: {\n            id: true,\n            firstName: true,\n            lastName: true,\n            avatarUrl: true,\n          },\n        },\n        reactions: {\n          include: {\n            user: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n              },\n            },\n          },\n        },\n      },\n    });\n\n    return updatedMessage;\n  }\n\n  async deleteMessage(userId: string, messageId: string) {\n    const message = await this.prisma.message.findUnique({\n      where: { id: messageId },\n    });\n\n    if (!message) {\n      throw new NotFoundException('Message not found');\n    }\n\n    if (message.senderId !== userId) {\n      throw new ForbiddenException('You can only delete your own messages');\n    }\n\n    await this.prisma.message.update({\n      where: { id: messageId },\n      data: { isDeleted: true },\n    });\n\n    return { success: true };\n  }\n\n  // Read Receipts\n  async markMessageAsRead(userId: string, messageId: string) {\n    const message = await this.prisma.message.findUnique({\n      where: { id: messageId },\n    });\n\n    if (!message) {\n      throw new NotFoundException('Message not found');\n    }\n\n    // Don't create read receipt for own messages\n    if (message.senderId === userId) {\n      return;\n    }\n\n    // Verify user is participant in conversation\n    await this.verifyParticipant(userId, message.conversationId);\n\n    await this.prisma.messageReadReceipt.upsert({\n      where: {\n        messageId_userId: {\n          messageId,\n          userId,\n        },\n      },\n      create: {\n        messageId,\n        userId,\n      },\n      update: {\n        readAt: new Date(),\n      },\n    });\n\n    // Update participant's lastReadAt\n    await this.prisma.conversationParticipant.updateMany({\n      where: {\n        conversationId: message.conversationId,\n        userId,\n      },\n      data: {\n        lastReadAt: new Date(),\n      },\n    });\n\n    // Publish message read event\n    await this.eventBus.emit(\n      new MessageReadEvent({\n        messageId,\n        readBy: userId,\n        readAt: new Date(),\n        conversationId: message.conversationId,\n        messagesSinceLastRead: 1, // Could be enhanced to calculate actual count\n      }),\n    );\n  }\n\n  // Message Reactions\n  async addMessageReaction(userId: string, messageId: string, emoji: string) {\n    const message = await this.prisma.message.findUnique({\n      where: { id: messageId },\n    });\n\n    if (!message) {\n      throw new NotFoundException('Message not found');\n    }\n\n    // Verify user is participant in conversation\n    await this.verifyParticipant(userId, message.conversationId);\n\n    const reaction = await this.prisma.messageReaction.upsert({\n      where: {\n        messageId_userId_emoji: {\n          messageId,\n          userId,\n          emoji,\n        },\n      },\n      create: {\n        messageId,\n        userId,\n        emoji,\n      },\n      update: {\n        emoji,\n      },\n      include: {\n        user: {\n          select: {\n            id: true,\n            firstName: true,\n            lastName: true,\n          },\n        },\n      },\n    });\n\n    return reaction;\n  }\n\n  async removeMessageReaction(\n    userId: string,\n    messageId: string,\n    emoji: string,\n  ) {\n    await this.prisma.messageReaction.deleteMany({\n      where: {\n        messageId,\n        userId,\n        emoji,\n      },\n    });\n\n    return { success: true };\n  }\n\n  // User Blocking\n  async blockUser(blockerId: string, blockedId: string, reason?: string) {\n    if (blockerId === blockedId) {\n      throw new BadRequestException('Cannot block yourself');\n    }\n\n    await this.prisma.userBlock.upsert({\n      where: {\n        blockerId_blockedId: {\n          blockerId,\n          blockedId,\n        },\n      },\n      create: {\n        blockerId,\n        blockedId,\n        reason,\n      },\n      update: {\n        reason,\n      },\n    });\n\n    return { success: true };\n  }\n\n  async unblockUser(blockerId: string, blockedId: string) {\n    await this.prisma.userBlock.deleteMany({\n      where: {\n        blockerId,\n        blockedId,\n      },\n    });\n\n    return { success: true };\n  }\n\n  // Helper Methods\n  private async findDirectConversation(user1Id: string, user2Id: string) {\n    return this.prisma.conversation.findFirst({\n      where: {\n        type: ConversationType.DIRECT,\n        participants: {\n          every: {\n            userId: { in: [user1Id, user2Id] },\n          },\n        },\n      },\n      include: {\n        participants: {\n          include: {\n            user: {\n              select: {\n                id: true,\n                firstName: true,\n                lastName: true,\n                avatarUrl: true,\n                role: true,\n              },\n            },\n          },\n        },\n      },\n    });\n  }\n\n  private async verifyParticipant(userId: string, conversationId: string) {\n    const participant = await this.prisma.conversationParticipant.findUnique({\n      where: {\n        conversationId_userId: {\n          conversationId,\n          userId,\n        },\n      },\n    });\n\n    if (!participant || !participant.isActive) {\n      throw new ForbiddenException(\n        'You are not a participant in this conversation',\n      );\n    }\n\n    return participant;\n  }\n\n  // Search Messages\n  async searchMessages(\n    userId: string,\n    query: string,\n    conversationId?: string,\n    page = 1,\n    limit = 20,\n  ) {\n    const skip = (page - 1) * limit;\n\n    const whereClause: any = {\n      content: {\n        contains: query,\n        mode: 'insensitive',\n      },\n      isDeleted: false,\n      conversation: {\n        participants: {\n          some: {\n            userId,\n            isActive: true,\n          },\n        },\n      },\n    };\n\n    if (conversationId) {\n      whereClause.conversationId = conversationId;\n    }\n\n    const messages = await this.prisma.message.findMany({\n      where: whereClause,\n      include: {\n        sender: {\n          select: {\n            id: true,\n            firstName: true,\n            lastName: true,\n            avatarUrl: true,\n          },\n        },\n        conversation: {\n          select: {\n            id: true,\n            type: true,\n            title: true,\n          },\n        },\n      },\n      orderBy: { createdAt: 'desc' },\n      skip,\n      take: limit,\n    });\n\n    return messages;\n  }\n}\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "8659850a0cb9672ec8ba6167d1eb832598efdcba"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1p55oijc5l = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1p55oijc5l();
var __decorate =
/* istanbul ignore next */
(cov_1p55oijc5l().s[0]++,
/* istanbul ignore next */
(cov_1p55oijc5l().b[0][0]++, this) &&
/* istanbul ignore next */
(cov_1p55oijc5l().b[0][1]++, this.__decorate) ||
/* istanbul ignore next */
(cov_1p55oijc5l().b[0][2]++, function (decorators, target, key, desc) {
  /* istanbul ignore next */
  cov_1p55oijc5l().f[0]++;
  var c =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[1]++, arguments.length),
    r =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[2]++, c < 3 ?
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[1][0]++, target) :
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[1][1]++, desc === null ?
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[2][0]++, desc = Object.getOwnPropertyDescriptor(target, key)) :
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[2][1]++, desc))),
    d;
  /* istanbul ignore next */
  cov_1p55oijc5l().s[3]++;
  if (
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[4][0]++, typeof Reflect === "object") &&
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[4][1]++, typeof Reflect.decorate === "function")) {
    /* istanbul ignore next */
    cov_1p55oijc5l().b[3][0]++;
    cov_1p55oijc5l().s[4]++;
    r = Reflect.decorate(decorators, target, key, desc);
  } else {
    /* istanbul ignore next */
    cov_1p55oijc5l().b[3][1]++;
    cov_1p55oijc5l().s[5]++;
    for (var i =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[6]++, decorators.length - 1); i >= 0; i--) {
      /* istanbul ignore next */
      cov_1p55oijc5l().s[7]++;
      if (d = decorators[i]) {
        /* istanbul ignore next */
        cov_1p55oijc5l().b[5][0]++;
        cov_1p55oijc5l().s[8]++;
        r =
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[6][0]++, c < 3 ?
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[7][0]++, d(r)) :
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[7][1]++, c > 3 ?
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[8][0]++, d(target, key, r)) :
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[8][1]++, d(target, key)))) ||
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[6][1]++, r);
      } else
      /* istanbul ignore next */
      {
        cov_1p55oijc5l().b[5][1]++;
      }
    }
  }
  /* istanbul ignore next */
  cov_1p55oijc5l().s[9]++;
  return /* istanbul ignore next */(cov_1p55oijc5l().b[9][0]++, c > 3) &&
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[9][1]++, r) &&
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[9][2]++, Object.defineProperty(target, key, r)), r;
}));
var __metadata =
/* istanbul ignore next */
(cov_1p55oijc5l().s[10]++,
/* istanbul ignore next */
(cov_1p55oijc5l().b[10][0]++, this) &&
/* istanbul ignore next */
(cov_1p55oijc5l().b[10][1]++, this.__metadata) ||
/* istanbul ignore next */
(cov_1p55oijc5l().b[10][2]++, function (k, v) {
  /* istanbul ignore next */
  cov_1p55oijc5l().f[1]++;
  cov_1p55oijc5l().s[11]++;
  if (
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[12][0]++, typeof Reflect === "object") &&
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[12][1]++, typeof Reflect.metadata === "function")) {
    /* istanbul ignore next */
    cov_1p55oijc5l().b[11][0]++;
    cov_1p55oijc5l().s[12]++;
    return Reflect.metadata(k, v);
  } else
  /* istanbul ignore next */
  {
    cov_1p55oijc5l().b[11][1]++;
  }
}));
var MessagingService_1;
var _a, _b, _c;
/* istanbul ignore next */
cov_1p55oijc5l().s[13]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_1p55oijc5l().s[14]++;
exports.MessagingService = void 0;
const common_1 =
/* istanbul ignore next */
(cov_1p55oijc5l().s[15]++, require("@nestjs/common"));
const prisma_client_provider_1 =
/* istanbul ignore next */
(cov_1p55oijc5l().s[16]++, require("../providers/prisma-client.provider"));
const client_1 =
/* istanbul ignore next */
(cov_1p55oijc5l().s[17]++, require("@prisma/client"));
const event_bus_service_1 =
/* istanbul ignore next */
(cov_1p55oijc5l().s[18]++, require("../common/events/event-bus.service"));
const messaging_events_1 =
/* istanbul ignore next */
(cov_1p55oijc5l().s[19]++, require("../common/events/messaging-events"));
const message_encryption_service_1 =
/* istanbul ignore next */
(cov_1p55oijc5l().s[20]++, require("./services/message-encryption.service"));
let MessagingService =
/* istanbul ignore next */
(cov_1p55oijc5l().s[21]++, MessagingService_1 = class MessagingService {
  prisma;
  eventBus;
  messageEncryption;
  logger =
  /* istanbul ignore next */
  (cov_1p55oijc5l().s[22]++, new common_1.Logger(MessagingService_1.name));
  constructor(prisma, eventBus, messageEncryption) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[2]++;
    cov_1p55oijc5l().s[23]++;
    this.prisma = prisma;
    /* istanbul ignore next */
    cov_1p55oijc5l().s[24]++;
    this.eventBus = eventBus;
    /* istanbul ignore next */
    cov_1p55oijc5l().s[25]++;
    this.messageEncryption = messageEncryption;
  }
  // Conversation Management
  async createConversation(userId, createConversationDto) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[3]++;
    const {
      participantIds,
      type =
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[13][0]++, client_1.ConversationType.DIRECT),
      title
    } =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[26]++, createConversationDto);
    // Validate conversation type and participants
    /* istanbul ignore next */
    cov_1p55oijc5l().s[27]++;
    if (
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[15][0]++, type === client_1.ConversationType.DIRECT) &&
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[15][1]++, participantIds.length !== 1)) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[14][0]++;
      cov_1p55oijc5l().s[28]++;
      throw new common_1.BadRequestException('Direct conversations must have exactly one other participant');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[14][1]++;
    }
    // Check if direct conversation already exists
    cov_1p55oijc5l().s[29]++;
    if (type === client_1.ConversationType.DIRECT) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[16][0]++;
      const existingConversation =
      /* istanbul ignore next */
      (cov_1p55oijc5l().s[30]++, await this.findDirectConversation(userId, participantIds[0]));
      /* istanbul ignore next */
      cov_1p55oijc5l().s[31]++;
      if (existingConversation) {
        /* istanbul ignore next */
        cov_1p55oijc5l().b[17][0]++;
        cov_1p55oijc5l().s[32]++;
        return existingConversation;
      } else
      /* istanbul ignore next */
      {
        cov_1p55oijc5l().b[17][1]++;
      }
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[16][1]++;
    }
    // Create conversation with participants
    const conversation =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[33]++, await this.prisma.conversation.create({
      data: {
        type,
        title,
        participants: {
          create: [{
            userId,
            role: client_1.ParticipantRole.ADMIN
          }, ...participantIds.map(participantId => {
            /* istanbul ignore next */
            cov_1p55oijc5l().f[4]++;
            cov_1p55oijc5l().s[34]++;
            return {
              userId: participantId,
              role: client_1.ParticipantRole.MEMBER
            };
          })]
        }
      },
      include: {
        participants: {
          include: {
            user: {
              select: {
                id: true,
                firstName: true,
                lastName: true,
                avatarUrl: true,
                role: true
              }
            }
          }
        },
        messages: {
          take: 1,
          orderBy: {
            createdAt: 'desc'
          },
          include: {
            sender: {
              select: {
                id: true,
                firstName: true,
                lastName: true,
                avatarUrl: true
              }
            }
          }
        }
      }
    }));
    // Publish conversation created event
    /* istanbul ignore next */
    cov_1p55oijc5l().s[35]++;
    await this.eventBus.emit(new messaging_events_1.ConversationCreatedEvent({
      conversationId: conversation.id,
      createdBy: userId,
      participantIds: [userId, ...participantIds],
      conversationType: type.toLowerCase(),
      title:
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[18][0]++, title) ||
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[18][1]++, undefined),
      isPrivate: type === client_1.ConversationType.DIRECT
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[36]++;
    return conversation;
  }
  async getUserConversations(userId, page =
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[19][0]++, 1), limit =
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[20][0]++, 20)) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[5]++;
    const skip =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[37]++, (page - 1) * limit);
    const conversations =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[38]++, await this.prisma.conversation.findMany({
      where: {
        participants: {
          some: {
            userId,
            isActive: true
          }
        },
        isActive: true
      },
      include: {
        participants: {
          where: {
            isActive: true
          },
          include: {
            user: {
              select: {
                id: true,
                firstName: true,
                lastName: true,
                avatarUrl: true,
                role: true
              }
            }
          }
        },
        messages: {
          take: 1,
          orderBy: {
            createdAt: 'desc'
          },
          where: {
            isDeleted: false
          },
          include: {
            sender: {
              select: {
                id: true,
                firstName: true,
                lastName: true,
                avatarUrl: true
              }
            }
          }
        },
        _count: {
          select: {
            messages: {
              where: {
                isDeleted: false,
                readReceipts: {
                  none: {
                    userId
                  }
                }
              }
            }
          }
        }
      },
      orderBy: {
        lastMessageAt: 'desc'
      },
      skip,
      take: limit
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[39]++;
    return conversations;
  }
  // Message Management
  async sendMessage(userId, conversationId, sendMessageDto, attachmentUrls =
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[21][0]++, []), attachmentNames =
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[22][0]++, []), attachmentSizes =
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[23][0]++, [])) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[6]++;
    cov_1p55oijc5l().s[40]++;
    // Verify user is participant in conversation
    await this.verifyParticipant(userId, conversationId);
    const {
      content,
      messageType =
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[24][0]++, client_1.MessageType.TEXT),
      replyToId,
      attachmentUrl,
      attachmentName,
      attachmentSize
    } =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[41]++, sendMessageDto);
    // Get conversation details to determine encryption type
    const conversation =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[42]++, await this.prisma.conversation.findUnique({
      where: {
        id: conversationId
      },
      include: {
        participants: {
          include: {
            user: {
              select: {
                role: true
              }
            }
          }
        }
      }
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[43]++;
    if (!conversation) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[25][0]++;
      cov_1p55oijc5l().s[44]++;
      throw new common_1.NotFoundException('Conversation not found');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[25][1]++;
    }
    // Determine encryption type based on conversation participants
    const conversationType =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[45]++, this.messageEncryption.getConversationType(conversation.participants.map(p => {
      /* istanbul ignore next */
      cov_1p55oijc5l().f[7]++;
      cov_1p55oijc5l().s[46]++;
      return {
        role: p.user.role
      };
    })));
    // Encrypt message content for sensitive conversations
    let finalContent =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[47]++, content);
    let encryptionData =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[48]++, null);
    /* istanbul ignore next */
    cov_1p55oijc5l().s[49]++;
    if (
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[27][0]++, messageType === client_1.MessageType.TEXT) &&
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[27][1]++, content.trim().length > 0)) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[26][0]++;
      cov_1p55oijc5l().s[50]++;
      try {
        /* istanbul ignore next */
        cov_1p55oijc5l().s[51]++;
        encryptionData = await this.messageEncryption.encryptMessage(content, conversationType);
        /* istanbul ignore next */
        cov_1p55oijc5l().s[52]++;
        finalContent = encryptionData.encryptedContent; // Store encrypted content
      } catch (error) {
        /* istanbul ignore next */
        cov_1p55oijc5l().s[53]++;
        this.logger.error('Message encryption failed, storing plaintext:', error);
        // Fallback to plaintext if encryption fails (log this for security audit)
      }
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[26][1]++;
    }
    const message =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[54]++, await this.prisma.message.create({
      data: {
        conversationId,
        senderId: userId,
        content: finalContent,
        // Store encrypted content
        messageType,
        replyToId,
        // Keep backward compatibility with single attachment fields
        attachmentUrl:
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[28][0]++, attachmentUrls[0]) ||
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[28][1]++, attachmentUrl),
        attachmentName:
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[29][0]++, attachmentNames[0]) ||
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[29][1]++, attachmentName),
        attachmentSize:
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[30][0]++, attachmentSizes[0]) ||
        /* istanbul ignore next */
        (cov_1p55oijc5l().b[30][1]++, attachmentSize),
        // Add new multiple attachment fields
        attachmentUrls,
        attachmentNames,
        attachmentSizes,
        // Store encryption metadata
        encryptionIv: encryptionData?.iv,
        encryptionAuthTag: encryptionData?.authTag,
        encryptionKeyId: encryptionData?.keyId,
        isEncrypted: !!encryptionData
      },
      include: {
        sender: {
          select: {
            id: true,
            firstName: true,
            lastName: true,
            avatarUrl: true
          }
        },
        replyTo: {
          include: {
            sender: {
              select: {
                id: true,
                firstName: true,
                lastName: true
              }
            }
          }
        },
        reactions: {
          include: {
            user: {
              select: {
                id: true,
                firstName: true,
                lastName: true
              }
            }
          }
        }
      }
    }));
    // Update conversation lastMessageAt
    /* istanbul ignore next */
    cov_1p55oijc5l().s[55]++;
    await this.prisma.conversation.update({
      where: {
        id: conversationId
      },
      data: {
        lastMessageAt: new Date()
      }
    });
    // For encrypted messages, we need to decrypt for event emission
    let eventContent =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[56]++, content); // Original plaintext for events
    /* istanbul ignore next */
    cov_1p55oijc5l().s[57]++;
    if (
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[32][0]++, message.isEncrypted) &&
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[32][1]++, encryptionData)) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[31][0]++;
      cov_1p55oijc5l().s[58]++;
      // Events should contain plaintext for processing
      eventContent = content;
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[31][1]++;
    }
    const recipientIds =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[59]++,
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[33][0]++, conversation?.participants.map(p => {
      /* istanbul ignore next */
      cov_1p55oijc5l().f[8]++;
      cov_1p55oijc5l().s[60]++;
      return p.userId;
    }).filter(id => {
      /* istanbul ignore next */
      cov_1p55oijc5l().f[9]++;
      cov_1p55oijc5l().s[61]++;
      return id !== userId;
    })) ||
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[33][1]++, []));
    // Publish message sent event
    /* istanbul ignore next */
    cov_1p55oijc5l().s[62]++;
    await this.eventBus.emit(new messaging_events_1.MessageSentEvent({
      messageId: message.id,
      conversationId,
      senderId: userId,
      content: eventContent,
      // Use original plaintext for events
      messageType: message.messageType.toLowerCase(),
      sentAt: message.createdAt,
      recipientIds,
      replyToMessageId:
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[34][0]++, message.replyToId) ||
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[34][1]++, undefined),
      fileAttachments: attachmentUrls.length > 0 ?
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[35][0]++, attachmentUrls) :
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[35][1]++, message.attachmentUrl ?
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[36][0]++, [message.attachmentUrl]) :
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[36][1]++, undefined)),
      isEncrypted: message.isEncrypted
    }));
    // Return message with decrypted content for immediate display
    /* istanbul ignore next */
    cov_1p55oijc5l().s[63]++;
    return {
      ...message,
      content: eventContent // Return plaintext content
    };
  }
  async getConversationMessages(userId, conversationId, page =
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[37][0]++, 1), limit =
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[38][0]++, 50)) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[10]++;
    cov_1p55oijc5l().s[64]++;
    // Verify user is participant in conversation
    await this.verifyParticipant(userId, conversationId);
    const skip =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[65]++, (page - 1) * limit);
    const messages =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[66]++, await this.prisma.message.findMany({
      where: {
        conversationId,
        isDeleted: false
      },
      include: {
        sender: {
          select: {
            id: true,
            firstName: true,
            lastName: true,
            avatarUrl: true
          }
        },
        replyTo: {
          include: {
            sender: {
              select: {
                id: true,
                firstName: true,
                lastName: true
              }
            }
          }
        },
        reactions: {
          include: {
            user: {
              select: {
                id: true,
                firstName: true,
                lastName: true
              }
            }
          }
        },
        readReceipts: {
          include: {
            user: {
              select: {
                id: true,
                firstName: true,
                lastName: true
              }
            }
          }
        }
      },
      orderBy: {
        createdAt: 'desc'
      },
      skip,
      take: limit
    }));
    // Decrypt messages if they are encrypted
    const decryptedMessages =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[67]++, await Promise.all(messages.map(async message => {
      /* istanbul ignore next */
      cov_1p55oijc5l().f[11]++;
      cov_1p55oijc5l().s[68]++;
      if (
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[40][0]++, message.isEncrypted) &&
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[40][1]++, message.encryptionIv) &&
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[40][2]++, message.encryptionAuthTag) &&
      /* istanbul ignore next */
      (cov_1p55oijc5l().b[40][3]++, message.encryptionKeyId)) {
        /* istanbul ignore next */
        cov_1p55oijc5l().b[39][0]++;
        cov_1p55oijc5l().s[69]++;
        try {
          const encryptedMessage =
          /* istanbul ignore next */
          (cov_1p55oijc5l().s[70]++, {
            encryptedContent: message.content,
            iv: message.encryptionIv,
            authTag: message.encryptionAuthTag,
            keyId: message.encryptionKeyId
          });
          const decrypted =
          /* istanbul ignore next */
          (cov_1p55oijc5l().s[71]++, await this.messageEncryption.decryptMessage(encryptedMessage));
          /* istanbul ignore next */
          cov_1p55oijc5l().s[72]++;
          return {
            ...message,
            content: decrypted.content
          };
        } catch (error) {
          /* istanbul ignore next */
          cov_1p55oijc5l().s[73]++;
          this.logger.error(`Failed to decrypt message ${message.id}:`, error);
          /* istanbul ignore next */
          cov_1p55oijc5l().s[74]++;
          return {
            ...message,
            content: '[Message could not be decrypted]'
          };
        }
      } else
      /* istanbul ignore next */
      {
        cov_1p55oijc5l().b[39][1]++;
      }
      cov_1p55oijc5l().s[75]++;
      return message;
    })));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[76]++;
    return decryptedMessages.reverse(); // Return in chronological order
  }
  async updateMessage(userId, messageId, updateMessageDto) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[12]++;
    const message =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[77]++, await this.prisma.message.findUnique({
      where: {
        id: messageId
      }
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[78]++;
    if (!message) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[41][0]++;
      cov_1p55oijc5l().s[79]++;
      throw new common_1.NotFoundException('Message not found');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[41][1]++;
    }
    cov_1p55oijc5l().s[80]++;
    if (message.senderId !== userId) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[42][0]++;
      cov_1p55oijc5l().s[81]++;
      throw new common_1.ForbiddenException('You can only edit your own messages');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[42][1]++;
    }
    cov_1p55oijc5l().s[82]++;
    if (message.isDeleted) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[43][0]++;
      cov_1p55oijc5l().s[83]++;
      throw new common_1.BadRequestException('Cannot edit deleted message');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[43][1]++;
    }
    const updatedMessage =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[84]++, await this.prisma.message.update({
      where: {
        id: messageId
      },
      data: {
        content: updateMessageDto.content,
        isEdited: true,
        editedAt: new Date()
      },
      include: {
        sender: {
          select: {
            id: true,
            firstName: true,
            lastName: true,
            avatarUrl: true
          }
        },
        reactions: {
          include: {
            user: {
              select: {
                id: true,
                firstName: true,
                lastName: true
              }
            }
          }
        }
      }
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[85]++;
    return updatedMessage;
  }
  async deleteMessage(userId, messageId) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[13]++;
    const message =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[86]++, await this.prisma.message.findUnique({
      where: {
        id: messageId
      }
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[87]++;
    if (!message) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[44][0]++;
      cov_1p55oijc5l().s[88]++;
      throw new common_1.NotFoundException('Message not found');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[44][1]++;
    }
    cov_1p55oijc5l().s[89]++;
    if (message.senderId !== userId) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[45][0]++;
      cov_1p55oijc5l().s[90]++;
      throw new common_1.ForbiddenException('You can only delete your own messages');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[45][1]++;
    }
    cov_1p55oijc5l().s[91]++;
    await this.prisma.message.update({
      where: {
        id: messageId
      },
      data: {
        isDeleted: true
      }
    });
    /* istanbul ignore next */
    cov_1p55oijc5l().s[92]++;
    return {
      success: true
    };
  }
  // Read Receipts
  async markMessageAsRead(userId, messageId) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[14]++;
    const message =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[93]++, await this.prisma.message.findUnique({
      where: {
        id: messageId
      }
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[94]++;
    if (!message) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[46][0]++;
      cov_1p55oijc5l().s[95]++;
      throw new common_1.NotFoundException('Message not found');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[46][1]++;
    }
    // Don't create read receipt for own messages
    cov_1p55oijc5l().s[96]++;
    if (message.senderId === userId) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[47][0]++;
      cov_1p55oijc5l().s[97]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[47][1]++;
    }
    // Verify user is participant in conversation
    cov_1p55oijc5l().s[98]++;
    await this.verifyParticipant(userId, message.conversationId);
    /* istanbul ignore next */
    cov_1p55oijc5l().s[99]++;
    await this.prisma.messageReadReceipt.upsert({
      where: {
        messageId_userId: {
          messageId,
          userId
        }
      },
      create: {
        messageId,
        userId
      },
      update: {
        readAt: new Date()
      }
    });
    // Update participant's lastReadAt
    /* istanbul ignore next */
    cov_1p55oijc5l().s[100]++;
    await this.prisma.conversationParticipant.updateMany({
      where: {
        conversationId: message.conversationId,
        userId
      },
      data: {
        lastReadAt: new Date()
      }
    });
    // Publish message read event
    /* istanbul ignore next */
    cov_1p55oijc5l().s[101]++;
    await this.eventBus.emit(new messaging_events_1.MessageReadEvent({
      messageId,
      readBy: userId,
      readAt: new Date(),
      conversationId: message.conversationId,
      messagesSinceLastRead: 1 // Could be enhanced to calculate actual count
    }));
  }
  // Message Reactions
  async addMessageReaction(userId, messageId, emoji) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[15]++;
    const message =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[102]++, await this.prisma.message.findUnique({
      where: {
        id: messageId
      }
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[103]++;
    if (!message) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[48][0]++;
      cov_1p55oijc5l().s[104]++;
      throw new common_1.NotFoundException('Message not found');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[48][1]++;
    }
    // Verify user is participant in conversation
    cov_1p55oijc5l().s[105]++;
    await this.verifyParticipant(userId, message.conversationId);
    const reaction =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[106]++, await this.prisma.messageReaction.upsert({
      where: {
        messageId_userId_emoji: {
          messageId,
          userId,
          emoji
        }
      },
      create: {
        messageId,
        userId,
        emoji
      },
      update: {
        emoji
      },
      include: {
        user: {
          select: {
            id: true,
            firstName: true,
            lastName: true
          }
        }
      }
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[107]++;
    return reaction;
  }
  async removeMessageReaction(userId, messageId, emoji) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[16]++;
    cov_1p55oijc5l().s[108]++;
    await this.prisma.messageReaction.deleteMany({
      where: {
        messageId,
        userId,
        emoji
      }
    });
    /* istanbul ignore next */
    cov_1p55oijc5l().s[109]++;
    return {
      success: true
    };
  }
  // User Blocking
  async blockUser(blockerId, blockedId, reason) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[17]++;
    cov_1p55oijc5l().s[110]++;
    if (blockerId === blockedId) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[49][0]++;
      cov_1p55oijc5l().s[111]++;
      throw new common_1.BadRequestException('Cannot block yourself');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[49][1]++;
    }
    cov_1p55oijc5l().s[112]++;
    await this.prisma.userBlock.upsert({
      where: {
        blockerId_blockedId: {
          blockerId,
          blockedId
        }
      },
      create: {
        blockerId,
        blockedId,
        reason
      },
      update: {
        reason
      }
    });
    /* istanbul ignore next */
    cov_1p55oijc5l().s[113]++;
    return {
      success: true
    };
  }
  async unblockUser(blockerId, blockedId) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[18]++;
    cov_1p55oijc5l().s[114]++;
    await this.prisma.userBlock.deleteMany({
      where: {
        blockerId,
        blockedId
      }
    });
    /* istanbul ignore next */
    cov_1p55oijc5l().s[115]++;
    return {
      success: true
    };
  }
  // Helper Methods
  async findDirectConversation(user1Id, user2Id) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[19]++;
    cov_1p55oijc5l().s[116]++;
    return this.prisma.conversation.findFirst({
      where: {
        type: client_1.ConversationType.DIRECT,
        participants: {
          every: {
            userId: {
              in: [user1Id, user2Id]
            }
          }
        }
      },
      include: {
        participants: {
          include: {
            user: {
              select: {
                id: true,
                firstName: true,
                lastName: true,
                avatarUrl: true,
                role: true
              }
            }
          }
        }
      }
    });
  }
  async verifyParticipant(userId, conversationId) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[20]++;
    const participant =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[117]++, await this.prisma.conversationParticipant.findUnique({
      where: {
        conversationId_userId: {
          conversationId,
          userId
        }
      }
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[118]++;
    if (
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[51][0]++, !participant) ||
    /* istanbul ignore next */
    (cov_1p55oijc5l().b[51][1]++, !participant.isActive)) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[50][0]++;
      cov_1p55oijc5l().s[119]++;
      throw new common_1.ForbiddenException('You are not a participant in this conversation');
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[50][1]++;
    }
    cov_1p55oijc5l().s[120]++;
    return participant;
  }
  // Search Messages
  async searchMessages(userId, query, conversationId, page =
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[52][0]++, 1), limit =
  /* istanbul ignore next */
  (cov_1p55oijc5l().b[53][0]++, 20)) {
    /* istanbul ignore next */
    cov_1p55oijc5l().f[21]++;
    const skip =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[121]++, (page - 1) * limit);
    const whereClause =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[122]++, {
      content: {
        contains: query,
        mode: 'insensitive'
      },
      isDeleted: false,
      conversation: {
        participants: {
          some: {
            userId,
            isActive: true
          }
        }
      }
    });
    /* istanbul ignore next */
    cov_1p55oijc5l().s[123]++;
    if (conversationId) {
      /* istanbul ignore next */
      cov_1p55oijc5l().b[54][0]++;
      cov_1p55oijc5l().s[124]++;
      whereClause.conversationId = conversationId;
    } else
    /* istanbul ignore next */
    {
      cov_1p55oijc5l().b[54][1]++;
    }
    const messages =
    /* istanbul ignore next */
    (cov_1p55oijc5l().s[125]++, await this.prisma.message.findMany({
      where: whereClause,
      include: {
        sender: {
          select: {
            id: true,
            firstName: true,
            lastName: true,
            avatarUrl: true
          }
        },
        conversation: {
          select: {
            id: true,
            type: true,
            title: true
          }
        }
      },
      orderBy: {
        createdAt: 'desc'
      },
      skip,
      take: limit
    }));
    /* istanbul ignore next */
    cov_1p55oijc5l().s[126]++;
    return messages;
  }
});
/* istanbul ignore next */
cov_1p55oijc5l().s[127]++;
exports.MessagingService = MessagingService;
/* istanbul ignore next */
cov_1p55oijc5l().s[128]++;
exports.MessagingService = MessagingService = MessagingService_1 = __decorate([(0, common_1.Injectable)(), __metadata("design:paramtypes", [typeof (_a =
/* istanbul ignore next */
(cov_1p55oijc5l().b[56][0]++, typeof prisma_client_provider_1.PrismaService !== "undefined") &&
/* istanbul ignore next */
(cov_1p55oijc5l().b[56][1]++, prisma_client_provider_1.PrismaService)) === "function" ?
/* istanbul ignore next */
(cov_1p55oijc5l().b[55][0]++, _a) :
/* istanbul ignore next */
(cov_1p55oijc5l().b[55][1]++, Object), typeof (_b =
/* istanbul ignore next */
(cov_1p55oijc5l().b[58][0]++, typeof event_bus_service_1.EventBusService !== "undefined") &&
/* istanbul ignore next */
(cov_1p55oijc5l().b[58][1]++, event_bus_service_1.EventBusService)) === "function" ?
/* istanbul ignore next */
(cov_1p55oijc5l().b[57][0]++, _b) :
/* istanbul ignore next */
(cov_1p55oijc5l().b[57][1]++, Object), typeof (_c =
/* istanbul ignore next */
(cov_1p55oijc5l().b[60][0]++, typeof message_encryption_service_1.MessageEncryptionService !== "undefined") &&
/* istanbul ignore next */
(cov_1p55oijc5l().b[60][1]++, message_encryption_service_1.MessageEncryptionService)) === "function" ?
/* istanbul ignore next */
(cov_1p55oijc5l().b[59][0]++, _c) :
/* istanbul ignore next */
(cov_1p55oijc5l().b[59][1]++, Object)])], MessagingService);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXA1NW9pamM1bCIsImFjdHVhbENvdmVyYWdlIiwiY29tbW9uXzEiLCJzIiwicmVxdWlyZSIsInByaXNtYV9jbGllbnRfcHJvdmlkZXJfMSIsImNsaWVudF8xIiwiZXZlbnRfYnVzX3NlcnZpY2VfMSIsIm1lc3NhZ2luZ19ldmVudHNfMSIsIm1lc3NhZ2VfZW5jcnlwdGlvbl9zZXJ2aWNlXzEiLCJNZXNzYWdpbmdTZXJ2aWNlIiwiTWVzc2FnaW5nU2VydmljZV8xIiwicHJpc21hIiwiZXZlbnRCdXMiLCJtZXNzYWdlRW5jcnlwdGlvbiIsImxvZ2dlciIsIkxvZ2dlciIsIm5hbWUiLCJjb25zdHJ1Y3RvciIsImYiLCJjcmVhdGVDb252ZXJzYXRpb24iLCJ1c2VySWQiLCJjcmVhdGVDb252ZXJzYXRpb25EdG8iLCJwYXJ0aWNpcGFudElkcyIsInR5cGUiLCJiIiwiQ29udmVyc2F0aW9uVHlwZSIsIkRJUkVDVCIsInRpdGxlIiwibGVuZ3RoIiwiQmFkUmVxdWVzdEV4Y2VwdGlvbiIsImV4aXN0aW5nQ29udmVyc2F0aW9uIiwiZmluZERpcmVjdENvbnZlcnNhdGlvbiIsImNvbnZlcnNhdGlvbiIsImNyZWF0ZSIsImRhdGEiLCJwYXJ0aWNpcGFudHMiLCJyb2xlIiwiUGFydGljaXBhbnRSb2xlIiwiQURNSU4iLCJtYXAiLCJwYXJ0aWNpcGFudElkIiwiTUVNQkVSIiwiaW5jbHVkZSIsInVzZXIiLCJzZWxlY3QiLCJpZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiYXZhdGFyVXJsIiwibWVzc2FnZXMiLCJ0YWtlIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsInNlbmRlciIsImVtaXQiLCJDb252ZXJzYXRpb25DcmVhdGVkRXZlbnQiLCJjb252ZXJzYXRpb25JZCIsImNyZWF0ZWRCeSIsImNvbnZlcnNhdGlvblR5cGUiLCJ0b0xvd2VyQ2FzZSIsInVuZGVmaW5lZCIsImlzUHJpdmF0ZSIsImdldFVzZXJDb252ZXJzYXRpb25zIiwicGFnZSIsImxpbWl0Iiwic2tpcCIsImNvbnZlcnNhdGlvbnMiLCJmaW5kTWFueSIsIndoZXJlIiwic29tZSIsImlzQWN0aXZlIiwiaXNEZWxldGVkIiwiX2NvdW50IiwicmVhZFJlY2VpcHRzIiwibm9uZSIsImxhc3RNZXNzYWdlQXQiLCJzZW5kTWVzc2FnZSIsInNlbmRNZXNzYWdlRHRvIiwiYXR0YWNobWVudFVybHMiLCJhdHRhY2htZW50TmFtZXMiLCJhdHRhY2htZW50U2l6ZXMiLCJ2ZXJpZnlQYXJ0aWNpcGFudCIsImNvbnRlbnQiLCJtZXNzYWdlVHlwZSIsIk1lc3NhZ2VUeXBlIiwiVEVYVCIsInJlcGx5VG9JZCIsImF0dGFjaG1lbnRVcmwiLCJhdHRhY2htZW50TmFtZSIsImF0dGFjaG1lbnRTaXplIiwiZmluZFVuaXF1ZSIsIk5vdEZvdW5kRXhjZXB0aW9uIiwiZ2V0Q29udmVyc2F0aW9uVHlwZSIsInAiLCJmaW5hbENvbnRlbnQiLCJlbmNyeXB0aW9uRGF0YSIsInRyaW0iLCJlbmNyeXB0TWVzc2FnZSIsImVuY3J5cHRlZENvbnRlbnQiLCJlcnJvciIsIm1lc3NhZ2UiLCJzZW5kZXJJZCIsImVuY3J5cHRpb25JdiIsIml2IiwiZW5jcnlwdGlvbkF1dGhUYWciLCJhdXRoVGFnIiwiZW5jcnlwdGlvbktleUlkIiwia2V5SWQiLCJpc0VuY3J5cHRlZCIsInJlcGx5VG8iLCJyZWFjdGlvbnMiLCJ1cGRhdGUiLCJEYXRlIiwiZXZlbnRDb250ZW50IiwicmVjaXBpZW50SWRzIiwiZmlsdGVyIiwiTWVzc2FnZVNlbnRFdmVudCIsIm1lc3NhZ2VJZCIsInNlbnRBdCIsInJlcGx5VG9NZXNzYWdlSWQiLCJmaWxlQXR0YWNobWVudHMiLCJnZXRDb252ZXJzYXRpb25NZXNzYWdlcyIsImRlY3J5cHRlZE1lc3NhZ2VzIiwiUHJvbWlzZSIsImFsbCIsImVuY3J5cHRlZE1lc3NhZ2UiLCJkZWNyeXB0ZWQiLCJkZWNyeXB0TWVzc2FnZSIsInJldmVyc2UiLCJ1cGRhdGVNZXNzYWdlIiwidXBkYXRlTWVzc2FnZUR0byIsIkZvcmJpZGRlbkV4Y2VwdGlvbiIsInVwZGF0ZWRNZXNzYWdlIiwiaXNFZGl0ZWQiLCJlZGl0ZWRBdCIsImRlbGV0ZU1lc3NhZ2UiLCJzdWNjZXNzIiwibWFya01lc3NhZ2VBc1JlYWQiLCJtZXNzYWdlUmVhZFJlY2VpcHQiLCJ1cHNlcnQiLCJtZXNzYWdlSWRfdXNlcklkIiwicmVhZEF0IiwiY29udmVyc2F0aW9uUGFydGljaXBhbnQiLCJ1cGRhdGVNYW55IiwibGFzdFJlYWRBdCIsIk1lc3NhZ2VSZWFkRXZlbnQiLCJyZWFkQnkiLCJtZXNzYWdlc1NpbmNlTGFzdFJlYWQiLCJhZGRNZXNzYWdlUmVhY3Rpb24iLCJlbW9qaSIsInJlYWN0aW9uIiwibWVzc2FnZVJlYWN0aW9uIiwibWVzc2FnZUlkX3VzZXJJZF9lbW9qaSIsInJlbW92ZU1lc3NhZ2VSZWFjdGlvbiIsImRlbGV0ZU1hbnkiLCJibG9ja1VzZXIiLCJibG9ja2VySWQiLCJibG9ja2VkSWQiLCJyZWFzb24iLCJ1c2VyQmxvY2siLCJibG9ja2VySWRfYmxvY2tlZElkIiwidW5ibG9ja1VzZXIiLCJ1c2VyMUlkIiwidXNlcjJJZCIsImZpbmRGaXJzdCIsImV2ZXJ5IiwiaW4iLCJwYXJ0aWNpcGFudCIsImNvbnZlcnNhdGlvbklkX3VzZXJJZCIsInNlYXJjaE1lc3NhZ2VzIiwicXVlcnkiLCJ3aGVyZUNsYXVzZSIsImNvbnRhaW5zIiwibW9kZSIsImV4cG9ydHMiLCJfX2RlY29yYXRlIiwiSW5qZWN0YWJsZSIsIlByaXNtYVNlcnZpY2UiLCJfYSIsIk9iamVjdCIsIl9iIiwiRXZlbnRCdXNTZXJ2aWNlIiwiX2MiLCJNZXNzYWdlRW5jcnlwdGlvblNlcnZpY2UiXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvbWVzc2FnaW5nL21lc3NhZ2luZy5zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEluamVjdGFibGUsXG4gIExvZ2dlcixcbiAgTm90Rm91bmRFeGNlcHRpb24sXG4gIEZvcmJpZGRlbkV4Y2VwdGlvbixcbiAgQmFkUmVxdWVzdEV4Y2VwdGlvbixcbn0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgUHJpc21hU2VydmljZSB9IGZyb20gJy4uL3Byb3ZpZGVycy9wcmlzbWEtY2xpZW50LnByb3ZpZGVyJztcbmltcG9ydCB7XG4gIENyZWF0ZUNvbnZlcnNhdGlvbkR0byxcbiAgU2VuZE1lc3NhZ2VEdG8sXG4gIFVwZGF0ZU1lc3NhZ2VEdG8sXG59IGZyb20gJ21lbnRhcmEtY29tbW9ucyc7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25UeXBlLCBNZXNzYWdlVHlwZSwgUGFydGljaXBhbnRSb2xlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuaW1wb3J0IHsgRXZlbnRCdXNTZXJ2aWNlIH0gZnJvbSAnLi4vY29tbW9uL2V2ZW50cy9ldmVudC1idXMuc2VydmljZSc7XG5pbXBvcnQge1xuICBNZXNzYWdlU2VudEV2ZW50LFxuICBNZXNzYWdlUmVhZEV2ZW50LFxuICBDb252ZXJzYXRpb25DcmVhdGVkRXZlbnQsXG59IGZyb20gJy4uL2NvbW1vbi9ldmVudHMvbWVzc2FnaW5nLWV2ZW50cyc7XG5pbXBvcnQge1xuICBNZXNzYWdlRW5jcnlwdGlvblNlcnZpY2UsXG4gIEVuY3J5cHRlZE1lc3NhZ2UsXG59IGZyb20gJy4vc2VydmljZXMvbWVzc2FnZS1lbmNyeXB0aW9uLnNlcnZpY2UnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgTWVzc2FnaW5nU2VydmljZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyID0gbmV3IExvZ2dlcihNZXNzYWdpbmdTZXJ2aWNlLm5hbWUpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcHJpc21hOiBQcmlzbWFTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZXZlbnRCdXM6IEV2ZW50QnVzU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1lc3NhZ2VFbmNyeXB0aW9uOiBNZXNzYWdlRW5jcnlwdGlvblNlcnZpY2UsXG4gICkge31cblxuICAvLyBDb252ZXJzYXRpb24gTWFuYWdlbWVudFxuICBhc3luYyBjcmVhdGVDb252ZXJzYXRpb24oXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgY3JlYXRlQ29udmVyc2F0aW9uRHRvOiBDcmVhdGVDb252ZXJzYXRpb25EdG8sXG4gICkge1xuICAgIGNvbnN0IHtcbiAgICAgIHBhcnRpY2lwYW50SWRzLFxuICAgICAgdHlwZSA9IENvbnZlcnNhdGlvblR5cGUuRElSRUNULFxuICAgICAgdGl0bGUsXG4gICAgfSA9IGNyZWF0ZUNvbnZlcnNhdGlvbkR0bztcblxuICAgIC8vIFZhbGlkYXRlIGNvbnZlcnNhdGlvbiB0eXBlIGFuZCBwYXJ0aWNpcGFudHNcbiAgICBpZiAodHlwZSA9PT0gQ29udmVyc2F0aW9uVHlwZS5ESVJFQ1QgJiYgcGFydGljaXBhbnRJZHMubGVuZ3RoICE9PSAxKSB7XG4gICAgICB0aHJvdyBuZXcgQmFkUmVxdWVzdEV4Y2VwdGlvbihcbiAgICAgICAgJ0RpcmVjdCBjb252ZXJzYXRpb25zIG11c3QgaGF2ZSBleGFjdGx5IG9uZSBvdGhlciBwYXJ0aWNpcGFudCcsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGRpcmVjdCBjb252ZXJzYXRpb24gYWxyZWFkeSBleGlzdHNcbiAgICBpZiAodHlwZSA9PT0gQ29udmVyc2F0aW9uVHlwZS5ESVJFQ1QpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nQ29udmVyc2F0aW9uID0gYXdhaXQgdGhpcy5maW5kRGlyZWN0Q29udmVyc2F0aW9uKFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIHBhcnRpY2lwYW50SWRzWzBdLFxuICAgICAgKTtcbiAgICAgIGlmIChleGlzdGluZ0NvbnZlcnNhdGlvbikge1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdDb252ZXJzYXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGNvbnZlcnNhdGlvbiB3aXRoIHBhcnRpY2lwYW50c1xuICAgIGNvbnN0IGNvbnZlcnNhdGlvbiA9IGF3YWl0IHRoaXMucHJpc21hLmNvbnZlcnNhdGlvbi5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB0eXBlLFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgcGFydGljaXBhbnRzOiB7XG4gICAgICAgICAgY3JlYXRlOiBbXG4gICAgICAgICAgICB7IHVzZXJJZCwgcm9sZTogUGFydGljaXBhbnRSb2xlLkFETUlOIH0sXG4gICAgICAgICAgICAuLi5wYXJ0aWNpcGFudElkcy5tYXAoKHBhcnRpY2lwYW50SWQpID0+ICh7XG4gICAgICAgICAgICAgIHVzZXJJZDogcGFydGljaXBhbnRJZCxcbiAgICAgICAgICAgICAgcm9sZTogUGFydGljaXBhbnRSb2xlLk1FTUJFUixcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgcGFydGljaXBhbnRzOiB7XG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgYXZhdGFyVXJsOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgICAgdGFrZTogMSxcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgc2VuZGVyOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhdmF0YXJVcmw6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gUHVibGlzaCBjb252ZXJzYXRpb24gY3JlYXRlZCBldmVudFxuICAgIGF3YWl0IHRoaXMuZXZlbnRCdXMuZW1pdChcbiAgICAgIG5ldyBDb252ZXJzYXRpb25DcmVhdGVkRXZlbnQoe1xuICAgICAgICBjb252ZXJzYXRpb25JZDogY29udmVyc2F0aW9uLmlkLFxuICAgICAgICBjcmVhdGVkQnk6IHVzZXJJZCxcbiAgICAgICAgcGFydGljaXBhbnRJZHM6IFt1c2VySWQsIC4uLnBhcnRpY2lwYW50SWRzXSxcbiAgICAgICAgY29udmVyc2F0aW9uVHlwZTogdHlwZS50b0xvd2VyQ2FzZSgpIGFzXG4gICAgICAgICAgfCAnZGlyZWN0J1xuICAgICAgICAgIHwgJ2dyb3VwJ1xuICAgICAgICAgIHwgJ3N1cHBvcnQnXG4gICAgICAgICAgfCAndGhlcmFweScsXG4gICAgICAgIHRpdGxlOiB0aXRsZSB8fCB1bmRlZmluZWQsXG4gICAgICAgIGlzUHJpdmF0ZTogdHlwZSA9PT0gQ29udmVyc2F0aW9uVHlwZS5ESVJFQ1QsXG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgcmV0dXJuIGNvbnZlcnNhdGlvbjtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJDb252ZXJzYXRpb25zKHVzZXJJZDogc3RyaW5nLCBwYWdlID0gMSwgbGltaXQgPSAyMCkge1xuICAgIGNvbnN0IHNraXAgPSAocGFnZSAtIDEpICogbGltaXQ7XG5cbiAgICBjb25zdCBjb252ZXJzYXRpb25zID0gYXdhaXQgdGhpcy5wcmlzbWEuY29udmVyc2F0aW9uLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHBhcnRpY2lwYW50czoge1xuICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgcGFydGljaXBhbnRzOiB7XG4gICAgICAgICAgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhdmF0YXJVcmw6IHRydWUsXG4gICAgICAgICAgICAgICAgcm9sZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgICB0YWtlOiAxLFxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICB3aGVyZTogeyBpc0RlbGV0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgc2VuZGVyOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhdmF0YXJVcmw6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICBpc0RlbGV0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlYWRSZWNlaXB0czoge1xuICAgICAgICAgICAgICAgICAgbm9uZTogeyB1c2VySWQgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIG9yZGVyQnk6IHsgbGFzdE1lc3NhZ2VBdDogJ2Rlc2MnIH0sXG4gICAgICBza2lwLFxuICAgICAgdGFrZTogbGltaXQsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gY29udmVyc2F0aW9ucztcbiAgfVxuXG4gIC8vIE1lc3NhZ2UgTWFuYWdlbWVudFxuICBhc3luYyBzZW5kTWVzc2FnZShcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxuICAgIHNlbmRNZXNzYWdlRHRvOiBTZW5kTWVzc2FnZUR0byxcbiAgICBhdHRhY2htZW50VXJsczogc3RyaW5nW10gPSBbXSxcbiAgICBhdHRhY2htZW50TmFtZXM6IHN0cmluZ1tdID0gW10sXG4gICAgYXR0YWNobWVudFNpemVzOiBudW1iZXJbXSA9IFtdLFxuICApIHtcbiAgICAvLyBWZXJpZnkgdXNlciBpcyBwYXJ0aWNpcGFudCBpbiBjb252ZXJzYXRpb25cbiAgICBhd2FpdCB0aGlzLnZlcmlmeVBhcnRpY2lwYW50KHVzZXJJZCwgY29udmVyc2F0aW9uSWQpO1xuXG4gICAgY29uc3Qge1xuICAgICAgY29udGVudCxcbiAgICAgIG1lc3NhZ2VUeXBlID0gTWVzc2FnZVR5cGUuVEVYVCxcbiAgICAgIHJlcGx5VG9JZCxcbiAgICAgIGF0dGFjaG1lbnRVcmwsXG4gICAgICBhdHRhY2htZW50TmFtZSxcbiAgICAgIGF0dGFjaG1lbnRTaXplLFxuICAgIH0gPSBzZW5kTWVzc2FnZUR0bztcblxuICAgIC8vIEdldCBjb252ZXJzYXRpb24gZGV0YWlscyB0byBkZXRlcm1pbmUgZW5jcnlwdGlvbiB0eXBlXG4gICAgY29uc3QgY29udmVyc2F0aW9uID0gYXdhaXQgdGhpcy5wcmlzbWEuY29udmVyc2F0aW9uLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGNvbnZlcnNhdGlvbklkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHBhcnRpY2lwYW50czoge1xuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7IHJvbGU6IHRydWUgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIWNvbnZlcnNhdGlvbikge1xuICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCdDb252ZXJzYXRpb24gbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIGVuY3J5cHRpb24gdHlwZSBiYXNlZCBvbiBjb252ZXJzYXRpb24gcGFydGljaXBhbnRzXG4gICAgY29uc3QgY29udmVyc2F0aW9uVHlwZSA9IHRoaXMubWVzc2FnZUVuY3J5cHRpb24uZ2V0Q29udmVyc2F0aW9uVHlwZShcbiAgICAgIGNvbnZlcnNhdGlvbi5wYXJ0aWNpcGFudHMubWFwKChwKSA9PiAoeyByb2xlOiBwLnVzZXIucm9sZSB9KSksXG4gICAgKTtcblxuICAgIC8vIEVuY3J5cHQgbWVzc2FnZSBjb250ZW50IGZvciBzZW5zaXRpdmUgY29udmVyc2F0aW9uc1xuICAgIGxldCBmaW5hbENvbnRlbnQgPSBjb250ZW50O1xuICAgIGxldCBlbmNyeXB0aW9uRGF0YTogRW5jcnlwdGVkTWVzc2FnZSB8IG51bGwgPSBudWxsO1xuXG4gICAgaWYgKG1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5URVhUICYmIGNvbnRlbnQudHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGVuY3J5cHRpb25EYXRhID0gYXdhaXQgdGhpcy5tZXNzYWdlRW5jcnlwdGlvbi5lbmNyeXB0TWVzc2FnZShcbiAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgIGNvbnZlcnNhdGlvblR5cGUsXG4gICAgICAgICk7XG4gICAgICAgIGZpbmFsQ29udGVudCA9IGVuY3J5cHRpb25EYXRhLmVuY3J5cHRlZENvbnRlbnQ7IC8vIFN0b3JlIGVuY3J5cHRlZCBjb250ZW50XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcbiAgICAgICAgICAnTWVzc2FnZSBlbmNyeXB0aW9uIGZhaWxlZCwgc3RvcmluZyBwbGFpbnRleHQ6JyxcbiAgICAgICAgICBlcnJvcixcbiAgICAgICAgKTtcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gcGxhaW50ZXh0IGlmIGVuY3J5cHRpb24gZmFpbHMgKGxvZyB0aGlzIGZvciBzZWN1cml0eSBhdWRpdClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGhpcy5wcmlzbWEubWVzc2FnZS5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgc2VuZGVySWQ6IHVzZXJJZCxcbiAgICAgICAgY29udGVudDogZmluYWxDb250ZW50LCAvLyBTdG9yZSBlbmNyeXB0ZWQgY29udGVudFxuICAgICAgICBtZXNzYWdlVHlwZSxcbiAgICAgICAgcmVwbHlUb0lkLFxuICAgICAgICAvLyBLZWVwIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCBzaW5nbGUgYXR0YWNobWVudCBmaWVsZHNcbiAgICAgICAgYXR0YWNobWVudFVybDogYXR0YWNobWVudFVybHNbMF0gfHwgYXR0YWNobWVudFVybCxcbiAgICAgICAgYXR0YWNobWVudE5hbWU6IGF0dGFjaG1lbnROYW1lc1swXSB8fCBhdHRhY2htZW50TmFtZSxcbiAgICAgICAgYXR0YWNobWVudFNpemU6IGF0dGFjaG1lbnRTaXplc1swXSB8fCBhdHRhY2htZW50U2l6ZSxcbiAgICAgICAgLy8gQWRkIG5ldyBtdWx0aXBsZSBhdHRhY2htZW50IGZpZWxkc1xuICAgICAgICBhdHRhY2htZW50VXJscyxcbiAgICAgICAgYXR0YWNobWVudE5hbWVzLFxuICAgICAgICBhdHRhY2htZW50U2l6ZXMsXG4gICAgICAgIC8vIFN0b3JlIGVuY3J5cHRpb24gbWV0YWRhdGFcbiAgICAgICAgZW5jcnlwdGlvbkl2OiBlbmNyeXB0aW9uRGF0YT8uaXYsXG4gICAgICAgIGVuY3J5cHRpb25BdXRoVGFnOiBlbmNyeXB0aW9uRGF0YT8uYXV0aFRhZyxcbiAgICAgICAgZW5jcnlwdGlvbktleUlkOiBlbmNyeXB0aW9uRGF0YT8ua2V5SWQsXG4gICAgICAgIGlzRW5jcnlwdGVkOiAhIWVuY3J5cHRpb25EYXRhLFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgc2VuZGVyOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgYXZhdGFyVXJsOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJlcGx5VG86IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBzZW5kZXI6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICByZWFjdGlvbnM6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgY29udmVyc2F0aW9uIGxhc3RNZXNzYWdlQXRcbiAgICBhd2FpdCB0aGlzLnByaXNtYS5jb252ZXJzYXRpb24udXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBjb252ZXJzYXRpb25JZCB9LFxuICAgICAgZGF0YTogeyBsYXN0TWVzc2FnZUF0OiBuZXcgRGF0ZSgpIH0sXG4gICAgfSk7XG5cbiAgICAvLyBGb3IgZW5jcnlwdGVkIG1lc3NhZ2VzLCB3ZSBuZWVkIHRvIGRlY3J5cHQgZm9yIGV2ZW50IGVtaXNzaW9uXG4gICAgbGV0IGV2ZW50Q29udGVudCA9IGNvbnRlbnQ7IC8vIE9yaWdpbmFsIHBsYWludGV4dCBmb3IgZXZlbnRzXG4gICAgaWYgKG1lc3NhZ2UuaXNFbmNyeXB0ZWQgJiYgZW5jcnlwdGlvbkRhdGEpIHtcbiAgICAgIC8vIEV2ZW50cyBzaG91bGQgY29udGFpbiBwbGFpbnRleHQgZm9yIHByb2Nlc3NpbmdcbiAgICAgIGV2ZW50Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgY29uc3QgcmVjaXBpZW50SWRzID1cbiAgICAgIGNvbnZlcnNhdGlvbj8ucGFydGljaXBhbnRzXG4gICAgICAgIC5tYXAoKHApID0+IHAudXNlcklkKVxuICAgICAgICAuZmlsdGVyKChpZCkgPT4gaWQgIT09IHVzZXJJZCkgfHwgW107XG5cbiAgICAvLyBQdWJsaXNoIG1lc3NhZ2Ugc2VudCBldmVudFxuICAgIGF3YWl0IHRoaXMuZXZlbnRCdXMuZW1pdChcbiAgICAgIG5ldyBNZXNzYWdlU2VudEV2ZW50KHtcbiAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlLmlkLFxuICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgc2VuZGVySWQ6IHVzZXJJZCxcbiAgICAgICAgY29udGVudDogZXZlbnRDb250ZW50LCAvLyBVc2Ugb3JpZ2luYWwgcGxhaW50ZXh0IGZvciBldmVudHNcbiAgICAgICAgbWVzc2FnZVR5cGU6IG1lc3NhZ2UubWVzc2FnZVR5cGUudG9Mb3dlckNhc2UoKSBhc1xuICAgICAgICAgIHwgJ3RleHQnXG4gICAgICAgICAgfCAnaW1hZ2UnXG4gICAgICAgICAgfCAnZmlsZSdcbiAgICAgICAgICB8ICdhdWRpbydcbiAgICAgICAgICB8ICd2aWRlbydcbiAgICAgICAgICB8ICdzeXN0ZW0nLFxuICAgICAgICBzZW50QXQ6IG1lc3NhZ2UuY3JlYXRlZEF0LFxuICAgICAgICByZWNpcGllbnRJZHMsXG4gICAgICAgIHJlcGx5VG9NZXNzYWdlSWQ6IG1lc3NhZ2UucmVwbHlUb0lkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgZmlsZUF0dGFjaG1lbnRzOlxuICAgICAgICAgIGF0dGFjaG1lbnRVcmxzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gYXR0YWNobWVudFVybHNcbiAgICAgICAgICAgIDogbWVzc2FnZS5hdHRhY2htZW50VXJsXG4gICAgICAgICAgICAgID8gW21lc3NhZ2UuYXR0YWNobWVudFVybF1cbiAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIGlzRW5jcnlwdGVkOiBtZXNzYWdlLmlzRW5jcnlwdGVkLFxuICAgICAgfSksXG4gICAgKTtcblxuICAgIC8vIFJldHVybiBtZXNzYWdlIHdpdGggZGVjcnlwdGVkIGNvbnRlbnQgZm9yIGltbWVkaWF0ZSBkaXNwbGF5XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICBjb250ZW50OiBldmVudENvbnRlbnQsIC8vIFJldHVybiBwbGFpbnRleHQgY29udGVudFxuICAgIH07XG4gIH1cblxuICBhc3luYyBnZXRDb252ZXJzYXRpb25NZXNzYWdlcyhcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBjb252ZXJzYXRpb25JZDogc3RyaW5nLFxuICAgIHBhZ2UgPSAxLFxuICAgIGxpbWl0ID0gNTAsXG4gICkge1xuICAgIC8vIFZlcmlmeSB1c2VyIGlzIHBhcnRpY2lwYW50IGluIGNvbnZlcnNhdGlvblxuICAgIGF3YWl0IHRoaXMudmVyaWZ5UGFydGljaXBhbnQodXNlcklkLCBjb252ZXJzYXRpb25JZCk7XG5cbiAgICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCB0aGlzLnByaXNtYS5tZXNzYWdlLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGNvbnZlcnNhdGlvbklkLFxuICAgICAgICBpc0RlbGV0ZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgc2VuZGVyOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgYXZhdGFyVXJsOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJlcGx5VG86IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBzZW5kZXI6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICByZWFjdGlvbnM6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVhZFJlY2VpcHRzOiB7XG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgc2tpcCxcbiAgICAgIHRha2U6IGxpbWl0LFxuICAgIH0pO1xuXG4gICAgLy8gRGVjcnlwdCBtZXNzYWdlcyBpZiB0aGV5IGFyZSBlbmNyeXB0ZWRcbiAgICBjb25zdCBkZWNyeXB0ZWRNZXNzYWdlcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgbWVzc2FnZXMubWFwKGFzeW5jIChtZXNzYWdlKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBtZXNzYWdlLmlzRW5jcnlwdGVkICYmXG4gICAgICAgICAgbWVzc2FnZS5lbmNyeXB0aW9uSXYgJiZcbiAgICAgICAgICBtZXNzYWdlLmVuY3J5cHRpb25BdXRoVGFnICYmXG4gICAgICAgICAgbWVzc2FnZS5lbmNyeXB0aW9uS2V5SWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgIGVuY3J5cHRlZENvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgICAgICAgaXY6IG1lc3NhZ2UuZW5jcnlwdGlvbkl2LFxuICAgICAgICAgICAgICBhdXRoVGFnOiBtZXNzYWdlLmVuY3J5cHRpb25BdXRoVGFnLFxuICAgICAgICAgICAgICBrZXlJZDogbWVzc2FnZS5lbmNyeXB0aW9uS2V5SWQsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWQgPVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1lc3NhZ2VFbmNyeXB0aW9uLmRlY3J5cHRNZXNzYWdlKGVuY3J5cHRlZE1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4ubWVzc2FnZSxcbiAgICAgICAgICAgICAgY29udGVudDogZGVjcnlwdGVkLmNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcbiAgICAgICAgICAgICAgYEZhaWxlZCB0byBkZWNyeXB0IG1lc3NhZ2UgJHttZXNzYWdlLmlkfTpgLFxuICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5tZXNzYWdlLFxuICAgICAgICAgICAgICBjb250ZW50OiAnW01lc3NhZ2UgY291bGQgbm90IGJlIGRlY3J5cHRlZF0nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgcmV0dXJuIGRlY3J5cHRlZE1lc3NhZ2VzLnJldmVyc2UoKTsgLy8gUmV0dXJuIGluIGNocm9ub2xvZ2ljYWwgb3JkZXJcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZU1lc3NhZ2UoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgbWVzc2FnZUlkOiBzdHJpbmcsXG4gICAgdXBkYXRlTWVzc2FnZUR0bzogVXBkYXRlTWVzc2FnZUR0byxcbiAgKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRoaXMucHJpc21hLm1lc3NhZ2UuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogbWVzc2FnZUlkIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbignTWVzc2FnZSBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBpZiAobWVzc2FnZS5zZW5kZXJJZCAhPT0gdXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXhjZXB0aW9uKCdZb3UgY2FuIG9ubHkgZWRpdCB5b3VyIG93biBtZXNzYWdlcycpO1xuICAgIH1cblxuICAgIGlmIChtZXNzYWdlLmlzRGVsZXRlZCkge1xuICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oJ0Nhbm5vdCBlZGl0IGRlbGV0ZWQgbWVzc2FnZScpO1xuICAgIH1cblxuICAgIGNvbnN0IHVwZGF0ZWRNZXNzYWdlID0gYXdhaXQgdGhpcy5wcmlzbWEubWVzc2FnZS51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IG1lc3NhZ2VJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBjb250ZW50OiB1cGRhdGVNZXNzYWdlRHRvLmNvbnRlbnQsXG4gICAgICAgIGlzRWRpdGVkOiB0cnVlLFxuICAgICAgICBlZGl0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHNlbmRlcjoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIGF2YXRhclVybDogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICByZWFjdGlvbnM6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdXBkYXRlZE1lc3NhZ2U7XG4gIH1cblxuICBhc3luYyBkZWxldGVNZXNzYWdlKHVzZXJJZDogc3RyaW5nLCBtZXNzYWdlSWQ6IHN0cmluZykge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0aGlzLnByaXNtYS5tZXNzYWdlLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IG1lc3NhZ2VJZCB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oJ01lc3NhZ2Ugbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgaWYgKG1lc3NhZ2Uuc2VuZGVySWQgIT09IHVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEZvcmJpZGRlbkV4Y2VwdGlvbignWW91IGNhbiBvbmx5IGRlbGV0ZSB5b3VyIG93biBtZXNzYWdlcycpO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucHJpc21hLm1lc3NhZ2UudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBtZXNzYWdlSWQgfSxcbiAgICAgIGRhdGE6IHsgaXNEZWxldGVkOiB0cnVlIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH1cblxuICAvLyBSZWFkIFJlY2VpcHRzXG4gIGFzeW5jIG1hcmtNZXNzYWdlQXNSZWFkKHVzZXJJZDogc3RyaW5nLCBtZXNzYWdlSWQ6IHN0cmluZykge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0aGlzLnByaXNtYS5tZXNzYWdlLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IG1lc3NhZ2VJZCB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb24oJ01lc3NhZ2Ugbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgY3JlYXRlIHJlYWQgcmVjZWlwdCBmb3Igb3duIG1lc3NhZ2VzXG4gICAgaWYgKG1lc3NhZ2Uuc2VuZGVySWQgPT09IHVzZXJJZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFZlcmlmeSB1c2VyIGlzIHBhcnRpY2lwYW50IGluIGNvbnZlcnNhdGlvblxuICAgIGF3YWl0IHRoaXMudmVyaWZ5UGFydGljaXBhbnQodXNlcklkLCBtZXNzYWdlLmNvbnZlcnNhdGlvbklkKTtcblxuICAgIGF3YWl0IHRoaXMucHJpc21hLm1lc3NhZ2VSZWFkUmVjZWlwdC51cHNlcnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgbWVzc2FnZUlkX3VzZXJJZDoge1xuICAgICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgY3JlYXRlOiB7XG4gICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgdXNlcklkLFxuICAgICAgfSxcbiAgICAgIHVwZGF0ZToge1xuICAgICAgICByZWFkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIHBhcnRpY2lwYW50J3MgbGFzdFJlYWRBdFxuICAgIGF3YWl0IHRoaXMucHJpc21hLmNvbnZlcnNhdGlvblBhcnRpY2lwYW50LnVwZGF0ZU1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgY29udmVyc2F0aW9uSWQ6IG1lc3NhZ2UuY29udmVyc2F0aW9uSWQsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGxhc3RSZWFkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gUHVibGlzaCBtZXNzYWdlIHJlYWQgZXZlbnRcbiAgICBhd2FpdCB0aGlzLmV2ZW50QnVzLmVtaXQoXG4gICAgICBuZXcgTWVzc2FnZVJlYWRFdmVudCh7XG4gICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgcmVhZEJ5OiB1c2VySWQsXG4gICAgICAgIHJlYWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgY29udmVyc2F0aW9uSWQ6IG1lc3NhZ2UuY29udmVyc2F0aW9uSWQsXG4gICAgICAgIG1lc3NhZ2VzU2luY2VMYXN0UmVhZDogMSwgLy8gQ291bGQgYmUgZW5oYW5jZWQgdG8gY2FsY3VsYXRlIGFjdHVhbCBjb3VudFxuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8vIE1lc3NhZ2UgUmVhY3Rpb25zXG4gIGFzeW5jIGFkZE1lc3NhZ2VSZWFjdGlvbih1c2VySWQ6IHN0cmluZywgbWVzc2FnZUlkOiBzdHJpbmcsIGVtb2ppOiBzdHJpbmcpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGhpcy5wcmlzbWEubWVzc2FnZS5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBtZXNzYWdlSWQgfSxcbiAgICB9KTtcblxuICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCdNZXNzYWdlIG5vdCBmb3VuZCcpO1xuICAgIH1cblxuICAgIC8vIFZlcmlmeSB1c2VyIGlzIHBhcnRpY2lwYW50IGluIGNvbnZlcnNhdGlvblxuICAgIGF3YWl0IHRoaXMudmVyaWZ5UGFydGljaXBhbnQodXNlcklkLCBtZXNzYWdlLmNvbnZlcnNhdGlvbklkKTtcblxuICAgIGNvbnN0IHJlYWN0aW9uID0gYXdhaXQgdGhpcy5wcmlzbWEubWVzc2FnZVJlYWN0aW9uLnVwc2VydCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBtZXNzYWdlSWRfdXNlcklkX2Vtb2ppOiB7XG4gICAgICAgICAgbWVzc2FnZUlkLFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBlbW9qaSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBjcmVhdGU6IHtcbiAgICAgICAgbWVzc2FnZUlkLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGVtb2ppLFxuICAgICAgfSxcbiAgICAgIHVwZGF0ZToge1xuICAgICAgICBlbW9qaSxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVhY3Rpb247XG4gIH1cblxuICBhc3luYyByZW1vdmVNZXNzYWdlUmVhY3Rpb24oXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgbWVzc2FnZUlkOiBzdHJpbmcsXG4gICAgZW1vamk6IHN0cmluZyxcbiAgKSB7XG4gICAgYXdhaXQgdGhpcy5wcmlzbWEubWVzc2FnZVJlYWN0aW9uLmRlbGV0ZU1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgbWVzc2FnZUlkLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGVtb2ppLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfVxuXG4gIC8vIFVzZXIgQmxvY2tpbmdcbiAgYXN5bmMgYmxvY2tVc2VyKGJsb2NrZXJJZDogc3RyaW5nLCBibG9ja2VkSWQ6IHN0cmluZywgcmVhc29uPzogc3RyaW5nKSB7XG4gICAgaWYgKGJsb2NrZXJJZCA9PT0gYmxvY2tlZElkKSB7XG4gICAgICB0aHJvdyBuZXcgQmFkUmVxdWVzdEV4Y2VwdGlvbignQ2Fubm90IGJsb2NrIHlvdXJzZWxmJyk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5wcmlzbWEudXNlckJsb2NrLnVwc2VydCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBibG9ja2VySWRfYmxvY2tlZElkOiB7XG4gICAgICAgICAgYmxvY2tlcklkLFxuICAgICAgICAgIGJsb2NrZWRJZCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBjcmVhdGU6IHtcbiAgICAgICAgYmxvY2tlcklkLFxuICAgICAgICBibG9ja2VkSWQsXG4gICAgICAgIHJlYXNvbixcbiAgICAgIH0sXG4gICAgICB1cGRhdGU6IHtcbiAgICAgICAgcmVhc29uLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfVxuXG4gIGFzeW5jIHVuYmxvY2tVc2VyKGJsb2NrZXJJZDogc3RyaW5nLCBibG9ja2VkSWQ6IHN0cmluZykge1xuICAgIGF3YWl0IHRoaXMucHJpc21hLnVzZXJCbG9jay5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGJsb2NrZXJJZCxcbiAgICAgICAgYmxvY2tlZElkLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfVxuXG4gIC8vIEhlbHBlciBNZXRob2RzXG4gIHByaXZhdGUgYXN5bmMgZmluZERpcmVjdENvbnZlcnNhdGlvbih1c2VyMUlkOiBzdHJpbmcsIHVzZXIySWQ6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLnByaXNtYS5jb252ZXJzYXRpb24uZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHR5cGU6IENvbnZlcnNhdGlvblR5cGUuRElSRUNULFxuICAgICAgICBwYXJ0aWNpcGFudHM6IHtcbiAgICAgICAgICBldmVyeToge1xuICAgICAgICAgICAgdXNlcklkOiB7IGluOiBbdXNlcjFJZCwgdXNlcjJJZF0gfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgcGFydGljaXBhbnRzOiB7XG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgYXZhdGFyVXJsOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB2ZXJpZnlQYXJ0aWNpcGFudCh1c2VySWQ6IHN0cmluZywgY29udmVyc2F0aW9uSWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gYXdhaXQgdGhpcy5wcmlzbWEuY29udmVyc2F0aW9uUGFydGljaXBhbnQuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBjb252ZXJzYXRpb25JZF91c2VySWQ6IHtcbiAgICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFwYXJ0aWNpcGFudCB8fCAhcGFydGljaXBhbnQuaXNBY3RpdmUpIHtcbiAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5FeGNlcHRpb24oXG4gICAgICAgICdZb3UgYXJlIG5vdCBhIHBhcnRpY2lwYW50IGluIHRoaXMgY29udmVyc2F0aW9uJyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnRpY2lwYW50O1xuICB9XG5cbiAgLy8gU2VhcmNoIE1lc3NhZ2VzXG4gIGFzeW5jIHNlYXJjaE1lc3NhZ2VzKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHF1ZXJ5OiBzdHJpbmcsXG4gICAgY29udmVyc2F0aW9uSWQ/OiBzdHJpbmcsXG4gICAgcGFnZSA9IDEsXG4gICAgbGltaXQgPSAyMCxcbiAgKSB7XG4gICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgIGNvbnN0IHdoZXJlQ2xhdXNlOiBhbnkgPSB7XG4gICAgICBjb250ZW50OiB7XG4gICAgICAgIGNvbnRhaW5zOiBxdWVyeSxcbiAgICAgICAgbW9kZTogJ2luc2Vuc2l0aXZlJyxcbiAgICAgIH0sXG4gICAgICBpc0RlbGV0ZWQ6IGZhbHNlLFxuICAgICAgY29udmVyc2F0aW9uOiB7XG4gICAgICAgIHBhcnRpY2lwYW50czoge1xuICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG5cbiAgICBpZiAoY29udmVyc2F0aW9uSWQpIHtcbiAgICAgIHdoZXJlQ2xhdXNlLmNvbnZlcnNhdGlvbklkID0gY29udmVyc2F0aW9uSWQ7XG4gICAgfVxuXG4gICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCB0aGlzLnByaXNtYS5tZXNzYWdlLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB3aGVyZUNsYXVzZSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgc2VuZGVyOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgYXZhdGFyVXJsOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnZlcnNhdGlvbjoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICB0eXBlOiB0cnVlLFxuICAgICAgICAgICAgdGl0bGU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICBza2lwLFxuICAgICAgdGFrZTogbGltaXQsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gbWVzc2FnZXM7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFPQTtJQUFBQSxjQUFBLFlBQUFBLENBQUE7TUFBQSxPQUFBQyxjQUFBO0lBQUE7RUFBQTtFQUFBLE9BQUFBLGNBQUE7QUFBQTtBQUFBRCxjQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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