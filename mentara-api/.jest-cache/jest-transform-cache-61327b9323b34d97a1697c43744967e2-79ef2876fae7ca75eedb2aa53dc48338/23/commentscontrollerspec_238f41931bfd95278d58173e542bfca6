4c2532e4248a33635466b5a378299c02
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const comments_controller_1 = require("./comments.controller");
const comments_service_1 = require("./comments.service");
const jwt_auth_guard_1 = require("../auth/guards/jwt-auth.guard");
const community_access_guard_1 = require("../auth/guards/community-access.guard");
const supabase_storage_service_1 = require("../common/services/supabase-storage.service");
const auth_testing_helpers_1 = require("../test-utils/auth-testing-helpers");
describe('CommentsController', () => {
    let controller;
    let commentsService;
    let supabaseStorageService;
    let mockJwtAuthGuard;
    let mockCommunityAccessGuard;
    // Mock data
    const mockComment = {
        id: auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT,
        content: 'This is a test comment',
        userId: auth_testing_helpers_1.TEST_USER_IDS.CLIENT,
        postId: auth_testing_helpers_1.TEST_POST_IDS.ANXIETY_POST,
        parentId: null,
        attachmentUrls: [],
        attachmentNames: [],
        attachmentSizes: [],
        createdAt: new Date(),
        updatedAt: new Date(),
    };
    const mockComments = [mockComment];
    const mockCreateCommentDto = {
        content: 'This is a new comment',
        postId: auth_testing_helpers_1.TEST_POST_IDS.ANXIETY_POST,
        parentId: null,
    };
    const mockUpdateCommentDto = {
        content: 'This is an updated comment',
    };
    const mockFiles = [
        {
            fieldname: 'files',
            originalname: 'comment-image.jpg',
            encoding: '7bit',
            mimetype: 'image/jpeg',
            size: 512,
            buffer: Buffer.from('test comment file content'),
        },
    ];
    const mockFileResults = [
        {
            url: 'https://example.com/comment-image.jpg',
            filename: 'comment-image.jpg',
            size: 512,
        },
    ];
    beforeEach(async () => {
        // Create mock services
        const mockCommentsService = {
            findAll: jest.fn(),
            findOne: jest.fn(),
            findByPostId: jest.fn(),
            create: jest.fn(),
            update: jest.fn(),
            remove: jest.fn(),
            heartComment: jest.fn(),
            isCommentHeartedByUser: jest.fn(),
            reportComment: jest.fn(),
        };
        const mockSupabaseStorageService = {
            validateFile: jest.fn(),
            uploadFiles: jest.fn(),
            getSupportedBuckets: jest.fn(),
        };
        mockJwtAuthGuard = {
            canActivate: jest.fn().mockReturnValue(true),
        };
        mockCommunityAccessGuard = {
            canActivate: jest.fn().mockReturnValue(true),
        };
        // Add static method mock
        supabase_storage_service_1.SupabaseStorageService.getSupportedBuckets = jest.fn().mockReturnValue({
            POST_ATTACHMENTS: 'post-attachments',
        });
        const module = await testing_1.Test.createTestingModule({
            controllers: [comments_controller_1.CommentsController],
            providers: [
                {
                    provide: comments_service_1.CommentsService,
                    useValue: mockCommentsService,
                },
                {
                    provide: supabase_storage_service_1.SupabaseStorageService,
                    useValue: mockSupabaseStorageService,
                },
            ],
        })
            .overrideGuard(jwt_auth_guard_1.JwtAuthGuard)
            .useValue(mockJwtAuthGuard)
            .overrideGuard(community_access_guard_1.CommunityAccessGuard)
            .useValue(mockCommunityAccessGuard)
            .compile();
        controller = module.get(comments_controller_1.CommentsController);
        commentsService = module.get(comments_service_1.CommentsService);
        supabaseStorageService = module.get(supabase_storage_service_1.SupabaseStorageService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('findAll', () => {
        it('should return all comments for authenticated user', async () => {
            // Arrange
            jest.spyOn(commentsService, 'findAll').mockResolvedValue(mockComments);
            // Act
            const result = await controller.findAll(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            // Assert
            expect(commentsService.findAll).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockComments);
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Database error');
            jest.spyOn(commentsService, 'findAll').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.findAll(auth_testing_helpers_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('findOne', () => {
        it('should return a specific comment when found', async () => {
            // Arrange
            jest.spyOn(commentsService, 'findOne').mockResolvedValue(mockComment);
            // Act
            const result = await controller.findOne(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT);
            // Assert
            expect(commentsService.findOne).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT);
            expect(result).toEqual(mockComment);
        });
        it('should throw HttpException when comment not found', async () => {
            // Arrange
            jest.spyOn(commentsService, 'findOne').mockResolvedValue(null);
            // Act & Assert
            await expect(controller.findOne(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT)).rejects.toThrow(new common_1.HttpException('Comment not found', common_1.HttpStatus.NOT_FOUND));
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Database error');
            jest.spyOn(commentsService, 'findOne').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.findOne(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('findByPostId', () => {
        it('should return comments for a specific post', async () => {
            // Arrange
            jest.spyOn(commentsService, 'findByPostId').mockResolvedValue(mockComments);
            // Act
            const result = await controller.findByPostId(auth_testing_helpers_1.TEST_POST_IDS.ANXIETY_POST, auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            // Assert
            expect(commentsService.findByPostId).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_POST_IDS.ANXIETY_POST, auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockComments);
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Database error');
            jest.spyOn(commentsService, 'findByPostId').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.findByPostId(auth_testing_helpers_1.TEST_POST_IDS.ANXIETY_POST, auth_testing_helpers_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('create', () => {
        it('should create comment successfully without files', async () => {
            // Arrange
            jest.spyOn(commentsService, 'create').mockResolvedValue(mockComment);
            // Act
            const result = await controller.create(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, mockCreateCommentDto);
            // Assert
            expect(commentsService.create).toHaveBeenCalledWith(mockCreateCommentDto, auth_testing_helpers_1.TEST_USER_IDS.CLIENT, [], [], []);
            expect(result).toEqual(mockComment);
        });
        it('should create comment successfully with files', async () => {
            // Arrange
            jest.spyOn(commentsService, 'create').mockResolvedValue(mockComment);
            jest.spyOn(supabaseStorageService, 'validateFile').mockReturnValue({ isValid: true });
            jest.spyOn(supabaseStorageService, 'uploadFiles').mockResolvedValue(mockFileResults);
            // Act
            const result = await controller.create(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, mockCreateCommentDto, mockFiles);
            // Assert
            expect(supabaseStorageService.validateFile).toHaveBeenCalledWith(mockFiles[0]);
            expect(supabaseStorageService.uploadFiles).toHaveBeenCalledWith(mockFiles, 'post-attachments');
            expect(commentsService.create).toHaveBeenCalledWith(mockCreateCommentDto, auth_testing_helpers_1.TEST_USER_IDS.CLIENT, ['https://example.com/comment-image.jpg'], ['comment-image.jpg'], [512]);
            expect(result).toEqual(mockComment);
        });
        it('should handle file validation errors', async () => {
            // Arrange
            jest.spyOn(supabaseStorageService, 'validateFile').mockReturnValue({
                isValid: false,
                error: 'Invalid file type',
            });
            // Act & Assert
            await expect(controller.create(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, mockCreateCommentDto, mockFiles)).rejects.toThrow(common_1.HttpException);
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Database error');
            jest.spyOn(commentsService, 'create').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.create(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, mockCreateCommentDto)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('update', () => {
        it('should update comment successfully', async () => {
            // Arrange
            const updatedComment = { ...mockComment, ...mockUpdateCommentDto };
            jest.spyOn(commentsService, 'update').mockResolvedValue(updatedComment);
            // Act
            const result = await controller.update(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT, mockUpdateCommentDto);
            // Assert
            expect(commentsService.update).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT, mockUpdateCommentDto, auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(updatedComment);
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Comment not found');
            jest.spyOn(commentsService, 'update').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.update(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT, mockUpdateCommentDto)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('remove', () => {
        it('should delete comment successfully', async () => {
            // Arrange
            jest.spyOn(commentsService, 'remove').mockResolvedValue(mockComment);
            // Act
            const result = await controller.remove(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT);
            // Assert
            expect(commentsService.remove).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT, auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(mockComment);
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Comment not found');
            jest.spyOn(commentsService, 'remove').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.remove(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('heartComment', () => {
        it('should heart comment successfully', async () => {
            // Arrange
            const heartResult = { hearted: true };
            jest.spyOn(commentsService, 'heartComment').mockResolvedValue(heartResult);
            // Act
            const result = await controller.heartComment(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT);
            // Assert
            expect(commentsService.heartComment).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT, auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual(heartResult);
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Comment not found');
            jest.spyOn(commentsService, 'heartComment').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.heartComment(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('isCommentHearted', () => {
        it('should check if comment is hearted successfully', async () => {
            // Arrange
            jest.spyOn(commentsService, 'isCommentHeartedByUser').mockResolvedValue(true);
            // Act
            const result = await controller.isCommentHearted(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT);
            // Assert
            expect(commentsService.isCommentHeartedByUser).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT, auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            expect(result).toEqual({ hearted: true });
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Database error');
            jest.spyOn(commentsService, 'isCommentHeartedByUser').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.isCommentHearted(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('reportComment', () => {
        const reportData = {
            reason: 'harassment',
            content: 'This comment is inappropriate',
        };
        it('should report comment successfully', async () => {
            // Arrange
            const reportId = 'comment-report-123';
            jest.spyOn(commentsService, 'reportComment').mockResolvedValue(reportId);
            // Act
            const result = await controller.reportComment(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT, reportData);
            // Assert
            expect(commentsService.reportComment).toHaveBeenCalledWith(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT, auth_testing_helpers_1.TEST_USER_IDS.CLIENT, reportData.reason, reportData.content);
            expect(result).toEqual({ success: true, reportId });
        });
        it('should handle service errors', async () => {
            // Arrange
            const error = new Error('Comment not found');
            jest.spyOn(commentsService, 'reportComment').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.reportComment(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT, reportData)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('Security Integration', () => {
        it('should have proper guards applied', () => {
            // Test that guards are applied at controller level
            const guards = Reflect.getMetadata('__guards__', comments_controller_1.CommentsController);
            expect(guards).toBeDefined();
            expect(guards).toContain(jwt_auth_guard_1.JwtAuthGuard);
            expect(guards).toContain(community_access_guard_1.CommunityAccessGuard);
        });
        it('should apply RequireRoomAccess decorator to all endpoints', () => {
            // Test that all endpoints have the RequireRoomAccess decorator
            const protectedMethods = [
                'findOne',
                'findByPostId',
                'create',
                'update',
                'remove',
                'heartComment',
                'reportComment',
            ];
            protectedMethods.forEach(method => {
                const metadata = Reflect.getMetadata('require_room_access', controller[method]);
                expect(metadata).toBeTruthy();
            });
        });
        it('should test community access guard integration', async () => {
            // Test that CommunityAccessGuard is called for protected endpoints
            mockCommunityAccessGuard.canActivate.mockReturnValue(true);
            jest.spyOn(commentsService, 'findOne').mockResolvedValue(mockComment);
            // Act
            await controller.findOne(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT);
            // Assert
            expect(mockCommunityAccessGuard.canActivate).toHaveBeenCalled();
        });
    });
    describe('Nested Comments (Parent-Child)', () => {
        it('should create nested comment successfully', async () => {
            // Arrange
            const nestedCommentDto = {
                content: 'This is a reply to another comment',
                postId: auth_testing_helpers_1.TEST_POST_IDS.ANXIETY_POST,
                parentId: auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT,
            };
            const nestedComment = {
                ...mockComment,
                id: 'nested-comment-123',
                parentId: auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT,
                content: nestedCommentDto.content,
            };
            jest.spyOn(commentsService, 'create').mockResolvedValue(nestedComment);
            // Act
            const result = await controller.create(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, nestedCommentDto);
            // Assert
            expect(commentsService.create).toHaveBeenCalledWith(nestedCommentDto, auth_testing_helpers_1.TEST_USER_IDS.CLIENT, [], [], []);
            expect(result).toEqual(nestedComment);
        });
        it('should handle nested comment creation errors', async () => {
            // Arrange
            const nestedCommentDto = {
                content: 'This is a reply to another comment',
                postId: auth_testing_helpers_1.TEST_POST_IDS.ANXIETY_POST,
                parentId: 'non-existent-comment',
            };
            const error = new Error('Parent comment not found');
            jest.spyOn(commentsService, 'create').mockRejectedValue(error);
            // Act & Assert
            await expect(controller.create(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, nestedCommentDto)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('File Upload Integration', () => {
        it('should handle multiple file uploads', async () => {
            // Arrange
            const multipleFiles = [
                { ...mockFiles[0], originalname: 'comment1.jpg' },
                { ...mockFiles[0], originalname: 'comment2.jpg' },
            ];
            const multipleFileResults = [
                { url: 'https://example.com/comment1.jpg', filename: 'comment1.jpg', size: 512 },
                { url: 'https://example.com/comment2.jpg', filename: 'comment2.jpg', size: 512 },
            ];
            jest.spyOn(commentsService, 'create').mockResolvedValue(mockComment);
            jest.spyOn(supabaseStorageService, 'validateFile').mockReturnValue({ isValid: true });
            jest.spyOn(supabaseStorageService, 'uploadFiles').mockResolvedValue(multipleFileResults);
            // Act
            const result = await controller.create(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, mockCreateCommentDto, multipleFiles);
            // Assert
            expect(supabaseStorageService.validateFile).toHaveBeenCalledTimes(2);
            expect(supabaseStorageService.uploadFiles).toHaveBeenCalledWith(multipleFiles, 'post-attachments');
            expect(commentsService.create).toHaveBeenCalledWith(mockCreateCommentDto, auth_testing_helpers_1.TEST_USER_IDS.CLIENT, ['https://example.com/comment1.jpg', 'https://example.com/comment2.jpg'], ['comment1.jpg', 'comment2.jpg'], [512, 512]);
            expect(result).toEqual(mockComment);
        });
        it('should handle file upload service errors', async () => {
            // Arrange
            jest.spyOn(supabaseStorageService, 'validateFile').mockReturnValue({ isValid: true });
            jest.spyOn(supabaseStorageService, 'uploadFiles').mockRejectedValue(new Error('Upload failed'));
            // Act & Assert
            await expect(controller.create(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, mockCreateCommentDto, mockFiles)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('Error Handling', () => {
        it('should handle HttpException properly', async () => {
            // Arrange
            const httpException = new common_1.HttpException('Custom error', common_1.HttpStatus.BAD_REQUEST);
            jest.spyOn(commentsService, 'findOne').mockRejectedValue(httpException);
            // Act & Assert
            await expect(controller.findOne(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT)).rejects.toThrow(httpException);
        });
        it('should wrap unknown errors in HttpException', async () => {
            // Arrange
            const unknownError = new Error('Unknown error');
            jest.spyOn(commentsService, 'findAll').mockRejectedValue(unknownError);
            // Act & Assert
            await expect(controller.findAll(auth_testing_helpers_1.TEST_USER_IDS.CLIENT)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('Integration Tests', () => {
        it('should handle complete comment creation workflow', async () => {
            // Arrange
            jest.spyOn(commentsService, 'create').mockResolvedValue(mockComment);
            // Act
            const result = await controller.create(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, mockCreateCommentDto);
            // Assert
            expect(result).toBeDefined();
            expect(result.content).toBe(mockComment.content);
            expect(result.userId).toBe(auth_testing_helpers_1.TEST_USER_IDS.CLIENT);
            expect(result.postId).toBe(auth_testing_helpers_1.TEST_POST_IDS.ANXIETY_POST);
        });
        it('should handle complete comment update workflow', async () => {
            // Arrange
            const updatedComment = { ...mockComment, content: 'Updated content' };
            jest.spyOn(commentsService, 'update').mockResolvedValue(updatedComment);
            // Act
            const result = await controller.update(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT, { content: 'Updated content' });
            // Assert
            expect(result).toBeDefined();
            expect(result.content).toBe('Updated content');
            expect(result.id).toBe(auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT);
        });
        it('should handle complete comment heart workflow', async () => {
            // Arrange
            const heartResult = { hearted: true };
            jest.spyOn(commentsService, 'heartComment').mockResolvedValue(heartResult);
            // Act
            const result = await controller.heartComment(auth_testing_helpers_1.TEST_USER_IDS.CLIENT, auth_testing_helpers_1.TEST_COMMENT_IDS.ANXIETY_COMMENT);
            // Assert
            expect(result).toBeDefined();
            expect(result.hearted).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2NvbW1lbnRzL2NvbW1lbnRzLmNvbnRyb2xsZXIuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCwyQ0FBMkQ7QUFDM0QsK0RBQTJEO0FBQzNELHlEQUFxRDtBQUNyRCxrRUFBNkQ7QUFDN0Qsa0ZBQTZFO0FBQzdFLDBGQUFxRjtBQUVyRiw2RUFRNEM7QUFFNUMsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxJQUFJLFVBQThCLENBQUM7SUFDbkMsSUFBSSxlQUFnQyxDQUFDO0lBQ3JDLElBQUksc0JBQThDLENBQUM7SUFDbkQsSUFBSSxnQkFBMkMsQ0FBQztJQUNoRCxJQUFJLHdCQUEyRCxDQUFDO0lBRWhFLFlBQVk7SUFDWixNQUFNLFdBQVcsR0FBWTtRQUMzQixFQUFFLEVBQUUsdUNBQWdCLENBQUMsZUFBZTtRQUNwQyxPQUFPLEVBQUUsd0JBQXdCO1FBQ2pDLE1BQU0sRUFBRSxvQ0FBYSxDQUFDLE1BQU07UUFDNUIsTUFBTSxFQUFFLG9DQUFhLENBQUMsWUFBWTtRQUNsQyxRQUFRLEVBQUUsSUFBSTtRQUNkLGNBQWMsRUFBRSxFQUFFO1FBQ2xCLGVBQWUsRUFBRSxFQUFFO1FBQ25CLGVBQWUsRUFBRSxFQUFFO1FBQ25CLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTtRQUNyQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7S0FDdEIsQ0FBQztJQUVGLE1BQU0sWUFBWSxHQUFjLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFOUMsTUFBTSxvQkFBb0IsR0FBRztRQUMzQixPQUFPLEVBQUUsdUJBQXVCO1FBQ2hDLE1BQU0sRUFBRSxvQ0FBYSxDQUFDLFlBQVk7UUFDbEMsUUFBUSxFQUFFLElBQUk7S0FDZixDQUFDO0lBRUYsTUFBTSxvQkFBb0IsR0FBRztRQUMzQixPQUFPLEVBQUUsNEJBQTRCO0tBQ3RDLENBQUM7SUFFRixNQUFNLFNB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QUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS93ZXRvb2EvRG9jdW1lbnRzL2NvZGUvcHJvamVjdHMvbWVudGFyYS9tZW50YXJhLWFwaS9zcmMvY29tbWVudHMvY29tbWVudHMuY29udHJvbGxlci5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgSHR0cEV4Y2VwdGlvbiwgSHR0cFN0YXR1cyB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IENvbW1lbnRzQ29udHJvbGxlciB9IGZyb20gJy4vY29tbWVudHMuY29udHJvbGxlcic7XG5pbXBvcnQgeyBDb21tZW50c1NlcnZpY2UgfSBmcm9tICcuL2NvbW1lbnRzLnNlcnZpY2UnO1xuaW1wb3J0IHsgSnd0QXV0aEd1YXJkIH0gZnJvbSAnLi4vYXV0aC9ndWFyZHMvand0LWF1dGguZ3VhcmQnO1xuaW1wb3J0IHsgQ29tbXVuaXR5QWNjZXNzR3VhcmQgfSBmcm9tICcuLi9hdXRoL2d1YXJkcy9jb21tdW5pdHktYWNjZXNzLmd1YXJkJztcbmltcG9ydCB7IFN1cGFiYXNlU3RvcmFnZVNlcnZpY2UgfSBmcm9tICcuLi9jb21tb24vc2VydmljZXMvc3VwYWJhc2Utc3RvcmFnZS5zZXJ2aWNlJztcbmltcG9ydCB7IENvbW1lbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5pbXBvcnQge1xuICBNb2NrQnVpbGRlcixcbiAgVGVzdERhdGFHZW5lcmF0b3IsXG4gIFRlc3RBc3NlcnRpb25zLFxuICBTZWN1cml0eUd1YXJkVGVzdFV0aWxzLFxuICBURVNUX1VTRVJfSURTLFxuICBURVNUX1BPU1RfSURTLFxuICBURVNUX0NPTU1FTlRfSURTLFxufSBmcm9tICcuLi90ZXN0LXV0aWxzL2F1dGgtdGVzdGluZy1oZWxwZXJzJztcblxuZGVzY3JpYmUoJ0NvbW1lbnRzQ29udHJvbGxlcicsICgpID0+IHtcbiAgbGV0IGNvbnRyb2xsZXI6IENvbW1lbnRzQ29udHJvbGxlcjtcbiAgbGV0IGNvbW1lbnRzU2VydmljZTogQ29tbWVudHNTZXJ2aWNlO1xuICBsZXQgc3VwYWJhc2VTdG9yYWdlU2VydmljZTogU3VwYWJhc2VTdG9yYWdlU2VydmljZTtcbiAgbGV0IG1vY2tKd3RBdXRoR3VhcmQ6IGplc3QuTW9ja2VkPEp3dEF1dGhHdWFyZD47XG4gIGxldCBtb2NrQ29tbXVuaXR5QWNjZXNzR3VhcmQ6IGplc3QuTW9ja2VkPENvbW11bml0eUFjY2Vzc0d1YXJkPjtcblxuICAvLyBNb2NrIGRhdGFcbiAgY29uc3QgbW9ja0NvbW1lbnQ6IENvbW1lbnQgPSB7XG4gICAgaWQ6IFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5ULFxuICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGEgdGVzdCBjb21tZW50JyxcbiAgICB1c2VySWQ6IFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgIHBvc3RJZDogVEVTVF9QT1NUX0lEUy5BTlhJRVRZX1BPU1QsXG4gICAgcGFyZW50SWQ6IG51bGwsXG4gICAgYXR0YWNobWVudFVybHM6IFtdLFxuICAgIGF0dGFjaG1lbnROYW1lczogW10sXG4gICAgYXR0YWNobWVudFNpemVzOiBbXSxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tDb21tZW50czogQ29tbWVudFtdID0gW21vY2tDb21tZW50XTtcblxuICBjb25zdCBtb2NrQ3JlYXRlQ29tbWVudER0byA9IHtcbiAgICBjb250ZW50OiAnVGhpcyBpcyBhIG5ldyBjb21tZW50JyxcbiAgICBwb3N0SWQ6IFRFU1RfUE9TVF9JRFMuQU5YSUVUWV9QT1NULFxuICAgIHBhcmVudElkOiBudWxsLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tVcGRhdGVDb21tZW50RHRvID0ge1xuICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGFuIHVwZGF0ZWQgY29tbWVudCcsXG4gIH07XG5cbiAgY29uc3QgbW9ja0ZpbGVzID0gW1xuICAgIHtcbiAgICAgIGZpZWxkbmFtZTogJ2ZpbGVzJyxcbiAgICAgIG9yaWdpbmFsbmFtZTogJ2NvbW1lbnQtaW1hZ2UuanBnJyxcbiAgICAgIGVuY29kaW5nOiAnN2JpdCcsXG4gICAgICBtaW1ldHlwZTogJ2ltYWdlL2pwZWcnLFxuICAgICAgc2l6ZTogNTEyLFxuICAgICAgYnVmZmVyOiBCdWZmZXIuZnJvbSgndGVzdCBjb21tZW50IGZpbGUgY29udGVudCcpLFxuICAgIH0sXG4gIF0gYXMgRXhwcmVzcy5NdWx0ZXIuRmlsZVtdO1xuXG4gIGNvbnN0IG1vY2tGaWxlUmVzdWx0cyA9IFtcbiAgICB7XG4gICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL2NvbW1lbnQtaW1hZ2UuanBnJyxcbiAgICAgIGZpbGVuYW1lOiAnY29tbWVudC1pbWFnZS5qcGcnLFxuICAgICAgc2l6ZTogNTEyLFxuICAgIH0sXG4gIF07XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8gQ3JlYXRlIG1vY2sgc2VydmljZXNcbiAgICBjb25zdCBtb2NrQ29tbWVudHNTZXJ2aWNlID0ge1xuICAgICAgZmluZEFsbDogamVzdC5mbigpLFxuICAgICAgZmluZE9uZTogamVzdC5mbigpLFxuICAgICAgZmluZEJ5UG9zdElkOiBqZXN0LmZuKCksXG4gICAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgICAgcmVtb3ZlOiBqZXN0LmZuKCksXG4gICAgICBoZWFydENvbW1lbnQ6IGplc3QuZm4oKSxcbiAgICAgIGlzQ29tbWVudEhlYXJ0ZWRCeVVzZXI6IGplc3QuZm4oKSxcbiAgICAgIHJlcG9ydENvbW1lbnQ6IGplc3QuZm4oKSxcbiAgICB9O1xuXG4gICAgY29uc3QgbW9ja1N1cGFiYXNlU3RvcmFnZVNlcnZpY2UgPSB7XG4gICAgICB2YWxpZGF0ZUZpbGU6IGplc3QuZm4oKSxcbiAgICAgIHVwbG9hZEZpbGVzOiBqZXN0LmZuKCksXG4gICAgICBnZXRTdXBwb3J0ZWRCdWNrZXRzOiBqZXN0LmZuKCksXG4gICAgfTtcblxuICAgIG1vY2tKd3RBdXRoR3VhcmQgPSB7XG4gICAgICBjYW5BY3RpdmF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKSxcbiAgICB9IGFzIGFueTtcblxuICAgIG1vY2tDb21tdW5pdHlBY2Nlc3NHdWFyZCA9IHtcbiAgICAgIGNhbkFjdGl2YXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHRydWUpLFxuICAgIH0gYXMgYW55O1xuXG4gICAgLy8gQWRkIHN0YXRpYyBtZXRob2QgbW9ja1xuICAgIFN1cGFiYXNlU3RvcmFnZVNlcnZpY2UuZ2V0U3VwcG9ydGVkQnVja2V0cyA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgUE9TVF9BVFRBQ0hNRU5UUzogJ3Bvc3QtYXR0YWNobWVudHMnLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9kdWxlOiBUZXN0aW5nTW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIGNvbnRyb2xsZXJzOiBbQ29tbWVudHNDb250cm9sbGVyXSxcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogQ29tbWVudHNTZXJ2aWNlLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrQ29tbWVudHNTZXJ2aWNlLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogU3VwYWJhc2VTdG9yYWdlU2VydmljZSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1N1cGFiYXNlU3RvcmFnZVNlcnZpY2UsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pXG4gICAgICAub3ZlcnJpZGVHdWFyZChKd3RBdXRoR3VhcmQpXG4gICAgICAudXNlVmFsdWUobW9ja0p3dEF1dGhHdWFyZClcbiAgICAgIC5vdmVycmlkZUd1YXJkKENvbW11bml0eUFjY2Vzc0d1YXJkKVxuICAgICAgLnVzZVZhbHVlKG1vY2tDb21tdW5pdHlBY2Nlc3NHdWFyZClcbiAgICAgIC5jb21waWxlKCk7XG5cbiAgICBjb250cm9sbGVyID0gbW9kdWxlLmdldDxDb21tZW50c0NvbnRyb2xsZXI+KENvbW1lbnRzQ29udHJvbGxlcik7XG4gICAgY29tbWVudHNTZXJ2aWNlID0gbW9kdWxlLmdldDxDb21tZW50c1NlcnZpY2U+KENvbW1lbnRzU2VydmljZSk7XG4gICAgc3VwYWJhc2VTdG9yYWdlU2VydmljZSA9IG1vZHVsZS5nZXQ8U3VwYWJhc2VTdG9yYWdlU2VydmljZT4oU3VwYWJhc2VTdG9yYWdlU2VydmljZSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmaW5kQWxsJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGFsbCBjb21tZW50cyBmb3IgYXV0aGVudGljYXRlZCB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgamVzdC5zcHlPbihjb21tZW50c1NlcnZpY2UsICdmaW5kQWxsJykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbW1lbnRzKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmZpbmRBbGwoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjb21tZW50c1NlcnZpY2UuZmluZEFsbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ29tbWVudHMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKTtcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnZmluZEFsbCcpLm1vY2tSZWplY3RlZFZhbHVlKGVycm9yKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoY29udHJvbGxlci5maW5kQWxsKFRFU1RfVVNFUl9JRFMuQ0xJRU5UKSkucmVqZWN0cy50b1Rocm93KEh0dHBFeGNlcHRpb24pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZmluZE9uZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhIHNwZWNpZmljIGNvbW1lbnQgd2hlbiBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnZmluZE9uZScpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb21tZW50KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmZpbmRPbmUoVEVTVF9DT01NRU5UX0lEUy5BTlhJRVRZX0NPTU1FTlQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjb21tZW50c1NlcnZpY2UuZmluZE9uZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoVEVTVF9DT01NRU5UX0lEUy5BTlhJRVRZX0NPTU1FTlQpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ29tbWVudCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IEh0dHBFeGNlcHRpb24gd2hlbiBjb21tZW50IG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnZmluZE9uZScpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLmZpbmRPbmUoVEVTVF9DT01NRU5UX0lEUy5BTlhJRVRZX0NPTU1FTlQpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIG5ldyBIdHRwRXhjZXB0aW9uKCdDb21tZW50IG5vdCBmb3VuZCcsIEh0dHBTdGF0dXMuTk9UX0ZPVU5EKSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpO1xuICAgICAgamVzdC5zcHlPbihjb21tZW50c1NlcnZpY2UsICdmaW5kT25lJykubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLmZpbmRPbmUoVEVTVF9DT01NRU5UX0lEUy5BTlhJRVRZX0NPTU1FTlQpKS5yZWplY3RzLnRvVGhyb3coSHR0cEV4Y2VwdGlvbik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmaW5kQnlQb3N0SWQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29tbWVudHMgZm9yIGEgc3BlY2lmaWMgcG9zdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnZmluZEJ5UG9zdElkJykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbW1lbnRzKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmZpbmRCeVBvc3RJZChURVNUX1BPU1RfSURTLkFOWElFVFlfUE9TVCwgVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjb21tZW50c1NlcnZpY2UuZmluZEJ5UG9zdElkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChURVNUX1BPU1RfSURTLkFOWElFVFlfUE9TVCwgVEVTVF9VU0VSX0lEUy5DTElFTlQpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ29tbWVudHMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKTtcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnZmluZEJ5UG9zdElkJykubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLmZpbmRCeVBvc3RJZChURVNUX1BPU1RfSURTLkFOWElFVFlfUE9TVCwgVEVTVF9VU0VSX0lEUy5DTElFTlQpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEh0dHBFeGNlcHRpb24sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY3JlYXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIGNvbW1lbnQgc3VjY2Vzc2Z1bGx5IHdpdGhvdXQgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBqZXN0LnNweU9uKGNvbW1lbnRzU2VydmljZSwgJ2NyZWF0ZScpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb21tZW50KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNyZWF0ZShURVNUX1VTRVJfSURTLkNMSUVOVCwgbW9ja0NyZWF0ZUNvbW1lbnREdG8pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjb21tZW50c1NlcnZpY2UuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgbW9ja0NyZWF0ZUNvbW1lbnREdG8sXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgICBbXSxcbiAgICAgICAgW10sXG4gICAgICAgIFtdLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja0NvbW1lbnQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgY29tbWVudCBzdWNjZXNzZnVsbHkgd2l0aCBmaWxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnY3JlYXRlJykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbW1lbnQpO1xuICAgICAgamVzdC5zcHlPbihzdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLCAndmFsaWRhdGVGaWxlJykubW9ja1JldHVyblZhbHVlKHsgaXNWYWxpZDogdHJ1ZSB9KTtcbiAgICAgIGplc3Quc3B5T24oc3VwYWJhc2VTdG9yYWdlU2VydmljZSwgJ3VwbG9hZEZpbGVzJykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0ZpbGVSZXN1bHRzKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNyZWF0ZShURVNUX1VTRVJfSURTLkNMSUVOVCwgbW9ja0NyZWF0ZUNvbW1lbnREdG8sIG1vY2tGaWxlcyk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHN1cGFiYXNlU3RvcmFnZVNlcnZpY2UudmFsaWRhdGVGaWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrRmlsZXNbMF0pO1xuICAgICAgZXhwZWN0KHN1cGFiYXNlU3RvcmFnZVNlcnZpY2UudXBsb2FkRmlsZXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tGaWxlcywgJ3Bvc3QtYXR0YWNobWVudHMnKTtcbiAgICAgIGV4cGVjdChjb21tZW50c1NlcnZpY2UuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgbW9ja0NyZWF0ZUNvbW1lbnREdG8sXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgICBbJ2h0dHBzOi8vZXhhbXBsZS5jb20vY29tbWVudC1pbWFnZS5qcGcnXSxcbiAgICAgICAgWydjb21tZW50LWltYWdlLmpwZyddLFxuICAgICAgICBbNTEyXSxcbiAgICAgICk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tDb21tZW50KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZpbGUgdmFsaWRhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBqZXN0LnNweU9uKHN1cGFiYXNlU3RvcmFnZVNlcnZpY2UsICd2YWxpZGF0ZUZpbGUnKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGZpbGUgdHlwZScsXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoY29udHJvbGxlci5jcmVhdGUoVEVTVF9VU0VSX0lEUy5DTElFTlQsIG1vY2tDcmVhdGVDb21tZW50RHRvLCBtb2NrRmlsZXMpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEh0dHBFeGNlcHRpb24sXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKTtcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnY3JlYXRlJykubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLmNyZWF0ZShURVNUX1VTRVJfSURTLkNMSUVOVCwgbW9ja0NyZWF0ZUNvbW1lbnREdG8pKS5yZWplY3RzLnRvVGhyb3coSHR0cEV4Y2VwdGlvbik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd1cGRhdGUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgY29tbWVudCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB1cGRhdGVkQ29tbWVudCA9IHsgLi4ubW9ja0NvbW1lbnQsIC4uLm1vY2tVcGRhdGVDb21tZW50RHRvIH07XG4gICAgICBqZXN0LnNweU9uKGNvbW1lbnRzU2VydmljZSwgJ3VwZGF0ZScpLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRDb21tZW50KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLnVwZGF0ZShcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgIFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5ULFxuICAgICAgICBtb2NrVXBkYXRlQ29tbWVudER0byxcbiAgICAgICk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGNvbW1lbnRzU2VydmljZS51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBURVNUX0NPTU1FTlRfSURTLkFOWElFVFlfQ09NTUVOVCxcbiAgICAgICAgbW9ja1VwZGF0ZUNvbW1lbnREdG8sXG4gICAgICAgIFRFU1RfVVNFUl9JRFMuQ0xJRU5ULFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwodXBkYXRlZENvbW1lbnQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignQ29tbWVudCBub3QgZm91bmQnKTtcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAndXBkYXRlJykubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci51cGRhdGUoVEVTVF9VU0VSX0lEUy5DTElFTlQsIFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5ULCBtb2NrVXBkYXRlQ29tbWVudER0byksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3JlbW92ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRlbGV0ZSBjb21tZW50IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAncmVtb3ZlJykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbW1lbnQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIucmVtb3ZlKFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCBURVNUX0NPTU1FTlRfSURTLkFOWElFVFlfQ09NTUVOVCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGNvbW1lbnRzU2VydmljZS5yZW1vdmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5ULCBURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tDb21tZW50KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0NvbW1lbnQgbm90IGZvdW5kJyk7XG4gICAgICBqZXN0LnNweU9uKGNvbW1lbnRzU2VydmljZSwgJ3JlbW92ZScpLm1vY2tSZWplY3RlZFZhbHVlKGVycm9yKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoY29udHJvbGxlci5yZW1vdmUoVEVTVF9VU0VSX0lEUy5DTElFTlQsIFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5UKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBIdHRwRXhjZXB0aW9uLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2hlYXJ0Q29tbWVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhlYXJ0IGNvbW1lbnQgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaGVhcnRSZXN1bHQgPSB7IGhlYXJ0ZWQ6IHRydWUgfTtcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnaGVhcnRDb21tZW50JykubW9ja1Jlc29sdmVkVmFsdWUoaGVhcnRSZXN1bHQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuaGVhcnRDb21tZW50KFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCBURVNUX0NPTU1FTlRfSURTLkFOWElFVFlfQ09NTUVOVCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGNvbW1lbnRzU2VydmljZS5oZWFydENvbW1lbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBURVNUX0NPTU1FTlRfSURTLkFOWElFVFlfQ09NTUVOVCxcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChoZWFydFJlc3VsdCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdDb21tZW50IG5vdCBmb3VuZCcpO1xuICAgICAgamVzdC5zcHlPbihjb21tZW50c1NlcnZpY2UsICdoZWFydENvbW1lbnQnKS5tb2NrUmVqZWN0ZWRWYWx1ZShlcnJvcik7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KGNvbnRyb2xsZXIuaGVhcnRDb21tZW50KFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCBURVNUX0NPTU1FTlRfSURTLkFOWElFVFlfQ09NTUVOVCkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgSHR0cEV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpc0NvbW1lbnRIZWFydGVkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2hlY2sgaWYgY29tbWVudCBpcyBoZWFydGVkIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnaXNDb21tZW50SGVhcnRlZEJ5VXNlcicpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuaXNDb21tZW50SGVhcnRlZChURVNUX1VTRVJfSURTLkNMSUVOVCwgVEVTVF9DT01NRU5UX0lEUy5BTlhJRVRZX0NPTU1FTlQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjb21tZW50c1NlcnZpY2UuaXNDb21tZW50SGVhcnRlZEJ5VXNlcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5ULFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHsgaGVhcnRlZDogdHJ1ZSB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yJyk7XG4gICAgICBqZXN0LnNweU9uKGNvbW1lbnRzU2VydmljZSwgJ2lzQ29tbWVudEhlYXJ0ZWRCeVVzZXInKS5tb2NrUmVqZWN0ZWRWYWx1ZShlcnJvcik7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjb250cm9sbGVyLmlzQ29tbWVudEhlYXJ0ZWQoVEVTVF9VU0VSX0lEUy5DTElFTlQsIFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5UKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEh0dHBFeGNlcHRpb24pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncmVwb3J0Q29tbWVudCcsICgpID0+IHtcbiAgICBjb25zdCByZXBvcnREYXRhID0ge1xuICAgICAgcmVhc29uOiAnaGFyYXNzbWVudCcsXG4gICAgICBjb250ZW50OiAnVGhpcyBjb21tZW50IGlzIGluYXBwcm9wcmlhdGUnLFxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHJlcG9ydCBjb21tZW50IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcG9ydElkID0gJ2NvbW1lbnQtcmVwb3J0LTEyMyc7XG4gICAgICBqZXN0LnNweU9uKGNvbW1lbnRzU2VydmljZSwgJ3JlcG9ydENvbW1lbnQnKS5tb2NrUmVzb2x2ZWRWYWx1ZShyZXBvcnRJZCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5yZXBvcnRDb21tZW50KFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAgVEVTVF9DT01NRU5UX0lEUy5BTlhJRVRZX0NPTU1FTlQsXG4gICAgICAgIHJlcG9ydERhdGEsXG4gICAgICApO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjb21tZW50c1NlcnZpY2UucmVwb3J0Q29tbWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5ULFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAgcmVwb3J0RGF0YS5yZWFzb24sXG4gICAgICAgIHJlcG9ydERhdGEuY29udGVudCxcbiAgICAgICk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHsgc3VjY2VzczogdHJ1ZSwgcmVwb3J0SWQgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdDb21tZW50IG5vdCBmb3VuZCcpO1xuICAgICAgamVzdC5zcHlPbihjb21tZW50c1NlcnZpY2UsICdyZXBvcnRDb21tZW50JykubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY29udHJvbGxlci5yZXBvcnRDb21tZW50KFRFU1RfVVNFUl9JRFMuQ0xJRU5ULCBURVNUX0NPTU1FTlRfSURTLkFOWElFVFlfQ09NTUVOVCwgcmVwb3J0RGF0YSksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlY3VyaXR5IEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBwcm9wZXIgZ3VhcmRzIGFwcGxpZWQnLCAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHRoYXQgZ3VhcmRzIGFyZSBhcHBsaWVkIGF0IGNvbnRyb2xsZXIgbGV2ZWxcbiAgICAgIGNvbnN0IGd1YXJkcyA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoJ19fZ3VhcmRzX18nLCBDb21tZW50c0NvbnRyb2xsZXIpO1xuICAgICAgZXhwZWN0KGd1YXJkcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChndWFyZHMpLnRvQ29udGFpbihKd3RBdXRoR3VhcmQpO1xuICAgICAgZXhwZWN0KGd1YXJkcykudG9Db250YWluKENvbW11bml0eUFjY2Vzc0d1YXJkKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXBwbHkgUmVxdWlyZVJvb21BY2Nlc3MgZGVjb3JhdG9yIHRvIGFsbCBlbmRwb2ludHMnLCAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHRoYXQgYWxsIGVuZHBvaW50cyBoYXZlIHRoZSBSZXF1aXJlUm9vbUFjY2VzcyBkZWNvcmF0b3JcbiAgICAgIGNvbnN0IHByb3RlY3RlZE1ldGhvZHMgPSBbXG4gICAgICAgICdmaW5kT25lJyxcbiAgICAgICAgJ2ZpbmRCeVBvc3RJZCcsXG4gICAgICAgICdjcmVhdGUnLFxuICAgICAgICAndXBkYXRlJyxcbiAgICAgICAgJ3JlbW92ZScsXG4gICAgICAgICdoZWFydENvbW1lbnQnLFxuICAgICAgICAncmVwb3J0Q29tbWVudCcsXG4gICAgICBdO1xuXG4gICAgICBwcm90ZWN0ZWRNZXRob2RzLmZvckVhY2gobWV0aG9kID0+IHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBSZWZsZWN0LmdldE1ldGFkYXRhKCdyZXF1aXJlX3Jvb21fYWNjZXNzJywgY29udHJvbGxlclttZXRob2QgYXMga2V5b2YgQ29tbWVudHNDb250cm9sbGVyXSk7XG4gICAgICAgIGV4cGVjdChtZXRhZGF0YSkudG9CZVRydXRoeSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRlc3QgY29tbXVuaXR5IGFjY2VzcyBndWFyZCBpbnRlZ3JhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgdGhhdCBDb21tdW5pdHlBY2Nlc3NHdWFyZCBpcyBjYWxsZWQgZm9yIHByb3RlY3RlZCBlbmRwb2ludHNcbiAgICAgIG1vY2tDb21tdW5pdHlBY2Nlc3NHdWFyZC5jYW5BY3RpdmF0ZS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG4gICAgICBqZXN0LnNweU9uKGNvbW1lbnRzU2VydmljZSwgJ2ZpbmRPbmUnKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ29tbWVudCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgY29udHJvbGxlci5maW5kT25lKFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5UKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja0NvbW11bml0eUFjY2Vzc0d1YXJkLmNhbkFjdGl2YXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdOZXN0ZWQgQ29tbWVudHMgKFBhcmVudC1DaGlsZCknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgbmVzdGVkIGNvbW1lbnQgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbmVzdGVkQ29tbWVudER0byA9IHtcbiAgICAgICAgY29udGVudDogJ1RoaXMgaXMgYSByZXBseSB0byBhbm90aGVyIGNvbW1lbnQnLFxuICAgICAgICBwb3N0SWQ6IFRFU1RfUE9TVF9JRFMuQU5YSUVUWV9QT1NULFxuICAgICAgICBwYXJlbnRJZDogVEVTVF9DT01NRU5UX0lEUy5BTlhJRVRZX0NPTU1FTlQsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBuZXN0ZWRDb21tZW50ID0ge1xuICAgICAgICAuLi5tb2NrQ29tbWVudCxcbiAgICAgICAgaWQ6ICduZXN0ZWQtY29tbWVudC0xMjMnLFxuICAgICAgICBwYXJlbnRJZDogVEVTVF9DT01NRU5UX0lEUy5BTlhJRVRZX0NPTU1FTlQsXG4gICAgICAgIGNvbnRlbnQ6IG5lc3RlZENvbW1lbnREdG8uY29udGVudCxcbiAgICAgIH07XG5cbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnY3JlYXRlJykubW9ja1Jlc29sdmVkVmFsdWUobmVzdGVkQ29tbWVudCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5jcmVhdGUoVEVTVF9VU0VSX0lEUy5DTElFTlQsIG5lc3RlZENvbW1lbnREdG8pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjb21tZW50c1NlcnZpY2UuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgbmVzdGVkQ29tbWVudER0byxcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgIFtdLFxuICAgICAgICBbXSxcbiAgICAgICAgW10sXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChuZXN0ZWRDb21tZW50KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5lc3RlZCBjb21tZW50IGNyZWF0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG5lc3RlZENvbW1lbnREdG8gPSB7XG4gICAgICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGEgcmVwbHkgdG8gYW5vdGhlciBjb21tZW50JyxcbiAgICAgICAgcG9zdElkOiBURVNUX1BPU1RfSURTLkFOWElFVFlfUE9TVCxcbiAgICAgICAgcGFyZW50SWQ6ICdub24tZXhpc3RlbnQtY29tbWVudCcsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignUGFyZW50IGNvbW1lbnQgbm90IGZvdW5kJyk7XG4gICAgICBqZXN0LnNweU9uKGNvbW1lbnRzU2VydmljZSwgJ2NyZWF0ZScpLm1vY2tSZWplY3RlZFZhbHVlKGVycm9yKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoY29udHJvbGxlci5jcmVhdGUoVEVTVF9VU0VSX0lEUy5DTElFTlQsIG5lc3RlZENvbW1lbnREdG8pKS5yZWplY3RzLnRvVGhyb3coSHR0cEV4Y2VwdGlvbik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGaWxlIFVwbG9hZCBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBmaWxlIHVwbG9hZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtdWx0aXBsZUZpbGVzID0gW1xuICAgICAgICB7IC4uLm1vY2tGaWxlc1swXSwgb3JpZ2luYWxuYW1lOiAnY29tbWVudDEuanBnJyB9LFxuICAgICAgICB7IC4uLm1vY2tGaWxlc1swXSwgb3JpZ2luYWxuYW1lOiAnY29tbWVudDIuanBnJyB9LFxuICAgICAgXTtcbiAgICAgIGNvbnN0IG11bHRpcGxlRmlsZVJlc3VsdHMgPSBbXG4gICAgICAgIHsgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9jb21tZW50MS5qcGcnLCBmaWxlbmFtZTogJ2NvbW1lbnQxLmpwZycsIHNpemU6IDUxMiB9LFxuICAgICAgICB7IHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vY29tbWVudDIuanBnJywgZmlsZW5hbWU6ICdjb21tZW50Mi5qcGcnLCBzaXplOiA1MTIgfSxcbiAgICAgIF07XG5cbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnY3JlYXRlJykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbW1lbnQpO1xuICAgICAgamVzdC5zcHlPbihzdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLCAndmFsaWRhdGVGaWxlJykubW9ja1JldHVyblZhbHVlKHsgaXNWYWxpZDogdHJ1ZSB9KTtcbiAgICAgIGplc3Quc3B5T24oc3VwYWJhc2VTdG9yYWdlU2VydmljZSwgJ3VwbG9hZEZpbGVzJykubW9ja1Jlc29sdmVkVmFsdWUobXVsdGlwbGVGaWxlUmVzdWx0cyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5jcmVhdGUoVEVTVF9VU0VSX0lEUy5DTElFTlQsIG1vY2tDcmVhdGVDb21tZW50RHRvLCBtdWx0aXBsZUZpbGVzKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3Qoc3VwYWJhc2VTdG9yYWdlU2VydmljZS52YWxpZGF0ZUZpbGUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICAgIGV4cGVjdChzdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLnVwbG9hZEZpbGVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtdWx0aXBsZUZpbGVzLCAncG9zdC1hdHRhY2htZW50cycpO1xuICAgICAgZXhwZWN0KGNvbW1lbnRzU2VydmljZS5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBtb2NrQ3JlYXRlQ29tbWVudER0byxcbiAgICAgICAgVEVTVF9VU0VSX0lEUy5DTElFTlQsXG4gICAgICAgIFsnaHR0cHM6Ly9leGFtcGxlLmNvbS9jb21tZW50MS5qcGcnLCAnaHR0cHM6Ly9leGFtcGxlLmNvbS9jb21tZW50Mi5qcGcnXSxcbiAgICAgICAgWydjb21tZW50MS5qcGcnLCAnY29tbWVudDIuanBnJ10sXG4gICAgICAgIFs1MTIsIDUxMl0sXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ29tbWVudCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmaWxlIHVwbG9hZCBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24oc3VwYWJhc2VTdG9yYWdlU2VydmljZSwgJ3ZhbGlkYXRlRmlsZScpLm1vY2tSZXR1cm5WYWx1ZSh7IGlzVmFsaWQ6IHRydWUgfSk7XG4gICAgICBqZXN0LnNweU9uKHN1cGFiYXNlU3RvcmFnZVNlcnZpY2UsICd1cGxvYWRGaWxlcycpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignVXBsb2FkIGZhaWxlZCcpKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoY29udHJvbGxlci5jcmVhdGUoVEVTVF9VU0VSX0lEUy5DTElFTlQsIG1vY2tDcmVhdGVDb21tZW50RHRvLCBtb2NrRmlsZXMpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEh0dHBFeGNlcHRpb24sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgSHR0cEV4Y2VwdGlvbiBwcm9wZXJseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGh0dHBFeGNlcHRpb24gPSBuZXcgSHR0cEV4Y2VwdGlvbignQ3VzdG9tIGVycm9yJywgSHR0cFN0YXR1cy5CQURfUkVRVUVTVCk7XG4gICAgICBqZXN0LnNweU9uKGNvbW1lbnRzU2VydmljZSwgJ2ZpbmRPbmUnKS5tb2NrUmVqZWN0ZWRWYWx1ZShodHRwRXhjZXB0aW9uKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoY29udHJvbGxlci5maW5kT25lKFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5UKSkucmVqZWN0cy50b1Rocm93KGh0dHBFeGNlcHRpb24pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB3cmFwIHVua25vd24gZXJyb3JzIGluIEh0dHBFeGNlcHRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB1bmtub3duRXJyb3IgPSBuZXcgRXJyb3IoJ1Vua25vd24gZXJyb3InKTtcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAnZmluZEFsbCcpLm1vY2tSZWplY3RlZFZhbHVlKHVua25vd25FcnJvcik7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KGNvbnRyb2xsZXIuZmluZEFsbChURVNUX1VTRVJfSURTLkNMSUVOVCkpLnJlamVjdHMudG9UaHJvdyhIdHRwRXhjZXB0aW9uKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlIGNvbW1lbnQgY3JlYXRpb24gd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBqZXN0LnNweU9uKGNvbW1lbnRzU2VydmljZSwgJ2NyZWF0ZScpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb21tZW50KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250cm9sbGVyLmNyZWF0ZShURVNUX1VTRVJfSURTLkNMSUVOVCwgbW9ja0NyZWF0ZUNvbW1lbnREdG8pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmNvbnRlbnQpLnRvQmUobW9ja0NvbW1lbnQuY29udGVudCk7XG4gICAgICBleHBlY3QocmVzdWx0LnVzZXJJZCkudG9CZShURVNUX1VTRVJfSURTLkNMSUVOVCk7XG4gICAgICBleHBlY3QocmVzdWx0LnBvc3RJZCkudG9CZShURVNUX1BPU1RfSURTLkFOWElFVFlfUE9TVCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZSBjb21tZW50IHVwZGF0ZSB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb21tZW50ID0geyAuLi5tb2NrQ29tbWVudCwgY29udGVudDogJ1VwZGF0ZWQgY29udGVudCcgfTtcbiAgICAgIGplc3Quc3B5T24oY29tbWVudHNTZXJ2aWNlLCAndXBkYXRlJykubW9ja1Jlc29sdmVkVmFsdWUodXBkYXRlZENvbW1lbnQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudXBkYXRlKFxuICAgICAgICBURVNUX1VTRVJfSURTLkNMSUVOVCxcbiAgICAgICAgVEVTVF9DT01NRU5UX0lEUy5BTlhJRVRZX0NPTU1FTlQsXG4gICAgICAgIHsgY29udGVudDogJ1VwZGF0ZWQgY29udGVudCcgfSxcbiAgICAgICk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGVudCkudG9CZSgnVXBkYXRlZCBjb250ZW50Jyk7XG4gICAgICBleHBlY3QocmVzdWx0LmlkKS50b0JlKFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5UKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlIGNvbW1lbnQgaGVhcnQgd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBoZWFydFJlc3VsdCA9IHsgaGVhcnRlZDogdHJ1ZSB9O1xuICAgICAgamVzdC5zcHlPbihjb21tZW50c1NlcnZpY2UsICdoZWFydENvbW1lbnQnKS5tb2NrUmVzb2x2ZWRWYWx1ZShoZWFydFJlc3VsdCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udHJvbGxlci5oZWFydENvbW1lbnQoVEVTVF9VU0VSX0lEUy5DTElFTlQsIFRFU1RfQ09NTUVOVF9JRFMuQU5YSUVUWV9DT01NRU5UKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5oZWFydGVkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==