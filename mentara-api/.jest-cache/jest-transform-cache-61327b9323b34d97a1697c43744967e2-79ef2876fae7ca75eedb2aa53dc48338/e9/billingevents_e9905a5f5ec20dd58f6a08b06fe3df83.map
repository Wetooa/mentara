{"version":3,"names":["cov_3617ub4m9","actualCoverage","s","domain_event_interface_1","require","PaymentSucceededEvent","BaseDomainEvent","constructor","data","metadata","f","paymentId","exports","PaymentFailedEvent","PaymentInitiatedEvent","PaymentMethodCreatedEvent","paymentMethodId","PaymentMethodDeletedEvent","TherapistPayoutCalculatedEvent","therapistId","PaymentAnalyticsRequestedEvent","userId","PlatformFeeCollectedEvent","MockPaymentProcessedEvent"],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/common/events/billing-events.ts"],"sourcesContent":["import {\n  BaseDomainEvent,\n  EventMetadata,\n} from './interfaces/domain-event.interface';\n\n// ===== PAYMENT EVENTS =====\n\nexport interface PaymentSucceededData {\n  paymentId: string;\n  clientId: string;\n  therapistId: string;\n  amount: number;\n  currency: string;\n  platformFee: number;\n  therapistAmount: number;\n  meetingId?: string;\n  paymentMethodId: string;\n}\n\nexport class PaymentSucceededEvent extends BaseDomainEvent<PaymentSucceededData> {\n  constructor(data: PaymentSucceededData, metadata?: EventMetadata) {\n    super(data.paymentId, 'Payment', data, metadata);\n  }\n}\n\nexport interface PaymentFailedData {\n  paymentId: string;\n  clientId: string;\n  therapistId: string;\n  amount: number;\n  currency: string;\n  failureReason: string;\n  meetingId?: string;\n  paymentMethodId: string;\n}\n\nexport class PaymentFailedEvent extends BaseDomainEvent<PaymentFailedData> {\n  constructor(data: PaymentFailedData, metadata?: EventMetadata) {\n    super(data.paymentId, 'Payment', data, metadata);\n  }\n}\n\nexport interface PaymentInitiatedData {\n  paymentId: string;\n  clientId: string;\n  therapistId: string;\n  amount: number;\n  currency: string;\n  meetingId?: string;\n  paymentMethodId: string;\n  description?: string;\n}\n\nexport class PaymentInitiatedEvent extends BaseDomainEvent<PaymentInitiatedData> {\n  constructor(data: PaymentInitiatedData, metadata?: EventMetadata) {\n    super(data.paymentId, 'Payment', data, metadata);\n  }\n}\n\n// ===== PAYMENT METHOD EVENTS =====\n\nexport interface PaymentMethodCreatedData {\n  paymentMethodId: string;\n  userId: string;\n  type: 'CARD' | 'BANK_ACCOUNT' | 'DIGITAL_WALLET';\n  cardLast4?: string;\n  cardBrand?: string;\n  isDefault: boolean;\n}\n\nexport class PaymentMethodCreatedEvent extends BaseDomainEvent<PaymentMethodCreatedData> {\n  constructor(data: PaymentMethodCreatedData, metadata?: EventMetadata) {\n    super(data.paymentMethodId, 'PaymentMethod', data, metadata);\n  }\n}\n\nexport interface PaymentMethodDeletedData {\n  paymentMethodId: string;\n  userId: string;\n}\n\nexport class PaymentMethodDeletedEvent extends BaseDomainEvent<PaymentMethodDeletedData> {\n  constructor(data: PaymentMethodDeletedData, metadata?: EventMetadata) {\n    super(data.paymentMethodId, 'PaymentMethod', data, metadata);\n  }\n}\n\n// ===== THERAPIST PAYOUT EVENTS =====\n\nexport interface TherapistPayoutCalculatedData {\n  therapistId: string;\n  period: {\n    startDate: Date;\n    endDate: Date;\n  };\n  totalSessions: number;\n  totalRevenue: number;\n  platformFees: number;\n  netEarnings: number;\n  averageSessionRate: number;\n}\n\nexport class TherapistPayoutCalculatedEvent extends BaseDomainEvent<TherapistPayoutCalculatedData> {\n  constructor(data: TherapistPayoutCalculatedData, metadata?: EventMetadata) {\n    super(data.therapistId, 'TherapistPayout', data, metadata);\n  }\n}\n\n// ===== ANALYTICS EVENTS =====\n\nexport interface PaymentAnalyticsRequestedData {\n  userId: string;\n  userRole: 'client' | 'therapist' | 'admin';\n  analyticsType: 'therapist' | 'platform';\n  period: {\n    startDate?: Date;\n    endDate?: Date;\n  };\n}\n\nexport class PaymentAnalyticsRequestedEvent extends BaseDomainEvent<PaymentAnalyticsRequestedData> {\n  constructor(data: PaymentAnalyticsRequestedData, metadata?: EventMetadata) {\n    super(data.userId, 'Analytics', data, metadata);\n  }\n}\n\n// ===== PLATFORM EVENTS =====\n\nexport interface PlatformFeeCollectedData {\n  paymentId: string;\n  therapistId: string;\n  clientId: string;\n  totalAmount: number;\n  feeAmount: number;\n  feePercentage: number;\n  currency: string;\n}\n\nexport class PlatformFeeCollectedEvent extends BaseDomainEvent<PlatformFeeCollectedData> {\n  constructor(data: PlatformFeeCollectedData, metadata?: EventMetadata) {\n    super(data.paymentId, 'PlatformFee', data, metadata);\n  }\n}\n\n// ===== EDUCATIONAL EVENTS =====\n\nexport interface MockPaymentProcessedData {\n  paymentId: string;\n  scenario: 'success' | 'decline' | 'insufficient_funds' | 'expired_card';\n  testCardLast4?: string;\n  processingTime: number; // milliseconds\n  isEducational: true;\n}\n\nexport class MockPaymentProcessedEvent extends BaseDomainEvent<MockPaymentProcessedData> {\n  constructor(data: MockPaymentProcessedData, metadata?: EventMetadata) {\n    super(data.paymentId, 'MockPayment', data, metadata);\n  }\n}"],"mappings":"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","ignoreList":[]}