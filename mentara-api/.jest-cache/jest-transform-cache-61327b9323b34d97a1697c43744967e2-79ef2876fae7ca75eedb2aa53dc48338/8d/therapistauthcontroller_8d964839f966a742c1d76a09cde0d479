9a57405f8141ccd53a7b313a8f13dd22
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", { value: true });
exports.TherapistAuthController = void 0;
const common_1 = require("@nestjs/common");
const platform_express_1 = require("@nestjs/platform-express");
const throttler_1 = require("@nestjs/throttler");
const swagger_1 = require("@nestjs/swagger");
const jwt_auth_guard_1 = require("../guards/jwt-auth.guard");
const current_user_id_decorator_1 = require("../decorators/current-user-id.decorator");
const current_user_role_decorator_1 = require("../decorators/current-user-role.decorator");
const public_decorator_1 = require("../decorators/public.decorator");
const zod_validation_pipe_1 = require("../../common/pipes/zod-validation.pipe");
const mentara_commons_1 = require("mentara-commons");
const therapist_auth_service_1 = require("../services/therapist-auth.service");
const supabase_storage_service_1 = require("../../common/services/supabase-storage.service");
const express_1 = require("express");
const therapist_application_interfaces_1 = require("../../therapist/interfaces/therapist-application.interfaces");
let TherapistAuthController = class TherapistAuthController {
    therapistAuthService;
    supabaseStorageService;
    constructor(therapistAuthService, supabaseStorageService) {
        this.therapistAuthService = therapistAuthService;
        this.supabaseStorageService = supabaseStorageService;
    }
    async register(registerDto) {
        const result = await this.therapistAuthService.registerTherapist(registerDto.email, registerDto.password, registerDto.firstName, registerDto.lastName);
        return {
            user: {
                id: result.user.id,
                email: result.user.email,
                firstName: result.user.firstName,
                lastName: result.user.lastName,
                role: result.user.role,
                emailVerified: result.user.emailVerified,
            },
            accessToken: result.tokens.accessToken,
            refreshToken: result.tokens.refreshToken,
            expiresIn: result.tokens.expiresIn,
            message: result.message,
        };
    }
    async login(loginDto, req) {
        const ipAddress = req.ip;
        const userAgent = req.get('User-Agent');
        const result = await this.therapistAuthService.loginTherapist(loginDto.email, loginDto.password, ipAddress, userAgent);
        return {
            user: {
                id: result.user.id,
                email: result.user.email,
                firstName: result.user.firstName,
                lastName: result.user.lastName,
                role: result.user.role,
                emailVerified: result.user.emailVerified,
            },
            accessToken: result.tokens.accessToken,
            refreshToken: result.tokens.refreshToken,
            expiresIn: result.tokens.expiresIn,
        };
    }
    async applyWithDocuments(applicationDataJson, fileTypes, files) {
        try {
            // Parse application data from form
            let applicationData;
            try {
                if (!applicationDataJson) {
                    throw new common_1.BadRequestException('Application data is missing. Please ensure the form is submitted correctly.');
                }
                if (typeof applicationDataJson !== 'string') {
                    console.error('Expected string but received:', typeof applicationDataJson, applicationDataJson);
                    throw new common_1.BadRequestException('Application data must be a JSON string.');
                }
                applicationData = JSON.parse(applicationDataJson);
            }
            catch (error) {
                console.error('JSON parsing error:', error);
                console.error('Raw applicationDataJson:', applicationDataJson);
                throw new common_1.BadRequestException('Invalid application data format. Please check that all form fields are filled correctly.');
            }
            // For public applications, create a temporary user ID
            const tempUserId = `temp_${Date.now()}_${applicationData.email.replace('@', '_at_')}`;
            const applicationWithUserId = { ...applicationData, userId: tempUserId };
            // Parse file type mappings
            let fileTypeMap = {};
            if (fileTypes) {
                try {
                    fileTypeMap = JSON.parse(fileTypes);
                }
                catch {
                    console.warn('Invalid fileTypes JSON, proceeding without mapping');
                }
            }
            // Use consolidated service method to create application and upload documents in one transaction
            const result = await this.therapistAuthService.createApplicationWithDocuments(applicationWithUserId, files || [], fileTypeMap);
            return {
                success: true,
                message: 'Application submitted successfully with documents',
                applicationId: result.application.userId,
                uploadedFiles: result.uploadedFiles,
            };
        }
        catch (error) {
            console.error('Error submitting application with documents:', error);
            if (error instanceof common_1.BadRequestException) {
                throw error;
            }
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            // Enhanced error handling with specific error types
            const errorMessage = error instanceof Error ? error.message : String(error);
            if (errorMessage.includes('email already exists')) {
                throw new common_1.BadRequestException('An application with this email address already exists. Please check your email or contact support.');
            }
            if (errorMessage.includes('file upload')) {
                throw new common_1.BadRequestException('One or more files failed to upload. Please check file formats and sizes.');
            }
            if (errorMessage.includes('validation')) {
                throw new common_1.BadRequestException('Application data validation failed. Please check all required fields.');
            }
            throw new common_1.InternalServerErrorException('Failed to submit application with documents. Please try again or contact support.');
        }
    }
    async getProfile(userId) {
        return this.therapistAuthService.getTherapistProfile(userId);
    }
    // Admin-only endpoints for managing therapist applications
    async getAllApplications(role, status, page, limit) {
        if (role !== 'admin') {
            throw new common_1.ForbiddenException('Admin access required');
        }
        try {
            const pageNum = page ? Math.max(1, page) : 1;
            const limitNum = limit ? Math.min(Math.max(1, limit), 100) : 10;
            const result = await this.therapistAuthService.getAllApplications({
                status,
                page: pageNum,
                limit: limitNum,
            });
            return result;
        }
        catch (error) {
            console.error('Error fetching applications:', error);
            throw new common_1.InternalServerErrorException('Failed to fetch applications');
        }
    }
    async getApplicationById(role, id) {
        if (role !== 'admin') {
            throw new common_1.ForbiddenException('Admin access required');
        }
        try {
            const application = await this.therapistAuthService.getApplicationById(id);
            if (!application) {
                throw new common_1.NotFoundException('Application not found');
            }
            return application;
        }
        catch (error) {
            console.error('Error fetching application:', error);
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            throw new common_1.InternalServerErrorException('Failed to fetch application');
        }
    }
    async updateApplicationStatus(role, id, updateData) {
        if (role !== 'admin') {
            throw new common_1.ForbiddenException('Admin access required');
        }
        try {
            const result = await this.therapistAuthService.updateApplicationStatus(id, updateData);
            return result;
        }
        catch (error) {
            console.error('Error updating application status:', error);
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            throw new common_1.InternalServerErrorException('Failed to update application status');
        }
    }
    async getApplicationFiles(role, applicationId) {
        if (role !== 'admin') {
            throw new common_1.ForbiddenException('Admin access required');
        }
        try {
            const files = await this.therapistAuthService.getApplicationFiles(applicationId);
            return files;
        }
        catch (error) {
            console.error('Error fetching application files:', error);
            if (error instanceof common_1.NotFoundException) {
                throw error;
            }
            throw new common_1.InternalServerErrorException('Failed to fetch application files');
        }
    }
};
exports.TherapistAuthController = TherapistAuthController;
__decorate([
    (0, public_decorator_1.Public)(),
    (0, swagger_1.ApiOperation)({
        summary: 'Register new therapist account',
        description: 'Create a new therapist account. Initial registration before application approval.',
    }),
    (0, swagger_1.ApiBody)({
        type: 'object',
        description: 'Therapist registration data',
        schema: {
            type: 'object',
            required: ['email', 'password', 'firstName', 'lastName'],
            properties: {
                email: {
                    type: 'string',
                    format: 'email',
                    example: 'therapist@example.com',
                },
                password: { type: 'string', minLength: 8, example: 'SecurePass123!' },
                firstName: { type: 'string', example: 'Dr. Sarah' },
                lastName: { type: 'string', example: 'Johnson' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Therapist account created successfully',
        schema: {
            type: 'object',
            properties: {
                user: {
                    type: 'object',
                    properties: {
                        id: { type: 'string' },
                        email: { type: 'string' },
                        firstName: { type: 'string' },
                        lastName: { type: 'string' },
                        role: { type: 'string' },
                        emailVerified: { type: 'boolean' },
                    },
                },
                accessToken: { type: 'string' },
                refreshToken: { type: 'string' },
                expiresIn: { type: 'number' },
                message: { type: 'string' },
            },
        },
    }),
    (0, swagger_1.ApiBadRequestResponse)({
        description: 'Invalid registration data or email already exists',
    }),
    (0, swagger_1.ApiTooManyRequestsResponse)({ description: 'Too many registration attempts' }),
    (0, throttler_1.Throttle)({ default: { limit: 3, ttl: 600000 } }) // 3 therapist registrations per 10 minutes
    ,
    (0, common_1.Post)('register'),
    (0, common_1.HttpCode)(common_1.HttpStatus.CREATED),
    __param(0, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(mentara_commons_1.RegisterTherapistDtoSchema))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], TherapistAuthController.prototype, "register", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, swagger_1.ApiOperation)({
        summary: 'Therapist login',
        description: 'Authenticate therapist user and return access tokens',
    }),
    (0, swagger_1.ApiBody)({
        type: 'object',
        description: 'Therapist login credentials',
        schema: {
            type: 'object',
            required: ['email', 'password'],
            properties: {
                email: {
                    type: 'string',
                    format: 'email',
                    example: 'therapist@example.com',
                },
                password: { type: 'string', example: 'SecurePass123!' },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Login successful',
        schema: {
            type: 'object',
            properties: {
                user: {
                    type: 'object',
                    properties: {
                        id: { type: 'string' },
                        email: { type: 'string' },
                        firstName: { type: 'string' },
                        lastName: { type: 'string' },
                        role: { type: 'string' },
                        emailVerified: { type: 'boolean' },
                    },
                },
                accessToken: { type: 'string' },
                refreshToken: { type: 'string' },
                expiresIn: { type: 'number' },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({ description: 'Invalid credentials' }),
    (0, swagger_1.ApiTooManyRequestsResponse)({ description: 'Too many login attempts' }),
    (0, throttler_1.Throttle)({ default: { limit: 10, ttl: 300000 } }) // 10 login attempts per 5 minutes
    ,
    (0, common_1.Post)('login'),
    (0, common_1.HttpCode)(common_1.HttpStatus.OK),
    __param(0, (0, common_1.Body)(new zod_validation_pipe_1.ZodValidationPipe(mentara_commons_1.LoginDtoSchema))),
    __param(1, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object, typeof (_c = typeof express_1.Request !== "undefined" && express_1.Request) === "function" ? _c : Object]),
    __metadata("design:returntype", Promise)
], TherapistAuthController.prototype, "login", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, swagger_1.ApiOperation)({
        summary: 'Submit therapist application with documents',
        description: 'Submit a complete therapist application including required documents and certifications. Supports multiple file uploads.',
    }),
    (0, swagger_1.ApiConsumes)('multipart/form-data'),
    (0, swagger_1.ApiBody)({
        description: 'Therapist application with supporting documents',
        schema: {
            type: 'object',
            properties: {
                applicationDataJson: {
                    type: 'string',
                    description: 'JSON string containing application data',
                    example: JSON.stringify({
                        email: 'therapist@example.com',
                        firstName: 'Dr. Sarah',
                        lastName: 'Johnson',
                        licenseNumber: 'LIC123456',
                        specializations: ['anxiety', 'depression'],
                        education: 'PhD in Psychology',
                        experience: '5 years',
                    }),
                },
                fileTypes: {
                    type: 'string',
                    description: 'JSON string mapping file indices to types',
                    example: JSON.stringify({ '0': 'license', '1': 'diploma' }),
                },
                files: {
                    type: 'array',
                    items: {
                        type: 'string',
                        format: 'binary',
                    },
                    description: 'Supporting documents (PDF, DOC, DOCX, JPG, PNG)',
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Application submitted successfully',
        schema: {
            type: 'object',
            properties: {
                success: { type: 'boolean' },
                message: { type: 'string' },
                applicationId: { type: 'string' },
                uploadedFiles: {
                    type: 'array',
                    items: {
                        type: 'object',
                        properties: {
                            id: { type: 'string' },
                            fileName: { type: 'string' },
                            url: { type: 'string' },
                        },
                    },
                },
            },
        },
    }),
    (0, swagger_1.ApiBadRequestResponse)({
        description: 'Invalid application data or file format',
    }),
    (0, swagger_1.ApiInternalServerErrorResponse)({
        description: 'Failed to process application',
    }),
    (0, common_1.Post)('apply-with-documents'),
    (0, common_1.UseInterceptors)((0, platform_express_1.FilesInterceptor)('files', 10, {
        limits: { fileSize: 10 * 1024 * 1024 }, // 10MB limit per file
        fileFilter: (req, file, callback) => {
            const allowedMimeTypes = [
                'application/pdf',
                'image/jpeg',
                'image/png',
                'image/jpg',
                'application/msword',
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
            ];
            if (allowedMimeTypes.includes(file.mimetype)) {
                callback(null, true);
            }
            else {
                callback(new common_1.BadRequestException('Invalid file type'), false);
            }
        },
    })),
    __param(0, (0, common_1.Body)('applicationDataJson')),
    __param(1, (0, common_1.Body)('fileTypes')),
    __param(2, (0, common_1.UploadedFiles)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Array]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], TherapistAuthController.prototype, "applyWithDocuments", null);
__decorate([
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    (0, swagger_1.ApiOperation)({
        summary: 'Get therapist profile',
        description: 'Retrieve the authenticated therapist user profile information',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Therapist profile retrieved successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                email: { type: 'string' },
                firstName: { type: 'string' },
                lastName: { type: 'string' },
                role: { type: 'string' },
                licenseNumber: { type: 'string' },
                specializations: { type: 'array', items: { type: 'string' } },
                approvalStatus: { type: 'string' },
                profileComplete: { type: 'boolean' },
                createdAt: { type: 'string', format: 'date-time' },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({
        description: 'Invalid or missing authentication token',
    }),
    (0, common_1.Get)('profile'),
    __param(0, (0, current_user_id_decorator_1.CurrentUserId)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], TherapistAuthController.prototype, "getProfile", null);
__decorate([
    (0, common_1.Get)('applications'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get all therapist applications (Admin only)',
        description: 'Retrieve all therapist applications with optional filtering and pagination. Admin access required.',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'status',
        required: false,
        description: 'Filter by application status',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'page',
        required: false,
        description: 'Page number for pagination',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'limit',
        required: false,
        description: 'Number of items per page',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Applications retrieved successfully',
        schema: {
            type: 'object',
            properties: {
                applications: {
                    type: 'array',
                    items: {
                        type: 'object',
                        properties: {
                            id: { type: 'string' },
                            email: { type: 'string' },
                            firstName: { type: 'string' },
                            lastName: { type: 'string' },
                            status: { type: 'string' },
                            submittedAt: { type: 'string', format: 'date-time' },
                        },
                    },
                },
                totalCount: { type: 'number' },
                page: { type: 'number' },
                totalPages: { type: 'number' },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({
        description: 'Invalid or missing authentication token',
    }),
    (0, swagger_1.ApiForbiddenResponse)({ description: 'Admin access required' }),
    (0, swagger_1.ApiInternalServerErrorResponse)({
        description: 'Failed to fetch applications',
    }),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, common_1.Query)('status')),
    __param(2, (0, common_1.Query)('page')),
    __param(3, (0, common_1.Query)('limit')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, Number, Number]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], TherapistAuthController.prototype, "getAllApplications", null);
__decorate([
    (0, common_1.Get)('applications/:id'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get therapist application by ID (Admin only)',
        description: 'Retrieve detailed information about a specific therapist application. Admin access required.',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Application ID' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Application retrieved successfully',
        schema: {
            type: 'object',
            properties: {
                id: { type: 'string' },
                email: { type: 'string' },
                firstName: { type: 'string' },
                lastName: { type: 'string' },
                licenseNumber: { type: 'string' },
                specializations: { type: 'array', items: { type: 'string' } },
                education: { type: 'string' },
                experience: { type: 'string' },
                status: { type: 'string' },
                submittedAt: { type: 'string', format: 'date-time' },
                reviewedAt: { type: 'string', format: 'date-time', nullable: true },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({
        description: 'Invalid or missing authentication token',
    }),
    (0, swagger_1.ApiForbiddenResponse)({ description: 'Admin access required' }),
    (0, swagger_1.ApiNotFoundResponse)({ description: 'Application not found' }),
    (0, swagger_1.ApiInternalServerErrorResponse)({
        description: 'Failed to fetch application',
    }),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], TherapistAuthController.prototype, "getApplicationById", null);
__decorate([
    (0, common_1.Put)('applications/:id/status'),
    (0, swagger_1.ApiOperation)({
        summary: 'Update therapist application status (Admin only)',
        description: 'Update the status of a therapist application (approve, reject, etc.). Admin access required.',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Application ID' }),
    (0, swagger_1.ApiBody)({
        description: 'Status update data',
        schema: {
            type: 'object',
            required: ['status'],
            properties: {
                status: {
                    type: 'string',
                    enum: ['approved', 'rejected', 'pending'],
                    example: 'approved',
                },
                notes: {
                    type: 'string',
                    description: 'Optional notes about the decision',
                },
                reviewerComments: {
                    type: 'string',
                    description: 'Comments from the reviewing admin',
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Application status updated successfully',
        schema: {
            type: 'object',
            properties: {
                success: { type: 'boolean' },
                message: { type: 'string' },
                credentials: {
                    type: 'object',
                    properties: {
                        email: { type: 'string' },
                        password: { type: 'string' },
                    },
                    description: 'Generated credentials for approved applications',
                },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({
        description: 'Invalid or missing authentication token',
    }),
    (0, swagger_1.ApiForbiddenResponse)({ description: 'Admin access required' }),
    (0, swagger_1.ApiNotFoundResponse)({ description: 'Application not found' }),
    (0, swagger_1.ApiInternalServerErrorResponse)({
        description: 'Failed to update application status',
    }),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, common_1.Param)('id')),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, typeof (_g = typeof therapist_application_interfaces_1.ApplicationStatusUpdateDto !== "undefined" && therapist_application_interfaces_1.ApplicationStatusUpdateDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], TherapistAuthController.prototype, "updateApplicationStatus", null);
__decorate([
    (0, common_1.Get)('applications/:id/files'),
    (0, swagger_1.ApiOperation)({
        summary: 'Get therapist application files (Admin only)',
        description: 'Retrieve all uploaded files for a specific therapist application. Admin access required.',
    }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'Application ID' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Application files retrieved successfully',
        schema: {
            type: 'array',
            items: {
                type: 'object',
                properties: {
                    id: { type: 'string' },
                    fileName: { type: 'string' },
                    fileUrl: { type: 'string' },
                    uploadedAt: { type: 'string', format: 'date-time' },
                },
            },
        },
    }),
    (0, swagger_1.ApiUnauthorizedResponse)({
        description: 'Invalid or missing authentication token',
    }),
    (0, swagger_1.ApiForbiddenResponse)({ description: 'Admin access required' }),
    (0, swagger_1.ApiNotFoundResponse)({ description: 'Application or files not found' }),
    (0, swagger_1.ApiInternalServerErrorResponse)({
        description: 'Failed to fetch application files',
    }),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard),
    __param(0, (0, current_user_role_decorator_1.CurrentUserRole)()),
    __param(1, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], TherapistAuthController.prototype, "getApplicationFiles", null);
exports.TherapistAuthController = TherapistAuthController = __decorate([
    (0, swagger_1.ApiTags)('therapist-auth'),
    (0, swagger_1.ApiBearerAuth)('JWT-auth'),
    (0, common_1.Controller)('auth/therapist'),
    __metadata("design:paramtypes", [typeof (_a = typeof therapist_auth_service_1.TherapistAuthService !== "undefined" && therapist_auth_service_1.TherapistAuthService) === "function" ? _a : Object, typeof (_b = typeof supabase_storage_service_1.SupabaseStorageService !== "undefined" && supabase_storage_service_1.SupabaseStorageService) === "function" ? _b : Object])
], TherapistAuthController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvd2V0b29hL0RvY3VtZW50cy9jb2RlL3Byb2plY3RzL21lbnRhcmEvbWVudGFyYS1hcGkvc3JjL2F1dGgvY29udHJvbGxlcnMvdGhlcmFwaXN0LWF1dGguY29udHJvbGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsMkNBa0J3QjtBQUN4QiwrREFBNEQ7QUFDNUQsaURBQTZDO0FBQzdDLDZDQWV5QjtBQUN6Qiw2REFBd0Q7QUFDeEQsdUZBQXdFO0FBQ3hFLDJGQUE0RTtBQUM1RSxxRUFBd0Q7QUFDeEQsZ0ZBQTJFO0FBRTNFLHFEQU95QjtBQUN6QiwrRUFBMEU7QUFDMUUsNkZBQXdGO0FBQ3hGLHFDQUFrQztBQUVsQyxrSEFHcUU7QUFLOUQsSUFBTSx1QkFBdUIsR0FBN0IsTUFBTSx1QkFBdUI7SUFFZjtJQUNBO0lBRm5CLFlBQ21CLG9CQUEwQyxFQUMxQyxzQkFBOEM7UUFEOUMseUJBQW9CLEdBQXBCLG9CQUFvQixDQUFzQjtRQUMxQywyQkFBc0IsR0FBdEIsc0JBQXNCLENBQXdCO0lBQzlELENBQUM7SUF5REUsQUFBTixLQUFLLENBQUMsUUFBUSxDQUVaLFdBQWlDO1FBRWpDLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixDQUM5RCxXQUFXLENBQUMsS0FBSyxFQUNqQixXQUFXLENBQUMsUUFBUSxFQUNwQixXQUFXLENBQUMsU0FBUyxFQUNyQixXQUFXLENBQUMsUUFBUSxDQUNyQixDQUFDO1FBRUYsT0FBTztZQUNMLElBQUksRUFBRTtnQkFDSixFQUFFLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUNsQixLQUFLLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLO2dCQUN4QixTQUFTLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTO2dCQUNoQyxRQUFRLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRO2dCQUM5QixJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJ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QThCLEVBQUM7UUFDOUIsV0FBVyxFQUFFLG1DQUFtQztLQUNqRCxDQUFDO0lBQ0QsSUFBQSxrQkFBUyxFQUFDLDZCQUFZLENBQUM7SUFFckIsV0FBQSxJQUFBLDZDQUFlLEdBQUUsQ0FBQTtJQUNqQixXQUFBLElBQUEsY0FBSyxFQUFDLElBQUksQ0FBQyxDQUFBOzs7d0RBQ1gsT0FBTyxvQkFBUCxPQUFPO2tFQXdCVDtrQ0FwckJVLHVCQUF1QjtJQUhuQyxJQUFBLGlCQUFPLEVBQUMsZ0JBQWdCLENBQUM7SUFDekIsSUFBQSx1QkFBYSxFQUFDLFVBQVUsQ0FBQztJQUN6QixJQUFBLG1CQUFVLEVBQUMsZ0JBQWdCLENBQUM7eURBR2MsNkNBQW9CLG9CQUFwQiw2Q0FBb0Isb0RBQ2xCLGlEQUFzQixvQkFBdEIsaURBQXNCO0dBSHRELHVCQUF1QixDQXFyQm5DIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3dldG9vYS9Eb2N1bWVudHMvY29kZS9wcm9qZWN0cy9tZW50YXJhL21lbnRhcmEtYXBpL3NyYy9hdXRoL2NvbnRyb2xsZXJzL3RoZXJhcGlzdC1hdXRoLmNvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQm9keSxcbiAgQ29udHJvbGxlcixcbiAgR2V0LFxuICBQb3N0LFxuICBQdXQsXG4gIFBhcmFtLFxuICBRdWVyeSxcbiAgVXNlSW50ZXJjZXB0b3JzLFxuICBVcGxvYWRlZEZpbGVzLFxuICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxuICBOb3RGb3VuZEV4Y2VwdGlvbixcbiAgRm9yYmlkZGVuRXhjZXB0aW9uLFxuICBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uLFxuICBVc2VHdWFyZHMsXG4gIEh0dHBDb2RlLFxuICBIdHRwU3RhdHVzLFxuICBSZXEsXG59IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IEZpbGVzSW50ZXJjZXB0b3IgfSBmcm9tICdAbmVzdGpzL3BsYXRmb3JtLWV4cHJlc3MnO1xuaW1wb3J0IHsgVGhyb3R0bGUgfSBmcm9tICdAbmVzdGpzL3Rocm90dGxlcic7XG5pbXBvcnQge1xuICBBcGlUYWdzLFxuICBBcGlPcGVyYXRpb24sXG4gIEFwaVJlc3BvbnNlLFxuICBBcGlCb2R5LFxuICBBcGlCZWFyZXJBdXRoLFxuICBBcGlVbmF1dGhvcml6ZWRSZXNwb25zZSxcbiAgQXBpRm9yYmlkZGVuUmVzcG9uc2UsXG4gIEFwaVRvb01hbnlSZXF1ZXN0c1Jlc3BvbnNlLFxuICBBcGlCYWRSZXF1ZXN0UmVzcG9uc2UsXG4gIEFwaU5vdEZvdW5kUmVzcG9uc2UsXG4gIEFwaUludGVybmFsU2VydmVyRXJyb3JSZXNwb25zZSxcbiAgQXBpQ29uc3VtZXMsXG4gIEFwaVBhcmFtLFxuICBBcGlRdWVyeSxcbn0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uL2d1YXJkcy9qd3QtYXV0aC5ndWFyZCc7XG5pbXBvcnQgeyBDdXJyZW50VXNlcklkIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9jdXJyZW50LXVzZXItaWQuZGVjb3JhdG9yJztcbmltcG9ydCB7IEN1cnJlbnRVc2VyUm9sZSB9IGZyb20gJy4uL2RlY29yYXRvcnMvY3VycmVudC11c2VyLXJvbGUuZGVjb3JhdG9yJztcbmltcG9ydCB7IFB1YmxpYyB9IGZyb20gJy4uL2RlY29yYXRvcnMvcHVibGljLmRlY29yYXRvcic7XG5pbXBvcnQgeyBab2RWYWxpZGF0aW9uUGlwZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9waXBlcy96b2QtdmFsaWRhdGlvbi5waXBlJztcbmltcG9ydCB7IFZhbGlkYXRlZEJvZHkgfSBmcm9tICcuLi8uLi9jb21tb24vZGVjb3JhdG9ycy92YWxpZGF0ZS1ib2R5LmRlY29yYXRvcic7XG5pbXBvcnQge1xuICBSZWdpc3RlclRoZXJhcGlzdER0b1NjaGVtYSxcbiAgTG9naW5EdG9TY2hlbWEsXG4gIFRoZXJhcGlzdEFwcGxpY2F0aW9uQ3JlYXRlRHRvU2NoZW1hLFxuICB0eXBlIFJlZ2lzdGVyVGhlcmFwaXN0RHRvLFxuICB0eXBlIExvZ2luRHRvLFxuICB0eXBlIFRoZXJhcGlzdEFwcGxpY2F0aW9uQ3JlYXRlRHRvLFxufSBmcm9tICdtZW50YXJhLWNvbW1vbnMnO1xuaW1wb3J0IHsgVGhlcmFwaXN0QXV0aFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy90aGVyYXBpc3QtYXV0aC5zZXJ2aWNlJztcbmltcG9ydCB7IFN1cGFiYXNlU3RvcmFnZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9jb21tb24vc2VydmljZXMvc3VwYWJhc2Utc3RvcmFnZS5zZXJ2aWNlJztcbmltcG9ydCB7IFJlcXVlc3QgfSBmcm9tICdleHByZXNzJztcblxuaW1wb3J0IHtcbiAgVGhlcmFwaXN0QXBwbGljYXRpb25SZXNwb25zZSxcbiAgQXBwbGljYXRpb25TdGF0dXNVcGRhdGVEdG8sXG59IGZyb20gJy4uLy4uL3RoZXJhcGlzdC9pbnRlcmZhY2VzL3RoZXJhcGlzdC1hcHBsaWNhdGlvbi5pbnRlcmZhY2VzJztcblxuQEFwaVRhZ3MoJ3RoZXJhcGlzdC1hdXRoJylcbkBBcGlCZWFyZXJBdXRoKCdKV1QtYXV0aCcpXG5AQ29udHJvbGxlcignYXV0aC90aGVyYXBpc3QnKVxuZXhwb3J0IGNsYXNzIFRoZXJhcGlzdEF1dGhDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSB0aGVyYXBpc3RBdXRoU2VydmljZTogVGhlcmFwaXN0QXV0aFNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBzdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlOiBTdXBhYmFzZVN0b3JhZ2VTZXJ2aWNlLFxuICApIHt9XG5cbiAgQFB1YmxpYygpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdSZWdpc3RlciBuZXcgdGhlcmFwaXN0IGFjY291bnQnLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ0NyZWF0ZSBhIG5ldyB0aGVyYXBpc3QgYWNjb3VudC4gSW5pdGlhbCByZWdpc3RyYXRpb24gYmVmb3JlIGFwcGxpY2F0aW9uIGFwcHJvdmFsLicsXG4gIH0pXG4gIEBBcGlCb2R5KHtcbiAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICBkZXNjcmlwdGlvbjogJ1RoZXJhcGlzdCByZWdpc3RyYXRpb24gZGF0YScsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHJlcXVpcmVkOiBbJ2VtYWlsJywgJ3Bhc3N3b3JkJywgJ2ZpcnN0TmFtZScsICdsYXN0TmFtZSddLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBlbWFpbDoge1xuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGZvcm1hdDogJ2VtYWlsJyxcbiAgICAgICAgICBleGFtcGxlOiAndGhlcmFwaXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgdHlwZTogJ3N0cmluZycsIG1pbkxlbmd0aDogOCwgZXhhbXBsZTogJ1NlY3VyZVBhc3MxMjMhJyB9LFxuICAgICAgICBmaXJzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycsIGV4YW1wbGU6ICdEci4gU2FyYWgnIH0sXG4gICAgICAgIGxhc3ROYW1lOiB7IHR5cGU6ICdzdHJpbmcnLCBleGFtcGxlOiAnSm9obnNvbicgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMSxcbiAgICBkZXNjcmlwdGlvbjogJ1RoZXJhcGlzdCBhY2NvdW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGVtYWlsOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICByb2xlOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGFjY2Vzc1Rva2VuOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHJlZnJlc2hUb2tlbjogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBleHBpcmVzSW46IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgICAgbWVzc2FnZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpQmFkUmVxdWVzdFJlc3BvbnNlKHtcbiAgICBkZXNjcmlwdGlvbjogJ0ludmFsaWQgcmVnaXN0cmF0aW9uIGRhdGEgb3IgZW1haWwgYWxyZWFkeSBleGlzdHMnLFxuICB9KVxuICBAQXBpVG9vTWFueVJlcXVlc3RzUmVzcG9uc2UoeyBkZXNjcmlwdGlvbjogJ1RvbyBtYW55IHJlZ2lzdHJhdGlvbiBhdHRlbXB0cycgfSlcbiAgQFRocm90dGxlKHsgZGVmYXVsdDogeyBsaW1pdDogMywgdHRsOiA2MDAwMDAgfSB9KSAvLyAzIHRoZXJhcGlzdCByZWdpc3RyYXRpb25zIHBlciAxMCBtaW51dGVzXG4gIEBQb3N0KCdyZWdpc3RlcicpXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLkNSRUFURUQpXG4gIGFzeW5jIHJlZ2lzdGVyKFxuICAgIEBCb2R5KG5ldyBab2RWYWxpZGF0aW9uUGlwZShSZWdpc3RlclRoZXJhcGlzdER0b1NjaGVtYSkpXG4gICAgcmVnaXN0ZXJEdG86IFJlZ2lzdGVyVGhlcmFwaXN0RHRvLFxuICApIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnRoZXJhcGlzdEF1dGhTZXJ2aWNlLnJlZ2lzdGVyVGhlcmFwaXN0KFxuICAgICAgcmVnaXN0ZXJEdG8uZW1haWwsXG4gICAgICByZWdpc3RlckR0by5wYXNzd29yZCxcbiAgICAgIHJlZ2lzdGVyRHRvLmZpcnN0TmFtZSxcbiAgICAgIHJlZ2lzdGVyRHRvLmxhc3ROYW1lLFxuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogcmVzdWx0LnVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiByZXN1bHQudXNlci5lbWFpbCxcbiAgICAgICAgZmlyc3ROYW1lOiByZXN1bHQudXNlci5maXJzdE5hbWUsXG4gICAgICAgIGxhc3ROYW1lOiByZXN1bHQudXNlci5sYXN0TmFtZSxcbiAgICAgICAgcm9sZTogcmVzdWx0LnVzZXIucm9sZSxcbiAgICAgICAgZW1haWxWZXJpZmllZDogcmVzdWx0LnVzZXIuZW1haWxWZXJpZmllZCxcbiAgICAgIH0sXG4gICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LnRva2Vucy5hY2Nlc3NUb2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnRva2Vucy5yZWZyZXNoVG9rZW4sXG4gICAgICBleHBpcmVzSW46IHJlc3VsdC50b2tlbnMuZXhwaXJlc0luLFxuICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2UsXG4gICAgfTtcbiAgfVxuXG4gIEBQdWJsaWMoKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnVGhlcmFwaXN0IGxvZ2luJyxcbiAgICBkZXNjcmlwdGlvbjogJ0F1dGhlbnRpY2F0ZSB0aGVyYXBpc3QgdXNlciBhbmQgcmV0dXJuIGFjY2VzcyB0b2tlbnMnLFxuICB9KVxuICBAQXBpQm9keSh7XG4gICAgdHlwZTogJ29iamVjdCcsXG4gICAgZGVzY3JpcHRpb246ICdUaGVyYXBpc3QgbG9naW4gY3JlZGVudGlhbHMnLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICByZXF1aXJlZDogWydlbWFpbCcsICdwYXNzd29yZCddLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBlbWFpbDoge1xuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGZvcm1hdDogJ2VtYWlsJyxcbiAgICAgICAgICBleGFtcGxlOiAndGhlcmFwaXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgdHlwZTogJ3N0cmluZycsIGV4YW1wbGU6ICdTZWN1cmVQYXNzMTIzIScgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ0xvZ2luIHN1Y2Nlc3NmdWwnLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgZW1haWw6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgbGFzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIHJvbGU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYWNjZXNzVG9rZW46IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgcmVmcmVzaFRva2VuOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGV4cGlyZXNJbjogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpVW5hdXRob3JpemVkUmVzcG9uc2UoeyBkZXNjcmlwdGlvbjogJ0ludmFsaWQgY3JlZGVudGlhbHMnIH0pXG4gIEBBcGlUb29NYW55UmVxdWVzdHNSZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnVG9vIG1hbnkgbG9naW4gYXR0ZW1wdHMnIH0pXG4gIEBUaHJvdHRsZSh7IGRlZmF1bHQ6IHsgbGltaXQ6IDEwLCB0dGw6IDMwMDAwMCB9IH0pIC8vIDEwIGxvZ2luIGF0dGVtcHRzIHBlciA1IG1pbnV0ZXNcbiAgQFBvc3QoJ2xvZ2luJylcbiAgQEh0dHBDb2RlKEh0dHBTdGF0dXMuT0spXG4gIGFzeW5jIGxvZ2luKFxuICAgIEBCb2R5KG5ldyBab2RWYWxpZGF0aW9uUGlwZShMb2dpbkR0b1NjaGVtYSkpIGxvZ2luRHRvOiBMb2dpbkR0byxcbiAgICBAUmVxKCkgcmVxOiBSZXF1ZXN0LFxuICApIHtcbiAgICBjb25zdCBpcEFkZHJlc3MgPSByZXEuaXA7XG4gICAgY29uc3QgdXNlckFnZW50ID0gcmVxLmdldCgnVXNlci1BZ2VudCcpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy50aGVyYXBpc3RBdXRoU2VydmljZS5sb2dpblRoZXJhcGlzdChcbiAgICAgIGxvZ2luRHRvLmVtYWlsLFxuICAgICAgbG9naW5EdG8ucGFzc3dvcmQsXG4gICAgICBpcEFkZHJlc3MsXG4gICAgICB1c2VyQWdlbnQsXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiByZXN1bHQudXNlci5pZCxcbiAgICAgICAgZW1haWw6IHJlc3VsdC51c2VyLmVtYWlsLFxuICAgICAgICBmaXJzdE5hbWU6IHJlc3VsdC51c2VyLmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdE5hbWU6IHJlc3VsdC51c2VyLmxhc3ROYW1lLFxuICAgICAgICByb2xlOiByZXN1bHQudXNlci5yb2xlLFxuICAgICAgICBlbWFpbFZlcmlmaWVkOiByZXN1bHQudXNlci5lbWFpbFZlcmlmaWVkLFxuICAgICAgfSxcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQudG9rZW5zLmFjY2Vzc1Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQudG9rZW5zLnJlZnJlc2hUb2tlbixcbiAgICAgIGV4cGlyZXNJbjogcmVzdWx0LnRva2Vucy5leHBpcmVzSW4sXG4gICAgfTtcbiAgfVxuXG4gIEBQdWJsaWMoKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnU3VibWl0IHRoZXJhcGlzdCBhcHBsaWNhdGlvbiB3aXRoIGRvY3VtZW50cycsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnU3VibWl0IGEgY29tcGxldGUgdGhlcmFwaXN0IGFwcGxpY2F0aW9uIGluY2x1ZGluZyByZXF1aXJlZCBkb2N1bWVudHMgYW5kIGNlcnRpZmljYXRpb25zLiBTdXBwb3J0cyBtdWx0aXBsZSBmaWxlIHVwbG9hZHMuJyxcbiAgfSlcbiAgQEFwaUNvbnN1bWVzKCdtdWx0aXBhcnQvZm9ybS1kYXRhJylcbiAgQEFwaUJvZHkoe1xuICAgIGRlc2NyaXB0aW9uOiAnVGhlcmFwaXN0IGFwcGxpY2F0aW9uIHdpdGggc3VwcG9ydGluZyBkb2N1bWVudHMnLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGFwcGxpY2F0aW9uRGF0YUpzb246IHtcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0pTT04gc3RyaW5nIGNvbnRhaW5pbmcgYXBwbGljYXRpb24gZGF0YScsXG4gICAgICAgICAgZXhhbXBsZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZW1haWw6ICd0aGVyYXBpc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiAnRHIuIFNhcmFoJyxcbiAgICAgICAgICAgIGxhc3ROYW1lOiAnSm9obnNvbicsXG4gICAgICAgICAgICBsaWNlbnNlTnVtYmVyOiAnTElDMTIzNDU2JyxcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uczogWydhbnhpZXR5JywgJ2RlcHJlc3Npb24nXSxcbiAgICAgICAgICAgIGVkdWNhdGlvbjogJ1BoRCBpbiBQc3ljaG9sb2d5JyxcbiAgICAgICAgICAgIGV4cGVyaWVuY2U6ICc1IHllYXJzJyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgICAgZmlsZVR5cGVzOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdKU09OIHN0cmluZyBtYXBwaW5nIGZpbGUgaW5kaWNlcyB0byB0eXBlcycsXG4gICAgICAgICAgZXhhbXBsZTogSlNPTi5zdHJpbmdpZnkoeyAnMCc6ICdsaWNlbnNlJywgJzEnOiAnZGlwbG9tYScgfSksXG4gICAgICAgIH0sXG4gICAgICAgIGZpbGVzOiB7XG4gICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBmb3JtYXQ6ICdiaW5hcnknLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdTdXBwb3J0aW5nIGRvY3VtZW50cyAoUERGLCBET0MsIERPQ1gsIEpQRywgUE5HKScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDEsXG4gICAgZGVzY3JpcHRpb246ICdBcHBsaWNhdGlvbiBzdWJtaXR0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBzdWNjZXNzOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgICAgICBtZXNzYWdlOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGFwcGxpY2F0aW9uSWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgdXBsb2FkZWRGaWxlczoge1xuICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICBmaWxlTmFtZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICB1cmw6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaUJhZFJlcXVlc3RSZXNwb25zZSh7XG4gICAgZGVzY3JpcHRpb246ICdJbnZhbGlkIGFwcGxpY2F0aW9uIGRhdGEgb3IgZmlsZSBmb3JtYXQnLFxuICB9KVxuICBAQXBpSW50ZXJuYWxTZXJ2ZXJFcnJvclJlc3BvbnNlKHtcbiAgICBkZXNjcmlwdGlvbjogJ0ZhaWxlZCB0byBwcm9jZXNzIGFwcGxpY2F0aW9uJyxcbiAgfSlcbiAgQFBvc3QoJ2FwcGx5LXdpdGgtZG9jdW1lbnRzJylcbiAgQFVzZUludGVyY2VwdG9ycyhcbiAgICBGaWxlc0ludGVyY2VwdG9yKCdmaWxlcycsIDEwLCB7XG4gICAgICBsaW1pdHM6IHsgZmlsZVNpemU6IDEwICogMTAyNCAqIDEwMjQgfSwgLy8gMTBNQiBsaW1pdCBwZXIgZmlsZVxuICAgICAgZmlsZUZpbHRlcjogKHJlcSwgZmlsZSwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgY29uc3QgYWxsb3dlZE1pbWVUeXBlcyA9IFtcbiAgICAgICAgICAnYXBwbGljYXRpb24vcGRmJyxcbiAgICAgICAgICAnaW1hZ2UvanBlZycsXG4gICAgICAgICAgJ2ltYWdlL3BuZycsXG4gICAgICAgICAgJ2ltYWdlL2pwZycsXG4gICAgICAgICAgJ2FwcGxpY2F0aW9uL21zd29yZCcsXG4gICAgICAgICAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50JyxcbiAgICAgICAgXTtcblxuICAgICAgICBpZiAoYWxsb3dlZE1pbWVUeXBlcy5pbmNsdWRlcyhmaWxlLm1pbWV0eXBlKSkge1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKCdJbnZhbGlkIGZpbGUgdHlwZScpLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSksXG4gIClcbiAgYXN5bmMgYXBwbHlXaXRoRG9jdW1lbnRzKFxuICAgIEBCb2R5KCdhcHBsaWNhdGlvbkRhdGFKc29uJykgYXBwbGljYXRpb25EYXRhSnNvbjogc3RyaW5nLFxuICAgIEBCb2R5KCdmaWxlVHlwZXMnKSBmaWxlVHlwZXM6IHN0cmluZyxcbiAgICBAVXBsb2FkZWRGaWxlcygpIGZpbGVzOiBFeHByZXNzLk11bHRlci5GaWxlW10sXG4gICk6IFByb21pc2U8e1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIGFwcGxpY2F0aW9uSWQ6IHN0cmluZztcbiAgICB1cGxvYWRlZEZpbGVzOiBBcnJheTx7IGlkOiBzdHJpbmc7IGZpbGVOYW1lOiBzdHJpbmc7IHVybDogc3RyaW5nIH0+O1xuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFBhcnNlIGFwcGxpY2F0aW9uIGRhdGEgZnJvbSBmb3JtXG4gICAgICBsZXQgYXBwbGljYXRpb25EYXRhOiBUaGVyYXBpc3RBcHBsaWNhdGlvbkNyZWF0ZUR0bztcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghYXBwbGljYXRpb25EYXRhSnNvbikge1xuICAgICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKFxuICAgICAgICAgICAgJ0FwcGxpY2F0aW9uIGRhdGEgaXMgbWlzc2luZy4gUGxlYXNlIGVuc3VyZSB0aGUgZm9ybSBpcyBzdWJtaXR0ZWQgY29ycmVjdGx5LicsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgYXBwbGljYXRpb25EYXRhSnNvbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgJ0V4cGVjdGVkIHN0cmluZyBidXQgcmVjZWl2ZWQ6JyxcbiAgICAgICAgICAgIHR5cGVvZiBhcHBsaWNhdGlvbkRhdGFKc29uLFxuICAgICAgICAgICAgYXBwbGljYXRpb25EYXRhSnNvbixcbiAgICAgICAgICApO1xuICAgICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKFxuICAgICAgICAgICAgJ0FwcGxpY2F0aW9uIGRhdGEgbXVzdCBiZSBhIEpTT04gc3RyaW5nLicsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFwcGxpY2F0aW9uRGF0YSA9IEpTT04ucGFyc2UoYXBwbGljYXRpb25EYXRhSnNvbik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdKU09OIHBhcnNpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdSYXcgYXBwbGljYXRpb25EYXRhSnNvbjonLCBhcHBsaWNhdGlvbkRhdGFKc29uKTtcbiAgICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oXG4gICAgICAgICAgJ0ludmFsaWQgYXBwbGljYXRpb24gZGF0YSBmb3JtYXQuIFBsZWFzZSBjaGVjayB0aGF0IGFsbCBmb3JtIGZpZWxkcyBhcmUgZmlsbGVkIGNvcnJlY3RseS4nLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBGb3IgcHVibGljIGFwcGxpY2F0aW9ucywgY3JlYXRlIGEgdGVtcG9yYXJ5IHVzZXIgSURcbiAgICAgIGNvbnN0IHRlbXBVc2VySWQgPSBgdGVtcF8ke0RhdGUubm93KCl9XyR7YXBwbGljYXRpb25EYXRhLmVtYWlsLnJlcGxhY2UoJ0AnLCAnX2F0XycpfWA7XG4gICAgICBjb25zdCBhcHBsaWNhdGlvbldpdGhVc2VySWQgPSB7IC4uLmFwcGxpY2F0aW9uRGF0YSwgdXNlcklkOiB0ZW1wVXNlcklkIH07XG5cbiAgICAgIC8vIFBhcnNlIGZpbGUgdHlwZSBtYXBwaW5nc1xuICAgICAgbGV0IGZpbGVUeXBlTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgICBpZiAoZmlsZVR5cGVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZmlsZVR5cGVNYXAgPSBKU09OLnBhcnNlKGZpbGVUeXBlcyk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBmaWxlVHlwZXMgSlNPTiwgcHJvY2VlZGluZyB3aXRob3V0IG1hcHBpbmcnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBVc2UgY29uc29saWRhdGVkIHNlcnZpY2UgbWV0aG9kIHRvIGNyZWF0ZSBhcHBsaWNhdGlvbiBhbmQgdXBsb2FkIGRvY3VtZW50cyBpbiBvbmUgdHJhbnNhY3Rpb25cbiAgICAgIGNvbnN0IHJlc3VsdCA9XG4gICAgICAgIGF3YWl0IHRoaXMudGhlcmFwaXN0QXV0aFNlcnZpY2UuY3JlYXRlQXBwbGljYXRpb25XaXRoRG9jdW1lbnRzKFxuICAgICAgICAgIGFwcGxpY2F0aW9uV2l0aFVzZXJJZCxcbiAgICAgICAgICBmaWxlcyB8fCBbXSxcbiAgICAgICAgICBmaWxlVHlwZU1hcCxcbiAgICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ0FwcGxpY2F0aW9uIHN1Ym1pdHRlZCBzdWNjZXNzZnVsbHkgd2l0aCBkb2N1bWVudHMnLFxuICAgICAgICBhcHBsaWNhdGlvbklkOiByZXN1bHQuYXBwbGljYXRpb24udXNlcklkLFxuICAgICAgICB1cGxvYWRlZEZpbGVzOiByZXN1bHQudXBsb2FkZWRGaWxlcyxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN1Ym1pdHRpbmcgYXBwbGljYXRpb24gd2l0aCBkb2N1bWVudHM6JywgZXJyb3IpO1xuXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBCYWRSZXF1ZXN0RXhjZXB0aW9uKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cblxuICAgICAgLy8gRW5oYW5jZWQgZXJyb3IgaGFuZGxpbmcgd2l0aCBzcGVjaWZpYyBlcnJvciB0eXBlc1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuXG4gICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdlbWFpbCBhbHJlYWR5IGV4aXN0cycpKSB7XG4gICAgICAgIHRocm93IG5ldyBCYWRSZXF1ZXN0RXhjZXB0aW9uKFxuICAgICAgICAgICdBbiBhcHBsaWNhdGlvbiB3aXRoIHRoaXMgZW1haWwgYWRkcmVzcyBhbHJlYWR5IGV4aXN0cy4gUGxlYXNlIGNoZWNrIHlvdXIgZW1haWwgb3IgY29udGFjdCBzdXBwb3J0LicsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZpbGUgdXBsb2FkJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFeGNlcHRpb24oXG4gICAgICAgICAgJ09uZSBvciBtb3JlIGZpbGVzIGZhaWxlZCB0byB1cGxvYWQuIFBsZWFzZSBjaGVjayBmaWxlIGZvcm1hdHMgYW5kIHNpemVzLicsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ3ZhbGlkYXRpb24nKSkge1xuICAgICAgICB0aHJvdyBuZXcgQmFkUmVxdWVzdEV4Y2VwdGlvbihcbiAgICAgICAgICAnQXBwbGljYXRpb24gZGF0YSB2YWxpZGF0aW9uIGZhaWxlZC4gUGxlYXNlIGNoZWNrIGFsbCByZXF1aXJlZCBmaWVsZHMuJyxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEludGVybmFsU2VydmVyRXJyb3JFeGNlcHRpb24oXG4gICAgICAgICdGYWlsZWQgdG8gc3VibWl0IGFwcGxpY2F0aW9uIHdpdGggZG9jdW1lbnRzLiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3Qgc3VwcG9ydC4nLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBAVXNlR3VhcmRzKEp3dEF1dGhHdWFyZClcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0dldCB0aGVyYXBpc3QgcHJvZmlsZScsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnUmV0cmlldmUgdGhlIGF1dGhlbnRpY2F0ZWQgdGhlcmFwaXN0IHVzZXIgcHJvZmlsZSBpbmZvcm1hdGlvbicsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdUaGVyYXBpc3QgcHJvZmlsZSByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBlbWFpbDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBmaXJzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgbGFzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgcm9sZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBsaWNlbnNlTnVtYmVyOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHNwZWNpYWxpemF0aW9uczogeyB0eXBlOiAnYXJyYXknLCBpdGVtczogeyB0eXBlOiAnc3RyaW5nJyB9IH0sXG4gICAgICAgIGFwcHJvdmFsU3RhdHVzOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHByb2ZpbGVDb21wbGV0ZTogeyB0eXBlOiAnYm9vbGVhbicgfSxcbiAgICAgICAgY3JlYXRlZEF0OiB7IHR5cGU6ICdzdHJpbmcnLCBmb3JtYXQ6ICdkYXRlLXRpbWUnIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlVbmF1dGhvcml6ZWRSZXNwb25zZSh7XG4gICAgZGVzY3JpcHRpb246ICdJbnZhbGlkIG9yIG1pc3NpbmcgYXV0aGVudGljYXRpb24gdG9rZW4nLFxuICB9KVxuICBAR2V0KCdwcm9maWxlJylcbiAgYXN5bmMgZ2V0UHJvZmlsZShAQ3VycmVudFVzZXJJZCgpIHVzZXJJZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlcmFwaXN0QXV0aFNlcnZpY2UuZ2V0VGhlcmFwaXN0UHJvZmlsZSh1c2VySWQpO1xuICB9XG5cbiAgLy8gQWRtaW4tb25seSBlbmRwb2ludHMgZm9yIG1hbmFnaW5nIHRoZXJhcGlzdCBhcHBsaWNhdGlvbnNcbiAgQEdldCgnYXBwbGljYXRpb25zJylcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0dldCBhbGwgdGhlcmFwaXN0IGFwcGxpY2F0aW9ucyAoQWRtaW4gb25seSknLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ1JldHJpZXZlIGFsbCB0aGVyYXBpc3QgYXBwbGljYXRpb25zIHdpdGggb3B0aW9uYWwgZmlsdGVyaW5nIGFuZCBwYWdpbmF0aW9uLiBBZG1pbiBhY2Nlc3MgcmVxdWlyZWQuJyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAnc3RhdHVzJyxcbiAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgZGVzY3JpcHRpb246ICdGaWx0ZXIgYnkgYXBwbGljYXRpb24gc3RhdHVzJyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAncGFnZScsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIGRlc2NyaXB0aW9uOiAnUGFnZSBudW1iZXIgZm9yIHBhZ2luYXRpb24nLFxuICB9KVxuICBAQXBpUXVlcnkoe1xuICAgIG5hbWU6ICdsaW1pdCcsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIGRlc2NyaXB0aW9uOiAnTnVtYmVyIG9mIGl0ZW1zIHBlciBwYWdlJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ0FwcGxpY2F0aW9ucyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBhcHBsaWNhdGlvbnM6IHtcbiAgICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgZW1haWw6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgICAgZmlyc3ROYW1lOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICAgIGxhc3ROYW1lOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICAgIHN0YXR1czogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgICBzdWJtaXR0ZWRBdDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB0b3RhbENvdW50OiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgICAgIHBhZ2U6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgICAgdG90YWxQYWdlczogeyB0eXBlOiAnbnVtYmVyJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpVW5hdXRob3JpemVkUmVzcG9uc2Uoe1xuICAgIGRlc2NyaXB0aW9uOiAnSW52YWxpZCBvciBtaXNzaW5nIGF1dGhlbnRpY2F0aW9uIHRva2VuJyxcbiAgfSlcbiAgQEFwaUZvcmJpZGRlblJlc3BvbnNlKHsgZGVzY3JpcHRpb246ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0pXG4gIEBBcGlJbnRlcm5hbFNlcnZlckVycm9yUmVzcG9uc2Uoe1xuICAgIGRlc2NyaXB0aW9uOiAnRmFpbGVkIHRvIGZldGNoIGFwcGxpY2F0aW9ucycsXG4gIH0pXG4gIEBVc2VHdWFyZHMoSnd0QXV0aEd1YXJkKVxuICBhc3luYyBnZXRBbGxBcHBsaWNhdGlvbnMoXG4gICAgQEN1cnJlbnRVc2VyUm9sZSgpIHJvbGU6IHN0cmluZyxcbiAgICBAUXVlcnkoJ3N0YXR1cycpIHN0YXR1cz86IHN0cmluZyxcbiAgICBAUXVlcnkoJ3BhZ2UnKSBwYWdlPzogbnVtYmVyLFxuICAgIEBRdWVyeSgnbGltaXQnKSBsaW1pdD86IG51bWJlcixcbiAgKTogUHJvbWlzZTx7XG4gICAgYXBwbGljYXRpb25zOiBUaGVyYXBpc3RBcHBsaWNhdGlvblJlc3BvbnNlW107XG4gICAgdG90YWxDb3VudDogbnVtYmVyO1xuICAgIHBhZ2U6IG51bWJlcjtcbiAgICB0b3RhbFBhZ2VzOiBudW1iZXI7XG4gIH0+IHtcbiAgICBpZiAocm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgdGhyb3cgbmV3IEZvcmJpZGRlbkV4Y2VwdGlvbignQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYWdlTnVtID0gcGFnZSA/IE1hdGgubWF4KDEsIHBhZ2UpIDogMTtcbiAgICAgIGNvbnN0IGxpbWl0TnVtID0gbGltaXQgPyBNYXRoLm1pbihNYXRoLm1heCgxLCBsaW1pdCksIDEwMCkgOiAxMDtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy50aGVyYXBpc3RBdXRoU2VydmljZS5nZXRBbGxBcHBsaWNhdGlvbnMoe1xuICAgICAgICBzdGF0dXMsXG4gICAgICAgIHBhZ2U6IHBhZ2VOdW0sXG4gICAgICAgIGxpbWl0OiBsaW1pdE51bSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhcHBsaWNhdGlvbnM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEludGVybmFsU2VydmVyRXJyb3JFeGNlcHRpb24oJ0ZhaWxlZCB0byBmZXRjaCBhcHBsaWNhdGlvbnMnKTtcbiAgICB9XG4gIH1cblxuICBAR2V0KCdhcHBsaWNhdGlvbnMvOmlkJylcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0dldCB0aGVyYXBpc3QgYXBwbGljYXRpb24gYnkgSUQgKEFkbWluIG9ubHkpJyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdSZXRyaWV2ZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIHRoZXJhcGlzdCBhcHBsaWNhdGlvbi4gQWRtaW4gYWNjZXNzIHJlcXVpcmVkLicsXG4gIH0pXG4gIEBBcGlQYXJhbSh7IG5hbWU6ICdpZCcsIGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gSUQnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdBcHBsaWNhdGlvbiByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBlbWFpbDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBmaXJzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgbGFzdE5hbWU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgbGljZW5zZU51bWJlcjogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBzcGVjaWFsaXphdGlvbnM6IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHsgdHlwZTogJ3N0cmluZycgfSB9LFxuICAgICAgICBlZHVjYXRpb246IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgZXhwZXJpZW5jZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBzdGF0dXM6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgc3VibWl0dGVkQXQ6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgICAgcmV2aWV3ZWRBdDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJywgbnVsbGFibGU6IHRydWUgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVVuYXV0aG9yaXplZFJlc3BvbnNlKHtcbiAgICBkZXNjcmlwdGlvbjogJ0ludmFsaWQgb3IgbWlzc2luZyBhdXRoZW50aWNhdGlvbiB0b2tlbicsXG4gIH0pXG4gIEBBcGlGb3JiaWRkZW5SZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KVxuICBAQXBpTm90Rm91bmRSZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gbm90IGZvdW5kJyB9KVxuICBAQXBpSW50ZXJuYWxTZXJ2ZXJFcnJvclJlc3BvbnNlKHtcbiAgICBkZXNjcmlwdGlvbjogJ0ZhaWxlZCB0byBmZXRjaCBhcHBsaWNhdGlvbicsXG4gIH0pXG4gIEBVc2VHdWFyZHMoSnd0QXV0aEd1YXJkKVxuICBhc3luYyBnZXRBcHBsaWNhdGlvbkJ5SWQoXG4gICAgQEN1cnJlbnRVc2VyUm9sZSgpIHJvbGU6IHN0cmluZyxcbiAgICBAUGFyYW0oJ2lkJykgaWQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxUaGVyYXBpc3RBcHBsaWNhdGlvblJlc3BvbnNlPiB7XG4gICAgaWYgKHJvbGUgIT09ICdhZG1pbicpIHtcbiAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5FeGNlcHRpb24oJ0FkbWluIGFjY2VzcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgYXBwbGljYXRpb24gPVxuICAgICAgICBhd2FpdCB0aGlzLnRoZXJhcGlzdEF1dGhTZXJ2aWNlLmdldEFwcGxpY2F0aW9uQnlJZChpZCk7XG5cbiAgICAgIGlmICghYXBwbGljYXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCdBcHBsaWNhdGlvbiBub3QgZm91bmQnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhcHBsaWNhdGlvbjonLCBlcnJvcik7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uKCdGYWlsZWQgdG8gZmV0Y2ggYXBwbGljYXRpb24nKTtcbiAgICB9XG4gIH1cblxuICBAUHV0KCdhcHBsaWNhdGlvbnMvOmlkL3N0YXR1cycpXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdVcGRhdGUgdGhlcmFwaXN0IGFwcGxpY2F0aW9uIHN0YXR1cyAoQWRtaW4gb25seSknLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ1VwZGF0ZSB0aGUgc3RhdHVzIG9mIGEgdGhlcmFwaXN0IGFwcGxpY2F0aW9uIChhcHByb3ZlLCByZWplY3QsIGV0Yy4pLiBBZG1pbiBhY2Nlc3MgcmVxdWlyZWQuJyxcbiAgfSlcbiAgQEFwaVBhcmFtKHsgbmFtZTogJ2lkJywgZGVzY3JpcHRpb246ICdBcHBsaWNhdGlvbiBJRCcgfSlcbiAgQEFwaUJvZHkoe1xuICAgIGRlc2NyaXB0aW9uOiAnU3RhdHVzIHVwZGF0ZSBkYXRhJyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcmVxdWlyZWQ6IFsnc3RhdHVzJ10sXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHN0YXR1czoge1xuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGVudW06IFsnYXBwcm92ZWQnLCAncmVqZWN0ZWQnLCAncGVuZGluZyddLFxuICAgICAgICAgIGV4YW1wbGU6ICdhcHByb3ZlZCcsXG4gICAgICAgIH0sXG4gICAgICAgIG5vdGVzOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdPcHRpb25hbCBub3RlcyBhYm91dCB0aGUgZGVjaXNpb24nLFxuICAgICAgICB9LFxuICAgICAgICByZXZpZXdlckNvbW1lbnRzOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdDb21tZW50cyBmcm9tIHRoZSByZXZpZXdpbmcgYWRtaW4nLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gc3RhdHVzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBzdWNjZXNzOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgICAgICBtZXNzYWdlOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgZW1haWw6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0dlbmVyYXRlZCBjcmVkZW50aWFscyBmb3IgYXBwcm92ZWQgYXBwbGljYXRpb25zJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVVuYXV0aG9yaXplZFJlc3BvbnNlKHtcbiAgICBkZXNjcmlwdGlvbjogJ0ludmFsaWQgb3IgbWlzc2luZyBhdXRoZW50aWNhdGlvbiB0b2tlbicsXG4gIH0pXG4gIEBBcGlGb3JiaWRkZW5SZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KVxuICBAQXBpTm90Rm91bmRSZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gbm90IGZvdW5kJyB9KVxuICBAQXBpSW50ZXJuYWxTZXJ2ZXJFcnJvclJlc3BvbnNlKHtcbiAgICBkZXNjcmlwdGlvbjogJ0ZhaWxlZCB0byB1cGRhdGUgYXBwbGljYXRpb24gc3RhdHVzJyxcbiAgfSlcbiAgQFVzZUd1YXJkcyhKd3RBdXRoR3VhcmQpXG4gIGFzeW5jIHVwZGF0ZUFwcGxpY2F0aW9uU3RhdHVzKFxuICAgIEBDdXJyZW50VXNlclJvbGUoKSByb2xlOiBzdHJpbmcsXG4gICAgQFBhcmFtKCdpZCcpIGlkOiBzdHJpbmcsXG4gICAgQEJvZHkoKSB1cGRhdGVEYXRhOiBBcHBsaWNhdGlvblN0YXR1c1VwZGF0ZUR0byxcbiAgKTogUHJvbWlzZTx7XG4gICAgc3VjY2VzczogYm9vbGVhbjtcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgY3JlZGVudGlhbHM/OiB7IGVtYWlsOiBzdHJpbmc7IHBhc3N3b3JkOiBzdHJpbmcgfTtcbiAgfT4ge1xuICAgIGlmIChyb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXhjZXB0aW9uKCdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudGhlcmFwaXN0QXV0aFNlcnZpY2UudXBkYXRlQXBwbGljYXRpb25TdGF0dXMoXG4gICAgICAgIGlkLFxuICAgICAgICB1cGRhdGVEYXRhLFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgYXBwbGljYXRpb24gc3RhdHVzOicsIGVycm9yKTtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIE5vdEZvdW5kRXhjZXB0aW9uKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEludGVybmFsU2VydmVyRXJyb3JFeGNlcHRpb24oXG4gICAgICAgICdGYWlsZWQgdG8gdXBkYXRlIGFwcGxpY2F0aW9uIHN0YXR1cycsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIEBHZXQoJ2FwcGxpY2F0aW9ucy86aWQvZmlsZXMnKVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnR2V0IHRoZXJhcGlzdCBhcHBsaWNhdGlvbiBmaWxlcyAoQWRtaW4gb25seSknLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ1JldHJpZXZlIGFsbCB1cGxvYWRlZCBmaWxlcyBmb3IgYSBzcGVjaWZpYyB0aGVyYXBpc3QgYXBwbGljYXRpb24uIEFkbWluIGFjY2VzcyByZXF1aXJlZC4nLFxuICB9KVxuICBAQXBpUGFyYW0oeyBuYW1lOiAnaWQnLCBkZXNjcmlwdGlvbjogJ0FwcGxpY2F0aW9uIElEJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gZmlsZXMgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgaXRlbXM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBpZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgIGZpbGVOYW1lOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgZmlsZVVybDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgIHVwbG9hZGVkQXQ6IHsgdHlwZTogJ3N0cmluZycsIGZvcm1hdDogJ2RhdGUtdGltZScgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVVuYXV0aG9yaXplZFJlc3BvbnNlKHtcbiAgICBkZXNjcmlwdGlvbjogJ0ludmFsaWQgb3IgbWlzc2luZyBhdXRoZW50aWNhdGlvbiB0b2tlbicsXG4gIH0pXG4gIEBBcGlGb3JiaWRkZW5SZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KVxuICBAQXBpTm90Rm91bmRSZXNwb25zZSh7IGRlc2NyaXB0aW9uOiAnQXBwbGljYXRpb24gb3IgZmlsZXMgbm90IGZvdW5kJyB9KVxuICBAQXBpSW50ZXJuYWxTZXJ2ZXJFcnJvclJlc3BvbnNlKHtcbiAgICBkZXNjcmlwdGlvbjogJ0ZhaWxlZCB0byBmZXRjaCBhcHBsaWNhdGlvbiBmaWxlcycsXG4gIH0pXG4gIEBVc2VHdWFyZHMoSnd0QXV0aEd1YXJkKVxuICBhc3luYyBnZXRBcHBsaWNhdGlvbkZpbGVzKFxuICAgIEBDdXJyZW50VXNlclJvbGUoKSByb2xlOiBzdHJpbmcsXG4gICAgQFBhcmFtKCdpZCcpIGFwcGxpY2F0aW9uSWQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxcbiAgICBBcnJheTx7XG4gICAgICBpZDogc3RyaW5nO1xuICAgICAgZmlsZU5hbWU6IHN0cmluZztcbiAgICAgIGZpbGVVcmw6IHN0cmluZztcbiAgICAgIHVwbG9hZGVkQXQ6IHN0cmluZztcbiAgICB9PlxuICA+IHtcbiAgICBpZiAocm9sZSAhPT0gJ2FkbWluJykge1xuICAgICAgdGhyb3cgbmV3IEZvcmJpZGRlbkV4Y2VwdGlvbignQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWxlcyA9XG4gICAgICAgIGF3YWl0IHRoaXMudGhlcmFwaXN0QXV0aFNlcnZpY2UuZ2V0QXBwbGljYXRpb25GaWxlcyhhcHBsaWNhdGlvbklkKTtcbiAgICAgIHJldHVybiBmaWxlcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYXBwbGljYXRpb24gZmlsZXM6JywgZXJyb3IpO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTm90Rm91bmRFeGNlcHRpb24pIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbihcbiAgICAgICAgJ0ZhaWxlZCB0byBmZXRjaCBhcHBsaWNhdGlvbiBmaWxlcycsXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuIl0sInZlcnNpb24iOjN9