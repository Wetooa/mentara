{"file":"/home/wetooa/Documents/code/projects/mentara/mentara-api/src/admin/controllers/admin-user.controller.spec.ts","mappings":"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","names":[],"sources":["/home/wetooa/Documents/code/projects/mentara/mentara-api/src/admin/controllers/admin-user.controller.spec.ts"],"sourcesContent":["/**\n * Comprehensive Test Suite for AdminUserController\n * Tests admin functionality for managing users, suspensions, and user queries\n */\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { BadRequestException, NotFoundException, ForbiddenException, HttpException, HttpStatus } from '@nestjs/common';\nimport { AdminUserController } from './admin-user.controller';\nimport { AdminService } from '../admin.service';\nimport { JwtAuthGuard } from '../../auth/guards/jwt-auth.guard';\nimport { AdminAuthGuard } from '../../auth/guards/admin-auth.guard';\nimport { ZodValidationPipe } from '../../common/pipes/zod-validation.pipe';\nimport { SecurityGuardTestUtils, RoleBasedTestUtils } from '../../test-utils/auth-testing-helpers';\nimport { MockBuilder, TestDataGenerator, TestAssertions } from '../../test-utils/enhanced-test-helpers';\nimport { TEST_USER_IDS, TEST_EMAILS } from '../../test-utils/index';\n\ndescribe('AdminUserController', () => {\n  let controller: AdminUserController;\n  let adminService: AdminService;\n  let module: TestingModule;\n\n  // Mock AdminService\n  const mockAdminService = {\n    getAllUsers: jest.fn(),\n    getUser: jest.fn(),\n    suspendUser: jest.fn(),\n    unsuspendUser: jest.fn(),\n  };\n\n  // Mock Guards\n  const mockJwtAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  const mockAdminAuthGuard = {\n    canActivate: jest.fn().mockReturnValue(true),\n  };\n\n  // Test data\n  const mockUser = {\n    id: TEST_USER_IDS.CLIENT,\n    email: TEST_EMAILS.CLIENT,\n    firstName: 'John',\n    lastName: 'Doe',\n    role: 'client',\n    status: 'active',\n    isEmailVerified: true,\n    lastLoginAt: new Date('2024-02-14T10:00:00Z'),\n    createdAt: new Date('2024-01-01T00:00:00Z'),\n    updatedAt: new Date('2024-02-14T10:00:00Z'),\n    profile: {\n      dateOfBirth: new Date('1990-05-15'),\n      phoneNumber: '+1234567890',\n      emergencyContact: {\n        name: 'Jane Doe',\n        phone: '+1234567891',\n        relationship: 'spouse',\n      },\n    },\n    preferences: {\n      therapistGender: 'no-preference',\n      sessionType: 'video',\n      language: 'english',\n    },\n    suspensionHistory: [],\n  };\n\n  const mockTherapist = {\n    id: TEST_USER_IDS.THERAPIST,\n    email: TEST_EMAILS.THERAPIST,\n    firstName: 'Dr. Sarah',\n    lastName: 'Smith',\n    role: 'therapist',\n    status: 'active',\n    isEmailVerified: true,\n    lastLoginAt: new Date('2024-02-14T08:00:00Z'),\n    createdAt: new Date('2024-01-15T00:00:00Z'),\n    updatedAt: new Date('2024-02-14T08:00:00Z'),\n    profile: {\n      licenseNumber: 'PSY123456',\n      specializations: ['anxiety', 'depression'],\n      yearsOfExperience: 8,\n      hourlyRate: 150,\n    },\n    suspensionHistory: [],\n  };\n\n  const mockUsersList = {\n    users: [mockUser, mockTherapist],\n    pagination: {\n      page: 1,\n      limit: 20,\n      total: 2,\n      totalPages: 1,\n      hasNext: false,\n      hasPrev: false,\n    },\n    summary: {\n      totalUsers: 2,\n      activeUsers: 2,\n      suspendedUsers: 0,\n      roleBreakdown: {\n        client: 1,\n        therapist: 1,\n        moderator: 0,\n        admin: 0,\n      },\n    },\n  };\n\n  const mockSuspendedUser = {\n    ...mockUser,\n    status: 'suspended',\n    suspension: {\n      reason: 'Policy violation',\n      suspendedAt: new Date(),\n      suspendedBy: TEST_USER_IDS.ADMIN,\n      duration: 30, // days\n      expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\n    },\n  };\n\n  beforeEach(async () => {\n    module = await Test.createTestingModule({\n      controllers: [AdminUserController],\n      providers: [\n        {\n          provide: AdminService,\n          useValue: mockAdminService,\n        },\n      ],\n    })\n      .overrideGuard(JwtAuthGuard)\n      .useValue(mockJwtAuthGuard)\n      .overrideGuard(AdminAuthGuard)\n      .useValue(mockAdminAuthGuard)\n      .compile();\n\n    controller = module.get<AdminUserController>(AdminUserController);\n    adminService = module.get<AdminService>(AdminService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Controller Initialization', () => {\n    it('should be defined', () => {\n      expect(controller).toBeDefined();\n    });\n\n    it('should have adminService injected', () => {\n      expect(adminService).toBeDefined();\n    });\n  });\n\n  describe('Security Guards', () => {\n    it('should be protected by JwtAuthGuard and AdminAuthGuard', () => {\n      const guards = Reflect.getMetadata('__guards__', AdminUserController);\n      expect(guards).toContain(JwtAuthGuard);\n      expect(guards).toContain(AdminAuthGuard);\n    });\n\n    it('should have proper route decorators', () => {\n      const controllerMetadata = Reflect.getMetadata('path', AdminUserController);\n      expect(controllerMetadata).toBe('admin/users');\n    });\n\n    it('should have AdminOnly decorators on all methods', () => {\n      const methods = ['getAllUsers', 'getUser', 'suspendUser', 'unsuspendUser'];\n      \n      methods.forEach(method => {\n        const metadata = Reflect.getMetadata('admin_only', controller[method as keyof AdminUserController]);\n        expect(metadata).toBeTruthy();\n      });\n    });\n  });\n\n  describe('GET /admin/users', () => {\n    const mockQuery = {\n      page: 1,\n      limit: 20,\n      role: 'client' as const,\n      search: 'john',\n      status: 'active' as const,\n      sortBy: 'createdAt' as const,\n      sortOrder: 'desc' as const,\n    };\n\n    it('should get all users successfully', async () => {\n      mockAdminService.getAllUsers.mockResolvedValue(mockUsersList);\n\n      const result = await controller.getAllUsers(TEST_USER_IDS.ADMIN, mockQuery);\n\n      expect(result).toEqual(mockUsersList);\n      expect(adminService.getAllUsers).toHaveBeenCalledWith({\n        role: mockQuery.role,\n        page: mockQuery.page,\n        limit: mockQuery.limit,\n        search: mockQuery.search,\n        status: mockQuery.status,\n        sortBy: mockQuery.sortBy,\n        sortOrder: mockQuery.sortOrder,\n      });\n    });\n\n    it('should get users without filters', async () => {\n      const emptyQuery = {};\n      mockAdminService.getAllUsers.mockResolvedValue(mockUsersList);\n\n      const result = await controller.getAllUsers(TEST_USER_IDS.ADMIN, emptyQuery);\n\n      expect(result).toEqual(mockUsersList);\n      expect(adminService.getAllUsers).toHaveBeenCalledWith({\n        role: undefined,\n        page: undefined,\n        limit: undefined,\n        search: undefined,\n        status: undefined,\n        sortBy: undefined,\n        sortOrder: undefined,\n      });\n    });\n\n    it('should filter by role correctly', async () => {\n      const roleQueries = ['client', 'therapist', 'moderator', 'admin'] as const;\n      \n      for (const role of roleQueries) {\n        const query = { role };\n        const filteredUsers = {\n          ...mockUsersList,\n          users: mockUsersList.users.filter(user => user.role === role),\n        };\n        mockAdminService.getAllUsers.mockResolvedValue(filteredUsers);\n\n        const result = await controller.getAllUsers(TEST_USER_IDS.ADMIN, query);\n\n        expect(result.users.every(user => user.role === role)).toBe(true);\n        expect(adminService.getAllUsers).toHaveBeenCalledWith(expect.objectContaining({ role }));\n      }\n    });\n\n    it('should filter by status correctly', async () => {\n      const statusQueries = ['active', 'suspended', 'inactive'] as const;\n      \n      for (const status of statusQueries) {\n        const query = { status };\n        const filteredUsers = {\n          ...mockUsersList,\n          users: mockUsersList.users.filter(user => user.status === status),\n        };\n        mockAdminService.getAllUsers.mockResolvedValue(filteredUsers);\n\n        const result = await controller.getAllUsers(TEST_USER_IDS.ADMIN, query);\n\n        expect(adminService.getAllUsers).toHaveBeenCalledWith(expect.objectContaining({ status }));\n      }\n    });\n\n    it('should handle search functionality', async () => {\n      const searchQueries = ['john', 'doe', 'sarah', 'smith', 'test@example.com'];\n      \n      for (const search of searchQueries) {\n        const query = { search };\n        const searchResults = {\n          ...mockUsersList,\n          users: mockUsersList.users.filter(user => \n            user.firstName.toLowerCase().includes(search.toLowerCase()) ||\n            user.lastName.toLowerCase().includes(search.toLowerCase()) ||\n            user.email.toLowerCase().includes(search.toLowerCase())\n          ),\n        };\n        mockAdminService.getAllUsers.mockResolvedValue(searchResults);\n\n        const result = await controller.getAllUsers(TEST_USER_IDS.ADMIN, query);\n\n        expect(adminService.getAllUsers).toHaveBeenCalledWith(expect.objectContaining({ search }));\n      }\n    });\n\n    it('should handle pagination correctly', async () => {\n      const paginatedQuery = { page: 2, limit: 10 };\n      const paginatedResult = {\n        ...mockUsersList,\n        pagination: {\n          page: 2,\n          limit: 10,\n          total: 50,\n          totalPages: 5,\n          hasNext: true,\n          hasPrev: true,\n        },\n      };\n      mockAdminService.getAllUsers.mockResolvedValue(paginatedResult);\n\n      const result = await controller.getAllUsers(TEST_USER_IDS.ADMIN, paginatedQuery);\n\n      expect(result.pagination.page).toBe(2);\n      expect(result.pagination.limit).toBe(10);\n      expect(result.pagination.totalPages).toBe(5);\n    });\n\n    it('should handle sorting options', async () => {\n      const sortOptions = [\n        { sortBy: 'createdAt', sortOrder: 'desc' },\n        { sortBy: 'lastLoginAt', sortOrder: 'asc' },\n        { sortBy: 'email', sortOrder: 'asc' },\n        { sortBy: 'status', sortOrder: 'desc' },\n      ] as const;\n\n      for (const sortOption of sortOptions) {\n        const query = sortOption;\n        mockAdminService.getAllUsers.mockResolvedValue(mockUsersList);\n\n        const result = await controller.getAllUsers(TEST_USER_IDS.ADMIN, query);\n\n        expect(adminService.getAllUsers).toHaveBeenCalledWith(expect.objectContaining(sortOption));\n      }\n    });\n\n    it('should handle empty results', async () => {\n      const emptyResult = {\n        users: [],\n        pagination: { page: 1, limit: 20, total: 0, totalPages: 0, hasNext: false, hasPrev: false },\n        summary: { totalUsers: 0, activeUsers: 0, suspendedUsers: 0, roleBreakdown: { client: 0, therapist: 0, moderator: 0, admin: 0 } },\n      };\n      mockAdminService.getAllUsers.mockResolvedValue(emptyResult);\n\n      const result = await controller.getAllUsers(TEST_USER_IDS.ADMIN, {});\n\n      expect(result.users).toEqual([]);\n      expect(result.summary.totalUsers).toBe(0);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database connection failed');\n      mockAdminService.getAllUsers.mockRejectedValue(serviceError);\n\n      await expect(controller.getAllUsers(TEST_USER_IDS.ADMIN, {})).rejects.toThrow(HttpException);\n      await expect(controller.getAllUsers(TEST_USER_IDS.ADMIN, {})).rejects.toThrow('Failed to retrieve users');\n    });\n\n    it('should log admin actions', async () => {\n      const logSpy = jest.spyOn(controller['logger'], 'log');\n      mockAdminService.getAllUsers.mockResolvedValue(mockUsersList);\n\n      await controller.getAllUsers(TEST_USER_IDS.ADMIN, {});\n\n      expect(logSpy).toHaveBeenCalledWith(`Admin ${TEST_USER_IDS.ADMIN} retrieving users`);\n    });\n  });\n\n  describe('GET /admin/users/:id', () => {\n    const userId = TEST_USER_IDS.CLIENT;\n\n    it('should get user by id successfully', async () => {\n      mockAdminService.getUser.mockResolvedValue(mockUser);\n\n      const result = await controller.getUser(TEST_USER_IDS.ADMIN, userId);\n\n      expect(result).toEqual(mockUser);\n      expect(adminService.getUser).toHaveBeenCalledWith(userId);\n    });\n\n    it('should handle user not found', async () => {\n      mockAdminService.getUser.mockResolvedValue(null);\n\n      await expect(controller.getUser(TEST_USER_IDS.ADMIN, 'non-existent-id')).rejects.toThrow(HttpException);\n      await expect(controller.getUser(TEST_USER_IDS.ADMIN, 'non-existent-id')).rejects.toThrow('User not found');\n    });\n\n    it('should return complete user details', async () => {\n      const detailedUser = {\n        ...mockUser,\n        sessions: [\n          { id: 'session_1', date: new Date(), status: 'completed' },\n          { id: 'session_2', date: new Date(), status: 'scheduled' },\n        ],\n        tickets: [\n          { id: 'ticket_1', subject: 'Login issue', status: 'resolved' },\n        ],\n        activityLog: [\n          { action: 'login', timestamp: new Date(), ip: '192.168.1.1' },\n          { action: 'profile_update', timestamp: new Date(), ip: '192.168.1.1' },\n        ],\n      };\n      mockAdminService.getUser.mockResolvedValue(detailedUser);\n\n      const result = await controller.getUser(TEST_USER_IDS.ADMIN, userId);\n\n      expect(result.sessions).toBeDefined();\n      expect(result.tickets).toBeDefined();\n      expect(result.activityLog).toBeDefined();\n      expect(Array.isArray(result.sessions)).toBe(true);\n      expect(Array.isArray(result.tickets)).toBe(true);\n      expect(Array.isArray(result.activityLog)).toBe(true);\n    });\n\n    it('should handle service errors gracefully', async () => {\n      const serviceError = new Error('Database error');\n      mockAdminService.getUser.mockRejectedValue(serviceError);\n\n      await expect(controller.getUser(TEST_USER_IDS.ADMIN, userId)).rejects.toThrow(HttpException);\n      await expect(controller.getUser(TEST_USER_IDS.ADMIN, userId)).rejects.toThrow('Failed to retrieve user');\n    });\n\n    it('should log admin actions', async () => {\n      const logSpy = jest.spyOn(controller['logger'], 'log');\n      mockAdminService.getUser.mockResolvedValue(mockUser);\n\n      await controller.getUser(TEST_USER_IDS.ADMIN, userId);\n\n      expect(logSpy).toHaveBeenCalledWith(`Admin ${TEST_USER_IDS.ADMIN} retrieving user ${userId}`);\n    });\n\n    it('should handle different user roles', async () => {\n      const userRoles = ['client', 'therapist', 'moderator', 'admin'];\n      \n      for (const role of userRoles) {\n        const roleUser = { ...mockUser, role };\n        mockAdminService.getUser.mockResolvedValue(roleUser);\n\n        const result = await controller.getUser(TEST_USER_IDS.ADMIN, userId);\n\n        expect(result.role).toBe(role);\n      }\n    });\n  });\n\n  describe('PUT /admin/users/:id/suspend', () => {\n    const userId = TEST_USER_IDS.CLIENT;\n    const suspensionData = {\n      reason: 'Policy violation - inappropriate behavior',\n      duration: 30, // 30 days\n    };\n\n    it('should suspend user successfully', async () => {\n      mockAdminService.suspendUser.mockResolvedValue(mockSuspendedUser);\n\n      const result = await controller.suspendUser(TEST_USER_IDS.ADMIN, userId, suspensionData);\n\n      expect(result).toEqual(mockSuspendedUser);\n      expect(result.status).toBe('suspended');\n      expect(adminService.suspendUser).toHaveBeenCalledWith(\n        userId,\n        TEST_USER_IDS.ADMIN,\n        suspensionData.reason,\n        suspensionData.duration,\n      );\n    });\n\n    it('should suspend user without duration (permanent)', async () => {\n      const permanentSuspension = { reason: 'Severe policy violation' };\n      const permanentlySuspendedUser = {\n        ...mockSuspendedUser,\n        suspension: {\n          ...mockSuspendedUser.suspension,\n          duration: null,\n          expiresAt: null,\n        },\n      };\n      mockAdminService.suspendUser.mockResolvedValue(permanentlySuspendedUser);\n\n      const result = await controller.suspendUser(TEST_USER_IDS.ADMIN, userId, permanentSuspension);\n\n      expect(result.suspension.duration).toBeNull();\n      expect(result.suspension.expiresAt).toBeNull();\n      expect(adminService.suspendUser).toHaveBeenCalledWith(\n        userId,\n        TEST_USER_IDS.ADMIN,\n        permanentSuspension.reason,\n        undefined,\n      );\n    });\n\n    it('should handle different suspension reasons', async () => {\n      const suspensionReasons = [\n        'Policy violation',\n        'Inappropriate behavior',\n        'Terms of service violation',\n        'Security concerns',\n        'Payment issues',\n        'Abuse of platform',\n      ];\n\n      for (const reason of suspensionReasons) {\n        const data = { reason, duration: 15 };\n        const suspendedUser = {\n          ...mockSuspendedUser,\n          suspension: { ...mockSuspendedUser.suspension, reason },\n        };\n        mockAdminService.suspendUser.mockResolvedValue(suspendedUser);\n\n        const result = await controller.suspendUser(TEST_USER_IDS.ADMIN, userId, data);\n\n        expect(result.suspension.reason).toBe(reason);\n      }\n    });\n\n    it('should handle different suspension durations', async () => {\n      const durations = [1, 7, 14, 30, 90, 365]; // days\n      \n      for (const duration of durations) {\n        const data = { reason: 'Policy violation', duration };\n        const suspendedUser = {\n          ...mockSuspendedUser,\n          suspension: { ...mockSuspendedUser.suspension, duration },\n        };\n        mockAdminService.suspendUser.mockResolvedValue(suspendedUser);\n\n        const result = await controller.suspendUser(TEST_USER_IDS.ADMIN, userId, data);\n\n        expect(result.suspension.duration).toBe(duration);\n      }\n    });\n\n    it('should handle user not found', async () => {\n      const notFoundError = new Error('User not found');\n      mockAdminService.suspendUser.mockRejectedValue(notFoundError);\n\n      await expect(\n        controller.suspendUser(TEST_USER_IDS.ADMIN, 'non-existent-id', suspensionData)\n      ).rejects.toThrow(HttpException);\n      await expect(\n        controller.suspendUser(TEST_USER_IDS.ADMIN, 'non-existent-id', suspensionData)\n      ).rejects.toThrow('Failed to suspend user');\n    });\n\n    it('should handle already suspended user', async () => {\n      const alreadySuspendedError = new Error('User is already suspended');\n      mockAdminService.suspendUser.mockRejectedValue(alreadySuspendedError);\n\n      await expect(\n        controller.suspendUser(TEST_USER_IDS.ADMIN, userId, suspensionData)\n      ).rejects.toThrow(HttpException);\n    });\n\n    it('should log admin actions', async () => {\n      const logSpy = jest.spyOn(controller['logger'], 'log');\n      mockAdminService.suspendUser.mockResolvedValue(mockSuspendedUser);\n\n      await controller.suspendUser(TEST_USER_IDS.ADMIN, userId, suspensionData);\n\n      expect(logSpy).toHaveBeenCalledWith(`Admin ${TEST_USER_IDS.ADMIN} suspending user ${userId}`);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database transaction failed');\n      mockAdminService.suspendUser.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.suspendUser(TEST_USER_IDS.ADMIN, userId, suspensionData)\n      ).rejects.toThrow(HttpException);\n      await expect(\n        controller.suspendUser(TEST_USER_IDS.ADMIN, userId, suspensionData)\n      ).rejects.toThrow('Failed to suspend user');\n    });\n  });\n\n  describe('PUT /admin/users/:id/unsuspend', () => {\n    const userId = TEST_USER_IDS.CLIENT;\n\n    it('should unsuspend user successfully', async () => {\n      const unsuspendedUser = {\n        ...mockUser,\n        status: 'active',\n        suspensionHistory: [{\n          reason: 'Policy violation',\n          suspendedAt: new Date(Date.now() - 86400000), // 1 day ago\n          suspendedBy: TEST_USER_IDS.ADMIN,\n          unsuspendedAt: new Date(),\n          unsuspendedBy: TEST_USER_IDS.ADMIN,\n        }],\n      };\n      mockAdminService.unsuspendUser.mockResolvedValue(unsuspendedUser);\n\n      const result = await controller.unsuspendUser(TEST_USER_IDS.ADMIN, userId);\n\n      expect(result).toEqual(unsuspendedUser);\n      expect(result.status).toBe('active');\n      expect(adminService.unsuspendUser).toHaveBeenCalledWith(userId, TEST_USER_IDS.ADMIN);\n    });\n\n    it('should handle user not found', async () => {\n      const notFoundError = new Error('User not found');\n      mockAdminService.unsuspendUser.mockRejectedValue(notFoundError);\n\n      await expect(\n        controller.unsuspendUser(TEST_USER_IDS.ADMIN, 'non-existent-id')\n      ).rejects.toThrow(HttpException);\n      await expect(\n        controller.unsuspendUser(TEST_USER_IDS.ADMIN, 'non-existent-id')\n      ).rejects.toThrow('Failed to unsuspend user');\n    });\n\n    it('should handle user not suspended', async () => {\n      const notSuspendedError = new Error('User is not suspended');\n      mockAdminService.unsuspendUser.mockRejectedValue(notSuspendedError);\n\n      await expect(\n        controller.unsuspendUser(TEST_USER_IDS.ADMIN, userId)\n      ).rejects.toThrow(HttpException);\n    });\n\n    it('should log admin actions', async () => {\n      const logSpy = jest.spyOn(controller['logger'], 'log');\n      const unsuspendedUser = { ...mockUser, status: 'active' };\n      mockAdminService.unsuspendUser.mockResolvedValue(unsuspendedUser);\n\n      await controller.unsuspendUser(TEST_USER_IDS.ADMIN, userId);\n\n      expect(logSpy).toHaveBeenCalledWith(`Admin ${TEST_USER_IDS.ADMIN} unsuspending user ${userId}`);\n    });\n\n    it('should handle service errors', async () => {\n      const serviceError = new Error('Database update failed');\n      mockAdminService.unsuspendUser.mockRejectedValue(serviceError);\n\n      await expect(\n        controller.unsuspendUser(TEST_USER_IDS.ADMIN, userId)\n      ).rejects.toThrow(HttpException);\n      await expect(\n        controller.unsuspendUser(TEST_USER_IDS.ADMIN, userId)\n      ).rejects.toThrow('Failed to unsuspend user');\n    });\n\n    it('should restore user privileges after unsuspension', async () => {\n      const unsuspendedUser = {\n        ...mockUser,\n        status: 'active',\n        privileges: {\n          canLogin: true,\n          canBookSessions: true,\n          canAccessCommunity: true,\n          canSendMessages: true,\n        },\n        suspensionHistory: [{\n          reason: 'Policy violation',\n          suspendedAt: new Date(Date.now() - 86400000),\n          suspendedBy: TEST_USER_IDS.ADMIN,\n          unsuspendedAt: new Date(),\n          unsuspendedBy: TEST_USER_IDS.ADMIN,\n        }],\n      };\n      mockAdminService.unsuspendUser.mockResolvedValue(unsuspendedUser);\n\n      const result = await controller.unsuspendUser(TEST_USER_IDS.ADMIN, userId);\n\n      expect(result.privileges.canLogin).toBe(true);\n      expect(result.privileges.canBookSessions).toBe(true);\n      expect(result.privileges.canAccessCommunity).toBe(true);\n      expect(result.privileges.canSendMessages).toBe(true);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle service unavailable scenarios', async () => {\n      const serviceError = new Error('Service temporarily unavailable');\n      mockAdminService.getAllUsers.mockRejectedValue(serviceError);\n\n      await expect(controller.getAllUsers(TEST_USER_IDS.ADMIN, {})).rejects.toThrow(HttpException);\n    });\n\n    it('should handle database connection errors', async () => {\n      const dbError = new Error('Database connection failed');\n      mockAdminService.getUser.mockRejectedValue(dbError);\n\n      await expect(controller.getUser(TEST_USER_IDS.ADMIN, TEST_USER_IDS.CLIENT)).rejects.toThrow(HttpException);\n    });\n\n    it('should handle validation errors', async () => {\n      const validationError = new Error('Invalid user data');\n      mockAdminService.suspendUser.mockRejectedValue(validationError);\n\n      await expect(\n        controller.suspendUser(TEST_USER_IDS.ADMIN, TEST_USER_IDS.CLIENT, { reason: '' })\n      ).rejects.toThrow(HttpException);\n    });\n\n    it('should preserve HttpExceptions from service layer', async () => {\n      const httpException = new HttpException('User not found', HttpStatus.NOT_FOUND);\n      mockAdminService.getUser.mockRejectedValue(httpException);\n\n      await expect(controller.getUser(TEST_USER_IDS.ADMIN, TEST_USER_IDS.CLIENT)).rejects.toThrow(httpException);\n    });\n  });\n\n  describe('Response Format Validation', () => {\n    it('should return properly formatted users list response', async () => {\n      mockAdminService.getAllUsers.mockResolvedValue(mockUsersList);\n\n      const result = await controller.getAllUsers(TEST_USER_IDS.ADMIN, {});\n\n      expect(result).toHaveProperty('users');\n      expect(result).toHaveProperty('pagination');\n      expect(result).toHaveProperty('summary');\n      expect(Array.isArray(result.users)).toBe(true);\n      result.users.forEach((user) => {\n        TestAssertions.expectValidEntity(user, ['id', 'email', 'firstName', 'lastName', 'role', 'status']);\n        expect(['client', 'therapist', 'moderator', 'admin']).toContain(user.role);\n        expect(['active', 'suspended', 'inactive']).toContain(user.status);\n      });\n    });\n\n    it('should return properly formatted user details response', async () => {\n      mockAdminService.getUser.mockResolvedValue(mockUser);\n\n      const result = await controller.getUser(TEST_USER_IDS.ADMIN, TEST_USER_IDS.CLIENT);\n\n      TestAssertions.expectValidEntity(result, ['id', 'email', 'firstName', 'lastName', 'role', 'status']);\n      expect(result.isEmailVerified).toBeDefined();\n      expect(typeof result.isEmailVerified).toBe('boolean');\n      expect(result.createdAt).toBeInstanceOf(Date);\n      expect(result.updatedAt).toBeInstanceOf(Date);\n    });\n\n    it('should return properly formatted suspension response', async () => {\n      mockAdminService.suspendUser.mockResolvedValue(mockSuspendedUser);\n\n      const result = await controller.suspendUser(TEST_USER_IDS.ADMIN, TEST_USER_IDS.CLIENT, {\n        reason: 'Policy violation',\n        duration: 30,\n      });\n\n      expect(result.status).toBe('suspended');\n      expect(result.suspension).toBeDefined();\n      expect(result.suspension.reason).toBeDefined();\n      expect(result.suspension.suspendedAt).toBeInstanceOf(Date);\n      expect(result.suspension.suspendedBy).toBe(TEST_USER_IDS.ADMIN);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete user management workflow', async () => {\n      // Get user details\n      mockAdminService.getUser.mockResolvedValue(mockUser);\n      const user = await controller.getUser(TEST_USER_IDS.ADMIN, TEST_USER_IDS.CLIENT);\n      expect(user).toBeDefined();\n      expect(user.status).toBe('active');\n\n      // Suspend user\n      mockAdminService.suspendUser.mockResolvedValue(mockSuspendedUser);\n      const suspendedUser = await controller.suspendUser(TEST_USER_IDS.ADMIN, TEST_USER_IDS.CLIENT, {\n        reason: 'Policy violation',\n        duration: 30,\n      });\n      expect(suspendedUser.status).toBe('suspended');\n\n      // Unsuspend user\n      const unsuspendedUser = { ...mockUser, status: 'active' };\n      mockAdminService.unsuspendUser.mockResolvedValue(unsuspendedUser);\n      const restoredUser = await controller.unsuspendUser(TEST_USER_IDS.ADMIN, TEST_USER_IDS.CLIENT);\n      expect(restoredUser.status).toBe('active');\n    });\n\n    it('should handle user search and filtering workflow', async () => {\n      // Search for users by name\n      const searchResults = {\n        ...mockUsersList,\n        users: [mockUser],\n      };\n      mockAdminService.getAllUsers.mockResolvedValue(searchResults);\n      const searchResult = await controller.getAllUsers(TEST_USER_IDS.ADMIN, { search: 'john' });\n      expect(searchResult.users).toHaveLength(1);\n\n      // Filter by role\n      const roleResults = {\n        ...mockUsersList,\n        users: [mockTherapist],\n      };\n      mockAdminService.getAllUsers.mockResolvedValue(roleResults);\n      const roleResult = await controller.getAllUsers(TEST_USER_IDS.ADMIN, { role: 'therapist' });\n      expect(roleResult.users.every(user => user.role === 'therapist')).toBe(true);\n\n      // Filter by status\n      const statusResults = {\n        ...mockUsersList,\n        users: mockUsersList.users.filter(user => user.status === 'active'),\n      };\n      mockAdminService.getAllUsers.mockResolvedValue(statusResults);\n      const statusResult = await controller.getAllUsers(TEST_USER_IDS.ADMIN, { status: 'active' });\n      expect(statusResult.users.every(user => user.status === 'active')).toBe(true);\n    });\n  });\n});"],"version":3}